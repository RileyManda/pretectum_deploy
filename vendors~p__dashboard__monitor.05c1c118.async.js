(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"+K+b":function(Se,dt,L){var U=L("JHRd");function E(T){var e=new T.constructor(T.byteLength);return new U(e).set(new U(T)),e}Se.exports=E},"+Qka":function(Se,dt,L){var U=L("fmRc"),E=L("t2Dn"),T=L("cq/+"),e=L("T1AV"),t=L("GoyQ"),u=L("mTTR"),s=L("itsj");function h(r,c,n,i,a){r!==c&&T(c,function(o,l){if(a||(a=new U),t(o))e(r,c,l,n,h,i,a);else{var f=i?i(s(r,l),o,l+"",r,c,a):void 0;f===void 0&&(f=o),E(r,l,f)}},u)}Se.exports=h},"+VLl":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return o});var U=L("lSNA"),E=L.n(U),T=L("J4zp"),e=L.n(T),t=L("Hel2"),u=Math.PI/3,s=[0,u,2*u,3*u,4*u,5*u];function h(l){return l[0]}function r(l){return l[1]}var c=function(){var l=0,f=0,v=1,b=1,g=h,y=r,_,M,x;function m(P){var A={},O=[],R,H=P.length;for(R=0;R<H;++R)if(!(isNaN(K=+g.call(null,N=P[R],R,P))||isNaN(V=+y.call(null,N,R,P)))){var N,K,V,k=Math.round(V=V/x),Z=Math.round(K=K/M-(k&1)/2),X=V-k;if(Math.abs(X)*3>1){var at=K-Z,pt=Z+(K<Z?-1:1)/2,gt=k+(V<k?-1:1),ft=K-pt,Rt=V-gt;at*at+X*X>ft*ft+Rt*Rt&&(Z=pt+(k&1?1:-1)/2,k=gt)}var Nt=Z+"-"+k,Dt=A[Nt];Dt?Dt.push(N):(O.push(Dt=A[Nt]=[N]),Dt.x=(Z+(k&1)/2)*M,Dt.y=k*x)}return O}function S(P){var A=0,O=0;return s.map(function(R){var H=Math.sin(R)*P,N=-Math.cos(R)*P,K=H-A,V=N-O;return A=H,O=N,[K,V]})}return m.hexagon=function(P){return"m"+S(P==null?_:+P).join("l")+"z"},m.centers=function(){for(var P=[],A=Math.round(f/x),O=Math.round(l/M),R=A*x;R<b+_;R+=x,++A)for(var H=O*M+(A&1)*M/2;H<v+M/2;H+=M)P.push([H,R]);return P},m.mesh=function(){var P=S(_).slice(0,4).join("l");return m.centers().map(function(A){return"M"+A+"m"+P}).join("")},m.x=function(P){return arguments.length?(g=P,m):g},m.y=function(P){return arguments.length?(y=P,m):y},m.radius=function(P){return arguments.length?(_=+P,M=_*2*Math.sin(u),x=_*1.5,m):_},m.size=function(P){return arguments.length?(l=f=0,v=+P[0],b=+P[1],m):[v-l,b-f]},m.extent=function(P){return arguments.length?(l=+P[0][0],f=+P[0][1],v=+P[1][0],b=+P[1][1],m):[[l,f],[v,b]]},m.radius(1)};function n(l,f){var v=Object.keys(l);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(l);f&&(b=b.filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable})),v.push.apply(v,b)}return v}function i(l){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?n(Object(v),!0).forEach(function(b){E()(l,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(v)):n(Object(v)).forEach(function(b){Object.defineProperty(l,b,Object.getOwnPropertyDescriptor(v,b))})}return l}var a=6378e3;function o(l,f){var v=l.dataArray,b=f.size,g=b===void 0?10:b,y=f.method,_=y===void 0?"sum":y,M=g/(2*Math.PI*a)*(256<<20)/2,x=v.map(function(A){var O=Object(t.d)(A.coordinates),R=e()(O,2),H=R[0],N=R[1];return i(i({},A),{},{coordinates:[H,N]})}),m=c().radius(M).x(function(A){return A.coordinates[0]}).y(function(A){return A.coordinates[1]}),S=m(x),P={dataArray:S.map(function(A,O){var R;if(f.field&&_){var H=t.c.getColumn(A,f.field);A[_]=t.c.statMap[_](H)}return R={},E()(R,f.method,A[_]),E()(R,"count",A.length),E()(R,"rawData",A),E()(R,"coordinates",[A.x,A.y]),E()(R,"_id",O),R}),radius:M,xOffset:M,yOffset:M,type:"hexagon"};return P}},"+em5":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return V});var U=L("lSNA"),E=L.n(U),T=L("yG8O"),e=L.n(T),t=L("lwsE"),u=L.n(t),s=L("W8MJ"),h=L.n(s),r=L("U+yc"),c=L.n(r),n=L("1ABj"),i=L.n(n),a=L("gQMU"),o=L.n(a),l=L("J2iB"),f=L.n(l),v=L("u6S6"),b=L.n(v),g=L("4cb6"),y=L.n(g),_=L("h1nZ"),M=L("bB6j"),x=L("bPkA"),m,S,P,A,O,R;function H(k,Z){var X=Object.keys(k);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(k);Z&&(at=at.filter(function(pt){return Object.getOwnPropertyDescriptor(k,pt).enumerable})),X.push.apply(X,at)}return X}function N(k){for(var Z=1;Z<arguments.length;Z++){var X=arguments[Z]!=null?arguments[Z]:{};Z%2?H(Object(X),!0).forEach(function(at){E()(k,at,X[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(X)):H(Object(X)).forEach(function(at){Object.defineProperty(k,at,Object.getOwnPropertyDescriptor(X,at))})}return k}var K=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,V=(m=Object(g.injectable)(),S=Object(g.inject)(M.a.IShaderModuleService),m(P=(A=(R=function(){function k(){u()(this,k),e()(this,"shaderModuleService",O,this),this.rendererService=void 0,this.config=void 0,this.quad=K,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.name=void 0,this.optionsToUpdate={}}return h()(k,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(X){this.name=X}},{key:"getType",value:function(){return x.a.PostProcessing}},{key:"init",value:function(X,at){this.config=at,this.rendererService=X.getContainer().get(M.a.IRendererService);var pt=this.rendererService,gt=pt.createAttribute,ft=pt.createBuffer,Rt=pt.createModel,Nt=this.setupShaders(),Dt=Nt.vs,St=Nt.fs,xt=Nt.uniforms;this.model=Rt({vs:Dt,fs:St,attributes:{a_Position:gt({buffer:ft({data:[-4,-4,4,-4,0,4],type:_.gl.FLOAT}),size:2})},uniforms:N(N({u_Texture:null},xt),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(X){var at=this,pt=X.multiPassRenderer.getPostProcessor(),gt=this.rendererService,ft=gt.useFramebuffer,Rt=gt.getViewportSize,Nt=gt.clear,Dt=Rt(),St=Dt.width,xt=Dt.height;ft(this.renderToScreen?null:pt.getWriteFBO(),function(){Nt({framebuffer:pt.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),at.model.draw({uniforms:N({u_Texture:pt.getReadFBO(),u_ViewportSize:[St,xt]},at.convertOptionsToUniforms(at.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(X){this.enabled=X}},{key:"setRenderToScreen",value:function(X){this.renderToScreen=X}},{key:"updateOptions",value:function(X){this.optionsToUpdate=N(N({},this.optionsToUpdate),X)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(X){var at={};return Object.keys(X).forEach(function(pt){f()(X[pt])||(at["u_".concat(o()(b()(pt)))]=X[pt])}),at}}]),k}(),R),O=c()(A.prototype,"shaderModuleService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A))||P)},"+iFO":function(Se,dt,L){var U=L("dTAl"),E=L("LcsW"),T=L("6sVZ");function e(t){return typeof t.constructor=="function"&&!T(t)?U(E(t)):{}}Se.exports=e},"/33/":function(Se,dt){},"/Uc5":function(Se,dt){},"/ezw":function(Se,dt,L){"use strict";var U=L("rePB"),E=L("wx14"),T=L("U8pU"),e=L("q1tI"),t=L("TSYQ"),u=L.n(t),s=function(V){var k=V.prefixCls,Z=V.className,X=V.width,at=V.style;return e.createElement("h3",{className:u()(k,Z),style:Object(E.a)({width:X},at)})},h=s,r=L("KQm4"),c=function(V){var k=function(Rt){var Nt=V.width,Dt=V.rows,St=Dt===void 0?2:Dt;if(Array.isArray(Nt))return Nt[Rt];if(St-1===Rt)return Nt},Z=V.prefixCls,X=V.className,at=V.style,pt=V.rows,gt=Object(r.a)(Array(pt)).map(function(ft,Rt){return e.createElement("li",{key:Rt,style:{width:k(Rt)}})});return e.createElement("ul",{className:u()(Z,X),style:at},gt)},n=c,i=L("H84U"),a=function(V){var k,Z,X=V.prefixCls,at=V.className,pt=V.style,gt=V.size,ft=V.shape,Rt=u()((k={},Object(U.a)(k,"".concat(X,"-lg"),gt==="large"),Object(U.a)(k,"".concat(X,"-sm"),gt==="small"),k)),Nt=u()((Z={},Object(U.a)(Z,"".concat(X,"-circle"),ft==="circle"),Object(U.a)(Z,"".concat(X,"-square"),ft==="square"),Object(U.a)(Z,"".concat(X,"-round"),ft==="round"),Z)),Dt=typeof gt=="number"?{width:gt,height:gt,lineHeight:"".concat(gt,"px")}:{};return e.createElement("span",{className:u()(X,Rt,Nt,at),style:Object(E.a)(Object(E.a)({},Dt),pt)})},o=a,l=L("bT9E"),f=function(V){var k=function(X){var at=X.getPrefixCls,pt=V.prefixCls,gt=V.className,ft=V.active,Rt=at("skeleton",pt),Nt=Object(l.a)(V,["prefixCls"]),Dt=u()(Rt,"".concat(Rt,"-element"),Object(U.a)({},"".concat(Rt,"-active"),ft),gt);return e.createElement("div",{className:Dt},e.createElement(o,Object(E.a)({prefixCls:"".concat(Rt,"-avatar")},Nt)))};return e.createElement(i.a,null,k)};f.defaultProps={size:"default",shape:"circle"};var v=f,b=function(V){var k=function(X){var at=X.getPrefixCls,pt=V.prefixCls,gt=V.className,ft=V.active,Rt=at("skeleton",pt),Nt=Object(l.a)(V,["prefixCls"]),Dt=u()(Rt,"".concat(Rt,"-element"),Object(U.a)({},"".concat(Rt,"-active"),ft),gt);return e.createElement("div",{className:Dt},e.createElement(o,Object(E.a)({prefixCls:"".concat(Rt,"-button")},Nt)))};return e.createElement(i.a,null,k)};b.defaultProps={size:"default"};var g=b,y=function(V){var k=function(X){var at=X.getPrefixCls,pt=V.prefixCls,gt=V.className,ft=V.active,Rt=at("skeleton",pt),Nt=Object(l.a)(V,["prefixCls"]),Dt=u()(Rt,"".concat(Rt,"-element"),Object(U.a)({},"".concat(Rt,"-active"),ft),gt);return e.createElement("div",{className:Dt},e.createElement(o,Object(E.a)({prefixCls:"".concat(Rt,"-input")},Nt)))};return e.createElement(i.a,null,k)};y.defaultProps={size:"default"};var _=y,M="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",x=function(V){var k=function(X){var at=X.getPrefixCls,pt=V.prefixCls,gt=V.className,ft=V.style,Rt=at("skeleton",pt),Nt=u()(Rt,"".concat(Rt,"-element"),gt);return e.createElement("div",{className:Nt},e.createElement("div",{className:u()("".concat(Rt,"-image"),gt),style:ft},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(Rt,"-image-svg")},e.createElement("path",{d:M,className:"".concat(Rt,"-image-path")}))))};return e.createElement(i.a,null,k)},m=x;function S(K){return K&&Object(T.a)(K)==="object"?K:{}}function P(K,V){return K&&!V?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function A(K,V){return!K&&V?{width:"38%"}:K&&V?{width:"50%"}:{}}function O(K,V){var k={};return(!K||!V)&&(k.width="61%"),!K&&V?k.rows=3:k.rows=2,k}var R=function(V){var k=function(X){var at=X.getPrefixCls,pt=X.direction,gt=V.prefixCls,ft=V.loading,Rt=V.className,Nt=V.children,Dt=V.avatar,St=V.title,xt=V.paragraph,Ot=V.active,it=V.round,At=at("skeleton",gt);if(ft||!("loading"in V)){var z,q=!!Dt,mt=!!St,et=!!xt,st;if(q){var bt=Object(E.a)(Object(E.a)({prefixCls:"".concat(At,"-avatar")},P(mt,et)),S(Dt));st=e.createElement("div",{className:"".concat(At,"-header")},e.createElement(o,bt))}var Y;if(mt||et){var rt;if(mt){var ot=Object(E.a)(Object(E.a)({prefixCls:"".concat(At,"-title")},A(q,et)),S(St));rt=e.createElement(h,ot)}var $;if(et){var Pt=Object(E.a)(Object(E.a)({prefixCls:"".concat(At,"-paragraph")},O(q,mt)),S(xt));$=e.createElement(n,Pt)}Y=e.createElement("div",{className:"".concat(At,"-content")},rt,$)}var yt=u()(At,(z={},Object(U.a)(z,"".concat(At,"-with-avatar"),q),Object(U.a)(z,"".concat(At,"-active"),Ot),Object(U.a)(z,"".concat(At,"-rtl"),pt==="rtl"),Object(U.a)(z,"".concat(At,"-round"),it),z),Rt);return e.createElement("div",{className:yt},st,Y)}return Nt};return e.createElement(i.a,null,k)};R.defaultProps={avatar:!1,title:!0,paragraph:!0},R.Button=g,R.Avatar=v,R.Input=_,R.Image=m;var H=R,N=dt.a=H},"/zsF":function(Se,dt,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("bE4E"),e=L.n(T)},"0JQy":function(Se,dt){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",u="["+L+"]",s="["+e+"]",h="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+h+")",c="[^"+L+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",l="["+t+"]?",f="(?:"+a+"(?:"+[c,n,i].join("|")+")"+l+o+")*",v=l+o+f,b="(?:"+[c+s+"?",s,n,i,u].join("|")+")",g=RegExp(h+"(?="+h+")|"+b+v,"g");function y(_){return _.match(g)||[]}Se.exports=y},"0ZTe":function(Se,dt,L){var U=L("wy8a"),E=L("quyA"),T=L("Em2t"),e=L("dt0z");function t(u){return function(s){s=e(s);var h=E(s)?T(s):void 0,r=h?h[0]:s.charAt(0),c=h?U(h,1).join(""):s.slice(1);return r[u]()+c}}Se.exports=t},"0eqD":function(Se,dt){},"0gSV":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.tagged=void 0;var U=L("GXnB"),E=L("Ztfv");function T(e,t){return function(u,s,h){var r=new U.Metadata(e,t);typeof h=="number"?E.tagParameter(u,s,h,r):E.tagProperty(u,s,r)}}dt.tagged=T},"0wsv":function(Se,dt,L){"use strict";L.d(dt,"b",function(){return t}),L.d(dt,"f",function(){return s}),L.d(dt,"e",function(){return n}),L.d(dt,"g",function(){return g}),L.d(dt,"a",function(){return m}),L.d(dt,"c",function(){return A}),L.d(dt,"d",function(){return O});var U=63710088e-1,E={centimeters:U*100,centimetres:U*100,degrees:U/111325,feet:U*3.28084,inches:U*39.37,kilometers:U/1e3,kilometres:U/1e3,meters:U,metres:U,miles:U/1609.344,millimeters:U*1e3,millimetres:U*1e3,nauticalmiles:U/1852,radians:1,yards:U*1.0936},T={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/U,yards:1.0936133},e={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(N,K,V){V===void 0&&(V={});var k={type:"Feature"};return(V.id===0||V.id)&&(k.id=V.id),V.bbox&&(k.bbox=V.bbox),k.properties=K||{},k.geometry=N,k}function u(N,K,V){switch(V===void 0&&(V={}),N){case"Point":return s(K).geometry;case"LineString":return n(K).geometry;case"Polygon":return r(K).geometry;case"MultiPoint":return l(K).geometry;case"MultiLineString":return o(K).geometry;case"MultiPolygon":return f(K).geometry;default:throw new Error(N+" is invalid")}}function s(N,K,V){if(V===void 0&&(V={}),!N)throw new Error("coordinates is required");if(!Array.isArray(N))throw new Error("coordinates must be an Array");if(N.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(N[0])||!A(N[1]))throw new Error("coordinates must contain numbers");var k={type:"Point",coordinates:N};return t(k,K,V)}function h(N,K,V){return V===void 0&&(V={}),a(N.map(function(k){return s(k,K)}),V)}function r(N,K,V){V===void 0&&(V={});for(var k=0,Z=N;k<Z.length;k++){var X=Z[k];if(X.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var at=0;at<X[X.length-1].length;at++)if(X[X.length-1][at]!==X[0][at])throw new Error("First and last Position are not equivalent.")}var pt={type:"Polygon",coordinates:N};return t(pt,K,V)}function c(N,K,V){return V===void 0&&(V={}),a(N.map(function(k){return r(k,K)}),V)}function n(N,K,V){if(V===void 0&&(V={}),N.length<2)throw new Error("coordinates must be an array of two or more positions");var k={type:"LineString",coordinates:N};return t(k,K,V)}function i(N,K,V){return V===void 0&&(V={}),a(N.map(function(k){return n(k,K)}),V)}function a(N,K){K===void 0&&(K={});var V={type:"FeatureCollection"};return K.id&&(V.id=K.id),K.bbox&&(V.bbox=K.bbox),V.features=N,V}function o(N,K,V){V===void 0&&(V={});var k={type:"MultiLineString",coordinates:N};return t(k,K,V)}function l(N,K,V){V===void 0&&(V={});var k={type:"MultiPoint",coordinates:N};return t(k,K,V)}function f(N,K,V){V===void 0&&(V={});var k={type:"MultiPolygon",coordinates:N};return t(k,K,V)}function v(N,K,V){V===void 0&&(V={});var k={type:"GeometryCollection",geometries:N};return t(k,K,V)}function b(N,K){if(K===void 0&&(K=0),K&&!(K>=0))throw new Error("precision must be a positive number");var V=Math.pow(10,K||0);return Math.round(N*V)/V}function g(N,K){K===void 0&&(K="kilometers");var V=E[K];if(!V)throw new Error(K+" units is invalid");return N*V}function y(N,K){K===void 0&&(K="kilometers");var V=E[K];if(!V)throw new Error(K+" units is invalid");return N/V}function _(N,K){return x(y(N,K))}function M(N){var K=N%360;return K<0&&(K+=360),K}function x(N){var K=N%(2*Math.PI);return K*180/Math.PI}function m(N){var K=N%360;return K*Math.PI/180}function S(N,K,V){if(K===void 0&&(K="kilometers"),V===void 0&&(V="kilometers"),!(N>=0))throw new Error("length must be a positive number");return g(y(N,K),V)}function P(N,K,V){if(K===void 0&&(K="meters"),V===void 0&&(V="kilometers"),!(N>=0))throw new Error("area must be a positive number");var k=e[K];if(!k)throw new Error("invalid original units");var Z=e[V];if(!Z)throw new Error("invalid final units");return N/k*Z}function A(N){return!isNaN(N)&&N!==null&&!Array.isArray(N)}function O(N){return!!N&&N.constructor===Object}function R(N){if(!N)throw new Error("bbox is required");if(!Array.isArray(N))throw new Error("bbox must be an Array");if(N.length!==4&&N.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");N.forEach(function(K){if(!A(K))throw new Error("bbox must only contain numbers")})}function H(N){if(!N)throw new Error("id is required");if(["string","number"].indexOf(typeof N)===-1)throw new Error("id must be a number or a string")}},"1+5i":function(Se,dt,L){var U=L("w/wX"),E=L("sEf8"),T=L("mdPL"),e=T&&T.isSet,t=e?E(e):U;Se.exports=t},"14J3":function(Se,dt,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("1GLa")},"1ABj":function(Se,dt){function L(U,E){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"1gqn":function(Se,dt){Se.exports=function(U){return U&&typeof U=="object"&&typeof U.copy=="function"&&typeof U.fill=="function"&&typeof U.readUInt8=="function"}},"1jvM":function(Se,dt){},"2ajD":function(Se,dt){function L(U){return U!==U}Se.exports=L},"3DfO":function(Se,dt){function L(U){return U==null}Se.exports=L},"3L66":function(Se,dt,L){var U=L("MMmD"),E=L("ExA7");function T(e){return E(e)&&U(e)}Se.exports=T},"3cYt":function(Se,dt){function L(U){return function(E){return U==null?void 0:U[E]}}Se.exports=L},"406g":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingOnSyntax=void 0;var U=L("z4Hk"),E=function(){function T(e){this._binding=e}return T.prototype.onActivation=function(e){return this._binding.onActivation=e,new U.BindingWhenSyntax(this._binding)},T}();dt.BindingOnSyntax=E},"4U9+":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=function(l){return(0,E.default)((0,h.default)(l)&&l.length>=1,"Must merge at least 1 JSON schema."),e.default.apply(void 0,[{}].concat(o(l),[function(f,v,b){if(!(0,u.default)(f)){if(b==="required")return(0,c.default)(f.concat(v));if((0,i.default)(f)){if(!(0,i.default)(v))throw new Error('Failed to merge schemas because "'+b+'" has different values.');return}E.default.deepEqual(f,v,'Failed to merge schemas because "'+b+'" has different values: '+JSON.stringify(f)+" and "+JSON.stringify(v)+".")}}]))};var U=L("9lTW"),E=a(U),T=L("qd8s"),e=a(T),t=L("3DfO"),u=a(t),s=L("WFAs"),h=a(s),r=L("w26f"),c=a(r),n=L("zZPE"),i=a(n);function a(l){return l&&l.__esModule?l:{default:l}}function o(l){if(Array.isArray(l)){for(var f=0,v=Array(l.length);f<l.length;f++)v[f]=l[f];return v}else return Array.from(l)}Se.exports=dt.default},"4ZJM":function(Se,dt,L){(function(U,E){Se.exports=E()})(this,function(){"use strict";var U,E,T;function e(t,u){if(!U)U=u;else if(!E)E=u;else{var s="var sharedChunk = {}; ("+U+")(sharedChunk); ("+E+")(sharedChunk);",h={};U(h),T=u(h),typeof window!="undefined"&&(T.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}}return e(["exports"],function(t){"use strict";function u(d,p){return d(p={exports:{}},p.exports),p.exports}var s=h;function h(d,p,C,F){this.cx=3*d,this.bx=3*(C-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(F-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=F,this.p2x=C,this.p2y=F}h.prototype.sampleCurveX=function(d){return((this.ax*d+this.bx)*d+this.cx)*d},h.prototype.sampleCurveY=function(d){return((this.ay*d+this.by)*d+this.cy)*d},h.prototype.sampleCurveDerivativeX=function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},h.prototype.solveCurveX=function(d,p){var C,F,J,vt,Ct;for(p===void 0&&(p=1e-6),J=d,Ct=0;Ct<8;Ct++){if(vt=this.sampleCurveX(J)-d,Math.abs(vt)<p)return J;var Bt=this.sampleCurveDerivativeX(J);if(Math.abs(Bt)<1e-6)break;J-=vt/Bt}if((J=d)<(C=0))return C;if(J>(F=1))return F;for(;C<F;){if(vt=this.sampleCurveX(J),Math.abs(vt-d)<p)return J;d>vt?C=J:F=J,J=.5*(F-C)+C}return J},h.prototype.solve=function(d,p){return this.sampleCurveY(this.solveCurveX(d,p))};var r=c;function c(d,p){this.x=d,this.y=p}c.prototype={clone:function(){return new c(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,C){return this.clone()._rotateAround(p,C)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var C=p.x-this.x,F=p.y-this.y;return C*C+F*F},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,C){return Math.atan2(this.x*C-this.y*p,this.x*p+this.y*C)},_matMult:function(p){var C=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=C,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var C=Math.cos(p),F=Math.sin(p),J=F*this.x+C*this.y;return this.x=C*this.x-F*this.y,this.y=J,this},_rotateAround:function(p,C){var F=Math.cos(p),J=Math.sin(p),vt=C.y+J*(this.x-C.x)+F*(this.y-C.y);return this.x=C.x+F*(this.x-C.x)-J*(this.y-C.y),this.y=vt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(d){return d instanceof c?d:Array.isArray(d)?new c(d[0],d[1]):d};var n=typeof self!="undefined"?self:{},i=Math.pow(2,53)-1;function a(d,p,C,F){var J=new s(d,p,C,F);return function(vt){return J.solve(vt)}}var o=a(.25,.1,.25,1);function l(d,p,C){return Math.min(C,Math.max(p,d))}function f(d,p,C){var F=C-p,J=((d-p)%F+F)%F+p;return J===p?C:J}function v(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var F=0,J=p;F<J.length;F+=1){var vt=J[F];for(var Ct in vt)d[Ct]=vt[Ct]}return d}var b=1;function g(){return b++}function y(){return function d(p){return p?(p^16*Math.random()>>p/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()}function _(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)}function M(d,p){d.forEach(function(C){p[C]&&(p[C]=p[C].bind(p))})}function x(d,p){return d.indexOf(p,d.length-p.length)!==-1}function m(d,p,C){var F={};for(var J in d)F[J]=p.call(C||this,d[J],J,d);return F}function S(d,p,C){var F={};for(var J in d)p.call(C||this,d[J],J,d)&&(F[J]=d[J]);return F}function P(d){return Array.isArray(d)?d.map(P):typeof d=="object"&&d?m(d,P):d}var A={};function O(d){A[d]||(typeof console!="undefined"&&console.warn(d),A[d]=!0)}function R(d,p,C){return(C.y-d.y)*(p.x-d.x)>(p.y-d.y)*(C.x-d.x)}function H(d){for(var p=0,C=0,F=d.length,J=F-1,vt=void 0,Ct=void 0;C<F;J=C++)p+=((Ct=d[J]).x-(vt=d[C]).x)*(vt.y+Ct.y);return p}function N(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function K(d){var p={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(F,J,vt,Ct){var Bt=vt||Ct;return p[J]=!Bt||Bt.toLowerCase(),""}),p["max-age"]){var C=parseInt(p["max-age"],10);isNaN(C)?delete p["max-age"]:p["max-age"]=C}return p}var V=null;function k(d){if(V==null){var p=d.navigator?d.navigator.userAgent:null;V=!!d.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return V}function Z(d){try{var p=n[d];return p.setItem("_mapbox_test_",1),p.removeItem("_mapbox_test_"),!0}catch(C){return!1}}var X,at,pt,gt,ft=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),Rt=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,Nt=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,Dt={now:ft,frame:function(p){var C=Rt(p);return{cancel:function(){return Nt(C)}}},getImageData:function(p,C){C===void 0&&(C=0);var F=n.document.createElement("canvas"),J=F.getContext("2d");if(!J)throw new Error("failed to create canvas 2d context");return F.width=p.width,F.height=p.height,J.drawImage(p,0,0,p.width,p.height),J.getImageData(-C,-C,p.width+2*C,p.height+2*C)},resolveURL:function(p){return X||(X=n.document.createElement("a")),X.href=p,X.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(at==null&&(at=n.matchMedia("(prefers-reduced-motion: reduce)")),at.matches)}},St={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},xt={supported:!1,testSupport:function(p){!Ot&&gt&&(it?At(p):pt=p)}},Ot=!1,it=!1;function At(d){var p=d.createTexture();d.bindTexture(d.TEXTURE_2D,p);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,gt),d.isContextLost())return;xt.supported=!0}catch(C){}d.deleteTexture(p),Ot=!0}n.document&&((gt=n.document.createElement("img")).onload=function(){pt&&At(pt),pt=null,it=!0},gt.onerror=function(){Ot=!0,pt=null},gt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var z="01",q=function(p,C){this._transformRequestFn=p,this._customAccessToken=C,this._createSkuToken()};function mt(d){return d.indexOf("mapbox:")===0}q.prototype._createSkuToken=function(){var d=function(){for(var p="",C=0;C<10;C++)p+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,p].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=d.token,this._skuTokenExpiresAt=d.tokenExpiresAt},q.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},q.prototype.transformRequest=function(d,p){return this._transformRequestFn&&this._transformRequestFn(d,p)||{url:d}},q.prototype.normalizeStyleURL=function(d,p){if(!mt(d))return d;var C=Y(d);return C.path="/styles/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},q.prototype.normalizeGlyphsURL=function(d,p){if(!mt(d))return d;var C=Y(d);return C.path="/fonts/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},q.prototype.normalizeSourceURL=function(d,p){if(!mt(d))return d;var C=Y(d);return C.path="/v4/"+C.authority+".json",C.params.push("secure"),this._makeAPIURL(C,this._customAccessToken||p)},q.prototype.normalizeSpriteURL=function(d,p,C,F){var J=Y(d);return mt(d)?(J.path="/styles/v1"+J.path+"/sprite"+p+C,this._makeAPIURL(J,this._customAccessToken||F)):(J.path+=""+p+C,rt(J))},q.prototype.normalizeTileURL=function(d,p){if(this._isSkuTokenExpired()&&this._createSkuToken(),d&&!mt(d))return d;var C=Y(d);C.path=C.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Dt.devicePixelRatio>=2||p===512?"@2x":"")+(xt.supported?".webp":"$1")),C.path=C.path.replace(/^.+\/v4\//,"/"),C.path="/v4"+C.path;var F=this._customAccessToken||function(J){for(var vt=0,Ct=J;vt<Ct.length;vt+=1){var Bt=Ct[vt].match(/^access_token=(.*)$/);if(Bt)return Bt[1]}return null}(C.params)||St.ACCESS_TOKEN;return St.REQUIRE_ACCESS_TOKEN&&F&&this._skuToken&&C.params.push("sku="+this._skuToken),this._makeAPIURL(C,F)},q.prototype.canonicalizeTileURL=function(d,p){var C=Y(d);if(!C.path.match(/(^\/v4\/)/)||!C.path.match(/\.[\w]+$/))return d;var F="mapbox://tiles/";F+=C.path.replace("/v4/","");var J=C.params;return p&&(J=J.filter(function(vt){return!vt.match(/^access_token=/)})),J.length&&(F+="?"+J.join("&")),F},q.prototype.canonicalizeTileset=function(d,p){for(var C=!!p&&mt(p),F=[],J=0,vt=d.tiles||[];J<vt.length;J+=1){var Ct=vt[J];st(Ct)?F.push(this.canonicalizeTileURL(Ct,C)):F.push(Ct)}return F},q.prototype._makeAPIURL=function(d,p){var C="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",F=Y(St.API_URL);if(d.protocol=F.protocol,d.authority=F.authority,d.protocol==="http"){var J=d.params.indexOf("secure");J>=0&&d.params.splice(J,1)}if(F.path!=="/"&&(d.path=""+F.path+d.path),!St.REQUIRE_ACCESS_TOKEN)return rt(d);if(!(p=p||St.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+C);if(p[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+C);return d.params=d.params.filter(function(vt){return vt.indexOf("access_token")===-1}),d.params.push("access_token="+p),rt(d)};var et=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function st(d){return et.test(d)}var bt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(d){var p=d.match(bt);if(!p)throw new Error("Unable to parse URL object");return{protocol:p[1],authority:p[2],path:p[3]||"/",params:p[4]?p[4].split("&"):[]}}function rt(d){var p=d.params.length?"?"+d.params.join("&"):"";return d.protocol+"://"+d.authority+d.path+p}function ot(d){if(!d)return null;var p=d.split(".");if(!p||p.length!==3)return null;try{return JSON.parse(decodeURIComponent(n.atob(p[1]).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(C){return null}}var $=function(p){this.type=p,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(d){var p,C=ot(St.ACCESS_TOKEN);return p=C&&C.u?n.btoa(encodeURIComponent(C.u).replace(/%([0-9A-F]{2})/g,function(F,J){return String.fromCharCode(Number("0x"+J))})):St.ACCESS_TOKEN||"",d?"mapbox.eventData."+d+":"+p:"mapbox.eventData:"+p},$.prototype.fetchEventData=function(){var d=Z("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{var F=n.localStorage.getItem(p);F&&(this.eventData=JSON.parse(F));var J=n.localStorage.getItem(C);J&&(this.anonId=J)}catch(vt){O("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var d=Z("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{n.localStorage.setItem(C,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(p,JSON.stringify(this.eventData))}catch(F){O("Unable to write to LocalStorage")}},$.prototype.processRequests=function(d){},$.prototype.postEvent=function(d,p,C,F){var J=this;if(St.EVENTS_URL){var vt=Y(St.EVENTS_URL);vt.params.push("access_token="+(F||St.ACCESS_TOKEN||""));var Ct={event:this.type,created:new Date(d).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:z,userId:this.anonId},Bt=p?v(Ct,p):Ct,Jt={url:rt(vt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Bt])};this.pendingRequest=li(Jt,function(ve){J.pendingRequest=null,C(ve),J.saveEventData(),J.processRequests(F)})}},$.prototype.queueRequest=function(d,p){this.queue.push(d),this.processRequests(p)};var Pt,yt,Ft=function(d){function p(){d.call(this,"map.load"),this.success={},this.skuToken=""}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postMapLoadEvent=function(C,F,J,vt){this.skuToken=J,(St.EVENTS_URL&&vt||St.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(Ct){return mt(Ct)||st(Ct)}))&&this.queueRequest({id:F,timestamp:Date.now()},vt)},p.prototype.processRequests=function(C){var F=this;if(!this.pendingRequest&&this.queue.length!==0){var J=this.queue.shift(),vt=J.id,Ct=J.timestamp;vt&&this.success[vt]||(this.anonId||this.fetchEventData(),_(this.anonId)||(this.anonId=y()),this.postEvent(Ct,{skuToken:this.skuToken},function(Bt){Bt||vt&&(F.success[vt]=!0)},C))}},p}($),Qt=new(function(d){function p(C){d.call(this,"appUserTurnstile"),this._customAccessToken=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postTurnstileEvent=function(C,F){St.EVENTS_URL&&St.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(J){return mt(J)||st(J)})&&this.queueRequest(Date.now(),F)},p.prototype.processRequests=function(C){var F=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var J=ot(St.ACCESS_TOKEN),vt=J?J.u:St.ACCESS_TOKEN,Ct=vt!==this.eventData.tokenU;_(this.anonId)||(this.anonId=y(),Ct=!0);var Bt=this.queue.shift();if(this.eventData.lastSuccess){var Jt=new Date(this.eventData.lastSuccess),ve=new Date(Bt),Ie=(Bt-this.eventData.lastSuccess)/864e5;Ct=Ct||Ie>=1||Ie<-1||Jt.getDate()!==ve.getDate()}else Ct=!0;if(!Ct)return this.processRequests();this.postEvent(Bt,{"enabled.telemetry":!1},function(Ue){Ue||(F.eventData.lastSuccess=Bt,F.eventData.tokenU=vt)},C)}},p}($)),ne=Qt.postTurnstileEvent.bind(Qt),Wt=new Ft,$t=Wt.postMapLoadEvent.bind(Wt),De=500,Je=50;function Qe(){n.caches&&!Pt&&(Pt=n.caches.open("mapbox-tiles"))}function de(d){var p=d.indexOf("?");return p<0?d:d.slice(0,p)}var ue,Ne=1/0;function cn(){return ue==null&&(ue=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),ue}var Fn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Fn);var wn=function(d){function p(C,F,J){F===401&&st(J)&&(C+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),d.call(this,C),this.status=F,this.url=J,this.name=this.constructor.name,this.message=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},p}(Error),en=N()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href},tn,xn,Bn=function(p,C){if(!(/^file:/.test(F=p.url)||/^file:/.test(en())&&!/^\w+:/.test(F))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function(J,vt){var Ct,Bt=new n.AbortController,Jt=new n.Request(J.url,{method:J.method||"GET",body:J.body,credentials:J.credentials,headers:J.headers,referrer:en(),signal:Bt.signal}),ve=!1,Ie=!1,Ue=(Ct=Jt.url).indexOf("sku=")>0&&st(Ct);J.type==="json"&&Jt.headers.set("Accept","application/json");var He=function(On,Kn,$n){if(!Ie){if(On&&On.message!=="SecurityError"&&O(On),Kn&&$n)return fn(Kn);var _r=Date.now();n.fetch(Jt).then(function(Br){if(Br.ok){var Hr=Ue?Br.clone():null;return fn(Br,Hr,_r)}return vt(new wn(Br.statusText,Br.status,J.url))}).catch(function(Br){Br.code!==20&&vt(new Error(Br.message))})}},fn=function(On,Kn,$n){(J.type==="arrayBuffer"?On.arrayBuffer():J.type==="json"?On.json():On.text()).then(function(_r){Ie||(Kn&&$n&&function(Br,Hr,pi){if(Qe(),Pt){var ii={status:Hr.status,statusText:Hr.statusText,headers:new n.Headers};Hr.headers.forEach(function(Ri,Xi){return ii.headers.set(Xi,Ri)});var Li=K(Hr.headers.get("Cache-Control")||"");Li["no-store"]||(Li["max-age"]&&ii.headers.set("Expires",new Date(pi+1e3*Li["max-age"]).toUTCString()),new Date(ii.headers.get("Expires")).getTime()-pi<42e4||function(Ri,Xi){if(yt===void 0)try{new Response(new ReadableStream),yt=!0}catch(ua){yt=!1}yt?Xi(Ri.body):Ri.blob().then(Xi)}(Hr,function(Ri){var Xi=new n.Response(Ri,ii);Qe(),Pt&&Pt.then(function(ua){return ua.put(de(Br.url),Xi)}).catch(function(ua){return O(ua.message)})}))}}(Jt,Kn,$n),ve=!0,vt(null,_r,On.headers.get("Cache-Control"),On.headers.get("Expires")))}).catch(function(_r){Ie||vt(new Error(_r.message))})};return Ue?function(Ln,On){if(Qe(),!Pt)return On(null);var Kn=de(Ln.url);Pt.then(function($n){$n.match(Kn).then(function(_r){var Br=function(Hr){if(!Hr)return!1;var pi=new Date(Hr.headers.get("Expires")||0),ii=K(Hr.headers.get("Cache-Control")||"");return pi>Date.now()&&!ii["no-cache"]}(_r);$n.delete(Kn),Br&&$n.put(Kn,_r.clone()),On(null,_r,Br)}).catch(On)}).catch(On)}(Jt,He):He(null,null),{cancel:function(){Ie=!0,ve||Bt.abort()}}}(p,C);if(N()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,C,void 0,!0)}var F;return function(J,vt){var Ct=new n.XMLHttpRequest;for(var Bt in Ct.open(J.method||"GET",J.url,!0),J.type==="arrayBuffer"&&(Ct.responseType="arraybuffer"),J.headers)Ct.setRequestHeader(Bt,J.headers[Bt]);return J.type==="json"&&(Ct.responseType="text",Ct.setRequestHeader("Accept","application/json")),Ct.withCredentials=J.credentials==="include",Ct.onerror=function(){vt(new Error(Ct.statusText))},Ct.onload=function(){if((Ct.status>=200&&Ct.status<300||Ct.status===0)&&Ct.response!==null){var Jt=Ct.response;if(J.type==="json")try{Jt=JSON.parse(Ct.response)}catch(ve){return vt(ve)}vt(null,Jt,Ct.getResponseHeader("Cache-Control"),Ct.getResponseHeader("Expires"))}else vt(new wn(Ct.statusText,Ct.status,J.url))},Ct.send(J.body),{cancel:function(){return Ct.abort()}}}(p,C)},vr=function(p,C){return Bn(v(p,{type:"arrayBuffer"}),C)},li=function(p,C){return Bn(v(p,{method:"POST"}),C)},Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";tn=[],xn=0;var Pe=function d(p,C){if(xt.supported&&(p.headers||(p.headers={}),p.headers.accept="image/webp,*/*"),xn>=St.MAX_PARALLEL_IMAGE_REQUESTS){var F={requestParameters:p,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return tn.push(F),F}xn++;var J=!1,vt=function(){if(!J)for(J=!0,xn--;tn.length&&xn<St.MAX_PARALLEL_IMAGE_REQUESTS;){var Jt=tn.shift();Jt.cancelled||(Jt.cancel=d(Jt.requestParameters,Jt.callback).cancel)}},Ct=vr(p,function(Bt,Jt,ve,Ie){vt(),Bt?C(Bt):Jt&&(cn()?function(Ue,He){var fn=new n.Blob([new Uint8Array(Ue)],{type:"image/png"});n.createImageBitmap(fn).then(function(Ln){He(null,Ln)}).catch(function(Ln){He(new Error("Could not load image because of "+Ln.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Jt,C):function(Ue,He,fn,Ln){var On=new n.Image,Kn=n.URL;On.onload=function(){He(null,On),Kn.revokeObjectURL(On.src),On.onload=null,n.requestAnimationFrame(function(){On.src=Me})},On.onerror=function(){return He(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var $n=new n.Blob([new Uint8Array(Ue)],{type:"image/png"});On.cacheControl=fn,On.expires=Ln,On.src=Ue.byteLength?Kn.createObjectURL($n):Me}(Jt,C,ve,Ie))});return{cancel:function(){Ct.cancel(),vt()}}};function te(d,p,C){C[d]&&C[d].indexOf(p)!==-1||(C[d]=C[d]||[],C[d].push(p))}function ge(d,p,C){if(C&&C[d]){var F=C[d].indexOf(p);F!==-1&&C[d].splice(F,1)}}var Ht=function(p,C){C===void 0&&(C={}),v(this,C),this.type=p},re=function(d){function p(C,F){F===void 0&&(F={}),d.call(this,"error",v({error:C},F))}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Ht),Te=function(){};Te.prototype.on=function(d,p){return this._listeners=this._listeners||{},te(d,p,this._listeners),this},Te.prototype.off=function(d,p){return ge(d,p,this._listeners),ge(d,p,this._oneTimeListeners),this},Te.prototype.once=function(d,p){return this._oneTimeListeners=this._oneTimeListeners||{},te(d,p,this._oneTimeListeners),this},Te.prototype.fire=function(d,p){typeof d=="string"&&(d=new Ht(d,p||{}));var C=d.type;if(this.listens(C)){d.target=this;for(var F=0,J=this._listeners&&this._listeners[C]?this._listeners[C].slice():[];F<J.length;F+=1)J[F].call(this,d);for(var vt=0,Ct=this._oneTimeListeners&&this._oneTimeListeners[C]?this._oneTimeListeners[C].slice():[];vt<Ct.length;vt+=1){var Bt=Ct[vt];ge(C,Bt,this._oneTimeListeners),Bt.call(this,d)}var Jt=this._eventedParent;Jt&&(v(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Jt.fire(d))}else d instanceof re&&console.error(d.error);return this},Te.prototype.listens=function(d){return this._listeners&&this._listeners[d]&&this._listeners[d].length>0||this._oneTimeListeners&&this._oneTimeListeners[d]&&this._oneTimeListeners[d].length>0||this._eventedParent&&this._eventedParent.listens(d)},Te.prototype.setEventedParent=function(d,p){return this._eventedParent=d,this._eventedParentData=p,this};var ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},xe=function(p,C,F,J){this.message=(p?p+": ":"")+F,J&&(this.identifier=J),C!=null&&C.__line__&&(this.line=C.__line__)};function qe(d){var p=d.value;return p?[new xe(d.key,p,"constants have been deprecated as of v8")]:[]}function zn(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var F=0,J=p;F<J.length;F+=1){var vt=J[F];for(var Ct in vt)d[Ct]=vt[Ct]}return d}function ar(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function _n(d){if(Array.isArray(d))return d.map(_n);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){var p={};for(var C in d)p[C]=_n(d[C]);return p}return ar(d)}var Cn=function(d){function p(C,F){d.call(this,F),this.message=F,this.key=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Error),Or=function(p,C){C===void 0&&(C=[]),this.parent=p,this.bindings={};for(var F=0,J=C;F<J.length;F+=1){var vt=J[F];this.bindings[vt[0]]=vt[1]}};Or.prototype.concat=function(d){return new Or(this,d)},Or.prototype.get=function(d){if(this.bindings[d])return this.bindings[d];if(this.parent)return this.parent.get(d);throw new Error(d+" not found in scope.")},Or.prototype.has=function(d){return!!this.bindings[d]||!!this.parent&&this.parent.has(d)};var Ar={kind:"null"},hn={kind:"number"},Pr={kind:"string"},yr={kind:"boolean"},Re={kind:"color"},We={kind:"object"},Ye={kind:"value"},dn={kind:"collator"},En={kind:"formatted"},Dn={kind:"resolvedImage"};function Sn(d,p){return{kind:"array",itemType:d,N:p}}function Nn(d){if(d.kind==="array"){var p=Nn(d.itemType);return typeof d.N=="number"?"array<"+p+", "+d.N+">":d.itemType.kind==="value"?"array":"array<"+p+">"}return d.kind}var nr=[Ar,hn,Pr,yr,Re,En,We,Sn(Ye),Dn];function Gn(d,p){if(p.kind==="error")return null;if(d.kind==="array"){if(p.kind==="array"&&(p.N===0&&p.itemType.kind==="value"||!Gn(d.itemType,p.itemType))&&(typeof d.N!="number"||d.N===p.N))return null}else{if(d.kind===p.kind)return null;if(d.kind==="value"){for(var C=0,F=nr;C<F.length;C+=1)if(!Gn(F[C],p))return null}}return"Expected "+Nn(d)+" but found "+Nn(p)+" instead."}function Tn(d,p){return p.some(function(C){return C.kind===d.kind})}function Cr(d,p){return p.some(function(C){return C==="null"?d===null:C==="array"?Array.isArray(d):C==="object"?d&&!Array.isArray(d)&&typeof d=="object":C===typeof d})}var pr=u(function(d,p){var C={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function F(Bt){return(Bt=Math.round(Bt))<0?0:Bt>255?255:Bt}function J(Bt){return F(Bt[Bt.length-1]==="%"?parseFloat(Bt)/100*255:parseInt(Bt))}function vt(Bt){return(Jt=Bt[Bt.length-1]==="%"?parseFloat(Bt)/100:parseFloat(Bt))<0?0:Jt>1?1:Jt;var Jt}function Ct(Bt,Jt,ve){return ve<0?ve+=1:ve>1&&(ve-=1),6*ve<1?Bt+(Jt-Bt)*ve*6:2*ve<1?Jt:3*ve<2?Bt+(Jt-Bt)*(2/3-ve)*6:Bt}try{p.parseCSSColor=function(Bt){var Jt,ve=Bt.replace(/ /g,"").toLowerCase();if(ve in C)return C[ve].slice();if(ve[0]==="#")return ve.length===4?(Jt=parseInt(ve.substr(1),16))>=0&&Jt<=4095?[(3840&Jt)>>4|(3840&Jt)>>8,240&Jt|(240&Jt)>>4,15&Jt|(15&Jt)<<4,1]:null:ve.length===7&&(Jt=parseInt(ve.substr(1),16))>=0&&Jt<=16777215?[(16711680&Jt)>>16,(65280&Jt)>>8,255&Jt,1]:null;var Ie=ve.indexOf("("),Ue=ve.indexOf(")");if(Ie!==-1&&Ue+1===ve.length){var He=ve.substr(0,Ie),fn=ve.substr(Ie+1,Ue-(Ie+1)).split(","),Ln=1;switch(He){case"rgba":if(fn.length!==4)return null;Ln=vt(fn.pop());case"rgb":return fn.length!==3?null:[J(fn[0]),J(fn[1]),J(fn[2]),Ln];case"hsla":if(fn.length!==4)return null;Ln=vt(fn.pop());case"hsl":if(fn.length!==3)return null;var On=(parseFloat(fn[0])%360+360)%360/360,Kn=vt(fn[1]),$n=vt(fn[2]),_r=$n<=.5?$n*(Kn+1):$n+Kn-$n*Kn,Br=2*$n-_r;return[F(255*Ct(Br,_r,On+1/3)),F(255*Ct(Br,_r,On)),F(255*Ct(Br,_r,On-1/3)),Ln];default:return null}}return null}}catch(Bt){}}).parseCSSColor,zr=function(p,C,F,J){J===void 0&&(J=1),this.r=p,this.g=C,this.b=F,this.a=J};zr.parse=function(d){if(d){if(d instanceof zr)return d;if(typeof d=="string"){var p=pr(d);if(p)return new zr(p[0]/255*p[3],p[1]/255*p[3],p[2]/255*p[3],p[3])}}},zr.prototype.toString=function(){var d=this.toArray(),p=d[1],C=d[2],F=d[3];return"rgba("+Math.round(d[0])+","+Math.round(p)+","+Math.round(C)+","+F+")"},zr.prototype.toArray=function(){var d=this.a;return d===0?[0,0,0,0]:[255*this.r/d,255*this.g/d,255*this.b/d,d]},zr.black=new zr(0,0,0,1),zr.white=new zr(1,1,1,1),zr.transparent=new zr(0,0,0,0),zr.red=new zr(1,0,0,1);var Ei=function(p,C,F){this.sensitivity=p?C?"variant":"case":C?"accent":"base",this.locale=F,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ei.prototype.compare=function(d,p){return this.collator.compare(d,p)},Ei.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Oa=function(p,C,F,J,vt){this.text=p,this.image=C,this.scale=F,this.fontStack=J,this.textColor=vt},wa=function(p){this.sections=p};wa.fromString=function(d){return new wa([new Oa(d,null,null,null,null)])},wa.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(d){return d.text.length!==0||d.image&&d.image.name.length!==0})},wa.factory=function(d){return d instanceof wa?d:wa.fromString(d)},wa.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(d){return d.text}).join("")},wa.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var F=C[p];if(F.image)d.push(["image",F.image.name]);else{d.push(F.text);var J={};F.fontStack&&(J["text-font"]=["literal",F.fontStack.split(",")]),F.scale&&(J["font-scale"]=F.scale),F.textColor&&(J["text-color"]=["rgba"].concat(F.textColor.toArray())),d.push(J)}}return d};var Ja=function(p){this.name=p.name,this.available=p.available};function wo(d,p,C,F){return typeof d=="number"&&d>=0&&d<=255&&typeof p=="number"&&p>=0&&p<=255&&typeof C=="number"&&C>=0&&C<=255?F===void 0||typeof F=="number"&&F>=0&&F<=1?null:"Invalid rgba value ["+[d,p,C,F].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof F=="number"?[d,p,C,F]:[d,p,C]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ha(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof zr||d instanceof Ei||d instanceof wa||d instanceof Ja)return!0;if(Array.isArray(d)){for(var p=0,C=d;p<C.length;p+=1)if(!ha(C[p]))return!1;return!0}if(typeof d=="object"){for(var F in d)if(!ha(d[F]))return!1;return!0}return!1}function ro(d){if(d===null)return Ar;if(typeof d=="string")return Pr;if(typeof d=="boolean")return yr;if(typeof d=="number")return hn;if(d instanceof zr)return Re;if(d instanceof Ei)return dn;if(d instanceof wa)return En;if(d instanceof Ja)return Dn;if(Array.isArray(d)){for(var p,C=d.length,F=0,J=d;F<J.length;F+=1){var vt=ro(J[F]);if(p){if(p===vt)continue;p=Ye;break}p=vt}return Sn(p||Ye,C)}return We}function ko(d){var p=typeof d;return d===null?"":p==="string"||p==="number"||p==="boolean"?String(d):d instanceof zr||d instanceof wa||d instanceof Ja?d.toString():JSON.stringify(d)}Ja.prototype.toString=function(){return this.name},Ja.fromString=function(d){return d?new Ja({name:d,available:!1}):null},Ja.prototype.serialize=function(){return["image",this.name]};var $a=function(p,C){this.type=p,this.value=C};$a.parse=function(d,p){if(d.length!==2)return p.error("'literal' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(!ha(d[1]))return p.error("invalid value");var C=d[1],F=ro(C),J=p.expectedType;return F.kind!=="array"||F.N!==0||!J||J.kind!=="array"||typeof J.N=="number"&&J.N!==0||(F=J),new $a(F,C)},$a.prototype.evaluate=function(){return this.value},$a.prototype.eachChild=function(){},$a.prototype.outputDefined=function(){return!0},$a.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zr?["rgba"].concat(this.value.toArray()):this.value instanceof wa?this.value.serialize():this.value};var Mo=function(p){this.name="ExpressionEvaluationError",this.message=p};Mo.prototype.toJSON=function(){return this.message};var ss={string:Pr,number:hn,boolean:yr,object:We},Pa=function(p,C){this.type=p,this.args=C};Pa.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C,F=1,J=d[0];if(J==="array"){var vt,Ct;if(d.length>2){var Bt=d[1];if(typeof Bt!="string"||!(Bt in ss)||Bt==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);vt=ss[Bt],F++}else vt=Ye;if(d.length>3){if(d[2]!==null&&(typeof d[2]!="number"||d[2]<0||d[2]!==Math.floor(d[2])))return p.error('The length argument to "array" must be a positive integer literal',2);Ct=d[2],F++}C=Sn(vt,Ct)}else C=ss[J];for(var Jt=[];F<d.length;F++){var ve=p.parse(d[F],F,Ye);if(!ve)return null;Jt.push(ve)}return new Pa(C,Jt)},Pa.prototype.evaluate=function(d){for(var p=0;p<this.args.length;p++){var C=this.args[p].evaluate(d);if(!Gn(this.type,ro(C)))return C;if(p===this.args.length-1)throw new Mo("Expected value to be of type "+Nn(this.type)+", but found "+Nn(ro(C))+" instead.")}return null},Pa.prototype.eachChild=function(d){this.args.forEach(d)},Pa.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Pa.prototype.serialize=function(){var d=this.type,p=[d.kind];if(d.kind==="array"){var C=d.itemType;if(C.kind==="string"||C.kind==="number"||C.kind==="boolean"){p.push(C.kind);var F=d.N;(typeof F=="number"||this.args.length>1)&&p.push(F)}}return p.concat(this.args.map(function(J){return J.serialize()}))};var Bo=function(p){this.type=En,this.sections=p};Bo.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[1];if(!Array.isArray(C)&&typeof C=="object")return p.error("First argument must be an image or text section.");for(var F=[],J=!1,vt=1;vt<=d.length-1;++vt){var Ct=d[vt];if(J&&typeof Ct=="object"&&!Array.isArray(Ct)){J=!1;var Bt=null;if(Ct["font-scale"]&&!(Bt=p.parse(Ct["font-scale"],1,hn)))return null;var Jt=null;if(Ct["text-font"]&&!(Jt=p.parse(Ct["text-font"],1,Sn(Pr))))return null;var ve=null;if(Ct["text-color"]&&!(ve=p.parse(Ct["text-color"],1,Re)))return null;var Ie=F[F.length-1];Ie.scale=Bt,Ie.font=Jt,Ie.textColor=ve}else{var Ue=p.parse(d[vt],1,Ye);if(!Ue)return null;var He=Ue.type.kind;if(He!=="string"&&He!=="value"&&He!=="null"&&He!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");J=!0,F.push({content:Ue,scale:null,font:null,textColor:null})}}return new Bo(F)},Bo.prototype.evaluate=function(d){return new wa(this.sections.map(function(p){var C=p.content.evaluate(d);return ro(C)===Dn?new Oa("",C,null,null,null):new Oa(ko(C),null,p.scale?p.scale.evaluate(d):null,p.font?p.font.evaluate(d).join(","):null,p.textColor?p.textColor.evaluate(d):null)}))},Bo.prototype.eachChild=function(d){for(var p=0,C=this.sections;p<C.length;p+=1){var F=C[p];d(F.content),F.scale&&d(F.scale),F.font&&d(F.font),F.textColor&&d(F.textColor)}},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var F=C[p];d.push(F.content.serialize());var J={};F.scale&&(J["font-scale"]=F.scale.serialize()),F.font&&(J["text-font"]=F.font.serialize()),F.textColor&&(J["text-color"]=F.textColor.serialize()),d.push(J)}return d};var Ro=function(p){this.type=Dn,this.input=p};Ro.parse=function(d,p){if(d.length!==2)return p.error("Expected two arguments.");var C=p.parse(d[1],1,Pr);return C?new Ro(C):p.error("No image name provided.")},Ro.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=Ja.fromString(p);return C&&d.availableImages&&(C.available=d.availableImages.indexOf(p)>-1),C},Ro.prototype.eachChild=function(d){d(this.input)},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){return["image",this.input.serialize()]};var Js={"to-boolean":yr,"to-color":Re,"to-number":hn,"to-string":Pr},Ko=function(p,C){this.type=p,this.args=C};Ko.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[0];if((C==="to-boolean"||C==="to-string")&&d.length!==2)return p.error("Expected one argument.");for(var F=Js[C],J=[],vt=1;vt<d.length;vt++){var Ct=p.parse(d[vt],vt,Ye);if(!Ct)return null;J.push(Ct)}return new Ko(F,J)},Ko.prototype.evaluate=function(d){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(d));if(this.type.kind==="color"){for(var p,C,F=0,J=this.args;F<J.length;F+=1){if(C=null,(p=J[F].evaluate(d))instanceof zr)return p;if(typeof p=="string"){var vt=d.parseColor(p);if(vt)return vt}else if(Array.isArray(p)&&!(C=p.length<3||p.length>4?"Invalid rbga value "+JSON.stringify(p)+": expected an array containing either three or four numeric values.":wo(p[0],p[1],p[2],p[3])))return new zr(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new Mo(C||"Could not parse color from value '"+(typeof p=="string"?p:String(JSON.stringify(p)))+"'")}if(this.type.kind==="number"){for(var Ct=null,Bt=0,Jt=this.args;Bt<Jt.length;Bt+=1){if((Ct=Jt[Bt].evaluate(d))===null)return 0;var ve=Number(Ct);if(!isNaN(ve))return ve}throw new Mo("Could not convert "+JSON.stringify(Ct)+" to number.")}return this.type.kind==="formatted"?wa.fromString(ko(this.args[0].evaluate(d))):this.type.kind==="resolvedImage"?Ja.fromString(ko(this.args[0].evaluate(d))):ko(this.args[0].evaluate(d))},Ko.prototype.eachChild=function(d){this.args.forEach(d)},Ko.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Ko.prototype.serialize=function(){if(this.type.kind==="formatted")return new Bo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ro(this.args[0]).serialize();var d=["to-"+this.type.kind];return this.eachChild(function(p){d.push(p.serialize())}),d};var nu=["Unknown","Point","LineString","Polygon"],Rs=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Rs.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Rs.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?nu[this.feature.type]:this.feature.type:null},Rs.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Rs.prototype.canonicalID=function(){return this.canonical},Rs.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Rs.prototype.parseColor=function(d){var p=this._parseColorCache[d];return p||(p=this._parseColorCache[d]=zr.parse(d)),p};var je=function(p,C,F,J){this.name=p,this.type=C,this._evaluate=F,this.args=J};je.prototype.evaluate=function(d){return this._evaluate(d,this.args)},je.prototype.eachChild=function(d){this.args.forEach(d)},je.prototype.outputDefined=function(){return!1},je.prototype.serialize=function(){return[this.name].concat(this.args.map(function(d){return d.serialize()}))},je.parse=function(d,p){var C,F=d[0],J=je.definitions[F];if(!J)return p.error('Unknown expression "'+F+'". If you wanted a literal array, use ["literal", [...]].',0);for(var vt=Array.isArray(J)?J[0]:J.type,Ct=Array.isArray(J)?[[J[1],J[2]]]:J.overloads,Bt=Ct.filter(function(na){var Zi=na[0];return!Array.isArray(Zi)||Zi.length===d.length-1}),Jt=null,ve=0,Ie=Bt;ve<Ie.length;ve+=1){var Ue=Ie[ve],He=Ue[0],fn=Ue[1];Jt=new Do(p.registry,p.path,null,p.scope);for(var Ln=[],On=!1,Kn=1;Kn<d.length;Kn++){var $n=d[Kn],_r=Array.isArray(He)?He[Kn-1]:He.type,Br=Jt.parse($n,1+Ln.length,_r);if(!Br){On=!0;break}Ln.push(Br)}if(!On)if(Array.isArray(He)&&He.length!==Ln.length)Jt.error("Expected "+He.length+" arguments, but found "+Ln.length+" instead.");else{for(var Hr=0;Hr<Ln.length;Hr++){var pi=Array.isArray(He)?He[Hr]:He.type,ii=Ln[Hr];Jt.concat(Hr+1).checkSubtype(pi,ii.type)}if(Jt.errors.length===0)return new je(F,vt,fn,Ln)}}if(Bt.length===1)(C=p.errors).push.apply(C,Jt.errors);else{for(var Li=(Bt.length?Bt:Ct).map(function(na){var Zi;return Zi=na[0],Array.isArray(Zi)?"("+Zi.map(Nn).join(", ")+")":"("+Nn(Zi.type)+"...)"}).join(" | "),Ri=[],Xi=1;Xi<d.length;Xi++){var ua=p.parse(d[Xi],1+Ri.length);if(!ua)return null;Ri.push(Nn(ua.type))}p.error("Expected arguments of type "+Li+", but found ("+Ri.join(", ")+") instead.")}return null},je.register=function(d,p){for(var C in je.definitions=p,p)d[C]=je};var oe=function(p,C,F){this.type=dn,this.locale=F,this.caseSensitive=p,this.diacriticSensitive=C};function Zt(d,p){d[0]=Math.min(d[0],p[0]),d[1]=Math.min(d[1],p[1]),d[2]=Math.max(d[2],p[0]),d[3]=Math.max(d[3],p[1])}function be(d,p){return!(d[0]<=p[0]||d[2]>=p[2]||d[1]<=p[1]||d[3]>=p[3])}function sn(d,p){var C=(180+d[0])/360,F=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,J=Math.pow(2,p.z);return[Math.round(C*J*8192),Math.round(F*J*8192)]}function Vn(d,p,C){return p[1]>d[1]!=C[1]>d[1]&&d[0]<(C[0]-p[0])*(d[1]-p[1])/(C[1]-p[1])+p[0]}function er(d,p){for(var C,F,J,vt,Ct,Bt,Jt,ve=!1,Ie=0,Ue=p.length;Ie<Ue;Ie++)for(var He=p[Ie],fn=0,Ln=He.length;fn<Ln-1;fn++){if((vt=(C=d)[0]-(F=He[fn])[0])*(Jt=C[1]-(J=He[fn+1])[1])-(Bt=C[0]-J[0])*(Ct=C[1]-F[1])==0&&vt*Bt<=0&&Ct*Jt<=0)return!1;Vn(d,He[fn],He[fn+1])&&(ve=!ve)}return ve}function kn(d,p){for(var C=0;C<p.length;C++)if(er(d,p[C]))return!0;return!1}function Xr(d,p,C,F){var J=F[0]-C[0],vt=F[1]-C[1],Ct=(d[0]-C[0])*vt-J*(d[1]-C[1]),Bt=(p[0]-C[0])*vt-J*(p[1]-C[1]);return Ct>0&&Bt<0||Ct<0&&Bt>0}function vi(d,p,C){for(var F=0,J=C;F<J.length;F+=1)for(var vt=J[F],Ct=0;Ct<vt.length-1;++Ct)if((Ue=[(Ie=vt[Ct+1])[0]-(ve=vt[Ct])[0],Ie[1]-ve[1]])[0]*(He=[(Jt=p)[0]-(Bt=d)[0],Jt[1]-Bt[1]])[1]-Ue[1]*He[0]!=0&&Xr(Bt,Jt,ve,Ie)&&Xr(ve,Ie,Bt,Jt))return!0;var Bt,Jt,ve,Ie,Ue,He;return!1}function Si(d,p){for(var C=0;C<d.length;++C)if(!er(d[C],p))return!1;for(var F=0;F<d.length-1;++F)if(vi(d[F],d[F+1],p))return!1;return!0}function ji(d,p){for(var C=0;C<p.length;C++)if(Si(d,p[C]))return!0;return!1}function Ji(d,p,C){for(var F=[],J=0;J<d.length;J++){for(var vt=[],Ct=0;Ct<d[J].length;Ct++){var Bt=sn(d[J][Ct],C);Zt(p,Bt),vt.push(Bt)}F.push(vt)}return F}function za(d,p,C){for(var F=[],J=0;J<d.length;J++){var vt=Ji(d[J],p,C);F.push(vt)}return F}function va(d,p,C,F){if(d[0]<C[0]||d[0]>C[2]){var J=.5*F,vt=d[0]-C[0]>J?-F:C[0]-d[0]>J?F:0;vt===0&&(vt=d[0]-C[2]>J?-F:C[2]-d[0]>J?F:0),d[0]+=vt}Zt(p,d)}function so(d,p,C,F){for(var J=8192*Math.pow(2,F.z),vt=[8192*F.x,8192*F.y],Ct=[],Bt=0,Jt=d;Bt<Jt.length;Bt+=1)for(var ve=0,Ie=Jt[Bt];ve<Ie.length;ve+=1){var Ue=Ie[ve],He=[Ue.x+vt[0],Ue.y+vt[1]];va(He,p,C,J),Ct.push(He)}return Ct}function Ia(d,p,C,F){for(var J,vt=8192*Math.pow(2,F.z),Ct=[8192*F.x,8192*F.y],Bt=[],Jt=0,ve=d;Jt<ve.length;Jt+=1){for(var Ie=[],Ue=0,He=ve[Jt];Ue<He.length;Ue+=1){var fn=He[Ue],Ln=[fn.x+Ct[0],fn.y+Ct[1]];Zt(p,Ln),Ie.push(Ln)}Bt.push(Ie)}if(p[2]-p[0]<=vt/2){(J=p)[0]=J[1]=1/0,J[2]=J[3]=-1/0;for(var On=0,Kn=Bt;On<Kn.length;On+=1)for(var $n=0,_r=Kn[On];$n<_r.length;$n+=1)va(_r[$n],p,C,vt)}return Bt}oe.parse=function(d,p){if(d.length!==2)return p.error("Expected one argument.");var C=d[1];if(typeof C!="object"||Array.isArray(C))return p.error("Collator options argument must be an object.");var F=p.parse(C["case-sensitive"]!==void 0&&C["case-sensitive"],1,yr);if(!F)return null;var J=p.parse(C["diacritic-sensitive"]!==void 0&&C["diacritic-sensitive"],1,yr);if(!J)return null;var vt=null;return C.locale&&!(vt=p.parse(C.locale,1,Pr))?null:new oe(F,J,vt)},oe.prototype.evaluate=function(d){return new Ei(this.caseSensitive.evaluate(d),this.diacriticSensitive.evaluate(d),this.locale?this.locale.evaluate(d):null)},oe.prototype.eachChild=function(d){d(this.caseSensitive),d(this.diacriticSensitive),this.locale&&d(this.locale)},oe.prototype.outputDefined=function(){return!1},oe.prototype.serialize=function(){var d={};return d["case-sensitive"]=this.caseSensitive.serialize(),d["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(d.locale=this.locale.serialize()),["collator",d]};var io=function(p,C){this.type=yr,this.geojson=p,this.geometries=C};function uo(d){if(d instanceof je&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof io)return!1;var p=!0;return d.eachChild(function(C){p&&!uo(C)&&(p=!1)}),p}function ka(d){if(d instanceof je&&d.name==="feature-state")return!1;var p=!0;return d.eachChild(function(C){p&&!ka(C)&&(p=!1)}),p}function vo(d,p){if(d instanceof je&&p.indexOf(d.name)>=0)return!1;var C=!0;return d.eachChild(function(F){C&&!vo(F,p)&&(C=!1)}),C}io.parse=function(d,p){if(d.length!==2)return p.error("'within' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(ha(d[1])){var C=d[1];if(C.type==="FeatureCollection")for(var F=0;F<C.features.length;++F){var J=C.features[F].geometry.type;if(J==="Polygon"||J==="MultiPolygon")return new io(C,C.features[F].geometry)}else if(C.type==="Feature"){var vt=C.geometry.type;if(vt==="Polygon"||vt==="MultiPolygon")return new io(C,C.geometry)}else if(C.type==="Polygon"||C.type==="MultiPolygon")return new io(C,C)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")},io.prototype.evaluate=function(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(p,C){var F=[1/0,1/0,-1/0,-1/0],J=[1/0,1/0,-1/0,-1/0],vt=p.canonicalID();if(C.type==="Polygon"){var Ct=Ji(C.coordinates,J,vt),Bt=so(p.geometry(),F,J,vt);if(!be(F,J))return!1;for(var Jt=0,ve=Bt;Jt<ve.length;Jt+=1)if(!er(ve[Jt],Ct))return!1}if(C.type==="MultiPolygon"){var Ie=za(C.coordinates,J,vt),Ue=so(p.geometry(),F,J,vt);if(!be(F,J))return!1;for(var He=0,fn=Ue;He<fn.length;He+=1)if(!kn(fn[He],Ie))return!1}return!0}(d,this.geometries);if(d.geometryType()==="LineString")return function(p,C){var F=[1/0,1/0,-1/0,-1/0],J=[1/0,1/0,-1/0,-1/0],vt=p.canonicalID();if(C.type==="Polygon"){var Ct=Ji(C.coordinates,J,vt),Bt=Ia(p.geometry(),F,J,vt);if(!be(F,J))return!1;for(var Jt=0,ve=Bt;Jt<ve.length;Jt+=1)if(!Si(ve[Jt],Ct))return!1}if(C.type==="MultiPolygon"){var Ie=za(C.coordinates,J,vt),Ue=Ia(p.geometry(),F,J,vt);if(!be(F,J))return!1;for(var He=0,fn=Ue;He<fn.length;He+=1)if(!ji(fn[He],Ie))return!1}return!0}(d,this.geometries)}return!1},io.prototype.eachChild=function(){},io.prototype.outputDefined=function(){return!0},io.prototype.serialize=function(){return["within",this.geojson]};var Vo=function(p,C){this.type=C.type,this.name=p,this.boundExpression=C};Vo.parse=function(d,p){if(d.length!==2||typeof d[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");var C=d[1];return p.scope.has(C)?new Vo(C,p.scope.get(C)):p.error('Unknown variable "'+C+'". Make sure "'+C+'" has been bound in an enclosing "let" expression before using it.',1)},Vo.prototype.evaluate=function(d){return this.boundExpression.evaluate(d)},Vo.prototype.eachChild=function(){},Vo.prototype.outputDefined=function(){return!1},Vo.prototype.serialize=function(){return["var",this.name]};var Do=function(p,C,F,J,vt){C===void 0&&(C=[]),J===void 0&&(J=new Or),vt===void 0&&(vt=[]),this.registry=p,this.path=C,this.key=C.map(function(Ct){return"["+Ct+"]"}).join(""),this.scope=J,this.errors=vt,this.expectedType=F};function fs(d,p){for(var C,F=d.length-1,J=0,vt=F,Ct=0;J<=vt;)if((C=d[Ct=Math.floor((J+vt)/2)])<=p){if(Ct===F||p<d[Ct+1])return Ct;J=Ct+1}else{if(!(C>p))throw new Mo("Input is not a number.");vt=Ct-1}return 0}Do.prototype.parse=function(d,p,C,F,J){return J===void 0&&(J={}),p?this.concat(p,C,F)._parse(d,J):this._parse(d,J)},Do.prototype._parse=function(d,p){function C(ve,Ie,Ue){return Ue==="assert"?new Pa(Ie,[ve]):Ue==="coerce"?new Ko(Ie,[ve]):ve}if(d!==null&&typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"||(d=["literal",d]),Array.isArray(d)){if(d.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var F=d[0];if(typeof F!="string")return this.error("Expression name must be a string, but found "+typeof F+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var J=this.registry[F];if(J){var vt=J.parse(d,this);if(!vt)return null;if(this.expectedType){var Ct=this.expectedType,Bt=vt.type;if(Ct.kind!=="string"&&Ct.kind!=="number"&&Ct.kind!=="boolean"&&Ct.kind!=="object"&&Ct.kind!=="array"||Bt.kind!=="value")if(Ct.kind!=="color"&&Ct.kind!=="formatted"&&Ct.kind!=="resolvedImage"||Bt.kind!=="value"&&Bt.kind!=="string"){if(this.checkSubtype(Ct,Bt))return null}else vt=C(vt,Ct,p.typeAnnotation||"coerce");else vt=C(vt,Ct,p.typeAnnotation||"assert")}if(!(vt instanceof $a)&&vt.type.kind!=="resolvedImage"&&function ve(Ie){if(Ie instanceof Vo)return ve(Ie.boundExpression);if(Ie instanceof je&&Ie.name==="error"||Ie instanceof oe||Ie instanceof io)return!1;var Ue=Ie instanceof Ko||Ie instanceof Pa,He=!0;return Ie.eachChild(function(fn){He=Ue?He&&ve(fn):He&&fn instanceof $a}),!!He&&uo(Ie)&&vo(Ie,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(vt)){var Jt=new Rs;try{vt=new $a(vt.type,vt.evaluate(Jt))}catch(ve){return this.error(ve.message),null}}return vt}return this.error('Unknown expression "'+F+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(d===void 0?"'undefined' value invalid. Use null instead.":typeof d=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof d+" instead.")},Do.prototype.concat=function(d,p,C){var F=typeof d=="number"?this.path.concat(d):this.path,J=C?this.scope.concat(C):this.scope;return new Do(this.registry,F,p||null,J,this.errors)},Do.prototype.error=function(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];var F=""+this.key+p.map(function(J){return"["+J+"]"}).join("");this.errors.push(new Cn(F,d))},Do.prototype.checkSubtype=function(d,p){var C=Gn(d,p);return C&&this.error(C),C};var mo=function(p,C,F){this.type=p,this.input=C,this.labels=[],this.outputs=[];for(var J=0,vt=F;J<vt.length;J+=1){var Ct=vt[J],Bt=Ct[1];this.labels.push(Ct[0]),this.outputs.push(Bt)}};function Ga(d,p,C){return d*(1-C)+p*C}mo.parse=function(d,p){if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");var C=p.parse(d[1],1,hn);if(!C)return null;var F=[],J=null;p.expectedType&&p.expectedType.kind!=="value"&&(J=p.expectedType);for(var vt=1;vt<d.length;vt+=2){var Ct=vt===1?-1/0:d[vt],Bt=d[vt+1],Jt=vt,ve=vt+1;if(typeof Ct!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Jt);if(F.length&&F[F.length-1][0]>=Ct)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Jt);var Ie=p.parse(Bt,ve,J);if(!Ie)return null;J=J||Ie.type,F.push([Ct,Ie])}return new mo(J,C,F)},mo.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var F=this.input.evaluate(d);if(F<=p[0])return C[0].evaluate(d);var J=p.length;return F>=p[J-1]?C[J-1].evaluate(d):C[fs(p,F)].evaluate(d)},mo.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},mo.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},mo.prototype.serialize=function(){for(var d=["step",this.input.serialize()],p=0;p<this.labels.length;p++)p>0&&d.push(this.labels[p]),d.push(this.outputs[p].serialize());return d};var us=Object.freeze({__proto__:null,number:Ga,color:function(p,C,F){return new zr(Ga(p.r,C.r,F),Ga(p.g,C.g,F),Ga(p.b,C.b,F),Ga(p.a,C.a,F))},array:function(p,C,F){return p.map(function(J,vt){return Ga(J,C[vt],F)})}}),Xo=6/29*3*(6/29),Ta=Math.PI/180,mn=180/Math.PI;function cr(d){return d>.008856451679035631?Math.pow(d,1/3):d/Xo+4/29}function Wr(d){return d>6/29?d*d*d:Xo*(d-4/29)}function Di(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function Ua(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function yo(d){var p=Ua(d.r),C=Ua(d.g),F=Ua(d.b),J=cr((.4124564*p+.3575761*C+.1804375*F)/.95047),vt=cr((.2126729*p+.7151522*C+.072175*F)/1);return{l:116*vt-16,a:500*(J-vt),b:200*(vt-cr((.0193339*p+.119192*C+.9503041*F)/1.08883)),alpha:d.a}}function lo(d){var p=(d.l+16)/116,C=isNaN(d.a)?p:p+d.a/500,F=isNaN(d.b)?p:p-d.b/200;return p=1*Wr(p),C=.95047*Wr(C),F=1.08883*Wr(F),new zr(Di(3.2404542*C-1.5371385*p-.4985314*F),Di(-.969266*C+1.8760108*p+.041556*F),Di(.0556434*C-.2040259*p+1.0572252*F),d.alpha)}function La(d,p,C){var F=p-d;return d+C*(F>180||F<-180?F-360*Math.round(F/360):F)}var Va={forward:yo,reverse:lo,interpolate:function(p,C,F){return{l:Ga(p.l,C.l,F),a:Ga(p.a,C.a,F),b:Ga(p.b,C.b,F),alpha:Ga(p.alpha,C.alpha,F)}}},ts={forward:function(p){var C=yo(p),F=C.l,J=C.a,vt=C.b,Ct=Math.atan2(vt,J)*mn;return{h:Ct<0?Ct+360:Ct,c:Math.sqrt(J*J+vt*vt),l:F,alpha:p.a}},reverse:function(p){var C=p.h*Ta,F=p.c;return lo({l:p.l,a:Math.cos(C)*F,b:Math.sin(C)*F,alpha:p.alpha})},interpolate:function(p,C,F){return{h:La(p.h,C.h,F),c:Ga(p.c,C.c,F),l:Ga(p.l,C.l,F),alpha:Ga(p.alpha,C.alpha,F)}}},ls=Object.freeze({__proto__:null,lab:Va,hcl:ts}),Ki=function(p,C,F,J,vt){this.type=p,this.operator=C,this.interpolation=F,this.input=J,this.labels=[],this.outputs=[];for(var Ct=0,Bt=vt;Ct<Bt.length;Ct+=1){var Jt=Bt[Ct],ve=Jt[1];this.labels.push(Jt[0]),this.outputs.push(ve)}};function _u(d,p,C,F){var J=F-C,vt=d-C;return J===0?0:p===1?vt/J:(Math.pow(p,vt)-1)/(Math.pow(p,J)-1)}Ki.interpolationFactor=function(d,p,C,F){var J=0;if(d.name==="exponential")J=_u(p,d.base,C,F);else if(d.name==="linear")J=_u(p,1,C,F);else if(d.name==="cubic-bezier"){var vt=d.controlPoints;J=new s(vt[0],vt[1],vt[2],vt[3]).solve(_u(p,1,C,F))}return J},Ki.parse=function(d,p){var C=d[0],F=d[1],J=d[2],vt=d.slice(3);if(!Array.isArray(F)||F.length===0)return p.error("Expected an interpolation type expression.",1);if(F[0]==="linear")F={name:"linear"};else if(F[0]==="exponential"){var Ct=F[1];if(typeof Ct!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);F={name:"exponential",base:Ct}}else{if(F[0]!=="cubic-bezier")return p.error("Unknown interpolation type "+String(F[0]),1,0);var Bt=F.slice(1);if(Bt.length!==4||Bt.some(function(Kn){return typeof Kn!="number"||Kn<0||Kn>1}))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);F={name:"cubic-bezier",controlPoints:Bt}}if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(!(J=p.parse(J,2,hn)))return null;var Jt=[],ve=null;C==="interpolate-hcl"||C==="interpolate-lab"?ve=Re:p.expectedType&&p.expectedType.kind!=="value"&&(ve=p.expectedType);for(var Ie=0;Ie<vt.length;Ie+=2){var Ue=vt[Ie],He=vt[Ie+1],fn=Ie+3,Ln=Ie+4;if(typeof Ue!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fn);if(Jt.length&&Jt[Jt.length-1][0]>=Ue)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',fn);var On=p.parse(He,Ln,ve);if(!On)return null;ve=ve||On.type,Jt.push([Ue,On])}return ve.kind==="number"||ve.kind==="color"||ve.kind==="array"&&ve.itemType.kind==="number"&&typeof ve.N=="number"?new Ki(ve,C,F,J,Jt):p.error("Type "+Nn(ve)+" is not interpolatable.")},Ki.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var F=this.input.evaluate(d);if(F<=p[0])return C[0].evaluate(d);var J=p.length;if(F>=p[J-1])return C[J-1].evaluate(d);var vt=fs(p,F),Ct=Ki.interpolationFactor(this.interpolation,F,p[vt],p[vt+1]),Bt=C[vt].evaluate(d),Jt=C[vt+1].evaluate(d);return this.operator==="interpolate"?us[this.type.kind.toLowerCase()](Bt,Jt,Ct):this.operator==="interpolate-hcl"?ts.reverse(ts.interpolate(ts.forward(Bt),ts.forward(Jt),Ct)):Va.reverse(Va.interpolate(Va.forward(Bt),Va.forward(Jt),Ct))},Ki.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Ki.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Ki.prototype.serialize=function(){var d;d=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var p=[this.operator,d,this.input.serialize()],C=0;C<this.labels.length;C++)p.push(this.labels[C],this.outputs[C].serialize());return p};var Fo=function(p,C){this.type=p,this.args=C};Fo.parse=function(d,p){if(d.length<2)return p.error("Expectected at least one argument.");var C=null,F=p.expectedType;F&&F.kind!=="value"&&(C=F);for(var J=[],vt=0,Ct=d.slice(1);vt<Ct.length;vt+=1){var Bt=p.parse(Ct[vt],1+J.length,C,void 0,{typeAnnotation:"omit"});if(!Bt)return null;C=C||Bt.type,J.push(Bt)}var Jt=F&&J.some(function(ve){return Gn(F,ve.type)});return new Fo(Jt?Ye:C,J)},Fo.prototype.evaluate=function(d){for(var p,C=null,F=0,J=0,vt=this.args;J<vt.length&&(F++,(C=vt[J].evaluate(d))&&C instanceof Ja&&!C.available&&(p||(p=C.name),C=null,F===this.args.length&&(C=p)),C===null);J+=1);return C},Fo.prototype.eachChild=function(d){this.args.forEach(d)},Fo.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Fo.prototype.serialize=function(){var d=["coalesce"];return this.eachChild(function(p){d.push(p.serialize())}),d};var hs=function(p,C){this.type=C.type,this.bindings=[].concat(p),this.result=C};hs.prototype.evaluate=function(d){return this.result.evaluate(d)},hs.prototype.eachChild=function(d){for(var p=0,C=this.bindings;p<C.length;p+=1)d(C[p][1]);d(this.result)},hs.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found "+(d.length-1)+" instead.");for(var C=[],F=1;F<d.length-1;F+=2){var J=d[F];if(typeof J!="string")return p.error("Expected string, but found "+typeof J+" instead.",F);if(/[^a-zA-Z0-9_]/.test(J))return p.error("Variable names must contain only alphanumeric characters or '_'.",F);var vt=p.parse(d[F+1],F+1);if(!vt)return null;C.push([J,vt])}var Ct=p.parse(d[d.length-1],d.length-1,p.expectedType,C);return Ct?new hs(C,Ct):null},hs.prototype.outputDefined=function(){return this.result.outputDefined()},hs.prototype.serialize=function(){for(var d=["let"],p=0,C=this.bindings;p<C.length;p+=1){var F=C[p];d.push(F[0],F[1].serialize())}return d.push(this.result.serialize()),d};var $s=function(p,C,F){this.type=p,this.index=C,this.input=F};$s.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,hn),F=p.parse(d[2],2,Sn(p.expectedType||Ye));return C&&F?new $s(F.type.itemType,C,F):null},$s.prototype.evaluate=function(d){var p=this.index.evaluate(d),C=this.input.evaluate(d);if(p<0)throw new Mo("Array index out of bounds: "+p+" < 0.");if(p>=C.length)throw new Mo("Array index out of bounds: "+p+" > "+(C.length-1)+".");if(p!==Math.floor(p))throw new Mo("Array index must be an integer, but found "+p+" instead.");return C[p]},$s.prototype.eachChild=function(d){d(this.index),d(this.input)},$s.prototype.outputDefined=function(){return!1},$s.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ds=function(p,C){this.type=yr,this.needle=p,this.haystack=C};ds.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),F=p.parse(d[2],2,Ye);return C&&F?Tn(C.type,[yr,Pr,hn,Ar,Ye])?new ds(C,F):p.error("Expected first argument to be of type boolean, string, number or null, but found "+Nn(C.type)+" instead"):null},ds.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!C)return!1;if(!Cr(p,["boolean","string","number","null"]))throw new Mo("Expected first argument to be of type boolean, string, number or null, but found "+Nn(ro(p))+" instead.");if(!Cr(C,["string","array"]))throw new Mo("Expected second argument to be of type array or string, but found "+Nn(ro(C))+" instead.");return C.indexOf(p)>=0},ds.prototype.eachChild=function(d){d(this.needle),d(this.haystack)},ds.prototype.outputDefined=function(){return!0},ds.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var vs=function(p,C,F){this.type=hn,this.needle=p,this.haystack=C,this.fromIndex=F};vs.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),F=p.parse(d[2],2,Ye);if(!C||!F)return null;if(!Tn(C.type,[yr,Pr,hn,Ar,Ye]))return p.error("Expected first argument to be of type boolean, string, number or null, but found "+Nn(C.type)+" instead");if(d.length===4){var J=p.parse(d[3],3,hn);return J?new vs(C,F,J):null}return new vs(C,F)},vs.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!Cr(p,["boolean","string","number","null"]))throw new Mo("Expected first argument to be of type boolean, string, number or null, but found "+Nn(ro(p))+" instead.");if(!Cr(C,["string","array"]))throw new Mo("Expected second argument to be of type array or string, but found "+Nn(ro(C))+" instead.");if(this.fromIndex){var F=this.fromIndex.evaluate(d);return C.indexOf(p,F)}return C.indexOf(p)},vs.prototype.eachChild=function(d){d(this.needle),d(this.haystack),this.fromIndex&&d(this.fromIndex)},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var d=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),d]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Qs=function(p,C,F,J,vt,Ct){this.inputType=p,this.type=C,this.input=F,this.cases=J,this.outputs=vt,this.otherwise=Ct};Qs.parse=function(d,p){if(d.length<5)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if(d.length%2!=1)return p.error("Expected an even number of arguments.");var C,F;p.expectedType&&p.expectedType.kind!=="value"&&(F=p.expectedType);for(var J={},vt=[],Ct=2;Ct<d.length-1;Ct+=2){var Bt=d[Ct],Jt=d[Ct+1];Array.isArray(Bt)||(Bt=[Bt]);var ve=p.concat(Ct);if(Bt.length===0)return ve.error("Expected at least one branch label.");for(var Ie=0,Ue=Bt;Ie<Ue.length;Ie+=1){var He=Ue[Ie];if(typeof He!="number"&&typeof He!="string")return ve.error("Branch labels must be numbers or strings.");if(typeof He=="number"&&Math.abs(He)>Number.MAX_SAFE_INTEGER)return ve.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof He=="number"&&Math.floor(He)!==He)return ve.error("Numeric branch labels must be integer values.");if(C){if(ve.checkSubtype(C,ro(He)))return null}else C=ro(He);if(J[String(He)]!==void 0)return ve.error("Branch labels must be unique.");J[String(He)]=vt.length}var fn=p.parse(Jt,Ct,F);if(!fn)return null;F=F||fn.type,vt.push(fn)}var Ln=p.parse(d[1],1,Ye);if(!Ln)return null;var On=p.parse(d[d.length-1],d.length-1,F);return On?Ln.type.kind!=="value"&&p.concat(1).checkSubtype(C,Ln.type)?null:new Qs(C,F,Ln,J,vt,On):null},Qs.prototype.evaluate=function(d){var p=this.input.evaluate(d);return(ro(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(d)},Qs.prototype.eachChild=function(d){d(this.input),this.outputs.forEach(d),d(this.otherwise)},Qs.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})&&this.otherwise.outputDefined()},Qs.prototype.serialize=function(){for(var d=this,p=["match",this.input.serialize()],C=[],F={},J=0,vt=Object.keys(this.cases).sort();J<vt.length;J+=1){var Ct=vt[J];(Ue=F[this.cases[Ct]])===void 0?(F[this.cases[Ct]]=C.length,C.push([this.cases[Ct],[Ct]])):C[Ue][1].push(Ct)}for(var Bt=function(Ln){return d.inputType.kind==="number"?Number(Ln):Ln},Jt=0,ve=C;Jt<ve.length;Jt+=1){var Ie=ve[Jt],Ue=Ie[0],He=Ie[1];p.push(He.length===1?Bt(He[0]):He.map(Bt)),p.push(this.outputs[outputIndex$1].serialize())}return p.push(this.otherwise.serialize()),p};var Mu=function(p,C,F){this.type=p,this.branches=C,this.otherwise=F};Mu.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found only "+(d.length-1)+".");if(d.length%2!=0)return p.error("Expected an odd number of arguments.");var C;p.expectedType&&p.expectedType.kind!=="value"&&(C=p.expectedType);for(var F=[],J=1;J<d.length-1;J+=2){var vt=p.parse(d[J],J,yr);if(!vt)return null;var Ct=p.parse(d[J+1],J+1,C);if(!Ct)return null;F.push([vt,Ct]),C=C||Ct.type}var Bt=p.parse(d[d.length-1],d.length-1,C);return Bt?new Mu(C,F,Bt):null},Mu.prototype.evaluate=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var F=C[p],J=F[1];if(F[0].evaluate(d))return J.evaluate(d)}return this.otherwise.evaluate(d)},Mu.prototype.eachChild=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var F=C[p],J=F[1];d(F[0]),d(J)}d(this.otherwise)},Mu.prototype.outputDefined=function(){return this.branches.every(function(d){return d[1].outputDefined()})&&this.otherwise.outputDefined()},Mu.prototype.serialize=function(){var d=["case"];return this.eachChild(function(p){d.push(p.serialize())}),d};var ps=function(p,C,F,J){this.type=p,this.input=C,this.beginIndex=F,this.endIndex=J};function wu(d,p){return d==="=="||d==="!="?p.kind==="boolean"||p.kind==="string"||p.kind==="number"||p.kind==="null"||p.kind==="value":p.kind==="string"||p.kind==="number"||p.kind==="value"}function Ds(d,p,C,F){return F.compare(p,C)===0}function Aa(d,p,C){var F=d!=="=="&&d!=="!=";return function(){function J(vt,Ct,Bt){this.type=yr,this.lhs=vt,this.rhs=Ct,this.collator=Bt,this.hasUntypedArgument=vt.type.kind==="value"||Ct.type.kind==="value"}return J.parse=function(vt,Ct){if(vt.length!==3&&vt.length!==4)return Ct.error("Expected two or three arguments.");var Bt=vt[0],Jt=Ct.parse(vt[1],1,Ye);if(!Jt)return null;if(!wu(Bt,Jt.type))return Ct.concat(1).error('"'+Bt+`" comparisons are not supported for type '`+Nn(Jt.type)+"'.");var ve=Ct.parse(vt[2],2,Ye);if(!ve)return null;if(!wu(Bt,ve.type))return Ct.concat(2).error('"'+Bt+`" comparisons are not supported for type '`+Nn(ve.type)+"'.");if(Jt.type.kind!==ve.type.kind&&Jt.type.kind!=="value"&&ve.type.kind!=="value")return Ct.error("Cannot compare types '"+Nn(Jt.type)+"' and '"+Nn(ve.type)+"'.");F&&(Jt.type.kind==="value"&&ve.type.kind!=="value"?Jt=new Pa(ve.type,[Jt]):Jt.type.kind!=="value"&&ve.type.kind==="value"&&(ve=new Pa(Jt.type,[ve])));var Ie=null;if(vt.length===4){if(Jt.type.kind!=="string"&&ve.type.kind!=="string"&&Jt.type.kind!=="value"&&ve.type.kind!=="value")return Ct.error("Cannot use collator to compare non-string types.");if(!(Ie=Ct.parse(vt[3],3,dn)))return null}return new J(Jt,ve,Ie)},J.prototype.evaluate=function(vt){var Ct=this.lhs.evaluate(vt),Bt=this.rhs.evaluate(vt);if(F&&this.hasUntypedArgument){var Jt=ro(Ct),ve=ro(Bt);if(Jt.kind!==ve.kind||Jt.kind!=="string"&&Jt.kind!=="number")throw new Mo('Expected arguments for "'+d+'" to be (string, string) or (number, number), but found ('+Jt.kind+", "+ve.kind+") instead.")}if(this.collator&&!F&&this.hasUntypedArgument){var Ie=ro(Ct),Ue=ro(Bt);if(Ie.kind!=="string"||Ue.kind!=="string")return p(vt,Ct,Bt)}return this.collator?C(vt,Ct,Bt,this.collator.evaluate(vt)):p(vt,Ct,Bt)},J.prototype.eachChild=function(vt){vt(this.lhs),vt(this.rhs),this.collator&&vt(this.collator)},J.prototype.outputDefined=function(){return!0},J.prototype.serialize=function(){var vt=[d];return this.eachChild(function(Ct){vt.push(Ct.serialize())}),vt},J}()}ps.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),F=p.parse(d[2],2,hn);if(!C||!F)return null;if(!Tn(C.type,[Sn(Ye),Pr,Ye]))return p.error("Expected first argument to be of type array or string, but found "+Nn(C.type)+" instead");if(d.length===4){var J=p.parse(d[3],3,hn);return J?new ps(C.type,C,F,J):null}return new ps(C.type,C,F)},ps.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=this.beginIndex.evaluate(d);if(!Cr(p,["string","array"]))throw new Mo("Expected first argument to be of type array or string, but found "+Nn(ro(p))+" instead.");if(this.endIndex){var F=this.endIndex.evaluate(d);return p.slice(C,F)}return p.slice(C)},ps.prototype.eachChild=function(d){d(this.input),d(this.beginIndex),this.endIndex&&d(this.endIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var d=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),d]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var lu=Aa("==",function(d,p,C){return p===C},Ds),Pu=Aa("!=",function(d,p,C){return p!==C},function(d,p,C,F){return!Ds(0,p,C,F)}),Zu=Aa("<",function(d,p,C){return p<C},function(d,p,C,F){return F.compare(p,C)<0}),vl=Aa(">",function(d,p,C){return p>C},function(d,p,C,F){return F.compare(p,C)>0}),Tu=Aa("<=",function(d,p,C){return p<=C},function(d,p,C,F){return F.compare(p,C)<=0}),Ao=Aa(">=",function(d,p,C){return p>=C},function(d,p,C,F){return F.compare(p,C)>=0}),es=function(p,C,F,J,vt){this.type=Pr,this.number=p,this.locale=C,this.currency=F,this.minFractionDigits=J,this.maxFractionDigits=vt};es.parse=function(d,p){if(d.length!==3)return p.error("Expected two arguments.");var C=p.parse(d[1],1,hn);if(!C)return null;var F=d[2];if(typeof F!="object"||Array.isArray(F))return p.error("NumberFormat options argument must be an object.");var J=null;if(F.locale&&!(J=p.parse(F.locale,1,Pr)))return null;var vt=null;if(F.currency&&!(vt=p.parse(F.currency,1,Pr)))return null;var Ct=null;if(F["min-fraction-digits"]&&!(Ct=p.parse(F["min-fraction-digits"],1,hn)))return null;var Bt=null;return F["max-fraction-digits"]&&!(Bt=p.parse(F["max-fraction-digits"],1,hn))?null:new es(C,J,vt,Ct,Bt)},es.prototype.evaluate=function(d){return new Intl.NumberFormat(this.locale?this.locale.evaluate(d):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(d):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(d):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(d):void 0}).format(this.number.evaluate(d))},es.prototype.eachChild=function(d){d(this.number),this.locale&&d(this.locale),this.currency&&d(this.currency),this.minFractionDigits&&d(this.minFractionDigits),this.maxFractionDigits&&d(this.maxFractionDigits)},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){var d={};return this.locale&&(d.locale=this.locale.serialize()),this.currency&&(d.currency=this.currency.serialize()),this.minFractionDigits&&(d["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(d["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),d]};var gs=function(p){this.type=hn,this.input=p};gs.parse=function(d,p){if(d.length!==2)return p.error("Expected 1 argument, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1);return C?C.type.kind!=="array"&&C.type.kind!=="string"&&C.type.kind!=="value"?p.error("Expected argument of type string or array, but found "+Nn(C.type)+" instead."):new gs(C):null},gs.prototype.evaluate=function(d){var p=this.input.evaluate(d);if(typeof p=="string"||Array.isArray(p))return p.length;throw new Mo("Expected value to be of type string or array, but found "+Nn(ro(p))+" instead.")},gs.prototype.eachChild=function(d){d(this.input)},gs.prototype.outputDefined=function(){return!1},gs.prototype.serialize=function(){var d=["length"];return this.eachChild(function(p){d.push(p.serialize())}),d};var po={"==":lu,"!=":Pu,">":vl,"<":Zu,">=":Ao,"<=":Tu,array:Pa,at:$s,boolean:Pa,case:Mu,coalesce:Fo,collator:oe,format:Bo,image:Ro,in:ds,"index-of":vs,interpolate:Ki,"interpolate-hcl":Ki,"interpolate-lab":Ki,length:gs,let:hs,literal:$a,match:Qs,number:Pa,"number-format":es,object:Pa,slice:ps,step:mo,string:Pa,"to-boolean":Ko,"to-color":Ko,"to-number":Ko,"to-string":Ko,var:Vo,within:io};function cu(d,p){var C=p[0],F=p[1],J=p[2],vt=p[3];C=C.evaluate(d),F=F.evaluate(d),J=J.evaluate(d);var Ct=vt?vt.evaluate(d):1,Bt=wo(C,F,J,Ct);if(Bt)throw new Mo(Bt);return new zr(C/255*Ct,F/255*Ct,J/255*Ct,Ct)}function Oo(d,p){return d in p}function ba(d,p){var C=p[d];return C===void 0?null:C}function As(d){return{type:d}}function qs(d){return{result:"success",value:d}}function js(d){return{result:"error",value:d}}function ms(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Au(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function ks(d){return!!d.expression&&d.expression.interpolated}function Ya(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function nl(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Zl(d){return d}function Al(d,p,C){return d!==void 0?d:p!==void 0?p:C!==void 0?C:void 0}function pl(d,p,C,F,J){return Al(typeof C===J?F[C]:void 0,d.default,p.default)}function Ku(d,p,C){if(Ya(C)!=="number")return Al(d.default,p.default);var F=d.stops.length;if(F===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[F-1][0])return d.stops[F-1][1];var J=fs(d.stops.map(function(vt){return vt[0]}),C);return d.stops[J][1]}function Cu(d,p,C){var F=d.base!==void 0?d.base:1;if(Ya(C)!=="number")return Al(d.default,p.default);var J=d.stops.length;if(J===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[J-1][0])return d.stops[J-1][1];var vt=fs(d.stops.map(function(Ue){return Ue[0]}),C),Ct=function(Ue,He,fn,Ln){var On=Ln-fn,Kn=Ue-fn;return On===0?0:He===1?Kn/On:(Math.pow(He,Kn)-1)/(Math.pow(He,On)-1)}(C,F,d.stops[vt][0],d.stops[vt+1][0]),Bt=d.stops[vt][1],Jt=d.stops[vt+1][1],ve=us[p.type]||Zl;if(d.colorSpace&&d.colorSpace!=="rgb"){var Ie=ls[d.colorSpace];ve=function(He,fn){return Ie.reverse(Ie.interpolate(Ie.forward(He),Ie.forward(fn),Ct))}}return typeof Bt.evaluate=="function"?{evaluate:function(){for(var He=[],fn=arguments.length;fn--;)He[fn]=arguments[fn];var Ln=Bt.evaluate.apply(void 0,He),On=Jt.evaluate.apply(void 0,He);if(Ln!==void 0&&On!==void 0)return ve(Ln,On,Ct)}}:ve(Bt,Jt,Ct)}function Gs(d,p,C){return p.type==="color"?C=zr.parse(C):p.type==="formatted"?C=wa.fromString(C.toString()):p.type==="resolvedImage"?C=Ja.fromString(C.toString()):Ya(C)===p.type||p.type==="enum"&&p.values[C]||(C=void 0),Al(C,d.default,p.default)}je.register(po,{error:[{kind:"error"},[Pr],function(d,p){throw new Mo(p[0].evaluate(d))}],typeof:[Pr,[Ye],function(d,p){return Nn(ro(p[0].evaluate(d)))}],"to-rgba":[Sn(hn,4),[Re],function(d,p){return p[0].evaluate(d).toArray()}],rgb:[Re,[hn,hn,hn],cu],rgba:[Re,[hn,hn,hn,hn],cu],has:{type:yr,overloads:[[[Pr],function(d,p){return Oo(p[0].evaluate(d),d.properties())}],[[Pr,We],function(d,p){var C=p[1];return Oo(p[0].evaluate(d),C.evaluate(d))}]]},get:{type:Ye,overloads:[[[Pr],function(d,p){return ba(p[0].evaluate(d),d.properties())}],[[Pr,We],function(d,p){var C=p[1];return ba(p[0].evaluate(d),C.evaluate(d))}]]},"feature-state":[Ye,[Pr],function(d,p){return ba(p[0].evaluate(d),d.featureState||{})}],properties:[We,[],function(d){return d.properties()}],"geometry-type":[Pr,[],function(d){return d.geometryType()}],id:[Ye,[],function(d){return d.id()}],zoom:[hn,[],function(d){return d.globals.zoom}],"heatmap-density":[hn,[],function(d){return d.globals.heatmapDensity||0}],"line-progress":[hn,[],function(d){return d.globals.lineProgress||0}],accumulated:[Ye,[],function(d){return d.globals.accumulated===void 0?null:d.globals.accumulated}],"+":[hn,As(hn),function(d,p){for(var C=0,F=0,J=p;F<J.length;F+=1)C+=J[F].evaluate(d);return C}],"*":[hn,As(hn),function(d,p){for(var C=1,F=0,J=p;F<J.length;F+=1)C*=J[F].evaluate(d);return C}],"-":{type:hn,overloads:[[[hn,hn],function(d,p){var C=p[1];return p[0].evaluate(d)-C.evaluate(d)}],[[hn],function(d,p){return-p[0].evaluate(d)}]]},"/":[hn,[hn,hn],function(d,p){var C=p[1];return p[0].evaluate(d)/C.evaluate(d)}],"%":[hn,[hn,hn],function(d,p){var C=p[1];return p[0].evaluate(d)%C.evaluate(d)}],ln2:[hn,[],function(){return Math.LN2}],pi:[hn,[],function(){return Math.PI}],e:[hn,[],function(){return Math.E}],"^":[hn,[hn,hn],function(d,p){var C=p[1];return Math.pow(p[0].evaluate(d),C.evaluate(d))}],sqrt:[hn,[hn],function(d,p){return Math.sqrt(p[0].evaluate(d))}],log10:[hn,[hn],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN10}],ln:[hn,[hn],function(d,p){return Math.log(p[0].evaluate(d))}],log2:[hn,[hn],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN2}],sin:[hn,[hn],function(d,p){return Math.sin(p[0].evaluate(d))}],cos:[hn,[hn],function(d,p){return Math.cos(p[0].evaluate(d))}],tan:[hn,[hn],function(d,p){return Math.tan(p[0].evaluate(d))}],asin:[hn,[hn],function(d,p){return Math.asin(p[0].evaluate(d))}],acos:[hn,[hn],function(d,p){return Math.acos(p[0].evaluate(d))}],atan:[hn,[hn],function(d,p){return Math.atan(p[0].evaluate(d))}],min:[hn,As(hn),function(d,p){return Math.min.apply(Math,p.map(function(C){return C.evaluate(d)}))}],max:[hn,As(hn),function(d,p){return Math.max.apply(Math,p.map(function(C){return C.evaluate(d)}))}],abs:[hn,[hn],function(d,p){return Math.abs(p[0].evaluate(d))}],round:[hn,[hn],function(d,p){var C=p[0].evaluate(d);return C<0?-Math.round(-C):Math.round(C)}],floor:[hn,[hn],function(d,p){return Math.floor(p[0].evaluate(d))}],ceil:[hn,[hn],function(d,p){return Math.ceil(p[0].evaluate(d))}],"filter-==":[yr,[Pr,Ye],function(d,p){var C=p[0],F=p[1];return d.properties()[C.value]===F.value}],"filter-id-==":[yr,[Ye],function(d,p){var C=p[0];return d.id()===C.value}],"filter-type-==":[yr,[Pr],function(d,p){var C=p[0];return d.geometryType()===C.value}],"filter-<":[yr,[Pr,Ye],function(d,p){var C=p[0],F=p[1],J=d.properties()[C.value],vt=F.value;return typeof J==typeof vt&&J<vt}],"filter-id-<":[yr,[Ye],function(d,p){var C=p[0],F=d.id(),J=C.value;return typeof F==typeof J&&F<J}],"filter->":[yr,[Pr,Ye],function(d,p){var C=p[0],F=p[1],J=d.properties()[C.value],vt=F.value;return typeof J==typeof vt&&J>vt}],"filter-id->":[yr,[Ye],function(d,p){var C=p[0],F=d.id(),J=C.value;return typeof F==typeof J&&F>J}],"filter-<=":[yr,[Pr,Ye],function(d,p){var C=p[0],F=p[1],J=d.properties()[C.value],vt=F.value;return typeof J==typeof vt&&J<=vt}],"filter-id-<=":[yr,[Ye],function(d,p){var C=p[0],F=d.id(),J=C.value;return typeof F==typeof J&&F<=J}],"filter->=":[yr,[Pr,Ye],function(d,p){var C=p[0],F=p[1],J=d.properties()[C.value],vt=F.value;return typeof J==typeof vt&&J>=vt}],"filter-id->=":[yr,[Ye],function(d,p){var C=p[0],F=d.id(),J=C.value;return typeof F==typeof J&&F>=J}],"filter-has":[yr,[Ye],function(d,p){return p[0].value in d.properties()}],"filter-has-id":[yr,[],function(d){return d.id()!==null&&d.id()!==void 0}],"filter-type-in":[yr,[Sn(Pr)],function(d,p){return p[0].value.indexOf(d.geometryType())>=0}],"filter-id-in":[yr,[Sn(Ye)],function(d,p){return p[0].value.indexOf(d.id())>=0}],"filter-in-small":[yr,[Pr,Sn(Ye)],function(d,p){var C=p[0];return p[1].value.indexOf(d.properties()[C.value])>=0}],"filter-in-large":[yr,[Pr,Sn(Ye)],function(d,p){var C=p[0],F=p[1];return function(J,vt,Ct,Bt){for(;Ct<=Bt;){var Jt=Ct+Bt>>1;if(vt[Jt]===J)return!0;vt[Jt]>J?Bt=Jt-1:Ct=Jt+1}return!1}(d.properties()[C.value],F.value,0,F.value.length-1)}],all:{type:yr,overloads:[[[yr,yr],function(d,p){var C=p[1];return p[0].evaluate(d)&&C.evaluate(d)}],[As(yr),function(d,p){for(var C=0,F=p;C<F.length;C+=1)if(!F[C].evaluate(d))return!1;return!0}]]},any:{type:yr,overloads:[[[yr,yr],function(d,p){var C=p[1];return p[0].evaluate(d)||C.evaluate(d)}],[As(yr),function(d,p){for(var C=0,F=p;C<F.length;C+=1)if(F[C].evaluate(d))return!0;return!1}]]},"!":[yr,[yr],function(d,p){return!p[0].evaluate(d)}],"is-supported-script":[yr,[Pr],function(d,p){var C=d.globals&&d.globals.isSupportedScript;return!C||C(p[0].evaluate(d))}],upcase:[Pr,[Pr],function(d,p){return p[0].evaluate(d).toUpperCase()}],downcase:[Pr,[Pr],function(d,p){return p[0].evaluate(d).toLowerCase()}],concat:[Pr,As(Ye),function(d,p){return p.map(function(C){return ko(C.evaluate(d))}).join("")}],"resolved-locale":[Pr,[dn],function(d,p){return p[0].evaluate(d).resolvedLocale()}]});var Cl=function(p,C){this.expression=p,this._warningHistory={},this._evaluator=new Rs,this._defaultValue=C?function(F){return F.type==="color"&&nl(F.default)?new zr(0,0,0,0):F.type==="color"?zr.parse(F.default)||null:F.default===void 0?null:F.default}(C):null,this._enumValues=C&&C.type==="enum"?C.values:null};function ns(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in po}function Wa(d,p){var C=new Do(po,[],p?function(J){var vt={color:Re,string:Pr,number:hn,enum:Pr,boolean:yr,formatted:En,resolvedImage:Dn};return J.type==="array"?Sn(vt[J.value]||Ye,J.length):vt[J.type]}(p):void 0),F=C.parse(d,void 0,void 0,void 0,p&&p.type==="string"?{typeAnnotation:"coerce"}:void 0);return F?qs(new Cl(F,p)):js(C.errors)}Cl.prototype.evaluateWithoutErrorHandling=function(d,p,C,F,J,vt){return this._evaluator.globals=d,this._evaluator.feature=p,this._evaluator.featureState=C,this._evaluator.canonical=F,this._evaluator.availableImages=J||null,this._evaluator.formattedSection=vt,this.expression.evaluate(this._evaluator)},Cl.prototype.evaluate=function(d,p,C,F,J,vt){this._evaluator.globals=d,this._evaluator.feature=p||null,this._evaluator.featureState=C||null,this._evaluator.canonical=F,this._evaluator.availableImages=J||null,this._evaluator.formattedSection=vt||null;try{var Ct=this.expression.evaluate(this._evaluator);if(Ct==null||typeof Ct=="number"&&Ct!=Ct)return this._defaultValue;if(this._enumValues&&!(Ct in this._enumValues))throw new Mo("Expected value to be one of "+Object.keys(this._enumValues).map(function(Bt){return JSON.stringify(Bt)}).join(", ")+", but found "+JSON.stringify(Ct)+" instead.");return Ct}catch(Bt){return this._warningHistory[Bt.message]||(this._warningHistory[Bt.message]=!0,typeof console!="undefined"&&console.warn(Bt.message)),this._defaultValue}};var fu=function(p,C){this.kind=p,this._styleExpression=C,this.isStateDependent=p!=="constant"&&!ka(C.expression)};fu.prototype.evaluateWithoutErrorHandling=function(d,p,C,F,J,vt){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,F,J,vt)},fu.prototype.evaluate=function(d,p,C,F,J,vt){return this._styleExpression.evaluate(d,p,C,F,J,vt)};var Xu=function(p,C,F,J){this.kind=p,this.zoomStops=F,this._styleExpression=C,this.isStateDependent=p!=="camera"&&!ka(C.expression),this.interpolationType=J};function Ll(d,p){if((d=Wa(d,p)).result==="error")return d;var C=d.value.expression,F=uo(C);if(!F&&!ms(p))return js([new Cn("","data expressions not supported")]);var J=vo(C,["zoom"]);if(!J&&!Au(p))return js([new Cn("","zoom expressions not supported")]);var vt=function Ct(Bt){var Jt=null;if(Bt instanceof hs)Jt=Ct(Bt.result);else if(Bt instanceof Fo)for(var ve=0,Ie=Bt.args;ve<Ie.length&&!(Jt=Ct(Ie[ve]));ve+=1);else(Bt instanceof mo||Bt instanceof Ki)&&Bt.input instanceof je&&Bt.input.name==="zoom"&&(Jt=Bt);return Jt instanceof Cn||Bt.eachChild(function(Ue){var He=Ct(Ue);He instanceof Cn?Jt=He:!Jt&&He?Jt=new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Jt&&He&&Jt!==He&&(Jt=new Cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Jt}(C);return vt||J?vt instanceof Cn?js([vt]):vt instanceof Ki&&!ks(p)?js([new Cn("",'"interpolate" expressions cannot be used with this property')]):qs(vt?new Xu(F?"camera":"composite",d.value,vt.labels,vt instanceof Ki?vt.interpolation:void 0):new fu(F?"constant":"source",d.value)):js([new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Xu.prototype.evaluateWithoutErrorHandling=function(d,p,C,F,J,vt){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,F,J,vt)},Xu.prototype.evaluate=function(d,p,C,F,J,vt){return this._styleExpression.evaluate(d,p,C,F,J,vt)},Xu.prototype.interpolationFactor=function(d,p,C){return this.interpolationType?Ki.interpolationFactor(this.interpolationType,d,p,C):0};var Uu=function(p,C){this._parameters=p,this._specification=C,zn(this,function F(J,vt){var Ct,Bt,Jt,ve=vt.type==="color",Ie=J.stops&&typeof J.stops[0][0]=="object",Ue=Ie||!(Ie||J.property!==void 0),He=J.type||(ks(vt)?"exponential":"interval");if(ve&&((J=zn({},J)).stops&&(J.stops=J.stops.map(function(na){return[na[0],zr.parse(na[1])]})),J.default=zr.parse(J.default?J.default:vt.default)),J.colorSpace&&J.colorSpace!=="rgb"&&!ls[J.colorSpace])throw new Error("Unknown color space: "+J.colorSpace);if(He==="exponential")Ct=Cu;else if(He==="interval")Ct=Ku;else if(He==="categorical"){Ct=pl,Bt=Object.create(null);for(var fn=0,Ln=J.stops;fn<Ln.length;fn+=1){var On=Ln[fn];Bt[On[0]]=On[1]}Jt=typeof J.stops[0][0]}else{if(He!=="identity")throw new Error('Unknown function type "'+He+'"');Ct=Gs}if(Ie){for(var Kn={},$n=[],_r=0;_r<J.stops.length;_r++){var Br=J.stops[_r],Hr=Br[0].zoom;Kn[Hr]===void 0&&(Kn[Hr]={zoom:Hr,type:J.type,property:J.property,default:J.default,stops:[]},$n.push(Hr)),Kn[Hr].stops.push([Br[0].value,Br[1]])}for(var pi=[],ii=0,Li=$n;ii<Li.length;ii+=1){var Ri=Li[ii];pi.push([Kn[Ri].zoom,F(Kn[Ri],vt)])}var Xi={name:"linear"};return{kind:"composite",interpolationType:Xi,interpolationFactor:Ki.interpolationFactor.bind(void 0,Xi),zoomStops:pi.map(function(na){return na[0]}),evaluate:function(Zi,qa){var xa=Zi.zoom;return Cu({stops:pi,base:J.base},vt,xa).evaluate(xa,qa)}}}if(Ue){var ua=He==="exponential"?{name:"exponential",base:J.base!==void 0?J.base:1}:null;return{kind:"camera",interpolationType:ua,interpolationFactor:Ki.interpolationFactor.bind(void 0,ua),zoomStops:J.stops.map(function(na){return na[0]}),evaluate:function(Zi){return Ct(J,vt,Zi.zoom,Bt,Jt)}}}return{kind:"source",evaluate:function(Zi,qa){var xa=qa&&qa.properties?qa.properties[J.property]:void 0;return xa===void 0?Al(J.default,vt.default):Ct(J,vt,xa,Bt,Jt)}}}(this._parameters,this._specification))};function Vs(d){var p=d.key,C=d.value,F=d.valueSpec||{},J=d.objectElementValidators||{},vt=d.style,Ct=d.styleSpec,Bt=[],Jt=Ya(C);if(Jt!=="object")return[new xe(p,C,"object expected, "+Jt+" found")];for(var ve in C){var Ie=ve.split(".")[0],Ue=F[Ie]||F["*"],He=void 0;if(J[Ie])He=J[Ie];else if(F[Ie])He=Ra;else if(J["*"])He=J["*"];else{if(!F["*"]){Bt.push(new xe(p,C[ve],'unknown property "'+ve+'"'));continue}He=Ra}Bt=Bt.concat(He({key:(p&&p+".")+ve,value:C[ve],valueSpec:Ue,style:vt,styleSpec:Ct,object:C,objectKey:ve},C))}for(var fn in F)J[fn]||F[fn].required&&F[fn].default===void 0&&C[fn]===void 0&&Bt.push(new xe(p,C,'missing required property "'+fn+'"'));return Bt}function rl(d){var p=d.value,C=d.valueSpec,F=d.style,J=d.styleSpec,vt=d.key,Ct=d.arrayElementValidator||Ra;if(Ya(p)!=="array")return[new xe(vt,p,"array expected, "+Ya(p)+" found")];if(C.length&&p.length!==C.length)return[new xe(vt,p,"array length "+C.length+" expected, length "+p.length+" found")];if(C["min-length"]&&p.length<C["min-length"])return[new xe(vt,p,"array length at least "+C["min-length"]+" expected, length "+p.length+" found")];var Bt={type:C.value,values:C.values};J.$version<7&&(Bt.function=C.function),Ya(C.value)==="object"&&(Bt=C.value);for(var Jt=[],ve=0;ve<p.length;ve++)Jt=Jt.concat(Ct({array:p,arrayIndex:ve,value:p[ve],valueSpec:Bt,style:F,styleSpec:J,key:vt+"["+ve+"]"}));return Jt}function hu(d){var p=d.key,C=d.value,F=d.valueSpec,J=Ya(C);return J==="number"&&C!=C&&(J="NaN"),J!=="number"?[new xe(p,C,"number expected, "+J+" found")]:"minimum"in F&&C<F.minimum?[new xe(p,C,C+" is less than the minimum value "+F.minimum)]:"maximum"in F&&C>F.maximum?[new xe(p,C,C+" is greater than the maximum value "+F.maximum)]:[]}function Ss(d){var p,C,F,J=d.valueSpec,vt=ar(d.value.type),Ct={},Bt=vt!=="categorical"&&d.value.property===void 0,Jt=!Bt,ve=Ya(d.value.stops)==="array"&&Ya(d.value.stops[0])==="array"&&Ya(d.value.stops[0][0])==="object",Ie=Vs({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Ln){if(vt==="identity")return[new xe(Ln.key,Ln.value,'identity function may not have a "stops" property')];var On=[],Kn=Ln.value;return On=On.concat(rl({key:Ln.key,value:Kn,valueSpec:Ln.valueSpec,style:Ln.style,styleSpec:Ln.styleSpec,arrayElementValidator:Ue})),Ya(Kn)==="array"&&Kn.length===0&&On.push(new xe(Ln.key,Kn,"array must have at least one stop")),On},default:function(Ln){return Ra({key:Ln.key,value:Ln.value,valueSpec:J,style:Ln.style,styleSpec:Ln.styleSpec})}}});return vt==="identity"&&Bt&&Ie.push(new xe(d.key,d.value,'missing required property "property"')),vt==="identity"||d.value.stops||Ie.push(new xe(d.key,d.value,'missing required property "stops"')),vt==="exponential"&&d.valueSpec.expression&&!ks(d.valueSpec)&&Ie.push(new xe(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(Jt&&!ms(d.valueSpec)?Ie.push(new xe(d.key,d.value,"property functions not supported")):Bt&&!Au(d.valueSpec)&&Ie.push(new xe(d.key,d.value,"zoom functions not supported"))),vt!=="categorical"&&!ve||d.value.property!==void 0||Ie.push(new xe(d.key,d.value,'"property" property is required')),Ie;function Ue(fn){var Ln=[],On=fn.value,Kn=fn.key;if(Ya(On)!=="array")return[new xe(Kn,On,"array expected, "+Ya(On)+" found")];if(On.length!==2)return[new xe(Kn,On,"array length 2 expected, length "+On.length+" found")];if(ve){if(Ya(On[0])!=="object")return[new xe(Kn,On,"object expected, "+Ya(On[0])+" found")];if(On[0].zoom===void 0)return[new xe(Kn,On,"object stop key must have zoom")];if(On[0].value===void 0)return[new xe(Kn,On,"object stop key must have value")];if(F&&F>ar(On[0].zoom))return[new xe(Kn,On[0].zoom,"stop zoom values must appear in ascending order")];ar(On[0].zoom)!==F&&(F=ar(On[0].zoom),C=void 0,Ct={}),Ln=Ln.concat(Vs({key:Kn+"[0]",value:On[0],valueSpec:{zoom:{}},style:fn.style,styleSpec:fn.styleSpec,objectElementValidators:{zoom:hu,value:He}}))}else Ln=Ln.concat(He({key:Kn+"[0]",value:On[0],valueSpec:{},style:fn.style,styleSpec:fn.styleSpec},On));return ns(_n(On[1]))?Ln.concat([new xe(Kn+"[1]",On[1],"expressions are not allowed in function stops.")]):Ln.concat(Ra({key:Kn+"[1]",value:On[1],valueSpec:J,style:fn.style,styleSpec:fn.styleSpec}))}function He(fn,Ln){var On=Ya(fn.value),Kn=ar(fn.value),$n=fn.value!==null?fn.value:Ln;if(p){if(On!==p)return[new xe(fn.key,$n,On+" stop domain type must match previous stop domain type "+p)]}else p=On;if(On!=="number"&&On!=="string"&&On!=="boolean")return[new xe(fn.key,$n,"stop domain value must be a number, string, or boolean")];if(On!=="number"&&vt!=="categorical"){var _r="number expected, "+On+" found";return ms(J)&&vt===void 0&&(_r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xe(fn.key,$n,_r)]}return vt!=="categorical"||On!=="number"||isFinite(Kn)&&Math.floor(Kn)===Kn?vt!=="categorical"&&On==="number"&&C!==void 0&&Kn<C?[new xe(fn.key,$n,"stop domain values must appear in ascending order")]:(C=Kn,vt==="categorical"&&Kn in Ct?[new xe(fn.key,$n,"stop domain values must be unique")]:(Ct[Kn]=!0,[])):[new xe(fn.key,$n,"integer expected, found "+Kn)]}}function Ws(d){var p=(d.expressionContext==="property"?Ll:Wa)(_n(d.value),d.valueSpec);if(p.result==="error")return p.value.map(function(F){return new xe(""+d.key+F.key,d.value,F.message)});var C=p.value.expression||p.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!C.outputDefined())return[new xe(d.key,d.value,'Invalid data expression for "'+d.propertyKey+'". Output values must be contained as literals within the expression.')];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!ka(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!ka(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!vo(C,["zoom","feature-state"]))return[new xe(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!uo(C))return[new xe(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gl(d){var p=d.key,C=d.value,F=d.valueSpec,J=[];return Array.isArray(F.values)?F.values.indexOf(ar(C))===-1&&J.push(new xe(p,C,"expected one of ["+F.values.join(", ")+"], "+JSON.stringify(C)+" found")):Object.keys(F.values).indexOf(ar(C))===-1&&J.push(new xe(p,C,"expected one of ["+Object.keys(F.values).join(", ")+"], "+JSON.stringify(C)+" found")),J}function Iu(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(var p=0,C=d.slice(1);p<C.length;p+=1){var F=C[p];if(!Iu(F)&&typeof F!="boolean")return!1}return!0;default:return!0}}Uu.deserialize=function(d){return new Uu(d._parameters,d._specification)},Uu.serialize=function(d){return{_parameters:d._parameters,_specification:d._specification}};var Lu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function du(d){if(d==null)return{filter:function(){return!0},needGeometry:!1};Iu(d)||(d=pu(d));var p=Wa(d,Lu);if(p.result==="error")throw new Error(p.value.map(function(C){return C.key+": "+C.message}).join(", "));return{filter:function(F,J,vt){return p.value.evaluate(F,J,{},vt)},needGeometry:function C(F){if(!Array.isArray(F))return!1;if(F[0]==="within")return!0;for(var J=1;J<F.length;J++)if(C(F[J]))return!0;return!1}(d)}}function vu(d,p){return d<p?-1:d>p?1:0}function pu(d){if(!d)return!0;var p,C=d[0];return d.length<=1?C!=="any":C==="=="?Ol(d[1],d[2],"=="):C==="!="?gu(Ol(d[1],d[2],"==")):C==="<"||C===">"||C==="<="||C===">="?Ol(d[1],d[2],C):C==="any"?(p=d.slice(1),["any"].concat(p.map(pu))):C==="all"?["all"].concat(d.slice(1).map(pu)):C==="none"?["all"].concat(d.slice(1).map(pu).map(gu)):C==="in"?rc(d[1],d.slice(2)):C==="!in"?gu(rc(d[1],d.slice(2))):C==="has"?ql(d[1]):C==="!has"?gu(ql(d[1])):C!=="within"||d}function Ol(d,p,C){switch(d){case"$type":return["filter-type-"+C,p];case"$id":return["filter-id-"+C,p];default:return["filter-"+C,d,p]}}function rc(d,p){if(p.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",p]];case"$id":return["filter-id-in",["literal",p]];default:return p.length>200&&!p.some(function(C){return typeof C!=typeof p[0]})?["filter-in-large",d,["literal",p.sort(vu)]]:["filter-in-small",d,["literal",p]]}}function ql(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function gu(d){return["!",d]}function Nl(d){return Iu(_n(d.value))?Ws(zn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function p(C){var F=C.value,J=C.key;if(Ya(F)!=="array")return[new xe(J,F,"array expected, "+Ya(F)+" found")];var vt,Ct=C.styleSpec,Bt=[];if(F.length<1)return[new xe(J,F,"filter array must have at least 1 element")];switch(Bt=Bt.concat(gl({key:J+"[0]",value:F[0],valueSpec:Ct.filter_operator,style:C.style,styleSpec:C.styleSpec})),ar(F[0])){case"<":case"<=":case">":case">=":F.length>=2&&ar(F[1])==="$type"&&Bt.push(new xe(J,F,'"$type" cannot be use with operator "'+F[0]+'"'));case"==":case"!=":F.length!==3&&Bt.push(new xe(J,F,'filter array for operator "'+F[0]+'" must have 3 elements'));case"in":case"!in":F.length>=2&&(vt=Ya(F[1]))!=="string"&&Bt.push(new xe(J+"[1]",F[1],"string expected, "+vt+" found"));for(var Jt=2;Jt<F.length;Jt++)vt=Ya(F[Jt]),ar(F[1])==="$type"?Bt=Bt.concat(gl({key:J+"["+Jt+"]",value:F[Jt],valueSpec:Ct.geometry_type,style:C.style,styleSpec:C.styleSpec})):vt!=="string"&&vt!=="number"&&vt!=="boolean"&&Bt.push(new xe(J+"["+Jt+"]",F[Jt],"string, number, or boolean expected, "+vt+" found"));break;case"any":case"all":case"none":for(var ve=1;ve<F.length;ve++)Bt=Bt.concat(p({key:J+"["+ve+"]",value:F[ve],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":vt=Ya(F[1]),F.length!==2?Bt.push(new xe(J,F,'filter array for "'+F[0]+'" operator must have 2 elements')):vt!=="string"&&Bt.push(new xe(J+"[1]",F[1],"string expected, "+vt+" found"));break;case"within":vt=Ya(F[1]),F.length!==2?Bt.push(new xe(J,F,'filter array for "'+F[0]+'" operator must have 2 elements')):vt!=="object"&&Bt.push(new xe(J+"[1]",F[1],"object expected, "+vt+" found"))}return Bt}(d)}function tc(d,p){var C=d.key,F=d.style,J=d.styleSpec,vt=d.value,Ct=d.objectKey,Bt=J[p+"_"+d.layerType];if(!Bt)return[];var Jt=Ct.match(/^(.*)-transition$/);if(p==="paint"&&Jt&&Bt[Jt[1]]&&Bt[Jt[1]].transition)return Ra({key:C,value:vt,valueSpec:J.transition,style:F,styleSpec:J});var ve,Ie=d.valueSpec||Bt[Ct];if(!Ie)return[new xe(C,vt,'unknown property "'+Ct+'"')];if(Ya(vt)==="string"&&ms(Ie)&&!Ie.tokens&&(ve=/^{([^}]+)}$/.exec(vt)))return[new xe(C,vt,'"'+Ct+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ve[1])+" }`.")];var Ue=[];return d.layerType==="symbol"&&(Ct==="text-field"&&F&&!F.glyphs&&Ue.push(new xe(C,vt,'use of "text-field" requires a style "glyphs" property')),Ct==="text-font"&&nl(_n(vt))&&ar(vt.type)==="identity"&&Ue.push(new xe(C,vt,'"text-font" does not support identity functions'))),Ue.concat(Ra({key:d.key,value:vt,valueSpec:Ie,style:F,styleSpec:J,expressionContext:"property",propertyType:p,propertyKey:Ct}))}function Ou(d){return tc(d,"paint")}function ml(d){return tc(d,"layout")}function wl(d){var p=[],C=d.value,F=d.key,J=d.style,vt=d.styleSpec;C.type||C.ref||p.push(new xe(F,C,'either "type" or "ref" is required'));var Ct,Bt=ar(C.type),Jt=ar(C.ref);if(C.id)for(var ve=ar(C.id),Ie=0;Ie<d.arrayIndex;Ie++){var Ue=J.layers[Ie];ar(Ue.id)===ve&&p.push(new xe(F,C.id,'duplicate layer id "'+C.id+'", previously used at line '+Ue.id.__line__))}if("ref"in C)["type","source","source-layer","filter","layout"].forEach(function(Ln){Ln in C&&p.push(new xe(F,C[Ln],'"'+Ln+'" is prohibited for ref layers'))}),J.layers.forEach(function(Ln){ar(Ln.id)===Jt&&(Ct=Ln)}),Ct?Ct.ref?p.push(new xe(F,C.ref,"ref cannot reference another ref layer")):Bt=ar(Ct.type):p.push(new xe(F,C.ref,'ref layer "'+Jt+'" not found'));else if(Bt!=="background")if(C.source){var He=J.sources&&J.sources[C.source],fn=He&&ar(He.type);He?fn==="vector"&&Bt==="raster"?p.push(new xe(F,C.source,'layer "'+C.id+'" requires a raster source')):fn==="raster"&&Bt!=="raster"?p.push(new xe(F,C.source,'layer "'+C.id+'" requires a vector source')):fn!=="vector"||C["source-layer"]?fn==="raster-dem"&&Bt!=="hillshade"?p.push(new xe(F,C.source,"raster-dem source can only be used with layer type 'hillshade'.")):Bt!=="line"||!C.paint||!C.paint["line-gradient"]||fn==="geojson"&&He.lineMetrics||p.push(new xe(F,C,'layer "'+C.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):p.push(new xe(F,C,'layer "'+C.id+'" must specify a "source-layer"')):p.push(new xe(F,C.source,'source "'+C.source+'" not found'))}else p.push(new xe(F,C,'missing required property "source"'));return p=p.concat(Vs({key:F,value:C,valueSpec:vt.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ra({key:F+".type",value:C.type,valueSpec:vt.layer.type,style:d.style,styleSpec:d.styleSpec,object:C,objectKey:"type"})},filter:Nl,layout:function(On){return Vs({layer:C,key:On.key,value:On.value,style:On.style,styleSpec:On.styleSpec,objectElementValidators:{"*":function($n){return ml(zn({layerType:Bt},$n))}}})},paint:function(On){return Vs({layer:C,key:On.key,value:On.value,style:On.style,styleSpec:On.styleSpec,objectElementValidators:{"*":function($n){return Ou(zn({layerType:Bt},$n))}}})}}}))}function Bs(d){var p=d.value,C=d.key,F=Ya(p);return F!=="string"?[new xe(C,p,"string expected, "+F+" found")]:[]}var ao={promoteId:function(p){var C=p.key,F=p.value;if(Ya(F)==="string")return Bs({key:C,value:F});var J=[];for(var vt in F)J.push.apply(J,Bs({key:C+"."+vt,value:F[vt]}));return J}};function yl(d){var p=d.value,C=d.key,F=d.styleSpec,J=d.style;if(!p.type)return[new xe(C,p,'"type" is required')];var vt,Ct=ar(p.type);switch(Ct){case"vector":case"raster":case"raster-dem":return Vs({key:C,value:p,valueSpec:F["source_"+Ct.replace("-","_")],style:d.style,styleSpec:F,objectElementValidators:ao});case"geojson":if(vt=Vs({key:C,value:p,valueSpec:F.source_geojson,style:J,styleSpec:F,objectElementValidators:ao}),p.cluster)for(var Bt in p.clusterProperties){var Jt=p.clusterProperties[Bt],ve=Jt[0],Ie=typeof ve=="string"?[ve,["accumulated"],["get",Bt]]:ve;vt.push.apply(vt,Ws({key:C+"."+Bt+".map",value:Jt[1],expressionContext:"cluster-map"})),vt.push.apply(vt,Ws({key:C+"."+Bt+".reduce",value:Ie,expressionContext:"cluster-reduce"}))}return vt;case"video":return Vs({key:C,value:p,valueSpec:F.source_video,style:J,styleSpec:F});case"image":return Vs({key:C,value:p,valueSpec:F.source_image,style:J,styleSpec:F});case"canvas":return[new xe(C,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gl({key:C+".type",value:p.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:J,styleSpec:F})}}function il(d){var p=d.value,C=d.styleSpec,F=C.light,J=d.style,vt=[],Ct=Ya(p);if(p===void 0)return vt;if(Ct!=="object")return vt.concat([new xe("light",p,"object expected, "+Ct+" found")]);for(var Bt in p){var Jt=Bt.match(/^(.*)-transition$/);vt=vt.concat(Jt&&F[Jt[1]]&&F[Jt[1]].transition?Ra({key:Bt,value:p[Bt],valueSpec:C.transition,style:J,styleSpec:C}):F[Bt]?Ra({key:Bt,value:p[Bt],valueSpec:F[Bt],style:J,styleSpec:C}):[new xe(Bt,p[Bt],'unknown property "'+Bt+'"')])}return vt}var Hs={"*":function(){return[]},array:rl,boolean:function(p){var C=p.value,F=p.key,J=Ya(C);return J!=="boolean"?[new xe(F,C,"boolean expected, "+J+" found")]:[]},number:hu,color:function(p){var C=p.key,F=p.value,J=Ya(F);return J!=="string"?[new xe(C,F,"color expected, "+J+" found")]:pr(F)===null?[new xe(C,F,'color expected, "'+F+'" found')]:[]},constants:qe,enum:gl,filter:Nl,function:Ss,layer:wl,object:Vs,source:yl,light:il,string:Bs,formatted:function(p){return Bs(p).length===0?[]:Ws(p)},resolvedImage:function(p){return Bs(p).length===0?[]:Ws(p)}};function Ra(d){var p=d.value,C=d.valueSpec,F=d.styleSpec;return C.expression&&nl(ar(p))?Ss(d):C.expression&&ns(_n(p))?Ws(d):C.type&&Hs[C.type]?Hs[C.type](d):Vs(zn({},d,{valueSpec:C.type?F[C.type]:C}))}function xo(d){var p=d.value,C=d.key,F=Bs(d);return F.length||(p.indexOf("{fontstack}")===-1&&F.push(new xe(C,p,'"glyphs" url must include a "{fontstack}" token')),p.indexOf("{range}")===-1&&F.push(new xe(C,p,'"glyphs" url must include a "{range}" token'))),F}function ru(d,p){p===void 0&&(p=ae);var C=[];return C=C.concat(Ra({key:"",value:d,valueSpec:p.$root,styleSpec:p,style:d,objectElementValidators:{glyphs:xo,"*":function(){return[]}}})),d.constants&&(C=C.concat(qe({key:"constants",value:d.constants,style:d,styleSpec:p}))),xl(C)}function xl(d){return[].concat(d).sort(function(p,C){return p.line-C.line})}function al(d){return function(){for(var p=[],C=arguments.length;C--;)p[C]=arguments[C];return xl(d.apply(this,p))}}ru.source=al(yl),ru.light=al(il),ru.layer=al(wl),ru.filter=al(Nl),ru.paintProperty=al(Ou),ru.layoutProperty=al(ml);var ku=ru,zl=ku.light,cs=ku.paintProperty,bl=ku.layoutProperty;function mu(d,p){var C=!1;if(p&&p.length)for(var F=0,J=p;F<J.length;F+=1)d.fire(new re(new Error(J[F].message))),C=!0;return C}var Fs=Wo;function Wo(d,p,C){var F=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;var J=new Int32Array(this.arrayBuffer);d=J[0],this.d=(p=J[1])+2*(C=J[2]);for(var vt=0;vt<this.d*this.d;vt++){var Ct=J[3+vt],Bt=J[3+vt+1];F.push(Ct===Bt?null:J.subarray(Ct,Bt))}var Jt=J[3+F.length+1];this.keys=J.subarray(J[3+F.length],Jt),this.bboxes=J.subarray(Jt),this.insert=this._insertReadonly}else{this.d=p+2*C;for(var ve=0;ve<this.d*this.d;ve++)F.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=d,this.padding=C,this.scale=p/d,this.uid=0;var Ie=C/p*d;this.min=-Ie,this.max=d+Ie}Wo.prototype.insert=function(d,p,C,F,J){this._forEachCell(p,C,F,J,this._insertCell,this.uid++),this.keys.push(d),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(F),this.bboxes.push(J)},Wo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Wo.prototype._insertCell=function(d,p,C,F,J,vt){this.cells[J].push(vt)},Wo.prototype.query=function(d,p,C,F,J){var vt=this.min,Ct=this.max;if(d<=vt&&p<=vt&&Ct<=C&&Ct<=F&&!J)return Array.prototype.slice.call(this.keys);var Bt=[];return this._forEachCell(d,p,C,F,this._queryCell,Bt,{},J),Bt},Wo.prototype._queryCell=function(d,p,C,F,J,vt,Ct,Bt){var Jt=this.cells[J];if(Jt!==null)for(var ve=this.keys,Ie=this.bboxes,Ue=0;Ue<Jt.length;Ue++){var He=Jt[Ue];if(Ct[He]===void 0){var fn=4*He;(Bt?Bt(Ie[fn+0],Ie[fn+1],Ie[fn+2],Ie[fn+3]):d<=Ie[fn+2]&&p<=Ie[fn+3]&&C>=Ie[fn+0]&&F>=Ie[fn+1])?(Ct[He]=!0,vt.push(ve[He])):Ct[He]=!1}}},Wo.prototype._forEachCell=function(d,p,C,F,J,vt,Ct,Bt){for(var Jt=this._convertToCellCoord(d),ve=this._convertToCellCoord(p),Ie=this._convertToCellCoord(C),Ue=this._convertToCellCoord(F),He=Jt;He<=Ie;He++)for(var fn=ve;fn<=Ue;fn++){var Ln=this.d*fn+He;if((!Bt||Bt(this._convertFromCellCoord(He),this._convertFromCellCoord(fn),this._convertFromCellCoord(He+1),this._convertFromCellCoord(fn+1)))&&J.call(this,d,p,C,F,Ln,vt,Ct,Bt))return}},Wo.prototype._convertFromCellCoord=function(d){return(d-this.padding)/this.scale},Wo.prototype._convertToCellCoord=function(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))},Wo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var d=this.cells,p=3+this.cells.length+1+1,C=0,F=0;F<this.cells.length;F++)C+=this.cells[F].length;var J=new Int32Array(p+C+this.keys.length+this.bboxes.length);J[0]=this.extent,J[1]=this.n,J[2]=this.padding;for(var vt=p,Ct=0;Ct<d.length;Ct++){var Bt=d[Ct];J[3+Ct]=vt,J.set(Bt,vt),vt+=Bt.length}return J[3+d.length]=vt,J.set(this.keys,vt),J[3+d.length+1]=vt+=this.keys.length,J.set(this.bboxes,vt),vt+=this.bboxes.length,J.buffer};var _s=n.ImageData,iu=n.ImageBitmap,Ho={};function Ni(d,p,C){C===void 0&&(C={}),Object.defineProperty(p,"_classRegistryKey",{value:d,writeable:!1}),Ho[d]={klass:p,omit:C.omit||[],shallow:C.shallow||[]}}for(var Ns in Ni("Object",Object),Fs.serialize=function(d,p){var C=d.toArrayBuffer();return p&&p.push(C),{buffer:C}},Fs.deserialize=function(d){return new Fs(d.buffer)},Ni("Grid",Fs),Ni("Color",zr),Ni("Error",Error),Ni("ResolvedImage",Ja),Ni("StylePropertyFunction",Uu),Ni("StyleExpression",Cl,{omit:["_evaluator"]}),Ni("ZoomDependentExpression",Xu),Ni("ZoomConstantExpression",fu),Ni("CompoundExpression",je,{omit:["_evaluate"]}),po)po[Ns]._classRegistryKey||Ni("Expression_"+Ns,po[Ns]);function El(d){return d&&typeof ArrayBuffer!="undefined"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function ol(d){return iu&&d instanceof iu}function No(d,p){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(El(d)||ol(d))return p&&p.push(d),d;if(ArrayBuffer.isView(d)){var C=d;return p&&p.push(C.buffer),C}if(d instanceof _s)return p&&p.push(d.data.buffer),d;if(Array.isArray(d)){for(var F=[],J=0,vt=d;J<vt.length;J+=1)F.push(No(vt[J],p));return F}if(typeof d=="object"){var Ct=d.constructor,Bt=Ct._classRegistryKey;if(!Bt)throw new Error("can't serialize object of unregistered class");var Jt=Ct.serialize?Ct.serialize(d,p):{};if(!Ct.serialize){for(var ve in d)if(d.hasOwnProperty(ve)&&!(Ho[Bt].omit.indexOf(ve)>=0)){var Ie=d[ve];Jt[ve]=Ho[Bt].shallow.indexOf(ve)>=0?Ie:No(Ie,p)}d instanceof Error&&(Jt.message=d.message)}if(Jt.$name)throw new Error("$name property is reserved for worker serialization logic.");return Bt!=="Object"&&(Jt.$name=Bt),Jt}throw new Error("can't serialize object of type "+typeof d)}function Co(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||El(d)||ol(d)||ArrayBuffer.isView(d)||d instanceof _s)return d;if(Array.isArray(d))return d.map(Co);if(typeof d=="object"){var p=d.$name||"Object",C=Ho[p].klass;if(!C)throw new Error("can't deserialize unregistered class "+p);if(C.deserialize)return C.deserialize(d);for(var F=Object.create(C.prototype),J=0,vt=Object.keys(d);J<vt.length;J+=1){var Ct=vt[J];if(Ct!=="$name"){var Bt=d[Ct];F[Ct]=Ho[p].shallow.indexOf(Ct)>=0?Bt:Co(Bt)}}return F}throw new Error("can't deserialize object of type "+typeof d)}var tu=function(){this.first=!0};tu.prototype.update=function(d,p){var C=Math.floor(d);return this.first?(this.first=!1,this.lastIntegerZoom=C,this.lastIntegerZoomTime=0,this.lastZoom=d,this.lastFloorZoom=C,!0):(this.lastFloorZoom>C?(this.lastIntegerZoom=C+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<C&&(this.lastIntegerZoom=C,this.lastIntegerZoomTime=p),d!==this.lastZoom&&(this.lastZoom=d,this.lastFloorZoom=C,!0))};var mi={"Latin-1 Supplement":function(p){return p>=128&&p<=255},Arabic:function(p){return p>=1536&&p<=1791},"Arabic Supplement":function(p){return p>=1872&&p<=1919},"Arabic Extended-A":function(p){return p>=2208&&p<=2303},"Hangul Jamo":function(p){return p>=4352&&p<=4607},"Unified Canadian Aboriginal Syllabics":function(p){return p>=5120&&p<=5759},Khmer:function(p){return p>=6016&&p<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(p){return p>=6320&&p<=6399},"General Punctuation":function(p){return p>=8192&&p<=8303},"Letterlike Symbols":function(p){return p>=8448&&p<=8527},"Number Forms":function(p){return p>=8528&&p<=8591},"Miscellaneous Technical":function(p){return p>=8960&&p<=9215},"Control Pictures":function(p){return p>=9216&&p<=9279},"Optical Character Recognition":function(p){return p>=9280&&p<=9311},"Enclosed Alphanumerics":function(p){return p>=9312&&p<=9471},"Geometric Shapes":function(p){return p>=9632&&p<=9727},"Miscellaneous Symbols":function(p){return p>=9728&&p<=9983},"Miscellaneous Symbols and Arrows":function(p){return p>=11008&&p<=11263},"CJK Radicals Supplement":function(p){return p>=11904&&p<=12031},"Kangxi Radicals":function(p){return p>=12032&&p<=12255},"Ideographic Description Characters":function(p){return p>=12272&&p<=12287},"CJK Symbols and Punctuation":function(p){return p>=12288&&p<=12351},Hiragana:function(p){return p>=12352&&p<=12447},Katakana:function(p){return p>=12448&&p<=12543},Bopomofo:function(p){return p>=12544&&p<=12591},"Hangul Compatibility Jamo":function(p){return p>=12592&&p<=12687},Kanbun:function(p){return p>=12688&&p<=12703},"Bopomofo Extended":function(p){return p>=12704&&p<=12735},"CJK Strokes":function(p){return p>=12736&&p<=12783},"Katakana Phonetic Extensions":function(p){return p>=12784&&p<=12799},"Enclosed CJK Letters and Months":function(p){return p>=12800&&p<=13055},"CJK Compatibility":function(p){return p>=13056&&p<=13311},"CJK Unified Ideographs Extension A":function(p){return p>=13312&&p<=19903},"Yijing Hexagram Symbols":function(p){return p>=19904&&p<=19967},"CJK Unified Ideographs":function(p){return p>=19968&&p<=40959},"Yi Syllables":function(p){return p>=40960&&p<=42127},"Yi Radicals":function(p){return p>=42128&&p<=42191},"Hangul Jamo Extended-A":function(p){return p>=43360&&p<=43391},"Hangul Syllables":function(p){return p>=44032&&p<=55215},"Hangul Jamo Extended-B":function(p){return p>=55216&&p<=55295},"Private Use Area":function(p){return p>=57344&&p<=63743},"CJK Compatibility Ideographs":function(p){return p>=63744&&p<=64255},"Arabic Presentation Forms-A":function(p){return p>=64336&&p<=65023},"Vertical Forms":function(p){return p>=65040&&p<=65055},"CJK Compatibility Forms":function(p){return p>=65072&&p<=65103},"Small Form Variants":function(p){return p>=65104&&p<=65135},"Arabic Presentation Forms-B":function(p){return p>=65136&&p<=65279},"Halfwidth and Fullwidth Forms":function(p){return p>=65280&&p<=65519}};function Ru(d){for(var p=0,C=d;p<C.length;p+=1)if(Du(C[p].charCodeAt(0)))return!0;return!1}function Du(d){return!(d!==746&&d!==747&&(d<4352||!(mi["Bopomofo Extended"](d)||mi.Bopomofo(d)||mi["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||mi["CJK Compatibility Ideographs"](d)||mi["CJK Compatibility"](d)||mi["CJK Radicals Supplement"](d)||mi["CJK Strokes"](d)||!(!mi["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||mi["CJK Unified Ideographs Extension A"](d)||mi["CJK Unified Ideographs"](d)||mi["Enclosed CJK Letters and Months"](d)||mi["Hangul Compatibility Jamo"](d)||mi["Hangul Jamo Extended-A"](d)||mi["Hangul Jamo Extended-B"](d)||mi["Hangul Jamo"](d)||mi["Hangul Syllables"](d)||mi.Hiragana(d)||mi["Ideographic Description Characters"](d)||mi.Kanbun(d)||mi["Kangxi Radicals"](d)||mi["Katakana Phonetic Extensions"](d)||mi.Katakana(d)&&d!==12540||!(!mi["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!mi["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||mi["Unified Canadian Aboriginal Syllabics"](d)||mi["Unified Canadian Aboriginal Syllabics Extended"](d)||mi["Vertical Forms"](d)||mi["Yijing Hexagram Symbols"](d)||mi["Yi Syllables"](d)||mi["Yi Radicals"](d))))}function ju(d){return!(Du(d)||function(p){return!!(mi["Latin-1 Supplement"](p)&&(p===167||p===169||p===174||p===177||p===188||p===189||p===190||p===215||p===247)||mi["General Punctuation"](p)&&(p===8214||p===8224||p===8225||p===8240||p===8241||p===8251||p===8252||p===8258||p===8263||p===8264||p===8265||p===8273)||mi["Letterlike Symbols"](p)||mi["Number Forms"](p)||mi["Miscellaneous Technical"](p)&&(p>=8960&&p<=8967||p>=8972&&p<=8991||p>=8996&&p<=9e3||p===9003||p>=9085&&p<=9114||p>=9150&&p<=9165||p===9167||p>=9169&&p<=9179||p>=9186&&p<=9215)||mi["Control Pictures"](p)&&p!==9251||mi["Optical Character Recognition"](p)||mi["Enclosed Alphanumerics"](p)||mi["Geometric Shapes"](p)||mi["Miscellaneous Symbols"](p)&&!(p>=9754&&p<=9759)||mi["Miscellaneous Symbols and Arrows"](p)&&(p>=11026&&p<=11055||p>=11088&&p<=11097||p>=11192&&p<=11243)||mi["CJK Symbols and Punctuation"](p)||mi.Katakana(p)||mi["Private Use Area"](p)||mi["CJK Compatibility Forms"](p)||mi["Small Form Variants"](p)||mi["Halfwidth and Fullwidth Forms"](p)||p===8734||p===8756||p===8757||p>=9984&&p<=10087||p>=10102&&p<=10131||p===65532||p===65533)}(d))}function Cs(d){return d>=1424&&d<=2303||mi["Arabic Presentation Forms-A"](d)||mi["Arabic Presentation Forms-B"](d)}function Ae(d,p){return!(!p&&Cs(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||mi.Khmer(d))}function _e(d){for(var p=0,C=d;p<C.length;p+=1)if(Cs(C[p].charCodeAt(0)))return!0;return!1}var pn=null,an="unavailable",In=null,hr=function(p){p&&typeof p=="string"&&p.indexOf("NetworkError")>-1&&(an="error"),pn&&pn(p)};function Lr(){Zr.fire(new Ht("pluginStateChange",{pluginStatus:an,pluginURL:In}))}var Zr=new Te,ei=function(){return an},Ur=function(){if(an!=="deferred"||!In)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");an="loading",Lr(),In&&vr({url:In},function(p){p?hr(p):(an="loaded",Lr())})},hi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return an==="loaded"||hi.applyArabicShaping!=null},isLoading:function(){return an==="loading"},setState:function(p){an=p.pluginStatus,In=p.pluginURL},isParsed:function(){return hi.applyArabicShaping!=null&&hi.processBidirectionalText!=null&&hi.processStyledBidirectionalText!=null},getPluginURL:function(){return In}},br=function(p,C){this.zoom=p,C?(this.now=C.now,this.fadeDuration=C.fadeDuration,this.zoomHistory=C.zoomHistory,this.transition=C.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tu,this.transition={})};br.prototype.isSupportedScript=function(d){return function(p,C){for(var F=0,J=p;F<J.length;F+=1)if(!Ae(J[F].charCodeAt(0),C))return!1;return!0}(d,hi.isLoaded())},br.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},br.prototype.getCrossfadeParameters=function(){var d=this.zoom,p=d-Math.floor(d),C=this.crossFadingFactor();return d>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*C}:{fromScale:.5,toScale:1,t:1-(1-C)*p}};var Xt=function(p,C){this.property=p,this.value=C,this.expression=function(F,J){if(nl(F))return new Uu(F,J);if(ns(F)){var vt=Ll(F,J);if(vt.result==="error")throw new Error(vt.value.map(function(Bt){return Bt.key+": "+Bt.message}).join(", "));return vt.value}var Ct=F;return typeof F=="string"&&J.type==="color"&&(Ct=zr.parse(F)),{kind:"constant",evaluate:function(){return Ct}}}(C===void 0?p.specification.default:C,p.specification)};Xt.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Xt.prototype.possiblyEvaluate=function(d,p,C){return this.property.possiblyEvaluate(this,d,p,C)};var ee=function(p){this.property=p,this.value=new Xt(p,void 0)};ee.prototype.transitioned=function(d,p){return new Ee(this.property,this.value,p,v({},d.transition,this.transition),d.now)},ee.prototype.untransitioned=function(){return new Ee(this.property,this.value,null,{},0)};var Oe=function(p){this._properties=p,this._values=Object.create(p.defaultTransitionablePropertyValues)};Oe.prototype.getValue=function(d){return P(this._values[d].value.value)},Oe.prototype.setValue=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new ee(this._values[d].property)),this._values[d].value=new Xt(this._values[d].property,p===null?void 0:P(p))},Oe.prototype.getTransition=function(d){return P(this._values[d].transition)},Oe.prototype.setTransition=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new ee(this._values[d].property)),this._values[d].transition=P(p)||void 0},Oe.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var F=C[p],J=this.getValue(F);J!==void 0&&(d[F]=J);var vt=this.getTransition(F);vt!==void 0&&(d[F+"-transition"]=vt)}return d},Oe.prototype.transitioned=function(d,p){for(var C=new jt(this._properties),F=0,J=Object.keys(this._values);F<J.length;F+=1){var vt=J[F];C._values[vt]=this._values[vt].transitioned(d,p._values[vt])}return C},Oe.prototype.untransitioned=function(){for(var d=new jt(this._properties),p=0,C=Object.keys(this._values);p<C.length;p+=1){var F=C[p];d._values[F]=this._values[F].untransitioned()}return d};var Ee=function(p,C,F,J,vt){this.property=p,this.value=C,this.begin=vt+J.delay||0,this.end=this.begin+J.duration||0,p.specification.transition&&(J.delay||J.duration)&&(this.prior=F)};Ee.prototype.possiblyEvaluate=function(d,p,C){var F=d.now||0,J=this.value.possiblyEvaluate(d,p,C),vt=this.prior;if(vt){if(F>this.end)return this.prior=null,J;if(this.value.isDataDriven())return this.prior=null,J;if(F<this.begin)return vt.possiblyEvaluate(d,p,C);var Ct=(F-this.begin)/(this.end-this.begin);return this.property.interpolate(vt.possiblyEvaluate(d,p,C),J,function(Bt){if(Bt<=0)return 0;if(Bt>=1)return 1;var Jt=Bt*Bt,ve=Jt*Bt;return 4*(Bt<.5?ve:3*(Bt-Jt)+ve-.75)}(Ct))}return J};var jt=function(p){this._properties=p,this._values=Object.create(p.defaultTransitioningPropertyValues)};jt.prototype.possiblyEvaluate=function(d,p,C){for(var F=new ie(this._properties),J=0,vt=Object.keys(this._values);J<vt.length;J+=1){var Ct=vt[J];F._values[Ct]=this._values[Ct].possiblyEvaluate(d,p,C)}return F},jt.prototype.hasTransition=function(){for(var d=0,p=Object.keys(this._values);d<p.length;d+=1)if(this._values[p[d]].prior)return!0;return!1};var zt=function(p){this._properties=p,this._values=Object.create(p.defaultPropertyValues)};zt.prototype.getValue=function(d){return P(this._values[d].value)},zt.prototype.setValue=function(d,p){this._values[d]=new Xt(this._values[d].property,p===null?void 0:P(p))},zt.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var F=C[p],J=this.getValue(F);J!==void 0&&(d[F]=J)}return d},zt.prototype.possiblyEvaluate=function(d,p,C){for(var F=new ie(this._properties),J=0,vt=Object.keys(this._values);J<vt.length;J+=1){var Ct=vt[J];F._values[Ct]=this._values[Ct].possiblyEvaluate(d,p,C)}return F};var se=function(p,C,F){this.property=p,this.value=C,this.parameters=F};se.prototype.isConstant=function(){return this.value.kind==="constant"},se.prototype.constantOr=function(d){return this.value.kind==="constant"?this.value.value:d},se.prototype.evaluate=function(d,p,C,F){return this.property.evaluate(this.value,this.parameters,d,p,C,F)};var ie=function(p){this._properties=p,this._values=Object.create(p.defaultPossiblyEvaluatedValues)};ie.prototype.get=function(d){return this._values[d]};var he=function(p){this.specification=p};he.prototype.possiblyEvaluate=function(d,p){return d.expression.evaluate(p)},he.prototype.interpolate=function(d,p,C){var F=us[this.specification.type];return F?F(d,p,C):d};var Be=function(p,C){this.specification=p,this.overrides=C};Be.prototype.possiblyEvaluate=function(d,p,C,F){return new se(this,d.expression.kind==="constant"||d.expression.kind==="camera"?{kind:"constant",value:d.expression.evaluate(p,null,{},C,F)}:d.expression,p)},Be.prototype.interpolate=function(d,p,C){if(d.value.kind!=="constant"||p.value.kind!=="constant")return d;if(d.value.value===void 0||p.value.value===void 0)return new se(this,{kind:"constant",value:void 0},d.parameters);var F=us[this.specification.type];return F?new se(this,{kind:"constant",value:F(d.value.value,p.value.value,C)},d.parameters):d},Be.prototype.evaluate=function(d,p,C,F,J,vt){return d.kind==="constant"?d.value:d.evaluate(p,C,F,J,vt)};var Ze=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,F,J,vt){if(C.value===void 0)return new se(this,{kind:"constant",value:void 0},F);if(C.expression.kind==="constant"){var Ct=C.expression.evaluate(F,null,{},J,vt),Bt=C.property.specification.type==="resolvedImage"&&typeof Ct!="string"?Ct.name:Ct,Jt=this._calculate(Bt,Bt,Bt,F);return new se(this,{kind:"constant",value:Jt},F)}if(C.expression.kind==="camera"){var ve=this._calculate(C.expression.evaluate({zoom:F.zoom-1}),C.expression.evaluate({zoom:F.zoom}),C.expression.evaluate({zoom:F.zoom+1}),F);return new se(this,{kind:"constant",value:ve},F)}return new se(this,C.expression,F)},p.prototype.evaluate=function(C,F,J,vt,Ct,Bt){if(C.kind==="source"){var Jt=C.evaluate(F,J,vt,Ct,Bt);return this._calculate(Jt,Jt,Jt,F)}return C.kind==="composite"?this._calculate(C.evaluate({zoom:Math.floor(F.zoom)-1},J,vt),C.evaluate({zoom:Math.floor(F.zoom)},J,vt),C.evaluate({zoom:Math.floor(F.zoom)+1},J,vt),F):C.value},p.prototype._calculate=function(C,F,J,vt){return vt.zoom>vt.zoomHistory.lastIntegerZoom?{from:C,to:F}:{from:J,to:F}},p.prototype.interpolate=function(C){return C},p}(Be),on=function(p){this.specification=p};on.prototype.possiblyEvaluate=function(d,p,C,F){if(d.value!==void 0){if(d.expression.kind==="constant"){var J=d.expression.evaluate(p,null,{},C,F);return this._calculate(J,J,J,p)}return this._calculate(d.expression.evaluate(new br(Math.floor(p.zoom-1),p)),d.expression.evaluate(new br(Math.floor(p.zoom),p)),d.expression.evaluate(new br(Math.floor(p.zoom+1),p)),p)}},on.prototype._calculate=function(d,p,C,F){return F.zoom>F.zoomHistory.lastIntegerZoom?{from:d,to:p}:{from:C,to:p}},on.prototype.interpolate=function(d){return d};var $e=function(p){this.specification=p};$e.prototype.possiblyEvaluate=function(d,p,C,F){return!!d.expression.evaluate(p,null,{},C,F)},$e.prototype.interpolate=function(){return!1};var gn=function(p){for(var C in this.properties=p,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],p){var F=p[C];F.specification.overridable&&this.overridableProperties.push(C);var J=this.defaultPropertyValues[C]=new Xt(F,void 0),vt=this.defaultTransitionablePropertyValues[C]=new ee(F);this.defaultTransitioningPropertyValues[C]=vt.untransitioned(),this.defaultPossiblyEvaluatedValues[C]=J.possiblyEvaluate({})}};Ni("DataDrivenProperty",Be),Ni("DataConstantProperty",he),Ni("CrossFadedDataDrivenProperty",Ze),Ni("CrossFadedProperty",on),Ni("ColorRampProperty",$e);var vn=function(d){function p(C,F){if(d.call(this),this.id=C.id,this.type=C.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},C.type!=="custom"&&(this.metadata=(C=C).metadata,this.minzoom=C.minzoom,this.maxzoom=C.maxzoom,C.type!=="background"&&(this.source=C.source,this.sourceLayer=C["source-layer"],this.filter=C.filter),F.layout&&(this._unevaluatedLayout=new zt(F.layout)),F.paint)){for(var J in this._transitionablePaint=new Oe(F.paint),C.paint)this.setPaintProperty(J,C.paint[J],{validate:!1});for(var vt in C.layout)this.setLayoutProperty(vt,C.layout[vt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ie(F.paint)}}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},p.prototype.getLayoutProperty=function(C){return C==="visibility"?this.visibility:this._unevaluatedLayout.getValue(C)},p.prototype.setLayoutProperty=function(C,F,J){J===void 0&&(J={}),F!=null&&this._validate(bl,"layers."+this.id+".layout."+C,C,F,J)||(C!=="visibility"?this._unevaluatedLayout.setValue(C,F):this.visibility=F)},p.prototype.getPaintProperty=function(C){return x(C,"-transition")?this._transitionablePaint.getTransition(C.slice(0,-"-transition".length)):this._transitionablePaint.getValue(C)},p.prototype.setPaintProperty=function(C,F,J){if(J===void 0&&(J={}),F!=null&&this._validate(cs,"layers."+this.id+".paint."+C,C,F,J))return!1;if(x(C,"-transition"))return this._transitionablePaint.setTransition(C.slice(0,-"-transition".length),F||void 0),!1;var vt=this._transitionablePaint._values[C],Ct=vt.property.specification["property-type"]==="cross-faded-data-driven",Bt=vt.value.isDataDriven(),Jt=vt.value;this._transitionablePaint.setValue(C,F),this._handleSpecialPaintPropertyUpdate(C);var ve=this._transitionablePaint._values[C].value;return ve.isDataDriven()||Bt||Ct||this._handleOverridablePaintPropertyUpdate(C,Jt,ve)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){},p.prototype._handleOverridablePaintPropertyUpdate=function(C,F,J){return!1},p.prototype.isHidden=function(C){return!!(this.minzoom&&C<this.minzoom)||!!(this.maxzoom&&C>=this.maxzoom)||this.visibility==="none"},p.prototype.updateTransitions=function(C){this._transitioningPaint=this._transitionablePaint.transitioned(C,this._transitioningPaint)},p.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},p.prototype.recalculate=function(C,F){C.getCrossfadeParameters&&(this._crossfadeParameters=C.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(C,void 0,F)),this.paint=this._transitioningPaint.possiblyEvaluate(C,void 0,F)},p.prototype.serialize=function(){var C={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(C.layout=C.layout||{},C.layout.visibility=this.visibility),S(C,function(F,J){return!(F===void 0||J==="layout"&&!Object.keys(F).length||J==="paint"&&!Object.keys(F).length)})},p.prototype._validate=function(C,F,J,vt,Ct){return Ct===void 0&&(Ct={}),(!Ct||Ct.validate!==!1)&&mu(this,C.call(ku,{key:F,layerType:this.type,objectKey:J,value:vt,styleSpec:ae,style:{glyphs:!0,sprite:!0}}))},p.prototype.is3D=function(){return!1},p.prototype.isTileClipped=function(){return!1},p.prototype.hasOffscreenPass=function(){return!1},p.prototype.resize=function(){},p.prototype.isStateDependent=function(){for(var C in this.paint._values){var F=this.paint.get(C);if(F instanceof se&&ms(F.property.specification)&&(F.value.kind==="source"||F.value.kind==="composite")&&F.value.isStateDependent)return!0}return!1},p}(Te),Xn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Wn=function(p,C){this._structArray=p,this._pos1=C*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Jn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Hn(d,p){p===void 0&&(p=1);var C=0,F=0;return{members:d.map(function(J){var vt=Xn[J.type].BYTES_PER_ELEMENT,Ct=C=fr(C,Math.max(p,vt)),Bt=J.components||1;return F=Math.max(F,vt),C+=vt*Bt,{name:J.name,type:J.type,components:Bt,offset:Ct}}),size:fr(C,Math.max(F,p)),alignment:p}}function fr(d,p){return Math.ceil(d/p)*p}Jn.serialize=function(d,p){return d._trim(),p&&(d.isTransferred=!0,p.push(d.arrayBuffer)),{length:d.length,arrayBuffer:d.arrayBuffer}},Jn.deserialize=function(d){var p=Object.create(this.prototype);return p.arrayBuffer=d.arrayBuffer,p.length=d.length,p.capacity=d.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p},Jn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Jn.prototype.clear=function(){this.length=0},Jn.prototype.resize=function(d){this.reserve(d),this.length=d},Jn.prototype.reserve=function(d){if(d>this.capacity){this.capacity=Math.max(d,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}},Jn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var xr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F){var J=this.length;return this.resize(J+1),this.emplace(J,C,F)},p.prototype.emplace=function(C,F,J){var vt=2*C;return this.int16[vt+0]=F,this.int16[vt+1]=J,C},p}(Jn);xr.prototype.bytesPerElement=4,Ni("StructArrayLayout2i4",xr);var Vr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt){var Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,C,F,J,vt)},p.prototype.emplace=function(C,F,J,vt,Ct){var Bt=4*C;return this.int16[Bt+0]=F,this.int16[Bt+1]=J,this.int16[Bt+2]=vt,this.int16[Bt+3]=Ct,C},p}(Jn);Vr.prototype.bytesPerElement=8,Ni("StructArrayLayout4i8",Vr);var gi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,F,J,vt,Ct,Bt)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt){var ve=6*C;return this.int16[ve+0]=F,this.int16[ve+1]=J,this.int16[ve+2]=vt,this.int16[ve+3]=Ct,this.int16[ve+4]=Bt,this.int16[ve+5]=Jt,C},p}(Jn);gi.prototype.bytesPerElement=12,Ni("StructArrayLayout2i4i12",gi);var Fr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,F,J,vt,Ct,Bt)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt){var ve=4*C,Ie=8*C;return this.int16[ve+0]=F,this.int16[ve+1]=J,this.uint8[Ie+4]=vt,this.uint8[Ie+5]=Ct,this.uint8[Ie+6]=Bt,this.uint8[Ie+7]=Jt,C},p}(Jn);Fr.prototype.bytesPerElement=8,Ni("StructArrayLayout2i4ub8",Fr);var ai=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F){var J=this.length;return this.resize(J+1),this.emplace(J,C,F)},p.prototype.emplace=function(C,F,J){var vt=2*C;return this.float32[vt+0]=F,this.float32[vt+1]=J,C},p}(Jn);ai.prototype.bytesPerElement=8,Ni("StructArrayLayout2f8",ai);var yi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue){var He=this.length;return this.resize(He+1),this.emplace(He,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He){var fn=10*C;return this.uint16[fn+0]=F,this.uint16[fn+1]=J,this.uint16[fn+2]=vt,this.uint16[fn+3]=Ct,this.uint16[fn+4]=Bt,this.uint16[fn+5]=Jt,this.uint16[fn+6]=ve,this.uint16[fn+7]=Ie,this.uint16[fn+8]=Ue,this.uint16[fn+9]=He,C},p}(Jn);yi.prototype.bytesPerElement=20,Ni("StructArrayLayout10ui20",yi);var Ui=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn){var Ln=this.length;return this.resize(Ln+1),this.emplace(Ln,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln){var On=12*C;return this.int16[On+0]=F,this.int16[On+1]=J,this.int16[On+2]=vt,this.int16[On+3]=Ct,this.uint16[On+4]=Bt,this.uint16[On+5]=Jt,this.uint16[On+6]=ve,this.uint16[On+7]=Ie,this.int16[On+8]=Ue,this.int16[On+9]=He,this.int16[On+10]=fn,this.int16[On+11]=Ln,C},p}(Jn);Ui.prototype.bytesPerElement=24,Ni("StructArrayLayout4i4ui4i24",Ui);var Pi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J){var vt=this.length;return this.resize(vt+1),this.emplace(vt,C,F,J)},p.prototype.emplace=function(C,F,J,vt){var Ct=3*C;return this.float32[Ct+0]=F,this.float32[Ct+1]=J,this.float32[Ct+2]=vt,C},p}(Jn);Pi.prototype.bytesPerElement=12,Ni("StructArrayLayout3f12",Pi);var pa=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var F=this.length;return this.resize(F+1),this.emplace(F,C)},p.prototype.emplace=function(C,F){return this.uint32[1*C+0]=F,C},p}(Jn);pa.prototype.bytesPerElement=4,Ni("StructArrayLayout1ul4",pa);var ta=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,C,F,J,vt,Ct,Bt,Jt,ve,Ie)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue){var He=10*C,fn=5*C;return this.int16[He+0]=F,this.int16[He+1]=J,this.int16[He+2]=vt,this.int16[He+3]=Ct,this.int16[He+4]=Bt,this.int16[He+5]=Jt,this.uint32[fn+3]=ve,this.uint16[He+8]=Ie,this.uint16[He+9]=Ue,C},p}(Jn);ta.prototype.bytesPerElement=20,Ni("StructArrayLayout6i1ul2ui20",ta);var oa=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,F,J,vt,Ct,Bt)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt){var ve=6*C;return this.int16[ve+0]=F,this.int16[ve+1]=J,this.int16[ve+2]=vt,this.int16[ve+3]=Ct,this.int16[ve+4]=Bt,this.int16[ve+5]=Jt,C},p}(Jn);oa.prototype.bytesPerElement=12,Ni("StructArrayLayout2i2i2i12",oa);var si=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,C,F,J,vt,Ct)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt){var Jt=4*C,ve=8*C;return this.float32[Jt+0]=F,this.float32[Jt+1]=J,this.float32[Jt+2]=vt,this.int16[ve+6]=Ct,this.int16[ve+7]=Bt,C},p}(Jn);si.prototype.bytesPerElement=16,Ni("StructArrayLayout2f1f2i16",si);var ma=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt){var Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,C,F,J,vt)},p.prototype.emplace=function(C,F,J,vt,Ct){var Bt=12*C,Jt=3*C;return this.uint8[Bt+0]=F,this.uint8[Bt+1]=J,this.float32[Jt+1]=vt,this.float32[Jt+2]=Ct,C},p}(Jn);ma.prototype.bytesPerElement=12,Ni("StructArrayLayout2ub2f12",ma);var to=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J){var vt=this.length;return this.resize(vt+1),this.emplace(vt,C,F,J)},p.prototype.emplace=function(C,F,J,vt){var Ct=3*C;return this.uint16[Ct+0]=F,this.uint16[Ct+1]=J,this.uint16[Ct+2]=vt,C},p}(Jn);to.prototype.bytesPerElement=6,Ni("StructArrayLayout3ui6",to);var Ha=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On,Kn,$n,_r){var Br=this.length;return this.resize(Br+1),this.emplace(Br,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On,Kn,$n,_r)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On,Kn,$n,_r,Br){var Hr=24*C,pi=12*C,ii=48*C;return this.int16[Hr+0]=F,this.int16[Hr+1]=J,this.uint16[Hr+2]=vt,this.uint16[Hr+3]=Ct,this.uint32[pi+2]=Bt,this.uint32[pi+3]=Jt,this.uint32[pi+4]=ve,this.uint16[Hr+10]=Ie,this.uint16[Hr+11]=Ue,this.uint16[Hr+12]=He,this.float32[pi+7]=fn,this.float32[pi+8]=Ln,this.uint8[ii+36]=On,this.uint8[ii+37]=Kn,this.uint8[ii+38]=$n,this.uint32[pi+10]=_r,this.int16[Hr+22]=Br,C},p}(Jn);Ha.prototype.bytesPerElement=48,Ni("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ha);var _i=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On,Kn,$n,_r,Br,Hr,pi,ii,Li,Ri,Xi,ua,na,Zi,qa){var xa=this.length;return this.resize(xa+1),this.emplace(xa,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On,Kn,$n,_r,Br,Hr,pi,ii,Li,Ri,Xi,ua,na,Zi,qa)},p.prototype.emplace=function(C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On,Kn,$n,_r,Br,Hr,pi,ii,Li,Ri,Xi,ua,na,Zi,qa,xa){var la=34*C,Yo=17*C;return this.int16[la+0]=F,this.int16[la+1]=J,this.int16[la+2]=vt,this.int16[la+3]=Ct,this.int16[la+4]=Bt,this.int16[la+5]=Jt,this.int16[la+6]=ve,this.int16[la+7]=Ie,this.uint16[la+8]=Ue,this.uint16[la+9]=He,this.uint16[la+10]=fn,this.uint16[la+11]=Ln,this.uint16[la+12]=On,this.uint16[la+13]=Kn,this.uint16[la+14]=$n,this.uint16[la+15]=_r,this.uint16[la+16]=Br,this.uint16[la+17]=Hr,this.uint16[la+18]=pi,this.uint16[la+19]=ii,this.uint16[la+20]=Li,this.uint16[la+21]=Ri,this.uint16[la+22]=Xi,this.uint32[Yo+12]=ua,this.float32[Yo+13]=na,this.float32[Yo+14]=Zi,this.float32[Yo+15]=qa,this.float32[Yo+16]=xa,C},p}(Jn);_i.prototype.bytesPerElement=68,Ni("StructArrayLayout8i15ui1ul4f68",_i);var Fa=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var F=this.length;return this.resize(F+1),this.emplace(F,C)},p.prototype.emplace=function(C,F){return this.float32[1*C+0]=F,C},p}(Jn);Fa.prototype.bytesPerElement=4,Ni("StructArrayLayout1f4",Fa);var Za=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J){var vt=this.length;return this.resize(vt+1),this.emplace(vt,C,F,J)},p.prototype.emplace=function(C,F,J,vt){var Ct=3*C;return this.int16[Ct+0]=F,this.int16[Ct+1]=J,this.int16[Ct+2]=vt,C},p}(Jn);Za.prototype.bytesPerElement=6,Ni("StructArrayLayout3i6",Za);var Os=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J){var vt=this.length;return this.resize(vt+1),this.emplace(vt,C,F,J)},p.prototype.emplace=function(C,F,J,vt){var Ct=4*C;return this.uint32[2*C+0]=F,this.uint16[Ct+2]=J,this.uint16[Ct+3]=vt,C},p}(Jn);Os.prototype.bytesPerElement=8,Ni("StructArrayLayout1ul2ui8",Os);var Ms=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F){var J=this.length;return this.resize(J+1),this.emplace(J,C,F)},p.prototype.emplace=function(C,F,J){var vt=2*C;return this.uint16[vt+0]=F,this.uint16[vt+1]=J,C},p}(Jn);Ms.prototype.bytesPerElement=4,Ni("StructArrayLayout2ui4",Ms);var ws=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var F=this.length;return this.resize(F+1),this.emplace(F,C)},p.prototype.emplace=function(C,F){return this.uint16[1*C+0]=F,C},p}(Jn);ws.prototype.bytesPerElement=2,Ni("StructArrayLayout1ui2",ws);var au=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,F,J,vt){var Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,C,F,J,vt)},p.prototype.emplace=function(C,F,J,vt,Ct){var Bt=4*C;return this.float32[Bt+0]=F,this.float32[Bt+1]=J,this.float32[Bt+2]=vt,this.float32[Bt+3]=Ct,C},p}(Jn);au.prototype.bytesPerElement=16,Ni("StructArrayLayout4f16",au);var j=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return C.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},C.x1.get=function(){return this._structArray.int16[this._pos2+2]},C.y1.get=function(){return this._structArray.int16[this._pos2+3]},C.x2.get=function(){return this._structArray.int16[this._pos2+4]},C.y2.get=function(){return this._structArray.int16[this._pos2+5]},C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(p.prototype,C),p}(Wn);j.prototype.size=20;var I=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new j(this,C)},p}(ta);Ni("CollisionBoxArray",I);var w=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},C.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},C.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},C.segment.get=function(){return this._structArray.uint16[this._pos2+10]},C.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},C.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},C.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},C.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},C.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},C.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},C.placedOrientation.set=function(F){this._structArray.uint8[this._pos1+37]=F},C.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},C.hidden.set=function(F){this._structArray.uint8[this._pos1+38]=F},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},C.crossTileID.set=function(F){this._structArray.uint32[this._pos4+10]=F},C.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(p.prototype,C),p}(Wn);w.prototype.size=48;var B=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new w(this,C)},p}(Ha);Ni("PlacedSymbolArray",B);var D=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},C.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},C.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},C.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},C.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},C.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},C.key.get=function(){return this._structArray.uint16[this._pos2+8]},C.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},C.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},C.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},C.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},C.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},C.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},C.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},C.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},C.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},C.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},C.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},C.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},C.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},C.crossTileID.set=function(F){this._structArray.uint32[this._pos4+12]=F},C.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},C.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},C.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},C.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(p.prototype,C),p}(Wn);D.prototype.size=68;var G=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new D(this,C)},p}(_i);Ni("SymbolInstanceArray",G);var Q=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getoffsetX=function(C){return this.float32[1*C+0]},p}(Fa);Ni("GlyphOffsetArray",Q);var ut=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getx=function(C){return this.int16[3*C+0]},p.prototype.gety=function(C){return this.int16[3*C+1]},p.prototype.gettileUnitDistanceFromAnchor=function(C){return this.int16[3*C+2]},p}(Za);Ni("SymbolLineVertexArray",ut);var wt=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(p.prototype,C),p}(Wn);wt.prototype.size=8;var It=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new wt(this,C)},p}(Os);Ni("FeatureIndexArray",It);var kt=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,Yt=function(p){p===void 0&&(p=[]),this.segments=p};function qt(d,p){return 256*(d=l(Math.floor(d),0,255))+l(Math.floor(p),0,255)}Yt.prototype.prepareSegment=function(d,p,C,F){var J=this.segments[this.segments.length-1];return d>Yt.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+Yt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+d),(!J||J.vertexLength+d>Yt.MAX_VERTEX_ARRAY_LENGTH||J.sortKey!==F)&&(J={vertexOffset:p.length,primitiveOffset:C.length,vertexLength:0,primitiveLength:0},F!==void 0&&(J.sortKey=F),this.segments.push(J)),J},Yt.prototype.get=function(){return this.segments},Yt.prototype.destroy=function(){for(var d=0,p=this.segments;d<p.length;d+=1){var C=p[d];for(var F in C.vaos)C.vaos[F].destroy()}},Yt.simpleSegment=function(d,p,C,F){return new Yt([{vertexOffset:d,primitiveOffset:p,vertexLength:C,primitiveLength:F,vaos:{},sortKey:0}])},Yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ni("SegmentVector",Yt);var ce=Hn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ye=u(function(d){d.exports=function(p,C){var F,J,vt,Ct,Bt,Jt,ve,Ie;for(J=p.length-(F=3&p.length),vt=C,Bt=3432918353,Jt=461845907,Ie=0;Ie<J;)ve=255&p.charCodeAt(Ie)|(255&p.charCodeAt(++Ie))<<8|(255&p.charCodeAt(++Ie))<<16|(255&p.charCodeAt(++Ie))<<24,++Ie,vt=27492+(65535&(Ct=5*(65535&(vt=(vt^=ve=(65535&(ve=(ve=(65535&ve)*Bt+(((ve>>>16)*Bt&65535)<<16)&4294967295)<<15|ve>>>17))*Jt+(((ve>>>16)*Jt&65535)<<16)&4294967295)<<13|vt>>>19))+((5*(vt>>>16)&65535)<<16)&4294967295))+((58964+(Ct>>>16)&65535)<<16);switch(ve=0,F){case 3:ve^=(255&p.charCodeAt(Ie+2))<<16;case 2:ve^=(255&p.charCodeAt(Ie+1))<<8;case 1:vt^=ve=(65535&(ve=(ve=(65535&(ve^=255&p.charCodeAt(Ie)))*Bt+(((ve>>>16)*Bt&65535)<<16)&4294967295)<<15|ve>>>17))*Jt+(((ve>>>16)*Jt&65535)<<16)&4294967295}return vt^=p.length,vt=2246822507*(65535&(vt^=vt>>>16))+((2246822507*(vt>>>16)&65535)<<16)&4294967295,vt=3266489909*(65535&(vt^=vt>>>13))+((3266489909*(vt>>>16)&65535)<<16)&4294967295,(vt^=vt>>>16)>>>0}}),Le=u(function(d){d.exports=function(p,C){for(var F,J=p.length,vt=C^J,Ct=0;J>=4;)F=1540483477*(65535&(F=255&p.charCodeAt(Ct)|(255&p.charCodeAt(++Ct))<<8|(255&p.charCodeAt(++Ct))<<16|(255&p.charCodeAt(++Ct))<<24))+((1540483477*(F>>>16)&65535)<<16),vt=1540483477*(65535&vt)+((1540483477*(vt>>>16)&65535)<<16)^(F=1540483477*(65535&(F^=F>>>24))+((1540483477*(F>>>16)&65535)<<16)),J-=4,++Ct;switch(J){case 3:vt^=(255&p.charCodeAt(Ct+2))<<16;case 2:vt^=(255&p.charCodeAt(Ct+1))<<8;case 1:vt=1540483477*(65535&(vt^=255&p.charCodeAt(Ct)))+((1540483477*(vt>>>16)&65535)<<16)}return vt=1540483477*(65535&(vt^=vt>>>13))+((1540483477*(vt>>>16)&65535)<<16),(vt^=vt>>>15)>>>0}}),Ce=ye,ke=Le;Ce.murmur3=ye,Ce.murmur2=ke;var nn=function(){this.ids=[],this.positions=[],this.indexed=!1};nn.prototype.add=function(d,p,C,F){this.ids.push(Qn(d)),this.positions.push(p,C,F)},nn.prototype.getPositions=function(d){for(var p=Qn(d),C=0,F=this.ids.length-1;C<F;){var J=C+F>>1;this.ids[J]>=p?F=J:C=J+1}for(var vt=[];this.ids[C]===p;)vt.push({index:this.positions[3*C],start:this.positions[3*C+1],end:this.positions[3*C+2]}),C++;return vt},nn.serialize=function(d,p){var C=new Float64Array(d.ids),F=new Uint32Array(d.positions);return function J(vt,Ct,Bt,Jt){for(;Bt<Jt;){for(var ve=vt[Bt+Jt>>1],Ie=Bt-1,Ue=Jt+1;;){do Ie++;while(vt[Ie]<ve);do Ue--;while(vt[Ue]>ve);if(Ie>=Ue)break;Yn(vt,Ie,Ue),Yn(Ct,3*Ie,3*Ue),Yn(Ct,3*Ie+1,3*Ue+1),Yn(Ct,3*Ie+2,3*Ue+2)}Ue-Bt<Jt-Ue?(J(vt,Ct,Bt,Ue),Bt=Ue+1):(J(vt,Ct,Ue+1,Jt),Jt=Ue)}}(C,F,0,C.length-1),p&&p.push(C.buffer,F.buffer),{ids:C,positions:F}},nn.deserialize=function(d){var p=new nn;return p.ids=d.ids,p.positions=d.positions,p.indexed=!0,p};var ln=Math.pow(2,53)-1;function Qn(d){var p=+d;return!isNaN(p)&&p<=ln?p:Ce(String(d))}function Yn(d,p,C){var F=d[p];d[p]=d[C],d[C]=F}Ni("FeaturePositionMap",nn);var dr=function(p,C){this.gl=p.gl,this.location=C},Mr=function(d){function p(C,F){d.call(this,C,F),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1i(this.location,C))},p}(dr),$r=function(d){function p(C,F){d.call(this,C,F),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1f(this.location,C))},p}(dr),Kr=function(d){function p(C,F){d.call(this,C,F),this.current=[0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]||(this.current=C,this.gl.uniform2f(this.location,C[0],C[1]))},p}(dr),bi=function(d){function p(C,F){d.call(this,C,F),this.current=[0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]||(this.current=C,this.gl.uniform3f(this.location,C[0],C[1],C[2]))},p}(dr),Oi=function(d){function p(C,F){d.call(this,C,F),this.current=[0,0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]&&C[3]===this.current[3]||(this.current=C,this.gl.uniform4f(this.location,C[0],C[1],C[2],C[3]))},p}(dr),zi=function(d){function p(C,F){d.call(this,C,F),this.current=zr.transparent}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C.r===this.current.r&&C.g===this.current.g&&C.b===this.current.b&&C.a===this.current.a||(this.current=C,this.gl.uniform4f(this.location,C.r,C.g,C.b,C.a))},p}(dr),Vi=new Float32Array(16),_a=function(d){function p(C,F){d.call(this,C,F),this.current=Vi}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){if(C[12]!==this.current[12]||C[0]!==this.current[0])return this.current=C,void this.gl.uniformMatrix4fv(this.location,!1,C);for(var F=1;F<16;F++)if(C[F]!==this.current[F]){this.current=C,this.gl.uniformMatrix4fv(this.location,!1,C);break}},p}(dr);function ya(d){return[qt(255*d.r,255*d.g),qt(255*d.b,255*d.a)]}var wi=function(p,C,F){this.value=p,this.uniformNames=C.map(function(J){return"u_"+J}),this.type=F};wi.prototype.setUniform=function(d,p,C){d.set(C.constantOr(this.value))},wi.prototype.getBinding=function(d,p,C){return this.type==="color"?new zi(d,p):new $r(d,p)};var $i=function(p,C){this.uniformNames=C.map(function(F){return"u_"+F}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};$i.prototype.setConstantPatternPositions=function(d,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=d.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=d.tlbr},$i.prototype.setUniform=function(d,p,C,F){var J=F==="u_pattern_to"?this.patternTo:F==="u_pattern_from"?this.patternFrom:F==="u_pixel_ratio_to"?this.pixelRatioTo:F==="u_pixel_ratio_from"?this.pixelRatioFrom:null;J&&d.set(J)},$i.prototype.getBinding=function(d,p,C){return C.substr(0,9)==="u_pattern"?new Oi(d,p):new $r(d,p)};var sa=function(p,C,F,J){this.expression=p,this.type=F,this.maxValue=0,this.paintVertexAttributes=C.map(function(vt){return{name:"a_"+vt,type:"Float32",components:F==="color"?2:1,offset:0}}),this.paintVertexArray=new J};sa.prototype.populatePaintArray=function(d,p,C,F,J){var vt=this.paintVertexArray.length,Ct=this.expression.evaluate(new br(0),p,{},F,[],J);this.paintVertexArray.resize(d),this._setPaintValue(vt,d,Ct)},sa.prototype.updatePaintArray=function(d,p,C,F){var J=this.expression.evaluate({zoom:0},C,F);this._setPaintValue(d,p,J)},sa.prototype._setPaintValue=function(d,p,C){if(this.type==="color")for(var F=ya(C),J=d;J<p;J++)this.paintVertexArray.emplace(J,F[0],F[1]);else{for(var vt=d;vt<p;vt++)this.paintVertexArray.emplace(vt,C);this.maxValue=Math.max(this.maxValue,Math.abs(C))}},sa.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Bi=function(p,C,F,J,vt,Ct){this.expression=p,this.uniformNames=C.map(function(Bt){return"u_"+Bt+"_t"}),this.type=F,this.useIntegerZoom=J,this.zoom=vt,this.maxValue=0,this.paintVertexAttributes=C.map(function(Bt){return{name:"a_"+Bt,type:"Float32",components:F==="color"?4:2,offset:0}}),this.paintVertexArray=new Ct};Bi.prototype.populatePaintArray=function(d,p,C,F,J){var vt=this.expression.evaluate(new br(this.zoom),p,{},F,[],J),Ct=this.expression.evaluate(new br(this.zoom+1),p,{},F,[],J),Bt=this.paintVertexArray.length;this.paintVertexArray.resize(d),this._setPaintValue(Bt,d,vt,Ct)},Bi.prototype.updatePaintArray=function(d,p,C,F){var J=this.expression.evaluate({zoom:this.zoom},C,F),vt=this.expression.evaluate({zoom:this.zoom+1},C,F);this._setPaintValue(d,p,J,vt)},Bi.prototype._setPaintValue=function(d,p,C,F){if(this.type==="color")for(var J=ya(C),vt=ya(F),Ct=d;Ct<p;Ct++)this.paintVertexArray.emplace(Ct,J[0],J[1],vt[0],vt[1]);else{for(var Bt=d;Bt<p;Bt++)this.paintVertexArray.emplace(Bt,C,F);this.maxValue=Math.max(this.maxValue,Math.abs(C),Math.abs(F))}},Bi.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Bi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Bi.prototype.setUniform=function(d,p){var C=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,F=l(this.expression.interpolationFactor(C,this.zoom,this.zoom+1),0,1);d.set(F)},Bi.prototype.getBinding=function(d,p,C){return new $r(d,p)};var ca=function(p,C,F,J,vt,Ct){this.expression=p,this.type=C,this.useIntegerZoom=F,this.zoom=J,this.layerId=Ct,this.zoomInPaintVertexArray=new vt,this.zoomOutPaintVertexArray=new vt};ca.prototype.populatePaintArray=function(d,p,C){var F=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(d),this.zoomOutPaintVertexArray.resize(d),this._setPaintValues(F,d,p.patterns&&p.patterns[this.layerId],C)},ca.prototype.updatePaintArray=function(d,p,C,F,J){this._setPaintValues(d,p,C.patterns&&C.patterns[this.layerId],J)},ca.prototype._setPaintValues=function(d,p,C,F){if(F&&C){var J=F[C.min],vt=F[C.mid],Ct=F[C.max];if(J&&vt&&Ct)for(var Bt=d;Bt<p;Bt++)this.zoomInPaintVertexArray.emplace(Bt,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],J.tl[0],J.tl[1],J.br[0],J.br[1],vt.pixelRatio,J.pixelRatio),this.zoomOutPaintVertexArray.emplace(Bt,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],Ct.tl[0],Ct.tl[1],Ct.br[0],Ct.br[1],vt.pixelRatio,Ct.pixelRatio)}},ca.prototype.upload=function(d){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=d.createVertexBuffer(this.zoomInPaintVertexArray,ce.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=d.createVertexBuffer(this.zoomOutPaintVertexArray,ce.members,this.expression.isStateDependent))},ca.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var qi=function(p,C,F){this.binders={},this._buffers=[];var J=[];for(var vt in p.paint._values)if(F(vt)){var Ct=p.paint.get(vt);if(Ct instanceof se&&ms(Ct.property.specification)){var Bt=Na(vt,p.type),Jt=Ct.value,ve=Ct.property.specification.type,Ie=Ct.property.useIntegerZoom,Ue=Ct.property.specification["property-type"],He=Ue==="cross-faded"||Ue==="cross-faded-data-driven";if(Jt.kind==="constant")this.binders[vt]=He?new $i(Jt.value,Bt):new wi(Jt.value,Bt,ve),J.push("/u_"+vt);else if(Jt.kind==="source"||He){var fn=rs(vt,ve,"source");this.binders[vt]=He?new ca(Jt,ve,Ie,C,fn,p.id):new sa(Jt,Bt,ve,fn),J.push("/a_"+vt)}else{var Ln=rs(vt,ve,"composite");this.binders[vt]=new Bi(Jt,Bt,ve,Ie,C,Ln),J.push("/z_"+vt)}}}this.cacheKey=J.sort().join("")};qi.prototype.getMaxValue=function(d){var p=this.binders[d];return p instanceof sa||p instanceof Bi?p.maxValue:0},qi.prototype.populatePaintArrays=function(d,p,C,F,J){for(var vt in this.binders){var Ct=this.binders[vt];(Ct instanceof sa||Ct instanceof Bi||Ct instanceof ca)&&Ct.populatePaintArray(d,p,C,F,J)}},qi.prototype.setConstantPatternPositions=function(d,p){for(var C in this.binders){var F=this.binders[C];F instanceof $i&&F.setConstantPatternPositions(d,p)}},qi.prototype.updatePaintArrays=function(d,p,C,F,J){var vt=!1;for(var Ct in d)for(var Bt=0,Jt=p.getPositions(Ct);Bt<Jt.length;Bt+=1){var ve=Jt[Bt],Ie=C.feature(ve.index);for(var Ue in this.binders){var He=this.binders[Ue];if((He instanceof sa||He instanceof Bi||He instanceof ca)&&He.expression.isStateDependent===!0){var fn=F.paint.get(Ue);He.expression=fn.value,He.updatePaintArray(ve.start,ve.end,Ie,d[Ct],J),vt=!0}}}return vt},qi.prototype.defines=function(){var d=[];for(var p in this.binders){var C=this.binders[p];(C instanceof wi||C instanceof $i)&&d.push.apply(d,C.uniformNames.map(function(F){return"#define HAS_UNIFORM_"+F}))}return d},qi.prototype.getBinderAttributes=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof sa||C instanceof Bi)for(var F=0;F<C.paintVertexAttributes.length;F++)d.push(C.paintVertexAttributes[F].name);else if(C instanceof ca)for(var J=0;J<ce.members.length;J++)d.push(ce.members[J].name)}return d},qi.prototype.getBinderUniforms=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof wi||C instanceof $i||C instanceof Bi)for(var F=0,J=C.uniformNames;F<J.length;F+=1)d.push(J[F])}return d},qi.prototype.getPaintVertexBuffers=function(){return this._buffers},qi.prototype.getUniforms=function(d,p){var C=[];for(var F in this.binders){var J=this.binders[F];if(J instanceof wi||J instanceof $i||J instanceof Bi)for(var vt=0,Ct=J.uniformNames;vt<Ct.length;vt+=1){var Bt=Ct[vt];if(p[Bt]){var Jt=J.getBinding(d,p[Bt],Bt);C.push({name:Bt,property:F,binding:Jt})}}}return C},qi.prototype.setUniforms=function(d,p,C,F){for(var J=0,vt=p;J<vt.length;J+=1){var Ct=vt[J],Bt=Ct.name,Jt=Ct.property;this.binders[Jt].setUniform(Ct.binding,F,C.get(Jt),Bt)}},qi.prototype.updatePaintBuffers=function(d){for(var p in this._buffers=[],this.binders){var C=this.binders[p];if(d&&C instanceof ca){var F=d.fromScale===2?C.zoomInPaintVertexBuffer:C.zoomOutPaintVertexBuffer;F&&this._buffers.push(F)}else(C instanceof sa||C instanceof Bi)&&C.paintVertexBuffer&&this._buffers.push(C.paintVertexBuffer)}},qi.prototype.upload=function(d){for(var p in this.binders){var C=this.binders[p];(C instanceof sa||C instanceof Bi||C instanceof ca)&&C.upload(d)}this.updatePaintBuffers()},qi.prototype.destroy=function(){for(var d in this.binders){var p=this.binders[d];(p instanceof sa||p instanceof Bi||p instanceof ca)&&p.destroy()}};var Ca=function(p,C,F){F===void 0&&(F=function(){return!0}),this.programConfigurations={};for(var J=0,vt=p;J<vt.length;J+=1){var Ct=vt[J];this.programConfigurations[Ct.id]=new qi(Ct,C,F)}this.needsUpload=!1,this._featureMap=new nn,this._bufferOffset=0};function Na(d,p){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(p+"-","").replace(/-/g,"_")]}function rs(d,p,C){var F={color:{source:ai,composite:au},number:{source:Fa,composite:ai}},J=function(vt){return{"line-pattern":{source:yi,composite:yi},"fill-pattern":{source:yi,composite:yi},"fill-extrusion-pattern":{source:yi,composite:yi}}[vt]}(d);return J&&J[C]||F[p][C]}Ca.prototype.populatePaintArrays=function(d,p,C,F,J,vt){for(var Ct in this.programConfigurations)this.programConfigurations[Ct].populatePaintArrays(d,p,F,J,vt);p.id!==void 0&&this._featureMap.add(p.id,C,this._bufferOffset,d),this._bufferOffset=d,this.needsUpload=!0},Ca.prototype.updatePaintArrays=function(d,p,C,F){for(var J=0,vt=C;J<vt.length;J+=1){var Ct=vt[J];this.needsUpload=this.programConfigurations[Ct.id].updatePaintArrays(d,this._featureMap,p,Ct,F)||this.needsUpload}},Ca.prototype.get=function(d){return this.programConfigurations[d]},Ca.prototype.upload=function(d){if(this.needsUpload){for(var p in this.programConfigurations)this.programConfigurations[p].upload(d);this.needsUpload=!1}},Ca.prototype.destroy=function(){for(var d in this.programConfigurations)this.programConfigurations[d].destroy()},Ni("ConstantBinder",wi),Ni("CrossFadedConstantBinder",$i),Ni("SourceExpressionBinder",sa),Ni("CrossFadedCompositeBinder",ca),Ni("CompositeExpressionBinder",Bi),Ni("ProgramConfiguration",qi,{omit:["_buffers"]}),Ni("ProgramConfigurationSet",Ca);var Jo=Math.pow(2,14)-1,is=-Jo-1;function jo(d){for(var p=8192/d.extent,C=d.loadGeometry(),F=0;F<C.length;F++)for(var J=C[F],vt=0;vt<J.length;vt++){var Ct=J[vt],Bt=Math.round(Ct.x*p),Jt=Math.round(Ct.y*p);Ct.x=l(Bt,is,Jo),Ct.y=l(Jt,is,Jo),(Bt<Ct.x||Bt>Ct.x+1||Jt<Ct.y||Jt>Ct.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return C}function Ps(d,p){return{type:d.type,id:d.id,properties:d.properties,geometry:p?jo(d):[]}}function Rl(d,p,C,F,J){d.emplaceBack(2*p+(F+1)/2,2*C+(J+1)/2)}var sl=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new xr,this.indexArray=new to,this.segments=new Yt,this.programConfigurations=new Ca(p.layers,p.zoom),this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function lc(d,p){for(var C=0;C<d.length;C++)if(fc(p,d[C]))return!0;for(var F=0;F<p.length;F++)if(fc(d,p[F]))return!0;return!!Ul(d,p)}function xc(d,p,C){return!!fc(d,p)||!!Kl(p,d,C)}function Sl(d,p){if(d.length===1)return Cc(p,d[0]);for(var C=0;C<p.length;C++)for(var F=p[C],J=0;J<F.length;J++)if(fc(d,F[J]))return!0;for(var vt=0;vt<d.length;vt++)if(Cc(p,d[vt]))return!0;for(var Ct=0;Ct<p.length;Ct++)if(Ul(d,p[Ct]))return!0;return!1}function _l(d,p,C){if(d.length>1){if(Ul(d,p))return!0;for(var F=0;F<p.length;F++)if(Kl(p[F],d,C))return!0}for(var J=0;J<d.length;J++)if(Kl(d[J],p,C))return!0;return!1}function Ul(d,p){if(d.length===0||p.length===0)return!1;for(var C=0;C<d.length-1;C++)for(var F=d[C],J=d[C+1],vt=0;vt<p.length-1;vt++)if(Lc(F,J,p[vt],p[vt+1]))return!0;return!1}function Lc(d,p,C,F){return R(d,C,F)!==R(p,C,F)&&R(d,p,C)!==R(d,p,F)}function Kl(d,p,C){var F=C*C;if(p.length===1)return d.distSqr(p[0])<F;for(var J=1;J<p.length;J++)if(Mc(d,p[J-1],p[J])<F)return!0;return!1}function Mc(d,p,C){var F=p.distSqr(C);if(F===0)return d.distSqr(p);var J=((d.x-p.x)*(C.x-p.x)+(d.y-p.y)*(C.y-p.y))/F;return d.distSqr(J<0?p:J>1?C:C.sub(p)._mult(J)._add(p))}function Cc(d,p){for(var C,F,J,vt=!1,Ct=0;Ct<d.length;Ct++)for(var Bt=0,Jt=(C=d[Ct]).length-1;Bt<C.length;Jt=Bt++)(F=C[Bt]).y>p.y!=(J=C[Jt]).y>p.y&&p.x<(J.x-F.x)*(p.y-F.y)/(J.y-F.y)+F.x&&(vt=!vt);return vt}function fc(d,p){for(var C=!1,F=0,J=d.length-1;F<d.length;J=F++){var vt=d[F],Ct=d[J];vt.y>p.y!=Ct.y>p.y&&p.x<(Ct.x-vt.x)*(p.y-vt.y)/(Ct.y-vt.y)+vt.x&&(C=!C)}return C}function bc(d,p,C){var F=C[0],J=C[2];if(d.x<F.x&&p.x<F.x||d.x>J.x&&p.x>J.x||d.y<F.y&&p.y<F.y||d.y>J.y&&p.y>J.y)return!1;var vt=R(d,p,C[0]);return vt!==R(d,p,C[1])||vt!==R(d,p,C[2])||vt!==R(d,p,C[3])}function ic(d,p,C){var F=p.paint.get(d).value;return F.kind==="constant"?F.value:C.programConfigurations.get(p.id).getMaxValue(d)}function yu(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function Ec(d,p,C,F,J){if(!p[0]&&!p[1])return d;var vt=r.convert(p)._mult(J);C==="viewport"&&vt._rotate(-F);for(var Ct=[],Bt=0;Bt<d.length;Bt++)Ct.push(d[Bt].sub(vt));return Ct}sl.prototype.populate=function(d,p,C){var F=this.layers[0],J=[],vt=null;F.type==="circle"&&(vt=F.layout.get("circle-sort-key"));for(var Ct=0,Bt=d;Ct<Bt.length;Ct+=1){var Jt=Bt[Ct],ve=Jt.feature,Ie=Jt.id,Ue=Jt.index,He=Jt.sourceLayerIndex,fn=this.layers[0]._featureFilter.needGeometry,Ln=Ps(ve,fn);if(this.layers[0]._featureFilter.filter(new br(this.zoom),Ln,C)){var On=vt?vt.evaluate(Ln,{},C):void 0,Kn={id:Ie,properties:ve.properties,type:ve.type,sourceLayerIndex:He,index:Ue,geometry:fn?Ln.geometry:jo(ve),patterns:{},sortKey:On};J.push(Kn)}}vt&&J.sort(function(Ri,Xi){return Ri.sortKey-Xi.sortKey});for(var $n=0,_r=J;$n<_r.length;$n+=1){var Br=_r[$n],Hr=Br.geometry,pi=Br.index,ii=Br.sourceLayerIndex,Li=d[pi].feature;this.addFeature(Br,Hr,pi,C),p.featureIndex.insert(Li,Hr,pi,ii,this.index)}},sl.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},sl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},sl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},sl.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,kt),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},sl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},sl.prototype.addFeature=function(d,p,C,F){for(var J=0,vt=p;J<vt.length;J+=1)for(var Ct=0,Bt=vt[J];Ct<Bt.length;Ct+=1){var Jt=Bt[Ct],ve=Jt.x,Ie=Jt.y;if(!(ve<0||ve>=8192||Ie<0||Ie>=8192)){var Ue=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,d.sortKey),He=Ue.vertexLength;Rl(this.layoutVertexArray,ve,Ie,-1,-1),Rl(this.layoutVertexArray,ve,Ie,1,-1),Rl(this.layoutVertexArray,ve,Ie,1,1),Rl(this.layoutVertexArray,ve,Ie,-1,1),this.indexArray.emplaceBack(He,He+1,He+2),this.indexArray.emplaceBack(He,He+3,He+2),Ue.vertexLength+=4,Ue.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,{},F)},Ni("CircleBucket",sl,{omit:["layers"]});var Sc=new gn({"circle-sort-key":new Be(ae.layout_circle["circle-sort-key"])}),Dl={paint:new gn({"circle-radius":new Be(ae.paint_circle["circle-radius"]),"circle-color":new Be(ae.paint_circle["circle-color"]),"circle-blur":new Be(ae.paint_circle["circle-blur"]),"circle-opacity":new Be(ae.paint_circle["circle-opacity"]),"circle-translate":new he(ae.paint_circle["circle-translate"]),"circle-translate-anchor":new he(ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new he(ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new he(ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Be(ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Be(ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Be(ae.paint_circle["circle-stroke-opacity"])}),layout:Sc},Gu=typeof Float32Array!="undefined"?Float32Array:Array;function ul(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function ll(d,p,C){var F=p[0],J=p[1],vt=p[2],Ct=p[3],Bt=p[4],Jt=p[5],ve=p[6],Ie=p[7],Ue=p[8],He=p[9],fn=p[10],Ln=p[11],On=p[12],Kn=p[13],$n=p[14],_r=p[15],Br=C[0],Hr=C[1],pi=C[2],ii=C[3];return d[0]=Br*F+Hr*Bt+pi*Ue+ii*On,d[1]=Br*J+Hr*Jt+pi*He+ii*Kn,d[2]=Br*vt+Hr*ve+pi*fn+ii*$n,d[3]=Br*Ct+Hr*Ie+pi*Ln+ii*_r,d[4]=(Br=C[4])*F+(Hr=C[5])*Bt+(pi=C[6])*Ue+(ii=C[7])*On,d[5]=Br*J+Hr*Jt+pi*He+ii*Kn,d[6]=Br*vt+Hr*ve+pi*fn+ii*$n,d[7]=Br*Ct+Hr*Ie+pi*Ln+ii*_r,d[8]=(Br=C[8])*F+(Hr=C[9])*Bt+(pi=C[10])*Ue+(ii=C[11])*On,d[9]=Br*J+Hr*Jt+pi*He+ii*Kn,d[10]=Br*vt+Hr*ve+pi*fn+ii*$n,d[11]=Br*Ct+Hr*Ie+pi*Ln+ii*_r,d[12]=(Br=C[12])*F+(Hr=C[13])*Bt+(pi=C[14])*Ue+(ii=C[15])*On,d[13]=Br*J+Hr*Jt+pi*He+ii*Kn,d[14]=Br*vt+Hr*ve+pi*fn+ii*$n,d[15]=Br*Ct+Hr*Ie+pi*Ln+ii*_r,d}Math.hypot||(Math.hypot=function(){for(var d=arguments,p=0,C=arguments.length;C--;)p+=d[C]*d[C];return Math.sqrt(p)});var cl,Ju=ll;function ec(d,p,C){var F=p[0],J=p[1],vt=p[2],Ct=p[3];return d[0]=C[0]*F+C[4]*J+C[8]*vt+C[12]*Ct,d[1]=C[1]*F+C[5]*J+C[9]*vt+C[13]*Ct,d[2]=C[2]*F+C[6]*J+C[10]*vt+C[14]*Ct,d[3]=C[3]*F+C[7]*J+C[11]*vt+C[15]*Ct,d}cl=new Gu(3),Gu!=Float32Array&&(cl[0]=0,cl[1]=0,cl[2]=0),function(){var d=new Gu(4);Gu!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0)}();var Rc=(function(){var d=new Gu(2);Gu!=Float32Array&&(d[0]=0,d[1]=0)}(),function(d){function p(C){d.call(this,C,Dl)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new sl(C)},p.prototype.queryRadius=function(C){var F=C;return ic("circle-radius",this,F)+ic("circle-stroke-width",this,F)+yu(this.paint.get("circle-translate"))},p.prototype.queryIntersectsFeature=function(C,F,J,vt,Ct,Bt,Jt,ve){for(var Ie=Ec(C,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Bt.angle,Jt),Ue=this.paint.get("circle-radius").evaluate(F,J)+this.paint.get("circle-stroke-width").evaluate(F,J),He=this.paint.get("circle-pitch-alignment")==="map",fn=He?Ie:function(Li,Ri){return Li.map(function(Xi){return zc(Xi,Ri)})}(Ie,ve),Ln=He?Ue*Jt:Ue,On=0,Kn=vt;On<Kn.length;On+=1)for(var $n=0,_r=Kn[On];$n<_r.length;$n+=1){var Br=_r[$n],Hr=He?Br:zc(Br,ve),pi=Ln,ii=ec([],[Br.x,Br.y,0,1],ve);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pi*=ii[3]/Bt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pi*=Bt.cameraToCenterDistance/ii[3]),xc(fn,Hr,pi))return!0}return!1},p}(vn));function zc(d,p){var C=ec([],[d.x,d.y,0,1],p);return new r(C[0]/C[3],C[1]/C[3])}var Uc=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(sl);function hc(d,p,C,F){var J=p.width,vt=p.height;if(F){if(F instanceof Uint8ClampedArray)F=new Uint8Array(F.buffer);else if(F.length!==J*vt*C)throw new RangeError("mismatched image size")}else F=new Uint8Array(J*vt*C);return d.width=J,d.height=vt,d.data=F,d}function Xc(d,p,C){var F=p.width,J=p.height;if(F!==d.width||J!==d.height){var vt=hc({},{width:F,height:J},C);Pc(d,vt,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,F),height:Math.min(d.height,J)},C),d.width=F,d.height=J,d.data=vt.data}}function Pc(d,p,C,F,J,vt){if(J.width===0||J.height===0)return p;if(J.width>d.width||J.height>d.height||C.x>d.width-J.width||C.y>d.height-J.height)throw new RangeError("out of range source coordinates for image copy");if(J.width>p.width||J.height>p.height||F.x>p.width-J.width||F.y>p.height-J.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ct=d.data,Bt=p.data,Jt=0;Jt<J.height;Jt++)for(var ve=((C.y+Jt)*d.width+C.x)*vt,Ie=((F.y+Jt)*p.width+F.x)*vt,Ue=0;Ue<J.width*vt;Ue++)Bt[Ie+Ue]=Ct[ve+Ue];return p}Ni("HeatmapBucket",Uc,{omit:["layers"]});var jl=function(p,C){hc(this,p,1,C)};jl.prototype.resize=function(d){Xc(this,d,1)},jl.prototype.clone=function(){return new jl({width:this.width,height:this.height},new Uint8Array(this.data))},jl.copy=function(d,p,C,F,J){Pc(d,p,C,F,J,1)};var Bu=function(p,C){hc(this,p,4,C)};Bu.prototype.resize=function(d){Xc(this,d,4)},Bu.prototype.replace=function(d,p){p?this.data.set(d):this.data=d instanceof Uint8ClampedArray?new Uint8Array(d.buffer):d},Bu.prototype.clone=function(){return new Bu({width:this.width,height:this.height},new Uint8Array(this.data))},Bu.copy=function(d,p,C,F,J){Pc(d,p,C,F,J,4)},Ni("AlphaImage",jl),Ni("RGBAImage",Bu);var Jc={paint:new gn({"heatmap-radius":new Be(ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Be(ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new he(ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $e(ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new he(ae.paint_heatmap["heatmap-opacity"])})};function sf(d){var p={},C=d.resolution||256,F=d.clips?d.clips.length:1,J=d.image||new Bu({width:C,height:F}),vt=function(On,Kn,$n){p[d.evaluationKey]=$n;var _r=d.expression.evaluate(p);J.data[On+Kn+0]=Math.floor(255*_r.r/_r.a),J.data[On+Kn+1]=Math.floor(255*_r.g/_r.a),J.data[On+Kn+2]=Math.floor(255*_r.b/_r.a),J.data[On+Kn+3]=Math.floor(255*_r.a)};if(d.clips)for(var Ct=0,Bt=0;Ct<F;++Ct,Bt+=4*C)for(var Jt=0,ve=0;Jt<C;Jt++,ve+=4){var Ie=Jt/(C-1),Ue=d.clips[Ct];vt(Bt,ve,Ue.start*(1-Ie)+Ue.end*Ie)}else for(var He=0,fn=0;He<C;He++,fn+=4)vt(0,fn,He/(C-1));return J}var $c=function(d){function p(C){d.call(this,C,Jc),this._updateColorRamp()}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new Uc(C)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="heatmap-color"&&this._updateColorRamp()},p.prototype._updateColorRamp=function(){this.colorRamp=sf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},p.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},p}(vn),kf={paint:new gn({"hillshade-illumination-direction":new he(ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new he(ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new he(ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new he(ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new he(ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new he(ae.paint_hillshade["hillshade-accent-color"])})},wf=function(d){function p(C){d.call(this,C,kf)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},p}(vn),Gf=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,Oc=uf,sh=uf;function uf(d,p,C){C=C||2;var F,J,vt,Ct,Bt,Jt,ve,Ie=p&&p.length,Ue=Ie?p[0]*C:d.length,He=lf(d,0,Ue,C,!0),fn=[];if(!He||He.next===He.prev)return fn;if(Ie&&(He=function(On,Kn,$n,_r){var Br,Hr,pi,ii=[];for(Br=0,Hr=Kn.length;Br<Hr;Br++)(pi=lf(On,Kn[Br]*_r,Br<Hr-1?Kn[Br+1]*_r:On.length,_r,!1))===pi.next&&(pi.steiner=!0),ii.push(bf(pi));for(ii.sort(Qc),Br=0;Br<ii.length;Br++)ff(ii[Br],$n),$n=Tc($n,$n.next);return $n}(d,p,He,C)),d.length>80*C){F=vt=d[0],J=Ct=d[1];for(var Ln=C;Ln<Ue;Ln+=C)(Bt=d[Ln])<F&&(F=Bt),(Jt=d[Ln+1])<J&&(J=Jt),Bt>vt&&(vt=Bt),Jt>Ct&&(Ct=Jt);ve=(ve=Math.max(vt-F,Ct-J))!==0?1/ve:0}return fl(He,fn,C,F,J,ve),fn}function lf(d,p,C,F,J){var vt,Ct;if(J===Gc(d,p,C,F)>0)for(vt=p;vt<C;vt+=F)Ct=Sf(vt,d[vt],d[vt+1],Ct);else for(vt=C-F;vt>=p;vt-=F)Ct=Sf(vt,d[vt],d[vt+1],Ct);return Ct&&dc(Ct,Ct.next)&&(kc(Ct),Ct=Ct.next),Ct}function Tc(d,p){if(!d)return d;p||(p=d);var C,F=d;do if(C=!1,F.steiner||!dc(F,F.next)&&eu(F.prev,F,F.next)!==0)F=F.next;else{if(kc(F),(F=p=F.prev)===F.next)break;C=!0}while(C||F!==p);return p}function fl(d,p,C,F,J,vt,Ct){if(d){!Ct&&vt&&function(Ie,Ue,He,fn){var Ln=Ie;do Ln.z===null&&(Ln.z=Lf(Ln.x,Ln.y,Ue,He,fn)),Ln.prevZ=Ln.prev,Ln.nextZ=Ln.next,Ln=Ln.next;while(Ln!==Ie);Ln.prevZ.nextZ=null,Ln.prevZ=null,function(On){var Kn,$n,_r,Br,Hr,pi,ii,Li,Ri=1;do{for($n=On,On=null,Hr=null,pi=0;$n;){for(pi++,_r=$n,ii=0,Kn=0;Kn<Ri&&(ii++,_r=_r.nextZ);Kn++);for(Li=Ri;ii>0||Li>0&&_r;)ii!==0&&(Li===0||!_r||$n.z<=_r.z)?(Br=$n,$n=$n.nextZ,ii--):(Br=_r,_r=_r.nextZ,Li--),Hr?Hr.nextZ=Br:On=Br,Br.prevZ=Hr,Hr=Br;$n=_r}Hr.nextZ=null,Ri*=2}while(pi>1)}(Ln)}(d,F,J,vt);for(var Bt,Jt,ve=d;d.prev!==d.next;)if(Bt=d.prev,Jt=d.next,vt?cf(d,F,J,vt):xf(d))p.push(Bt.i/C),p.push(d.i/C),p.push(Jt.i/C),kc(d),d=Jt.next,ve=Jt.next;else if((d=Jt)===ve){Ct?Ct===1?fl(d=Vf(Tc(d),p,C),p,C,F,J,vt,2):Ct===2&&Wf(d,p,C,F,J,vt):fl(Tc(d),p,C,F,J,vt,1);break}}}function xf(d){var p=d.prev,C=d,F=d.next;if(eu(p,C,F)>=0)return!1;for(var J=d.next.next;J!==d.prev;){if(wc(p.x,p.y,C.x,C.y,F.x,F.y,J.x,J.y)&&eu(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function cf(d,p,C,F){var J=d.prev,vt=d,Ct=d.next;if(eu(J,vt,Ct)>=0)return!1;for(var Bt=J.x>vt.x?J.x>Ct.x?J.x:Ct.x:vt.x>Ct.x?vt.x:Ct.x,Jt=J.y>vt.y?J.y>Ct.y?J.y:Ct.y:vt.y>Ct.y?vt.y:Ct.y,ve=Lf(J.x<vt.x?J.x<Ct.x?J.x:Ct.x:vt.x<Ct.x?vt.x:Ct.x,J.y<vt.y?J.y<Ct.y?J.y:Ct.y:vt.y<Ct.y?vt.y:Ct.y,p,C,F),Ie=Lf(Bt,Jt,p,C,F),Ue=d.prevZ,He=d.nextZ;Ue&&Ue.z>=ve&&He&&He.z<=Ie;){if(Ue!==d.prev&&Ue!==d.next&&wc(J.x,J.y,vt.x,vt.y,Ct.x,Ct.y,Ue.x,Ue.y)&&eu(Ue.prev,Ue,Ue.next)>=0||(Ue=Ue.prevZ,He!==d.prev&&He!==d.next&&wc(J.x,J.y,vt.x,vt.y,Ct.x,Ct.y,He.x,He.y)&&eu(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Ue&&Ue.z>=ve;){if(Ue!==d.prev&&Ue!==d.next&&wc(J.x,J.y,vt.x,vt.y,Ct.x,Ct.y,Ue.x,Ue.y)&&eu(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.prevZ}for(;He&&He.z<=Ie;){if(He!==d.prev&&He!==d.next&&wc(J.x,J.y,vt.x,vt.y,Ct.x,Ct.y,He.x,He.y)&&eu(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function Vf(d,p,C){var F=d;do{var J=F.prev,vt=F.next.next;!dc(J,vt)&&Ef(J,F,F.next,vt)&&Dc(J,vt)&&Dc(vt,J)&&(p.push(J.i/C),p.push(F.i/C),p.push(vt.i/C),kc(F),kc(F.next),F=d=vt),F=F.next}while(F!==d);return Tc(F)}function Wf(d,p,C,F,J,vt){var Ct=d;do{for(var Bt=Ct.next.next;Bt!==Ct.prev;){if(Ct.i!==Bt.i&&hf(Ct,Bt)){var Jt=df(Ct,Bt);return Ct=Tc(Ct,Ct.next),Jt=Tc(Jt,Jt.next),fl(Ct,p,C,F,J,vt),void fl(Jt,p,C,F,J,vt)}Bt=Bt.next}Ct=Ct.next}while(Ct!==d)}function Qc(d,p){return d.x-p.x}function ff(d,p){if(p=function(F,J){var vt,Ct=J,Bt=F.x,Jt=F.y,ve=-1/0;do{if(Jt<=Ct.y&&Jt>=Ct.next.y&&Ct.next.y!==Ct.y){var Ie=Ct.x+(Jt-Ct.y)*(Ct.next.x-Ct.x)/(Ct.next.y-Ct.y);if(Ie<=Bt&&Ie>ve){if(ve=Ie,Ie===Bt){if(Jt===Ct.y)return Ct;if(Jt===Ct.next.y)return Ct.next}vt=Ct.x<Ct.next.x?Ct:Ct.next}}Ct=Ct.next}while(Ct!==J);if(!vt)return null;if(Bt===ve)return vt;var Ue,He=vt,fn=vt.x,Ln=vt.y,On=1/0;Ct=vt;do Bt>=Ct.x&&Ct.x>=fn&&Bt!==Ct.x&&wc(Jt<Ln?Bt:ve,Jt,fn,Ln,Jt<Ln?ve:Bt,Jt,Ct.x,Ct.y)&&(Ue=Math.abs(Jt-Ct.y)/(Bt-Ct.x),Dc(Ct,F)&&(Ue<On||Ue===On&&(Ct.x>vt.x||Ct.x===vt.x&&If(vt,Ct)))&&(vt=Ct,On=Ue)),Ct=Ct.next;while(Ct!==He);return vt}(d,p)){var C=df(p,d);Tc(p,p.next),Tc(C,C.next)}}function If(d,p){return eu(d.prev,d,p.prev)<0&&eu(p.next,d,d.next)<0}function Lf(d,p,C,F,J){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-C)*J)|d<<8))|d<<4))|d<<2))|d<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-F)*J)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function bf(d){var p=d,C=d;do(p.x<C.x||p.x===C.x&&p.y<C.y)&&(C=p),p=p.next;while(p!==d);return C}function wc(d,p,C,F,J,vt,Ct,Bt){return(J-Ct)*(p-Bt)-(d-Ct)*(vt-Bt)>=0&&(d-Ct)*(F-Bt)-(C-Ct)*(p-Bt)>=0&&(C-Ct)*(vt-Bt)-(J-Ct)*(F-Bt)>=0}function hf(d,p){return d.next.i!==p.i&&d.prev.i!==p.i&&!function(C,F){var J=C;do{if(J.i!==C.i&&J.next.i!==C.i&&J.i!==F.i&&J.next.i!==F.i&&Ef(J,J.next,C,F))return!0;J=J.next}while(J!==C);return!1}(d,p)&&(Dc(d,p)&&Dc(p,d)&&function(C,F){var J=C,vt=!1,Ct=(C.x+F.x)/2,Bt=(C.y+F.y)/2;do J.y>Bt!=J.next.y>Bt&&J.next.y!==J.y&&Ct<(J.next.x-J.x)*(Bt-J.y)/(J.next.y-J.y)+J.x&&(vt=!vt),J=J.next;while(J!==C);return vt}(d,p)&&(eu(d.prev,d,p.prev)||eu(d,p.prev,p))||dc(d,p)&&eu(d.prev,d,d.next)>0&&eu(p.prev,p,p.next)>0)}function eu(d,p,C){return(p.y-d.y)*(C.x-p.x)-(p.x-d.x)*(C.y-p.y)}function dc(d,p){return d.x===p.x&&d.y===p.y}function Ef(d,p,C,F){var J=vc(eu(d,p,C)),vt=vc(eu(d,p,F)),Ct=vc(eu(C,F,d)),Bt=vc(eu(C,F,p));return J!==vt&&Ct!==Bt||!(J!==0||!Yc(d,C,p))||!(vt!==0||!Yc(d,F,p))||!(Ct!==0||!Yc(C,d,F))||!(Bt!==0||!Yc(C,p,F))}function Yc(d,p,C){return p.x<=Math.max(d.x,C.x)&&p.x>=Math.min(d.x,C.x)&&p.y<=Math.max(d.y,C.y)&&p.y>=Math.min(d.y,C.y)}function vc(d){return d>0?1:d<0?-1:0}function Dc(d,p){return eu(d.prev,d,d.next)<0?eu(d,p,d.next)>=0&&eu(d,d.prev,p)>=0:eu(d,p,d.prev)<0||eu(d,d.next,p)<0}function df(d,p){var C=new Zc(d.i,d.x,d.y),F=new Zc(p.i,p.x,p.y),J=d.next,vt=p.prev;return d.next=p,p.prev=d,C.next=J,J.prev=C,F.next=C,C.prev=F,vt.next=F,F.prev=vt,F}function Sf(d,p,C,F){var J=new Zc(d,p,C);return F?(J.next=F.next,J.prev=F,F.next.prev=J,F.next=J):(J.prev=J,J.next=J),J}function kc(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Zc(d,p,C){this.i=d,this.x=p,this.y=C,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Gc(d,p,C,F){for(var J=0,vt=p,Ct=C-F;vt<C;vt+=F)J+=(d[Ct]-d[vt])*(d[vt+1]+d[Ct+1]),Ct=vt;return J}function qc(d,p,C,F,J){(function vt(Ct,Bt,Jt,ve,Ie){for(;ve>Jt;){if(ve-Jt>600){var Ue=ve-Jt+1,He=Bt-Jt+1,fn=Math.log(Ue),Ln=.5*Math.exp(2*fn/3),On=.5*Math.sqrt(fn*Ln*(Ue-Ln)/Ue)*(He-Ue/2<0?-1:1);vt(Ct,Bt,Math.max(Jt,Math.floor(Bt-He*Ln/Ue+On)),Math.min(ve,Math.floor(Bt+(Ue-He)*Ln/Ue+On)),Ie)}var Kn=Ct[Bt],$n=Jt,_r=ve;for(pe(Ct,Jt,Bt),Ie(Ct[ve],Kn)>0&&pe(Ct,Jt,ve);$n<_r;){for(pe(Ct,$n,_r),$n++,_r--;Ie(Ct[$n],Kn)<0;)$n++;for(;Ie(Ct[_r],Kn)>0;)_r--}Ie(Ct[Jt],Kn)===0?pe(Ct,Jt,_r):pe(Ct,++_r,ve),_r<=Bt&&(Jt=_r+1),Bt<=_r&&(ve=_r-1)}})(d,p,C||0,F||d.length-1,J||me)}function pe(d,p,C){var F=d[p];d[p]=d[C],d[C]=F}function me(d,p){return d<p?-1:d>p?1:0}function Vt(d,p){var C=d.length;if(C<=1)return[d];for(var F,J,vt=[],Ct=0;Ct<C;Ct++){var Bt=H(d[Ct]);Bt!==0&&(d[Ct].area=Math.abs(Bt),J===void 0&&(J=Bt<0),J===Bt<0?(F&&vt.push(F),F=[d[Ct]]):F.push(d[Ct]))}if(F&&vt.push(F),p>1)for(var Jt=0;Jt<vt.length;Jt++)vt[Jt].length<=p||(qc(vt[Jt],p,1,vt[Jt].length-1,Kt),vt[Jt]=vt[Jt].slice(0,p));return vt}function Kt(d,p){return p.area-d.area}function ze(d,p,C){for(var F=C.patternDependencies,J=!1,vt=0,Ct=p;vt<Ct.length;vt+=1){var Bt=Ct[vt].paint.get(d+"-pattern");Bt.isConstant()||(J=!0);var Jt=Bt.constantOr(null);Jt&&(J=!0,F[Jt.to]=!0,F[Jt.from]=!0)}return J}function rn(d,p,C,F,J){for(var vt=J.patternDependencies,Ct=0,Bt=p;Ct<Bt.length;Ct+=1){var Jt=Bt[Ct],ve=Jt.paint.get(d+"-pattern").value;if(ve.kind!=="constant"){var Ie=ve.evaluate({zoom:F-1},C,{},J.availableImages),Ue=ve.evaluate({zoom:F},C,{},J.availableImages),He=ve.evaluate({zoom:F+1},C,{},J.availableImages);Ue=Ue&&Ue.name?Ue.name:Ue,He=He&&He.name?He.name:He,vt[Ie=Ie&&Ie.name?Ie.name:Ie]=!0,vt[Ue]=!0,vt[He]=!0,C.patterns[Jt.id]={min:Ie,mid:Ue,max:He}}}return C}uf.deviation=function(d,p,C,F){var J=p&&p.length,vt=Math.abs(Gc(d,0,J?p[0]*C:d.length,C));if(J)for(var Ct=0,Bt=p.length;Ct<Bt;Ct++)vt-=Math.abs(Gc(d,p[Ct]*C,Ct<Bt-1?p[Ct+1]*C:d.length,C));var Jt=0;for(Ct=0;Ct<F.length;Ct+=3){var ve=F[Ct]*C,Ie=F[Ct+1]*C,Ue=F[Ct+2]*C;Jt+=Math.abs((d[ve]-d[Ue])*(d[Ie+1]-d[ve+1])-(d[ve]-d[Ie])*(d[Ue+1]-d[ve+1]))}return vt===0&&Jt===0?0:Math.abs((Jt-vt)/vt)},uf.flatten=function(d){for(var p=d[0][0].length,C={vertices:[],holes:[],dimensions:p},F=0,J=0;J<d.length;J++){for(var vt=0;vt<d[J].length;vt++)for(var Ct=0;Ct<p;Ct++)C.vertices.push(d[J][vt][Ct]);J>0&&C.holes.push(F+=d[J-1].length)}return C},Oc.default=sh;var Un=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xr,this.indexArray=new to,this.indexArray2=new Ms,this.programConfigurations=new Ca(p.layers,p.zoom),this.segments=new Yt,this.segments2=new Yt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};Un.prototype.populate=function(d,p,C){this.hasPattern=ze("fill",this.layers,p);for(var F=this.layers[0].layout.get("fill-sort-key"),J=[],vt=0,Ct=d;vt<Ct.length;vt+=1){var Bt=Ct[vt],Jt=Bt.feature,ve=Bt.id,Ie=Bt.index,Ue=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,fn=Ps(Jt,He);if(this.layers[0]._featureFilter.filter(new br(this.zoom),fn,C)){var Ln=F?F.evaluate(fn,{},C,p.availableImages):void 0,On={id:ve,properties:Jt.properties,type:Jt.type,sourceLayerIndex:Ue,index:Ie,geometry:He?fn.geometry:jo(Jt),patterns:{},sortKey:Ln};J.push(On)}}F&&J.sort(function(Li,Ri){return Li.sortKey-Ri.sortKey});for(var Kn=0,$n=J;Kn<$n.length;Kn+=1){var _r=$n[Kn],Br=_r.geometry,Hr=_r.index,pi=_r.sourceLayerIndex;if(this.hasPattern){var ii=rn("fill",this.layers,_r,this.zoom,p);this.patternFeatures.push(ii)}else this.addFeature(_r,Br,Hr,C,{});p.featureIndex.insert(d[Hr].feature,Br,Hr,pi,this.index)}},Un.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Un.prototype.addFeatures=function(d,p,C){for(var F=0,J=this.patternFeatures;F<J.length;F+=1){var vt=J[F];this.addFeature(vt,vt.geometry,vt.index,p,C)}},Un.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Un.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Un.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Gf),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.indexBuffer2=d.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(d),this.uploaded=!0},Un.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Un.prototype.addFeature=function(d,p,C,F,J){for(var vt=0,Ct=Vt(p,500);vt<Ct.length;vt+=1){for(var Bt=Ct[vt],Jt=0,ve=0,Ie=Bt;ve<Ie.length;ve+=1)Jt+=Ie[ve].length;for(var Ue=this.segments.prepareSegment(Jt,this.layoutVertexArray,this.indexArray),He=Ue.vertexLength,fn=[],Ln=[],On=0,Kn=Bt;On<Kn.length;On+=1){var $n=Kn[On];if($n.length!==0){$n!==Bt[0]&&Ln.push(fn.length/2);var _r=this.segments2.prepareSegment($n.length,this.layoutVertexArray,this.indexArray2),Br=_r.vertexLength;this.layoutVertexArray.emplaceBack($n[0].x,$n[0].y),this.indexArray2.emplaceBack(Br+$n.length-1,Br),fn.push($n[0].x),fn.push($n[0].y);for(var Hr=1;Hr<$n.length;Hr++)this.layoutVertexArray.emplaceBack($n[Hr].x,$n[Hr].y),this.indexArray2.emplaceBack(Br+Hr-1,Br+Hr),fn.push($n[Hr].x),fn.push($n[Hr].y);_r.vertexLength+=$n.length,_r.primitiveLength+=$n.length}}for(var pi=Oc(fn,Ln),ii=0;ii<pi.length;ii+=3)this.indexArray.emplaceBack(He+pi[ii],He+pi[ii+1],He+pi[ii+2]);Ue.vertexLength+=Jt,Ue.primitiveLength+=pi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,J,F)},Ni("FillBucket",Un,{omit:["layers","patternFeatures"]});var gr=new gn({"fill-sort-key":new Be(ae.layout_fill["fill-sort-key"])}),mr={paint:new gn({"fill-antialias":new he(ae.paint_fill["fill-antialias"]),"fill-opacity":new Be(ae.paint_fill["fill-opacity"]),"fill-color":new Be(ae.paint_fill["fill-color"]),"fill-outline-color":new Be(ae.paint_fill["fill-outline-color"]),"fill-translate":new he(ae.paint_fill["fill-translate"]),"fill-translate-anchor":new he(ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ze(ae.paint_fill["fill-pattern"])}),layout:gr},Jr=function(d){function p(C){d.call(this,C,mr)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,F){d.prototype.recalculate.call(this,C,F);var J=this.paint._values["fill-outline-color"];J.value.kind==="constant"&&J.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},p.prototype.createBucket=function(C){return new Un(C)},p.prototype.queryRadius=function(){return yu(this.paint.get("fill-translate"))},p.prototype.queryIntersectsFeature=function(C,F,J,vt,Ct,Bt,Jt){return Sl(Ec(C,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Bt.angle,Jt),vt)},p.prototype.isTileClipped=function(){return!0},p}(vn),Mi=Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Hi=ra;function ra(d,p,C,F,J){this.properties={},this.extent=C,this.type=0,this._pbf=d,this._geometry=-1,this._keys=F,this._values=J,d.readFields(Da,this,p)}function Da(d,p,C){d==1?p.id=C.readVarint():d==2?function(F,J){for(var vt=F.readVarint()+F.pos;F.pos<vt;){var Ct=J._keys[F.readVarint()],Bt=J._values[F.readVarint()];J.properties[Ct]=Bt}}(C,p):d==3?p.type=C.readVarint():d==4&&(p._geometry=C.pos)}function Ka(d){for(var p,C,F=0,J=0,vt=d.length,Ct=vt-1;J<vt;Ct=J++)F+=((C=d[Ct]).x-(p=d[J]).x)*(p.y+C.y);return F}ra.types=["Unknown","Point","LineString","Polygon"],ra.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var p,C=d.readVarint()+d.pos,F=1,J=0,vt=0,Ct=0,Bt=[];d.pos<C;){if(J<=0){var Jt=d.readVarint();F=7&Jt,J=Jt>>3}if(J--,F===1||F===2)vt+=d.readSVarint(),Ct+=d.readSVarint(),F===1&&(p&&Bt.push(p),p=[]),p.push(new r(vt,Ct));else{if(F!==7)throw new Error("unknown command "+F);p&&p.push(p[0].clone())}}return p&&Bt.push(p),Bt},ra.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var p=d.readVarint()+d.pos,C=1,F=0,J=0,vt=0,Ct=1/0,Bt=-1/0,Jt=1/0,ve=-1/0;d.pos<p;){if(F<=0){var Ie=d.readVarint();C=7&Ie,F=Ie>>3}if(F--,C===1||C===2)(J+=d.readSVarint())<Ct&&(Ct=J),J>Bt&&(Bt=J),(vt+=d.readSVarint())<Jt&&(Jt=vt),vt>ve&&(ve=vt);else if(C!==7)throw new Error("unknown command "+C)}return[Ct,Jt,Bt,ve]},ra.prototype.toGeoJSON=function(d,p,C){var F,J,vt=this.extent*Math.pow(2,C),Ct=this.extent*d,Bt=this.extent*p,Jt=this.loadGeometry(),ve=ra.types[this.type];function Ie(fn){for(var Ln=0;Ln<fn.length;Ln++){var On=fn[Ln];fn[Ln]=[360*(On.x+Ct)/vt-180,360/Math.PI*Math.atan(Math.exp((180-360*(On.y+Bt)/vt)*Math.PI/180))-90]}}switch(this.type){case 1:var Ue=[];for(F=0;F<Jt.length;F++)Ue[F]=Jt[F][0];Ie(Jt=Ue);break;case 2:for(F=0;F<Jt.length;F++)Ie(Jt[F]);break;case 3:for(Jt=function(fn){var Ln=fn.length;if(Ln<=1)return[fn];for(var On,Kn,$n=[],_r=0;_r<Ln;_r++){var Br=Ka(fn[_r]);Br!==0&&(Kn===void 0&&(Kn=Br<0),Kn===Br<0?(On&&$n.push(On),On=[fn[_r]]):On.push(fn[_r]))}return On&&$n.push(On),$n}(Jt),F=0;F<Jt.length;F++)for(J=0;J<Jt[F].length;J++)Ie(Jt[F][J])}Jt.length===1?Jt=Jt[0]:ve="Multi"+ve;var He={type:"Feature",geometry:{type:ve,coordinates:Jt},properties:this.properties};return"id"in this&&(He.id=this.id),He};var Qa=qo;function qo(d,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(bo,this,p),this.length=this._features.length}function bo(d,p,C){d===15?p.version=C.readVarint():d===1?p.name=C.readString():d===5?p.extent=C.readVarint():d===2?p._features.push(C.pos):d===3?p._keys.push(C.readString()):d===4&&p._values.push(function(F){for(var J=null,vt=F.readVarint()+F.pos;F.pos<vt;){var Ct=F.readVarint()>>3;J=Ct===1?F.readString():Ct===2?F.readFloat():Ct===3?F.readDouble():Ct===4?F.readVarint64():Ct===5?F.readVarint():Ct===6?F.readSVarint():Ct===7?F.readBoolean():null}return J}(C))}function Ts(d,p,C){if(d===3){var F=new Qa(C,C.readVarint()+C.pos);F.length&&(p[F.name]=F)}}qo.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var p=this._pbf.readVarint()+this._pbf.pos;return new Hi(this._pbf,p,this.extent,this._keys,this._values)};var Ys={VectorTile:function(p,C){this.layers=p.readFields(Ts,{},C)},VectorTileFeature:Hi,VectorTileLayer:Qa},xu=Ys.VectorTileFeature.types,Zs=Math.pow(2,13);function zs(d,p,C,F,J,vt,Ct,Bt){d.emplaceBack(p,C,2*Math.floor(F*Zs)+Ct,J*Zs*2,vt*Zs*2,Math.round(Bt))}var Eo=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new gi,this.indexArray=new to,this.programConfigurations=new Ca(p.layers,p.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function Ks(d,p){return d.x===p.x&&(d.x<0||d.x>8192)||d.y===p.y&&(d.y<0||d.y>8192)}Eo.prototype.populate=function(d,p,C){this.features=[],this.hasPattern=ze("fill-extrusion",this.layers,p);for(var F=0,J=d;F<J.length;F+=1){var vt=J[F],Ct=vt.feature,Bt=vt.id,Jt=vt.index,ve=vt.sourceLayerIndex,Ie=this.layers[0]._featureFilter.needGeometry,Ue=Ps(Ct,Ie);if(this.layers[0]._featureFilter.filter(new br(this.zoom),Ue,C)){var He={id:Bt,sourceLayerIndex:ve,index:Jt,geometry:Ie?Ue.geometry:jo(Ct),properties:Ct.properties,type:Ct.type,patterns:{}};this.hasPattern?this.features.push(rn("fill-extrusion",this.layers,He,this.zoom,p)):this.addFeature(He,He.geometry,Jt,C,{}),p.featureIndex.insert(Ct,He.geometry,Jt,ve,this.index,!0)}}},Eo.prototype.addFeatures=function(d,p,C){for(var F=0,J=this.features;F<J.length;F+=1){var vt=J[F];this.addFeature(vt,vt.geometry,vt.index,p,C)}},Eo.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Eo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Eo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Eo.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Mi),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},Eo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Eo.prototype.addFeature=function(d,p,C,F,J){for(var vt=0,Ct=Vt(p,500);vt<Ct.length;vt+=1){for(var Bt=Ct[vt],Jt=0,ve=0,Ie=Bt;ve<Ie.length;ve+=1)Jt+=Ie[ve].length;for(var Ue=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),He=0,fn=Bt;He<fn.length;He+=1){var Ln=fn[He];if(Ln.length!==0&&!((Yo=Ln).every(function(go){return go.x<0})||Yo.every(function(go){return go.x>8192})||Yo.every(function(go){return go.y<0})||Yo.every(function(go){return go.y>8192})))for(var On=0,Kn=0;Kn<Ln.length;Kn++){var $n=Ln[Kn];if(Kn>=1){var _r=Ln[Kn-1];if(!Ks($n,_r)){Ue.vertexLength+4>Yt.MAX_VERTEX_ARRAY_LENGTH&&(Ue=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Br=$n.sub(_r)._perp()._unit(),Hr=_r.dist($n);On+Hr>32768&&(On=0),zs(this.layoutVertexArray,$n.x,$n.y,Br.x,Br.y,0,0,On),zs(this.layoutVertexArray,$n.x,$n.y,Br.x,Br.y,0,1,On),zs(this.layoutVertexArray,_r.x,_r.y,Br.x,Br.y,0,0,On+=Hr),zs(this.layoutVertexArray,_r.x,_r.y,Br.x,Br.y,0,1,On);var pi=Ue.vertexLength;this.indexArray.emplaceBack(pi,pi+2,pi+1),this.indexArray.emplaceBack(pi+1,pi+2,pi+3),Ue.vertexLength+=4,Ue.primitiveLength+=2}}}}if(Ue.vertexLength+Jt>Yt.MAX_VERTEX_ARRAY_LENGTH&&(Ue=this.segments.prepareSegment(Jt,this.layoutVertexArray,this.indexArray)),xu[d.type]==="Polygon"){for(var ii=[],Li=[],Ri=Ue.vertexLength,Xi=0,ua=Bt;Xi<ua.length;Xi+=1){var na=ua[Xi];if(na.length!==0){na!==Bt[0]&&Li.push(ii.length/2);for(var Zi=0;Zi<na.length;Zi++){var qa=na[Zi];zs(this.layoutVertexArray,qa.x,qa.y,0,0,1,1,0),ii.push(qa.x),ii.push(qa.y)}}}for(var xa=Oc(ii,Li),la=0;la<xa.length;la+=3)this.indexArray.emplaceBack(Ri+xa[la],Ri+xa[la+2],Ri+xa[la+1]);Ue.primitiveLength+=xa.length/3,Ue.vertexLength+=Jt}}var Yo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,J,F)},Ni("FillExtrusionBucket",Eo,{omit:["layers","features"]});var $u={paint:new gn({"fill-extrusion-opacity":new he(ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Be(ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new he(ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new he(ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ze(ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Be(ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Be(ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new he(ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ys=function(d){function p(C){d.call(this,C,$u)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new Eo(C)},p.prototype.queryRadius=function(){return yu(this.paint.get("fill-extrusion-translate"))},p.prototype.is3D=function(){return!0},p.prototype.queryIntersectsFeature=function(C,F,J,vt,Ct,Bt,Jt,ve){var Ie=Ec(C,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Bt.angle,Jt),Ue=this.paint.get("fill-extrusion-height").evaluate(F,J),He=this.paint.get("fill-extrusion-base").evaluate(F,J),fn=function(On,Kn,$n,_r){for(var Br=[],Hr=0,pi=On;Hr<pi.length;Hr+=1){var ii=pi[Hr],Li=[ii.x,ii.y,0,1];ec(Li,Li,Kn),Br.push(new r(Li[0]/Li[3],Li[1]/Li[3]))}return Br}(Ie,ve),Ln=function(On,Kn,$n,_r){for(var Br=[],Hr=[],pi=_r[8]*Kn,ii=_r[9]*Kn,Li=_r[10]*Kn,Ri=_r[11]*Kn,Xi=_r[8]*$n,ua=_r[9]*$n,na=_r[10]*$n,Zi=_r[11]*$n,qa=0,xa=On;qa<xa.length;qa+=1){for(var la=[],Yo=[],go=0,Es=xa[qa];go<Es.length;go+=1){var Ea=Es[go],Qo=Ea.x,Vu=Ea.y,Fu=_r[0]*Qo+_r[4]*Vu+_r[12],tl=_r[1]*Qo+_r[5]*Vu+_r[13],Tl=_r[2]*Qo+_r[6]*Vu+_r[14],Il=_r[3]*Qo+_r[7]*Vu+_r[15],$l=Tl+Li,Hl=Il+Ri,_c=Fu+Xi,oc=tl+ua,gc=Tl+na,sc=Il+Zi,Eu=new r((Fu+pi)/Hl,(tl+ii)/Hl);Eu.z=$l/Hl,la.push(Eu);var Ql=new r(_c/sc,oc/sc);Ql.z=gc/sc,Yo.push(Ql)}Br.push(la),Hr.push(Yo)}return[Br,Hr]}(vt,He,Ue,ve);return function(On,Kn,$n){var _r=1/0;Sl($n,Kn)&&(_r=$o($n,Kn[0]));for(var Br=0;Br<Kn.length;Br++)for(var Hr=Kn[Br],pi=On[Br],ii=0;ii<Hr.length-1;ii++){var Li=Hr[ii],Ri=[Li,Hr[ii+1],pi[ii+1],pi[ii],Li];lc($n,Ri)&&(_r=Math.min(_r,$o($n,Ri)))}return _r!==1/0&&_r}(Ln[0],Ln[1],fn)},p}(vn);function Is(d,p){return d.x*p.x+d.y*p.y}function $o(d,p){if(d.length===1){for(var C,F=0,J=p[F++];!C||J.equals(C);)if(!(C=p[F++]))return 1/0;for(;F<p.length;F++){var vt=p[F],Ct=d[0],Bt=C.sub(J),Jt=vt.sub(J),ve=Ct.sub(J),Ie=Is(Bt,Bt),Ue=Is(Bt,Jt),He=Is(Jt,Jt),fn=Is(ve,Bt),Ln=Is(ve,Jt),On=Ie*He-Ue*Ue,Kn=(He*fn-Ue*Ln)/On,$n=(Ie*Ln-Ue*fn)/On,_r=J.z*(1-Kn-$n)+C.z*Kn+vt.z*$n;if(isFinite(_r))return _r}return 1/0}for(var Br=1/0,Hr=0,pi=p;Hr<pi.length;Hr+=1)Br=Math.min(Br,pi[Hr].z);return Br}var hl=Hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ic=Hn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,jc=Ys.VectorTileFeature.types,Kc=Math.cos(Math.PI/180*37.5),tf=Math.pow(2,14)/.5,Xl=function(p){var C=this;this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(F){C.gradients[F.id]={}}),this.layoutVertexArray=new Fr,this.layoutVertexArray2=new ai,this.indexArray=new to,this.programConfigurations=new Ca(p.layers,p.zoom),this.segments=new Yt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};Xl.prototype.populate=function(d,p,C){this.hasPattern=ze("line",this.layers,p);for(var F=this.layers[0].layout.get("line-sort-key"),J=[],vt=0,Ct=d;vt<Ct.length;vt+=1){var Bt=Ct[vt],Jt=Bt.feature,ve=Bt.id,Ie=Bt.index,Ue=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,fn=Ps(Jt,He);if(this.layers[0]._featureFilter.filter(new br(this.zoom),fn,C)){var Ln=F?F.evaluate(fn,{},C):void 0,On={id:ve,properties:Jt.properties,type:Jt.type,sourceLayerIndex:Ue,index:Ie,geometry:He?fn.geometry:jo(Jt),patterns:{},sortKey:Ln};J.push(On)}}F&&J.sort(function(Li,Ri){return Li.sortKey-Ri.sortKey});for(var Kn=0,$n=J;Kn<$n.length;Kn+=1){var _r=$n[Kn],Br=_r.geometry,Hr=_r.index,pi=_r.sourceLayerIndex;if(this.hasPattern){var ii=rn("line",this.layers,_r,this.zoom,p);this.patternFeatures.push(ii)}else this.addFeature(_r,Br,Hr,C,{});p.featureIndex.insert(d[Hr].feature,Br,Hr,pi,this.index)}},Xl.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Xl.prototype.addFeatures=function(d,p,C){for(var F=0,J=this.patternFeatures;F<J.length;F+=1){var vt=J[F];this.addFeature(vt,vt.geometry,vt.index,p,C)}},Xl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xl.prototype.upload=function(d){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=d.createVertexBuffer(this.layoutVertexArray2,Ic)),this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,hl),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},Xl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xl.prototype.lineFeatureClips=function(d){if(d.properties&&d.properties.hasOwnProperty("mapbox_clip_start")&&d.properties.hasOwnProperty("mapbox_clip_end"))return{start:+d.properties.mapbox_clip_start,end:+d.properties.mapbox_clip_end}},Xl.prototype.addFeature=function(d,p,C,F,J){var vt=this.layers[0].layout,Ct=vt.get("line-join").evaluate(d,{}),Bt=vt.get("line-cap"),Jt=vt.get("line-miter-limit"),ve=vt.get("line-round-limit");this.lineClips=this.lineFeatureClips(d);for(var Ie=0,Ue=p;Ie<Ue.length;Ie+=1)this.addLine(Ue[Ie],d,Ct,Bt,Jt,ve);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,J,F)},Xl.prototype.addLine=function(d,p,C,F,J,vt){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Ct=0;Ct<d.length-1;Ct++)this.totalDistance+=d[Ct].dist(d[Ct+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Bt=jc[p.type]==="Polygon",Jt=d.length;Jt>=2&&d[Jt-1].equals(d[Jt-2]);)Jt--;for(var ve=0;ve<Jt-1&&d[ve].equals(d[ve+1]);)ve++;if(!(Jt<(Bt?3:2))){C==="bevel"&&(J=1.05);var Ie,Ue=this.overscaling<=16?122880/(512*this.overscaling):0,He=this.segments.prepareSegment(10*Jt,this.layoutVertexArray,this.indexArray),fn=void 0,Ln=void 0,On=void 0,Kn=void 0;this.e1=this.e2=-1,Bt&&(Kn=d[ve].sub(Ie=d[Jt-2])._unit()._perp());for(var $n=ve;$n<Jt;$n++)if(!(Ln=$n===Jt-1?Bt?d[ve+1]:void 0:d[$n+1])||!d[$n].equals(Ln)){Kn&&(On=Kn),Ie&&(fn=Ie),Ie=d[$n],Kn=Ln?Ln.sub(Ie)._unit()._perp():On;var _r=(On=On||Kn).add(Kn);_r.x===0&&_r.y===0||_r._unit();var Br=On.x*Kn.x+On.y*Kn.y,Hr=_r.x*Kn.x+_r.y*Kn.y,pi=Hr!==0?1/Hr:1/0,ii=2*Math.sqrt(2-2*Hr),Li=Hr<Kc&&fn&&Ln,Ri=On.x*Kn.y-On.y*Kn.x>0;if(Li&&$n>ve){var Xi=Ie.dist(fn);if(Xi>2*Ue){var ua=Ie.sub(Ie.sub(fn)._mult(Ue/Xi)._round());this.updateDistance(fn,ua),this.addCurrentVertex(ua,On,0,0,He),fn=ua}}var na=fn&&Ln,Zi=na?C:Bt?"butt":F;if(na&&Zi==="round"&&(pi<vt?Zi="miter":pi<=2&&(Zi="fakeround")),Zi==="miter"&&pi>J&&(Zi="bevel"),Zi==="bevel"&&(pi>2&&(Zi="flipbevel"),pi<J&&(Zi="miter")),fn&&this.updateDistance(fn,Ie),Zi==="miter")_r._mult(pi),this.addCurrentVertex(Ie,_r,0,0,He);else if(Zi==="flipbevel"){if(pi>100)_r=Kn.mult(-1);else{var qa=pi*On.add(Kn).mag()/On.sub(Kn).mag();_r._perp()._mult(qa*(Ri?-1:1))}this.addCurrentVertex(Ie,_r,0,0,He),this.addCurrentVertex(Ie,_r.mult(-1),0,0,He)}else if(Zi==="bevel"||Zi==="fakeround"){var xa=-Math.sqrt(pi*pi-1),la=Ri?xa:0,Yo=Ri?0:xa;if(fn&&this.addCurrentVertex(Ie,On,la,Yo,He),Zi==="fakeround")for(var go=Math.round(180*ii/Math.PI/20),Es=1;Es<go;Es++){var Ea=Es/go;if(Ea!==.5){var Qo=Ea-.5;Ea+=Ea*Qo*(Ea-1)*((1.0904+Br*(Br*(3.55645-1.43519*Br)-3.2452))*Qo*Qo+(.848013+Br*(.215638*Br-1.06021)))}var Vu=Kn.sub(On)._mult(Ea)._add(On)._unit()._mult(Ri?-1:1);this.addHalfVertex(Ie,Vu.x,Vu.y,!1,Ri,0,He)}Ln&&this.addCurrentVertex(Ie,Kn,-la,-Yo,He)}else if(Zi==="butt")this.addCurrentVertex(Ie,_r,0,0,He);else if(Zi==="square"){var Fu=fn?1:-1;this.addCurrentVertex(Ie,_r,Fu,Fu,He)}else Zi==="round"&&(fn&&(this.addCurrentVertex(Ie,On,0,0,He),this.addCurrentVertex(Ie,On,1,1,He,!0)),Ln&&(this.addCurrentVertex(Ie,Kn,-1,-1,He,!0),this.addCurrentVertex(Ie,Kn,0,0,He)));if(Li&&$n<Jt-1){var tl=Ie.dist(Ln);if(tl>2*Ue){var Tl=Ie.add(Ln.sub(Ie)._mult(Ue/tl)._round());this.updateDistance(Ie,Tl),this.addCurrentVertex(Tl,Kn,0,0,He),Ie=Tl}}}}},Xl.prototype.addCurrentVertex=function(d,p,C,F,J,vt){vt===void 0&&(vt=!1);var Ct=p.y*F-p.x,Bt=-p.y-p.x*F;this.addHalfVertex(d,p.x+p.y*C,p.y-p.x*C,vt,!1,C,J),this.addHalfVertex(d,Ct,Bt,vt,!0,-F,J),this.distance>tf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(d,p,C,F,J,vt))},Xl.prototype.addHalfVertex=function(d,p,C,F,J,vt,Ct){var Bt=.5*(this.lineClips?this.scaledDistance*(tf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((d.x<<1)+(F?1:0),(d.y<<1)+(J?1:0),Math.round(63*p)+128,Math.round(63*C)+128,1+(vt===0?0:vt<0?-1:1)|(63&Bt)<<2,Bt>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Jt=Ct.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Jt),Ct.primitiveLength++),J?this.e2=Jt:this.e1=Jt},Xl.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Xl.prototype.updateDistance=function(d,p){this.distance+=d.dist(p),this.updateScaledDistance()},Ni("LineBucket",Xl,{omit:["layers","patternFeatures"]});var $f=new gn({"line-cap":new he(ae.layout_line["line-cap"]),"line-join":new Be(ae.layout_line["line-join"]),"line-miter-limit":new he(ae.layout_line["line-miter-limit"]),"line-round-limit":new he(ae.layout_line["line-round-limit"]),"line-sort-key":new Be(ae.layout_line["line-sort-key"])}),Hf={paint:new gn({"line-opacity":new Be(ae.paint_line["line-opacity"]),"line-color":new Be(ae.paint_line["line-color"]),"line-translate":new he(ae.paint_line["line-translate"]),"line-translate-anchor":new he(ae.paint_line["line-translate-anchor"]),"line-width":new Be(ae.paint_line["line-width"]),"line-gap-width":new Be(ae.paint_line["line-gap-width"]),"line-offset":new Be(ae.paint_line["line-offset"]),"line-blur":new Be(ae.paint_line["line-blur"]),"line-dasharray":new on(ae.paint_line["line-dasharray"]),"line-pattern":new Ze(ae.paint_line["line-pattern"]),"line-gradient":new $e(ae.paint_line["line-gradient"])}),layout:$f},_f=new(function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,F){return F=new br(Math.floor(F.zoom),{now:F.now,fadeDuration:F.fadeDuration,zoomHistory:F.zoomHistory,transition:F.transition}),d.prototype.possiblyEvaluate.call(this,C,F)},p.prototype.evaluate=function(C,F,J,vt){return F=v({},F,{zoom:Math.floor(F.zoom)}),d.prototype.evaluate.call(this,C,F,J,vt)},p}(Be))(Hf.paint.properties["line-width"].specification);_f.useIntegerZoom=!0;var nc=function(d){function p(C){d.call(this,C,Hf),this.gradientVersion=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof mo,this.gradientVersion=(this.gradientVersion+1)%i)},p.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},p.prototype.recalculate=function(C,F){d.prototype.recalculate.call(this,C,F),this.paint._values["line-floorwidth"]=_f.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,C)},p.prototype.createBucket=function(C){return new Xl(C)},p.prototype.queryRadius=function(C){var F=C,J=Yf(ic("line-width",this,F),ic("line-gap-width",this,F)),vt=ic("line-offset",this,F);return J/2+Math.abs(vt)+yu(this.paint.get("line-translate"))},p.prototype.queryIntersectsFeature=function(C,F,J,vt,Ct,Bt,Jt){var ve=Ec(C,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Bt.angle,Jt),Ie=Jt/2*Yf(this.paint.get("line-width").evaluate(F,J),this.paint.get("line-gap-width").evaluate(F,J)),Ue=this.paint.get("line-offset").evaluate(F,J);return Ue&&(vt=function(He,fn){for(var Ln=[],On=new r(0,0),Kn=0;Kn<He.length;Kn++){for(var $n=He[Kn],_r=[],Br=0;Br<$n.length;Br++){var Hr=$n[Br],pi=$n[Br+1],ii=Br===0?On:Hr.sub($n[Br-1])._unit()._perp(),Li=Br===$n.length-1?On:pi.sub(Hr)._unit()._perp(),Ri=ii._add(Li)._unit();Ri._mult(1/(Ri.x*Li.x+Ri.y*Li.y)),_r.push(Ri._mult(fn)._add(Hr))}Ln.push(_r)}return Ln}(vt,Ue*Jt)),function(He,fn,Ln){for(var On=0;On<fn.length;On++){var Kn=fn[On];if(He.length>=3){for(var $n=0;$n<Kn.length;$n++)if(fc(He,Kn[$n]))return!0}if(_l(He,Kn,Ln))return!0}return!1}(ve,vt,Ie)},p.prototype.isTileClipped=function(){return!0},p}(vn);function Yf(d,p){return p>0?p+2*d:d}var Mf=Hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mh=Hn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Pf=(Hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),uh=(Hn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),zh=Hn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zf(d,p,C){return d.sections.forEach(function(F){F.text=function(J,vt,Ct){var Bt=vt.layout.get("text-transform").evaluate(Ct,{});return Bt==="uppercase"?J=J.toLocaleUpperCase():Bt==="lowercase"&&(J=J.toLocaleLowerCase()),hi.applyArabicShaping&&(J=hi.applyArabicShaping(J)),J}(F.text,p,C)}),d}Hn([{name:"triangle",components:3,type:"Uint16"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Hn([{type:"Float32",name:"offsetX"}]),Hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Bc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Rf=function(p,C,F,J,vt){var Ct,Bt,Jt=8*vt-J-1,ve=(1<<Jt)-1,Ie=ve>>1,Ue=-7,He=F?vt-1:0,fn=F?-1:1,Ln=p[C+He];for(He+=fn,Ct=Ln&(1<<-Ue)-1,Ln>>=-Ue,Ue+=Jt;Ue>0;Ct=256*Ct+p[C+He],He+=fn,Ue-=8);for(Bt=Ct&(1<<-Ue)-1,Ct>>=-Ue,Ue+=J;Ue>0;Bt=256*Bt+p[C+He],He+=fn,Ue-=8);if(Ct===0)Ct=1-Ie;else{if(Ct===ve)return Bt?NaN:1/0*(Ln?-1:1);Bt+=Math.pow(2,J),Ct-=Ie}return(Ln?-1:1)*Bt*Math.pow(2,Ct-J)},Fe=function(p,C,F,J,vt,Ct){var Bt,Jt,ve,Ie=8*Ct-vt-1,Ue=(1<<Ie)-1,He=Ue>>1,fn=vt===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ln=J?0:Ct-1,On=J?1:-1,Kn=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Jt=isNaN(C)?1:0,Bt=Ue):(Bt=Math.floor(Math.log(C)/Math.LN2),C*(ve=Math.pow(2,-Bt))<1&&(Bt--,ve*=2),(C+=Bt+He>=1?fn/ve:fn*Math.pow(2,1-He))*ve>=2&&(Bt++,ve/=2),Bt+He>=Ue?(Jt=0,Bt=Ue):Bt+He>=1?(Jt=(C*ve-1)*Math.pow(2,vt),Bt+=He):(Jt=C*Math.pow(2,He-1)*Math.pow(2,vt),Bt=0));vt>=8;p[F+Ln]=255&Jt,Ln+=On,Jt/=256,vt-=8);for(Bt=Bt<<vt|Jt,Ie+=vt;Ie>0;p[F+Ln]=255&Bt,Ln+=On,Bt/=256,Ie-=8);p[F+Ln-On]|=128*Kn},lt=nt;function nt(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}nt.Varint=0,nt.Fixed64=1,nt.Bytes=2,nt.Fixed32=5;var W=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ct(d){return d.type===nt.Bytes?d.readVarint()+d.pos:d.pos+1}function Et(d,p,C){return C?4294967296*p+(d>>>0):4294967296*(p>>>0)+(d>>>0)}function Ut(d,p,C){var F=p<=16383?1:p<=2097151?2:p<=268435455?3:Math.floor(Math.log(p)/(7*Math.LN2));C.realloc(F);for(var J=C.pos-1;J>=d;J--)C.buf[J+F]=C.buf[J]}function fe(d,p){for(var C=0;C<d.length;C++)p.writeVarint(d[C])}function Ve(d,p){for(var C=0;C<d.length;C++)p.writeSVarint(d[C])}function Ge(d,p){for(var C=0;C<d.length;C++)p.writeFloat(d[C])}function Ke(d,p){for(var C=0;C<d.length;C++)p.writeDouble(d[C])}function Rn(d,p){for(var C=0;C<d.length;C++)p.writeBoolean(d[C])}function ur(d,p){for(var C=0;C<d.length;C++)p.writeFixed32(d[C])}function rr(d,p){for(var C=0;C<d.length;C++)p.writeSFixed32(d[C])}function lr(d,p){for(var C=0;C<d.length;C++)p.writeFixed64(d[C])}function Zn(d,p){for(var C=0;C<d.length;C++)p.writeSFixed64(d[C])}function qn(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+16777216*d[p+3]}function kr(d,p,C){d[C]=p,d[C+1]=p>>>8,d[C+2]=p>>>16,d[C+3]=p>>>24}function ti(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+(d[p+3]<<24)}function Ir(d,p,C){d===1&&C.readMessage(Ci,p)}function Ci(d,p,C){if(d===3){var F=C.readMessage(ni,{}),J=F.width,vt=F.height,Ct=F.left,Bt=F.top,Jt=F.advance;p.push({id:F.id,bitmap:new jl({width:J+6,height:vt+6},F.bitmap),metrics:{width:J,height:vt,left:Ct,top:Bt,advance:Jt}})}}function ni(d,p,C){d===1?p.id=C.readVarint():d===2?p.bitmap=C.readBytes():d===3?p.width=C.readVarint():d===4?p.height=C.readVarint():d===5?p.left=C.readSVarint():d===6?p.top=C.readSVarint():d===7&&(p.advance=C.readVarint())}function qr(d){for(var p=0,C=0,F=0,J=d;F<J.length;F+=1){var vt=J[F];p+=vt.w*vt.h,C=Math.max(C,vt.w)}d.sort(function(On,Kn){return Kn.h-On.h});for(var Ct=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),C),h:1/0}],Bt=0,Jt=0,ve=0,Ie=d;ve<Ie.length;ve+=1)for(var Ue=Ie[ve],He=Ct.length-1;He>=0;He--){var fn=Ct[He];if(!(Ue.w>fn.w||Ue.h>fn.h)){if(Ue.x=fn.x,Ue.y=fn.y,Jt=Math.max(Jt,Ue.y+Ue.h),Bt=Math.max(Bt,Ue.x+Ue.w),Ue.w===fn.w&&Ue.h===fn.h){var Ln=Ct.pop();He<Ct.length&&(Ct[He]=Ln)}else Ue.h===fn.h?(fn.x+=Ue.w,fn.w-=Ue.w):Ue.w===fn.w?(fn.y+=Ue.h,fn.h-=Ue.h):(Ct.push({x:fn.x+Ue.w,y:fn.y,w:fn.w-Ue.w,h:Ue.h}),fn.y+=Ue.h,fn.h-=Ue.h);break}}return{w:Bt,h:Jt,fill:p/(Bt*Jt)||0}}nt.prototype={destroy:function(){this.buf=null},readFields:function(p,C,F){for(F=F||this.length;this.pos<F;){var J=this.readVarint(),vt=J>>3,Ct=this.pos;this.type=7&J,p(vt,C,this),this.pos===Ct&&this.skip(J)}return C},readMessage:function(p,C){return this.readFields(p,C,this.readVarint()+this.pos)},readFixed32:function(){var p=qn(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=ti(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=qn(this.buf,this.pos)+4294967296*qn(this.buf,this.pos+4);return this.pos+=8,p},readSFixed64:function(){var p=qn(this.buf,this.pos)+4294967296*ti(this.buf,this.pos+4);return this.pos+=8,p},readFloat:function(){var p=Rf(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=Rf(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var C,F,J=this.buf;return C=127&(F=J[this.pos++]),F<128?C:(C|=(127&(F=J[this.pos++]))<<7,F<128?C:(C|=(127&(F=J[this.pos++]))<<14,F<128?C:(C|=(127&(F=J[this.pos++]))<<21,F<128?C:function(vt,Ct,Bt){var Jt,ve,Ie=Bt.buf;if(Jt=(112&(ve=Ie[Bt.pos++]))>>4,ve<128||(Jt|=(127&(ve=Ie[Bt.pos++]))<<3,ve<128)||(Jt|=(127&(ve=Ie[Bt.pos++]))<<10,ve<128)||(Jt|=(127&(ve=Ie[Bt.pos++]))<<17,ve<128)||(Jt|=(127&(ve=Ie[Bt.pos++]))<<24,ve<128)||(Jt|=(1&(ve=Ie[Bt.pos++]))<<31,ve<128))return Et(vt,Jt,Ct);throw new Error("Expected varint not more than 10 bytes")}(C|=(15&(F=J[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var p=this.readVarint()+this.pos,C=this.pos;return this.pos=p,p-C>=12&&W?function(F,J,vt){return W.decode(F.subarray(J,vt))}(this.buf,C,p):function(F,J,vt){for(var Ct="",Bt=J;Bt<vt;){var Jt,ve,Ie,Ue=F[Bt],He=null,fn=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Bt+fn>vt)break;fn===1?Ue<128&&(He=Ue):fn===2?(192&(Jt=F[Bt+1]))==128&&(He=(31&Ue)<<6|63&Jt)<=127&&(He=null):fn===3?(ve=F[Bt+2],(192&(Jt=F[Bt+1]))==128&&(192&ve)==128&&((He=(15&Ue)<<12|(63&Jt)<<6|63&ve)<=2047||He>=55296&&He<=57343)&&(He=null)):fn===4&&(ve=F[Bt+2],Ie=F[Bt+3],(192&(Jt=F[Bt+1]))==128&&(192&ve)==128&&(192&Ie)==128&&((He=(15&Ue)<<18|(63&Jt)<<12|(63&ve)<<6|63&Ie)<=65535||He>=1114112)&&(He=null)),He===null?(He=65533,fn=1):He>65535&&(He-=65536,Ct+=String.fromCharCode(He>>>10&1023|55296),He=56320|1023&He),Ct+=String.fromCharCode(He),Bt+=fn}return Ct}(this.buf,C,p)},readBytes:function(){var p=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,p);return this.pos=p,C},readPackedVarint:function(p,C){if(this.type!==nt.Bytes)return p.push(this.readVarint(C));var F=ct(this);for(p=p||[];this.pos<F;)p.push(this.readVarint(C));return p},readPackedSVarint:function(p){if(this.type!==nt.Bytes)return p.push(this.readSVarint());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==nt.Bytes)return p.push(this.readBoolean());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==nt.Bytes)return p.push(this.readFloat());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==nt.Bytes)return p.push(this.readDouble());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==nt.Bytes)return p.push(this.readFixed32());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==nt.Bytes)return p.push(this.readSFixed32());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==nt.Bytes)return p.push(this.readFixed64());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==nt.Bytes)return p.push(this.readSFixed64());var C=ct(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed64());return p},skip:function(p){var C=7&p;if(C===nt.Varint)for(;this.buf[this.pos++]>127;);else if(C===nt.Bytes)this.pos=this.readVarint()+this.pos;else if(C===nt.Fixed32)this.pos+=4;else{if(C!==nt.Fixed64)throw new Error("Unimplemented type: "+C);this.pos+=8}},writeTag:function(p,C){this.writeVarint(p<<3|C)},realloc:function(p){for(var C=this.length||16;C<this.pos+p;)C*=2;if(C!==this.length){var F=new Uint8Array(C);F.set(this.buf),this.buf=F,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),kr(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),kr(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),kr(this.buf,-1&p,this.pos),kr(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),kr(this.buf,-1&p,this.pos),kr(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(C,F){var J,vt;if(C>=0?(J=C%4294967296|0,vt=C/4294967296|0):(vt=~(-C/4294967296),4294967295^(J=~(-C%4294967296))?J=J+1|0:(J=0,vt=vt+1|0)),C>=18446744073709552e3||C<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");F.realloc(10),function(Ct,Bt,Jt){Jt.buf[Jt.pos++]=127&Ct|128,Ct>>>=7,Jt.buf[Jt.pos++]=127&Ct|128,Ct>>>=7,Jt.buf[Jt.pos++]=127&Ct|128,Ct>>>=7,Jt.buf[Jt.pos++]=127&Ct|128,Jt.buf[Jt.pos]=127&(Ct>>>=7)}(J,0,F),function(Ct,Bt){var Jt=(7&Ct)<<4;Bt.buf[Bt.pos++]|=Jt|((Ct>>>=3)?128:0),Ct&&(Bt.buf[Bt.pos++]=127&Ct|((Ct>>>=7)?128:0),Ct&&(Bt.buf[Bt.pos++]=127&Ct|((Ct>>>=7)?128:0),Ct&&(Bt.buf[Bt.pos++]=127&Ct|((Ct>>>=7)?128:0),Ct&&(Bt.buf[Bt.pos++]=127&Ct|((Ct>>>=7)?128:0),Ct&&(Bt.buf[Bt.pos++]=127&Ct)))))}(vt,F)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(Boolean(p))},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var C=this.pos;this.pos=function(J,vt,Ct){for(var Bt,Jt,ve=0;ve<vt.length;ve++){if((Bt=vt.charCodeAt(ve))>55295&&Bt<57344){if(!Jt){Bt>56319||ve+1===vt.length?(J[Ct++]=239,J[Ct++]=191,J[Ct++]=189):Jt=Bt;continue}if(Bt<56320){J[Ct++]=239,J[Ct++]=191,J[Ct++]=189,Jt=Bt;continue}Bt=Jt-55296<<10|Bt-56320|65536,Jt=null}else Jt&&(J[Ct++]=239,J[Ct++]=191,J[Ct++]=189,Jt=null);Bt<128?J[Ct++]=Bt:(Bt<2048?J[Ct++]=Bt>>6|192:(Bt<65536?J[Ct++]=Bt>>12|224:(J[Ct++]=Bt>>18|240,J[Ct++]=Bt>>12&63|128),J[Ct++]=Bt>>6&63|128),J[Ct++]=63&Bt|128)}return Ct}(this.buf,p,this.pos);var F=this.pos-C;F>=128&&Ut(C,F,this),this.pos=C-1,this.writeVarint(F),this.pos+=F},writeFloat:function(p){this.realloc(4),Fe(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),Fe(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var C=p.length;this.writeVarint(C),this.realloc(C);for(var F=0;F<C;F++)this.buf[this.pos++]=p[F]},writeRawMessage:function(p,C){this.pos++;var F=this.pos;p(C,this);var J=this.pos-F;J>=128&&Ut(F,J,this),this.pos=F-1,this.writeVarint(J),this.pos+=J},writeMessage:function(p,C,F){this.writeTag(p,nt.Bytes),this.writeRawMessage(C,F)},writePackedVarint:function(p,C){C.length&&this.writeMessage(p,fe,C)},writePackedSVarint:function(p,C){C.length&&this.writeMessage(p,Ve,C)},writePackedBoolean:function(p,C){C.length&&this.writeMessage(p,Rn,C)},writePackedFloat:function(p,C){C.length&&this.writeMessage(p,Ge,C)},writePackedDouble:function(p,C){C.length&&this.writeMessage(p,Ke,C)},writePackedFixed32:function(p,C){C.length&&this.writeMessage(p,ur,C)},writePackedSFixed32:function(p,C){C.length&&this.writeMessage(p,rr,C)},writePackedFixed64:function(p,C){C.length&&this.writeMessage(p,lr,C)},writePackedSFixed64:function(p,C){C.length&&this.writeMessage(p,Zn,C)},writeBytesField:function(p,C){this.writeTag(p,nt.Bytes),this.writeBytes(C)},writeFixed32Field:function(p,C){this.writeTag(p,nt.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(p,C){this.writeTag(p,nt.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(p,C){this.writeTag(p,nt.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(p,C){this.writeTag(p,nt.Fixed64),this.writeSFixed64(C)},writeVarintField:function(p,C){this.writeTag(p,nt.Varint),this.writeVarint(C)},writeSVarintField:function(p,C){this.writeTag(p,nt.Varint),this.writeSVarint(C)},writeStringField:function(p,C){this.writeTag(p,nt.Bytes),this.writeString(C)},writeFloatField:function(p,C){this.writeTag(p,nt.Fixed32),this.writeFloat(C)},writeDoubleField:function(p,C){this.writeTag(p,nt.Fixed64),this.writeDouble(C)},writeBooleanField:function(p,C){this.writeVarintField(p,Boolean(C))}};var Qr=function(p,C){var F=C.pixelRatio,J=C.version,vt=C.stretchX,Ct=C.stretchY,Bt=C.content;this.paddedRect=p,this.pixelRatio=F,this.stretchX=vt,this.stretchY=Ct,this.content=Bt,this.version=J},oi={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};oi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},oi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},oi.tlbr.get=function(){return this.tl.concat(this.br)},oi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Qr.prototype,oi);var Ii=function(p,C){var F={},J={};this.haveRenderCallbacks=[];var vt=[];this.addImages(p,F,vt),this.addImages(C,J,vt);var Ct=qr(vt),Bt=new Bu({width:Ct.w||1,height:Ct.h||1});for(var Jt in p){var ve=p[Jt],Ie=F[Jt].paddedRect;Bu.copy(ve.data,Bt,{x:0,y:0},{x:Ie.x+1,y:Ie.y+1},ve.data)}for(var Ue in C){var He=C[Ue],fn=J[Ue].paddedRect,Ln=fn.x+1,On=fn.y+1,Kn=He.data.width,$n=He.data.height;Bu.copy(He.data,Bt,{x:0,y:0},{x:Ln,y:On},He.data),Bu.copy(He.data,Bt,{x:0,y:$n-1},{x:Ln,y:On-1},{width:Kn,height:1}),Bu.copy(He.data,Bt,{x:0,y:0},{x:Ln,y:On+$n},{width:Kn,height:1}),Bu.copy(He.data,Bt,{x:Kn-1,y:0},{x:Ln-1,y:On},{width:1,height:$n}),Bu.copy(He.data,Bt,{x:0,y:0},{x:Ln+Kn,y:On},{width:1,height:$n})}this.image=Bt,this.iconPositions=F,this.patternPositions=J};Ii.prototype.addImages=function(d,p,C){for(var F in d){var J=d[F],vt={x:0,y:0,w:J.data.width+2,h:J.data.height+2};C.push(vt),p[F]=new Qr(vt,J),J.hasRenderCallback&&this.haveRenderCallbacks.push(F)}},Ii.prototype.patchUpdatedImages=function(d,p){for(var C in d.dispatchRenderCallbacks(this.haveRenderCallbacks),d.updatedImages)this.patchUpdatedImage(this.iconPositions[C],d.getImage(C),p),this.patchUpdatedImage(this.patternPositions[C],d.getImage(C),p)},Ii.prototype.patchUpdatedImage=function(d,p,C){if(d&&p&&d.version!==p.version){d.version=p.version;var F=d.tl;C.update(p.data,void 0,{x:F[0],y:F[1]})}},Ni("ImagePosition",Qr),Ni("ImageAtlas",Ii);var ki={horizontal:1,vertical:2,horizontalOnly:3},xi=function(){this.scale=1,this.fontStack="",this.imageName=null};xi.forText=function(d,p){var C=new xi;return C.scale=d||1,C.fontStack=p,C},xi.forImage=function(d){var p=new xi;return p.imageName=d,p};var di=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ui(d,p,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On){var Kn,$n=di.fromFeature(d,J);Ue===ki.vertical&&$n.verticalizePunctuation();var _r=hi.processBidirectionalText,Br=hi.processStyledBidirectionalText;if(_r&&$n.sections.length===1){Kn=[];for(var Hr=0,pi=_r($n.toString(),Io($n,ve,vt,p,F,fn,Ln));Hr<pi.length;Hr+=1){var ii=pi[Hr],Li=new di;Li.text=ii,Li.sections=$n.sections;for(var Ri=0;Ri<ii.length;Ri++)Li.sectionIndex.push(0);Kn.push(Li)}}else if(Br){Kn=[];for(var Xi=0,ua=Br($n.text,$n.sectionIndex,Io($n,ve,vt,p,F,fn,Ln));Xi<ua.length;Xi+=1){var na=ua[Xi],Zi=new di;Zi.text=na[0],Zi.sectionIndex=na[1],Zi.sections=$n.sections,Kn.push(Zi)}}else Kn=function(la,Yo){for(var go=[],Es=la.text,Ea=0,Qo=0,Vu=Yo;Qo<Vu.length;Qo+=1){var Fu=Vu[Qo];go.push(la.substring(Ea,Fu)),Ea=Fu}return Ea<Es.length&&go.push(la.substring(Ea,Es.length)),go}($n,Io($n,ve,vt,p,F,fn,Ln));var qa=[],xa={positionedLines:qa,text:$n.toString(),top:Ie[1],bottom:Ie[1],left:Ie[0],right:Ie[0],writingMode:Ue,iconsInText:!1,verticalizable:!1};return function(la,Yo,go,Es,Ea,Qo,Vu,Fu,tl,Tl,Il,$l){for(var Hl=0,_c=-17,oc=0,gc=0,sc=Fu==="right"?1:Fu==="left"?0:.5,Eu=0,Ql=0,as=Ea;Ql<as.length;Ql+=1){var Zo=as[Ql];Zo.trim();var su=Zo.getMaxScale(),uu=24*(su-1),mc={positionedGlyphs:[],lineOffset:0};la.positionedLines[Eu]=mc;var Nu=mc.positionedGlyphs,el=0;if(Zo.length()){for(var yc=0;yc<Zo.length();yc++){var os=Zo.getSection(yc),jf=Zo.getSectionIndex(yc),Wc=Zo.getCharCode(yc),nf=0,Nc=null,uc=null,rf=null,Af=24,Cf=!(tl===ki.horizontal||!Il&&!Du(Wc)||Il&&(da[Wc]||(Bf=Wc,mi.Arabic(Bf)||mi["Arabic Supplement"](Bf)||mi["Arabic Extended-A"](Bf)||mi["Arabic Presentation Forms-A"](Bf)||mi["Arabic Presentation Forms-B"](Bf))));if(os.imageName){var dh=Es[os.imageName];if(!dh)continue;rf=os.imageName,la.iconsInText=la.iconsInText||!0,uc=dh.paddedRect;var vf=dh.displaySize;os.scale=24*os.scale/$l,nf=uu+(24-vf[1]*os.scale),Af=(Nc={width:vf[0],height:vf[1],left:1,top:-3,advance:Cf?vf[1]:vf[0]}).advance;var Th=Cf?vf[0]*os.scale-24*su:vf[1]*os.scale-24*su;Th>0&&Th>el&&(el=Th)}else{var Ah=go[os.fontStack],eh=Ah&&Ah[Wc];if(eh&&eh.rect)uc=eh.rect,Nc=eh.metrics;else{var Ch=Yo[os.fontStack],Oh=Ch&&Ch[Wc];if(!Oh)continue;Nc=Oh.metrics}nf=24*(su-os.scale)}Cf?(la.verticalizable=!0,Nu.push({glyph:Wc,imageName:rf,x:Hl,y:_c+nf,vertical:Cf,scale:os.scale,fontStack:os.fontStack,sectionIndex:jf,metrics:Nc,rect:uc}),Hl+=Af*os.scale+Tl):(Nu.push({glyph:Wc,imageName:rf,x:Hl,y:_c+nf,vertical:Cf,scale:os.scale,fontStack:os.fontStack,sectionIndex:jf,metrics:Nc,rect:uc}),Hl+=Nc.advance*os.scale+Tl)}Nu.length!==0&&(oc=Math.max(Hl-Tl,oc),Bl(Nu,0,Nu.length-1,sc,el)),Hl=0;var wh=Qo*su+el;mc.lineOffset=Math.max(el,uu),_c+=wh,gc=Math.max(wh,gc),++Eu}else _c+=Qo,++Eu}var Bf,vh=_c- -17,Ih=ou(Vu),nh=Ih.horizontalAlign,Ff=Ih.verticalAlign;(function(Nf,Lh,Gh,ph,Vh,id,gh,Wh,mh){var yh,Jf=(Lh-Gh)*Vh;yh=id!==gh?-Wh*ph- -17:(-ph*mh+.5)*gh;for(var xh=0,bh=Nf;xh<bh.length;xh+=1)for(var rh=0,ih=bh[xh].positionedGlyphs;rh<ih.length;rh+=1){var ah=ih[rh];ah.x+=Jf,ah.y+=yh}})(la.positionedLines,sc,nh,Ff,oc,gc,Qo,vh,Ea.length),la.top+=-Ff*vh,la.bottom=la.top+vh,la.left+=-nh*oc,la.right=la.left+oc}(xa,p,C,F,Kn,Ct,Bt,Jt,Ue,ve,He,On),!function(la){for(var Yo=0,go=la;Yo<go.length;Yo+=1)if(go[Yo].positionedGlyphs.length!==0)return!1;return!0}(qa)&&xa}di.fromFeature=function(d,p){for(var C=new di,F=0;F<d.sections.length;F++){var J=d.sections[F];J.image?C.addImageSection(J):C.addTextSection(J,p)}return C},di.prototype.length=function(){return this.text.length},di.prototype.getSection=function(d){return this.sections[this.sectionIndex[d]]},di.prototype.getSectionIndex=function(d){return this.sectionIndex[d]},di.prototype.getCharCode=function(d){return this.text.charCodeAt(d)},di.prototype.verticalizePunctuation=function(){this.text=function(d){for(var p="",C=0;C<d.length;C++){var F=d.charCodeAt(C+1)||null,J=d.charCodeAt(C-1)||null;p+=F&&ju(F)&&!Bc[d[C+1]]||J&&ju(J)&&!Bc[d[C-1]]||!Bc[d[C]]?d[C]:Bc[d[C]]}return p}(this.text)},di.prototype.trim=function(){for(var d=0,p=0;p<this.text.length&&da[this.text.charCodeAt(p)];p++)d++;for(var C=this.text.length,F=this.text.length-1;F>=0&&F>=d&&da[this.text.charCodeAt(F)];F--)C--;this.text=this.text.substring(d,C),this.sectionIndex=this.sectionIndex.slice(d,C)},di.prototype.substring=function(d,p){var C=new di;return C.text=this.text.substring(d,p),C.sectionIndex=this.sectionIndex.slice(d,p),C.sections=this.sections,C},di.prototype.toString=function(){return this.text},di.prototype.getMaxScale=function(){var d=this;return this.sectionIndex.reduce(function(p,C){return Math.max(p,d.sections[C].scale)},0)},di.prototype.addTextSection=function(d,p){this.text+=d.text,this.sections.push(xi.forText(d.scale,d.fontStack||p));for(var C=this.sections.length-1,F=0;F<d.text.length;++F)this.sectionIndex.push(C)},di.prototype.addImageSection=function(d){var p=d.image?d.image.name:"";if(p.length!==0){var C=this.getNextImageSectionCharCode();C?(this.text+=String.fromCharCode(C),this.sections.push(xi.forImage(p)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")},di.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var da={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},aa={};function Gi(d,p,C,F,J,vt){if(p.imageName){var Ct=F[p.imageName];return Ct?Ct.displaySize[0]*p.scale*24/vt+J:0}var Bt=C[p.fontStack],Jt=Bt&&Bt[d];return Jt?Jt.metrics.advance*p.scale+J:0}function oo(d,p,C,F){var J=Math.pow(d-p,2);return F?d<p?J/2:2*J:J+Math.abs(C)*C}function ja(d,p,C){var F=0;return d===10&&(F-=1e4),C&&(F+=150),d!==40&&d!==65288||(F+=50),p!==41&&p!==65289||(F+=50),F}function So(d,p,C,F,J,vt){for(var Ct=null,Bt=oo(p,C,J,vt),Jt=0,ve=F;Jt<ve.length;Jt+=1){var Ie=ve[Jt],Ue=oo(p-Ie.x,C,J,vt)+Ie.badness;Ue<=Bt&&(Ct=Ie,Bt=Ue)}return{index:d,x:p,priorBreak:Ct,badness:Bt}}function Io(d,p,C,F,J,vt,Ct){if(vt!=="point")return[];if(!d)return[];for(var Bt,Jt=[],ve=function(Kn,$n,_r,Br,Hr,pi){for(var ii=0,Li=0;Li<Kn.length();Li++){var Ri=Kn.getSection(Li);ii+=Gi(Kn.getCharCode(Li),Ri,Br,Hr,$n,pi)}return ii/Math.max(1,Math.ceil(ii/_r))}(d,p,C,F,J,Ct),Ie=d.text.indexOf("\u200B")>=0,Ue=0,He=0;He<d.length();He++){var fn=d.getSection(He),Ln=d.getCharCode(He);if(da[Ln]||(Ue+=Gi(Ln,fn,F,J,p,Ct)),He<d.length()-1){var On=!((Bt=Ln)<11904||!(mi["Bopomofo Extended"](Bt)||mi.Bopomofo(Bt)||mi["CJK Compatibility Forms"](Bt)||mi["CJK Compatibility Ideographs"](Bt)||mi["CJK Compatibility"](Bt)||mi["CJK Radicals Supplement"](Bt)||mi["CJK Strokes"](Bt)||mi["CJK Symbols and Punctuation"](Bt)||mi["CJK Unified Ideographs Extension A"](Bt)||mi["CJK Unified Ideographs"](Bt)||mi["Enclosed CJK Letters and Months"](Bt)||mi["Halfwidth and Fullwidth Forms"](Bt)||mi.Hiragana(Bt)||mi["Ideographic Description Characters"](Bt)||mi["Kangxi Radicals"](Bt)||mi["Katakana Phonetic Extensions"](Bt)||mi.Katakana(Bt)||mi["Vertical Forms"](Bt)||mi["Yi Radicals"](Bt)||mi["Yi Syllables"](Bt)));(aa[Ln]||On||fn.imageName)&&Jt.push(So(He+1,Ue,ve,Jt,ja(Ln,d.getCharCode(He+1),On&&Ie),!1))}}return function Kn($n){return $n?Kn($n.priorBreak).concat($n.index):[]}(So(d.length(),Ue,ve,Jt,0,!0))}function ou(d){var p=.5,C=.5;switch(d){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":C=1;break;case"top":case"top-right":case"top-left":C=0}return{horizontalAlign:p,verticalAlign:C}}function Bl(d,p,C,F,J){if(F||J)for(var vt=d[C],Ct=(d[C].x+vt.metrics.advance*vt.scale)*F,Bt=p;Bt<=C;Bt++)d[Bt].x-=Ct,d[Bt].y+=J}function Po(d,p,C,F,J,vt){var Ct,Bt=d.image;if(Bt.content){var Jt=Bt.content,ve=Bt.pixelRatio||1;Ct=[Jt[0]/ve,Jt[1]/ve,Bt.displaySize[0]-Jt[2]/ve,Bt.displaySize[1]-Jt[3]/ve]}var Ie,Ue,He,fn,Ln=p.left*vt,On=p.right*vt;C==="width"||C==="both"?(fn=J[0]+Ln-F[3],Ue=J[0]+On+F[1]):Ue=(fn=J[0]+(Ln+On-Bt.displaySize[0])/2)+Bt.displaySize[0];var Kn=p.top*vt,$n=p.bottom*vt;return C==="height"||C==="both"?(Ie=J[1]+Kn-F[0],He=J[1]+$n+F[2]):He=(Ie=J[1]+(Kn+$n-Bt.displaySize[1])/2)+Bt.displaySize[1],{image:Bt,top:Ie,right:Ue,bottom:He,left:fn,collisionPadding:Ct}}aa[10]=!0,aa[32]=!0,aa[38]=!0,aa[40]=!0,aa[41]=!0,aa[43]=!0,aa[45]=!0,aa[47]=!0,aa[173]=!0,aa[183]=!0,aa[8203]=!0,aa[8208]=!0,aa[8211]=!0,aa[8231]=!0;var Qu=function(d){function p(C,F,J,vt){d.call(this,C,F),this.angle=J,vt!==void 0&&(this.segment=vt)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.clone=function(){return new p(this.x,this.y,this.angle,this.segment)},p}(r);function bu(d,p){var C=p.expression;if(C.kind==="constant")return{kind:"constant",layoutSize:C.evaluate(new br(d+1))};if(C.kind==="source")return{kind:"source"};for(var F=C.zoomStops,J=C.interpolationType,vt=0;vt<F.length&&F[vt]<=d;)vt++;for(var Ct=vt=Math.max(0,vt-1);Ct<F.length&&F[Ct]<d+1;)Ct++;Ct=Math.min(F.length-1,Ct);var Bt=F[vt],Jt=F[Ct];return C.kind==="composite"?{kind:"composite",minZoom:Bt,maxZoom:Jt,interpolationType:J}:{kind:"camera",minZoom:Bt,maxZoom:Jt,minSize:C.evaluate(new br(Bt)),maxSize:C.evaluate(new br(Jt)),interpolationType:J}}function zo(d,p,C){var F=p.uSize,J=C.lowerSize;return d.kind==="source"?J/128:d.kind==="composite"?Ga(J/128,C.upperSize/128,p.uSizeT):F}function Xs(d,p){var C=0,F=0;if(d.kind==="constant")F=d.layoutSize;else if(d.kind!=="source"){var J=d.interpolationType,vt=J?l(Ki.interpolationFactor(J,p,d.minZoom,d.maxZoom),0,1):0;d.kind==="camera"?F=Ga(d.minSize,d.maxSize,vt):C=vt}return{uSizeT:C,uSize:F}}Ni("Anchor",Qu);var Fl=Object.freeze({__proto__:null,getSizeData:bu,evaluateSizeForFeature:zo,evaluateSizeForZoom:Xs,SIZE_PACK_FACTOR:128});function kl(d,p,C,F,J){if(p.segment===void 0)return!0;for(var vt=p,Ct=p.segment+1,Bt=0;Bt>-C/2;){if(--Ct<0)return!1;Bt-=d[Ct].dist(vt),vt=d[Ct]}Bt+=d[Ct].dist(d[Ct+1]),Ct++;for(var Jt=[],ve=0;Bt<C/2;){var Ie=d[Ct],Ue=d[Ct+1];if(!Ue)return!1;var He=d[Ct-1].angleTo(Ie)-Ie.angleTo(Ue);for(He=Math.abs((He+3*Math.PI)%(2*Math.PI)-Math.PI),Jt.push({distance:Bt,angleDelta:He}),ve+=He;Bt-Jt[0].distance>F;)ve-=Jt.shift().angleDelta;if(ve>J)return!1;Ct++,Bt+=Ie.dist(Ue)}return!0}function cc(d){for(var p=0,C=0;C<d.length-1;C++)p+=d[C].dist(d[C+1]);return p}function Ml(d,p,C){return d?.6*p*C:0}function co(d,p){return Math.max(d?d.right-d.left:0,p?p.right-p.left:0)}function pc(d,p,C,F,J,vt){for(var Ct=Ml(C,J,vt),Bt=co(C,F)*vt,Jt=0,ve=cc(d)/2,Ie=0;Ie<d.length-1;Ie++){var Ue=d[Ie],He=d[Ie+1],fn=Ue.dist(He);if(Jt+fn>ve){var Ln=(ve-Jt)/fn,On=Ga(Ue.x,He.x,Ln),Kn=Ga(Ue.y,He.y,Ln),$n=new Qu(On,Kn,He.angleTo(Ue),Ie);return $n._round(),!Ct||kl(d,$n,Bt,Ct,p)?$n:void 0}Jt+=fn}}function xs(d,p,C,F,J,vt,Ct,Bt,Jt){var ve=Ml(F,vt,Ct),Ie=co(F,J),Ue=Ie*Ct,He=d[0].x===0||d[0].x===Jt||d[0].y===0||d[0].y===Jt;return p-Ue<p/4&&(p=Ue+p/4),function fn(Ln,On,Kn,$n,_r,Br,Hr,pi,ii){for(var Li=Br/2,Ri=cc(Ln),Xi=0,ua=On-Kn,na=[],Zi=0;Zi<Ln.length-1;Zi++){for(var qa=Ln[Zi],xa=Ln[Zi+1],la=qa.dist(xa),Yo=xa.angleTo(qa);ua+Kn<Xi+la;){var go=((ua+=Kn)-Xi)/la,Es=Ga(qa.x,xa.x,go),Ea=Ga(qa.y,xa.y,go);if(Es>=0&&Es<ii&&Ea>=0&&Ea<ii&&ua-Li>=0&&ua+Li<=Ri){var Qo=new Qu(Es,Ea,Yo,Zi);Qo._round(),$n&&!kl(Ln,Qo,Br,$n,_r)||na.push(Qo)}}Xi+=la}return pi||na.length||Hr||(na=fn(Ln,Xi/2,Kn,$n,_r,Br,Hr,!0,ii)),na}(d,He?p/2*Bt%p:(Ie/2+2*vt)*Ct*Bt%p,p,ve,C,Ue,He,!1,Jt)}function Ma(d,p,C,F,J){for(var vt=[],Ct=0;Ct<d.length;Ct++)for(var Bt=d[Ct],Jt=void 0,ve=0;ve<Bt.length-1;ve++){var Ie=Bt[ve],Ue=Bt[ve+1];Ie.x<p&&Ue.x<p||(Ie.x<p?Ie=new r(p,Ie.y+(p-Ie.x)/(Ue.x-Ie.x)*(Ue.y-Ie.y))._round():Ue.x<p&&(Ue=new r(p,Ie.y+(p-Ie.x)/(Ue.x-Ie.x)*(Ue.y-Ie.y))._round()),Ie.y<C&&Ue.y<C||(Ie.y<C?Ie=new r(Ie.x+(C-Ie.y)/(Ue.y-Ie.y)*(Ue.x-Ie.x),C)._round():Ue.y<C&&(Ue=new r(Ie.x+(C-Ie.y)/(Ue.y-Ie.y)*(Ue.x-Ie.x),C)._round()),Ie.x>=F&&Ue.x>=F||(Ie.x>=F?Ie=new r(F,Ie.y+(F-Ie.x)/(Ue.x-Ie.x)*(Ue.y-Ie.y))._round():Ue.x>=F&&(Ue=new r(F,Ie.y+(F-Ie.x)/(Ue.x-Ie.x)*(Ue.y-Ie.y))._round()),Ie.y>=J&&Ue.y>=J||(Ie.y>=J?Ie=new r(Ie.x+(J-Ie.y)/(Ue.y-Ie.y)*(Ue.x-Ie.x),J)._round():Ue.y>=J&&(Ue=new r(Ie.x+(J-Ie.y)/(Ue.y-Ie.y)*(Ue.x-Ie.x),J)._round()),Jt&&Ie.equals(Jt[Jt.length-1])||vt.push(Jt=[Ie]),Jt.push(Ue)))))}return vt}function _o(d,p,C,F){var J=[],vt=d.image,Ct=vt.pixelRatio,Bt=vt.paddedRect.w-2,Jt=vt.paddedRect.h-2,ve=d.right-d.left,Ie=d.bottom-d.top,Ue=vt.stretchX||[[0,Bt]],He=vt.stretchY||[[0,Jt]],fn=function(Ea,Qo){return Ea+Qo[1]-Qo[0]},Ln=Ue.reduce(fn,0),On=He.reduce(fn,0),Kn=Bt-Ln,$n=Jt-On,_r=0,Br=Ln,Hr=0,pi=On,ii=0,Li=Kn,Ri=0,Xi=$n;if(vt.content&&F){var ua=vt.content;_r=Uo(Ue,0,ua[0]),Hr=Uo(He,0,ua[1]),Br=Uo(Ue,ua[0],ua[2]),pi=Uo(He,ua[1],ua[3]),ii=ua[0]-_r,Ri=ua[1]-Hr,Li=ua[2]-ua[0]-Br,Xi=ua[3]-ua[1]-pi}var na=function(Ea,Qo,Vu,Fu){var tl=Vl(Ea.stretch-_r,Br,ve,d.left),Tl=ef(Ea.fixed-ii,Li,Ea.stretch,Ln),Il=Vl(Qo.stretch-Hr,pi,Ie,d.top),$l=ef(Qo.fixed-Ri,Xi,Qo.stretch,On),Hl=Vl(Vu.stretch-_r,Br,ve,d.left),_c=ef(Vu.fixed-ii,Li,Vu.stretch,Ln),oc=Vl(Fu.stretch-Hr,pi,Ie,d.top),gc=ef(Fu.fixed-Ri,Xi,Fu.stretch,On),sc=new r(tl,Il),Eu=new r(Hl,Il),Ql=new r(Hl,oc),as=new r(tl,oc),Zo=new r(Tl/Ct,$l/Ct),su=new r(_c/Ct,gc/Ct),uu=p*Math.PI/180;if(uu){var mc=Math.sin(uu),Nu=Math.cos(uu),el=[Nu,-mc,mc,Nu];sc._matMult(el),Eu._matMult(el),as._matMult(el),Ql._matMult(el)}var yc=Ea.stretch+Ea.fixed,os=Qo.stretch+Qo.fixed;return{tl:sc,tr:Eu,bl:as,br:Ql,tex:{x:vt.paddedRect.x+1+yc,y:vt.paddedRect.y+1+os,w:Vu.stretch+Vu.fixed-yc,h:Fu.stretch+Fu.fixed-os},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zo,pixelOffsetBR:su,minFontScaleX:Li/Ct/ve,minFontScaleY:Xi/Ct/Ie,isSDF:C}};if(F&&(vt.stretchX||vt.stretchY))for(var Zi=Gl(Ue,Kn,Ln),qa=Gl(He,$n,On),xa=0;xa<Zi.length-1;xa++)for(var la=Zi[xa],Yo=Zi[xa+1],go=0;go<qa.length-1;go++)J.push(na(la,qa[go],Yo,qa[go+1]));else J.push(na({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Bt+1},{fixed:0,stretch:Jt+1}));return J}function Uo(d,p,C){for(var F=0,J=0,vt=d;J<vt.length;J+=1){var Ct=vt[J];F+=Math.max(p,Math.min(C,Ct[1]))-Math.max(p,Math.min(C,Ct[0]))}return F}function Gl(d,p,C){for(var F=[{fixed:-1,stretch:0}],J=0,vt=d;J<vt.length;J+=1){var Ct=vt[J],Bt=Ct[0],Jt=Ct[1],ve=F[F.length-1];F.push({fixed:Bt-ve.stretch,stretch:ve.stretch}),F.push({fixed:Bt-ve.stretch,stretch:ve.stretch+(Jt-Bt)})}return F.push({fixed:p+1,stretch:C}),F}function Vl(d,p,C,F){return d/p*C+F}function ef(d,p,C,F){return d-p*C/F}var jn=function(p,C,F,J,vt,Ct,Bt,Jt,ve,Ie){if(this.boxStartIndex=p.length,ve){var Ue=Ct.top,He=Ct.bottom,fn=Ct.collisionPadding;fn&&(Ue-=fn[1],He+=fn[3]);var Ln=He-Ue;Ln>0&&(Ln=Math.max(10,Ln),this.circleDiameter=Ln)}else{var On=Ct.top*Bt-Jt,Kn=Ct.bottom*Bt+Jt,$n=Ct.left*Bt-Jt,_r=Ct.right*Bt+Jt,Br=Ct.collisionPadding;if(Br&&($n-=Br[0]*Bt,On-=Br[1]*Bt,_r+=Br[2]*Bt,Kn+=Br[3]*Bt),Ie){var Hr=new r($n,On),pi=new r(_r,On),ii=new r($n,Kn),Li=new r(_r,Kn),Ri=Ie*Math.PI/180;Hr._rotate(Ri),pi._rotate(Ri),ii._rotate(Ri),Li._rotate(Ri),$n=Math.min(Hr.x,pi.x,ii.x,Li.x),_r=Math.max(Hr.x,pi.x,ii.x,Li.x),On=Math.min(Hr.y,pi.y,ii.y,Li.y),Kn=Math.max(Hr.y,pi.y,ii.y,Li.y)}p.emplaceBack(C.x,C.y,$n,On,_r,Kn,F,J,vt)}this.boxEndIndex=p.length},Nr=function(p,C){if(p===void 0&&(p=[]),C===void 0&&(C=Gr),this.data=p,this.length=this.data.length,this.compare=C,this.length>0)for(var F=(this.length>>1)-1;F>=0;F--)this._down(F)};function Gr(d,p){return d<p?-1:d>p?1:0}function Yi(d,p,C){p===void 0&&(p=1),C===void 0&&(C=!1);for(var F=1/0,J=1/0,vt=-1/0,Ct=-1/0,Bt=d[0],Jt=0;Jt<Bt.length;Jt++){var ve=Bt[Jt];(!Jt||ve.x<F)&&(F=ve.x),(!Jt||ve.y<J)&&(J=ve.y),(!Jt||ve.x>vt)&&(vt=ve.x),(!Jt||ve.y>Ct)&&(Ct=ve.y)}var Ie=Math.min(vt-F,Ct-J),Ue=Ie/2,He=new Nr([],Qi);if(Ie===0)return new r(F,J);for(var fn=F;fn<vt;fn+=Ie)for(var Ln=J;Ln<Ct;Ln+=Ie)He.push(new Mn(fn+Ue,Ln+Ue,Ue,d));for(var On=function(_r){for(var Br=0,Hr=0,pi=0,ii=_r[0],Li=0,Ri=ii.length,Xi=Ri-1;Li<Ri;Xi=Li++){var ua=ii[Li],na=ii[Xi],Zi=ua.x*na.y-na.x*ua.y;Hr+=(ua.x+na.x)*Zi,pi+=(ua.y+na.y)*Zi,Br+=3*Zi}return new Mn(Hr/Br,pi/Br,0,_r)}(d),Kn=He.length;He.length;){var $n=He.pop();($n.d>On.d||!On.d)&&(On=$n,C&&console.log("found best %d after %d probes",Math.round(1e4*$n.d)/1e4,Kn)),$n.max-On.d<=p||(He.push(new Mn($n.p.x-(Ue=$n.h/2),$n.p.y-Ue,Ue,d)),He.push(new Mn($n.p.x+Ue,$n.p.y-Ue,Ue,d)),He.push(new Mn($n.p.x-Ue,$n.p.y+Ue,Ue,d)),He.push(new Mn($n.p.x+Ue,$n.p.y+Ue,Ue,d)),Kn+=4)}return C&&(console.log("num probes: "+Kn),console.log("best distance: "+On.d)),On.p}function Qi(d,p){return p.max-d.max}function Mn(d,p,C,F){this.p=new r(d,p),this.h=C,this.d=function(J,vt){for(var Ct=!1,Bt=1/0,Jt=0;Jt<vt.length;Jt++)for(var ve=vt[Jt],Ie=0,Ue=ve.length,He=Ue-1;Ie<Ue;He=Ie++){var fn=ve[Ie],Ln=ve[He];fn.y>J.y!=Ln.y>J.y&&J.x<(Ln.x-fn.x)*(J.y-fn.y)/(Ln.y-fn.y)+fn.x&&(Ct=!Ct),Bt=Math.min(Bt,Mc(J,fn,Ln))}return(Ct?1:-1)*Math.sqrt(Bt)}(this.p,F),this.max=this.d+this.h*Math.SQRT2}Nr.prototype.push=function(d){this.data.push(d),this.length++,this._up(this.length-1)},Nr.prototype.pop=function(){if(this.length!==0){var d=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),d}},Nr.prototype.peek=function(){return this.data[0]},Nr.prototype._up=function(d){for(var p=this.data,C=this.compare,F=p[d];d>0;){var J=d-1>>1,vt=p[J];if(C(F,vt)>=0)break;p[d]=vt,d=J}p[d]=F},Nr.prototype._down=function(d){for(var p=this.data,C=this.compare,F=this.length>>1,J=p[d];d<F;){var vt=1+(d<<1),Ct=p[vt],Bt=vt+1;if(Bt<this.length&&C(p[Bt],Ct)<0&&(vt=Bt,Ct=p[Bt]),C(Ct,J)>=0)break;p[d]=Ct,d=vt}p[d]=J};var un=Number.POSITIVE_INFINITY;function ir(d,p){return p[1]!==un?function(C,F,J){var vt=0,Ct=0;switch(F=Math.abs(F),J=Math.abs(J),C){case"top-right":case"top-left":case"top":Ct=J-7;break;case"bottom-right":case"bottom-left":case"bottom":Ct=7-J}switch(C){case"top-right":case"bottom-right":case"right":vt=-F;break;case"top-left":case"bottom-left":case"left":vt=F}return[vt,Ct]}(d,p[0],p[1]):function(C,F){var J=0,vt=0;F<0&&(F=0);var Ct=F/Math.sqrt(2);switch(C){case"top-right":case"top-left":vt=Ct-7;break;case"bottom-right":case"bottom-left":vt=7-Ct;break;case"bottom":vt=7-F;break;case"top":vt=F-7}switch(C){case"top-right":case"bottom-right":J=-Ct;break;case"top-left":case"bottom-left":J=Ct;break;case"left":J=F;break;case"right":J=-F}return[J,vt]}(d,p[0])}function wr(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Rr(d,p,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln){var On=function(Hr,pi,ii,Li,Ri,Xi,ua,na){for(var Zi=Li.layout.get("text-rotate").evaluate(Xi,{})*Math.PI/180,qa=[],xa=0,la=pi.positionedLines;xa<la.length;xa+=1)for(var Yo=la[xa],go=0,Es=Yo.positionedGlyphs;go<Es.length;go+=1){var Ea=Es[go];if(Ea.rect){var Qo=Ea.rect||{},Vu=4,Fu=!0,tl=1,Tl=0,Il=(Ri||na)&&Ea.vertical,$l=Ea.metrics.advance*Ea.scale/2;if(na&&pi.verticalizable&&(Tl=Yo.lineOffset/2-(Ea.imageName?-(24-Ea.metrics.width*Ea.scale)/2:24*(Ea.scale-1))),Ea.imageName){var Hl=ua[Ea.imageName];Fu=Hl.sdf,Vu=1/(tl=Hl.pixelRatio)}var _c=Ri?[Ea.x+$l,Ea.y]:[0,0],oc=Ri?[0,0]:[Ea.x+$l+ii[0],Ea.y+ii[1]-Tl],gc=[0,0];Il&&(gc=oc,oc=[0,0]);var sc=(Ea.metrics.left-Vu)*Ea.scale-$l+oc[0],Eu=(-Ea.metrics.top-Vu)*Ea.scale+oc[1],Ql=sc+Qo.w*Ea.scale/tl,as=Eu+Qo.h*Ea.scale/tl,Zo=new r(sc,Eu),su=new r(Ql,Eu),uu=new r(sc,as),mc=new r(Ql,as);if(Il){var Nu=new r(-$l,$l- -17),el=-Math.PI/2,yc=12-$l,os=new r(22-yc,-(Ea.imageName?yc:0)),jf=new(Function.prototype.bind.apply(r,[null].concat(gc)));Zo._rotateAround(el,Nu)._add(os)._add(jf),su._rotateAround(el,Nu)._add(os)._add(jf),uu._rotateAround(el,Nu)._add(os)._add(jf),mc._rotateAround(el,Nu)._add(os)._add(jf)}if(Zi){var Wc=Math.sin(Zi),nf=Math.cos(Zi),Nc=[nf,-Wc,Wc,nf];Zo._matMult(Nc),su._matMult(Nc),uu._matMult(Nc),mc._matMult(Nc)}var uc=new r(0,0),rf=new r(0,0);qa.push({tl:Zo,tr:su,bl:uu,br:mc,tex:Qo,writingMode:pi.writingMode,glyphOffset:_c,sectionIndex:Ea.sectionIndex,isSDF:Fu,pixelOffsetTL:uc,pixelOffsetBR:rf,minFontScaleX:0,minFontScaleY:0})}}return qa}(0,C,Bt,J,vt,Ct,F,d.allowVerticalPlacement),Kn=d.textSizeData,$n=null;Kn.kind==="source"?($n=[128*J.layout.get("text-size").evaluate(Ct,{})])[0]>32640&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Kn.kind==="composite"&&(($n=[128*fn.compositeTextSizes[0].evaluate(Ct,{},Ln),128*fn.compositeTextSizes[1].evaluate(Ct,{},Ln)])[0]>32640||$n[1]>32640)&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),d.addSymbols(d.text,On,$n,Bt,vt,Ct,ve,p,Jt.lineStartIndex,Jt.lineLength,He,Ln);for(var _r=0,Br=Ie;_r<Br.length;_r+=1)Ue[Br[_r]]=d.text.placedSymbolArray.length-1;return 4*On.length}function sr(d){for(var p in d)return d[p];return null}function or(d,p,C,F){var J=d.compareText;if(p in J){for(var vt=J[p],Ct=vt.length-1;Ct>=0;Ct--)if(F.dist(vt[Ct])<C)return!0}else J[p]=[];return J[p].push(F),!1}var Sr=Ys.VectorTileFeature.types,An=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tr(d,p,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He){var fn=Bt?Math.min(32640,Math.round(Bt[0])):0,Ln=Bt?Math.min(32640,Math.round(Bt[1])):0;d.emplaceBack(p,C,Math.round(32*F),Math.round(32*J),vt,Ct,(fn<<1)+(Jt?1:0),Ln,16*ve,16*Ie,256*Ue,256*He)}function bn(d,p,C){d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C)}function Tr(d){for(var p=0,C=d.sections;p<C.length;p+=1)if(_e(C[p].text))return!0;return!1}var jr=function(p){this.layoutVertexArray=new Ui,this.indexArray=new to,this.programConfigurations=p,this.segments=new Yt,this.dynamicLayoutVertexArray=new Pi,this.opacityVertexArray=new pa,this.placedSymbolArray=new B};jr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},jr.prototype.upload=function(d,p,C,F){this.isEmpty()||(C&&(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Mf.members),this.indexBuffer=d.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=d.createVertexBuffer(this.dynamicLayoutVertexArray,Mh.members,!0),this.opacityVertexBuffer=d.createVertexBuffer(this.opacityVertexArray,An,!0),this.opacityVertexBuffer.itemSize=1),(C||F)&&this.programConfigurations.upload(d))},jr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ni("SymbolBuffers",jr);var ci=function(p,C,F){this.layoutVertexArray=new p,this.layoutAttributes=C,this.indexArray=new F,this.segments=new Yt,this.collisionVertexArray=new ma};ci.prototype.upload=function(d){this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=d.createVertexBuffer(this.collisionVertexArray,Pf.members,!0)},ci.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ni("CollisionBuffers",ci);var Yr=function(p){this.collisionBoxArray=p.collisionBoxArray,this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(Ct){return Ct.id}),this.index=p.index,this.pixelRatio=p.pixelRatio,this.sourceLayerIndex=p.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ul([]),this.placementViewportMatrix=ul([]);var C=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bu(this.zoom,C["text-size"]),this.iconSizeData=bu(this.zoom,C["icon-size"]);var F=this.layers[0].layout,J=F.get("symbol-sort-key"),vt=F.get("symbol-z-order");this.canOverlap=F.get("text-allow-overlap")||F.get("icon-allow-overlap")||F.get("text-ignore-placement")||F.get("icon-ignore-placement"),this.sortFeaturesByKey=vt!=="viewport-y"&&J.constantOr(1)!==void 0,this.sortFeaturesByY=(vt==="viewport-y"||vt==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,F.get("symbol-placement")==="point"&&(this.writingModes=F.get("text-writing-mode").map(function(Ct){return ki[Ct]})),this.stateDependentLayerIds=this.layers.filter(function(Ct){return Ct.isStateDependent()}).map(function(Ct){return Ct.id}),this.sourceID=p.sourceID};Yr.prototype.createArrays=function(){this.text=new jr(new Ca(this.layers,this.zoom,function(d){return/^text/.test(d)})),this.icon=new jr(new Ca(this.layers,this.zoom,function(d){return/^icon/.test(d)})),this.glyphOffsetArray=new Q,this.lineVertexArray=new ut,this.symbolInstances=new G},Yr.prototype.calculateGlyphDependencies=function(d,p,C,F,J){for(var vt=0;vt<d.length;vt++)if(p[d.charCodeAt(vt)]=!0,(C||F)&&J){var Ct=Bc[d.charAt(vt)];Ct&&(p[Ct.charCodeAt(0)]=!0)}},Yr.prototype.populate=function(d,p,C){var F=this.layers[0],J=F.layout,vt=J.get("text-font"),Ct=J.get("text-field"),Bt=J.get("icon-image"),Jt=(Ct.value.kind!=="constant"||Ct.value.value instanceof wa&&!Ct.value.value.isEmpty()||Ct.value.value.toString().length>0)&&(vt.value.kind!=="constant"||vt.value.value.length>0),ve=Bt.value.kind!=="constant"||!!Bt.value.value||Object.keys(Bt.parameters).length>0,Ie=J.get("symbol-sort-key");if(this.features=[],Jt||ve){for(var Ue=p.iconDependencies,He=p.glyphDependencies,fn=p.availableImages,Ln=new br(this.zoom),On=0,Kn=d;On<Kn.length;On+=1){var $n=Kn[On],_r=$n.feature,Br=$n.id,Hr=$n.index,pi=$n.sourceLayerIndex,ii=F._featureFilter.needGeometry,Li=Ps(_r,ii);if(F._featureFilter.filter(Ln,Li,C)){ii||(Li.geometry=jo(_r));var Ri=void 0;if(Jt){var Xi=F.getValueAndResolveTokens("text-field",Li,C,fn),ua=wa.factory(Xi);Tr(ua)&&(this.hasRTLText=!0),(!this.hasRTLText||ei()==="unavailable"||this.hasRTLText&&hi.isParsed())&&(Ri=Zf(ua,F,Li))}var na=void 0;if(ve){var Zi=F.getValueAndResolveTokens("icon-image",Li,C,fn);na=Zi instanceof Ja?Zi:Ja.fromString(Zi)}if(Ri||na){var qa=this.sortFeaturesByKey?Ie.evaluate(Li,{},C):void 0;if(this.features.push({id:Br,text:Ri,icon:na,index:Hr,sourceLayerIndex:pi,geometry:Li.geometry,properties:_r.properties,type:Sr[_r.type],sortKey:qa}),na&&(Ue[na.name]=!0),Ri){var xa=vt.evaluate(Li,{},C).join(","),la=J.get("text-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ki.vertical)>=0;for(var Yo=0,go=Ri.sections;Yo<go.length;Yo+=1){var Es=go[Yo];if(Es.image)Ue[Es.image.name]=!0;else{var Ea=Ru(Ri.toString()),Qo=Es.fontStack||xa,Vu=He[Qo]=He[Qo]||{};this.calculateGlyphDependencies(Es.text,Vu,la,this.allowVerticalPlacement,Ea)}}}}}}J.get("symbol-placement")==="line"&&(this.features=function(Fu){var tl={},Tl={},Il=[],$l=0;function Hl(Nu){Il.push(Fu[Nu]),$l++}function _c(Nu,el,yc){var os=Tl[Nu];return delete Tl[Nu],Tl[el]=os,Il[os].geometry[0].pop(),Il[os].geometry[0]=Il[os].geometry[0].concat(yc[0]),os}function oc(Nu,el,yc){var os=tl[el];return delete tl[el],tl[Nu]=os,Il[os].geometry[0].shift(),Il[os].geometry[0]=yc[0].concat(Il[os].geometry[0]),os}function gc(Nu,el,yc){var os=yc?el[0][el[0].length-1]:el[0][0];return Nu+":"+os.x+":"+os.y}for(var sc=0;sc<Fu.length;sc++){var Eu=Fu[sc],Ql=Eu.geometry,as=Eu.text?Eu.text.toString():null;if(as){var Zo=gc(as,Ql),su=gc(as,Ql,!0);if(Zo in Tl&&su in tl&&Tl[Zo]!==tl[su]){var uu=oc(Zo,su,Ql),mc=_c(Zo,su,Il[uu].geometry);delete tl[Zo],delete Tl[su],Tl[gc(as,Il[mc].geometry,!0)]=mc,Il[uu].geometry=null}else Zo in Tl?_c(Zo,su,Ql):su in tl?oc(Zo,su,Ql):(Hl(sc),tl[Zo]=$l-1,Tl[su]=$l-1)}else Hl(sc)}return Il.filter(function(Nu){return Nu.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Fu,tl){return Fu.sortKey-tl.sortKey})}},Yr.prototype.update=function(d,p,C){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(d,p,this.layers,C),this.icon.programConfigurations.updatePaintArrays(d,p,this.layers,C))},Yr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Yr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Yr.prototype.upload=function(d){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(d),this.iconCollisionBox.upload(d)),this.text.upload(d,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(d,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Yr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Yr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Yr.prototype.addToLineVertexArray=function(d,p){var C=this.lineVertexArray.length;if(d.segment!==void 0){for(var F=d.dist(p[d.segment+1]),J=d.dist(p[d.segment]),vt={},Ct=d.segment+1;Ct<p.length;Ct++)vt[Ct]={x:p[Ct].x,y:p[Ct].y,tileUnitDistanceFromAnchor:F},Ct<p.length-1&&(F+=p[Ct+1].dist(p[Ct]));for(var Bt=d.segment||0;Bt>=0;Bt--)vt[Bt]={x:p[Bt].x,y:p[Bt].y,tileUnitDistanceFromAnchor:J},Bt>0&&(J+=p[Bt-1].dist(p[Bt]));for(var Jt=0;Jt<p.length;Jt++){var ve=vt[Jt];this.lineVertexArray.emplaceBack(ve.x,ve.y,ve.tileUnitDistanceFromAnchor)}}return{lineStartIndex:C,lineLength:this.lineVertexArray.length-C}},Yr.prototype.addSymbols=function(d,p,C,F,J,vt,Ct,Bt,Jt,ve,Ie,Ue){for(var He=d.indexArray,fn=d.layoutVertexArray,Ln=d.segments.prepareSegment(4*p.length,fn,He,this.canOverlap?vt.sortKey:void 0),On=this.glyphOffsetArray.length,Kn=Ln.vertexLength,$n=this.allowVerticalPlacement&&Ct===ki.vertical?Math.PI/2:0,_r=vt.text&&vt.text.sections,Br=0;Br<p.length;Br++){var Hr=p[Br],pi=Hr.tl,ii=Hr.tr,Li=Hr.bl,Ri=Hr.br,Xi=Hr.tex,ua=Hr.pixelOffsetTL,na=Hr.pixelOffsetBR,Zi=Hr.minFontScaleX,qa=Hr.minFontScaleY,xa=Hr.glyphOffset,la=Hr.isSDF,Yo=Hr.sectionIndex,go=Ln.vertexLength,Es=xa[1];tr(fn,Bt.x,Bt.y,pi.x,Es+pi.y,Xi.x,Xi.y,C,la,ua.x,ua.y,Zi,qa),tr(fn,Bt.x,Bt.y,ii.x,Es+ii.y,Xi.x+Xi.w,Xi.y,C,la,na.x,ua.y,Zi,qa),tr(fn,Bt.x,Bt.y,Li.x,Es+Li.y,Xi.x,Xi.y+Xi.h,C,la,ua.x,na.y,Zi,qa),tr(fn,Bt.x,Bt.y,Ri.x,Es+Ri.y,Xi.x+Xi.w,Xi.y+Xi.h,C,la,na.x,na.y,Zi,qa),bn(d.dynamicLayoutVertexArray,Bt,$n),He.emplaceBack(go,go+1,go+2),He.emplaceBack(go+1,go+2,go+3),Ln.vertexLength+=4,Ln.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(xa[0]),Br!==p.length-1&&Yo===p[Br+1].sectionIndex||d.programConfigurations.populatePaintArrays(fn.length,vt,vt.index,{},Ue,_r&&_r[Yo])}d.placedSymbolArray.emplaceBack(Bt.x,Bt.y,On,this.glyphOffsetArray.length-On,Kn,Jt,ve,Bt.segment,C?C[0]:0,C?C[1]:0,F[0],F[1],Ct,0,!1,0,Ie)},Yr.prototype._addCollisionDebugVertex=function(d,p,C,F,J,vt){return p.emplaceBack(0,0),d.emplaceBack(C.x,C.y,F,J,Math.round(vt.x),Math.round(vt.y))},Yr.prototype.addCollisionDebugVertices=function(d,p,C,F,J,vt,Ct){var Bt=J.segments.prepareSegment(4,J.layoutVertexArray,J.indexArray),Jt=Bt.vertexLength,ve=J.layoutVertexArray,Ie=J.collisionVertexArray,Ue=Ct.anchorX,He=Ct.anchorY;this._addCollisionDebugVertex(ve,Ie,vt,Ue,He,new r(d,p)),this._addCollisionDebugVertex(ve,Ie,vt,Ue,He,new r(C,p)),this._addCollisionDebugVertex(ve,Ie,vt,Ue,He,new r(C,F)),this._addCollisionDebugVertex(ve,Ie,vt,Ue,He,new r(d,F)),Bt.vertexLength+=4;var fn=J.indexArray;fn.emplaceBack(Jt,Jt+1),fn.emplaceBack(Jt+1,Jt+2),fn.emplaceBack(Jt+2,Jt+3),fn.emplaceBack(Jt+3,Jt),Bt.primitiveLength+=4},Yr.prototype.addDebugCollisionBoxes=function(d,p,C,F){for(var J=d;J<p;J++){var vt=this.collisionBoxArray.get(J);this.addCollisionDebugVertices(vt.x1,vt.y1,vt.x2,vt.y2,F?this.textCollisionBox:this.iconCollisionBox,vt.anchorPoint,C)}},Yr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ci(oa,uh.members,Ms),this.iconCollisionBox=new ci(oa,uh.members,Ms);for(var d=0;d<this.symbolInstances.length;d++){var p=this.symbolInstances.get(d);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}},Yr.prototype._deserializeCollisionBoxesForSymbol=function(d,p,C,F,J,vt,Ct,Bt,Jt){for(var ve={},Ie=p;Ie<C;Ie++){var Ue=d.get(Ie);ve.textBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},ve.textFeatureIndex=Ue.featureIndex;break}for(var He=F;He<J;He++){var fn=d.get(He);ve.verticalTextBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,anchorPointX:fn.anchorPointX,anchorPointY:fn.anchorPointY},ve.verticalTextFeatureIndex=fn.featureIndex;break}for(var Ln=vt;Ln<Ct;Ln++){var On=d.get(Ln);ve.iconBox={x1:On.x1,y1:On.y1,x2:On.x2,y2:On.y2,anchorPointX:On.anchorPointX,anchorPointY:On.anchorPointY},ve.iconFeatureIndex=On.featureIndex;break}for(var Kn=Bt;Kn<Jt;Kn++){var $n=d.get(Kn);ve.verticalIconBox={x1:$n.x1,y1:$n.y1,x2:$n.x2,y2:$n.y2,anchorPointX:$n.anchorPointX,anchorPointY:$n.anchorPointY},ve.verticalIconFeatureIndex=$n.featureIndex;break}return ve},Yr.prototype.deserializeCollisionBoxes=function(d){this.collisionArrays=[];for(var p=0;p<this.symbolInstances.length;p++){var C=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(d,C.textBoxStartIndex,C.textBoxEndIndex,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C.iconBoxStartIndex,C.iconBoxEndIndex,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex))}},Yr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Yr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Yr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Yr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Yr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Yr.prototype.addIndicesForPlacedSymbol=function(d,p){for(var C=d.placedSymbolArray.get(p),F=C.vertexStartIndex+4*C.numGlyphs,J=C.vertexStartIndex;J<F;J+=4)d.indexArray.emplaceBack(J,J+1,J+2),d.indexArray.emplaceBack(J+1,J+2,J+3)},Yr.prototype.getSortedSymbolIndexes=function(d){if(this.sortedAngle===d&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var p=Math.sin(d),C=Math.cos(d),F=[],J=[],vt=[],Ct=0;Ct<this.symbolInstances.length;++Ct){vt.push(Ct);var Bt=this.symbolInstances.get(Ct);F.push(0|Math.round(p*Bt.anchorX+C*Bt.anchorY)),J.push(Bt.featureIndex)}return vt.sort(function(Jt,ve){return F[Jt]-F[ve]||J[ve]-J[Jt]}),vt},Yr.prototype.addToSortKeyRanges=function(d,p){var C=this.sortKeyRanges[this.sortKeyRanges.length-1];C&&C.sortKey===p?C.symbolInstanceEnd=d+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:d,symbolInstanceEnd:d+1})},Yr.prototype.sortFeatures=function(d){var p=this;if(this.sortFeaturesByY&&this.sortedAngle!==d&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(d),this.sortedAngle=d,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var C=0,F=this.symbolInstanceIndexes;C<F.length;C+=1){var J=this.symbolInstances.get(F[C]);this.featureSortOrder.push(J.featureIndex),[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(function(vt,Ct,Bt){vt>=0&&Bt.indexOf(vt)===Ct&&p.addIndicesForPlacedSymbol(p.text,vt)}),J.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,J.verticalPlacedTextSymbolIndex),J.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,J.placedIconSymbolIndex),J.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,J.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ni("SymbolBucket",Yr,{omit:["layers","collisionBoxArray","features","compareText"]}),Yr.MAX_GLYPHS=65535,Yr.addDynamicAttributes=bn;var ri=new gn({"symbol-placement":new he(ae.layout_symbol["symbol-placement"]),"symbol-spacing":new he(ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new he(ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Be(ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new he(ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new he(ae.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new he(ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new he(ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new he(ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Be(ae.layout_symbol["icon-size"]),"icon-text-fit":new he(ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new he(ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Be(ae.layout_symbol["icon-image"]),"icon-rotate":new Be(ae.layout_symbol["icon-rotate"]),"icon-padding":new he(ae.layout_symbol["icon-padding"]),"icon-keep-upright":new he(ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Be(ae.layout_symbol["icon-offset"]),"icon-anchor":new Be(ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new he(ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new he(ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new he(ae.layout_symbol["text-rotation-alignment"]),"text-field":new Be(ae.layout_symbol["text-field"]),"text-font":new Be(ae.layout_symbol["text-font"]),"text-size":new Be(ae.layout_symbol["text-size"]),"text-max-width":new Be(ae.layout_symbol["text-max-width"]),"text-line-height":new he(ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Be(ae.layout_symbol["text-letter-spacing"]),"text-justify":new Be(ae.layout_symbol["text-justify"]),"text-radial-offset":new Be(ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new he(ae.layout_symbol["text-variable-anchor"]),"text-anchor":new Be(ae.layout_symbol["text-anchor"]),"text-max-angle":new he(ae.layout_symbol["text-max-angle"]),"text-writing-mode":new he(ae.layout_symbol["text-writing-mode"]),"text-rotate":new Be(ae.layout_symbol["text-rotate"]),"text-padding":new he(ae.layout_symbol["text-padding"]),"text-keep-upright":new he(ae.layout_symbol["text-keep-upright"]),"text-transform":new Be(ae.layout_symbol["text-transform"]),"text-offset":new Be(ae.layout_symbol["text-offset"]),"text-allow-overlap":new he(ae.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new he(ae.layout_symbol["text-ignore-placement"]),"text-optional":new he(ae.layout_symbol["text-optional"])}),Ti={paint:new gn({"icon-opacity":new Be(ae.paint_symbol["icon-opacity"]),"icon-color":new Be(ae.paint_symbol["icon-color"]),"icon-halo-color":new Be(ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Be(ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Be(ae.paint_symbol["icon-halo-blur"]),"icon-translate":new he(ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new he(ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Be(ae.paint_symbol["text-opacity"]),"text-color":new Be(ae.paint_symbol["text-color"],{runtimeType:Re,getOverride:function(p){return p.textColor},hasOverride:function(p){return!!p.textColor}}),"text-halo-color":new Be(ae.paint_symbol["text-halo-color"]),"text-halo-width":new Be(ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Be(ae.paint_symbol["text-halo-blur"]),"text-translate":new he(ae.paint_symbol["text-translate"]),"text-translate-anchor":new he(ae.paint_symbol["text-translate-anchor"])}),layout:ri},ia=function(p){this.type=p.property.overrides?p.property.overrides.runtimeType:Ar,this.defaultValue=p};ia.prototype.evaluate=function(d){if(d.formattedSection){var p=this.defaultValue.property.overrides;if(p&&p.hasOverride(d.formattedSection))return p.getOverride(d.formattedSection)}return d.feature&&d.featureState?this.defaultValue.evaluate(d.feature,d.featureState):this.defaultValue.property.specification.default},ia.prototype.eachChild=function(d){this.defaultValue.isConstant()||d(this.defaultValue.value._styleExpression.expression)},ia.prototype.outputDefined=function(){return!1},ia.prototype.serialize=function(){return null},Ni("FormatSectionOverride",ia,{omit:["defaultValue"]});var To=function(d){function p(C){d.call(this,C,Ti)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,F){if(d.prototype.recalculate.call(this,C,F),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var J=this.layout.get("text-writing-mode");if(J){for(var vt=[],Ct=0,Bt=J;Ct<Bt.length;Ct+=1){var Jt=Bt[Ct];vt.indexOf(Jt)<0&&vt.push(Jt)}this.layout._values["text-writing-mode"]=vt}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},p.prototype.getValueAndResolveTokens=function(C,F,J,vt){var Ct=this.layout.get(C).evaluate(F,{},J,vt),Bt=this._unevaluatedLayout._values[C];return Bt.isDataDriven()||ns(Bt.value)||!Ct?Ct:function(Jt,ve){return ve.replace(/{([^{}]+)}/g,function(Ie,Ue){return Ue in Jt?String(Jt[Ue]):""})}(F.properties,Ct)},p.prototype.createBucket=function(C){return new Yr(C)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype._setPaintOverrides=function(){for(var C=0,F=Ti.paint.overridableProperties;C<F.length;C+=1){var J=F[C];if(p.hasPaintOverride(this.layout,J)){var vt,Ct=this.paint.get(J),Bt=new ia(Ct),Jt=new Cl(Bt,Ct.property.specification);vt=Ct.value.kind==="constant"||Ct.value.kind==="source"?new fu("source",Jt):new Xu("composite",Jt,Ct.value.zoomStops,Ct.value._interpolationType),this.paint._values[J]=new se(Ct.property,vt,Ct.parameters)}}},p.prototype._handleOverridablePaintPropertyUpdate=function(C,F,J){return!(!this.layout||F.isDataDriven()||J.isDataDriven())&&p.hasPaintOverride(this.layout,C)},p.hasPaintOverride=function(C,F){var J=C.get("text-field"),vt=Ti.paint.properties[F],Ct=!1,Bt=function(Ue){for(var He=0,fn=Ue;He<fn.length;He+=1)if(vt.overrides&&vt.overrides.hasOverride(fn[He]))return void(Ct=!0)};if(J.value.kind==="constant"&&J.value.value instanceof wa)Bt(J.value.value.sections);else if(J.value.kind==="source"){var Jt=function Ie(Ue){Ct||(Ue instanceof $a&&ro(Ue.value)===En?Bt(Ue.value.sections):Ue instanceof Bo?Bt(Ue.sections):Ue.eachChild(Ie))},ve=J.value;ve._styleExpression&&Jt(ve._styleExpression.expression)}return Ct},p}(vn),ea={paint:new gn({"background-color":new he(ae.paint_background["background-color"]),"background-pattern":new on(ae.paint_background["background-pattern"]),"background-opacity":new he(ae.paint_background["background-opacity"])})},Ba=function(d){function p(C){d.call(this,C,ea)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(vn),fo={paint:new gn({"raster-opacity":new he(ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new he(ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new he(ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new he(ae.paint_raster["raster-brightness-max"]),"raster-saturation":new he(ae.paint_raster["raster-saturation"]),"raster-contrast":new he(ae.paint_raster["raster-contrast"]),"raster-resampling":new he(ae.paint_raster["raster-resampling"]),"raster-fade-duration":new he(ae.paint_raster["raster-fade-duration"])})},bs=function(d){function p(C){d.call(this,C,fo)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(vn),Pl=function(d){function p(C){d.call(this,C,{}),this.implementation=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},p.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},p.prototype.recalculate=function(){},p.prototype.updateTransitions=function(){},p.prototype.hasTransition=function(){},p.prototype.serialize=function(){},p.prototype.onAdd=function(C){this.implementation.onAdd&&this.implementation.onAdd(C,C.painter.context.gl)},p.prototype.onRemove=function(C){this.implementation.onRemove&&this.implementation.onRemove(C,C.painter.context.gl)},p}(vn),Ac={circle:Rc,heatmap:$c,hillshade:wf,fill:Jr,"fill-extrusion":ys,line:nc,symbol:To,background:Ba,raster:bs},lh=n.HTMLImageElement,Fc=n.HTMLCanvasElement,ch=n.HTMLVideoElement,Vc=n.ImageData,Qf=n.ImageBitmap,qf=function(p,C,F,J){this.context=p,this.format=F,this.texture=p.gl.createTexture(),this.update(C,J)};qf.prototype.update=function(d,p,C){var F=d.width,J=d.height,vt=!(this.size&&this.size[0]===F&&this.size[1]===J||C),Ct=this.context,Bt=Ct.gl;if(this.useMipmap=Boolean(p&&p.useMipmap),Bt.bindTexture(Bt.TEXTURE_2D,this.texture),Ct.pixelStoreUnpackFlipY.set(!1),Ct.pixelStoreUnpack.set(1),Ct.pixelStoreUnpackPremultiplyAlpha.set(this.format===Bt.RGBA&&(!p||p.premultiply!==!1)),vt)this.size=[F,J],d instanceof lh||d instanceof Fc||d instanceof ch||d instanceof Vc||Qf&&d instanceof Qf?Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,this.format,Bt.UNSIGNED_BYTE,d):Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,F,J,0,this.format,Bt.UNSIGNED_BYTE,d.data);else{var Jt=C||{x:0,y:0},ve=Jt.x,Ie=Jt.y;d instanceof lh||d instanceof Fc||d instanceof ch||d instanceof Vc||Qf&&d instanceof Qf?Bt.texSubImage2D(Bt.TEXTURE_2D,0,ve,Ie,Bt.RGBA,Bt.UNSIGNED_BYTE,d):Bt.texSubImage2D(Bt.TEXTURE_2D,0,ve,Ie,F,J,Bt.RGBA,Bt.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Bt.generateMipmap(Bt.TEXTURE_2D)},qf.prototype.bind=function(d,p,C){var F=this.context.gl;F.bindTexture(F.TEXTURE_2D,this.texture),C!==F.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=F.LINEAR),d!==this.filter&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,d),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,C||d),this.filter=d),p!==this.wrap&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,p),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,p),this.wrap=p)},qf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},qf.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var td=function(p){var C=this;this._callback=p,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){C._triggered=!1,C._callback()})};td.prototype.trigger=function(){var d=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){d._triggered=!1,d._callback()},0))},td.prototype.remove=function(){delete this._channel,this._callback=function(){}};var fh=function(p,C,F){this.target=p,this.parent=C,this.mapId=F,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new td(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=N()?p:n};function ud(d,p,C){var F=2*Math.PI*6378137/256/Math.pow(2,C);return[d*F-2*Math.PI*6378137/2,p*F-2*Math.PI*6378137/2]}fh.prototype.send=function(d,p,C,F,J){var vt=this;J===void 0&&(J=!1);var Ct=Math.round(1e18*Math.random()).toString(36).substring(0,10);C&&(this.callbacks[Ct]=C);var Bt=k(this.globalScope)?void 0:[];return this.target.postMessage({id:Ct,type:d,hasCallback:!!C,targetMapId:F,mustQueue:J,sourceMapId:this.mapId,data:No(p,Bt)},Bt),{cancel:function(){C&&delete vt.callbacks[Ct],vt.target.postMessage({id:Ct,type:"<cancel>",targetMapId:F,sourceMapId:vt.mapId})}}},fh.prototype.receive=function(d){var p=d.data,C=p.id;if(C&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[C];var F=this.cancelCallbacks[C];delete this.cancelCallbacks[C],F&&F()}else N()||p.mustQueue?(this.tasks[C]=p,this.taskQueue.push(C),this.invoker.trigger()):this.processTask(C,p)},fh.prototype.process=function(){if(this.taskQueue.length){var d=this.taskQueue.shift(),p=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(d,p)}},fh.prototype.processTask=function(d,p){var C=this;if(p.type==="<response>"){var F=this.callbacks[d];delete this.callbacks[d],F&&(p.error?F(Co(p.error)):F(null,Co(p.data)))}else{var J=!1,vt=k(this.globalScope)?void 0:[],Ct=p.hasCallback?function(Ie,Ue){J=!0,delete C.cancelCallbacks[d],C.target.postMessage({id:d,type:"<response>",sourceMapId:C.mapId,error:Ie?No(Ie):null,data:No(Ue,vt)},vt)}:function(Ie){J=!0},Bt=null,Jt=Co(p.data);if(this.parent[p.type])Bt=this.parent[p.type](p.sourceMapId,Jt,Ct);else if(this.parent.getWorkerSource){var ve=p.type.split(".");Bt=this.parent.getWorkerSource(p.sourceMapId,ve[0],Jt.source)[ve[1]](Jt,Ct)}else Ct(new Error("Could not find function "+p.type));!J&&Bt&&Bt.cancel&&(this.cancelCallbacks[d]=Bt.cancel)}},fh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Wl=function(p,C){p&&(C?this.setSouthWest(p).setNorthEast(C):p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1]))};Wl.prototype.setNorthEast=function(d){return this._ne=d instanceof qu?new qu(d.lng,d.lat):qu.convert(d),this},Wl.prototype.setSouthWest=function(d){return this._sw=d instanceof qu?new qu(d.lng,d.lat):qu.convert(d),this},Wl.prototype.extend=function(d){var p,C,F=this._sw,J=this._ne;if(d instanceof qu)p=d,C=d;else{if(!(d instanceof Wl))return Array.isArray(d)?d.length===4||d.every(Array.isArray)?this.extend(Wl.convert(d)):this.extend(qu.convert(d)):this;if(C=d._ne,!(p=d._sw)||!C)return this}return F||J?(F.lng=Math.min(p.lng,F.lng),F.lat=Math.min(p.lat,F.lat),J.lng=Math.max(C.lng,J.lng),J.lat=Math.max(C.lat,J.lat)):(this._sw=new qu(p.lng,p.lat),this._ne=new qu(C.lng,C.lat)),this},Wl.prototype.getCenter=function(){return new qu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Wl.prototype.getSouthWest=function(){return this._sw},Wl.prototype.getNorthEast=function(){return this._ne},Wl.prototype.getNorthWest=function(){return new qu(this.getWest(),this.getNorth())},Wl.prototype.getSouthEast=function(){return new qu(this.getEast(),this.getSouth())},Wl.prototype.getWest=function(){return this._sw.lng},Wl.prototype.getSouth=function(){return this._sw.lat},Wl.prototype.getEast=function(){return this._ne.lng},Wl.prototype.getNorth=function(){return this._ne.lat},Wl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Wl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Wl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Wl.prototype.contains=function(d){var p=qu.convert(d),C=p.lng,F=p.lat,J=this._sw.lng<=C&&C<=this._ne.lng;return this._sw.lng>this._ne.lng&&(J=this._sw.lng>=C&&C>=this._ne.lng),this._sw.lat<=F&&F<=this._ne.lat&&J},Wl.convert=function(d){return!d||d instanceof Wl?d:new Wl(d)};var qu=function(p,C){if(isNaN(p)||isNaN(C))throw new Error("Invalid LngLat object: ("+p+", "+C+")");if(this.lng=+p,this.lat=+C,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};qu.prototype.wrap=function(){return new qu(f(this.lng,-180,180),this.lat)},qu.prototype.toArray=function(){return[this.lng,this.lat]},qu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},qu.prototype.distanceTo=function(d){var p=Math.PI/180,C=this.lat*p,F=d.lat*p,J=Math.sin(C)*Math.sin(F)+Math.cos(C)*Math.cos(F)*Math.cos((d.lng-this.lng)*p);return 63710088e-1*Math.acos(Math.min(J,1))},qu.prototype.toBounds=function(d){d===void 0&&(d=0);var p=360*d/40075017,C=p/Math.cos(Math.PI/180*this.lat);return new Wl(new qu(this.lng-C,this.lat-p),new qu(this.lng+C,this.lat+p))},qu.convert=function(d){if(d instanceof qu)return d;if(Array.isArray(d)&&(d.length===2||d.length===3))return new qu(Number(d[0]),Number(d[1]));if(!Array.isArray(d)&&typeof d=="object"&&d!==null)return new qu(Number("lng"in d?d.lng:d.lon),Number(d.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ld=2*Math.PI*63710088e-1;function cd(d){return ld*Math.cos(d*Math.PI/180)}function fd(d){return(180+d)/360}function hd(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function dd(d,p){return d/cd(p)}function ed(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}var th=function(p,C,F){F===void 0&&(F=0),this.x=+p,this.y=+C,this.z=+F};th.fromLngLat=function(d,p){p===void 0&&(p=0);var C=qu.convert(d);return new th(fd(C.lng),hd(C.lat),dd(p,C.lat))},th.prototype.toLngLat=function(){return new qu(360*this.x-180,ed(this.y))},th.prototype.toAltitude=function(){return this.z*cd(ed(this.y))},th.prototype.meterInMercatorCoordinateUnits=function(){return 1/ld*(d=ed(this.y),1/Math.cos(d*Math.PI/180));var d};var Kf=function(p,C,F){this.z=p,this.x=C,this.y=F,this.key=Ph(0,p,p,C,F)};Kf.prototype.equals=function(d){return this.z===d.z&&this.x===d.x&&this.y===d.y},Kf.prototype.url=function(d,p){var C,F,J,vt,Ct,Bt=(F=this.y,J=this.z,vt=ud(256*(C=this.x),256*(F=Math.pow(2,J)-F-1),J),Ct=ud(256*(C+1),256*(F+1),J),vt[0]+","+vt[1]+","+Ct[0]+","+Ct[1]),Jt=function(ve,Ie,Ue){for(var He,fn="",Ln=ve;Ln>0;Ln--)fn+=(Ie&(He=1<<Ln-1)?1:0)+(Ue&He?2:0);return fn}(this.z,this.x,this.y);return d[(this.x+this.y)%d.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Jt).replace("{bbox-epsg-3857}",Bt)},Kf.prototype.getTilePoint=function(d){var p=Math.pow(2,this.z);return new r(8192*(d.x*p-this.x),8192*(d.y*p-this.y))},Kf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var vd=function(p,C){this.wrap=p,this.canonical=C,this.key=Ph(p,C.z,C.z,C.x,C.y)},Jl=function(p,C,F,J,vt){this.overscaledZ=p,this.wrap=C,this.canonical=new Kf(F,+J,+vt),this.key=Ph(C,p,F,J,vt)};function Ph(d,p,C,F,J){(d*=2)<0&&(d=-1*d-1);var vt=1<<C;return(vt*vt*d+vt*J+F).toString(36)+C.toString(36)+p.toString(36)}Jl.prototype.equals=function(d){return this.overscaledZ===d.overscaledZ&&this.wrap===d.wrap&&this.canonical.equals(d.canonical)},Jl.prototype.scaledTo=function(d){var p=this.canonical.z-d;return d>this.canonical.z?new Jl(d,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Jl(d,this.wrap,d,this.canonical.x>>p,this.canonical.y>>p)},Jl.prototype.calculateScaledKey=function(d,p){var C=this.canonical.z-d;return d>this.canonical.z?Ph(this.wrap*+p,d,this.canonical.z,this.canonical.x,this.canonical.y):Ph(this.wrap*+p,d,d,this.canonical.x>>C,this.canonical.y>>C)},Jl.prototype.isChildOf=function(d){if(d.wrap!==this.wrap)return!1;var p=this.canonical.z-d.canonical.z;return d.overscaledZ===0||d.overscaledZ<this.overscaledZ&&d.canonical.x===this.canonical.x>>p&&d.canonical.y===this.canonical.y>>p},Jl.prototype.children=function(d){if(this.overscaledZ>=d)return[new Jl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var p=this.canonical.z+1,C=2*this.canonical.x,F=2*this.canonical.y;return[new Jl(p,this.wrap,p,C,F),new Jl(p,this.wrap,p,C+1,F),new Jl(p,this.wrap,p,C,F+1),new Jl(p,this.wrap,p,C+1,F+1)]},Jl.prototype.isLessThan=function(d){return this.wrap<d.wrap||!(this.wrap>d.wrap)&&(this.overscaledZ<d.overscaledZ||!(this.overscaledZ>d.overscaledZ)&&(this.canonical.x<d.canonical.x||!(this.canonical.x>d.canonical.x)&&this.canonical.y<d.canonical.y))},Jl.prototype.wrapped=function(){return new Jl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Jl.prototype.unwrapTo=function(d){return new Jl(this.overscaledZ,d,this.canonical.z,this.canonical.x,this.canonical.y)},Jl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Jl.prototype.toUnwrapped=function(){return new vd(this.wrap,this.canonical)},Jl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Jl.prototype.getTilePoint=function(d){return this.canonical.getTilePoint(new th(d.x-this.wrap,d.y))},Ni("CanonicalTileID",Kf),Ni("OverscaledTileID",Jl,{omit:["posMatrix"]});var Tf=function(p,C,F){if(this.uid=p,C.height!==C.width)throw new RangeError("DEM tiles must be square");if(F&&F!=="mapbox"&&F!=="terrarium")return O('"'+F+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=C.height;var J=this.dim=C.height-2;this.data=new Uint32Array(C.data.buffer),this.encoding=F||"mapbox";for(var vt=0;vt<J;vt++)this.data[this._idx(-1,vt)]=this.data[this._idx(0,vt)],this.data[this._idx(J,vt)]=this.data[this._idx(J-1,vt)],this.data[this._idx(vt,-1)]=this.data[this._idx(vt,0)],this.data[this._idx(vt,J)]=this.data[this._idx(vt,J-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(J,-1)]=this.data[this._idx(J-1,0)],this.data[this._idx(-1,J)]=this.data[this._idx(0,J-1)],this.data[this._idx(J,J)]=this.data[this._idx(J-1,J-1)]};Tf.prototype.get=function(d,p){var C=new Uint8Array(this.data.buffer),F=4*this._idx(d,p);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(C[F],C[F+1],C[F+2])},Tf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Tf.prototype._idx=function(d,p){if(d<-1||d>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(d+1)},Tf.prototype._unpackMapbox=function(d,p,C){return(256*d*256+256*p+C)/10-1e4},Tf.prototype._unpackTerrarium=function(d,p,C){return 256*d+p+C/256-32768},Tf.prototype.getPixels=function(){return new Bu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Tf.prototype.backfillBorder=function(d,p,C){if(this.dim!==d.dim)throw new Error("dem dimension mismatch");var F=p*this.dim,J=p*this.dim+this.dim,vt=C*this.dim,Ct=C*this.dim+this.dim;switch(p){case-1:F=J-1;break;case 1:J=F+1}switch(C){case-1:vt=Ct-1;break;case 1:Ct=vt+1}for(var Bt=-p*this.dim,Jt=-C*this.dim,ve=vt;ve<Ct;ve++)for(var Ie=F;Ie<J;Ie++)this.data[this._idx(Ie,ve)]=d.data[this._idx(Ie+Bt,ve+Jt)]},Ni("DEMData",Tf);var Uh=function(p){this._stringToNumber={},this._numberToString=[];for(var C=0;C<p.length;C++){var F=p[C];this._stringToNumber[F]=C,this._numberToString[C]=F}};Uh.prototype.encode=function(d){return this._stringToNumber[d]},Uh.prototype.decode=function(d){return this._numberToString[d]};var kh=function(p,C,F,J,vt){this.type="Feature",this._vectorTileFeature=p,p._z=C,p._x=F,p._y=J,this.properties=p.properties,this.id=vt},nd={geometry:{configurable:!0}};nd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},nd.geometry.set=function(d){this._geometry=d},kh.prototype.toJSON=function(){var d={geometry:this.geometry};for(var p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(d[p]=this[p]);return d},Object.defineProperties(kh.prototype,nd);var hh=function(){this.state={},this.stateChanges={},this.deletedStates={}};hh.prototype.updateState=function(d,p,C){var F=String(p);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][F]=this.stateChanges[d][F]||{},v(this.stateChanges[d][F],C),this.deletedStates[d]===null)for(var J in this.deletedStates[d]={},this.state[d])J!==F&&(this.deletedStates[d][J]=null);else if(this.deletedStates[d]&&this.deletedStates[d][F]===null)for(var vt in this.deletedStates[d][F]={},this.state[d][F])C[vt]||(this.deletedStates[d][F][vt]=null);else for(var Ct in C)this.deletedStates[d]&&this.deletedStates[d][F]&&this.deletedStates[d][F][Ct]===null&&delete this.deletedStates[d][F][Ct]},hh.prototype.removeFeatureState=function(d,p,C){if(this.deletedStates[d]!==null){var F=String(p);if(this.deletedStates[d]=this.deletedStates[d]||{},C&&p!==void 0)this.deletedStates[d][F]!==null&&(this.deletedStates[d][F]=this.deletedStates[d][F]||{},this.deletedStates[d][F][C]=null);else if(p!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][F])for(C in this.deletedStates[d][F]={},this.stateChanges[d][F])this.deletedStates[d][F][C]=null;else this.deletedStates[d][F]=null;else this.deletedStates[d]=null}},hh.prototype.getState=function(d,p){var C=String(p),F=v({},(this.state[d]||{})[C],(this.stateChanges[d]||{})[C]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){var J=this.deletedStates[d][p];if(J===null)return{};for(var vt in J)delete F[vt]}return F},hh.prototype.initializeTileState=function(d,p){d.setFeatureState(this.state,p)},hh.prototype.coalesceChanges=function(d,p){var C={};for(var F in this.stateChanges){this.state[F]=this.state[F]||{};var J={};for(var vt in this.stateChanges[F])this.state[F][vt]||(this.state[F][vt]={}),v(this.state[F][vt],this.stateChanges[F][vt]),J[vt]=this.state[F][vt];C[F]=J}for(var Ct in this.deletedStates){this.state[Ct]=this.state[Ct]||{};var Bt={};if(this.deletedStates[Ct]===null)for(var Jt in this.state[Ct])Bt[Jt]={},this.state[Ct][Jt]={};else for(var ve in this.deletedStates[Ct]){if(this.deletedStates[Ct][ve]===null)this.state[Ct][ve]={};else for(var Ie=0,Ue=Object.keys(this.deletedStates[Ct][ve]);Ie<Ue.length;Ie+=1)delete this.state[Ct][ve][Ue[Ie]];Bt[ve]=this.state[Ct][ve]}C[Ct]=C[Ct]||{},v(C[Ct],Bt)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(var He in d)d[He].setFeatureState(C,p)};var Df=function(p,C){this.tileID=p,this.x=p.canonical.x,this.y=p.canonical.y,this.z=p.canonical.z,this.grid=new Fs(8192,16,0),this.grid3D=new Fs(8192,16,0),this.featureIndexArray=new It,this.promoteId=C};function pd(d,p,C,F,J){return m(d,function(vt,Ct){var Bt=p instanceof ie?p.get(Ct):null;return Bt&&Bt.evaluate?Bt.evaluate(C,F,J):Bt})}function rd(d){for(var p=1/0,C=1/0,F=-1/0,J=-1/0,vt=0,Ct=d;vt<Ct.length;vt+=1){var Bt=Ct[vt];p=Math.min(p,Bt.x),C=Math.min(C,Bt.y),F=Math.max(F,Bt.x),J=Math.max(J,Bt.y)}return{minX:p,minY:C,maxX:F,maxY:J}}function Ed(d,p){return p-d}Df.prototype.insert=function(d,p,C,F,J,vt){var Ct=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(C,F,J);for(var Bt=vt?this.grid3D:this.grid,Jt=0;Jt<p.length;Jt++){for(var ve=p[Jt],Ie=[1/0,1/0,-1/0,-1/0],Ue=0;Ue<ve.length;Ue++){var He=ve[Ue];Ie[0]=Math.min(Ie[0],He.x),Ie[1]=Math.min(Ie[1],He.y),Ie[2]=Math.max(Ie[2],He.x),Ie[3]=Math.max(Ie[3],He.y)}Ie[0]<8192&&Ie[1]<8192&&Ie[2]>=0&&Ie[3]>=0&&Bt.insert(Ct,Ie[0],Ie[1],Ie[2],Ie[3])}},Df.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ys.VectorTile(new lt(this.rawTileData)).layers,this.sourceLayerCoder=new Uh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Df.prototype.query=function(d,p,C,F){var J=this;this.loadVTLayers();for(var vt=d.params||{},Ct=8192/d.tileSize/d.scale,Bt=du(vt.filter),Jt=d.queryGeometry,ve=d.queryPadding*Ct,Ie=rd(Jt),Ue=this.grid.query(Ie.minX-ve,Ie.minY-ve,Ie.maxX+ve,Ie.maxY+ve),He=rd(d.cameraQueryGeometry),fn=this.grid3D.query(He.minX-ve,He.minY-ve,He.maxX+ve,He.maxY+ve,function(Hr,pi,ii,Li){return function(Ri,Xi,ua,na,Zi){for(var qa=0,xa=Ri;qa<xa.length;qa+=1){var la=xa[qa];if(Xi<=la.x&&ua<=la.y&&na>=la.x&&Zi>=la.y)return!0}var Yo=[new r(Xi,ua),new r(Xi,Zi),new r(na,Zi),new r(na,ua)];if(Ri.length>2){for(var go=0,Es=Yo;go<Es.length;go+=1)if(fc(Ri,Es[go]))return!0}for(var Ea=0;Ea<Ri.length-1;Ea++)if(bc(Ri[Ea],Ri[Ea+1],Yo))return!0;return!1}(d.cameraQueryGeometry,Hr-ve,pi-ve,ii+ve,Li+ve)}),Ln=0,On=fn;Ln<On.length;Ln+=1)Ue.push(On[Ln]);Ue.sort(Ed);for(var Kn,$n={},_r=function(pi){var ii=Ue[pi];if(ii!==Kn){Kn=ii;var Li=J.featureIndexArray.get(ii),Ri=null;J.loadMatchingFeature($n,Li.bucketIndex,Li.sourceLayerIndex,Li.featureIndex,Bt,vt.layers,vt.availableImages,p,C,F,function(Xi,ua,na){return Ri||(Ri=jo(Xi)),ua.queryIntersectsFeature(Jt,Xi,na,Ri,J.z,d.transform,Ct,d.pixelPosMatrix)})}},Br=0;Br<Ue.length;Br++)_r(Br);return $n},Df.prototype.loadMatchingFeature=function(d,p,C,F,J,vt,Ct,Bt,Jt,ve,Ie){var Ue=this.bucketLayerIDs[p];if(!vt||function(Ri,Xi){for(var ua=0;ua<Ri.length;ua++)if(Xi.indexOf(Ri[ua])>=0)return!0;return!1}(vt,Ue)){var He=this.sourceLayerCoder.decode(C),fn=this.vtLayers[He].feature(F);if(J.needGeometry){var Ln=Ps(fn,!0);if(!J.filter(new br(this.tileID.overscaledZ),Ln,this.tileID.canonical))return}else if(!J.filter(new br(this.tileID.overscaledZ),fn))return;for(var On=this.getId(fn,He),Kn=0;Kn<Ue.length;Kn++){var $n=Ue[Kn];if(!(vt&&vt.indexOf($n)<0)){var _r=Bt[$n];if(_r){var Br={};On!==void 0&&ve&&(Br=ve.getState(_r.sourceLayer||"_geojsonTileLayer",On));var Hr=v({},Jt[$n]);Hr.paint=pd(Hr.paint,_r.paint,fn,Br,Ct),Hr.layout=pd(Hr.layout,_r.layout,fn,Br,Ct);var pi=!Ie||Ie(fn,_r,Br);if(pi){var ii=new kh(fn,this.z,this.x,this.y,On);ii.layer=Hr;var Li=d[$n];Li===void 0&&(Li=d[$n]=[]),Li.push({featureIndex:F,feature:ii,intersectionZ:pi})}}}}}},Df.prototype.lookupSymbolFeatures=function(d,p,C,F,J,vt,Ct,Bt){var Jt={};this.loadVTLayers();for(var ve=du(J),Ie=0,Ue=d;Ie<Ue.length;Ie+=1)this.loadMatchingFeature(Jt,C,F,Ue[Ie],ve,vt,Ct,Bt,p);return Jt},Df.prototype.hasLayer=function(d){for(var p=0,C=this.bucketLayerIDs;p<C.length;p+=1)for(var F=0,J=C[p];F<J.length;F+=1)if(d===J[F])return!0;return!1},Df.prototype.getId=function(d,p){var C=d.id;return this.promoteId&&typeof(C=d.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]])=="boolean"&&(C=Number(C)),C},Ni("FeatureIndex",Df,{omit:["rawTileData","sourceLayerCoder"]});var ac=function(p,C){this.tileID=p,this.uid=g(),this.uses=0,this.tileSize=C,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ac.prototype.registerFadeDuration=function(d){var p=d+this.timeAdded;p<Dt.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)},ac.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ac.prototype.loadVectorData=function(d,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){for(var F in d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(ve,Ie){var Ue={};if(!Ie)return Ue;for(var He=function(){var Kn=Ln[fn],$n=Kn.layerIds.map(function(Hr){return Ie.getLayer(Hr)}).filter(Boolean);if($n.length!==0){Kn.layers=$n,Kn.stateDependentLayerIds&&(Kn.stateDependentLayers=Kn.stateDependentLayerIds.map(function(Hr){return $n.filter(function(pi){return pi.id===Hr})[0]}));for(var _r=0,Br=$n;_r<Br.length;_r+=1)Ue[Br[_r].id]=Kn}},fn=0,Ln=ve;fn<Ln.length;fn+=1)He();return Ue}(d.buckets,p.style),this.hasSymbolBuckets=!1,this.buckets){var J=this.buckets[F];if(J instanceof Yr){if(this.hasSymbolBuckets=!0,!C)break;J.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var vt in this.buckets){var Ct=this.buckets[vt];if(Ct instanceof Yr&&Ct.hasRTLText){this.hasRTLText=!0,hi.isLoading()||hi.isLoaded()||ei()!=="deferred"||Ur();break}}for(var Bt in this.queryPadding=0,this.buckets){var Jt=this.buckets[Bt];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(Bt).queryRadius(Jt))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new I},ac.prototype.unloadVectorData=function(){for(var d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ac.prototype.getBucket=function(d){return this.buckets[d.id]},ac.prototype.upload=function(d){for(var p in this.buckets){var C=this.buckets[p];C.uploadPending()&&C.upload(d)}var F=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new qf(d,this.imageAtlas.image,F.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new qf(d,this.glyphAtlasImage,F.ALPHA),this.glyphAtlasImage=null)},ac.prototype.prepare=function(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)},ac.prototype.queryRenderedFeatures=function(d,p,C,F,J,vt,Ct,Bt,Jt,ve){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:F,cameraQueryGeometry:J,scale:vt,tileSize:this.tileSize,pixelPosMatrix:ve,transform:Bt,params:Ct,queryPadding:this.queryPadding*Jt},d,p,C):{}},ac.prototype.querySourceFeatures=function(d,p){var C=this.latestFeatureIndex;if(C&&C.rawTileData){var F=C.loadVTLayers(),J=p?p.sourceLayer:"",vt=F._geojsonTileLayer||F[J];if(vt)for(var Ct=du(p&&p.filter),Bt=this.tileID.canonical,Jt=Bt.z,ve=Bt.x,Ie=Bt.y,Ue={z:Jt,x:ve,y:Ie},He=0;He<vt.length;He++){var fn=vt.feature(He);if(Ct.needGeometry){var Ln=Ps(fn,!0);if(!Ct.filter(new br(this.tileID.overscaledZ),Ln,this.tileID.canonical))continue}else if(!Ct.filter(new br(this.tileID.overscaledZ),fn))continue;var On=C.getId(fn,J),Kn=new kh(fn,Jt,ve,Ie,On);Kn.tile=Ue,d.push(Kn)}}},ac.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ac.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ac.prototype.setExpiryData=function(d){var p=this.expirationTime;if(d.cacheControl){var C=K(d.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){var F=Date.now(),J=!1;if(this.expirationTime>F)J=!1;else if(p)if(this.expirationTime<p)J=!0;else{var vt=this.expirationTime-p;vt?this.expirationTime=F+Math.max(vt,3e4):J=!0}else J=!0;J?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ac.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ac.prototype.setFeatureState=function(d,p){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(d).length!==0){var C=this.latestFeatureIndex.loadVTLayers();for(var F in this.buckets)if(p.style.hasLayer(F)){var J=this.buckets[F],vt=J.layers[0].sourceLayer||"_geojsonTileLayer",Ct=C[vt],Bt=d[vt];if(Ct&&Bt&&Object.keys(Bt).length!==0){J.update(Bt,Ct,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Jt=p&&p.style&&p.style.getLayer(F);Jt&&(this.queryPadding=Math.max(this.queryPadding,Jt.queryRadius(J)))}}}},ac.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ac.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Dt.now()},ac.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ac.prototype.setHoldDuration=function(d){this.symbolFadeHoldUntil=Dt.now()+d},ac.prototype.setDependencies=function(d,p){for(var C={},F=0,J=p;F<J.length;F+=1)C[J[F]]=!0;this.dependencies[d]=C},ac.prototype.hasDependency=function(d,p){for(var C=0,F=d;C<F.length;C+=1){var J=this.dependencies[F[C]];if(J){for(var vt=0,Ct=p;vt<Ct.length;vt+=1)if(J[Ct[vt]])return!0}}return!1};var Xf=n.performance,gd=function(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},Xf.mark(this._marks.start)};gd.prototype.finish=function(){Xf.mark(this._marks.end);var d=Xf.getEntriesByName(this._marks.measure);return d.length===0&&(Xf.measure(this._marks.measure,this._marks.start,this._marks.end),d=Xf.getEntriesByName(this._marks.measure),Xf.clearMarks(this._marks.start),Xf.clearMarks(this._marks.end),Xf.clearMeasures(this._marks.measure)),d},t.Actor=fh,t.AlphaImage=jl,t.CanonicalTileID=Kf,t.CollisionBoxArray=I,t.Color=zr,t.DEMData=Tf,t.DataConstantProperty=he,t.DictionaryCoder=Uh,t.EXTENT=8192,t.ErrorEvent=re,t.EvaluationParameters=br,t.Event=Ht,t.Evented=Te,t.FeatureIndex=Df,t.FillBucket=Un,t.FillExtrusionBucket=Eo,t.ImageAtlas=Ii,t.ImagePosition=Qr,t.LineBucket=Xl,t.LngLat=qu,t.LngLatBounds=Wl,t.MercatorCoordinate=th,t.ONE_EM=24,t.OverscaledTileID=Jl,t.Point=r,t.Point$1=r,t.Properties=gn,t.Protobuf=lt,t.RGBAImage=Bu,t.RequestManager=q,t.RequestPerformance=gd,t.ResourceType=Fn,t.SegmentVector=Yt,t.SourceFeatureState=hh,t.StructArrayLayout1ui2=ws,t.StructArrayLayout2f1f2i16=si,t.StructArrayLayout2i4=xr,t.StructArrayLayout3ui6=to,t.StructArrayLayout4i8=Vr,t.SymbolBucket=Yr,t.Texture=qf,t.Tile=ac,t.Transitionable=Oe,t.Uniform1f=$r,t.Uniform1i=Mr,t.Uniform2f=Kr,t.Uniform3f=bi,t.Uniform4f=Oi,t.UniformColor=zi,t.UniformMatrix4f=_a,t.UnwrappedTileID=vd,t.ValidationError=xe,t.WritingMode=ki,t.ZoomHistory=tu,t.add=function(d,p,C){return d[0]=p[0]+C[0],d[1]=p[1]+C[1],d[2]=p[2]+C[2],d},t.addDynamicAttributes=bn,t.asyncAll=function(d,p,C){if(!d.length)return C(null,[]);var F=d.length,J=new Array(d.length),vt=null;d.forEach(function(Ct,Bt){p(Ct,function(Jt,ve){Jt&&(vt=Jt),J[Bt]=ve,--F==0&&C(vt,J)})})},t.bezier=a,t.bindAll=M,t.browser=Dt,t.cacheEntryPossiblyAdded=function(d){++Ne>Je&&(d.getActor().send("enforceCacheSizeLimit",De),Ne=0)},t.clamp=l,t.clearTileCache=function(d){var p=n.caches.delete("mapbox-tiles");d&&p.catch(d).then(function(){return d()})},t.clipLine=Ma,t.clone=function(d){var p=new Gu(16);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=d[6],p[7]=d[7],p[8]=d[8],p[9]=d[9],p[10]=d[10],p[11]=d[11],p[12]=d[12],p[13]=d[13],p[14]=d[14],p[15]=d[15],p},t.clone$1=P,t.clone$2=function(d){var p=new Gu(3);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p},t.collisionCircleLayout=zh,t.config=St,t.create=function(){var d=new Gu(16);return Gu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},t.create$1=function(){var d=new Gu(9);return Gu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d},t.create$2=function(){var d=new Gu(4);return Gu!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d},t.createCommonjsModule=u,t.createExpression=Wa,t.createLayout=Hn,t.createStyleLayer=function(d){return d.type==="custom"?new Pl(d):new Ac[d.type](d)},t.cross=function(d,p,C){var F=p[0],J=p[1],vt=p[2],Ct=C[0],Bt=C[1],Jt=C[2];return d[0]=J*Jt-vt*Bt,d[1]=vt*Ct-F*Jt,d[2]=F*Bt-J*Ct,d},t.deepEqual=function d(p,C){if(Array.isArray(p)){if(!Array.isArray(C)||p.length!==C.length)return!1;for(var F=0;F<p.length;F++)if(!d(p[F],C[F]))return!1;return!0}if(typeof p=="object"&&p!==null&&C!==null){if(typeof C!="object"||Object.keys(p).length!==Object.keys(C).length)return!1;for(var J in p)if(!d(p[J],C[J]))return!1;return!0}return p===C},t.dot=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]},t.dot$1=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]+d[3]*p[3]},t.ease=o,t.emitValidationErrors=mu,t.endsWith=x,t.enforceCacheSizeLimit=function(d){Qe(),Pt&&Pt.then(function(p){p.keys().then(function(C){for(var F=0;F<C.length-d;F++)p.delete(C[F])})})},t.evaluateSizeForFeature=zo,t.evaluateSizeForZoom=Xs,t.evaluateVariableOffset=ir,t.evented=Zr,t.extend=v,t.featureFilter=du,t.filterObject=S,t.fromRotation=function(d,p){var C=Math.sin(p),F=Math.cos(p);return d[0]=F,d[1]=C,d[2]=0,d[3]=-C,d[4]=F,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},t.getAnchorAlignment=ou,t.getAnchorJustification=wr,t.getArrayBuffer=vr,t.getImage=Pe,t.getJSON=function(d,p){return Bn(v(d,{type:"json"}),p)},t.getRTLTextPluginStatus=ei,t.getReferrer=en,t.getVideo=function(d,p){var C,F,J=n.document.createElement("video");J.muted=!0,J.onloadstart=function(){p(null,J)};for(var vt=0;vt<d.length;vt++){var Ct=n.document.createElement("source");C=d[vt],F=void 0,(F=n.document.createElement("a")).href=C,(F.protocol!==n.document.location.protocol||F.host!==n.document.location.host)&&(J.crossOrigin="Anonymous"),Ct.src=d[vt],J.appendChild(Ct)}return{cancel:function(){}}},t.identity=ul,t.invert=function(d,p){var C=p[0],F=p[1],J=p[2],vt=p[3],Ct=p[4],Bt=p[5],Jt=p[6],ve=p[7],Ie=p[8],Ue=p[9],He=p[10],fn=p[11],Ln=p[12],On=p[13],Kn=p[14],$n=p[15],_r=C*Bt-F*Ct,Br=C*Jt-J*Ct,Hr=C*ve-vt*Ct,pi=F*Jt-J*Bt,ii=F*ve-vt*Bt,Li=J*ve-vt*Jt,Ri=Ie*On-Ue*Ln,Xi=Ie*Kn-He*Ln,ua=Ie*$n-fn*Ln,na=Ue*Kn-He*On,Zi=Ue*$n-fn*On,qa=He*$n-fn*Kn,xa=_r*qa-Br*Zi+Hr*na+pi*ua-ii*Xi+Li*Ri;return xa?(d[0]=(Bt*qa-Jt*Zi+ve*na)*(xa=1/xa),d[1]=(J*Zi-F*qa-vt*na)*xa,d[2]=(On*Li-Kn*ii+$n*pi)*xa,d[3]=(He*ii-Ue*Li-fn*pi)*xa,d[4]=(Jt*ua-Ct*qa-ve*Xi)*xa,d[5]=(C*qa-J*ua+vt*Xi)*xa,d[6]=(Kn*Hr-Ln*Li-$n*Br)*xa,d[7]=(Ie*Li-He*Hr+fn*Br)*xa,d[8]=(Ct*Zi-Bt*ua+ve*Ri)*xa,d[9]=(F*ua-C*Zi-vt*Ri)*xa,d[10]=(Ln*ii-On*Hr+$n*_r)*xa,d[11]=(Ue*Hr-Ie*ii-fn*_r)*xa,d[12]=(Bt*Xi-Ct*na-Jt*Ri)*xa,d[13]=(C*na-F*Xi+J*Ri)*xa,d[14]=(On*Br-Ln*pi-Kn*_r)*xa,d[15]=(Ie*pi-Ue*Br+He*_r)*xa,d):null},t.isChar=mi,t.isMapboxURL=mt,t.keysDifference=function(d,p){var C=[];for(var F in d)F in p||C.push(F);return C},t.makeRequest=Bn,t.mapObject=m,t.mercatorXfromLng=fd,t.mercatorYfromLat=hd,t.mercatorZfromAltitude=dd,t.mul=Ju,t.multiply=ll,t.mvt=Ys,t.nextPowerOfTwo=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},t.normalize=function(d,p){var C=p[0],F=p[1],J=p[2],vt=C*C+F*F+J*J;return vt>0&&(vt=1/Math.sqrt(vt)),d[0]=p[0]*vt,d[1]=p[1]*vt,d[2]=p[2]*vt,d},t.number=Ga,t.offscreenCanvasSupported=cn,t.ortho=function(d,p,C,F,J,vt,Ct){var Bt=1/(p-C),Jt=1/(F-J),ve=1/(vt-Ct);return d[0]=-2*Bt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Jt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*ve,d[11]=0,d[12]=(p+C)*Bt,d[13]=(J+F)*Jt,d[14]=(Ct+vt)*ve,d[15]=1,d},t.parseGlyphPBF=function(d){return new lt(d).readFields(Ir,[])},t.pbf=lt,t.performSymbolLayout=function(d,p,C,F,J,vt,Ct){d.createArrays(),d.tilePixelRatio=8192/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;var Bt=d.layers[0].layout,Jt=d.layers[0]._unevaluatedLayout._values,ve={};if(d.textSizeData.kind==="composite"){var Ie=d.textSizeData,Ue=Ie.maxZoom;ve.compositeTextSizes=[Jt["text-size"].possiblyEvaluate(new br(Ie.minZoom),Ct),Jt["text-size"].possiblyEvaluate(new br(Ue),Ct)]}if(d.iconSizeData.kind==="composite"){var He=d.iconSizeData,fn=He.maxZoom;ve.compositeIconSizes=[Jt["icon-size"].possiblyEvaluate(new br(He.minZoom),Ct),Jt["icon-size"].possiblyEvaluate(new br(fn),Ct)]}ve.layoutTextSize=Jt["text-size"].possiblyEvaluate(new br(d.zoom+1),Ct),ve.layoutIconSize=Jt["icon-size"].possiblyEvaluate(new br(d.zoom+1),Ct),ve.textMaxSize=Jt["text-size"].possiblyEvaluate(new br(18));for(var Ln=24*Bt.get("text-line-height"),On=Bt.get("text-rotation-alignment")==="map"&&Bt.get("symbol-placement")!=="point",Kn=Bt.get("text-keep-upright"),$n=Bt.get("text-size"),_r=function(){var ii=Hr[Br],Li=Bt.get("text-font").evaluate(ii,{},Ct).join(","),Ri=$n.evaluate(ii,{},Ct),Xi=ve.layoutTextSize.evaluate(ii,{},Ct),ua=ve.layoutIconSize.evaluate(ii,{},Ct),na={horizontal:{},vertical:void 0},Zi=ii.text,qa=[0,0];if(Zi){var xa=Zi.toString(),la=24*Bt.get("text-letter-spacing").evaluate(ii,{},Ct),Yo=function(as){for(var Zo=0,su=as;Zo<su.length;Zo+=1)if(uu=su[Zo].charCodeAt(0),mi.Arabic(uu)||mi["Arabic Supplement"](uu)||mi["Arabic Extended-A"](uu)||mi["Arabic Presentation Forms-A"](uu)||mi["Arabic Presentation Forms-B"](uu))return!1;var uu;return!0}(xa)?la:0,go=Bt.get("text-anchor").evaluate(ii,{},Ct),Es=Bt.get("text-variable-anchor");if(!Es){var Ea=Bt.get("text-radial-offset").evaluate(ii,{},Ct);qa=Ea?ir(go,[24*Ea,un]):Bt.get("text-offset").evaluate(ii,{},Ct).map(function(as){return 24*as})}var Qo=On?"center":Bt.get("text-justify").evaluate(ii,{},Ct),Vu=Bt.get("symbol-placement"),Fu=Vu==="point"?24*Bt.get("text-max-width").evaluate(ii,{},Ct):0,tl=function(){d.allowVerticalPlacement&&Ru(xa)&&(na.vertical=ui(Zi,p,C,J,Li,Fu,Ln,go,"left",Yo,qa,ki.vertical,!0,Vu,Xi,Ri))};if(!On&&Es){for(var Tl=Qo==="auto"?Es.map(function(as){return wr(as)}):[Qo],Il=!1,$l=0;$l<Tl.length;$l++){var Hl=Tl[$l];if(!na.horizontal[Hl])if(Il)na.horizontal[Hl]=na.horizontal[0];else{var _c=ui(Zi,p,C,J,Li,Fu,Ln,"center",Hl,Yo,qa,ki.horizontal,!1,Vu,Xi,Ri);_c&&(na.horizontal[Hl]=_c,Il=_c.positionedLines.length===1)}}tl()}else{Qo==="auto"&&(Qo=wr(go));var oc=ui(Zi,p,C,J,Li,Fu,Ln,go,Qo,Yo,qa,ki.horizontal,!1,Vu,Xi,Ri);oc&&(na.horizontal[Qo]=oc),tl(),Ru(xa)&&On&&Kn&&(na.vertical=ui(Zi,p,C,J,Li,Fu,Ln,go,Qo,Yo,qa,ki.vertical,!1,Vu,Xi,Ri))}}var gc=void 0,sc=!1;if(ii.icon&&ii.icon.name){var Eu=F[ii.icon.name];Eu&&(gc=function(as,Zo,su){var uu=ou(su),mc=Zo[0]-as.displaySize[0]*uu.horizontalAlign,Nu=Zo[1]-as.displaySize[1]*uu.verticalAlign;return{image:as,top:Nu,bottom:Nu+as.displaySize[1],left:mc,right:mc+as.displaySize[0]}}(J[ii.icon.name],Bt.get("icon-offset").evaluate(ii,{},Ct),Bt.get("icon-anchor").evaluate(ii,{},Ct)),sc=Eu.sdf,d.sdfIcons===void 0?d.sdfIcons=Eu.sdf:d.sdfIcons!==Eu.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Eu.pixelRatio!==d.pixelRatio||Bt.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}var Ql=sr(na.horizontal)||na.vertical;d.iconsInText=!!Ql&&Ql.iconsInText,(Ql||gc)&&function(as,Zo,su,uu,mc,Nu,el,yc,os,jf,Wc){var nf=Nu.textMaxSize.evaluate(Zo,{});nf===void 0&&(nf=el);var Nc,uc=as.layers[0].layout,rf=uc.get("icon-offset").evaluate(Zo,{},Wc),Af=sr(su.horizontal),Cf=el/24,dh=as.tilePixelRatio*Cf,vf=as.tilePixelRatio*nf/24,Th=as.tilePixelRatio*yc,Ah=as.tilePixelRatio*uc.get("symbol-spacing"),eh=uc.get("text-padding")*as.tilePixelRatio,Ch=uc.get("icon-padding")*as.tilePixelRatio,Oh=uc.get("text-max-angle")/180*Math.PI,wh=uc.get("text-rotation-alignment")==="map"&&uc.get("symbol-placement")!=="point",Bf=uc.get("icon-rotation-alignment")==="map"&&uc.get("symbol-placement")!=="point",vh=uc.get("symbol-placement"),Ih=Ah/2,nh=uc.get("icon-text-fit");uu&&nh!=="none"&&(as.allowVerticalPlacement&&su.vertical&&(Nc=Po(uu,su.vertical,nh,uc.get("icon-text-fit-padding"),rf,Cf)),Af&&(uu=Po(uu,Af,nh,uc.get("icon-text-fit-padding"),rf,Cf)));var Ff=function(yd,Eh){Eh.x<0||Eh.x>=8192||Eh.y<0||Eh.y>=8192||function(Wu,af,xd,zf,Xh,od,Jh,pf,Rh,Dh,jh,Bh,$h,Qh,Sh,sd,bd,tt,Tt,Mt,ht,_t,Lt,Gt,le){var we,Xe,yn,Pn,Er,Dr=Wu.addToLineVertexArray(af,xd),fi=0,Ai=0,Fi=0,fa=0,ga=-1,Xa=-1,Sa={},Lo=Ce(""),Ls=0,eo=0;if(pf._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ls=(we=pf.layout.get("text-offset").evaluate(ht,{},Gt).map(function(Us){return 24*Us}))[0],eo=we[1]):(Ls=24*pf.layout.get("text-radial-offset").evaluate(ht,{},Gt),eo=un),Wu.allowVerticalPlacement&&zf.vertical){var Su=pf.layout.get("text-rotate").evaluate(ht,{},Gt)+90;Pn=new jn(Rh,af,Dh,jh,Bh,zf.vertical,$h,Qh,Sh,Su),Jh&&(Er=new jn(Rh,af,Dh,jh,Bh,Jh,bd,tt,Sh,Su))}if(Xh){var zu=pf.layout.get("icon-rotate").evaluate(ht,{}),dl=pf.layout.get("icon-text-fit")!=="none",no=_o(Xh,zu,Lt,dl),Hu=Jh?_o(Jh,zu,Lt,dl):void 0;yn=new jn(Rh,af,Dh,jh,Bh,Xh,bd,tt,!1,zu),fi=4*no.length;var Yu=Wu.iconSizeData,Hc=null;Yu.kind==="source"?(Hc=[128*pf.layout.get("icon-size").evaluate(ht,{})])[0]>32640&&O(Wu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Yu.kind==="composite"&&((Hc=[128*_t.compositeIconSizes[0].evaluate(ht,{},Gt),128*_t.compositeIconSizes[1].evaluate(ht,{},Gt)])[0]>32640||Hc[1]>32640)&&O(Wu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Wu.addSymbols(Wu.icon,no,Hc,Mt,Tt,ht,!1,af,Dr.lineStartIndex,Dr.lineLength,-1,Gt),ga=Wu.icon.placedSymbolArray.length-1,Hu&&(Ai=4*Hu.length,Wu.addSymbols(Wu.icon,Hu,Hc,Mt,Tt,ht,ki.vertical,af,Dr.lineStartIndex,Dr.lineLength,-1,Gt),Xa=Wu.icon.placedSymbolArray.length-1)}for(var Fh in zf.horizontal){var Uf=zf.horizontal[Fh];if(!Xe){Lo=Ce(Uf.text);var _h=pf.layout.get("text-rotate").evaluate(ht,{},Gt);Xe=new jn(Rh,af,Dh,jh,Bh,Uf,$h,Qh,Sh,_h)}var oh=Uf.positionedLines.length===1;if(Fi+=Rr(Wu,af,Uf,od,pf,Sh,ht,sd,Dr,zf.vertical?ki.horizontal:ki.horizontalOnly,oh?Object.keys(zf.horizontal):[Fh],Sa,ga,_t,Gt),oh)break}zf.vertical&&(fa+=Rr(Wu,af,zf.vertical,od,pf,Sh,ht,sd,Dr,ki.vertical,["vertical"],Sa,Xa,_t,Gt));var gf=Xe?Xe.boxStartIndex:Wu.collisionBoxArray.length,_d=Xe?Xe.boxEndIndex:Wu.collisionBoxArray.length,Md=Pn?Pn.boxStartIndex:Wu.collisionBoxArray.length,Pd=Pn?Pn.boxEndIndex:Wu.collisionBoxArray.length,Td=yn?yn.boxStartIndex:Wu.collisionBoxArray.length,Ad=yn?yn.boxEndIndex:Wu.collisionBoxArray.length,Cd=Er?Er.boxStartIndex:Wu.collisionBoxArray.length,Od=Er?Er.boxEndIndex:Wu.collisionBoxArray.length,Of=-1,qh=function(Go,Wi){return Go&&Go.circleDiameter?Math.max(Go.circleDiameter,Wi):Wi};Of=qh(Xe,Of),Of=qh(Pn,Of),Of=qh(yn,Of);var ho=(Of=qh(Er,Of))>-1?1:0;ho&&(Of*=le/24),Wu.glyphOffsetArray.length>=Yr.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ht.sortKey!==void 0&&Wu.addToSortKeyRanges(Wu.symbolInstances.length,ht.sortKey),Wu.symbolInstances.emplaceBack(af.x,af.y,Sa.right>=0?Sa.right:-1,Sa.center>=0?Sa.center:-1,Sa.left>=0?Sa.left:-1,Sa.vertical||-1,ga,Xa,Lo,gf,_d,Md,Pd,Td,Ad,Cd,Od,Dh,Fi,fa,fi,Ai,ho,0,$h,Ls,eo,Of)}(as,Eh,yd,su,uu,mc,Nc,as.layers[0],as.collisionBoxArray,Zo.index,Zo.sourceLayerIndex,as.index,dh,eh,wh,os,Th,Ch,Bf,rf,Zo,Nu,jf,Wc,el)};if(vh==="line")for(var Nf=0,Lh=Ma(Zo.geometry,0,0,8192,8192);Nf<Lh.length;Nf+=1)for(var Gh=Lh[Nf],ph=0,Vh=xs(Gh,Ah,Oh,su.vertical||Af,uu,24,vf,as.overscaling,8192);ph<Vh.length;ph+=1){var id=Vh[ph];Af&&or(as,Af.text,Ih,id)||Ff(Gh,id)}else if(vh==="line-center")for(var gh=0,Wh=Zo.geometry;gh<Wh.length;gh+=1){var mh=Wh[gh];if(mh.length>1){var yh=pc(mh,Oh,su.vertical||Af,uu,24,vf);yh&&Ff(mh,yh)}}else if(Zo.type==="Polygon")for(var Jf=0,xh=Vt(Zo.geometry,0);Jf<xh.length;Jf+=1){var bh=xh[Jf],rh=Yi(bh,16);Ff(bh[0],new Qu(rh.x,rh.y,0))}else if(Zo.type==="LineString")for(var ih=0,ah=Zo.geometry;ih<ah.length;ih+=1){var Hh=ah[ih];Ff(Hh,new Qu(Hh[0].x,Hh[0].y,0))}else if(Zo.type==="Point")for(var Yh=0,md=Zo.geometry;Yh<md.length;Yh+=1)for(var Zh=0,ad=md[Yh];Zh<ad.length;Zh+=1){var Kh=ad[Zh];Ff([Kh],new Qu(Kh.x,Kh.y,0))}}(d,ii,na,gc,F,ve,Xi,ua,qa,sc,Ct)},Br=0,Hr=d.features;Br<Hr.length;Br+=1)_r();vt&&d.generateCollisionDebugBuffers()},t.perspective=function(d,p,C,F,J){var vt,Ct=1/Math.tan(p/2);return d[0]=Ct/C,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Ct,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,J!=null&&J!==1/0?(d[10]=(J+F)*(vt=1/(F-J)),d[14]=2*J*F*vt):(d[10]=-1,d[14]=-2*F),d},t.pick=function(d,p){for(var C={},F=0;F<p.length;F++){var J=p[F];J in d&&(C[J]=d[J])}return C},t.plugin=hi,t.polygonIntersectsPolygon=lc,t.postMapLoadEvent=$t,t.postTurnstileEvent=ne,t.potpack=qr,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Ni,t.registerForPluginStateChange=function(d){return d({pluginStatus:an,pluginURL:In}),Zr.on("pluginStateChange",d),d},t.renderColorRamp=sf,t.rotate=function(d,p,C){var F=p[0],J=p[1],vt=p[2],Ct=p[3],Bt=Math.sin(C),Jt=Math.cos(C);return d[0]=F*Jt+vt*Bt,d[1]=J*Jt+Ct*Bt,d[2]=F*-Bt+vt*Jt,d[3]=J*-Bt+Ct*Jt,d},t.rotateX=function(d,p,C){var F=Math.sin(C),J=Math.cos(C),vt=p[4],Ct=p[5],Bt=p[6],Jt=p[7],ve=p[8],Ie=p[9],Ue=p[10],He=p[11];return p!==d&&(d[0]=p[0],d[1]=p[1],d[2]=p[2],d[3]=p[3],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[4]=vt*J+ve*F,d[5]=Ct*J+Ie*F,d[6]=Bt*J+Ue*F,d[7]=Jt*J+He*F,d[8]=ve*J-vt*F,d[9]=Ie*J-Ct*F,d[10]=Ue*J-Bt*F,d[11]=He*J-Jt*F,d},t.rotateZ=function(d,p,C){var F=Math.sin(C),J=Math.cos(C),vt=p[0],Ct=p[1],Bt=p[2],Jt=p[3],ve=p[4],Ie=p[5],Ue=p[6],He=p[7];return p!==d&&(d[8]=p[8],d[9]=p[9],d[10]=p[10],d[11]=p[11],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[0]=vt*J+ve*F,d[1]=Ct*J+Ie*F,d[2]=Bt*J+Ue*F,d[3]=Jt*J+He*F,d[4]=ve*J-vt*F,d[5]=Ie*J-Ct*F,d[6]=Ue*J-Bt*F,d[7]=He*J-Jt*F,d},t.scale=function(d,p,C){var F=C[0],J=C[1],vt=C[2];return d[0]=p[0]*F,d[1]=p[1]*F,d[2]=p[2]*F,d[3]=p[3]*F,d[4]=p[4]*J,d[5]=p[5]*J,d[6]=p[6]*J,d[7]=p[7]*J,d[8]=p[8]*vt,d[9]=p[9]*vt,d[10]=p[10]*vt,d[11]=p[11]*vt,d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15],d},t.scale$1=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d[3]=p[3]*C,d},t.scale$2=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d},t.setCacheLimits=function(d,p){De=d,Je=p},t.setRTLTextPlugin=function(d,p,C){if(C===void 0&&(C=!1),an==="deferred"||an==="loading"||an==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");In=Dt.resolveURL(d),an="deferred",pn=p,Lr(),C||Ur()},t.sphericalToCartesian=function(d){var p=d[0],C=d[1],F=d[2];return C+=90,C*=Math.PI/180,F*=Math.PI/180,{x:p*Math.cos(C)*Math.sin(F),y:p*Math.sin(C)*Math.sin(F),z:p*Math.cos(F)}},t.sqrLen=function(d){var p=d[0],C=d[1];return p*p+C*C},t.styleSpec=ae,t.sub=function(d,p,C){return d[0]=p[0]-C[0],d[1]=p[1]-C[1],d[2]=p[2]-C[2],d},t.symbolSize=Fl,t.transformMat3=function(d,p,C){var F=p[0],J=p[1],vt=p[2];return d[0]=F*C[0]+J*C[3]+vt*C[6],d[1]=F*C[1]+J*C[4]+vt*C[7],d[2]=F*C[2]+J*C[5]+vt*C[8],d},t.transformMat4=ec,t.translate=function(d,p,C){var F,J,vt,Ct,Bt,Jt,ve,Ie,Ue,He,fn,Ln,On=C[0],Kn=C[1],$n=C[2];return p===d?(d[12]=p[0]*On+p[4]*Kn+p[8]*$n+p[12],d[13]=p[1]*On+p[5]*Kn+p[9]*$n+p[13],d[14]=p[2]*On+p[6]*Kn+p[10]*$n+p[14],d[15]=p[3]*On+p[7]*Kn+p[11]*$n+p[15]):(J=p[1],vt=p[2],Ct=p[3],Bt=p[4],Jt=p[5],ve=p[6],Ie=p[7],Ue=p[8],He=p[9],fn=p[10],Ln=p[11],d[0]=F=p[0],d[1]=J,d[2]=vt,d[3]=Ct,d[4]=Bt,d[5]=Jt,d[6]=ve,d[7]=Ie,d[8]=Ue,d[9]=He,d[10]=fn,d[11]=Ln,d[12]=F*On+Bt*Kn+Ue*$n+p[12],d[13]=J*On+Jt*Kn+He*$n+p[13],d[14]=vt*On+ve*Kn+fn*$n+p[14],d[15]=Ct*On+Ie*Kn+Ln*$n+p[15]),d},t.triggerPluginCompletionEvent=hr,t.uniqueId=g,t.validateCustomStyleLayer=function(d){var p=[],C=d.id;return C===void 0&&p.push({message:"layers."+C+': missing required property "id"'}),d.render===void 0&&p.push({message:"layers."+C+': missing required method "render"'}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&p.push({message:"layers."+C+': property "renderingMode" must be either "2d" or "3d"'}),p},t.validateLight=zl,t.validateStyle=ku,t.values=function(d){var p=[];for(var C in d)p.push(d[C]);return p},t.vectorTile=Ys,t.version="1.13.1",t.warnOnce=O,t.webpSupported=xt,t.window=n,t.wrap=f}),e(["./shared"],function(t){"use strict";function u(Me){var Pe=typeof Me;if(Pe==="number"||Pe==="boolean"||Pe==="string"||Me==null)return JSON.stringify(Me);if(Array.isArray(Me)){for(var te="[",ge=0,Ht=Me;ge<Ht.length;ge+=1)te+=u(Ht[ge])+",";return te+"]"}for(var re=Object.keys(Me).sort(),Te="{",ae=0;ae<re.length;ae++)Te+=JSON.stringify(re[ae])+":"+u(Me[re[ae]])+",";return Te+"}"}function s(Me){for(var Pe="",te=0,ge=t.refProperties;te<ge.length;te+=1)Pe+="/"+u(Me[ge[te]]);return Pe}var h=function(Pe){this.keyCache={},Pe&&this.replace(Pe)};h.prototype.replace=function(Me){this._layerConfigs={},this._layers={},this.update(Me,[])},h.prototype.update=function(Me,Pe){for(var te=this,ge=0,Ht=Me;ge<Ht.length;ge+=1){var re=Ht[ge];this._layerConfigs[re.id]=re;var Te=this._layers[re.id]=t.createStyleLayer(re);Te._featureFilter=t.featureFilter(Te.filter),this.keyCache[re.id]&&delete this.keyCache[re.id]}for(var ae=0,xe=Pe;ae<xe.length;ae+=1){var qe=xe[ae];delete this.keyCache[qe],delete this._layerConfigs[qe],delete this._layers[qe]}this.familiesBySource={};for(var zn=0,ar=function(yr,Re){for(var We={},Ye=0;Ye<yr.length;Ye++){var dn=Re&&Re[yr[Ye].id]||s(yr[Ye]);Re&&(Re[yr[Ye].id]=dn);var En=We[dn];En||(En=We[dn]=[]),En.push(yr[Ye])}var Dn=[];for(var Sn in We)Dn.push(We[Sn]);return Dn}(t.values(this._layerConfigs),this.keyCache);zn<ar.length;zn+=1){var _n=ar[zn].map(function(yr){return te._layers[yr.id]}),Cn=_n[0];if(Cn.visibility!=="none"){var Or=Cn.source||"",Ar=this.familiesBySource[Or];Ar||(Ar=this.familiesBySource[Or]={});var hn=Cn.sourceLayer||"_geojsonTileLayer",Pr=Ar[hn];Pr||(Pr=Ar[hn]=[]),Pr.push(_n)}}};var r=function(Pe){var te={},ge=[];for(var Ht in Pe){var re=Pe[Ht],Te=te[Ht]={};for(var ae in re){var xe=re[+ae];if(xe&&xe.bitmap.width!==0&&xe.bitmap.height!==0){var qe={x:0,y:0,w:xe.bitmap.width+2,h:xe.bitmap.height+2};ge.push(qe),Te[ae]={rect:qe,metrics:xe.metrics}}}}var zn=t.potpack(ge),ar=new t.AlphaImage({width:zn.w||1,height:zn.h||1});for(var _n in Pe){var Cn=Pe[_n];for(var Or in Cn){var Ar=Cn[+Or];if(Ar&&Ar.bitmap.width!==0&&Ar.bitmap.height!==0){var hn=te[_n][Or].rect;t.AlphaImage.copy(Ar.bitmap,ar,{x:0,y:0},{x:hn.x+1,y:hn.y+1},Ar.bitmap)}}}this.image=ar,this.positions=te};t.register("GlyphAtlas",r);var c=function(Pe){this.tileID=new t.OverscaledTileID(Pe.tileID.overscaledZ,Pe.tileID.wrap,Pe.tileID.canonical.z,Pe.tileID.canonical.x,Pe.tileID.canonical.y),this.uid=Pe.uid,this.zoom=Pe.zoom,this.pixelRatio=Pe.pixelRatio,this.tileSize=Pe.tileSize,this.source=Pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Pe.showCollisionBoxes,this.collectResourceTiming=!!Pe.collectResourceTiming,this.returnDependencies=!!Pe.returnDependencies,this.promoteId=Pe.promoteId};function n(Me,Pe,te){for(var ge=new t.EvaluationParameters(Pe),Ht=0,re=Me;Ht<re.length;Ht+=1)re[Ht].recalculate(ge,te)}function i(Me,Pe){var te=t.getArrayBuffer(Me.request,function(ge,Ht,re,Te){ge?Pe(ge):Ht&&Pe(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Ht)),rawData:Ht,cacheControl:re,expires:Te})});return function(){te.cancel(),Pe()}}c.prototype.parse=function(Me,Pe,te,ge,Ht){var re=this;this.status="parsing",this.data=Me,this.collisionBoxArray=new t.CollisionBoxArray;var Te=new t.DictionaryCoder(Object.keys(Me.layers).sort()),ae=new t.FeatureIndex(this.tileID,this.promoteId);ae.bucketLayerIDs=[];var xe,qe,zn,ar,_n={},Cn={featureIndex:ae,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},Or=Pe.familiesBySource[this.source];for(var Ar in Or){var hn=Me.layers[Ar];if(hn){hn.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Ar+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pr=Te.encode(Ar),yr=[],Re=0;Re<hn.length;Re++){var We=hn.feature(Re),Ye=ae.getId(We,Ar);yr.push({feature:We,id:Ye,index:Re,sourceLayerIndex:Pr})}for(var dn=0,En=Or[Ar];dn<En.length;dn+=1){var Dn=En[dn],Sn=Dn[0];Sn.minzoom&&this.zoom<Math.floor(Sn.minzoom)||Sn.maxzoom&&this.zoom>=Sn.maxzoom||Sn.visibility!=="none"&&(n(Dn,this.zoom,te),(_n[Sn.id]=Sn.createBucket({index:ae.bucketLayerIDs.length,layers:Dn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pr,sourceID:this.source})).populate(yr,Cn,this.tileID.canonical),ae.bucketLayerIDs.push(Dn.map(function(Cr){return Cr.id})))}}}var Nn=t.mapObject(Cn.glyphDependencies,function(Cr){return Object.keys(Cr).map(Number)});Object.keys(Nn).length?ge.send("getGlyphs",{uid:this.uid,stacks:Nn},function(Cr,pr){xe||(xe=Cr,qe=pr,Tn.call(re))}):qe={};var nr=Object.keys(Cn.iconDependencies);nr.length?ge.send("getImages",{icons:nr,source:this.source,tileID:this.tileID,type:"icons"},function(Cr,pr){xe||(xe=Cr,zn=pr,Tn.call(re))}):zn={};var Gn=Object.keys(Cn.patternDependencies);function Tn(){if(xe)return Ht(xe);if(qe&&zn&&ar){var Cr=new r(qe),pr=new t.ImageAtlas(zn,ar);for(var zr in _n){var Ei=_n[zr];Ei instanceof t.SymbolBucket?(n(Ei.layers,this.zoom,te),t.performSymbolLayout(Ei,qe,Cr.positions,zn,pr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ei.hasPattern&&(Ei instanceof t.LineBucket||Ei instanceof t.FillBucket||Ei instanceof t.FillExtrusionBucket)&&(n(Ei.layers,this.zoom,te),Ei.addFeatures(Cn,this.tileID.canonical,pr.patternPositions))}this.status="done",Ht(null,{buckets:t.values(_n).filter(function(Oa){return!Oa.isEmpty()}),featureIndex:ae,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cr.image,imageAtlas:pr,glyphMap:this.returnDependencies?qe:null,iconMap:this.returnDependencies?zn:null,glyphPositions:this.returnDependencies?Cr.positions:null})}}Gn.length?ge.send("getImages",{icons:Gn,source:this.source,tileID:this.tileID,type:"patterns"},function(Cr,pr){xe||(xe=Cr,ar=pr,Tn.call(re))}):ar={},Tn.call(this)};var a=function(Pe,te,ge,Ht){this.actor=Pe,this.layerIndex=te,this.availableImages=ge,this.loadVectorData=Ht||i,this.loading={},this.loaded={}};a.prototype.loadTile=function(Me,Pe){var te=this,ge=Me.uid;this.loading||(this.loading={});var Ht=!!(Me&&Me.request&&Me.request.collectResourceTiming)&&new t.RequestPerformance(Me.request),re=this.loading[ge]=new c(Me);re.abort=this.loadVectorData(Me,function(Te,ae){if(delete te.loading[ge],Te||!ae)return re.status="done",te.loaded[ge]=re,Pe(Te);var xe=ae.rawData,qe={};ae.expires&&(qe.expires=ae.expires),ae.cacheControl&&(qe.cacheControl=ae.cacheControl);var zn={};if(Ht){var ar=Ht.finish();ar&&(zn.resourceTiming=JSON.parse(JSON.stringify(ar)))}re.vectorTile=ae.vectorTile,re.parse(ae.vectorTile,te.layerIndex,te.availableImages,te.actor,function(_n,Cn){if(_n||!Cn)return Pe(_n);Pe(null,t.extend({rawTileData:xe.slice(0)},Cn,qe,zn))}),te.loaded=te.loaded||{},te.loaded[ge]=re})},a.prototype.reloadTile=function(Me,Pe){var te=this,ge=this.loaded,Ht=Me.uid,re=this;if(ge&&ge[Ht]){var Te=ge[Ht];Te.showCollisionBoxes=Me.showCollisionBoxes;var ae=function(qe,zn){var ar=Te.reloadCallback;ar&&(delete Te.reloadCallback,Te.parse(Te.vectorTile,re.layerIndex,te.availableImages,re.actor,ar)),Pe(qe,zn)};Te.status==="parsing"?Te.reloadCallback=ae:Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,ae):ae())}},a.prototype.abortTile=function(Me,Pe){var te=this.loading,ge=Me.uid;te&&te[ge]&&te[ge].abort&&(te[ge].abort(),delete te[ge]),Pe()},a.prototype.removeTile=function(Me,Pe){var te=this.loaded,ge=Me.uid;te&&te[ge]&&delete te[ge],Pe()};var o=t.window.ImageBitmap,l=function(){this.loaded={}};function f(Me,Pe){if(Me.length!==0){v(Me[0],Pe);for(var te=1;te<Me.length;te++)v(Me[te],!Pe)}}function v(Me,Pe){for(var te=0,ge=0,Ht=Me.length,re=Ht-1;ge<Ht;re=ge++)te+=(Me[ge][0]-Me[re][0])*(Me[re][1]+Me[ge][1]);te>=0!=!!Pe&&Me.reverse()}l.prototype.loadTile=function(Me,Pe){var te=Me.uid,ge=Me.encoding,Ht=Me.rawImageData,re=o&&Ht instanceof o?this.getImageData(Ht):Ht,Te=new t.DEMData(te,re,ge);this.loaded=this.loaded||{},this.loaded[te]=Te,Pe(null,Te)},l.prototype.getImageData=function(Me){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Me.width,Me.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Me.width,this.offscreenCanvas.height=Me.height,this.offscreenCanvasContext.drawImage(Me,0,0,Me.width,Me.height);var Pe=this.offscreenCanvasContext.getImageData(-1,-1,Me.width+2,Me.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Pe.width,height:Pe.height},Pe.data)},l.prototype.removeTile=function(Me){var Pe=this.loaded,te=Me.uid;Pe&&Pe[te]&&delete Pe[te]};var b=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(Pe){this._feature=Pe,this.extent=t.EXTENT,this.type=Pe.type,this.properties=Pe.tags,"id"in Pe&&!isNaN(Pe.id)&&(this.id=parseInt(Pe.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Me=[],Pe=0,te=this._feature.geometry;Pe<te.length;Pe+=1){var ge=te[Pe];Me.push([new t.Point$1(ge[0],ge[1])])}return Me}for(var Ht=[],re=0,Te=this._feature.geometry;re<Te.length;re+=1){for(var ae=[],xe=0,qe=Te[re];xe<qe.length;xe+=1){var zn=qe[xe];ae.push(new t.Point$1(zn[0],zn[1]))}Ht.push(ae)}return Ht},g.prototype.toGeoJSON=function(Me,Pe,te){return b.call(this,Me,Pe,te)};var y=function(Pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Pe.length,this._features=Pe};y.prototype.feature=function(Me){return new g(this._features[Me])};var _=t.vectorTile.VectorTileFeature,M=x;function x(Me,Pe){this.options=Pe||{},this.features=Me,this.length=Me.length}function m(Me,Pe){this.id=typeof Me.id=="number"?Me.id:void 0,this.type=Me.type,this.rawGeometry=Me.type===1?[Me.geometry]:Me.geometry,this.properties=Me.tags,this.extent=Pe||4096}x.prototype.feature=function(Me){return new m(this.features[Me],this.options.extent)},m.prototype.loadGeometry=function(){var Me=this.rawGeometry;this.geometry=[];for(var Pe=0;Pe<Me.length;Pe++){for(var te=Me[Pe],ge=[],Ht=0;Ht<te.length;Ht++)ge.push(new t.Point$1(te[Ht][0],te[Ht][1]));this.geometry.push(ge)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Me=this.geometry,Pe=1/0,te=-1/0,ge=1/0,Ht=-1/0,re=0;re<Me.length;re++)for(var Te=Me[re],ae=0;ae<Te.length;ae++){var xe=Te[ae];Pe=Math.min(Pe,xe.x),te=Math.max(te,xe.x),ge=Math.min(ge,xe.y),Ht=Math.max(Ht,xe.y)}return[Pe,ge,te,Ht]},m.prototype.toGeoJSON=_.prototype.toGeoJSON;var S=A,P=M;function A(Me){var Pe=new t.pbf;return function(te,ge){for(var Ht in te.layers)ge.writeMessage(3,O,te.layers[Ht])}(Me,Pe),Pe.finish()}function O(Me,Pe){var te;Pe.writeVarintField(15,Me.version||1),Pe.writeStringField(1,Me.name||""),Pe.writeVarintField(5,Me.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<Me.length;te++)ge.feature=Me.feature(te),Pe.writeMessage(2,R,ge);var Ht=ge.keys;for(te=0;te<Ht.length;te++)Pe.writeStringField(3,Ht[te]);var re=ge.values;for(te=0;te<re.length;te++)Pe.writeMessage(4,k,re[te])}function R(Me,Pe){var te=Me.feature;te.id!==void 0&&Pe.writeVarintField(1,te.id),Pe.writeMessage(2,H,Me),Pe.writeVarintField(3,te.type),Pe.writeMessage(4,V,te)}function H(Me,Pe){var te=Me.feature,ge=Me.keys,Ht=Me.values,re=Me.keycache,Te=Me.valuecache;for(var ae in te.properties){var xe=re[ae];xe===void 0&&(ge.push(ae),re[ae]=xe=ge.length-1),Pe.writeVarint(xe);var qe=te.properties[ae],zn=typeof qe;zn!=="string"&&zn!=="boolean"&&zn!=="number"&&(qe=JSON.stringify(qe));var ar=zn+":"+qe,_n=Te[ar];_n===void 0&&(Ht.push(qe),Te[ar]=_n=Ht.length-1),Pe.writeVarint(_n)}}function N(Me,Pe){return(Pe<<3)+(7&Me)}function K(Me){return Me<<1^Me>>31}function V(Me,Pe){for(var te=Me.loadGeometry(),ge=Me.type,Ht=0,re=0,Te=te.length,ae=0;ae<Te;ae++){var xe=te[ae],qe=1;ge===1&&(qe=xe.length),Pe.writeVarint(N(1,qe));for(var zn=ge===3?xe.length-1:xe.length,ar=0;ar<zn;ar++){ar===1&&ge!==1&&Pe.writeVarint(N(2,zn-1));var _n=xe[ar].x-Ht,Cn=xe[ar].y-re;Pe.writeVarint(K(_n)),Pe.writeVarint(K(Cn)),Ht+=_n,re+=Cn}ge===3&&Pe.writeVarint(N(7,1))}}function k(Me,Pe){var te=typeof Me;te==="string"?Pe.writeStringField(1,Me):te==="boolean"?Pe.writeBooleanField(7,Me):te==="number"&&(Me%1!=0?Pe.writeDoubleField(3,Me):Me<0?Pe.writeSVarintField(6,Me):Pe.writeVarintField(5,Me))}function Z(Me,Pe,te,ge){X(Me,te,ge),X(Pe,2*te,2*ge),X(Pe,2*te+1,2*ge+1)}function X(Me,Pe,te){var ge=Me[Pe];Me[Pe]=Me[te],Me[te]=ge}function at(Me,Pe,te,ge){var Ht=Me-te,re=Pe-ge;return Ht*Ht+re*re}S.fromVectorTileJs=A,S.fromGeojsonVt=function(Me,Pe){Pe=Pe||{};var te={};for(var ge in Me)te[ge]=new M(Me[ge].features,Pe),te[ge].name=ge,te[ge].version=Pe.version,te[ge].extent=Pe.extent;return A({layers:te})},S.GeoJSONWrapper=P;var pt=function(Pe){return Pe[0]},gt=function(Pe){return Pe[1]},ft=function(Pe,te,ge,Ht,re){te===void 0&&(te=pt),ge===void 0&&(ge=gt),Ht===void 0&&(Ht=64),re===void 0&&(re=Float64Array),this.nodeSize=Ht,this.points=Pe;for(var Te=Pe.length<65536?Uint16Array:Uint32Array,ae=this.ids=new Te(Pe.length),xe=this.coords=new re(2*Pe.length),qe=0;qe<Pe.length;qe++)ae[qe]=qe,xe[2*qe]=te(Pe[qe]),xe[2*qe+1]=ge(Pe[qe]);(function zn(ar,_n,Cn,Or,Ar,hn){if(!(Ar-Or<=Cn)){var Pr=Or+Ar>>1;(function yr(Re,We,Ye,dn,En,Dn){for(;En>dn;){if(En-dn>600){var Sn=En-dn+1,Nn=Ye-dn+1,nr=Math.log(Sn),Gn=.5*Math.exp(2*nr/3),Tn=.5*Math.sqrt(nr*Gn*(Sn-Gn)/Sn)*(Nn-Sn/2<0?-1:1);yr(Re,We,Ye,Math.max(dn,Math.floor(Ye-Nn*Gn/Sn+Tn)),Math.min(En,Math.floor(Ye+(Sn-Nn)*Gn/Sn+Tn)),Dn)}var Cr=We[2*Ye+Dn],pr=dn,zr=En;for(Z(Re,We,dn,Ye),We[2*En+Dn]>Cr&&Z(Re,We,dn,En);pr<zr;){for(Z(Re,We,pr,zr),pr++,zr--;We[2*pr+Dn]<Cr;)pr++;for(;We[2*zr+Dn]>Cr;)zr--}We[2*dn+Dn]===Cr?Z(Re,We,dn,zr):Z(Re,We,++zr,En),zr<=Ye&&(dn=zr+1),Ye<=zr&&(En=zr-1)}})(ar,_n,Pr,Or,Ar,hn%2),zn(ar,_n,Cn,Or,Pr-1,hn+1),zn(ar,_n,Cn,Pr+1,Ar,hn+1)}})(ae,xe,Ht,0,ae.length-1,0)};ft.prototype.range=function(Me,Pe,te,ge){return function(Ht,re,Te,ae,xe,qe,zn){for(var ar,_n,Cn=[0,Ht.length-1,0],Or=[];Cn.length;){var Ar=Cn.pop(),hn=Cn.pop(),Pr=Cn.pop();if(hn-Pr<=zn)for(var yr=Pr;yr<=hn;yr++)_n=re[2*yr+1],(ar=re[2*yr])>=Te&&ar<=xe&&_n>=ae&&_n<=qe&&Or.push(Ht[yr]);else{var Re=Math.floor((Pr+hn)/2);_n=re[2*Re+1],(ar=re[2*Re])>=Te&&ar<=xe&&_n>=ae&&_n<=qe&&Or.push(Ht[Re]);var We=(Ar+1)%2;(Ar===0?Te<=ar:ae<=_n)&&(Cn.push(Pr),Cn.push(Re-1),Cn.push(We)),(Ar===0?xe>=ar:qe>=_n)&&(Cn.push(Re+1),Cn.push(hn),Cn.push(We))}}return Or}(this.ids,this.coords,Me,Pe,te,ge,this.nodeSize)},ft.prototype.within=function(Me,Pe,te){return function(ge,Ht,re,Te,ae,xe){for(var qe=[0,ge.length-1,0],zn=[],ar=ae*ae;qe.length;){var _n=qe.pop(),Cn=qe.pop(),Or=qe.pop();if(Cn-Or<=xe)for(var Ar=Or;Ar<=Cn;Ar++)at(Ht[2*Ar],Ht[2*Ar+1],re,Te)<=ar&&zn.push(ge[Ar]);else{var hn=Math.floor((Or+Cn)/2),Pr=Ht[2*hn],yr=Ht[2*hn+1];at(Pr,yr,re,Te)<=ar&&zn.push(ge[hn]);var Re=(_n+1)%2;(_n===0?re-ae<=Pr:Te-ae<=yr)&&(qe.push(Or),qe.push(hn-1),qe.push(Re)),(_n===0?re+ae>=Pr:Te+ae>=yr)&&(qe.push(hn+1),qe.push(Cn),qe.push(Re))}}return zn}(this.ids,this.coords,Me,Pe,te,this.nodeSize)};var Rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Pe){return Pe}},Nt=function(Pe){this.options=z(Object.create(Rt),Pe),this.trees=new Array(this.options.maxZoom+1)};function Dt(Me,Pe,te,ge,Ht){return{x:Me,y:Pe,zoom:1/0,id:te,parentId:-1,numPoints:ge,properties:Ht}}function St(Me,Pe){var te=Me.geometry.coordinates,ge=te[1];return{x:it(te[0]),y:At(ge),zoom:1/0,index:Pe,parentId:-1}}function xt(Me){return{type:"Feature",id:Me.id,properties:Ot(Me),geometry:{type:"Point",coordinates:[(ge=Me.x,360*(ge-.5)),(Pe=Me.y,te=(180-360*Pe)*Math.PI/180,360*Math.atan(Math.exp(te))/Math.PI-90)]}};var Pe,te,ge}function Ot(Me){var Pe=Me.numPoints,te=Pe>=1e4?Math.round(Pe/1e3)+"k":Pe>=1e3?Math.round(Pe/100)/10+"k":Pe;return z(z({},Me.properties),{cluster:!0,cluster_id:Me.id,point_count:Pe,point_count_abbreviated:te})}function it(Me){return Me/360+.5}function At(Me){var Pe=Math.sin(Me*Math.PI/180),te=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return te<0?0:te>1?1:te}function z(Me,Pe){for(var te in Pe)Me[te]=Pe[te];return Me}function q(Me){return Me.x}function mt(Me){return Me.y}function et(Me,Pe,te,ge,Ht,re){var Te=Ht-te,ae=re-ge;if(Te!==0||ae!==0){var xe=((Me-te)*Te+(Pe-ge)*ae)/(Te*Te+ae*ae);xe>1?(te=Ht,ge=re):xe>0&&(te+=Te*xe,ge+=ae*xe)}return(Te=Me-te)*Te+(ae=Pe-ge)*ae}function st(Me,Pe,te,ge){var Ht={id:Me===void 0?null:Me,type:Pe,geometry:te,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var Te=re.geometry,ae=re.type;if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")bt(re,Te);else if(ae==="Polygon"||ae==="MultiLineString")for(var xe=0;xe<Te.length;xe++)bt(re,Te[xe]);else if(ae==="MultiPolygon")for(xe=0;xe<Te.length;xe++)for(var qe=0;qe<Te[xe].length;qe++)bt(re,Te[xe][qe])}(Ht),Ht}function bt(Me,Pe){for(var te=0;te<Pe.length;te+=3)Me.minX=Math.min(Me.minX,Pe[te]),Me.minY=Math.min(Me.minY,Pe[te+1]),Me.maxX=Math.max(Me.maxX,Pe[te]),Me.maxY=Math.max(Me.maxY,Pe[te+1])}function Y(Me,Pe,te,ge){if(Pe.geometry){var Ht=Pe.geometry.coordinates,re=Pe.geometry.type,Te=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),ae=[],xe=Pe.id;if(te.promoteId?xe=Pe.properties[te.promoteId]:te.generateId&&(xe=ge||0),re==="Point")rt(Ht,ae);else if(re==="MultiPoint")for(var qe=0;qe<Ht.length;qe++)rt(Ht[qe],ae);else if(re==="LineString")ot(Ht,ae,Te,!1);else if(re==="MultiLineString"){if(te.lineMetrics){for(qe=0;qe<Ht.length;qe++)ot(Ht[qe],ae=[],Te,!1),Me.push(st(xe,"LineString",ae,Pe.properties));return}$(Ht,ae,Te,!1)}else if(re==="Polygon")$(Ht,ae,Te,!0);else{if(re!=="MultiPolygon"){if(re==="GeometryCollection"){for(qe=0;qe<Pe.geometry.geometries.length;qe++)Y(Me,{id:xe,geometry:Pe.geometry.geometries[qe],properties:Pe.properties},te,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qe=0;qe<Ht.length;qe++){var zn=[];$(Ht[qe],zn,Te,!0),ae.push(zn)}}Me.push(st(xe,re,ae,Pe.properties))}}function rt(Me,Pe){Pe.push(Pt(Me[0])),Pe.push(yt(Me[1])),Pe.push(0)}function ot(Me,Pe,te,ge){for(var Ht,re,Te=0,ae=0;ae<Me.length;ae++){var xe=Pt(Me[ae][0]),qe=yt(Me[ae][1]);Pe.push(xe),Pe.push(qe),Pe.push(0),ae>0&&(Te+=ge?(Ht*qe-xe*re)/2:Math.sqrt(Math.pow(xe-Ht,2)+Math.pow(qe-re,2))),Ht=xe,re=qe}var zn=Pe.length-3;Pe[2]=1,function ar(_n,Cn,Or,Ar){for(var hn,Pr=Ar,yr=Or-Cn>>1,Re=Or-Cn,We=_n[Cn],Ye=_n[Cn+1],dn=_n[Or],En=_n[Or+1],Dn=Cn+3;Dn<Or;Dn+=3){var Sn=et(_n[Dn],_n[Dn+1],We,Ye,dn,En);if(Sn>Pr)hn=Dn,Pr=Sn;else if(Sn===Pr){var Nn=Math.abs(Dn-yr);Nn<Re&&(hn=Dn,Re=Nn)}}Pr>Ar&&(hn-Cn>3&&ar(_n,Cn,hn,Ar),_n[hn+2]=Pr,Or-hn>3&&ar(_n,hn,Or,Ar))}(Pe,0,zn,te),Pe[zn+2]=1,Pe.size=Math.abs(Te),Pe.start=0,Pe.end=Pe.size}function $(Me,Pe,te,ge){for(var Ht=0;Ht<Me.length;Ht++){var re=[];ot(Me[Ht],re,te,ge),Pe.push(re)}}function Pt(Me){return Me/360+.5}function yt(Me){var Pe=Math.sin(Me*Math.PI/180),te=.5-.25*Math.log((1+Pe)/(1-Pe))/Math.PI;return te<0?0:te>1?1:te}function Ft(Me,Pe,te,ge,Ht,re,Te,ae){if(ge/=Pe,re>=(te/=Pe)&&Te<ge)return Me;if(Te<te||re>=ge)return null;for(var xe=[],qe=0;qe<Me.length;qe++){var zn=Me[qe],ar=zn.geometry,_n=zn.type,Cn=Ht===0?zn.minX:zn.minY,Or=Ht===0?zn.maxX:zn.maxY;if(Cn>=te&&Or<ge)xe.push(zn);else if(!(Or<te||Cn>=ge)){var Ar=[];if(_n==="Point"||_n==="MultiPoint")Qt(ar,Ar,te,ge,Ht);else if(_n==="LineString")ne(ar,Ar,te,ge,Ht,!1,ae.lineMetrics);else if(_n==="MultiLineString")$t(ar,Ar,te,ge,Ht,!1);else if(_n==="Polygon")$t(ar,Ar,te,ge,Ht,!0);else if(_n==="MultiPolygon")for(var hn=0;hn<ar.length;hn++){var Pr=[];$t(ar[hn],Pr,te,ge,Ht,!0),Pr.length&&Ar.push(Pr)}if(Ar.length){if(ae.lineMetrics&&_n==="LineString"){for(hn=0;hn<Ar.length;hn++)xe.push(st(zn.id,_n,Ar[hn],zn.tags));continue}_n!=="LineString"&&_n!=="MultiLineString"||(Ar.length===1?(_n="LineString",Ar=Ar[0]):_n="MultiLineString"),_n!=="Point"&&_n!=="MultiPoint"||(_n=Ar.length===3?"Point":"MultiPoint"),xe.push(st(zn.id,_n,Ar,zn.tags))}}}return xe.length?xe:null}function Qt(Me,Pe,te,ge,Ht){for(var re=0;re<Me.length;re+=3){var Te=Me[re+Ht];Te>=te&&Te<=ge&&(Pe.push(Me[re]),Pe.push(Me[re+1]),Pe.push(Me[re+2]))}}function ne(Me,Pe,te,ge,Ht,re,Te){for(var ae,xe,qe=Wt(Me),zn=Ht===0?Je:Qe,ar=Me.start,_n=0;_n<Me.length-3;_n+=3){var Cn=Me[_n],Or=Me[_n+1],Ar=Me[_n+2],hn=Me[_n+3],Pr=Me[_n+4],yr=Ht===0?Cn:Or,Re=Ht===0?hn:Pr,We=!1;Te&&(ae=Math.sqrt(Math.pow(Cn-hn,2)+Math.pow(Or-Pr,2))),yr<te?Re>te&&(xe=zn(qe,Cn,Or,hn,Pr,te),Te&&(qe.start=ar+ae*xe)):yr>ge?Re<ge&&(xe=zn(qe,Cn,Or,hn,Pr,ge),Te&&(qe.start=ar+ae*xe)):De(qe,Cn,Or,Ar),Re<te&&yr>=te&&(xe=zn(qe,Cn,Or,hn,Pr,te),We=!0),Re>ge&&yr<=ge&&(xe=zn(qe,Cn,Or,hn,Pr,ge),We=!0),!re&&We&&(Te&&(qe.end=ar+ae*xe),Pe.push(qe),qe=Wt(Me)),Te&&(ar+=ae)}var Ye=Me.length-3;Cn=Me[Ye],Or=Me[Ye+1],Ar=Me[Ye+2],(yr=Ht===0?Cn:Or)>=te&&yr<=ge&&De(qe,Cn,Or,Ar),Ye=qe.length-3,re&&Ye>=3&&(qe[Ye]!==qe[0]||qe[Ye+1]!==qe[1])&&De(qe,qe[0],qe[1],qe[2]),qe.length&&Pe.push(qe)}function Wt(Me){var Pe=[];return Pe.size=Me.size,Pe.start=Me.start,Pe.end=Me.end,Pe}function $t(Me,Pe,te,ge,Ht,re){for(var Te=0;Te<Me.length;Te++)ne(Me[Te],Pe,te,ge,Ht,re,!1)}function De(Me,Pe,te,ge){Me.push(Pe),Me.push(te),Me.push(ge)}function Je(Me,Pe,te,ge,Ht,re){var Te=(re-Pe)/(ge-Pe);return Me.push(re),Me.push(te+(Ht-te)*Te),Me.push(1),Te}function Qe(Me,Pe,te,ge,Ht,re){var Te=(re-te)/(Ht-te);return Me.push(Pe+(ge-Pe)*Te),Me.push(re),Me.push(1),Te}function de(Me,Pe){for(var te=[],ge=0;ge<Me.length;ge++){var Ht,re=Me[ge],Te=re.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Ht=ue(re.geometry,Pe);else if(Te==="MultiLineString"||Te==="Polygon"){Ht=[];for(var ae=0;ae<re.geometry.length;ae++)Ht.push(ue(re.geometry[ae],Pe))}else if(Te==="MultiPolygon")for(Ht=[],ae=0;ae<re.geometry.length;ae++){for(var xe=[],qe=0;qe<re.geometry[ae].length;qe++)xe.push(ue(re.geometry[ae][qe],Pe));Ht.push(xe)}te.push(st(re.id,Te,Ht,re.tags))}return te}function ue(Me,Pe){var te=[];te.size=Me.size,Me.start!==void 0&&(te.start=Me.start,te.end=Me.end);for(var ge=0;ge<Me.length;ge+=3)te.push(Me[ge]+Pe,Me[ge+1],Me[ge+2]);return te}function Ne(Me,Pe){if(Me.transformed)return Me;var te,ge,Ht,re=1<<Me.z,Te=Me.x,ae=Me.y;for(te=0;te<Me.features.length;te++){var xe=Me.features[te],qe=xe.geometry,zn=xe.type;if(xe.geometry=[],zn===1)for(ge=0;ge<qe.length;ge+=2)xe.geometry.push(cn(qe[ge],qe[ge+1],Pe,re,Te,ae));else for(ge=0;ge<qe.length;ge++){var ar=[];for(Ht=0;Ht<qe[ge].length;Ht+=2)ar.push(cn(qe[ge][Ht],qe[ge][Ht+1],Pe,re,Te,ae));xe.geometry.push(ar)}}return Me.transformed=!0,Me}function cn(Me,Pe,te,ge,Ht,re){return[Math.round(te*(Me*ge-Ht)),Math.round(te*(Pe*ge-re))]}function Fn(Me,Pe,te,ge,Ht){for(var re=Pe===Ht.maxZoom?0:Ht.tolerance/((1<<Pe)*Ht.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:ge,z:Pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ae=0;ae<Me.length;ae++){Te.numFeatures++,wn(Te,Me[ae],re,Ht);var xe=Me[ae].minX,qe=Me[ae].minY,zn=Me[ae].maxX,ar=Me[ae].maxY;xe<Te.minX&&(Te.minX=xe),qe<Te.minY&&(Te.minY=qe),zn>Te.maxX&&(Te.maxX=zn),ar>Te.maxY&&(Te.maxY=ar)}return Te}function wn(Me,Pe,te,ge){var Ht=Pe.geometry,re=Pe.type,Te=[];if(re==="Point"||re==="MultiPoint")for(var ae=0;ae<Ht.length;ae+=3)Te.push(Ht[ae]),Te.push(Ht[ae+1]),Me.numPoints++,Me.numSimplified++;else if(re==="LineString")en(Te,Ht,Me,te,!1,!1);else if(re==="MultiLineString"||re==="Polygon")for(ae=0;ae<Ht.length;ae++)en(Te,Ht[ae],Me,te,re==="Polygon",ae===0);else if(re==="MultiPolygon")for(var xe=0;xe<Ht.length;xe++){var qe=Ht[xe];for(ae=0;ae<qe.length;ae++)en(Te,qe[ae],Me,te,!0,ae===0)}if(Te.length){var zn=Pe.tags||null;if(re==="LineString"&&ge.lineMetrics){for(var ar in zn={},Pe.tags)zn[ar]=Pe.tags[ar];zn.mapbox_clip_start=Ht.start/Ht.size,zn.mapbox_clip_end=Ht.end/Ht.size}var _n={geometry:Te,type:re==="Polygon"||re==="MultiPolygon"?3:re==="LineString"||re==="MultiLineString"?2:1,tags:zn};Pe.id!==null&&(_n.id=Pe.id),Me.features.push(_n)}}function en(Me,Pe,te,ge,Ht,re){var Te=ge*ge;if(ge>0&&Pe.size<(Ht?Te:ge))te.numPoints+=Pe.length/3;else{for(var ae=[],xe=0;xe<Pe.length;xe+=3)(ge===0||Pe[xe+2]>Te)&&(te.numSimplified++,ae.push(Pe[xe]),ae.push(Pe[xe+1])),te.numPoints++;Ht&&function(qe,zn){for(var ar=0,_n=0,Cn=qe.length,Or=Cn-2;_n<Cn;Or=_n,_n+=2)ar+=(qe[_n]-qe[Or])*(qe[_n+1]+qe[Or+1]);if(ar>0===zn)for(_n=0,Cn=qe.length;_n<Cn/2;_n+=2){var Ar=qe[_n],hn=qe[_n+1];qe[_n]=qe[Cn-2-_n],qe[_n+1]=qe[Cn-1-_n],qe[Cn-2-_n]=Ar,qe[Cn-1-_n]=hn}}(ae,re),Me.push(ae)}}function tn(Me,Pe){var te=(Pe=this.options=function(Ht,re){for(var Te in re)Ht[Te]=re[Te];return Ht}(Object.create(this.options),Pe)).debug;if(te&&console.time("preprocess data"),Pe.maxZoom<0||Pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Pe.promoteId&&Pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge=function(Ht,re){var Te=[];if(Ht.type==="FeatureCollection")for(var ae=0;ae<Ht.features.length;ae++)Y(Te,Ht.features[ae],re,ae);else Y(Te,Ht.type==="Feature"?Ht:{geometry:Ht},re);return Te}(Me,Pe);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Pe.indexMaxZoom,Pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ge=function(Ht,re){var Te=re.buffer/re.extent,ae=Ht,xe=Ft(Ht,1,-1-Te,Te,0,-1,2,re),qe=Ft(Ht,1,1-Te,2+Te,0,-1,2,re);return(xe||qe)&&(ae=Ft(Ht,1,-Te,1+Te,0,-1,2,re)||[],xe&&(ae=de(xe,1).concat(ae)),qe&&(ae=ae.concat(de(qe,-1)))),ae}(ge,Pe)).length&&this.splitTile(ge,0,0,0),te&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xn(Me,Pe,te){return 32*((1<<Me)*te+Pe)+Me}function Bn(Me,Pe){var te=Me.tileID.canonical;if(!this._geoJSONIndex)return Pe(null,null);var ge=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!ge)return Pe(null,null);var Ht=new y(ge.features),re=S(Ht);re.byteOffset===0&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),Pe(null,{vectorTile:Ht,rawData:re.buffer})}Nt.prototype.load=function(Me){var Pe=this.options,te=Pe.log,ge=Pe.minZoom,Ht=Pe.maxZoom,re=Pe.nodeSize;te&&console.time("total time");var Te="prepare "+Me.length+" points";te&&console.time(Te),this.points=Me;for(var ae=[],xe=0;xe<Me.length;xe++)Me[xe].geometry&&ae.push(St(Me[xe],xe));this.trees[Ht+1]=new ft(ae,q,mt,re,Float32Array),te&&console.timeEnd(Te);for(var qe=Ht;qe>=ge;qe--){var zn=+Date.now();ae=this._cluster(ae,qe),this.trees[qe]=new ft(ae,q,mt,re,Float32Array),te&&console.log("z%d: %d clusters in %dms",qe,ae.length,+Date.now()-zn)}return te&&console.timeEnd("total time"),this},Nt.prototype.getClusters=function(Me,Pe){var te=((Me[0]+180)%360+360)%360-180,ge=Math.max(-90,Math.min(90,Me[1])),Ht=Me[2]===180?180:((Me[2]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,Me[3]));if(Me[2]-Me[0]>=360)te=-180,Ht=180;else if(te>Ht){var Te=this.getClusters([te,ge,180,re],Pe),ae=this.getClusters([-180,ge,Ht,re],Pe);return Te.concat(ae)}for(var xe=this.trees[this._limitZoom(Pe)],qe=[],zn=0,ar=xe.range(it(te),At(re),it(Ht),At(ge));zn<ar.length;zn+=1){var _n=xe.points[ar[zn]];qe.push(_n.numPoints?xt(_n):this.points[_n.index])}return qe},Nt.prototype.getChildren=function(Me){var Pe=this._getOriginId(Me),te=this._getOriginZoom(Me),ge="No cluster with the specified id.",Ht=this.trees[te];if(!Ht)throw new Error(ge);var re=Ht.points[Pe];if(!re)throw new Error(ge);for(var Te=this.options.radius/(this.options.extent*Math.pow(2,te-1)),ae=[],xe=0,qe=Ht.within(re.x,re.y,Te);xe<qe.length;xe+=1){var zn=Ht.points[qe[xe]];zn.parentId===Me&&ae.push(zn.numPoints?xt(zn):this.points[zn.index])}if(ae.length===0)throw new Error(ge);return ae},Nt.prototype.getLeaves=function(Me,Pe,te){var ge=[];return this._appendLeaves(ge,Me,Pe=Pe||10,te=te||0,0),ge},Nt.prototype.getTile=function(Me,Pe,te){var ge=this.trees[this._limitZoom(Me)],Ht=Math.pow(2,Me),re=this.options,Te=re.radius/re.extent,ae=(te-Te)/Ht,xe=(te+1+Te)/Ht,qe={features:[]};return this._addTileFeatures(ge.range((Pe-Te)/Ht,ae,(Pe+1+Te)/Ht,xe),ge.points,Pe,te,Ht,qe),Pe===0&&this._addTileFeatures(ge.range(1-Te/Ht,ae,1,xe),ge.points,Ht,te,Ht,qe),Pe===Ht-1&&this._addTileFeatures(ge.range(0,ae,Te/Ht,xe),ge.points,-1,te,Ht,qe),qe.features.length?qe:null},Nt.prototype.getClusterExpansionZoom=function(Me){for(var Pe=this._getOriginZoom(Me)-1;Pe<=this.options.maxZoom;){var te=this.getChildren(Me);if(Pe++,te.length!==1)break;Me=te[0].properties.cluster_id}return Pe},Nt.prototype._appendLeaves=function(Me,Pe,te,ge,Ht){for(var re=0,Te=this.getChildren(Pe);re<Te.length;re+=1){var ae=Te[re],xe=ae.properties;if(xe&&xe.cluster?Ht+xe.point_count<=ge?Ht+=xe.point_count:Ht=this._appendLeaves(Me,xe.cluster_id,te,ge,Ht):Ht<ge?Ht++:Me.push(ae),Me.length===te)break}return Ht},Nt.prototype._addTileFeatures=function(Me,Pe,te,ge,Ht,re){for(var Te=0,ae=Me;Te<ae.length;Te+=1){var xe=Pe[ae[Te]],qe=xe.numPoints,zn={type:1,geometry:[[Math.round(this.options.extent*(xe.x*Ht-te)),Math.round(this.options.extent*(xe.y*Ht-ge))]],tags:qe?Ot(xe):this.points[xe.index].properties},ar=void 0;qe?ar=xe.id:this.options.generateId?ar=xe.index:this.points[xe.index].id&&(ar=this.points[xe.index].id),ar!==void 0&&(zn.id=ar),re.features.push(zn)}},Nt.prototype._limitZoom=function(Me){return Math.max(this.options.minZoom,Math.min(+Me,this.options.maxZoom+1))},Nt.prototype._cluster=function(Me,Pe){for(var te=[],ge=this.options,Ht=ge.reduce,re=ge.minPoints,Te=ge.radius/(ge.extent*Math.pow(2,Pe)),ae=0;ae<Me.length;ae++){var xe=Me[ae];if(!(xe.zoom<=Pe)){xe.zoom=Pe;for(var qe=this.trees[Pe+1],zn=qe.within(xe.x,xe.y,Te),ar=xe.numPoints||1,_n=ar,Cn=0,Or=zn;Cn<Or.length;Cn+=1){var Ar=qe.points[Or[Cn]];Ar.zoom>Pe&&(_n+=Ar.numPoints||1)}if(_n>=re){for(var hn=xe.x*ar,Pr=xe.y*ar,yr=Ht&&ar>1?this._map(xe,!0):null,Re=(ae<<5)+(Pe+1)+this.points.length,We=0,Ye=zn;We<Ye.length;We+=1){var dn=qe.points[Ye[We]];if(!(dn.zoom<=Pe)){dn.zoom=Pe;var En=dn.numPoints||1;hn+=dn.x*En,Pr+=dn.y*En,dn.parentId=Re,Ht&&(yr||(yr=this._map(xe,!0)),Ht(yr,this._map(dn)))}}xe.parentId=Re,te.push(Dt(hn/_n,Pr/_n,Re,_n,yr))}else if(te.push(xe),_n>1)for(var Dn=0,Sn=zn;Dn<Sn.length;Dn+=1){var Nn=qe.points[Sn[Dn]];Nn.zoom<=Pe||(Nn.zoom=Pe,te.push(Nn))}}}return te},Nt.prototype._getOriginId=function(Me){return Me-this.points.length>>5},Nt.prototype._getOriginZoom=function(Me){return(Me-this.points.length)%32},Nt.prototype._map=function(Me,Pe){if(Me.numPoints)return Pe?z({},Me.properties):Me.properties;var te=this.points[Me.index].properties,ge=this.options.map(te);return Pe&&ge===te?z({},ge):ge},tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tn.prototype.splitTile=function(Me,Pe,te,ge,Ht,re,Te){for(var ae=[Me,Pe,te,ge],xe=this.options,qe=xe.debug;ae.length;){ge=ae.pop(),te=ae.pop(),Pe=ae.pop(),Me=ae.pop();var zn=1<<Pe,ar=xn(Pe,te,ge),_n=this.tiles[ar];if(!_n&&(qe>1&&console.time("creation"),_n=this.tiles[ar]=Fn(Me,Pe,te,ge,xe),this.tileCoords.push({z:Pe,x:te,y:ge}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Pe,te,ge,_n.numFeatures,_n.numPoints,_n.numSimplified),console.timeEnd("creation"));var Cn="z"+Pe;this.stats[Cn]=(this.stats[Cn]||0)+1,this.total++}if(_n.source=Me,Ht){if(Pe===xe.maxZoom||Pe===Ht)continue;var Or=1<<Ht-Pe;if(te!==Math.floor(re/Or)||ge!==Math.floor(Te/Or))continue}else if(Pe===xe.indexMaxZoom||_n.numPoints<=xe.indexMaxPoints)continue;if(_n.source=null,Me.length!==0){qe>1&&console.time("clipping");var Ar,hn,Pr,yr,Re,We,Ye=.5*xe.buffer/xe.extent,dn=.5-Ye,En=.5+Ye,Dn=1+Ye;Ar=hn=Pr=yr=null,Re=Ft(Me,zn,te-Ye,te+En,0,_n.minX,_n.maxX,xe),We=Ft(Me,zn,te+dn,te+Dn,0,_n.minX,_n.maxX,xe),Me=null,Re&&(Ar=Ft(Re,zn,ge-Ye,ge+En,1,_n.minY,_n.maxY,xe),hn=Ft(Re,zn,ge+dn,ge+Dn,1,_n.minY,_n.maxY,xe),Re=null),We&&(Pr=Ft(We,zn,ge-Ye,ge+En,1,_n.minY,_n.maxY,xe),yr=Ft(We,zn,ge+dn,ge+Dn,1,_n.minY,_n.maxY,xe),We=null),qe>1&&console.timeEnd("clipping"),ae.push(Ar||[],Pe+1,2*te,2*ge),ae.push(hn||[],Pe+1,2*te,2*ge+1),ae.push(Pr||[],Pe+1,2*te+1,2*ge),ae.push(yr||[],Pe+1,2*te+1,2*ge+1)}}},tn.prototype.getTile=function(Me,Pe,te){var ge=this.options,Ht=ge.extent,re=ge.debug;if(Me<0||Me>24)return null;var Te=1<<Me,ae=xn(Me,Pe=(Pe%Te+Te)%Te,te);if(this.tiles[ae])return Ne(this.tiles[ae],Ht);re>1&&console.log("drilling down to z%d-%d-%d",Me,Pe,te);for(var xe,qe=Me,zn=Pe,ar=te;!xe&&qe>0;)qe--,zn=Math.floor(zn/2),ar=Math.floor(ar/2),xe=this.tiles[xn(qe,zn,ar)];return xe&&xe.source?(re>1&&console.log("found parent tile z%d-%d-%d",qe,zn,ar),re>1&&console.time("drilling down"),this.splitTile(xe.source,qe,zn,ar,Me,Pe,te),re>1&&console.timeEnd("drilling down"),this.tiles[ae]?Ne(this.tiles[ae],Ht):null):null};var vr=function(Me){function Pe(te,ge,Ht,re){Me.call(this,te,ge,Ht,Bn),re&&(this.loadGeoJSON=re)}return Me&&(Pe.__proto__=Me),(Pe.prototype=Object.create(Me&&Me.prototype)).constructor=Pe,Pe.prototype.loadData=function(te,ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ge,this._pendingLoadDataParams=te,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Pe.prototype._loadData=function(){var te=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ge=this._pendingCallback,Ht=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var re=!!(Ht&&Ht.request&&Ht.request.collectResourceTiming)&&new t.RequestPerformance(Ht.request);this.loadGeoJSON(Ht,function(Te,ae){if(Te||!ae)return ge(Te);if(typeof ae!="object")return ge(new Error("Input data given to '"+Ht.source+"' is not a valid GeoJSON object."));(function _n(Cn,Or){var Ar,hn=Cn&&Cn.type;if(hn==="FeatureCollection")for(Ar=0;Ar<Cn.features.length;Ar++)_n(Cn.features[Ar],Or);else if(hn==="GeometryCollection")for(Ar=0;Ar<Cn.geometries.length;Ar++)_n(Cn.geometries[Ar],Or);else if(hn==="Feature")_n(Cn.geometry,Or);else if(hn==="Polygon")f(Cn.coordinates,Or);else if(hn==="MultiPolygon")for(Ar=0;Ar<Cn.coordinates.length;Ar++)f(Cn.coordinates[Ar],Or);return Cn})(ae,!0);try{if(Ht.filter){var xe=t.createExpression(Ht.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(xe.result==="error")throw new Error(xe.value.map(function(_n){return _n.key+": "+_n.message}).join(", "));var qe=ae.features.filter(function(_n){return xe.value.evaluate({zoom:0},_n)});ae={type:"FeatureCollection",features:qe}}te._geoJSONIndex=Ht.cluster?new Nt(function(_n){var Cn=_n.superclusterOptions,Or=_n.clusterProperties;if(!Or||!Cn)return Cn;for(var Ar={},hn={},Pr={accumulated:null,zoom:0},yr={properties:null},Re=Object.keys(Or),We=0,Ye=Re;We<Ye.length;We+=1){var dn=Ye[We],En=Or[dn],Dn=En[0],Sn=t.createExpression(En[1]),Nn=t.createExpression(typeof Dn=="string"?[Dn,["accumulated"],["get",dn]]:Dn);Ar[dn]=Sn.value,hn[dn]=Nn.value}return Cn.map=function(nr){yr.properties=nr;for(var Gn={},Tn=0,Cr=Re;Tn<Cr.length;Tn+=1){var pr=Cr[Tn];Gn[pr]=Ar[pr].evaluate(Pr,yr)}return Gn},Cn.reduce=function(nr,Gn){yr.properties=Gn;for(var Tn=0,Cr=Re;Tn<Cr.length;Tn+=1){var pr=Cr[Tn];Pr.accumulated=nr[pr],nr[pr]=hn[pr].evaluate(Pr,yr)}},Cn}(Ht)).load(ae.features):function(_n,Cn){return new tn(_n,Cn)}(ae,Ht.geojsonVtOptions)}catch(_n){return ge(_n)}te.loaded={};var zn={};if(re){var ar=re.finish();ar&&(zn.resourceTiming={},zn.resourceTiming[Ht.source]=JSON.parse(JSON.stringify(ar)))}ge(null,zn)})}},Pe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Pe.prototype.reloadTile=function(te,ge){var Ht=this.loaded;return Ht&&Ht[te.uid]?Me.prototype.reloadTile.call(this,te,ge):this.loadTile(te,ge)},Pe.prototype.loadGeoJSON=function(te,ge){if(te.request)t.getJSON(te.request,ge);else{if(typeof te.data!="string")return ge(new Error("Input data given to '"+te.source+"' is not a valid GeoJSON object."));try{return ge(null,JSON.parse(te.data))}catch(Ht){return ge(new Error("Input data given to '"+te.source+"' is not a valid GeoJSON object."))}}},Pe.prototype.removeSource=function(te,ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ge()},Pe.prototype.getClusterExpansionZoom=function(te,ge){try{ge(null,this._geoJSONIndex.getClusterExpansionZoom(te.clusterId))}catch(Ht){ge(Ht)}},Pe.prototype.getClusterChildren=function(te,ge){try{ge(null,this._geoJSONIndex.getChildren(te.clusterId))}catch(Ht){ge(Ht)}},Pe.prototype.getClusterLeaves=function(te,ge){try{ge(null,this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset))}catch(Ht){ge(Ht)}},Pe}(a),li=function(Pe){var te=this;this.self=Pe,this.actor=new t.Actor(Pe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:a,geojson:vr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ge,Ht){if(te.workerSourceTypes[ge])throw new Error('Worker source with name "'+ge+'" already registered.');te.workerSourceTypes[ge]=Ht},this.self.registerRTLTextPlugin=function(ge){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=ge.applyArabicShaping,t.plugin.processBidirectionalText=ge.processBidirectionalText,t.plugin.processStyledBidirectionalText=ge.processStyledBidirectionalText}};return li.prototype.setReferrer=function(Me,Pe){this.referrer=Pe},li.prototype.setImages=function(Me,Pe,te){for(var ge in this.availableImages[Me]=Pe,this.workerSources[Me]){var Ht=this.workerSources[Me][ge];for(var re in Ht)Ht[re].availableImages=Pe}te()},li.prototype.setLayers=function(Me,Pe,te){this.getLayerIndex(Me).replace(Pe),te()},li.prototype.updateLayers=function(Me,Pe,te){this.getLayerIndex(Me).update(Pe.layers,Pe.removedIds),te()},li.prototype.loadTile=function(Me,Pe,te){this.getWorkerSource(Me,Pe.type,Pe.source).loadTile(Pe,te)},li.prototype.loadDEMTile=function(Me,Pe,te){this.getDEMWorkerSource(Me,Pe.source).loadTile(Pe,te)},li.prototype.reloadTile=function(Me,Pe,te){this.getWorkerSource(Me,Pe.type,Pe.source).reloadTile(Pe,te)},li.prototype.abortTile=function(Me,Pe,te){this.getWorkerSource(Me,Pe.type,Pe.source).abortTile(Pe,te)},li.prototype.removeTile=function(Me,Pe,te){this.getWorkerSource(Me,Pe.type,Pe.source).removeTile(Pe,te)},li.prototype.removeDEMTile=function(Me,Pe){this.getDEMWorkerSource(Me,Pe.source).removeTile(Pe)},li.prototype.removeSource=function(Me,Pe,te){if(this.workerSources[Me]&&this.workerSources[Me][Pe.type]&&this.workerSources[Me][Pe.type][Pe.source]){var ge=this.workerSources[Me][Pe.type][Pe.source];delete this.workerSources[Me][Pe.type][Pe.source],ge.removeSource!==void 0?ge.removeSource(Pe,te):te()}},li.prototype.loadWorkerSource=function(Me,Pe,te){try{this.self.importScripts(Pe.url),te()}catch(ge){te(ge.toString())}},li.prototype.syncRTLPluginState=function(Me,Pe,te){try{t.plugin.setState(Pe);var ge=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&ge!=null){this.self.importScripts(ge);var Ht=t.plugin.isParsed();te(Ht?void 0:new Error("RTL Text Plugin failed to import scripts from "+ge),Ht)}}catch(re){te(re.toString())}},li.prototype.getAvailableImages=function(Me){var Pe=this.availableImages[Me];return Pe||(Pe=[]),Pe},li.prototype.getLayerIndex=function(Me){var Pe=this.layerIndexes[Me];return Pe||(Pe=this.layerIndexes[Me]=new h),Pe},li.prototype.getWorkerSource=function(Me,Pe,te){var ge=this;return this.workerSources[Me]||(this.workerSources[Me]={}),this.workerSources[Me][Pe]||(this.workerSources[Me][Pe]={}),this.workerSources[Me][Pe][te]||(this.workerSources[Me][Pe][te]=new this.workerSourceTypes[Pe]({send:function(re,Te,ae){ge.actor.send(re,Te,ae,Me)}},this.getLayerIndex(Me),this.getAvailableImages(Me))),this.workerSources[Me][Pe][te]},li.prototype.getDEMWorkerSource=function(Me,Pe){return this.demWorkerSources[Me]||(this.demWorkerSources[Me]={}),this.demWorkerSources[Me][Pe]||(this.demWorkerSources[Me][Pe]=new l),this.demWorkerSources[Me][Pe]},li.prototype.enforceCacheSizeLimit=function(Me,Pe){t.enforceCacheSizeLimit(Pe)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new li(self)),li}),e(["./shared"],function(t){"use strict";var u=t.createCommonjsModule(function(j){function I(D){return!w(D)}function w(D){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Q,ut,wt=new Blob([""],{type:"text/javascript"}),It=URL.createObjectURL(wt);try{ut=new Worker(It),Q=!0}catch(kt){Q=!1}return ut&&ut.terminate(),URL.revokeObjectURL(It),Q}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Q=document.createElement("canvas");Q.width=Q.height=1;var ut=Q.getContext("2d");if(!ut)return!1;var wt=ut.getImageData(0,0,1,1);return wt&&wt.width===Q.width}()?(B[G=D&&D.failIfMajorPerformanceCaveat]===void 0&&(B[G]=function(Q){var ut=function(It){var kt=document.createElement("canvas"),Yt=Object.create(I.webGLContextAttributes);return Yt.failIfMajorPerformanceCaveat=It,kt.probablySupportsContext?kt.probablySupportsContext("webgl",Yt)||kt.probablySupportsContext("experimental-webgl",Yt):kt.supportsContext?kt.supportsContext("webgl",Yt)||kt.supportsContext("experimental-webgl",Yt):kt.getContext("webgl",Yt)||kt.getContext("experimental-webgl",Yt)}(Q);if(!ut)return!1;var wt=ut.createShader(ut.VERTEX_SHADER);return!(!wt||ut.isContextLost())&&(ut.shaderSource(wt,"void main() {}"),ut.compileShader(wt),ut.getShaderParameter(wt,ut.COMPILE_STATUS)===!0)}(G)),B[G]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var G}j.exports?j.exports=I:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=I,window.mapboxgl.notSupportedReason=w);var B={};I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),s={create:function(I,w,B){var D=t.window.document.createElement(I);return w!==void 0&&(D.className=w),B&&B.appendChild(D),D},createNS:function(I,w){return t.window.document.createElementNS(I,w)}},h=t.window.document&&t.window.document.documentElement.style;function r(j){if(!h)return j[0];for(var I=0;I<j.length;I++)if(j[I]in h)return j[I];return j[0]}var c,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);s.disableDrag=function(){h&&n&&(c=h[n],h[n]="none")},s.enableDrag=function(){h&&n&&(h[n]=c)};var i=r(["transform","WebkitTransform"]);s.setTransform=function(j,I){j.style[i]=I};var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});t.window.addEventListener("test",o,o),t.window.removeEventListener("test",o,o)}catch(j){a=!1}s.addEventListener=function(j,I,w,B){B===void 0&&(B={}),j.addEventListener(I,w,"passive"in B&&a?B:B.capture)},s.removeEventListener=function(j,I,w,B){B===void 0&&(B={}),j.removeEventListener(I,w,"passive"in B&&a?B:B.capture)};var l=function j(I){I.preventDefault(),I.stopPropagation(),t.window.removeEventListener("click",j,!0)};function f(j){var I=j.userImage;return!!(I&&I.render&&I.render())&&(j.data.replace(new Uint8Array(I.data.buffer)),!0)}s.suppressClick=function(){t.window.addEventListener("click",l,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",l,!0)},0)},s.mousePos=function(j,I){var w=j.getBoundingClientRect();return new t.Point(I.clientX-w.left-j.clientLeft,I.clientY-w.top-j.clientTop)},s.touchPos=function(j,I){for(var w=j.getBoundingClientRect(),B=[],D=0;D<I.length;D++)B.push(new t.Point(I[D].clientX-w.left-j.clientLeft,I[D].clientY-w.top-j.clientTop));return B},s.mouseButton=function(j){return t.window.InstallTrigger!==void 0&&j.button===2&&j.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:j.button},s.remove=function(j){j.parentNode&&j.parentNode.removeChild(j)};var v=function(j){function I(){j.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.isLoaded=function(){return this.loaded},I.prototype.setLoaded=function(w){if(this.loaded!==w&&(this.loaded=w,w)){for(var B=0,D=this.requestors;B<D.length;B+=1){var G=D[B];this._notify(G.ids,G.callback)}this.requestors=[]}},I.prototype.getImage=function(w){return this.images[w]},I.prototype.addImage=function(w,B){this._validate(w,B)&&(this.images[w]=B)},I.prototype._validate=function(w,B){var D=!0;return this._validateStretch(B.stretchX,B.data&&B.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchX" value'))),D=!1),this._validateStretch(B.stretchY,B.data&&B.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchY" value'))),D=!1),this._validateContent(B.content,B)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "content" value'))),D=!1),D},I.prototype._validateStretch=function(w,B){if(!w)return!0;for(var D=0,G=0,Q=w;G<Q.length;G+=1){var ut=Q[G];if(ut[0]<D||ut[1]<ut[0]||B<ut[1])return!1;D=ut[1]}return!0},I.prototype._validateContent=function(w,B){return!(w&&(w.length!==4||w[0]<0||B.data.width<w[0]||w[1]<0||B.data.height<w[1]||w[2]<0||B.data.width<w[2]||w[3]<0||B.data.height<w[3]||w[2]<w[0]||w[3]<w[1]))},I.prototype.updateImage=function(w,B){B.version=this.images[w].version+1,this.images[w]=B,this.updatedImages[w]=!0},I.prototype.removeImage=function(w){var B=this.images[w];delete this.images[w],delete this.patterns[w],B.userImage&&B.userImage.onRemove&&B.userImage.onRemove()},I.prototype.listImages=function(){return Object.keys(this.images)},I.prototype.getImages=function(w,B){var D=!0;if(!this.isLoaded())for(var G=0,Q=w;G<Q.length;G+=1)this.images[Q[G]]||(D=!1);this.isLoaded()||D?this._notify(w,B):this.requestors.push({ids:w,callback:B})},I.prototype._notify=function(w,B){for(var D={},G=0,Q=w;G<Q.length;G+=1){var ut=Q[G];this.images[ut]||this.fire(new t.Event("styleimagemissing",{id:ut}));var wt=this.images[ut];wt?D[ut]={data:wt.data.clone(),pixelRatio:wt.pixelRatio,sdf:wt.sdf,version:wt.version,stretchX:wt.stretchX,stretchY:wt.stretchY,content:wt.content,hasRenderCallback:Boolean(wt.userImage&&wt.userImage.render)}:t.warnOnce('Image "'+ut+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}B(null,D)},I.prototype.getPixelSize=function(){var w=this.atlasImage;return{width:w.width,height:w.height}},I.prototype.getPattern=function(w){var B=this.patterns[w],D=this.getImage(w);if(!D)return null;if(B&&B.position.version===D.version)return B.position;if(B)B.position.version=D.version;else{var G={w:D.data.width+2,h:D.data.height+2,x:0,y:0},Q=new t.ImagePosition(G,D);this.patterns[w]={bin:G,position:Q}}return this._updatePatternAtlas(),this.patterns[w].position},I.prototype.bind=function(w){var B=w.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(w,this.atlasImage,B.RGBA),this.atlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE)},I.prototype._updatePatternAtlas=function(){var w=[];for(var B in this.patterns)w.push(this.patterns[B].bin);var D=t.potpack(w),G=D.w,Q=D.h,ut=this.atlasImage;for(var wt in ut.resize({width:G||1,height:Q||1}),this.patterns){var It=this.patterns[wt].bin,kt=It.x+1,Yt=It.y+1,qt=this.images[wt].data,ce=qt.width,ye=qt.height;t.RGBAImage.copy(qt,ut,{x:0,y:0},{x:kt,y:Yt},{width:ce,height:ye}),t.RGBAImage.copy(qt,ut,{x:0,y:ye-1},{x:kt,y:Yt-1},{width:ce,height:1}),t.RGBAImage.copy(qt,ut,{x:0,y:0},{x:kt,y:Yt+ye},{width:ce,height:1}),t.RGBAImage.copy(qt,ut,{x:ce-1,y:0},{x:kt-1,y:Yt},{width:1,height:ye}),t.RGBAImage.copy(qt,ut,{x:0,y:0},{x:kt+ce,y:Yt},{width:1,height:ye})}this.dirty=!0},I.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},I.prototype.dispatchRenderCallbacks=function(w){for(var B=0,D=w;B<D.length;B+=1){var G=D[B];if(!this.callbackDispatchedThisFrame[G]){this.callbackDispatchedThisFrame[G]=!0;var Q=this.images[G];f(Q)&&this.updateImage(G,Q)}}},I}(t.Evented),b=_,g=_,y=1e20;function _(j,I,w,B,D,G){this.fontSize=j||24,this.buffer=I===void 0?3:I,this.cutoff=B||.25,this.fontFamily=D||"sans-serif",this.fontWeight=G||"normal",this.radius=w||8;var Q=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Q,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Q*Q),this.gridInner=new Float64Array(Q*Q),this.f=new Float64Array(Q),this.d=new Float64Array(Q),this.z=new Float64Array(Q+1),this.v=new Int16Array(Q),this.middle=Math.round(Q/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(j,I,w,B,D,G,Q){for(var ut=0;ut<I;ut++){for(var wt=0;wt<w;wt++)B[wt]=j[wt*I+ut];for(x(B,D,G,Q,w),wt=0;wt<w;wt++)j[wt*I+ut]=D[wt]}for(wt=0;wt<w;wt++){for(ut=0;ut<I;ut++)B[ut]=j[wt*I+ut];for(x(B,D,G,Q,I),ut=0;ut<I;ut++)j[wt*I+ut]=Math.sqrt(D[ut])}}function x(j,I,w,B,D){w[0]=0,B[0]=-y,B[1]=+y;for(var G=1,Q=0;G<D;G++){for(var ut=(j[G]+G*G-(j[w[Q]]+w[Q]*w[Q]))/(2*G-2*w[Q]);ut<=B[Q];)Q--,ut=(j[G]+G*G-(j[w[Q]]+w[Q]*w[Q]))/(2*G-2*w[Q]);w[++Q]=G,B[Q]=ut,B[Q+1]=+y}for(G=0,Q=0;G<D;G++){for(;B[Q+1]<G;)Q++;I[G]=(G-w[Q])*(G-w[Q])+j[w[Q]]}}_.prototype.draw=function(j){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(j,this.buffer,this.middle);for(var I=this.ctx.getImageData(0,0,this.size,this.size),w=new Uint8ClampedArray(this.size*this.size),B=0;B<this.size*this.size;B++){var D=I.data[4*B+3]/255;this.gridOuter[B]=D===1?0:D===0?y:Math.pow(Math.max(0,.5-D),2),this.gridInner[B]=D===1?y:D===0?0:Math.pow(Math.max(0,D-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),B=0;B<this.size*this.size;B++)w[B]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[B]-this.gridInner[B])/this.radius+this.cutoff))));return w},b.default=g;var m=function(I,w){this.requestManager=I,this.localIdeographFontFamily=w,this.entries={}};m.prototype.setURL=function(j){this.url=j},m.prototype.getGlyphs=function(j,I){var w=this,B=[];for(var D in j)for(var G=0,Q=j[D];G<Q.length;G+=1)B.push({stack:D,id:Q[G]});t.asyncAll(B,function(ut,wt){var It=ut.stack,kt=ut.id,Yt=w.entries[It];Yt||(Yt=w.entries[It]={glyphs:{},requests:{},ranges:{}});var qt=Yt.glyphs[kt];if(qt===void 0){if(qt=w._tinySDF(Yt,It,kt))return Yt.glyphs[kt]=qt,void wt(null,{stack:It,id:kt,glyph:qt});var ce=Math.floor(kt/256);if(256*ce>65535)wt(new Error("glyphs > 65535 not supported"));else if(Yt.ranges[ce])wt(null,{stack:It,id:kt,glyph:qt});else{var ye=Yt.requests[ce];ye||(ye=Yt.requests[ce]=[],m.loadGlyphRange(It,ce,w.url,w.requestManager,function(Le,Ce){if(Ce){for(var ke in Ce)w._doesCharSupportLocalGlyph(+ke)||(Yt.glyphs[+ke]=Ce[+ke]);Yt.ranges[ce]=!0}for(var nn=0,ln=ye;nn<ln.length;nn+=1)(0,ln[nn])(Le,Ce);delete Yt.requests[ce]})),ye.push(function(Le,Ce){Le?wt(Le):Ce&&wt(null,{stack:It,id:kt,glyph:Ce[kt]||null})})}}else wt(null,{stack:It,id:kt,glyph:qt})},function(ut,wt){if(ut)I(ut);else if(wt){for(var It={},kt=0,Yt=wt;kt<Yt.length;kt+=1){var qt=Yt[kt],ce=qt.stack,ye=qt.id,Le=qt.glyph;(It[ce]||(It[ce]={}))[ye]=Le&&{id:Le.id,bitmap:Le.bitmap.clone(),metrics:Le.metrics}}I(null,It)}})},m.prototype._doesCharSupportLocalGlyph=function(j){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](j)||t.isChar["Hangul Syllables"](j)||t.isChar.Hiragana(j)||t.isChar.Katakana(j))},m.prototype._tinySDF=function(j,I,w){var B=this.localIdeographFontFamily;if(B&&this._doesCharSupportLocalGlyph(w)){var D=j.tinySDF;if(!D){var G="400";/bold/i.test(I)?G="900":/medium/i.test(I)?G="500":/light/i.test(I)&&(G="200"),D=j.tinySDF=new m.TinySDF(24,3,8,.25,B,G)}return{id:w,bitmap:new t.AlphaImage({width:30,height:30},D.draw(String.fromCharCode(w))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(j,I,w,B,D){var G=256*I,Q=G+255,ut=B.transformRequest(B.normalizeGlyphsURL(w).replace("{fontstack}",j).replace("{range}",G+"-"+Q),t.ResourceType.Glyphs);t.getArrayBuffer(ut,function(wt,It){if(wt)D(wt);else if(It){for(var kt={},Yt=0,qt=t.parseGlyphPBF(It);Yt<qt.length;Yt+=1){var ce=qt[Yt];kt[ce.id]=ce}D(null,kt)}})},m.TinySDF=b;var S=function(){this.specification=t.styleSpec.light.position};S.prototype.possiblyEvaluate=function(j,I){return t.sphericalToCartesian(j.expression.evaluate(I))},S.prototype.interpolate=function(j,I,w){return{x:t.number(j.x,I.x,w),y:t.number(j.y,I.y,w),z:t.number(j.z,I.z,w)}};var P=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new S,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),A=function(j){function I(w){j.call(this),this._transitionable=new t.Transitionable(P),this.setLight(w),this._transitioning=this._transitionable.untransitioned()}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getLight=function(){return this._transitionable.serialize()},I.prototype.setLight=function(w,B){if(B===void 0&&(B={}),!this._validate(t.validateLight,w,B))for(var D in w){var G=w[D];t.endsWith(D,"-transition")?this._transitionable.setTransition(D.slice(0,-"-transition".length),G):this._transitionable.setValue(D,G)}},I.prototype.updateTransitions=function(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)},I.prototype.hasTransition=function(){return this._transitioning.hasTransition()},I.prototype.recalculate=function(w){this.properties=this._transitioning.possiblyEvaluate(w)},I.prototype._validate=function(w,B,D){return(!D||D.validate!==!1)&&t.emitValidationErrors(this,w.call(t.validateStyle,t.extend({value:B,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},I}(t.Evented),O=function(I,w){this.width=I,this.height=w,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(j,I){var w=j.join(",")+String(I);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(j,I)),this.dashEntry[w]},O.prototype.getDashRanges=function(j,I,w){var B=[],D=j.length%2==1?-j[j.length-1]*w:0,G=j[0]*w,Q=!0;B.push({left:D,right:G,isDash:Q,zeroLength:j[0]===0});for(var ut=j[0],wt=1;wt<j.length;wt++){var It=j[wt];B.push({left:D=ut*w,right:G=(ut+=It)*w,isDash:Q=!Q,zeroLength:It===0})}return B},O.prototype.addRoundDash=function(j,I,w){for(var B=I/2,D=-w;D<=w;D++)for(var G=this.width*(this.nextRow+w+D),Q=0,ut=j[Q],wt=0;wt<this.width;wt++){wt/ut.right>1&&(ut=j[++Q]);var It=Math.abs(wt-ut.left),kt=Math.abs(wt-ut.right),Yt=Math.min(It,kt),qt=void 0,ce=D/w*(B+1);if(ut.isDash){var ye=B-Math.abs(ce);qt=Math.sqrt(Yt*Yt+ye*ye)}else qt=B-Math.sqrt(Yt*Yt+ce*ce);this.data[G+wt]=Math.max(0,Math.min(255,qt+128))}},O.prototype.addRegularDash=function(j){for(var I=j.length-1;I>=0;--I){var w=j[I],B=j[I+1];w.zeroLength?j.splice(I,1):B&&B.isDash===w.isDash&&(B.left=w.left,j.splice(I,1))}var D=j[0],G=j[j.length-1];D.isDash===G.isDash&&(D.left=G.left-this.width,G.right=D.right+this.width);for(var Q=this.width*this.nextRow,ut=0,wt=j[ut],It=0;It<this.width;It++){It/wt.right>1&&(wt=j[++ut]);var kt=Math.abs(It-wt.left),Yt=Math.abs(It-wt.right),qt=Math.min(kt,Yt);this.data[Q+It]=Math.max(0,Math.min(255,(wt.isDash?qt:-qt)+128))}},O.prototype.addDash=function(j,I){var w=I?7:0,B=2*w+1;if(this.nextRow+B>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var D=0,G=0;G<j.length;G++)D+=j[G];if(D!==0){var Q=this.width/D,ut=this.getDashRanges(j,this.width,Q);I?this.addRoundDash(ut,Q,w):this.addRegularDash(ut)}var wt={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:D};return this.nextRow+=B,this.dirty=!0,wt},O.prototype.bind=function(j){var I=j.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))};var R=function j(I,w){this.workerPool=I,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var B=this.workerPool.acquire(this.id),D=0;D<B.length;D++){var G=new j.Actor(B[D],w,this.id);G.name="Worker "+D,this.actors.push(G)}};function H(j,I,w){var B=function(G,Q){if(G)return w(G);if(Q){var ut=t.pick(t.extend(Q,j),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Q.vector_layers&&(ut.vectorLayers=Q.vector_layers,ut.vectorLayerIds=ut.vectorLayers.map(function(wt){return wt.id})),ut.tiles=I.canonicalizeTileset(ut,j.url),w(null,ut)}};return j.url?t.getJSON(I.transformRequest(I.normalizeSourceURL(j.url),t.ResourceType.Source),B):t.browser.frame(function(){return B(null,j)})}R.prototype.broadcast=function(j,I,w){t.asyncAll(this.actors,function(B,D){B.send(j,I,D)},w=w||function(){})},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(j){j.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=t.Actor;var N=function(I,w,B){this.bounds=t.LngLatBounds.convert(this.validateBounds(I)),this.minzoom=w||0,this.maxzoom=B||24};N.prototype.validateBounds=function(j){return Array.isArray(j)&&j.length===4?[Math.max(-180,j[0]),Math.max(-90,j[1]),Math.min(180,j[2]),Math.min(90,j[3])]:[-180,-90,180,90]},N.prototype.contains=function(j){var I=Math.pow(2,j.z),w=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*I),B=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*I),D=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*I),G=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*I);return j.x>=w&&j.x<D&&j.y>=B&&j.y<G};var K=function(j){function I(w,B,D,G){if(j.call(this),this.id=w,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(B,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},B),this._collectResourceTiming=B.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(G)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new N(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles,w.map._requestManager._customAccessToken),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken,w.map._requestManager._customAccessToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setSourceProperty=function(w){this._tileJSONRequest&&this._tileJSONRequest.cancel(),w(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},I.prototype.setTiles=function(w){var B=this;return this.setSourceProperty(function(){B._options.tiles=w}),this},I.prototype.setUrl=function(w){var B=this;return this.setSourceProperty(function(){B.url=w,B._options.url=w}),this},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme)),G={request:this.map._requestManager.transformRequest(D,t.ResourceType.Tile),uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,tileSize:this.tileSize*w.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Q(ut,wt){return delete w.request,w.aborted?B(null):ut&&ut.status!==404?B(ut):(wt&&wt.resourceTiming&&(w.resourceTiming=wt.resourceTiming),this.map._refreshExpiredTiles&&wt&&w.setExpiryData(wt),w.loadVectorData(wt,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),B(null),void(w.reloadCallback&&(this.loadTile(w,w.reloadCallback),w.reloadCallback=null)))}G.request.collectResourceTiming=this._collectResourceTiming,w.actor&&w.state!=="expired"?w.state==="loading"?w.reloadCallback=B:w.request=w.actor.send("reloadTile",G,Q.bind(this)):(w.actor=this.dispatcher.getActor(),w.request=w.actor.send("loadTile",G,Q.bind(this)))},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.actor&&w.actor.send("abortTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.unloadTile=function(w){w.unloadVectorData(),w.actor&&w.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.hasTransition=function(){return!1},I}(t.Evented),V=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.dispatcher=D,this.setEventedParent(G),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},B),t.extend(this,t.pick(B,["url","scheme","tileSize"]))}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new N(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.loadTile=function(w,B){var D=this,G=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);w.request=t.getImage(this.map._requestManager.transformRequest(G,t.ResourceType.Tile),function(Q,ut){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(Q)w.state="errored",B(Q);else if(ut){D.map._refreshExpiredTiles&&w.setExpiryData(ut),delete ut.cacheControl,delete ut.expires;var wt=D.map.painter.context,It=wt.gl;w.texture=D.map.painter.getTileTexture(ut.width),w.texture?w.texture.update(ut,{useMipmap:!0}):(w.texture=new t.Texture(wt,ut,It.RGBA,{useMipmap:!0}),w.texture.bind(It.LINEAR,It.CLAMP_TO_EDGE,It.LINEAR_MIPMAP_NEAREST),wt.extTextureFilterAnisotropic&&It.texParameterf(It.TEXTURE_2D,wt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,wt.extTextureFilterAnisotropicMax)),w.state="loaded",t.cacheEntryPossiblyAdded(D.dispatcher),B(null)}})},I.prototype.abortTile=function(w,B){w.request&&(w.request.cancel(),delete w.request),B()},I.prototype.unloadTile=function(w,B){w.texture&&this.map.painter.saveTileTexture(w.texture),B()},I.prototype.hasTransition=function(){return!1},I}(t.Evented),k=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},B),this.encoding=B.encoding||"mapbox"}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function G(Q,ut){Q&&(w.state="errored",B(Q)),ut&&(w.dem=ut,w.needsHillshadePrepare=!0,w.state="loaded",B(null))}w.request=t.getImage(this.map._requestManager.transformRequest(D,t.ResourceType.Tile),function(Q,ut){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(Q)w.state="errored",B(Q);else if(ut){this.map._refreshExpiredTiles&&w.setExpiryData(ut),delete ut.cacheControl,delete ut.expires;var wt=t.window.ImageBitmap&&ut instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?ut:t.browser.getImageData(ut,1),It={uid:w.uid,coord:w.tileID,source:this.id,rawImageData:wt,encoding:this.encoding};w.actor&&w.state!=="expired"||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",It,G.bind(this)))}}.bind(this)),w.neighboringTiles=this._getNeighboringTiles(w.tileID)},I.prototype._getNeighboringTiles=function(w){var B=w.canonical,D=Math.pow(2,B.z),G=(B.x-1+D)%D,Q=B.x===0?w.wrap-1:w.wrap,ut=(B.x+1+D)%D,wt=B.x+1===D?w.wrap+1:w.wrap,It={};return It[new t.OverscaledTileID(w.overscaledZ,Q,B.z,G,B.y).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,wt,B.z,ut,B.y).key]={backfilled:!1},B.y>0&&(It[new t.OverscaledTileID(w.overscaledZ,Q,B.z,G,B.y-1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y-1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,wt,B.z,ut,B.y-1).key]={backfilled:!1}),B.y+1<D&&(It[new t.OverscaledTileID(w.overscaledZ,Q,B.z,G,B.y+1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y+1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,wt,B.z,ut,B.y+1).key]={backfilled:!1}),It},I.prototype.unloadTile=function(w){w.demTexture&&this.map.painter.saveTileTexture(w.demTexture),w.fbo&&(w.fbo.destroy(),delete w.fbo),w.dem&&delete w.dem,delete w.neighboringTiles,w.state="unloaded",w.actor&&w.actor.send("removeDEMTile",{uid:w.uid,source:this.id})},I}(V),Z=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=D.getActor(),this.setEventedParent(G),this._data=B.data,this._options=t.extend({},B),this._collectResourceTiming=B.collectResourceTiming,this._resourceTiming=[],B.maxzoom!==void 0&&(this.maxzoom=B.maxzoom),B.type&&(this.type=B.type),B.attribution&&(this.attribution=B.attribution),this.promoteId=B.promoteId;var Q=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:B.cluster||!1,geojsonVtOptions:{buffer:(B.buffer!==void 0?B.buffer:128)*Q,tolerance:(B.tolerance!==void 0?B.tolerance:.375)*Q,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:B.lineMetrics||!1,generateId:B.generateId||!1},superclusterOptions:{maxZoom:B.clusterMaxZoom!==void 0?Math.min(B.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,B.clusterMinPoints||2),extent:t.EXTENT,radius:(B.clusterRadius||50)*Q,log:!1,generateId:B.generateId||!1},clusterProperties:B.clusterProperties,filter:B.filter},B.workerOptions)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(B){if(B)w.fire(new t.ErrorEvent(B));else{var D={dataType:"source",sourceDataType:"metadata"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(D.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new t.Event("data",D))}})},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setData=function(w){var B=this;return this._data=w,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(D){if(D)B.fire(new t.ErrorEvent(D));else{var G={dataType:"source",sourceDataType:"content"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(G.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new t.Event("data",G))}}),this},I.prototype.getClusterExpansionZoom=function(w,B){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id},B),this},I.prototype.getClusterChildren=function(w,B){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id},B),this},I.prototype.getClusterLeaves=function(w,B,D,G){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:w,limit:B,offset:D},G),this},I.prototype._updateWorkerData=function(w){var B=this;this._loaded=!1;var D=t.extend({},this.workerOptions),G=this._data;typeof G=="string"?(D.request=this.map._requestManager.transformRequest(t.browser.resolveURL(G),t.ResourceType.Source),D.request.collectResourceTiming=this._collectResourceTiming):D.data=JSON.stringify(G),this.actor.send(this.type+".loadData",D,function(Q,ut){B._removed||ut&&ut.abandoned||(B._loaded=!0,ut&&ut.resourceTiming&&ut.resourceTiming[B.id]&&(B._resourceTiming=ut.resourceTiming[B.id].slice(0)),B.actor.send(B.type+".coalesce",{source:D.source},null),w(Q))})},I.prototype.loaded=function(){return this._loaded},I.prototype.loadTile=function(w,B){var D=this,G=w.actor?"reloadTile":"loadTile";w.actor=this.actor,w.request=this.actor.send(G,{type:this.type,uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Q,ut){return delete w.request,w.unloadVectorData(),w.aborted?B(null):Q?B(Q):(w.loadVectorData(ut,D.map.painter,G==="reloadTile"),B(null))})},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0},I.prototype.unloadTile=function(w){w.unloadVectorData(),this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id})},I.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},I.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},I.prototype.hasTransition=function(){return!1},I}(t.Evented),X=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),at=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.dispatcher=D,this.coordinates=B.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(G),this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(w,B){var D=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(G,Q){D._loaded=!0,G?D.fire(new t.ErrorEvent(G)):Q&&(D.image=Q,w&&(D.coordinates=w),B&&B(),D._finishLoading())})},I.prototype.loaded=function(){return this._loaded},I.prototype.updateImage=function(w){var B=this;return this.image&&w.url?(this.options.url=w.url,this.load(w.coordinates,function(){B.texture=null}),this):this},I.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setCoordinates=function(w){var B=this;this.coordinates=w;var D=w.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(Q){for(var ut=1/0,wt=1/0,It=-1/0,kt=-1/0,Yt=0,qt=Q;Yt<qt.length;Yt+=1){var ce=qt[Yt];ut=Math.min(ut,ce.x),wt=Math.min(wt,ce.y),It=Math.max(It,ce.x),kt=Math.max(kt,ce.y)}var ye=Math.max(It-ut,kt-wt),Le=Math.max(0,Math.floor(-Math.log(ye)/Math.LN2)),Ce=Math.pow(2,Le);return new t.CanonicalTileID(Le,Math.floor((ut+It)/2*Ce),Math.floor((wt+kt)/2*Ce))}(D),this.minzoom=this.maxzoom=this.tileID.z;var G=D.map(function(Q){return B.tileID.getTilePoint(Q)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(G[0].x,G[0].y,0,0),this._boundsArray.emplaceBack(G[1].x,G[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(G[3].x,G[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(G[2].x,G[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},I.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(w,this.image,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[D];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},I.prototype.loadTile=function(w,B){this.tileID&&this.tileID.equals(w.tileID.canonical)?(this.tiles[String(w.tileID.wrap)]=w,w.buckets={},B(null)):(w.state="errored",B(null))},I.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return!1},I}(t.Evented),pt=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),this.roundZoom=!0,this.type="video",this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1;var B=this.options;this.urls=[];for(var D=0,G=B.urls;D<G.length;D+=1)this.urls.push(this.map._requestManager.transformRequest(G[D],t.ResourceType.Source).url);t.getVideo(this.urls,function(Q,ut){w._loaded=!0,Q?w.fire(new t.ErrorEvent(Q)):ut&&(w.video=ut,w.video.loop=!0,w.video.addEventListener("playing",function(){w.map.triggerRepaint()}),w.map&&w.video.play(),w._finishLoading())})},I.prototype.pause=function(){this.video&&this.video.pause()},I.prototype.play=function(){this.video&&this.video.play()},I.prototype.seek=function(w){if(this.video){var B=this.video.seekable;w<B.start(0)||w>B.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+B.start(0)+" and "+B.end(0)+"-second mark."))):this.video.currentTime=w}},I.prototype.getVideo=function(){return this.video},I.prototype.onAdd=function(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},I.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.texSubImage2D(B.TEXTURE_2D,0,0,0,B.RGBA,B.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(w,this.video,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[D];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this.video&&!this.video.paused},I}(at),gt=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),B.coordinates?Array.isArray(B.coordinates)&&B.coordinates.length===4&&!B.coordinates.some(function(Q){return!Array.isArray(Q)||Q.length!==2||Q.some(function(ut){return typeof ut!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "coordinates"'))),B.animate&&typeof B.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'optional "animate" property must be a boolean value'))),B.canvas?typeof B.canvas=="string"||B.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "canvas"'))),this.options=B,this.animate=B.animate===void 0||B.animate}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},I.prototype.getCanvas=function(){return this.canvas},I.prototype.onAdd=function(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()},I.prototype.onRemove=function(){this.pause()},I.prototype.prepare=function(){var w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var B=this.map.painter.context,D=B.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(B,this.canvas,D.RGBA,{premultiply:!0}),this.tiles){var Q=this.tiles[G];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this._playing},I.prototype._hasInvalidDimensions=function(){for(var w=0,B=[this.canvas.width,this.canvas.height];w<B.length;w+=1){var D=B[w];if(isNaN(D)||D<=0)return!0}return!1},I}(at),ft={vector:K,raster:V,"raster-dem":k,geojson:Z,video:pt,image:at,canvas:gt};function Rt(j,I){var w=t.identity([]);return t.translate(w,w,[1,1,0]),t.scale(w,w,[.5*j.width,.5*j.height,1]),t.multiply(w,w,j.calculatePosMatrix(I.toUnwrapped()))}function Nt(j,I,w,B,D,G){var Q=function(Le,Ce,ke){if(Le)for(var nn=0,ln=Le;nn<ln.length;nn+=1){var Qn=Ce[ln[nn]];if(Qn&&Qn.source===ke&&Qn.type==="fill-extrusion")return!0}else for(var Yn in Ce){var dr=Ce[Yn];if(dr.source===ke&&dr.type==="fill-extrusion")return!0}return!1}(D&&D.layers,I,j.id),ut=G.maxPitchScaleFactor(),wt=j.tilesIn(B,ut,Q);wt.sort(Dt);for(var It=[],kt=0,Yt=wt;kt<Yt.length;kt+=1){var qt=Yt[kt];It.push({wrappedTileID:qt.tileID.wrapped().key,queryResults:qt.tile.queryRenderedFeatures(I,w,j._state,qt.queryGeometry,qt.cameraQueryGeometry,qt.scale,D,G,ut,Rt(j.transform,qt.tileID))})}var ce=function(Le){for(var Ce={},ke={},nn=0,ln=Le;nn<ln.length;nn+=1){var Qn=ln[nn],Yn=Qn.queryResults,dr=Qn.wrappedTileID,Mr=ke[dr]=ke[dr]||{};for(var $r in Yn)for(var Kr=Yn[$r],bi=Mr[$r]=Mr[$r]||{},Oi=Ce[$r]=Ce[$r]||[],zi=0,Vi=Kr;zi<Vi.length;zi+=1){var _a=Vi[zi];bi[_a.featureIndex]||(bi[_a.featureIndex]=!0,Oi.push(_a))}}return Ce}(It);for(var ye in ce)ce[ye].forEach(function(Le){var Ce=Le.feature,ke=j.getFeatureState(Ce.layer["source-layer"],Ce.id);Ce.source=Ce.layer.source,Ce.layer["source-layer"]&&(Ce.sourceLayer=Ce.layer["source-layer"]),Ce.state=ke});return ce}function Dt(j,I){var w=j.tileID,B=I.tileID;return w.overscaledZ-B.overscaledZ||w.canonical.y-B.canonical.y||w.wrap-B.wrap||w.canonical.x-B.canonical.x}var St=function(I,w){this.max=I,this.onRemove=w,this.reset()};St.prototype.reset=function(){for(var j in this.data)for(var I=0,w=this.data[j];I<w.length;I+=1){var B=w[I];B.timeout&&clearTimeout(B.timeout),this.onRemove(B.value)}return this.data={},this.order=[],this},St.prototype.add=function(j,I,w){var B=this,D=j.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);var G={value:I,timeout:void 0};if(w!==void 0&&(G.timeout=setTimeout(function(){B.remove(j,G)},w)),this.data[D].push(G),this.order.push(D),this.order.length>this.max){var Q=this._getAndRemoveByKey(this.order[0]);Q&&this.onRemove(Q)}return this},St.prototype.has=function(j){return j.wrapped().key in this.data},St.prototype.getAndRemove=function(j){return this.has(j)?this._getAndRemoveByKey(j.wrapped().key):null},St.prototype._getAndRemoveByKey=function(j){var I=this.data[j].shift();return I.timeout&&clearTimeout(I.timeout),this.data[j].length===0&&delete this.data[j],this.order.splice(this.order.indexOf(j),1),I.value},St.prototype.getByKey=function(j){var I=this.data[j];return I?I[0].value:null},St.prototype.get=function(j){return this.has(j)?this.data[j.wrapped().key][0].value:null},St.prototype.remove=function(j,I){if(!this.has(j))return this;var w=j.wrapped().key,B=I===void 0?0:this.data[w].indexOf(I),D=this.data[w][B];return this.data[w].splice(B,1),D.timeout&&clearTimeout(D.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(D.value),this.order.splice(this.order.indexOf(w),1),this},St.prototype.setMaxSize=function(j){for(this.max=j;this.order.length>this.max;){var I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this},St.prototype.filter=function(j){var I=[];for(var w in this.data)for(var B=0,D=this.data[w];B<D.length;B+=1){var G=D[B];j(G.value)||I.push(G)}for(var Q=0,ut=I;Q<ut.length;Q+=1){var wt=ut[Q];this.remove(wt.value.tileID,wt)}};var xt=function(I,w,B){this.context=I;var D=I.gl;this.buffer=D.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),I.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};xt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},xt.prototype.updateData=function(j){var I=this.context.gl;this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,j.arrayBuffer)},xt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ot={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},it=function(I,w,B,D){this.length=w.length,this.attributes=B,this.itemSize=w.bytesPerElement,this.dynamicDraw=D,this.context=I;var G=I.gl;this.buffer=G.createBuffer(),I.bindVertexBuffer.set(this.buffer),G.bufferData(G.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};it.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},it.prototype.updateData=function(j){var I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,j.arrayBuffer)},it.prototype.enableAttributes=function(j,I){for(var w=0;w<this.attributes.length;w++){var B=I.attributes[this.attributes[w].name];B!==void 0&&j.enableVertexAttribArray(B)}},it.prototype.setVertexAttribPointers=function(j,I,w){for(var B=0;B<this.attributes.length;B++){var D=this.attributes[B],G=I.attributes[D.name];G!==void 0&&j.vertexAttribPointer(G,D.components,j[Ot[D.type]],!1,this.itemSize,D.offset+this.itemSize*(w||0))}},it.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var At=function(I){this.gl=I.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};At.prototype.get=function(){return this.current},At.prototype.set=function(j){},At.prototype.getDefault=function(){return this.default},At.prototype.setDefault=function(){this.set(this.default)};var z=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.clearColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(At),q=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 1},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearDepth(w),this.current=w,this.dirty=!1)},I}(At),mt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearStencil(w),this.current=w,this.dirty=!1)},I}(At),et=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[!0,!0,!0,!0]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.colorMask(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(At),st=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthMask(w),this.current=w,this.dirty=!1)},I}(At),bt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 255},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.stencilMask(w),this.current=w,this.dirty=!1)},I}(At),Y=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},I.prototype.set=function(w){var B=this.current;(w.func!==B.func||w.ref!==B.ref||w.mask!==B.mask||this.dirty)&&(this.gl.stencilFunc(w.func,w.ref,w.mask),this.current=w,this.dirty=!1)},I}(At),rt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.KEEP,w.KEEP,w.KEEP]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||this.dirty)&&(this.gl.stencilOp(w[0],w[1],w[2]),this.current=w,this.dirty=!1)},I}(At),ot=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this.current=w,this.dirty=!1}},I}(At),$=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[0,1]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.depthRange(w[0],w[1]),this.current=w,this.dirty=!1)},I}(At),Pt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this.current=w,this.dirty=!1}},I}(At),yt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.LESS},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthFunc(w),this.current=w,this.dirty=!1)},I}(At),Ft=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.BLEND):B.disable(B.BLEND),this.current=w,this.dirty=!1}},I}(At),Qt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.ONE,w.ZERO]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.blendFunc(w[0],w[1]),this.current=w,this.dirty=!1)},I}(At),ne=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.blendColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(At),Wt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.FUNC_ADD},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.blendEquation(w),this.current=w,this.dirty=!1)},I}(At),$t=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this.current=w,this.dirty=!1}},I}(At),De=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.BACK},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.cullFace(w),this.current=w,this.dirty=!1)},I}(At),Je=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.CCW},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.frontFace(w),this.current=w,this.dirty=!1)},I}(At),Qe=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)},I}(At),de=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.TEXTURE0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.activeTexture(w),this.current=w,this.dirty=!1)},I}(At),ue=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[0,0,w.drawingBufferWidth,w.drawingBufferHeight]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.viewport(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(At),Ne=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindFramebuffer(B.FRAMEBUFFER,w),this.current=w,this.dirty=!1}},I}(At),cn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindRenderbuffer(B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(At),Fn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindTexture(B.TEXTURE_2D,w),this.current=w,this.dirty=!1}},I}(At),wn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindBuffer(B.ARRAY_BUFFER,w),this.current=w,this.dirty=!1}},I}(At),en=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){var B=this.gl;B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,w),this.current=w,this.dirty=!1},I}(At),tn=function(j){function I(w){j.call(this,w),this.vao=w.extVertexArrayObject}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){this.vao&&(w!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(w),this.current=w,this.dirty=!1)},I}(At),xn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 4},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_ALIGNMENT,w),this.current=w,this.dirty=!1}},I}(At),Bn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),this.current=w,this.dirty=!1}},I}(At),vr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,w),this.current=w,this.dirty=!1}},I}(At),li=function(j){function I(w,B){j.call(this,w),this.context=w,this.parent=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I}(At),Me=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.setDirty=function(){this.dirty=!0},I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,w,0),this.current=w,this.dirty=!1}},I}(li),Pe=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferRenderbuffer(B.FRAMEBUFFER,B.DEPTH_ATTACHMENT,B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(li),te=function(I,w,B,D){this.context=I,this.width=w,this.height=B;var G=this.framebuffer=I.gl.createFramebuffer();this.colorAttachment=new Me(I,G),D&&(this.depthAttachment=new Pe(I,G))};te.prototype.destroy=function(){var j=this.context.gl,I=this.colorAttachment.get();if(I&&j.deleteTexture(I),this.depthAttachment){var w=this.depthAttachment.get();w&&j.deleteRenderbuffer(w)}j.deleteFramebuffer(this.framebuffer)};var ge=function(I,w,B){this.func=I,this.mask=w,this.range=B};ge.ReadOnly=!1,ge.ReadWrite=!0,ge.disabled=new ge(519,ge.ReadOnly,[0,1]);var Ht=function(I,w,B,D,G,Q){this.test=I,this.ref=w,this.mask=B,this.fail=D,this.depthFail=G,this.pass=Q};Ht.disabled=new Ht({func:519,mask:0},0,0,7680,7680,7680);var re=function(I,w,B){this.blendFunction=I,this.blendColor=w,this.mask=B};re.disabled=new re(re.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),re.unblended=new re(re.Replace,t.Color.transparent,[!0,!0,!0,!0]),re.alphaBlended=new re([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Te=function(I,w,B){this.enable=I,this.mode=w,this.frontFace=B};Te.disabled=new Te(!1,1029,2305),Te.backCCW=new Te(!0,1029,2305);var ae=function(I){this.gl=I,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new q(this),this.clearStencil=new mt(this),this.colorMask=new et(this),this.depthMask=new st(this),this.stencilMask=new bt(this),this.stencilFunc=new Y(this),this.stencilOp=new rt(this),this.stencilTest=new ot(this),this.depthRange=new $(this),this.depthTest=new Pt(this),this.depthFunc=new yt(this),this.blend=new Ft(this),this.blendFunc=new Qt(this),this.blendColor=new ne(this),this.blendEquation=new Wt(this),this.cullFace=new $t(this),this.cullFaceSide=new De(this),this.frontFace=new Je(this),this.program=new Qe(this),this.activeTexture=new de(this),this.viewport=new ue(this),this.bindFramebuffer=new Ne(this),this.bindRenderbuffer=new cn(this),this.bindTexture=new Fn(this),this.bindVertexBuffer=new wn(this),this.bindElementBuffer=new en(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tn(this),this.pixelStoreUnpack=new xn(this),this.pixelStoreUnpackPremultiplyAlpha=new Bn(this),this.pixelStoreUnpackFlipY=new vr(this),this.extTextureFilterAnisotropic=I.getExtension("EXT_texture_filter_anisotropic")||I.getExtension("MOZ_EXT_texture_filter_anisotropic")||I.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=I.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=I.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(I.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=I.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=I.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=I.getParameter(I.MAX_TEXTURE_SIZE)};ae.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ae.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ae.prototype.createIndexBuffer=function(j,I){return new xt(this,j,I)},ae.prototype.createVertexBuffer=function(j,I,w){return new it(this,j,I,w)},ae.prototype.createRenderbuffer=function(j,I,w){var B=this.gl,D=B.createRenderbuffer();return this.bindRenderbuffer.set(D),B.renderbufferStorage(B.RENDERBUFFER,j,I,w),this.bindRenderbuffer.set(null),D},ae.prototype.createFramebuffer=function(j,I,w){return new te(this,j,I,w)},ae.prototype.clear=function(j){var I=j.color,w=j.depth,B=this.gl,D=0;I&&(D|=B.COLOR_BUFFER_BIT,this.clearColor.set(I),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(D|=B.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),B.clear(D)},ae.prototype.setCullFace=function(j){j.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(j.mode),this.frontFace.set(j.frontFace))},ae.prototype.setDepthMode=function(j){j.func!==this.gl.ALWAYS||j.mask?(this.depthTest.set(!0),this.depthFunc.set(j.func),this.depthMask.set(j.mask),this.depthRange.set(j.range)):this.depthTest.set(!1)},ae.prototype.setStencilMode=function(j){j.test.func!==this.gl.ALWAYS||j.mask?(this.stencilTest.set(!0),this.stencilMask.set(j.mask),this.stencilOp.set([j.fail,j.depthFail,j.pass]),this.stencilFunc.set({func:j.test.func,ref:j.ref,mask:j.test.mask})):this.stencilTest.set(!1)},ae.prototype.setColorMode=function(j){t.deepEqual(j.blendFunction,re.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(j.blendFunction),this.blendColor.set(j.blendColor)),this.colorMask.set(j.mask)},ae.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var xe=function(j){function I(w,B,D){var G=this;j.call(this),this.id=w,this.dispatcher=D,this.on("data",function(Q){Q.dataType==="source"&&Q.sourceDataType==="metadata"&&(G._sourceLoaded=!0),G._sourceLoaded&&!G._paused&&Q.dataType==="source"&&Q.sourceDataType==="content"&&(G.reload(),G.transform&&G.update(G.transform))}),this.on("error",function(){G._sourceErrored=!0}),this._source=function(Q,ut,wt,It){var kt=new ft[ut.type](Q,ut,wt,It);if(kt.id!==Q)throw new Error("Expected Source id to be "+Q+" instead of "+kt.id);return t.bindAll(["load","abort","unload","serialize","prepare"],kt),kt}(w,B,D,this),this._tiles={},this._cache=new St(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){this.map=w,this._maxTileCacheSize=w?w._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(w)},I.prototype.onRemove=function(w){this._source&&this._source.onRemove&&this._source.onRemove(w)},I.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var w in this._tiles){var B=this._tiles[w];if(B.state!=="loaded"&&B.state!=="errored")return!1}return!0},I.prototype.getSource=function(){return this._source},I.prototype.pause=function(){this._paused=!0},I.prototype.resume=function(){if(this._paused){var w=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,w&&this.reload(),this.transform&&this.update(this.transform)}},I.prototype._loadTile=function(w,B){return this._source.loadTile(w,B)},I.prototype._unloadTile=function(w){if(this._source.unloadTile)return this._source.unloadTile(w,function(){})},I.prototype._abortTile=function(w){if(this._source.abortTile)return this._source.abortTile(w,function(){})},I.prototype.serialize=function(){return this._source.serialize()},I.prototype.prepare=function(w){for(var B in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var D=this._tiles[B];D.upload(w),D.prepare(this.map.style.imageManager)}},I.prototype.getIds=function(){return t.values(this._tiles).map(function(w){return w.tileID}).sort(qe).map(function(w){return w.key})},I.prototype.getRenderableIds=function(w){var B=this,D=[];for(var G in this._tiles)this._isIdRenderable(G,w)&&D.push(this._tiles[G]);return w?D.sort(function(Q,ut){var wt=Q.tileID,It=ut.tileID,kt=new t.Point(wt.canonical.x,wt.canonical.y)._rotate(B.transform.angle),Yt=new t.Point(It.canonical.x,It.canonical.y)._rotate(B.transform.angle);return wt.overscaledZ-It.overscaledZ||Yt.y-kt.y||Yt.x-kt.x}).map(function(Q){return Q.tileID.key}):D.map(function(Q){return Q.tileID}).sort(qe).map(function(Q){return Q.key})},I.prototype.hasRenderableParent=function(w){var B=this.findLoadedParent(w,0);return!!B&&this._isIdRenderable(B.tileID.key)},I.prototype._isIdRenderable=function(w,B){return this._tiles[w]&&this._tiles[w].hasData()&&!this._coveredTiles[w]&&(B||!this._tiles[w].holdingForFade())},I.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var w in this._cache.reset(),this._tiles)this._tiles[w].state!=="errored"&&this._reloadTile(w,"reloading")},I.prototype._reloadTile=function(w,B){var D=this._tiles[w];D&&(D.state!=="loading"&&(D.state=B),this._loadTile(D,this._tileLoaded.bind(this,D,w,B)))},I.prototype._tileLoaded=function(w,B,D,G){if(G)return w.state="errored",void(G.status!==404?this._source.fire(new t.ErrorEvent(G,{tile:w})):this.update(this.transform));w.timeAdded=t.browser.now(),D==="expired"&&(w.refreshedUponExpiration=!0),this._setTileReloadTimer(B,w),this.getSource().type==="raster-dem"&&w.dem&&this._backfillDEM(w),this._state.initializeTileState(w,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:w,coord:w.tileID}))},I.prototype._backfillDEM=function(w){for(var B=this.getRenderableIds(),D=0;D<B.length;D++){var G=B[D];if(w.neighboringTiles&&w.neighboringTiles[G]){var Q=this.getTileByID(G);ut(w,Q),ut(Q,w)}}function ut(wt,It){wt.needsHillshadePrepare=!0;var kt=It.tileID.canonical.x-wt.tileID.canonical.x,Yt=It.tileID.canonical.y-wt.tileID.canonical.y,qt=Math.pow(2,wt.tileID.canonical.z),ce=It.tileID.key;kt===0&&Yt===0||Math.abs(Yt)>1||(Math.abs(kt)>1&&(Math.abs(kt+qt)===1?kt+=qt:Math.abs(kt-qt)===1&&(kt-=qt)),It.dem&&wt.dem&&(wt.dem.backfillBorder(It.dem,kt,Yt),wt.neighboringTiles&&wt.neighboringTiles[ce]&&(wt.neighboringTiles[ce].backfilled=!0)))}},I.prototype.getTile=function(w){return this.getTileByID(w.key)},I.prototype.getTileByID=function(w){return this._tiles[w]},I.prototype._retainLoadedChildren=function(w,B,D,G){for(var Q in this._tiles){var ut=this._tiles[Q];if(!(G[Q]||!ut.hasData()||ut.tileID.overscaledZ<=B||ut.tileID.overscaledZ>D)){for(var wt=ut.tileID;ut&&ut.tileID.overscaledZ>B+1;){var It=ut.tileID.scaledTo(ut.tileID.overscaledZ-1);(ut=this._tiles[It.key])&&ut.hasData()&&(wt=It)}for(var kt=wt;kt.overscaledZ>B;)if(w[(kt=kt.scaledTo(kt.overscaledZ-1)).key]){G[wt.key]=wt;break}}}},I.prototype.findLoadedParent=function(w,B){if(w.key in this._loadedParentTiles){var D=this._loadedParentTiles[w.key];return D&&D.tileID.overscaledZ>=B?D:null}for(var G=w.overscaledZ-1;G>=B;G--){var Q=w.scaledTo(G),ut=this._getLoadedTile(Q);if(ut)return ut}},I.prototype._getLoadedTile=function(w){var B=this._tiles[w.key];return B&&B.hasData()?B:this._cache.getByKey(w.wrapped().key)},I.prototype.updateCacheSize=function(w){var B=Math.ceil(w.width/this._source.tileSize)+1,D=Math.ceil(w.height/this._source.tileSize)+1,G=Math.floor(B*D*5),Q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,G):G;this._cache.setMaxSize(Q)},I.prototype.handleWrapJump=function(w){var B=Math.round((w-(this._prevLng===void 0?w:this._prevLng))/360);if(this._prevLng=w,B){var D={};for(var G in this._tiles){var Q=this._tiles[G];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+B),D[Q.tileID.key]=Q}for(var ut in this._tiles=D,this._timers)clearTimeout(this._timers[ut]),delete this._timers[ut];for(var wt in this._tiles)this._setTileReloadTimer(wt,this._tiles[wt])}},I.prototype.update=function(w){var B=this;if(this.transform=w,this._sourceLoaded&&!this._paused){var D;this.updateCacheSize(w),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?D=w.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Mr){return new t.OverscaledTileID(Mr.canonical.z,Mr.wrap,Mr.canonical.z,Mr.canonical.x,Mr.canonical.y)}):(D=w.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(D=D.filter(function(Mr){return B._source.hasTile(Mr)}))):D=[];var G=w.coveringZoomLevel(this._source),Q=Math.max(G-I.maxOverzooming,this._source.minzoom),ut=Math.max(G+I.maxUnderzooming,this._source.minzoom),wt=this._updateRetainedTiles(D,G);if(zn(this._source.type)){for(var It={},kt={},Yt=0,qt=Object.keys(wt);Yt<qt.length;Yt+=1){var ce=qt[Yt],ye=wt[ce],Le=this._tiles[ce];if(Le&&!(Le.fadeEndTime&&Le.fadeEndTime<=t.browser.now())){var Ce=this.findLoadedParent(ye,Q);Ce&&(this._addTile(Ce.tileID),It[Ce.tileID.key]=Ce.tileID),kt[ce]=ye}}for(var ke in this._retainLoadedChildren(kt,G,ut,wt),It)wt[ke]||(this._coveredTiles[ke]=!0,wt[ke]=It[ke])}for(var nn in wt)this._tiles[nn].clearFadeHold();for(var ln=0,Qn=t.keysDifference(this._tiles,wt);ln<Qn.length;ln+=1){var Yn=Qn[ln],dr=this._tiles[Yn];dr.hasSymbolBuckets&&!dr.holdingForFade()?dr.setHoldDuration(this.map._fadeDuration):dr.hasSymbolBuckets&&!dr.symbolFadeFinished()||this._removeTile(Yn)}this._updateLoadedParentTileCache()}},I.prototype.releaseSymbolFadeTiles=function(){for(var w in this._tiles)this._tiles[w].holdingForFade()&&this._removeTile(w)},I.prototype._updateRetainedTiles=function(w,B){for(var D={},G={},Q=Math.max(B-I.maxOverzooming,this._source.minzoom),ut=Math.max(B+I.maxUnderzooming,this._source.minzoom),wt={},It=0,kt=w;It<kt.length;It+=1){var Yt=kt[It],qt=this._addTile(Yt);D[Yt.key]=Yt,qt.hasData()||B<this._source.maxzoom&&(wt[Yt.key]=Yt)}this._retainLoadedChildren(wt,B,ut,D);for(var ce=0,ye=w;ce<ye.length;ce+=1){var Le=ye[ce],Ce=this._tiles[Le.key];if(!Ce.hasData()){if(B+1>this._source.maxzoom){var ke=Le.children(this._source.maxzoom)[0],nn=this.getTile(ke);if(nn&&nn.hasData()){D[ke.key]=ke;continue}}else{var ln=Le.children(this._source.maxzoom);if(D[ln[0].key]&&D[ln[1].key]&&D[ln[2].key]&&D[ln[3].key])continue}for(var Qn=Ce.wasRequested(),Yn=Le.overscaledZ-1;Yn>=Q;--Yn){var dr=Le.scaledTo(Yn);if(G[dr.key]||(G[dr.key]=!0,!(Ce=this.getTile(dr))&&Qn&&(Ce=this._addTile(dr)),Ce&&(D[dr.key]=dr,Qn=Ce.wasRequested(),Ce.hasData())))break}}}return D},I.prototype._updateLoadedParentTileCache=function(){for(var w in this._loadedParentTiles={},this._tiles){for(var B=[],D=void 0,G=this._tiles[w].tileID;G.overscaledZ>0;){if(G.key in this._loadedParentTiles){D=this._loadedParentTiles[G.key];break}B.push(G.key);var Q=G.scaledTo(G.overscaledZ-1);if(D=this._getLoadedTile(Q))break;G=Q}for(var ut=0,wt=B;ut<wt.length;ut+=1)this._loadedParentTiles[wt[ut]]=D}},I.prototype._addTile=function(w){var B=this._tiles[w.key];if(B)return B;(B=this._cache.getAndRemove(w))&&(this._setTileReloadTimer(w.key,B),B.tileID=w,this._state.initializeTileState(B,this.map?this.map.painter:null),this._cacheTimers[w.key]&&(clearTimeout(this._cacheTimers[w.key]),delete this._cacheTimers[w.key],this._setTileReloadTimer(w.key,B)));var D=Boolean(B);return D||(B=new t.Tile(w,this._source.tileSize*w.overscaleFactor()),this._loadTile(B,this._tileLoaded.bind(this,B,w.key,B.state))),B?(B.uses++,this._tiles[w.key]=B,D||this._source.fire(new t.Event("dataloading",{tile:B,coord:B.tileID,dataType:"source"})),B):null},I.prototype._setTileReloadTimer=function(w,B){var D=this;w in this._timers&&(clearTimeout(this._timers[w]),delete this._timers[w]);var G=B.getExpiryTimeout();G&&(this._timers[w]=setTimeout(function(){D._reloadTile(w,"expired"),delete D._timers[w]},G))},I.prototype._removeTile=function(w){var B=this._tiles[w];B&&(B.uses--,delete this._tiles[w],this._timers[w]&&(clearTimeout(this._timers[w]),delete this._timers[w]),B.uses>0||(B.hasData()&&B.state!=="reloading"?this._cache.add(B.tileID,B,B.getExpiryTimeout()):(B.aborted=!0,this._abortTile(B),this._unloadTile(B))))},I.prototype.clearTiles=function(){for(var w in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(w);this._cache.reset()},I.prototype.tilesIn=function(w,B,D){var G=this,Q=[],ut=this.transform;if(!ut)return Q;for(var wt=D?ut.getCameraQueryGeometry(w):w,It=w.map(function(Yn){return ut.pointCoordinate(Yn)}),kt=wt.map(function(Yn){return ut.pointCoordinate(Yn)}),Yt=this.getIds(),qt=1/0,ce=1/0,ye=-1/0,Le=-1/0,Ce=0,ke=kt;Ce<ke.length;Ce+=1){var nn=ke[Ce];qt=Math.min(qt,nn.x),ce=Math.min(ce,nn.y),ye=Math.max(ye,nn.x),Le=Math.max(Le,nn.y)}for(var ln=function(dr){var Mr=G._tiles[Yt[dr]];if(!Mr.holdingForFade()){var $r=Mr.tileID,Kr=Math.pow(2,ut.zoom-Mr.tileID.overscaledZ),bi=B*Mr.queryPadding*t.EXTENT/Mr.tileSize/Kr,Oi=[$r.getTilePoint(new t.MercatorCoordinate(qt,ce)),$r.getTilePoint(new t.MercatorCoordinate(ye,Le))];if(Oi[0].x-bi<t.EXTENT&&Oi[0].y-bi<t.EXTENT&&Oi[1].x+bi>=0&&Oi[1].y+bi>=0){var zi=It.map(function(_a){return $r.getTilePoint(_a)}),Vi=kt.map(function(_a){return $r.getTilePoint(_a)});Q.push({tile:Mr,tileID:$r,queryGeometry:zi,cameraQueryGeometry:Vi,scale:Kr})}}},Qn=0;Qn<Yt.length;Qn++)ln(Qn);return Q},I.prototype.getVisibleCoordinates=function(w){for(var B=this,D=this.getRenderableIds(w).map(function(wt){return B._tiles[wt].tileID}),G=0,Q=D;G<Q.length;G+=1){var ut=Q[G];ut.posMatrix=this.transform.calculatePosMatrix(ut.toUnwrapped())}return D},I.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zn(this._source.type))for(var w in this._tiles){var B=this._tiles[w];if(B.fadeEndTime!==void 0&&B.fadeEndTime>=t.browser.now())return!0}return!1},I.prototype.setFeatureState=function(w,B,D){this._state.updateState(w=w||"_geojsonTileLayer",B,D)},I.prototype.removeFeatureState=function(w,B,D){this._state.removeFeatureState(w=w||"_geojsonTileLayer",B,D)},I.prototype.getFeatureState=function(w,B){return this._state.getState(w=w||"_geojsonTileLayer",B)},I.prototype.setDependencies=function(w,B,D){var G=this._tiles[w];G&&G.setDependencies(B,D)},I.prototype.reloadTilesForDependencies=function(w,B){for(var D in this._tiles)this._tiles[D].hasDependency(w,B)&&this._reloadTile(D,"reloading");this._cache.filter(function(G){return!G.hasDependency(w,B)})},I}(t.Evented);function qe(j,I){var w=Math.abs(2*j.wrap)-+(j.wrap<0),B=Math.abs(2*I.wrap)-+(I.wrap<0);return j.overscaledZ-I.overscaledZ||B-w||I.canonical.y-j.canonical.y||I.canonical.x-j.canonical.x}function zn(j){return j==="raster"||j==="image"||j==="video"}function ar(){return new t.window.Worker(au.workerUrl)}xe.maxOverzooming=10,xe.maxUnderzooming=3;var _n="mapboxgl_preloaded_worker_pool",Cn=function(){this.active={}};Cn.prototype.acquire=function(j){if(!this.workers)for(this.workers=[];this.workers.length<Cn.workerCount;)this.workers.push(new ar);return this.active[j]=!0,this.workers.slice()},Cn.prototype.release=function(j){delete this.active[j],this.numActive()===0&&(this.workers.forEach(function(I){I.terminate()}),this.workers=null)},Cn.prototype.isPreloaded=function(){return!!this.active[_n]},Cn.prototype.numActive=function(){return Object.keys(this.active).length};var Or,Ar=Math.floor(t.browser.hardwareConcurrency/2);function hn(){return Or||(Or=new Cn),Or}function Pr(j,I){var w={};for(var B in j)B!=="ref"&&(w[B]=j[B]);return t.refProperties.forEach(function(D){D in I&&(w[D]=I[D])}),w}function yr(j){j=j.slice();for(var I=Object.create(null),w=0;w<j.length;w++)I[j[w].id]=j[w];for(var B=0;B<j.length;B++)"ref"in j[B]&&(j[B]=Pr(j[B],I[j[B].ref]));return j}Cn.workerCount=Math.max(Math.min(Ar,6),1);var Re={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function We(j,I,w){w.push({command:Re.addSource,args:[j,I[j]]})}function Ye(j,I,w){I.push({command:Re.removeSource,args:[j]}),w[j]=!0}function dn(j,I,w,B){Ye(j,w,B),We(j,I,w)}function En(j,I,w){var B;for(B in j[w])if(j[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;for(B in I[w])if(I[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;return!0}function Dn(j,I,w,B,D,G){var Q;for(Q in I=I||{},j=j||{})j.hasOwnProperty(Q)&&(t.deepEqual(j[Q],I[Q])||w.push({command:G,args:[B,Q,I[Q],D]}));for(Q in I)I.hasOwnProperty(Q)&&!j.hasOwnProperty(Q)&&(t.deepEqual(j[Q],I[Q])||w.push({command:G,args:[B,Q,I[Q],D]}))}function Sn(j){return j.id}function Nn(j,I){return j[I.id]=I,j}var nr=function(I,w){this.reset(I,w)};nr.prototype.reset=function(j,I){this.points=j||[],this._distances=[0];for(var w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding},nr.prototype.lerp=function(j){if(this.points.length===1)return this.points[0];j=t.clamp(j,0,1);for(var I=1,w=this._distances[I],B=j*this.paddedLength+this.padding;w<B&&I<this._distances.length;)w=this._distances[++I];var D=I-1,G=this._distances[D],Q=w-G,ut=Q>0?(B-G)/Q:0;return this.points[D].mult(1-ut).add(this.points[I].mult(ut))};var Gn=function(I,w,B){var D=this.boxCells=[],G=this.circleCells=[];this.xCellCount=Math.ceil(I/B),this.yCellCount=Math.ceil(w/B);for(var Q=0;Q<this.xCellCount*this.yCellCount;Q++)D.push([]),G.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=I,this.height=w,this.xScale=this.xCellCount/I,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0};function Tn(j,I,w,B,D){var G=t.create();return I?(t.scale(G,G,[1/D,1/D,1]),w||t.rotateZ(G,G,B.angle)):t.multiply(G,B.labelPlaneMatrix,j),G}function Cr(j,I,w,B,D){if(I){var G=t.clone(j);return t.scale(G,G,[D,D,1]),w||t.rotateZ(G,G,-B.angle),G}return B.glCoordMatrix}function pr(j,I){var w=[j.x,j.y,0,1];Mo(w,w,I);var B=w[3];return{point:new t.Point(w[0]/B,w[1]/B),signedDistanceFromCamera:B}}function zr(j,I){return .5+j/I*.5}function Ei(j,I){var w=j[0]/j[3],B=j[1]/j[3];return w>=-I[0]&&w<=I[0]&&B>=-I[1]&&B<=I[1]}function Oa(j,I,w,B,D,G,Q,ut){var wt=B?j.textSizeData:j.iconSizeData,It=t.evaluateSizeForZoom(wt,w.transform.zoom),kt=[256/w.width*2+1,256/w.height*2+1],Yt=B?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;Yt.clear();for(var qt=j.lineVertexArray,ce=B?j.text.placedSymbolArray:j.icon.placedSymbolArray,ye=w.transform.width/w.transform.height,Le=!1,Ce=0;Ce<ce.length;Ce++){var ke=ce.get(Ce);if(ke.hidden||ke.writingMode===t.WritingMode.vertical&&!Le)$a(ke.numGlyphs,Yt);else{Le=!1;var nn=[ke.anchorX,ke.anchorY,0,1];if(t.transformMat4(nn,nn,I),Ei(nn,kt)){var ln=zr(w.transform.cameraToCenterDistance,nn[3]),Qn=t.evaluateSizeForFeature(wt,It,ke),Yn=Q?Qn/ln:Qn*ln,dr=new t.Point(ke.anchorX,ke.anchorY),Mr=pr(dr,D).point,$r={},Kr=wo(ke,Yn,!1,ut,I,D,G,j.glyphOffsetArray,qt,Yt,Mr,dr,$r,ye);Le=Kr.useVertical,(Kr.notEnoughRoom||Le||Kr.needsFlipping&&wo(ke,Yn,!0,ut,I,D,G,j.glyphOffsetArray,qt,Yt,Mr,dr,$r,ye).notEnoughRoom)&&$a(ke.numGlyphs,Yt)}else $a(ke.numGlyphs,Yt)}}B?j.text.dynamicLayoutVertexBuffer.updateData(Yt):j.icon.dynamicLayoutVertexBuffer.updateData(Yt)}function wa(j,I,w,B,D,G,Q,ut,wt,It,kt){var Yt=ut.glyphStartIndex+ut.numGlyphs,qt=ut.lineStartIndex,ce=ut.lineStartIndex+ut.lineLength,ye=I.getoffsetX(ut.glyphStartIndex),Le=I.getoffsetX(Yt-1),Ce=ro(j*ye,w,B,D,G,Q,ut.segment,qt,ce,wt,It,kt);if(!Ce)return null;var ke=ro(j*Le,w,B,D,G,Q,ut.segment,qt,ce,wt,It,kt);return ke?{first:Ce,last:ke}:null}function Ja(j,I,w,B){return j===t.WritingMode.horizontal&&Math.abs(w.y-I.y)>Math.abs(w.x-I.x)*B?{useVertical:!0}:(j===t.WritingMode.vertical?I.y<w.y:I.x>w.x)?{needsFlipping:!0}:null}function wo(j,I,w,B,D,G,Q,ut,wt,It,kt,Yt,qt,ce){var ye,Le=I/24,Ce=j.lineOffsetX*Le,ke=j.lineOffsetY*Le;if(j.numGlyphs>1){var nn=j.glyphStartIndex+j.numGlyphs,ln=j.lineStartIndex,Qn=j.lineStartIndex+j.lineLength,Yn=wa(Le,ut,Ce,ke,w,kt,Yt,j,wt,G,qt);if(!Yn)return{notEnoughRoom:!0};var dr=pr(Yn.first.point,Q).point,Mr=pr(Yn.last.point,Q).point;if(B&&!w){var $r=Ja(j.writingMode,dr,Mr,ce);if($r)return $r}ye=[Yn.first];for(var Kr=j.glyphStartIndex+1;Kr<nn-1;Kr++)ye.push(ro(Le*ut.getoffsetX(Kr),Ce,ke,w,kt,Yt,j.segment,ln,Qn,wt,G,qt));ye.push(Yn.last)}else{if(B&&!w){var bi=pr(Yt,D).point,Oi=j.lineStartIndex+j.segment+1,zi=new t.Point(wt.getx(Oi),wt.gety(Oi)),Vi=pr(zi,D),_a=Vi.signedDistanceFromCamera>0?Vi.point:ha(Yt,zi,bi,1,D),ya=Ja(j.writingMode,bi,_a,ce);if(ya)return ya}var wi=ro(Le*ut.getoffsetX(j.glyphStartIndex),Ce,ke,w,kt,Yt,j.segment,j.lineStartIndex,j.lineStartIndex+j.lineLength,wt,G,qt);if(!wi)return{notEnoughRoom:!0};ye=[wi]}for(var $i=0,sa=ye;$i<sa.length;$i+=1){var Bi=sa[$i];t.addDynamicAttributes(It,Bi.point,Bi.angle)}return{}}function ha(j,I,w,B,D){var G=pr(j.add(j.sub(I)._unit()),D).point,Q=w.sub(G);return w.add(Q._mult(B/Q.mag()))}function ro(j,I,w,B,D,G,Q,ut,wt,It,kt,Yt){var qt=B?j-I:j+I,ce=qt>0?1:-1,ye=0;B&&(ce*=-1,ye=Math.PI),ce<0&&(ye+=Math.PI);for(var Le=ce>0?ut+Q:ut+Q+1,Ce=D,ke=D,nn=0,ln=0,Qn=Math.abs(qt),Yn=[];nn+ln<=Qn;){if((Le+=ce)<ut||Le>=wt)return null;if(ke=Ce,Yn.push(Ce),(Ce=Yt[Le])===void 0){var dr=new t.Point(It.getx(Le),It.gety(Le)),Mr=pr(dr,kt);if(Mr.signedDistanceFromCamera>0)Ce=Yt[Le]=Mr.point;else{var $r=Le-ce;Ce=ha(nn===0?G:new t.Point(It.getx($r),It.gety($r)),dr,ke,Qn-nn+1,kt)}}nn+=ln,ln=ke.dist(Ce)}var Kr=(Qn-nn)/ln,bi=Ce.sub(ke),Oi=bi.mult(Kr)._add(ke);Oi._add(bi._unit()._perp()._mult(w*ce));var zi=ye+Math.atan2(Ce.y-ke.y,Ce.x-ke.x);return Yn.push(Oi),{point:Oi,angle:zi,path:Yn}}Gn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Gn.prototype.insert=function(j,I,w,B,D){this._forEachCell(I,w,B,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(j),this.bboxes.push(I),this.bboxes.push(w),this.bboxes.push(B),this.bboxes.push(D)},Gn.prototype.insertCircle=function(j,I,w,B){this._forEachCell(I-B,w-B,I+B,w+B,this._insertCircleCell,this.circleUid++),this.circleKeys.push(j),this.circles.push(I),this.circles.push(w),this.circles.push(B)},Gn.prototype._insertBoxCell=function(j,I,w,B,D,G){this.boxCells[D].push(G)},Gn.prototype._insertCircleCell=function(j,I,w,B,D,G){this.circleCells[D].push(G)},Gn.prototype._query=function(j,I,w,B,D,G){if(w<0||j>this.width||B<0||I>this.height)return!D&&[];var Q=[];if(j<=0&&I<=0&&this.width<=w&&this.height<=B){if(D)return!0;for(var ut=0;ut<this.boxKeys.length;ut++)Q.push({key:this.boxKeys[ut],x1:this.bboxes[4*ut],y1:this.bboxes[4*ut+1],x2:this.bboxes[4*ut+2],y2:this.bboxes[4*ut+3]});for(var wt=0;wt<this.circleKeys.length;wt++){var It=this.circles[3*wt],kt=this.circles[3*wt+1],Yt=this.circles[3*wt+2];Q.push({key:this.circleKeys[wt],x1:It-Yt,y1:kt-Yt,x2:It+Yt,y2:kt+Yt})}return G?Q.filter(G):Q}return this._forEachCell(j,I,w,B,this._queryCell,Q,{hitTest:D,seenUids:{box:{},circle:{}}},G),D?Q.length>0:Q},Gn.prototype._queryCircle=function(j,I,w,B,D){var G=j-w,Q=j+w,ut=I-w,wt=I+w;if(Q<0||G>this.width||wt<0||ut>this.height)return!B&&[];var It=[];return this._forEachCell(G,ut,Q,wt,this._queryCellCircle,It,{hitTest:B,circle:{x:j,y:I,radius:w},seenUids:{box:{},circle:{}}},D),B?It.length>0:It},Gn.prototype.query=function(j,I,w,B,D){return this._query(j,I,w,B,!1,D)},Gn.prototype.hitTest=function(j,I,w,B,D){return this._query(j,I,w,B,!0,D)},Gn.prototype.hitTestCircle=function(j,I,w,B){return this._queryCircle(j,I,w,!0,B)},Gn.prototype._queryCell=function(j,I,w,B,D,G,Q,ut){var wt=Q.seenUids,It=this.boxCells[D];if(It!==null)for(var kt=this.bboxes,Yt=0,qt=It;Yt<qt.length;Yt+=1){var ce=qt[Yt];if(!wt.box[ce]){wt.box[ce]=!0;var ye=4*ce;if(j<=kt[ye+2]&&I<=kt[ye+3]&&w>=kt[ye+0]&&B>=kt[ye+1]&&(!ut||ut(this.boxKeys[ce]))){if(Q.hitTest)return G.push(!0),!0;G.push({key:this.boxKeys[ce],x1:kt[ye],y1:kt[ye+1],x2:kt[ye+2],y2:kt[ye+3]})}}}var Le=this.circleCells[D];if(Le!==null)for(var Ce=this.circles,ke=0,nn=Le;ke<nn.length;ke+=1){var ln=nn[ke];if(!wt.circle[ln]){wt.circle[ln]=!0;var Qn=3*ln;if(this._circleAndRectCollide(Ce[Qn],Ce[Qn+1],Ce[Qn+2],j,I,w,B)&&(!ut||ut(this.circleKeys[ln]))){if(Q.hitTest)return G.push(!0),!0;var Yn=Ce[Qn],dr=Ce[Qn+1],Mr=Ce[Qn+2];G.push({key:this.circleKeys[ln],x1:Yn-Mr,y1:dr-Mr,x2:Yn+Mr,y2:dr+Mr})}}}},Gn.prototype._queryCellCircle=function(j,I,w,B,D,G,Q,ut){var wt=Q.circle,It=Q.seenUids,kt=this.boxCells[D];if(kt!==null)for(var Yt=this.bboxes,qt=0,ce=kt;qt<ce.length;qt+=1){var ye=ce[qt];if(!It.box[ye]){It.box[ye]=!0;var Le=4*ye;if(this._circleAndRectCollide(wt.x,wt.y,wt.radius,Yt[Le+0],Yt[Le+1],Yt[Le+2],Yt[Le+3])&&(!ut||ut(this.boxKeys[ye])))return G.push(!0),!0}}var Ce=this.circleCells[D];if(Ce!==null)for(var ke=this.circles,nn=0,ln=Ce;nn<ln.length;nn+=1){var Qn=ln[nn];if(!It.circle[Qn]){It.circle[Qn]=!0;var Yn=3*Qn;if(this._circlesCollide(ke[Yn],ke[Yn+1],ke[Yn+2],wt.x,wt.y,wt.radius)&&(!ut||ut(this.circleKeys[Qn])))return G.push(!0),!0}}},Gn.prototype._forEachCell=function(j,I,w,B,D,G,Q,ut){for(var wt=this._convertToXCellCoord(j),It=this._convertToYCellCoord(I),kt=this._convertToXCellCoord(w),Yt=this._convertToYCellCoord(B),qt=wt;qt<=kt;qt++)for(var ce=It;ce<=Yt;ce++)if(D.call(this,j,I,w,B,this.xCellCount*ce+qt,G,Q,ut))return},Gn.prototype._convertToXCellCoord=function(j){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(j*this.xScale)))},Gn.prototype._convertToYCellCoord=function(j){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(j*this.yScale)))},Gn.prototype._circlesCollide=function(j,I,w,B,D,G){var Q=B-j,ut=D-I,wt=w+G;return wt*wt>Q*Q+ut*ut},Gn.prototype._circleAndRectCollide=function(j,I,w,B,D,G,Q){var ut=(G-B)/2,wt=Math.abs(j-(B+ut));if(wt>ut+w)return!1;var It=(Q-D)/2,kt=Math.abs(I-(D+It));if(kt>It+w)return!1;if(wt<=ut||kt<=It)return!0;var Yt=wt-ut,qt=kt-It;return Yt*Yt+qt*qt<=w*w};var ko=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $a(j,I){for(var w=0;w<j;w++){var B=I.length;I.resize(B+4),I.float32.set(ko,3*B)}}function Mo(j,I,w){var B=I[0],D=I[1];return j[0]=w[0]*B+w[4]*D+w[12],j[1]=w[1]*B+w[5]*D+w[13],j[3]=w[3]*B+w[7]*D+w[15],j}var ss=function(I,w,B){w===void 0&&(w=new Gn(I.width+200,I.height+200,25)),B===void 0&&(B=new Gn(I.width+200,I.height+200,25)),this.transform=I,this.grid=w,this.ignoredGrid=B,this.pitchfactor=Math.cos(I._pitch)*I.cameraToCenterDistance,this.screenRightBoundary=I.width+100,this.screenBottomBoundary=I.height+100,this.gridRightBoundary=I.width+200,this.gridBottomBoundary=I.height+200};function Pa(j,I,w){return I*(t.EXTENT/(j.tileSize*Math.pow(2,w-j.tileID.overscaledZ)))}ss.prototype.placeCollisionBox=function(j,I,w,B,D){var G=this.projectAndGetPerspectiveRatio(B,j.anchorPointX,j.anchorPointY),Q=w*G.perspectiveRatio,ut=j.x1*Q+G.point.x,wt=j.y1*Q+G.point.y,It=j.x2*Q+G.point.x,kt=j.y2*Q+G.point.y;return!this.isInsideGrid(ut,wt,It,kt)||!I&&this.grid.hitTest(ut,wt,It,kt,D)?{box:[],offscreen:!1}:{box:[ut,wt,It,kt],offscreen:this.isOffscreen(ut,wt,It,kt)}},ss.prototype.placeCollisionCircles=function(j,I,w,B,D,G,Q,ut,wt,It,kt,Yt,qt){var ce=[],ye=new t.Point(I.anchorX,I.anchorY),Le=pr(ye,G),Ce=zr(this.transform.cameraToCenterDistance,Le.signedDistanceFromCamera),ke=(It?D/Ce:D*Ce)/t.ONE_EM,nn=pr(ye,Q).point,ln=wa(ke,B,I.lineOffsetX*ke,I.lineOffsetY*ke,!1,nn,ye,I,w,Q,{}),Qn=!1,Yn=!1,dr=!0;if(ln){for(var Mr=.5*Yt*Ce+qt,$r=new t.Point(-100,-100),Kr=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),bi=new nr,Oi=ln.first,zi=ln.last,Vi=[],_a=Oi.path.length-1;_a>=1;_a--)Vi.push(Oi.path[_a]);for(var ya=1;ya<zi.path.length;ya++)Vi.push(zi.path[ya]);var wi=2.5*Mr;if(ut){var $i=Vi.map(function(_l){return pr(_l,ut)});Vi=$i.some(function(_l){return _l.signedDistanceFromCamera<=0})?[]:$i.map(function(_l){return _l.point})}var sa=[];if(Vi.length>0){for(var Bi=Vi[0].clone(),ca=Vi[0].clone(),qi=1;qi<Vi.length;qi++)Bi.x=Math.min(Bi.x,Vi[qi].x),Bi.y=Math.min(Bi.y,Vi[qi].y),ca.x=Math.max(ca.x,Vi[qi].x),ca.y=Math.max(ca.y,Vi[qi].y);sa=Bi.x>=$r.x&&ca.x<=Kr.x&&Bi.y>=$r.y&&ca.y<=Kr.y?[Vi]:ca.x<$r.x||Bi.x>Kr.x||ca.y<$r.y||Bi.y>Kr.y?[]:t.clipLine([Vi],$r.x,$r.y,Kr.x,Kr.y)}for(var Ca=0,Na=sa;Ca<Na.length;Ca+=1){var rs;bi.reset(Na[Ca],.25*Mr),rs=bi.length<=.5*Mr?1:Math.ceil(bi.paddedLength/wi)+1;for(var Jo=0;Jo<rs;Jo++){var is=Jo/Math.max(rs-1,1),jo=bi.lerp(is),Ps=jo.x+100,Rl=jo.y+100;ce.push(Ps,Rl,Mr,0);var sl=Ps-Mr,lc=Rl-Mr,xc=Ps+Mr,Sl=Rl+Mr;if(dr=dr&&this.isOffscreen(sl,lc,xc,Sl),Yn=Yn||this.isInsideGrid(sl,lc,xc,Sl),!j&&this.grid.hitTestCircle(Ps,Rl,Mr,kt)&&(Qn=!0,!wt))return{circles:[],offscreen:!1,collisionDetected:Qn}}}}return{circles:!wt&&Qn||!Yn?[]:ce,offscreen:dr,collisionDetected:Qn}},ss.prototype.queryRenderedSymbols=function(j){if(j.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var I=[],w=1/0,B=1/0,D=-1/0,G=-1/0,Q=0,ut=j;Q<ut.length;Q+=1){var wt=ut[Q],It=new t.Point(wt.x+100,wt.y+100);w=Math.min(w,It.x),B=Math.min(B,It.y),D=Math.max(D,It.x),G=Math.max(G,It.y),I.push(It)}for(var kt={},Yt={},qt=0,ce=this.grid.query(w,B,D,G).concat(this.ignoredGrid.query(w,B,D,G));qt<ce.length;qt+=1){var ye=ce[qt],Le=ye.key;if(kt[Le.bucketInstanceId]===void 0&&(kt[Le.bucketInstanceId]={}),!kt[Le.bucketInstanceId][Le.featureIndex]){var Ce=[new t.Point(ye.x1,ye.y1),new t.Point(ye.x2,ye.y1),new t.Point(ye.x2,ye.y2),new t.Point(ye.x1,ye.y2)];t.polygonIntersectsPolygon(I,Ce)&&(kt[Le.bucketInstanceId][Le.featureIndex]=!0,Yt[Le.bucketInstanceId]===void 0&&(Yt[Le.bucketInstanceId]=[]),Yt[Le.bucketInstanceId].push(Le.featureIndex))}}return Yt},ss.prototype.insertCollisionBox=function(j,I,w,B,D){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:B,collisionGroupID:D},j[0],j[1],j[2],j[3])},ss.prototype.insertCollisionCircles=function(j,I,w,B,D){for(var G=I?this.ignoredGrid:this.grid,Q={bucketInstanceId:w,featureIndex:B,collisionGroupID:D},ut=0;ut<j.length;ut+=4)G.insertCircle(Q,j[ut],j[ut+1],j[ut+2])},ss.prototype.projectAndGetPerspectiveRatio=function(j,I,w){var B=[I,w,0,1];return Mo(B,B,j),{point:new t.Point((B[0]/B[3]+1)/2*this.transform.width+100,(-B[1]/B[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}},ss.prototype.isOffscreen=function(j,I,w,B){return w<100||j>=this.screenRightBoundary||B<100||I>this.screenBottomBoundary},ss.prototype.isInsideGrid=function(j,I,w,B){return w>=0&&j<this.gridRightBoundary&&B>=0&&I<this.gridBottomBoundary},ss.prototype.getViewportMatrix=function(){var j=t.identity([]);return t.translate(j,j,[-100,-100,0]),j};var Bo=function(I,w,B,D){this.opacity=I?Math.max(0,Math.min(1,I.opacity+(I.placed?w:-w))):D&&B?1:0,this.placed=B};Bo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Ro=function(I,w,B,D,G){this.text=new Bo(I?I.text:null,w,B,G),this.icon=new Bo(I?I.icon:null,w,D,G)};Ro.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Js=function(I,w,B){this.text=I,this.icon=w,this.skipFade=B},Ko=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},nu=function(I,w,B,D,G){this.bucketInstanceId=I,this.featureIndex=w,this.sourceLayerIndex=B,this.bucketIndex=D,this.tileID=G},Rs=function(I){this.crossSourceCollisions=I,this.maxGroupID=0,this.collisionGroups={}};function je(j,I,w,B,D){var G=t.getAnchorAlignment(j),Q=-(G.horizontalAlign-.5)*I,ut=-(G.verticalAlign-.5)*w,wt=t.evaluateVariableOffset(j,B);return new t.Point(Q+wt[0]*D,ut+wt[1]*D)}function oe(j,I,w,B,D,G){var Q=j.x1,ut=j.x2,wt=j.y1,It=j.y2,kt=j.anchorPointX,Yt=j.anchorPointY,qt=new t.Point(I,w);return B&&qt._rotate(D?G:-G),{x1:Q+qt.x,y1:wt+qt.y,x2:ut+qt.x,y2:It+qt.y,anchorPointX:kt,anchorPointY:Yt}}Rs.prototype.get=function(j){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[j]){var I=++this.maxGroupID;this.collisionGroups[j]={ID:I,predicate:function(B){return B.collisionGroupID===I}}}return this.collisionGroups[j]};var Zt=function(I,w,B,D){this.transform=I.clone(),this.collisionIndex=new ss(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new Rs(B),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}};function be(j,I,w,B,D){j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0)}Zt.prototype.getBucketParts=function(j,I,w,B){var D=w.getBucket(I),G=w.latestFeatureIndex;if(D&&G&&I.id===D.layerIds[0]){var Q=w.collisionBoxArray,ut=D.layers[0].layout,wt=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),It=w.tileSize/t.EXTENT,kt=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),Yt=ut.get("text-pitch-alignment")==="map",qt=ut.get("text-rotation-alignment")==="map",ce=Pa(w,1,this.transform.zoom),ye=Tn(kt,Yt,qt,this.transform,ce),Le=null;if(Yt){var Ce=Cr(kt,Yt,qt,this.transform,ce);Le=t.multiply([],this.transform.labelPlaneMatrix,Ce)}this.retainedQueryData[D.bucketInstanceId]=new nu(D.bucketInstanceId,G,D.sourceLayerIndex,D.index,w.tileID);var ke={bucket:D,layout:ut,posMatrix:kt,textLabelPlaneMatrix:ye,labelToScreenMatrix:Le,scale:wt,textPixelRatio:It,holdingForFade:w.holdingForFade(),collisionBoxArray:Q,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(B)for(var nn=0,ln=D.sortKeyRanges;nn<ln.length;nn+=1){var Qn=ln[nn];j.push({sortKey:Qn.sortKey,symbolInstanceStart:Qn.symbolInstanceStart,symbolInstanceEnd:Qn.symbolInstanceEnd,parameters:ke})}else j.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:ke})}},Zt.prototype.attemptAnchorPlacement=function(j,I,w,B,D,G,Q,ut,wt,It,kt,Yt,qt,ce,ye){var Le,Ce=[Yt.textOffset0,Yt.textOffset1],ke=je(j,w,B,Ce,D),nn=this.collisionIndex.placeCollisionBox(oe(I,ke.x,ke.y,G,Q,this.transform.angle),kt,ut,wt,It.predicate);if(!ye||this.collisionIndex.placeCollisionBox(oe(ye,ke.x,ke.y,G,Q,this.transform.angle),kt,ut,wt,It.predicate).box.length!==0)return nn.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Yt.crossTileID]&&this.prevPlacement.placements[Yt.crossTileID]&&this.prevPlacement.placements[Yt.crossTileID].text&&(Le=this.prevPlacement.variableOffsets[Yt.crossTileID].anchor),this.variableOffsets[Yt.crossTileID]={textOffset:Ce,width:w,height:B,anchor:j,textBoxScale:D,prevAnchor:Le},this.markUsedJustification(qt,j,Yt,ce),qt.allowVerticalPlacement&&(this.markUsedOrientation(qt,ce,Yt),this.placedOrientations[Yt.crossTileID]=ce),{shift:ke,placedGlyphBoxes:nn}):void 0},Zt.prototype.placeLayerBucketPart=function(j,I,w){var B=this,D=j.parameters,G=D.bucket,Q=D.layout,ut=D.posMatrix,wt=D.textLabelPlaneMatrix,It=D.labelToScreenMatrix,kt=D.textPixelRatio,Yt=D.holdingForFade,qt=D.collisionBoxArray,ce=D.partiallyEvaluatedTextSize,ye=D.collisionGroup,Le=Q.get("text-optional"),Ce=Q.get("icon-optional"),ke=Q.get("text-allow-overlap"),nn=Q.get("icon-allow-overlap"),ln=Q.get("text-rotation-alignment")==="map",Qn=Q.get("text-pitch-alignment")==="map",Yn=Q.get("icon-text-fit")!=="none",dr=Q.get("symbol-z-order")==="viewport-y",Mr=ke&&(nn||!G.hasIconData()||Ce),$r=nn&&(ke||!G.hasTextData()||Le);!G.collisionArrays&&qt&&G.deserializeCollisionBoxes(qt);var Kr=function(wi,$i){if(!I[wi.crossTileID])if(Yt)B.placements[wi.crossTileID]=new Js(!1,!1,!1);else{var sa,Bi=!1,ca=!1,qi=!0,Ca=null,Na={box:null,offscreen:null},rs={box:null,offscreen:null},Jo=null,is=null,jo=0,Ps=0,Rl=0;$i.textFeatureIndex?jo=$i.textFeatureIndex:wi.useRuntimeCollisionCircles&&(jo=wi.featureIndex),$i.verticalTextFeatureIndex&&(Ps=$i.verticalTextFeatureIndex);var sl=$i.textBox;if(sl){var lc=function(ll){var cl=t.WritingMode.horizontal;if(G.allowVerticalPlacement&&!ll&&B.prevPlacement){var Ju=B.prevPlacement.placedOrientations[wi.crossTileID];Ju&&(B.placedOrientations[wi.crossTileID]=Ju,B.markUsedOrientation(G,cl=Ju,wi))}return cl},xc=function(ll,cl){if(G.allowVerticalPlacement&&wi.numVerticalGlyphVertices>0&&$i.verticalTextBox)for(var Ju=0,ec=G.writingModes;Ju<ec.length&&(ec[Ju]===t.WritingMode.vertical?(Na=cl(),rs=Na):Na=ll(),!(Na&&Na.box&&Na.box.length));Ju+=1);else Na=ll()};if(Q.get("text-variable-anchor")){var Sl=Q.get("text-variable-anchor");if(B.prevPlacement&&B.prevPlacement.variableOffsets[wi.crossTileID]){var _l=B.prevPlacement.variableOffsets[wi.crossTileID];Sl.indexOf(_l.anchor)>0&&(Sl=Sl.filter(function(ul){return ul!==_l.anchor})).unshift(_l.anchor)}var Ul=function(ll,cl,Ju){for(var ec=ll.x2-ll.x1,Rc=ll.y2-ll.y1,zc=wi.textBoxScale,Uc=Yn&&!nn?cl:null,hc={box:[],offscreen:!1},Xc=ke?2*Sl.length:Sl.length,Pc=0;Pc<Xc;++Pc){var jl=B.attemptAnchorPlacement(Sl[Pc%Sl.length],ll,ec,Rc,zc,ln,Qn,kt,ut,ye,Pc>=Sl.length,wi,G,Ju,Uc);if(jl&&(hc=jl.placedGlyphBoxes)&&hc.box&&hc.box.length){Bi=!0,Ca=jl.shift;break}}return hc};xc(function(){return Ul(sl,$i.iconBox,t.WritingMode.horizontal)},function(){var ul=$i.verticalTextBox;return G.allowVerticalPlacement&&!(Na&&Na.box&&Na.box.length)&&wi.numVerticalGlyphVertices>0&&ul?Ul(ul,$i.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Na&&(Bi=Na.box,qi=Na.offscreen);var Lc=lc(Na&&Na.box);if(!Bi&&B.prevPlacement){var Kl=B.prevPlacement.variableOffsets[wi.crossTileID];Kl&&(B.variableOffsets[wi.crossTileID]=Kl,B.markUsedJustification(G,Kl.anchor,wi,Lc))}}else{var Mc=function(ll,cl){var Ju=B.collisionIndex.placeCollisionBox(ll,ke,kt,ut,ye.predicate);return Ju&&Ju.box&&Ju.box.length&&(B.markUsedOrientation(G,cl,wi),B.placedOrientations[wi.crossTileID]=cl),Ju};xc(function(){return Mc(sl,t.WritingMode.horizontal)},function(){var ul=$i.verticalTextBox;return G.allowVerticalPlacement&&wi.numVerticalGlyphVertices>0&&ul?Mc(ul,t.WritingMode.vertical):{box:null,offscreen:null}}),lc(Na&&Na.box&&Na.box.length)}}if(Bi=(sa=Na)&&sa.box&&sa.box.length>0,qi=sa&&sa.offscreen,wi.useRuntimeCollisionCircles){var Cc=G.text.placedSymbolArray.get(wi.centerJustifiedTextSymbolIndex),fc=t.evaluateSizeForFeature(G.textSizeData,ce,Cc),bc=Q.get("text-padding");Jo=B.collisionIndex.placeCollisionCircles(ke,Cc,G.lineVertexArray,G.glyphOffsetArray,fc,ut,wt,It,w,Qn,ye.predicate,wi.collisionCircleDiameter,bc),Bi=ke||Jo.circles.length>0&&!Jo.collisionDetected,qi=qi&&Jo.offscreen}if($i.iconFeatureIndex&&(Rl=$i.iconFeatureIndex),$i.iconBox){var ic=function(ll){var cl=Yn&&Ca?oe(ll,Ca.x,Ca.y,ln,Qn,B.transform.angle):ll;return B.collisionIndex.placeCollisionBox(cl,nn,kt,ut,ye.predicate)};ca=rs&&rs.box&&rs.box.length&&$i.verticalIconBox?(is=ic($i.verticalIconBox)).box.length>0:(is=ic($i.iconBox)).box.length>0,qi=qi&&is.offscreen}var yu=Le||wi.numHorizontalGlyphVertices===0&&wi.numVerticalGlyphVertices===0,Ec=Ce||wi.numIconVertices===0;if(yu||Ec?Ec?yu||(ca=ca&&Bi):Bi=ca&&Bi:ca=Bi=ca&&Bi,Bi&&sa&&sa.box&&B.collisionIndex.insertCollisionBox(sa.box,Q.get("text-ignore-placement"),G.bucketInstanceId,rs&&rs.box&&Ps?Ps:jo,ye.ID),ca&&is&&B.collisionIndex.insertCollisionBox(is.box,Q.get("icon-ignore-placement"),G.bucketInstanceId,Rl,ye.ID),Jo&&(Bi&&B.collisionIndex.insertCollisionCircles(Jo.circles,Q.get("text-ignore-placement"),G.bucketInstanceId,jo,ye.ID),w)){var Sc=G.bucketInstanceId,Dl=B.collisionCircleArrays[Sc];Dl===void 0&&(Dl=B.collisionCircleArrays[Sc]=new Ko);for(var Gu=0;Gu<Jo.circles.length;Gu+=4)Dl.circles.push(Jo.circles[Gu+0]),Dl.circles.push(Jo.circles[Gu+1]),Dl.circles.push(Jo.circles[Gu+2]),Dl.circles.push(Jo.collisionDetected?1:0)}B.placements[wi.crossTileID]=new Js(Bi||Mr,ca||$r,qi||G.justReloaded),I[wi.crossTileID]=!0}};if(dr)for(var bi=G.getSortedSymbolIndexes(this.transform.angle),Oi=bi.length-1;Oi>=0;--Oi){var zi=bi[Oi];Kr(G.symbolInstances.get(zi),G.collisionArrays[zi])}else for(var Vi=j.symbolInstanceStart;Vi<j.symbolInstanceEnd;Vi++)Kr(G.symbolInstances.get(Vi),G.collisionArrays[Vi]);if(w&&G.bucketInstanceId in this.collisionCircleArrays){var _a=this.collisionCircleArrays[G.bucketInstanceId];t.invert(_a.invProjMatrix,ut),_a.viewportMatrix=this.collisionIndex.getViewportMatrix()}G.justReloaded=!1},Zt.prototype.markUsedJustification=function(j,I,w,B){var D;D=B===t.WritingMode.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(I)];for(var G=0,Q=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];G<Q.length;G+=1){var ut=Q[G];ut>=0&&(j.text.placedSymbolArray.get(ut).crossTileID=D>=0&&ut!==D?0:w.crossTileID)}},Zt.prototype.markUsedOrientation=function(j,I,w){for(var B=I===t.WritingMode.horizontal||I===t.WritingMode.horizontalOnly?I:0,D=I===t.WritingMode.vertical?I:0,G=0,Q=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];G<Q.length;G+=1)j.text.placedSymbolArray.get(Q[G]).placedOrientation=B;w.verticalPlacedTextSymbolIndex&&(j.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=D)},Zt.prototype.commit=function(j){this.commitTime=j,this.zoomAtLastRecencyCheck=this.transform.zoom;var I=this.prevPlacement,w=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;var B=I?I.symbolFadeChange(j):1,D=I?I.opacities:{},G=I?I.variableOffsets:{},Q=I?I.placedOrientations:{};for(var ut in this.placements){var wt=this.placements[ut],It=D[ut];It?(this.opacities[ut]=new Ro(It,B,wt.text,wt.icon),w=w||wt.text!==It.text.placed||wt.icon!==It.icon.placed):(this.opacities[ut]=new Ro(null,B,wt.text,wt.icon,wt.skipFade),w=w||wt.text||wt.icon)}for(var kt in D){var Yt=D[kt];if(!this.opacities[kt]){var qt=new Ro(Yt,B,!1,!1);qt.isHidden()||(this.opacities[kt]=qt,w=w||Yt.text.placed||Yt.icon.placed)}}for(var ce in G)this.variableOffsets[ce]||!this.opacities[ce]||this.opacities[ce].isHidden()||(this.variableOffsets[ce]=G[ce]);for(var ye in Q)this.placedOrientations[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.placedOrientations[ye]=Q[ye]);w?this.lastPlacementChangeTime=j:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:j)},Zt.prototype.updateLayerOpacities=function(j,I){for(var w={},B=0,D=I;B<D.length;B+=1){var G=D[B],Q=G.getBucket(j);Q&&G.latestFeatureIndex&&j.id===Q.layerIds[0]&&this.updateBucketOpacities(Q,w,G.collisionBoxArray)}},Zt.prototype.updateBucketOpacities=function(j,I,w){var B=this;j.hasTextData()&&j.text.opacityVertexArray.clear(),j.hasIconData()&&j.icon.opacityVertexArray.clear(),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexArray.clear(),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexArray.clear();var D=j.layers[0].layout,G=new Ro(null,0,!1,!1,!0),Q=D.get("text-allow-overlap"),ut=D.get("icon-allow-overlap"),wt=D.get("text-variable-anchor"),It=D.get("text-rotation-alignment")==="map",kt=D.get("text-pitch-alignment")==="map",Yt=D.get("icon-text-fit")!=="none",qt=new Ro(null,0,Q&&(ut||!j.hasIconData()||D.get("icon-optional")),ut&&(Q||!j.hasTextData()||D.get("text-optional")),!0);!j.collisionArrays&&w&&(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData())&&j.deserializeCollisionBoxes(w);for(var ce=function(nn,ln,Qn){for(var Yn=0;Yn<ln/4;Yn++)nn.opacityVertexArray.emplaceBack(Qn)},ye=function(nn){var ln=j.symbolInstances.get(nn),Qn=ln.numHorizontalGlyphVertices,Yn=ln.numVerticalGlyphVertices,dr=ln.crossTileID,Mr=B.opacities[dr];I[dr]?Mr=G:Mr||(B.opacities[dr]=Mr=qt),I[dr]=!0;var $r=ln.numIconVertices>0,Kr=B.placedOrientations[ln.crossTileID],bi=Kr===t.WritingMode.vertical,Oi=Kr===t.WritingMode.horizontal||Kr===t.WritingMode.horizontalOnly;if(Qn>0||Yn>0){var zi=ji(Mr.text);ce(j.text,Qn,bi?Ji:zi),ce(j.text,Yn,Oi?Ji:zi);var Vi=Mr.text.isHidden();[ln.rightJustifiedTextSymbolIndex,ln.centerJustifiedTextSymbolIndex,ln.leftJustifiedTextSymbolIndex].forEach(function(Na){Na>=0&&(j.text.placedSymbolArray.get(Na).hidden=Vi||bi?1:0)}),ln.verticalPlacedTextSymbolIndex>=0&&(j.text.placedSymbolArray.get(ln.verticalPlacedTextSymbolIndex).hidden=Vi||Oi?1:0);var _a=B.variableOffsets[ln.crossTileID];_a&&B.markUsedJustification(j,_a.anchor,ln,Kr);var ya=B.placedOrientations[ln.crossTileID];ya&&(B.markUsedJustification(j,"left",ln,ya),B.markUsedOrientation(j,ya,ln))}if($r){var wi=ji(Mr.icon),$i=!(Yt&&ln.verticalPlacedIconSymbolIndex&&bi);ln.placedIconSymbolIndex>=0&&(ce(j.icon,ln.numIconVertices,$i?wi:Ji),j.icon.placedSymbolArray.get(ln.placedIconSymbolIndex).hidden=Mr.icon.isHidden()),ln.verticalPlacedIconSymbolIndex>=0&&(ce(j.icon,ln.numVerticalIconVertices,$i?Ji:wi),j.icon.placedSymbolArray.get(ln.verticalPlacedIconSymbolIndex).hidden=Mr.icon.isHidden())}if(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData()){var sa=j.collisionArrays[nn];if(sa){var Bi=new t.Point(0,0);if(sa.textBox||sa.verticalTextBox){var ca=!0;if(wt){var qi=B.variableOffsets[dr];qi?(Bi=je(qi.anchor,qi.width,qi.height,qi.textOffset,qi.textBoxScale),It&&Bi._rotate(kt?B.transform.angle:-B.transform.angle)):ca=!1}sa.textBox&&be(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!ca||bi,Bi.x,Bi.y),sa.verticalTextBox&&be(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!ca||Oi,Bi.x,Bi.y)}var Ca=Boolean(!Oi&&sa.verticalIconBox);sa.iconBox&&be(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,Ca,Yt?Bi.x:0,Yt?Bi.y:0),sa.verticalIconBox&&be(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,!Ca,Yt?Bi.x:0,Yt?Bi.y:0)}}},Le=0;Le<j.symbolInstances.length;Le++)ye(Le);if(j.sortFeatures(this.transform.angle),this.retainedQueryData[j.bucketInstanceId]&&(this.retainedQueryData[j.bucketInstanceId].featureSortOrder=j.featureSortOrder),j.hasTextData()&&j.text.opacityVertexBuffer&&j.text.opacityVertexBuffer.updateData(j.text.opacityVertexArray),j.hasIconData()&&j.icon.opacityVertexBuffer&&j.icon.opacityVertexBuffer.updateData(j.icon.opacityVertexArray),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexBuffer&&j.iconCollisionBox.collisionVertexBuffer.updateData(j.iconCollisionBox.collisionVertexArray),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexBuffer&&j.textCollisionBox.collisionVertexBuffer.updateData(j.textCollisionBox.collisionVertexArray),j.bucketInstanceId in this.collisionCircleArrays){var Ce=this.collisionCircleArrays[j.bucketInstanceId];j.placementInvProjMatrix=Ce.invProjMatrix,j.placementViewportMatrix=Ce.viewportMatrix,j.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[j.bucketInstanceId]}},Zt.prototype.symbolFadeChange=function(j){return this.fadeDuration===0?1:(j-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Zt.prototype.zoomAdjustment=function(j){return Math.max(0,(this.transform.zoom-j)/1.5)},Zt.prototype.hasTransitions=function(j){return this.stale||j-this.lastPlacementChangeTime<this.fadeDuration},Zt.prototype.stillRecent=function(j,I){var w=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*w>j},Zt.prototype.setStale=function(){this.stale=!0};var sn=Math.pow(2,25),Vn=Math.pow(2,24),er=Math.pow(2,17),kn=Math.pow(2,16),Xr=Math.pow(2,9),vi=Math.pow(2,8),Si=Math.pow(2,1);function ji(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;var I=j.placed?1:0,w=Math.floor(127*j.opacity);return w*sn+I*Vn+w*er+I*kn+w*Xr+I*vi+w*Si+I}var Ji=0,za=function(I){this._sortAcrossTiles=I.layout.get("symbol-z-order")!=="viewport-y"&&I.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};za.prototype.continuePlacement=function(j,I,w,B,D){for(var G=this._bucketParts;this._currentTileIndex<j.length;)if(I.getBucketParts(G,B,j[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,G.sort(function(Q,ut){return Q.sortKey-ut.sortKey}));this._currentPartIndex<G.length;)if(I.placeLayerBucketPart(G[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,D())return!0;return!1};var va=function(I,w,B,D,G,Q,ut){this.placement=new Zt(I,G,Q,ut),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=D,this._done=!1};va.prototype.isDone=function(){return this._done},va.prototype.continuePlacement=function(j,I,w){for(var B=this,D=t.browser.now(),G=function(){var It=t.browser.now()-D;return!B._forceFullPlacement&&It>2};this._currentPlacementIndex>=0;){var Q=I[j[this._currentPlacementIndex]],ut=this.placement.collisionIndex.transform.zoom;if(Q.type==="symbol"&&(!Q.minzoom||Q.minzoom<=ut)&&(!Q.maxzoom||Q.maxzoom>ut)){if(this._inProgressLayer||(this._inProgressLayer=new za(Q)),this._inProgressLayer.continuePlacement(w[Q.source],this.placement,this._showCollisionBoxes,Q,G))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},va.prototype.commit=function(j){return this.placement.commit(j),this.placement};var so=512/t.EXTENT/2,Ia=function(I,w,B){this.tileID=I,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var D=0;D<w.length;D++){var G=w.get(D),Q=G.key;this.indexedSymbolInstances[Q]||(this.indexedSymbolInstances[Q]=[]),this.indexedSymbolInstances[Q].push({crossTileID:G.crossTileID,coord:this.getScaledCoordinates(G,I)})}};Ia.prototype.getScaledCoordinates=function(j,I){var w=so/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*t.EXTENT+j.anchorX)*w),y:Math.floor((I.canonical.y*t.EXTENT+j.anchorY)*w)}},Ia.prototype.findMatches=function(j,I,w){for(var B=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z),D=0;D<j.length;D++){var G=j.get(D);if(!G.crossTileID){var Q=this.indexedSymbolInstances[G.key];if(Q)for(var ut=this.getScaledCoordinates(G,I),wt=0,It=Q;wt<It.length;wt+=1){var kt=It[wt];if(Math.abs(kt.coord.x-ut.x)<=B&&Math.abs(kt.coord.y-ut.y)<=B&&!w[kt.crossTileID]){w[kt.crossTileID]=!0,G.crossTileID=kt.crossTileID;break}}}}};var io=function(){this.maxCrossTileID=0};io.prototype.generate=function(){return++this.maxCrossTileID};var uo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};uo.prototype.handleWrapJump=function(j){var I=Math.round((j-this.lng)/360);if(I!==0)for(var w in this.indexes){var B=this.indexes[w],D={};for(var G in B){var Q=B[G];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+I),D[Q.tileID.key]=Q}this.indexes[w]=D}this.lng=j},uo.prototype.addBucket=function(j,I,w){if(this.indexes[j.overscaledZ]&&this.indexes[j.overscaledZ][j.key]){if(this.indexes[j.overscaledZ][j.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(j.overscaledZ,this.indexes[j.overscaledZ][j.key])}for(var B=0;B<I.symbolInstances.length;B++)I.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[j.overscaledZ]||(this.usedCrossTileIDs[j.overscaledZ]={});var D=this.usedCrossTileIDs[j.overscaledZ];for(var G in this.indexes){var Q=this.indexes[G];if(Number(G)>j.overscaledZ)for(var ut in Q){var wt=Q[ut];wt.tileID.isChildOf(j)&&wt.findMatches(I.symbolInstances,j,D)}else{var It=Q[j.scaledTo(Number(G)).key];It&&It.findMatches(I.symbolInstances,j,D)}}for(var kt=0;kt<I.symbolInstances.length;kt++){var Yt=I.symbolInstances.get(kt);Yt.crossTileID||(Yt.crossTileID=w.generate(),D[Yt.crossTileID]=!0)}return this.indexes[j.overscaledZ]===void 0&&(this.indexes[j.overscaledZ]={}),this.indexes[j.overscaledZ][j.key]=new Ia(j,I.symbolInstances,I.bucketInstanceId),!0},uo.prototype.removeBucketCrossTileIDs=function(j,I){for(var w in I.indexedSymbolInstances)for(var B=0,D=I.indexedSymbolInstances[w];B<D.length;B+=1)delete this.usedCrossTileIDs[j][D[B].crossTileID]},uo.prototype.removeStaleBuckets=function(j){var I=!1;for(var w in this.indexes){var B=this.indexes[w];for(var D in B)j[B[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,B[D]),delete B[D],I=!0)}return I};var ka=function(){this.layerIndexes={},this.crossTileIDs=new io,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ka.prototype.addLayer=function(j,I,w){var B=this.layerIndexes[j.id];B===void 0&&(B=this.layerIndexes[j.id]=new uo);var D=!1,G={};B.handleWrapJump(w);for(var Q=0,ut=I;Q<ut.length;Q+=1){var wt=ut[Q],It=wt.getBucket(j);It&&j.id===It.layerIds[0]&&(It.bucketInstanceId||(It.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(wt.tileID,It,this.crossTileIDs)&&(D=!0),G[It.bucketInstanceId]=!0)}return B.removeStaleBuckets(G)&&(D=!0),D},ka.prototype.pruneUnusedLayers=function(j){var I={};for(var w in j.forEach(function(B){I[B]=!0}),this.layerIndexes)I[w]||delete this.layerIndexes[w]};var vo=function(I,w){return t.emitValidationErrors(I,w&&w.filter(function(B){return B.identifier!=="source.canvas"}))},Vo=t.pick(Re,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Do=t.pick(Re,["setCenter","setZoom","setBearing","setPitch"]),fs=function(){var j={},I=t.styleSpec.$version;for(var w in t.styleSpec.$root){var B,D=t.styleSpec.$root[w];D.required&&(B=w==="version"?I:D.type==="array"?[]:{})!=null&&(j[w]=B)}return j}(),mo=function(j){function I(w,B){var D=this;B===void 0&&(B={}),j.call(this),this.map=w,this.dispatcher=new R(hn(),this),this.imageManager=new v,this.imageManager.setEventedParent(this),this.glyphManager=new m(w._requestManager,B.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new ka,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var G=this;this._rtlTextPluginCallback=I.registerForPluginStateChange(function(Q){G.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Q.pluginStatus,pluginURL:Q.pluginURL},function(ut,wt){if(t.triggerPluginCompletionEvent(ut),wt&&wt.every(function(kt){return kt}))for(var It in G.sourceCaches)G.sourceCaches[It].reload()})}),this.on("data",function(Q){if(Q.dataType==="source"&&Q.sourceDataType==="metadata"){var ut=D.sourceCaches[Q.sourceId];if(ut){var wt=ut.getSource();if(wt&&wt.vectorLayerIds)for(var It in D._layers){var kt=D._layers[It];kt.source===wt.id&&D._validateLayer(kt)}}}})}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.loadURL=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var G=typeof B.validate=="boolean"?B.validate:!t.isMapboxURL(w);w=this.map._requestManager.normalizeStyleURL(w,B.accessToken);var Q=this.map._requestManager.transformRequest(w,t.ResourceType.Style);this._request=t.getJSON(Q,function(ut,wt){D._request=null,ut?D.fire(new t.ErrorEvent(ut)):wt&&D._load(wt,G)})},I.prototype.loadJSON=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){D._request=null,D._load(w,B.validate!==!1)})},I.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(fs,!1)},I.prototype._load=function(w,B){if(!B||!vo(this,t.validateStyle(w))){for(var D in this._loaded=!0,this.stylesheet=w,w.sources)this.addSource(D,w.sources[D],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs);var G=yr(this.stylesheet.layers);this._order=G.map(function(It){return It.id}),this._layers={},this._serializedLayers={};for(var Q=0,ut=G;Q<ut.length;Q+=1){var wt=ut[Q];(wt=t.createStyleLayer(wt)).setEventedParent(this,{layer:{id:wt.id}}),this._layers[wt.id]=wt,this._serializedLayers[wt.id]=wt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},I.prototype._loadSprite=function(w){var B=this;this._spriteRequest=function(D,G,Q){var ut,wt,It,kt=t.browser.devicePixelRatio>1?"@2x":"",Yt=t.getJSON(G.transformRequest(G.normalizeSpriteURL(D,kt,".json"),t.ResourceType.SpriteJSON),function(ye,Le){Yt=null,It||(It=ye,ut=Le,ce())}),qt=t.getImage(G.transformRequest(G.normalizeSpriteURL(D,kt,".png"),t.ResourceType.SpriteImage),function(ye,Le){qt=null,It||(It=ye,wt=Le,ce())});function ce(){if(It)Q(It);else if(ut&&wt){var ye=t.browser.getImageData(wt),Le={};for(var Ce in ut){var ke=ut[Ce],nn=ke.width,ln=ke.height,Qn=ke.x,Yn=ke.y,dr=ke.sdf,Mr=ke.pixelRatio,$r=ke.stretchX,Kr=ke.stretchY,bi=ke.content,Oi=new t.RGBAImage({width:nn,height:ln});t.RGBAImage.copy(ye,Oi,{x:Qn,y:Yn},{x:0,y:0},{width:nn,height:ln}),Le[Ce]={data:Oi,pixelRatio:Mr,sdf:dr,stretchX:$r,stretchY:Kr,content:bi}}Q(null,Le)}}return{cancel:function(){Yt&&(Yt.cancel(),Yt=null),qt&&(qt.cancel(),qt=null)}}}(w,this.map._requestManager,function(D,G){if(B._spriteRequest=null,D)B.fire(new t.ErrorEvent(D));else if(G)for(var Q in G)B.imageManager.addImage(Q,G[Q]);B.imageManager.setLoaded(!0),B._availableImages=B.imageManager.listImages(),B.dispatcher.broadcast("setImages",B._availableImages),B.fire(new t.Event("data",{dataType:"style"}))})},I.prototype._validateLayer=function(w){var B=this.sourceCaches[w.source];if(B){var D=w.sourceLayer;if(D){var G=B.getSource();(G.type==="geojson"||G.vectorLayerIds&&G.vectorLayerIds.indexOf(D)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+D+'" does not exist on source "'+G.id+'" as specified by style layer "'+w.id+'"')))}}},I.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var w in this.sourceCaches)if(!this.sourceCaches[w].loaded())return!1;return!!this.imageManager.isLoaded()},I.prototype._serializeLayers=function(w){for(var B=[],D=0,G=w;D<G.length;D+=1){var Q=this._layers[G[D]];Q.type!=="custom"&&B.push(Q.serialize())}return B},I.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(var B in this._layers)if(this._layers[B].hasTransition())return!0;return!1},I.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},I.prototype.update=function(w){if(this._loaded){var B=this._changed;if(this._changed){var D=Object.keys(this._updatedLayers),G=Object.keys(this._removedLayers);for(var Q in(D.length||G.length)&&this._updateWorkerLayers(D,G),this._updatedSources){var ut=this._updatedSources[Q];ut==="reload"?this._reloadSource(Q):ut==="clear"&&this._clearSource(Q)}for(var wt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[wt].updateTransitions(w);this.light.updateTransitions(w),this._resetUpdates()}var It={};for(var kt in this.sourceCaches){var Yt=this.sourceCaches[kt];It[kt]=Yt.used,Yt.used=!1}for(var qt=0,ce=this._order;qt<ce.length;qt+=1){var ye=this._layers[ce[qt]];ye.recalculate(w,this._availableImages),!ye.isHidden(w.zoom)&&ye.source&&(this.sourceCaches[ye.source].used=!0)}for(var Le in It){var Ce=this.sourceCaches[Le];It[Le]!==Ce.used&&Ce.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Le}))}this.light.recalculate(w),this.z=w.zoom,B&&this.fire(new t.Event("data",{dataType:"style"}))}},I.prototype._updateTilesForChangedImages=function(){var w=Object.keys(this._changedImages);if(w.length){for(var B in this.sourceCaches)this.sourceCaches[B].reloadTilesForDependencies(["icons","patterns"],w);this._changedImages={}}},I.prototype._updateWorkerLayers=function(w,B){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(w),removedIds:B})},I.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},I.prototype.setState=function(w){var B=this;if(this._checkLoaded(),vo(this,t.validateStyle(w)))return!1;(w=t.clone$1(w)).layers=yr(w.layers);var D=function(Q,ut){if(!Q)return[{command:Re.setStyle,args:[ut]}];var wt=[];try{if(!t.deepEqual(Q.version,ut.version))return[{command:Re.setStyle,args:[ut]}];t.deepEqual(Q.center,ut.center)||wt.push({command:Re.setCenter,args:[ut.center]}),t.deepEqual(Q.zoom,ut.zoom)||wt.push({command:Re.setZoom,args:[ut.zoom]}),t.deepEqual(Q.bearing,ut.bearing)||wt.push({command:Re.setBearing,args:[ut.bearing]}),t.deepEqual(Q.pitch,ut.pitch)||wt.push({command:Re.setPitch,args:[ut.pitch]}),t.deepEqual(Q.sprite,ut.sprite)||wt.push({command:Re.setSprite,args:[ut.sprite]}),t.deepEqual(Q.glyphs,ut.glyphs)||wt.push({command:Re.setGlyphs,args:[ut.glyphs]}),t.deepEqual(Q.transition,ut.transition)||wt.push({command:Re.setTransition,args:[ut.transition]}),t.deepEqual(Q.light,ut.light)||wt.push({command:Re.setLight,args:[ut.light]});var It={},kt=[];(function(qt,ce,ye,Le){var Ce;for(Ce in ce=ce||{},qt=qt||{})qt.hasOwnProperty(Ce)&&(ce.hasOwnProperty(Ce)||Ye(Ce,ye,Le));for(Ce in ce)ce.hasOwnProperty(Ce)&&(qt.hasOwnProperty(Ce)?t.deepEqual(qt[Ce],ce[Ce])||(qt[Ce].type==="geojson"&&ce[Ce].type==="geojson"&&En(qt,ce,Ce)?ye.push({command:Re.setGeoJSONSourceData,args:[Ce,ce[Ce].data]}):dn(Ce,ce,ye,Le)):We(Ce,ce,ye))})(Q.sources,ut.sources,kt,It);var Yt=[];Q.layers&&Q.layers.forEach(function(qt){It[qt.source]?wt.push({command:Re.removeLayer,args:[qt.id]}):Yt.push(qt)}),wt=wt.concat(kt),function(qt,ce,ye){ce=ce||[];var Le,Ce,ke,nn,ln,Qn,Yn,dr=(qt=qt||[]).map(Sn),Mr=ce.map(Sn),$r=qt.reduce(Nn,{}),Kr=ce.reduce(Nn,{}),bi=dr.slice(),Oi=Object.create(null);for(Le=0,Ce=0;Le<dr.length;Le++)Kr.hasOwnProperty(ke=dr[Le])?Ce++:(ye.push({command:Re.removeLayer,args:[ke]}),bi.splice(bi.indexOf(ke,Ce),1));for(Le=0,Ce=0;Le<Mr.length;Le++)bi[bi.length-1-Le]!==(ke=Mr[Mr.length-1-Le])&&($r.hasOwnProperty(ke)?(ye.push({command:Re.removeLayer,args:[ke]}),bi.splice(bi.lastIndexOf(ke,bi.length-Ce),1)):Ce++,ye.push({command:Re.addLayer,args:[Kr[ke],Qn=bi[bi.length-Le]]}),bi.splice(bi.length-Le,0,ke),Oi[ke]=!0);for(Le=0;Le<Mr.length;Le++)if(nn=$r[ke=Mr[Le]],ln=Kr[ke],!Oi[ke]&&!t.deepEqual(nn,ln))if(t.deepEqual(nn.source,ln.source)&&t.deepEqual(nn["source-layer"],ln["source-layer"])&&t.deepEqual(nn.type,ln.type)){for(Yn in Dn(nn.layout,ln.layout,ye,ke,null,Re.setLayoutProperty),Dn(nn.paint,ln.paint,ye,ke,null,Re.setPaintProperty),t.deepEqual(nn.filter,ln.filter)||ye.push({command:Re.setFilter,args:[ke,ln.filter]}),t.deepEqual(nn.minzoom,ln.minzoom)&&t.deepEqual(nn.maxzoom,ln.maxzoom)||ye.push({command:Re.setLayerZoomRange,args:[ke,ln.minzoom,ln.maxzoom]}),nn)nn.hasOwnProperty(Yn)&&Yn!=="layout"&&Yn!=="paint"&&Yn!=="filter"&&Yn!=="metadata"&&Yn!=="minzoom"&&Yn!=="maxzoom"&&(Yn.indexOf("paint.")===0?Dn(nn[Yn],ln[Yn],ye,ke,Yn.slice(6),Re.setPaintProperty):t.deepEqual(nn[Yn],ln[Yn])||ye.push({command:Re.setLayerProperty,args:[ke,Yn,ln[Yn]]}));for(Yn in ln)ln.hasOwnProperty(Yn)&&!nn.hasOwnProperty(Yn)&&Yn!=="layout"&&Yn!=="paint"&&Yn!=="filter"&&Yn!=="metadata"&&Yn!=="minzoom"&&Yn!=="maxzoom"&&(Yn.indexOf("paint.")===0?Dn(nn[Yn],ln[Yn],ye,ke,Yn.slice(6),Re.setPaintProperty):t.deepEqual(nn[Yn],ln[Yn])||ye.push({command:Re.setLayerProperty,args:[ke,Yn,ln[Yn]]}))}else ye.push({command:Re.removeLayer,args:[ke]}),Qn=bi[bi.lastIndexOf(ke)+1],ye.push({command:Re.addLayer,args:[ln,Qn]})}(Yt,ut.layers,wt)}catch(qt){console.warn("Unable to compute style diff:",qt),wt=[{command:Re.setStyle,args:[ut]}]}return wt}(this.serialize(),w).filter(function(Q){return!(Q.command in Do)});if(D.length===0)return!1;var G=D.filter(function(Q){return!(Q.command in Vo)});if(G.length>0)throw new Error("Unimplemented: "+G.map(function(Q){return Q.command}).join(", ")+".");return D.forEach(function(Q){Q.command!=="setTransition"&&B[Q.command].apply(B,Q.args)}),this.stylesheet=w,!0},I.prototype.addImage=function(w,B){if(this.getImage(w))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(w,B),this._afterImageUpdated(w)},I.prototype.updateImage=function(w,B){this.imageManager.updateImage(w,B)},I.prototype.getImage=function(w){return this.imageManager.getImage(w)},I.prototype.removeImage=function(w){if(!this.getImage(w))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(w),this._afterImageUpdated(w)},I.prototype._afterImageUpdated=function(w){this._availableImages=this.imageManager.listImages(),this._changedImages[w]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},I.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},I.prototype.addSource=function(w,B,D){var G=this;if(D===void 0&&(D={}),this._checkLoaded(),this.sourceCaches[w]!==void 0)throw new Error("There is already a source with this ID");if(!B.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(B).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(B.type)>=0&&this._validate(t.validateStyle.source,"sources."+w,B,null,D))){this.map&&this.map._collectResourceTiming&&(B.collectResourceTiming=!0);var Q=this.sourceCaches[w]=new xe(w,B,this.dispatcher);Q.style=this,Q.setEventedParent(this,function(){return{isSourceLoaded:G.loaded(),source:Q.serialize(),sourceId:w}}),Q.onAdd(this.map),this._changed=!0}},I.prototype.removeSource=function(w){if(this._checkLoaded(),this.sourceCaches[w]===void 0)throw new Error("There is no source with this ID");for(var B in this._layers)if(this._layers[B].source===w)return this.fire(new t.ErrorEvent(new Error('Source "'+w+'" cannot be removed while layer "'+B+'" is using it.')));var D=this.sourceCaches[w];delete this.sourceCaches[w],delete this._updatedSources[w],D.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w})),D.setEventedParent(null),D.clearTiles(),D.onRemove&&D.onRemove(this.map),this._changed=!0},I.prototype.setGeoJSONSourceData=function(w,B){this._checkLoaded(),this.sourceCaches[w].getSource().setData(B),this._changed=!0},I.prototype.getSource=function(w){return this.sourceCaches[w]&&this.sourceCaches[w].getSource()},I.prototype.addLayer=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var G=w.id;if(this.getLayer(G))this.fire(new t.ErrorEvent(new Error('Layer with id "'+G+'" already exists on this map')));else{var Q;if(w.type==="custom"){if(vo(this,t.validateCustomStyleLayer(w)))return;Q=t.createStyleLayer(w)}else{if(typeof w.source=="object"&&(this.addSource(G,w.source),w=t.clone$1(w),w=t.extend(w,{source:G})),this._validate(t.validateStyle.layer,"layers."+G,w,{arrayIndex:-1},D))return;Q=t.createStyleLayer(w),this._validateLayer(Q),Q.setEventedParent(this,{layer:{id:G}}),this._serializedLayers[Q.id]=Q.serialize()}var ut=B?this._order.indexOf(B):this._order.length;if(B&&ut===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.')));else{if(this._order.splice(ut,0,G),this._layerOrderChanged=!0,this._layers[G]=Q,this._removedLayers[G]&&Q.source&&Q.type!=="custom"){var wt=this._removedLayers[G];delete this._removedLayers[G],wt.type!==Q.type?this._updatedSources[Q.source]="clear":(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause())}this._updateLayer(Q),Q.onAdd&&Q.onAdd(this.map)}}},I.prototype.moveLayer=function(w,B){if(this._checkLoaded(),this._changed=!0,this._layers[w]){if(w!==B){var D=this._order.indexOf(w);this._order.splice(D,1);var G=B?this._order.indexOf(B):this._order.length;B&&G===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.'))):(this._order.splice(G,0,w),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be moved.")))},I.prototype.removeLayer=function(w){this._checkLoaded();var B=this._layers[w];if(B){B.setEventedParent(null);var D=this._order.indexOf(w);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[w]=B,delete this._layers[w],delete this._serializedLayers[w],delete this._updatedLayers[w],delete this._updatedPaintProps[w],B.onRemove&&B.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be removed.")))},I.prototype.getLayer=function(w){return this._layers[w]},I.prototype.hasLayer=function(w){return w in this._layers},I.prototype.setLayerZoomRange=function(w,B,D){this._checkLoaded();var G=this.getLayer(w);G?G.minzoom===B&&G.maxzoom===D||(B!=null&&(G.minzoom=B),D!=null&&(G.maxzoom=D),this._updateLayer(G)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot have zoom extent.")))},I.prototype.setFilter=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var G=this.getLayer(w);if(G){if(!t.deepEqual(G.filter,B))return B==null?(G.filter=void 0,void this._updateLayer(G)):void(this._validate(t.validateStyle.filter,"layers."+G.id+".filter",B,null,D)||(G.filter=t.clone$1(B),this._updateLayer(G)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be filtered.")))},I.prototype.getFilter=function(w){return t.clone$1(this.getLayer(w).filter)},I.prototype.setLayoutProperty=function(w,B,D,G){G===void 0&&(G={}),this._checkLoaded();var Q=this.getLayer(w);Q?t.deepEqual(Q.getLayoutProperty(B),D)||(Q.setLayoutProperty(B,D,G),this._updateLayer(Q)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getLayoutProperty=function(w,B){var D=this.getLayer(w);if(D)return D.getLayoutProperty(B);this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style.")))},I.prototype.setPaintProperty=function(w,B,D,G){G===void 0&&(G={}),this._checkLoaded();var Q=this.getLayer(w);Q?t.deepEqual(Q.getPaintProperty(B),D)||(Q.setPaintProperty(B,D,G)&&this._updateLayer(Q),this._changed=!0,this._updatedPaintProps[w]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getPaintProperty=function(w,B){return this.getLayer(w).getPaintProperty(B)},I.prototype.setFeatureState=function(w,B){this._checkLoaded();var D=w.source,G=w.sourceLayer,Q=this.sourceCaches[D];if(Q!==void 0){var ut=Q.getSource().type;ut==="geojson"&&G?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ut!=="vector"||G?(w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.setFeatureState(G,w.id,B)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.removeFeatureState=function(w,B){this._checkLoaded();var D=w.source,G=this.sourceCaches[D];if(G!==void 0){var Q=G.getSource().type,ut=Q==="vector"?w.sourceLayer:void 0;Q!=="vector"||ut?B&&typeof w.id!="string"&&typeof w.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):G.removeFeatureState(ut,w.id,B):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.getFeatureState=function(w){this._checkLoaded();var B=w.source,D=w.sourceLayer,G=this.sourceCaches[B];if(G!==void 0){if(G.getSource().type!=="vector"||D)return w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),G.getFeatureState(D,w.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+B+"' does not exist in the map's style.")))},I.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},I.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(w){return w.serialize()}),layers:this._serializeLayers(this._order)},function(w){return w!==void 0})},I.prototype._updateLayer=function(w){this._updatedLayers[w.id]=!0,w.source&&!this._updatedSources[w.source]&&this.sourceCaches[w.source].getSource().type!=="raster"&&(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause()),this._changed=!0},I.prototype._flattenAndSortRenderedFeatures=function(w){for(var B=this,D=function(Kr){return B._layers[Kr].type==="fill-extrusion"},G={},Q=[],ut=this._order.length-1;ut>=0;ut--){var wt=this._order[ut];if(D(wt)){G[wt]=ut;for(var It=0,kt=w;It<kt.length;It+=1){var Yt=kt[It][wt];if(Yt)for(var qt=0,ce=Yt;qt<ce.length;qt+=1)Q.push(ce[qt])}}}Q.sort(function($r,Kr){return Kr.intersectionZ-$r.intersectionZ});for(var ye=[],Le=this._order.length-1;Le>=0;Le--){var Ce=this._order[Le];if(D(Ce))for(var ke=Q.length-1;ke>=0;ke--){var nn=Q[ke].feature;if(G[nn.layer.id]<Le)break;ye.push(nn),Q.pop()}else for(var ln=0,Qn=w;ln<Qn.length;ln+=1){var Yn=Qn[ln][Ce];if(Yn)for(var dr=0,Mr=Yn;dr<Mr.length;dr+=1)ye.push(Mr[dr].feature)}}return ye},I.prototype.queryRenderedFeatures=function(w,B,D){B&&B.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",B.filter,null,B);var G={};if(B&&B.layers){if(!Array.isArray(B.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Q=0,ut=B.layers;Q<ut.length;Q+=1){var wt=ut[Q],It=this._layers[wt];if(!It)return this.fire(new t.ErrorEvent(new Error("The layer '"+wt+"' does not exist in the map's style and cannot be queried for features."))),[];G[It.source]=!0}}var kt=[];for(var Yt in B.availableImages=this._availableImages,this.sourceCaches)B.layers&&!G[Yt]||kt.push(Nt(this.sourceCaches[Yt],this._layers,this._serializedLayers,w,B,D));return this.placement&&kt.push(function(qt,ce,ye,Le,Ce,ke,nn){for(var ln={},Qn=ke.queryRenderedSymbols(Le),Yn=[],dr=0,Mr=Object.keys(Qn).map(Number);dr<Mr.length;dr+=1)Yn.push(nn[Mr[dr]]);Yn.sort(Dt);for(var $r=function(){var _a=bi[Kr],ya=_a.featureIndex.lookupSymbolFeatures(Qn[_a.bucketInstanceId],ce,_a.bucketIndex,_a.sourceLayerIndex,Ce.filter,Ce.layers,Ce.availableImages,qt);for(var wi in ya){var $i=ln[wi]=ln[wi]||[],sa=ya[wi];sa.sort(function(qi,Ca){var Na=_a.featureSortOrder;if(Na){var rs=Na.indexOf(qi.featureIndex);return Na.indexOf(Ca.featureIndex)-rs}return Ca.featureIndex-qi.featureIndex});for(var Bi=0,ca=sa;Bi<ca.length;Bi+=1)$i.push(ca[Bi])}},Kr=0,bi=Yn;Kr<bi.length;Kr+=1)$r();var Oi=function(_a){ln[_a].forEach(function(ya){var wi=ya.feature,$i=ye[qt[_a].source].getFeatureState(wi.layer["source-layer"],wi.id);wi.source=wi.layer.source,wi.layer["source-layer"]&&(wi.sourceLayer=wi.layer["source-layer"]),wi.state=$i})};for(var zi in ln)Oi(zi);return ln}(this._layers,this._serializedLayers,this.sourceCaches,w,B,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(kt)},I.prototype.querySourceFeatures=function(w,B){B&&B.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",B.filter,null,B);var D=this.sourceCaches[w];return D?function(G,Q){for(var ut=G.getRenderableIds().map(function(ce){return G.getTileByID(ce)}),wt=[],It={},kt=0;kt<ut.length;kt++){var Yt=ut[kt],qt=Yt.tileID.canonical.key;It[qt]||(It[qt]=!0,Yt.querySourceFeatures(wt,Q))}return wt}(D,B):[]},I.prototype.addSourceType=function(w,B,D){return I.getSourceType(w)?D(new Error('A source type called "'+w+'" already exists.')):(I.setSourceType(w,B),B.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:w,url:B.workerSourceURL},D):D(null,null))},I.prototype.getLight=function(){return this.light.getLight()},I.prototype.setLight=function(w,B){B===void 0&&(B={}),this._checkLoaded();var D=this.light.getLight(),G=!1;for(var Q in w)if(!t.deepEqual(w[Q],D[Q])){G=!0;break}if(G){var ut={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(w,B),this.light.updateTransitions(ut)}},I.prototype._validate=function(w,B,D,G,Q){return Q===void 0&&(Q={}),(!Q||Q.validate!==!1)&&vo(this,w.call(t.validateStyle,t.extend({key:B,style:this.serialize(),value:D,styleSpec:t.styleSpec},G)))},I.prototype._remove=function(){for(var w in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[w].setEventedParent(null);for(var B in this.sourceCaches)this.sourceCaches[B].clearTiles(),this.sourceCaches[B].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},I.prototype._clearSource=function(w){this.sourceCaches[w].clearTiles()},I.prototype._reloadSource=function(w){this.sourceCaches[w].resume(),this.sourceCaches[w].reload()},I.prototype._updateSources=function(w){for(var B in this.sourceCaches)this.sourceCaches[B].update(w)},I.prototype._generateCollisionBoxes=function(){for(var w in this.sourceCaches)this._reloadSource(w)},I.prototype._updatePlacement=function(w,B,D,G,Q){Q===void 0&&(Q=!1);for(var ut=!1,wt=!1,It={},kt=0,Yt=this._order;kt<Yt.length;kt+=1){var qt=this._layers[Yt[kt]];if(qt.type==="symbol"){if(!It[qt.source]){var ce=this.sourceCaches[qt.source];It[qt.source]=ce.getRenderableIds(!0).map(function(nn){return ce.getTileByID(nn)}).sort(function(nn,ln){return ln.tileID.overscaledZ-nn.tileID.overscaledZ||(nn.tileID.isLessThan(ln.tileID)?-1:1)})}var ye=this.crossTileSymbolIndex.addLayer(qt,It[qt.source],w.center.lng);ut=ut||ye}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Q=Q||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),w.zoom))&&(this.pauseablePlacement=new va(w,this._order,Q,B,D,G,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,It),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),wt=!0),ut&&this.pauseablePlacement.placement.setStale()),wt||ut)for(var Le=0,Ce=this._order;Le<Ce.length;Le+=1){var ke=this._layers[Ce[Le]];ke.type==="symbol"&&this.placement.updateLayerOpacities(ke,It[ke.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},I.prototype._releaseSymbolFadeTiles=function(){for(var w in this.sourceCaches)this.sourceCaches[w].releaseSymbolFadeTiles()},I.prototype.getImages=function(w,B,D){this.imageManager.getImages(B.icons,D),this._updateTilesForChangedImages();var G=this.sourceCaches[B.source];G&&G.setDependencies(B.tileID.key,B.type,B.icons)},I.prototype.getGlyphs=function(w,B,D){this.glyphManager.getGlyphs(B.stacks,D)},I.prototype.getResource=function(w,B,D){return t.makeRequest(B,D)},I}(t.Evented);mo.getSourceType=function(j){return ft[j]},mo.setSourceType=function(j,I){ft[j]=I},mo.registerForPluginStateChange=t.registerForPluginStateChange;var Ga=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),us=Aa(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Xo=Aa(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ta=Aa(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),mn=Aa(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),cr=Aa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Wr=Aa(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Di=Aa(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ua=Aa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),yo=Aa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),lo=Aa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),La=Aa(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Va=Aa(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ts=Aa(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ls=Aa(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ki=Aa(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),_u=Aa(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Fo=Aa(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hs=Aa(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),$s=Aa(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ds=Aa(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),vs=Aa(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Qs=Aa(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Mu=Aa(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ps=Aa(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),wu=Aa(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ds=Aa(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Aa(j,I){var w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,B=I.match(/attribute ([\w]+) ([\w]+)/g),D=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),G=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=G?G.concat(D):D,ut={};return{fragmentSource:j=j.replace(w,function(wt,It,kt,Yt,qt){return ut[qt]=!0,It==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
varying `+kt+" "+Yt+" "+qt+`;
#else
uniform `+kt+" "+Yt+" u_"+qt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qt+`
    `+kt+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`}),vertexSource:I=I.replace(w,function(wt,It,kt,Yt,qt){var ce=Yt==="float"?"vec2":"vec4",ye=qt.match(/color/)?"color":ce;return ut[qt]?It==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+kt+" "+ce+" a_"+qt+`;
varying `+kt+" "+Yt+" "+qt+`;
#else
uniform `+kt+" "+Yt+" u_"+qt+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = a_"+qt+`;
#else
    `+kt+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = unpack_mix_"+ye+"(a_"+qt+", u_"+qt+`_t);
#else
    `+kt+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`:It==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+kt+" "+ce+" a_"+qt+`;
#else
uniform `+kt+" "+Yt+" u_"+qt+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+kt+" "+Yt+" "+qt+" = a_"+qt+`;
#else
    `+kt+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+kt+" "+Yt+" "+qt+" = unpack_mix_"+ye+"(a_"+qt+", u_"+qt+`_t);
#else
    `+kt+" "+Yt+" "+qt+" = u_"+qt+`;
#endif
`}),staticAttributes:B,staticUniforms:Q}}var lu=Object.freeze({__proto__:null,prelude:us,background:Xo,backgroundPattern:Ta,circle:mn,clippingMask:cr,heatmap:Wr,heatmapTexture:Di,collisionBox:Ua,collisionCircle:yo,debug:lo,fill:La,fillOutline:Va,fillOutlinePattern:ts,fillPattern:ls,fillExtrusion:Ki,fillExtrusionPattern:_u,hillshadePrepare:Fo,hillshade:hs,line:$s,lineGradient:ds,linePattern:vs,lineSDF:Qs,raster:Mu,symbolIcon:ps,symbolSDF:wu,symbolTextAndIcon:Ds}),Pu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Zu(j){for(var I=[],w=0;w<j.length;w++)if(j[w]!==null){var B=j[w].split(" ");I.push(B.pop())}return I}Pu.prototype.bind=function(j,I,w,B,D,G,Q,ut){this.context=j;for(var wt=this.boundPaintVertexBuffers.length!==B.length,It=0;!wt&&It<B.length;It++)this.boundPaintVertexBuffers[It]!==B[It]&&(wt=!0);j.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===w&&!wt&&this.boundIndexBuffer===D&&this.boundVertexOffset===G&&this.boundDynamicVertexBuffer===Q&&this.boundDynamicVertexBuffer2===ut?(j.bindVertexArrayOES.set(this.vao),Q&&Q.bind(),D&&D.dynamicDraw&&D.bind(),ut&&ut.bind()):this.freshBind(I,w,B,D,G,Q,ut)},Pu.prototype.freshBind=function(j,I,w,B,D,G,Q){var ut,wt=j.numAttributes,It=this.context,kt=It.gl;if(It.extVertexArrayObject)this.vao&&this.destroy(),this.vao=It.extVertexArrayObject.createVertexArrayOES(),It.bindVertexArrayOES.set(this.vao),ut=0,this.boundProgram=j,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=B,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=G,this.boundDynamicVertexBuffer2=Q;else{ut=It.currentNumAttributes||0;for(var Yt=wt;Yt<ut;Yt++)kt.disableVertexAttribArray(Yt)}I.enableAttributes(kt,j);for(var qt=0,ce=w;qt<ce.length;qt+=1)ce[qt].enableAttributes(kt,j);G&&G.enableAttributes(kt,j),Q&&Q.enableAttributes(kt,j),I.bind(),I.setVertexAttribPointers(kt,j,D);for(var ye=0,Le=w;ye<Le.length;ye+=1){var Ce=Le[ye];Ce.bind(),Ce.setVertexAttribPointers(kt,j,D)}G&&(G.bind(),G.setVertexAttribPointers(kt,j,D)),B&&B.bind(),Q&&(Q.bind(),Q.setVertexAttribPointers(kt,j,D)),It.currentNumAttributes=wt},Pu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var vl=function(I,w,B,D,G,Q){var ut=I.gl;this.program=ut.createProgram();for(var wt=Zu(B.staticAttributes),It=D?D.getBinderAttributes():[],kt=wt.concat(It),Yt=B.staticUniforms?Zu(B.staticUniforms):[],qt=D?D.getBinderUniforms():[],ce=[],ye=0,Le=Yt.concat(qt);ye<Le.length;ye+=1){var Ce=Le[ye];ce.indexOf(Ce)<0&&ce.push(Ce)}var ke=D?D.defines():[];Q&&ke.push("#define OVERDRAW_INSPECTOR;");var nn=ke.concat(us.fragmentSource,B.fragmentSource).join(`
`),ln=ke.concat(us.vertexSource,B.vertexSource).join(`
`),Qn=ut.createShader(ut.FRAGMENT_SHADER);if(ut.isContextLost())this.failedToCreate=!0;else{ut.shaderSource(Qn,nn),ut.compileShader(Qn),ut.attachShader(this.program,Qn);var Yn=ut.createShader(ut.VERTEX_SHADER);if(ut.isContextLost())this.failedToCreate=!0;else{ut.shaderSource(Yn,ln),ut.compileShader(Yn),ut.attachShader(this.program,Yn),this.attributes={};var dr={};this.numAttributes=kt.length;for(var Mr=0;Mr<this.numAttributes;Mr++)kt[Mr]&&(ut.bindAttribLocation(this.program,Mr,kt[Mr]),this.attributes[kt[Mr]]=Mr);ut.linkProgram(this.program),ut.deleteShader(Yn),ut.deleteShader(Qn);for(var $r=0;$r<ce.length;$r++){var Kr=ce[$r];if(Kr&&!dr[Kr]){var bi=ut.getUniformLocation(this.program,Kr);bi&&(dr[Kr]=bi)}}this.fixedUniforms=G(I,dr),this.binderUniforms=D?D.getUniforms(I,dr):[]}}};function Tu(j,I,w){var B=1/Pa(w,1,I.transform.tileZoom),D=Math.pow(2,w.tileID.overscaledZ),G=w.tileSize*Math.pow(2,I.transform.tileZoom)/D,Q=G*(w.tileID.canonical.x+w.tileID.wrap*D),ut=G*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[B,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[Q>>16,ut>>16],u_pixel_coord_lower:[65535&Q,65535&ut]}}vl.prototype.draw=function(j,I,w,B,D,G,Q,ut,wt,It,kt,Yt,qt,ce,ye,Le){var Ce,ke=j.gl;if(!this.failedToCreate){for(var nn in j.program.set(this.program),j.setDepthMode(w),j.setStencilMode(B),j.setColorMode(D),j.setCullFace(G),this.fixedUniforms)this.fixedUniforms[nn].set(Q[nn]);ce&&ce.setUniforms(j,this.binderUniforms,Yt,{zoom:qt});for(var ln=(Ce={},Ce[ke.LINES]=2,Ce[ke.TRIANGLES]=3,Ce[ke.LINE_STRIP]=1,Ce)[I],Qn=0,Yn=kt.get();Qn<Yn.length;Qn+=1){var dr=Yn[Qn],Mr=dr.vaos||(dr.vaos={});(Mr[ut]||(Mr[ut]=new Pu)).bind(j,this,wt,ce?ce.getPaintVertexBuffers():[],It,dr.vertexOffset,ye,Le),ke.drawElements(I,dr.primitiveLength*ln,ke.UNSIGNED_SHORT,dr.primitiveOffset*ln*2)}}};var Ao=function(I,w,B,D){var G=w.style.light,Q=G.properties.get("position"),ut=[Q.x,Q.y,Q.z],wt=t.create$1();G.properties.get("anchor")==="viewport"&&t.fromRotation(wt,-w.transform.angle),t.transformMat3(ut,ut,wt);var It=G.properties.get("color");return{u_matrix:I,u_lightpos:ut,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[It.r,It.g,It.b],u_vertical_gradient:+B,u_opacity:D}},es=function(I,w,B,D,G,Q,ut){return t.extend(Ao(I,w,B,D),Tu(Q,w,ut),{u_height_factor:-Math.pow(2,G.overscaledZ)/ut.tileSize/8})},gs=function(I){return{u_matrix:I}},po=function(I,w,B,D){return t.extend(gs(I),Tu(B,w,D))},cu=function(I,w){return{u_matrix:I,u_world:w}},Oo=function(I,w,B,D,G){return t.extend(po(I,w,B,D),{u_world:G})},ba=function(I,w,B,D){var G,Q,ut=I.transform;if(D.paint.get("circle-pitch-alignment")==="map"){var wt=Pa(B,1,ut.zoom);G=!0,Q=[wt,wt]}else G=!1,Q=ut.pixelsToGLUnits;return{u_camera_to_center_distance:ut.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(w.posMatrix,B,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+G,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Q}},As=function(I,w,B){var D=Pa(B,1,w.zoom),G=Math.pow(2,w.zoom-B.tileID.overscaledZ),Q=B.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:w.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[w.pixelsToGLUnits[0]/(D*G),w.pixelsToGLUnits[1]/(D*G)],u_overscale_factor:Q}},qs=function(I,w,B){return{u_matrix:I,u_inv_matrix:w,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},js=function(I,w,B){return B===void 0&&(B=1),{u_matrix:I,u_color:w,u_overlay:0,u_overlay_scale:B}},ms=function(I){return{u_matrix:I}},Au=function(I,w,B,D){return{u_matrix:I,u_extrude_scale:Pa(w,1,B),u_intensity:D}},ks=function(I,w,B){var D=I.transform;return{u_matrix:pl(I,w,B),u_ratio:1/Pa(w,1,D.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Ya=function(I,w,B,D){return t.extend(ks(I,w,B),{u_image:0,u_image_height:D})},nl=function(I,w,B,D){var G=I.transform,Q=Al(w,G);return{u_matrix:pl(I,w,B),u_texsize:w.imageAtlasTexture.size,u_ratio:1/Pa(w,1,G.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Q,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},Zl=function(I,w,B,D,G){var Q=I.lineAtlas,ut=Al(w,I.transform),wt=B.layout.get("line-cap")==="round",It=Q.getDash(D.from,wt),kt=Q.getDash(D.to,wt),Yt=It.width*G.fromScale,qt=kt.width*G.toScale;return t.extend(ks(I,w,B),{u_patternscale_a:[ut/Yt,-It.height/2],u_patternscale_b:[ut/qt,-kt.height/2],u_sdfgamma:Q.width/(256*Math.min(Yt,qt)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:It.y,u_tex_y_b:kt.y,u_mix:G.t})};function Al(j,I){return 1/Pa(j,1,I.tileZoom)}function pl(j,I,w){return j.translatePosMatrix(I.tileID.posMatrix,I,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}var Ku=function(I,w,B,D,G){return{u_matrix:I,u_tl_parent:w,u_scale_parent:B,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*G.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:G.paint.get("raster-brightness-min"),u_brightness_high:G.paint.get("raster-brightness-max"),u_saturation_factor:(ut=G.paint.get("raster-saturation"),ut>0?1-1/(1.001-ut):-ut),u_contrast_factor:(Q=G.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:Cu(G.paint.get("raster-hue-rotate"))};var Q,ut};function Cu(j){j*=Math.PI/180;var I=Math.sin(j),w=Math.cos(j);return[(2*w+1)/3,(-Math.sqrt(3)*I-w+1)/3,(Math.sqrt(3)*I-w+1)/3]}var Gs,Cl=function(I,w,B,D,G,Q,ut,wt,It,kt){var Yt=G.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:w?w.uSizeT:0,u_size:w?w.uSize:0,u_camera_to_center_distance:Yt.cameraToCenterDistance,u_pitch:Yt.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:Yt.width/Yt.height,u_fade_change:G.options.fadeDuration?G.symbolFadeChange:1,u_matrix:Q,u_label_plane_matrix:ut,u_coord_matrix:wt,u_is_text:+It,u_pitch_with_map:+D,u_texsize:kt,u_texture:0}},ns=function(I,w,B,D,G,Q,ut,wt,It,kt,Yt){var qt=G.transform;return t.extend(Cl(I,w,B,D,G,Q,ut,wt,It,kt),{u_gamma_scale:D?Math.cos(qt._pitch)*qt.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Yt})},Wa=function(I,w,B,D,G,Q,ut,wt,It,kt){return t.extend(ns(I,w,B,D,G,Q,ut,wt,!0,It,!0),{u_texsize_icon:kt,u_texture_icon:1})},fu=function(I,w,B){return{u_matrix:I,u_opacity:w,u_color:B}},Xu=function(I,w,B,D,G,Q){return t.extend(function(ut,wt,It,kt){var Yt=It.imageManager.getPattern(ut.from.toString()),qt=It.imageManager.getPattern(ut.to.toString()),ce=It.imageManager.getPixelSize(),ye=ce.width,Le=ce.height,Ce=Math.pow(2,kt.tileID.overscaledZ),ke=kt.tileSize*Math.pow(2,It.transform.tileZoom)/Ce,nn=ke*(kt.tileID.canonical.x+kt.tileID.wrap*Ce),ln=ke*kt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Yt.tl,u_pattern_br_a:Yt.br,u_pattern_tl_b:qt.tl,u_pattern_br_b:qt.br,u_texsize:[ye,Le],u_mix:wt.t,u_pattern_size_a:Yt.displaySize,u_pattern_size_b:qt.displaySize,u_scale_a:wt.fromScale,u_scale_b:wt.toScale,u_tile_units_to_pixels:1/Pa(kt,1,It.transform.tileZoom),u_pixel_coord_upper:[nn>>16,ln>>16],u_pixel_coord_lower:[65535&nn,65535&ln]}}(D,Q,B,G),{u_matrix:I,u_opacity:w})},Ll={fillExtrusion:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fillExtrusionPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_height_factor:new t.Uniform1f(I,w.u_height_factor),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fill:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},fillPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},fillOutline:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world)}},fillOutlinePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},circle:function(I,w){return{u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(I,w.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},collisionBox:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(I,w.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_overscale_factor:new t.Uniform1f(I,w.u_overscale_factor)}},collisionCircle:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_inv_matrix:new t.UniformMatrix4f(I,w.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(I,w.u_viewport_size)}},debug:function(I,w){return{u_color:new t.UniformColor(I,w.u_color),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_overlay:new t.Uniform1i(I,w.u_overlay),u_overlay_scale:new t.Uniform1f(I,w.u_overlay_scale)}},clippingMask:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmap:function(I,w){return{u_extrude_scale:new t.Uniform1f(I,w.u_extrude_scale),u_intensity:new t.Uniform1f(I,w.u_intensity),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmapTexture:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_color_ramp:new t.Uniform1i(I,w.u_color_ramp),u_opacity:new t.Uniform1f(I,w.u_opacity)}},hillshade:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_latrange:new t.Uniform2f(I,w.u_latrange),u_light:new t.Uniform2f(I,w.u_light),u_shadow:new t.UniformColor(I,w.u_shadow),u_highlight:new t.UniformColor(I,w.u_highlight),u_accent:new t.UniformColor(I,w.u_accent)}},hillshadePrepare:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_dimension:new t.Uniform2f(I,w.u_dimension),u_zoom:new t.Uniform1f(I,w.u_zoom),u_unpack:new t.Uniform4f(I,w.u_unpack)}},line:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels)}},lineGradient:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_image:new t.Uniform1i(I,w.u_image),u_image_height:new t.Uniform1f(I,w.u_image_height)}},linePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_texsize:new t.Uniform2f(I,w.u_texsize),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_image:new t.Uniform1i(I,w.u_image),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},lineSDF:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(I,w.u_patternscale_a),u_patternscale_b:new t.Uniform2f(I,w.u_patternscale_b),u_sdfgamma:new t.Uniform1f(I,w.u_sdfgamma),u_image:new t.Uniform1i(I,w.u_image),u_tex_y_a:new t.Uniform1f(I,w.u_tex_y_a),u_tex_y_b:new t.Uniform1f(I,w.u_tex_y_b),u_mix:new t.Uniform1f(I,w.u_mix)}},raster:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_tl_parent:new t.Uniform2f(I,w.u_tl_parent),u_scale_parent:new t.Uniform1f(I,w.u_scale_parent),u_buffer_scale:new t.Uniform1f(I,w.u_buffer_scale),u_fade_t:new t.Uniform1f(I,w.u_fade_t),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image0:new t.Uniform1i(I,w.u_image0),u_image1:new t.Uniform1i(I,w.u_image1),u_brightness_low:new t.Uniform1f(I,w.u_brightness_low),u_brightness_high:new t.Uniform1f(I,w.u_brightness_high),u_saturation_factor:new t.Uniform1f(I,w.u_saturation_factor),u_contrast_factor:new t.Uniform1f(I,w.u_contrast_factor),u_spin_weights:new t.Uniform3f(I,w.u_spin_weights)}},symbolIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture)}},symbolSDF:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},symbolTextAndIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texsize_icon:new t.Uniform2f(I,w.u_texsize_icon),u_texture:new t.Uniform1i(I,w.u_texture),u_texture_icon:new t.Uniform1i(I,w.u_texture_icon),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},background:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_color:new t.UniformColor(I,w.u_color)}},backgroundPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image:new t.Uniform1i(I,w.u_image),u_pattern_tl_a:new t.Uniform2f(I,w.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(I,w.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(I,w.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(I,w.u_pattern_br_b),u_texsize:new t.Uniform2f(I,w.u_texsize),u_mix:new t.Uniform1f(I,w.u_mix),u_pattern_size_a:new t.Uniform2f(I,w.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(I,w.u_pattern_size_b),u_scale_a:new t.Uniform1f(I,w.u_scale_a),u_scale_b:new t.Uniform1f(I,w.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(I,w.u_tile_units_to_pixels)}}};function Uu(j,I,w,B,D,G,Q){for(var ut=j.context,wt=ut.gl,It=j.useProgram("collisionBox"),kt=[],Yt=0,qt=0,ce=0;ce<B.length;ce++){var ye=B[ce],Le=I.getTile(ye),Ce=Le.getBucket(w);if(Ce){var ke=ye.posMatrix;D[0]===0&&D[1]===0||(ke=j.translatePosMatrix(ye.posMatrix,Le,D,G));var nn=Q?Ce.textCollisionBox:Ce.iconCollisionBox,ln=Ce.collisionCircleArray;if(ln.length>0){var Qn=t.create(),Yn=ke;t.mul(Qn,Ce.placementInvProjMatrix,j.transform.glCoordMatrix),t.mul(Qn,Qn,Ce.placementViewportMatrix),kt.push({circleArray:ln,circleOffset:qt,transform:Yn,invTransform:Qn}),qt=Yt+=ln.length/4}nn&&It.draw(ut,wt.LINES,ge.disabled,Ht.disabled,j.colorModeForRenderPass(),Te.disabled,As(ke,j.transform,Le),w.id,nn.layoutVertexBuffer,nn.indexBuffer,nn.segments,null,j.transform.zoom,null,null,nn.collisionVertexBuffer)}}if(Q&&kt.length){var dr=j.useProgram("collisionCircle"),Mr=new t.StructArrayLayout2f1f2i16;Mr.resize(4*Yt),Mr._trim();for(var $r=0,Kr=0,bi=kt;Kr<bi.length;Kr+=1)for(var Oi=bi[Kr],zi=0;zi<Oi.circleArray.length/4;zi++){var Vi=4*zi,_a=Oi.circleArray[Vi+0],ya=Oi.circleArray[Vi+1],wi=Oi.circleArray[Vi+2],$i=Oi.circleArray[Vi+3];Mr.emplace($r++,_a,ya,wi,$i,0),Mr.emplace($r++,_a,ya,wi,$i,1),Mr.emplace($r++,_a,ya,wi,$i,2),Mr.emplace($r++,_a,ya,wi,$i,3)}(!Gs||Gs.length<2*Yt)&&(Gs=function(rs){var Jo=2*rs,is=new t.StructArrayLayout3ui6;is.resize(Jo),is._trim();for(var jo=0;jo<Jo;jo++){var Ps=6*jo;is.uint16[Ps+0]=4*jo+0,is.uint16[Ps+1]=4*jo+1,is.uint16[Ps+2]=4*jo+2,is.uint16[Ps+3]=4*jo+2,is.uint16[Ps+4]=4*jo+3,is.uint16[Ps+5]=4*jo+0}return is}(Yt));for(var sa=ut.createIndexBuffer(Gs,!0),Bi=ut.createVertexBuffer(Mr,t.collisionCircleLayout.members,!0),ca=0,qi=kt;ca<qi.length;ca+=1){var Ca=qi[ca],Na=qs(Ca.transform,Ca.invTransform,j.transform);dr.draw(ut,wt.TRIANGLES,ge.disabled,Ht.disabled,j.colorModeForRenderPass(),Te.disabled,Na,w.id,Bi,sa,t.SegmentVector.simpleSegment(0,2*Ca.circleOffset,Ca.circleArray.length,Ca.circleArray.length/2),null,j.transform.zoom,null,null,null)}Bi.destroy(),sa.destroy()}}var Vs=t.identity(new Float32Array(16));function rl(j,I,w,B,D,G){var Q=t.getAnchorAlignment(j),ut=-(Q.horizontalAlign-.5)*I,wt=-(Q.verticalAlign-.5)*w,It=t.evaluateVariableOffset(j,B);return new t.Point((ut/D+It[0])*G,(wt/D+It[1])*G)}function hu(j,I,w,B,D,G,Q,ut,wt,It,kt){var Yt=j.text.placedSymbolArray,qt=j.text.dynamicLayoutVertexArray,ce=j.icon.dynamicLayoutVertexArray,ye={};qt.clear();for(var Le=0;Le<Yt.length;Le++){var Ce=Yt.get(Le),ke=Ce.hidden||!Ce.crossTileID||j.allowVerticalPlacement&&!Ce.placedOrientation?null:B[Ce.crossTileID];if(ke){var nn=new t.Point(Ce.anchorX,Ce.anchorY),ln=pr(nn,w?ut:Q),Qn=zr(G.cameraToCenterDistance,ln.signedDistanceFromCamera),Yn=D.evaluateSizeForFeature(j.textSizeData,It,Ce)*Qn/t.ONE_EM;w&&(Yn*=j.tilePixelRatio/wt);for(var dr=rl(ke.anchor,ke.width,ke.height,ke.textOffset,ke.textBoxScale,Yn),Mr=w?pr(nn.add(dr),Q).point:ln.point.add(I?dr.rotate(-G.angle):dr),$r=j.allowVerticalPlacement&&Ce.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Kr=0;Kr<Ce.numGlyphs;Kr++)t.addDynamicAttributes(qt,Mr,$r);kt&&Ce.associatedIconIndex>=0&&(ye[Ce.associatedIconIndex]={shiftedAnchor:Mr,angle:$r})}else $a(Ce.numGlyphs,qt)}if(kt){ce.clear();for(var bi=j.icon.placedSymbolArray,Oi=0;Oi<bi.length;Oi++){var zi=bi.get(Oi);if(zi.hidden)$a(zi.numGlyphs,ce);else{var Vi=ye[Oi];if(Vi)for(var _a=0;_a<zi.numGlyphs;_a++)t.addDynamicAttributes(ce,Vi.shiftedAnchor,Vi.angle);else $a(zi.numGlyphs,ce)}}j.icon.dynamicLayoutVertexBuffer.updateData(ce)}j.text.dynamicLayoutVertexBuffer.updateData(qt)}function Ss(j,I,w){return w.iconsInText&&I?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function Ws(j,I,w,B,D,G,Q,ut,wt,It,kt,Yt){for(var qt=j.context,ce=qt.gl,ye=j.transform,Le=ut==="map",Ce=wt==="map",ke=Le&&w.layout.get("symbol-placement")!=="point",nn=Le&&!Ce&&!ke,ln=w.layout.get("symbol-sort-key").constantOr(1)!==void 0,Qn=!1,Yn=j.depthModeForSublayer(0,ge.ReadOnly),dr=w.layout.get("text-variable-anchor"),Mr=[],$r=0,Kr=B;$r<Kr.length;$r+=1){var bi=Kr[$r],Oi=I.getTile(bi),zi=Oi.getBucket(w);if(zi){var Vi=D?zi.text:zi.icon;if(Vi&&Vi.segments.get().length){var _a=Vi.programConfigurations.get(w.id),ya=D||zi.sdfIcons,wi=D?zi.textSizeData:zi.iconSizeData,$i=Ce||ye.pitch!==0,sa=j.useProgram(Ss(ya,D,zi),_a),Bi=t.evaluateSizeForZoom(wi,ye.zoom),ca=void 0,qi=[0,0],Ca=void 0,Na=void 0,rs=null,Jo=void 0;if(D)Ca=Oi.glyphAtlasTexture,Na=ce.LINEAR,ca=Oi.glyphAtlasTexture.size,zi.iconsInText&&(qi=Oi.imageAtlasTexture.size,rs=Oi.imageAtlasTexture,Jo=$i||j.options.rotating||j.options.zooming||wi.kind==="composite"||wi.kind==="camera"?ce.LINEAR:ce.NEAREST);else{var is=w.layout.get("icon-size").constantOr(0)!==1||zi.iconsNeedLinear;Ca=Oi.imageAtlasTexture,Na=ya||j.options.rotating||j.options.zooming||is||$i?ce.LINEAR:ce.NEAREST,ca=Oi.imageAtlasTexture.size}var jo=Pa(Oi,1,j.transform.zoom),Ps=Tn(bi.posMatrix,Ce,Le,j.transform,jo),Rl=Cr(bi.posMatrix,Ce,Le,j.transform,jo),sl=dr&&zi.hasTextData(),lc=w.layout.get("icon-text-fit")!=="none"&&sl&&zi.hasIconData();ke&&Oa(zi,bi.posMatrix,j,D,Ps,Rl,Ce,It);var xc=j.translatePosMatrix(bi.posMatrix,Oi,G,Q),Sl=ke||D&&dr||lc?Vs:Ps,_l=j.translatePosMatrix(Rl,Oi,G,Q,!0),Ul=ya&&w.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Lc={program:sa,buffers:Vi,uniformValues:ya?zi.iconsInText?Wa(wi.kind,Bi,nn,Ce,j,xc,Sl,_l,ca,qi):ns(wi.kind,Bi,nn,Ce,j,xc,Sl,_l,D,ca,!0):Cl(wi.kind,Bi,nn,Ce,j,xc,Sl,_l,D,ca),atlasTexture:Ca,atlasTextureIcon:rs,atlasInterpolation:Na,atlasInterpolationIcon:Jo,isSDF:ya,hasHalo:Ul};if(ln&&zi.canOverlap){Qn=!0;for(var Kl=0,Mc=Vi.segments.get();Kl<Mc.length;Kl+=1){var Cc=Mc[Kl];Mr.push({segments:new t.SegmentVector([Cc]),sortKey:Cc.sortKey,state:Lc})}}else Mr.push({segments:Vi.segments,sortKey:0,state:Lc})}}}Qn&&Mr.sort(function(Sc,Dl){return Sc.sortKey-Dl.sortKey});for(var fc=0,bc=Mr;fc<bc.length;fc+=1){var ic=bc[fc],yu=ic.state;if(qt.activeTexture.set(ce.TEXTURE0),yu.atlasTexture.bind(yu.atlasInterpolation,ce.CLAMP_TO_EDGE),yu.atlasTextureIcon&&(qt.activeTexture.set(ce.TEXTURE1),yu.atlasTextureIcon&&yu.atlasTextureIcon.bind(yu.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),yu.isSDF){var Ec=yu.uniformValues;yu.hasHalo&&(Ec.u_is_halo=1,gl(yu.buffers,ic.segments,w,j,yu.program,Yn,kt,Yt,Ec)),Ec.u_is_halo=0}gl(yu.buffers,ic.segments,w,j,yu.program,Yn,kt,Yt,yu.uniformValues)}}function gl(j,I,w,B,D,G,Q,ut,wt){var It=B.context;D.draw(It,It.gl.TRIANGLES,G,Q,ut,Te.disabled,wt,w.id,j.layoutVertexBuffer,j.indexBuffer,I,w.paint,B.transform.zoom,j.programConfigurations.get(w.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function Iu(j,I,w,B,D,G,Q){var ut,wt,It,kt,Yt,qt=j.context.gl,ce=w.paint.get("fill-pattern"),ye=ce&&ce.constantOr(1),Le=w.getCrossfadeParameters();Q?(wt=ye&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ut=qt.LINES):(wt=ye?"fillPattern":"fill",ut=qt.TRIANGLES);for(var Ce=0,ke=B;Ce<ke.length;Ce+=1){var nn=ke[Ce],ln=I.getTile(nn);if(!ye||ln.patternsLoaded()){var Qn=ln.getBucket(w);if(Qn){var Yn=Qn.programConfigurations.get(w.id),dr=j.useProgram(wt,Yn);ye&&(j.context.activeTexture.set(qt.TEXTURE0),ln.imageAtlasTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),Yn.updatePaintBuffers(Le));var Mr=ce.constantOr(null);if(Mr&&ln.imageAtlas){var $r=ln.imageAtlas,Kr=$r.patternPositions[Mr.to.toString()],bi=$r.patternPositions[Mr.from.toString()];Kr&&bi&&Yn.setConstantPatternPositions(Kr,bi)}var Oi=j.translatePosMatrix(nn.posMatrix,ln,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(Q){kt=Qn.indexBuffer2,Yt=Qn.segments2;var zi=[qt.drawingBufferWidth,qt.drawingBufferHeight];It=wt==="fillOutlinePattern"&&ye?Oo(Oi,j,Le,ln,zi):cu(Oi,zi)}else kt=Qn.indexBuffer,Yt=Qn.segments,It=ye?po(Oi,j,Le,ln):gs(Oi);dr.draw(j.context,ut,D,j.stencilModeForClipping(nn),G,Te.disabled,It,w.id,Qn.layoutVertexBuffer,kt,Yt,w.paint,j.transform.zoom,Yn)}}}}function Lu(j,I,w,B,D,G,Q){for(var ut=j.context,wt=ut.gl,It=w.paint.get("fill-extrusion-pattern"),kt=It.constantOr(1),Yt=w.getCrossfadeParameters(),qt=w.paint.get("fill-extrusion-opacity"),ce=0,ye=B;ce<ye.length;ce+=1){var Le=ye[ce],Ce=I.getTile(Le),ke=Ce.getBucket(w);if(ke){var nn=ke.programConfigurations.get(w.id),ln=j.useProgram(kt?"fillExtrusionPattern":"fillExtrusion",nn);kt&&(j.context.activeTexture.set(wt.TEXTURE0),Ce.imageAtlasTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),nn.updatePaintBuffers(Yt));var Qn=It.constantOr(null);if(Qn&&Ce.imageAtlas){var Yn=Ce.imageAtlas,dr=Yn.patternPositions[Qn.to.toString()],Mr=Yn.patternPositions[Qn.from.toString()];dr&&Mr&&nn.setConstantPatternPositions(dr,Mr)}var $r=j.translatePosMatrix(Le.posMatrix,Ce,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),Kr=w.paint.get("fill-extrusion-vertical-gradient"),bi=kt?es($r,j,Kr,qt,Le,Yt,Ce):Ao($r,j,Kr,qt);ln.draw(ut,ut.gl.TRIANGLES,D,G,Q,Te.backCCW,bi,w.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,w.paint,j.transform.zoom,nn)}}}function du(j,I,w,B,D,G){var Q=j.context,ut=Q.gl,wt=I.fbo;if(wt){var It=j.useProgram("hillshade");Q.activeTexture.set(ut.TEXTURE0),ut.bindTexture(ut.TEXTURE_2D,wt.colorAttachment.get());var kt=function(Yt,qt,ce){var ye=ce.paint.get("hillshade-shadow-color"),Le=ce.paint.get("hillshade-highlight-color"),Ce=ce.paint.get("hillshade-accent-color"),ke=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ke-=Yt.transform.angle);var nn,ln,Qn,Yn=!Yt.options.moving;return{u_matrix:Yt.transform.calculatePosMatrix(qt.tileID.toUnwrapped(),Yn),u_image:0,u_latrange:(nn=qt.tileID,ln=Math.pow(2,nn.canonical.z),Qn=nn.canonical.y,[new t.MercatorCoordinate(0,Qn/ln).toLngLat().lat,new t.MercatorCoordinate(0,(Qn+1)/ln).toLngLat().lat]),u_light:[ce.paint.get("hillshade-exaggeration"),ke],u_shadow:ye,u_highlight:Le,u_accent:Ce}}(j,I,w);It.draw(Q,ut.TRIANGLES,B,D,G,Te.disabled,kt,w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}}function vu(j,I,w,B,D,G){var Q=j.context,ut=Q.gl,wt=I.dem;if(wt&&wt.data){var It=wt.dim,kt=wt.stride,Yt=wt.getPixels();if(Q.activeTexture.set(ut.TEXTURE1),Q.pixelStoreUnpackPremultiplyAlpha.set(!1),I.demTexture=I.demTexture||j.getTileTexture(kt),I.demTexture){var qt=I.demTexture;qt.update(Yt,{premultiply:!1}),qt.bind(ut.NEAREST,ut.CLAMP_TO_EDGE)}else I.demTexture=new t.Texture(Q,Yt,ut.RGBA,{premultiply:!1}),I.demTexture.bind(ut.NEAREST,ut.CLAMP_TO_EDGE);Q.activeTexture.set(ut.TEXTURE0);var ce=I.fbo;if(!ce){var ye=new t.Texture(Q,{width:It,height:It,data:null},ut.RGBA);ye.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),(ce=I.fbo=Q.createFramebuffer(It,It,!0)).colorAttachment.set(ye.texture)}Q.bindFramebuffer.set(ce.framebuffer),Q.viewport.set([0,0,It,It]),j.useProgram("hillshadePrepare").draw(Q,ut.TRIANGLES,B,D,G,Te.disabled,function(Le,Ce){var ke=Ce.stride,nn=t.create();return t.ortho(nn,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(nn,nn,[0,-t.EXTENT,0]),{u_matrix:nn,u_image:1,u_dimension:[ke,ke],u_zoom:Le.overscaledZ,u_unpack:Ce.getUnpackVector()}}(I.tileID,wt),w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments),I.needsHillshadePrepare=!1}}function pu(j,I,w,B,D){var G=B.paint.get("raster-fade-duration");if(G>0){var Q=t.browser.now(),ut=(Q-j.timeAdded)/G,wt=I?(Q-I.timeAdded)/G:-1,It=w.getSource(),kt=D.coveringZoomLevel({tileSize:It.tileSize,roundZoom:It.roundZoom}),Yt=!I||Math.abs(I.tileID.overscaledZ-kt)>Math.abs(j.tileID.overscaledZ-kt),qt=Yt&&j.refreshedUponExpiration?1:t.clamp(Yt?ut:1-wt,0,1);return j.refreshedUponExpiration&&ut>=1&&(j.refreshedUponExpiration=!1),I?{opacity:1,mix:1-qt}:{opacity:qt,mix:0}}return{opacity:1,mix:0}}var Ol=new t.Color(1,0,0,1),rc=new t.Color(0,1,0,1),ql=new t.Color(0,0,1,1),gu=new t.Color(1,0,1,1),Nl=new t.Color(0,1,1,1);function tc(j,I,w,B){ml(j,0,I+w/2,j.transform.width,w,B)}function Ou(j,I,w,B){ml(j,I-w/2,0,w,j.transform.height,B)}function ml(j,I,w,B,D,G){var Q=j.context,ut=Q.gl;ut.enable(ut.SCISSOR_TEST),ut.scissor(I*t.browser.devicePixelRatio,w*t.browser.devicePixelRatio,B*t.browser.devicePixelRatio,D*t.browser.devicePixelRatio),Q.clear({color:G}),ut.disable(ut.SCISSOR_TEST)}function wl(j,I,w){var B=j.context,D=B.gl,G=w.posMatrix,Q=j.useProgram("debug"),ut=ge.disabled,wt=Ht.disabled,It=j.colorModeForRenderPass();B.activeTexture.set(D.TEXTURE0),j.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Q.draw(B,D.LINE_STRIP,ut,wt,It,Te.disabled,js(G,t.Color.red),"$debug",j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments);var kt=I.getTileByID(w.key).latestRawTileData,Yt=Math.floor((kt&&kt.byteLength||0)/1024),qt=I.getTile(w).tileSize,ce=512/Math.min(qt,512)*(w.overscaledZ/j.transform.zoom)*.5,ye=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(ye+=" => "+w.overscaledZ),function(Le,Ce){Le.initDebugOverlayCanvas();var ke=Le.debugOverlayCanvas,nn=Le.context.gl,ln=Le.debugOverlayCanvas.getContext("2d");ln.clearRect(0,0,ke.width,ke.height),ln.shadowColor="white",ln.shadowBlur=2,ln.lineWidth=1.5,ln.strokeStyle="white",ln.textBaseline="top",ln.font="bold 36px Open Sans, sans-serif",ln.fillText(Ce,5,5),ln.strokeText(Ce,5,5),Le.debugOverlayTexture.update(ke),Le.debugOverlayTexture.bind(nn.LINEAR,nn.CLAMP_TO_EDGE)}(j,ye+" "+Yt+"kb"),Q.draw(B,D.TRIANGLES,ut,wt,re.alphaBlended,Te.disabled,js(G,t.Color.transparent,ce),"$debug",j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments)}var Bs={symbol:function(I,w,B,D,G){if(I.renderPass==="translucent"){var Q=Ht.disabled,ut=I.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(wt,It,kt,Yt,qt,ce,ye){for(var Le=It.transform,Ce=qt==="map",ke=ce==="map",nn=0,ln=wt;nn<ln.length;nn+=1){var Qn=ln[nn],Yn=Yt.getTile(Qn),dr=Yn.getBucket(kt);if(dr&&dr.text&&dr.text.segments.get().length){var Mr=t.evaluateSizeForZoom(dr.textSizeData,Le.zoom),$r=Pa(Yn,1,It.transform.zoom),Kr=Tn(Qn.posMatrix,ke,Ce,It.transform,$r),bi=kt.layout.get("icon-text-fit")!=="none"&&dr.hasIconData();if(Mr){var Oi=Math.pow(2,Le.zoom-Yn.tileID.overscaledZ);hu(dr,Ce,ke,ye,t.symbolSize,Le,Kr,Qn.posMatrix,Oi,Mr,bi)}}}}(D,I,B,w,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),G),B.paint.get("icon-opacity").constantOr(1)!==0&&Ws(I,w,B,D,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),Q,ut),B.paint.get("text-opacity").constantOr(1)!==0&&Ws(I,w,B,D,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),Q,ut),w.map.showCollisionBoxes&&(Uu(I,w,B,D,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),Uu(I,w,B,D,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(I,w,B,D){if(I.renderPass==="translucent"){var G=B.paint.get("circle-opacity"),Q=B.paint.get("circle-stroke-width"),ut=B.paint.get("circle-stroke-opacity"),wt=B.layout.get("circle-sort-key").constantOr(1)!==void 0;if(G.constantOr(1)!==0||Q.constantOr(1)!==0&&ut.constantOr(1)!==0){for(var It=I.context,kt=It.gl,Yt=I.depthModeForSublayer(0,ge.ReadOnly),qt=Ht.disabled,ce=I.colorModeForRenderPass(),ye=[],Le=0;Le<D.length;Le++){var Ce=D[Le],ke=w.getTile(Ce),nn=ke.getBucket(B);if(nn){var ln=nn.programConfigurations.get(B.id),Qn={programConfiguration:ln,program:I.useProgram("circle",ln),layoutVertexBuffer:nn.layoutVertexBuffer,indexBuffer:nn.indexBuffer,uniformValues:ba(I,Ce,ke,B)};if(wt)for(var Yn=0,dr=nn.segments.get();Yn<dr.length;Yn+=1){var Mr=dr[Yn];ye.push({segments:new t.SegmentVector([Mr]),sortKey:Mr.sortKey,state:Qn})}else ye.push({segments:nn.segments,sortKey:0,state:Qn})}}wt&&ye.sort(function(zi,Vi){return zi.sortKey-Vi.sortKey});for(var $r=0,Kr=ye;$r<Kr.length;$r+=1){var bi=Kr[$r],Oi=bi.state;Oi.program.draw(It,kt.TRIANGLES,Yt,qt,ce,Te.disabled,Oi.uniformValues,B.id,Oi.layoutVertexBuffer,Oi.indexBuffer,bi.segments,B.paint,I.transform.zoom,Oi.programConfiguration)}}}},heatmap:function(I,w,B,D){if(B.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){var G=I.context,Q=G.gl,ut=Ht.disabled,wt=new re([Q.ONE,Q.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(ye,Le,Ce){var ke=ye.gl;ye.activeTexture.set(ke.TEXTURE1),ye.viewport.set([0,0,Le.width/4,Le.height/4]);var nn=Ce.heatmapFbo;if(nn)ke.bindTexture(ke.TEXTURE_2D,nn.colorAttachment.get()),ye.bindFramebuffer.set(nn.framebuffer);else{var ln=ke.createTexture();ke.bindTexture(ke.TEXTURE_2D,ln),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.LINEAR),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MAG_FILTER,ke.LINEAR),nn=Ce.heatmapFbo=ye.createFramebuffer(Le.width/4,Le.height/4,!1),function(Qn,Yn,dr,Mr){var $r=Qn.gl;$r.texImage2D($r.TEXTURE_2D,0,$r.RGBA,Yn.width/4,Yn.height/4,0,$r.RGBA,Qn.extRenderToTextureHalfFloat?Qn.extTextureHalfFloat.HALF_FLOAT_OES:$r.UNSIGNED_BYTE,null),Mr.colorAttachment.set(dr)}(ye,Le,ln,nn)}})(G,I,B),G.clear({color:t.Color.transparent});for(var It=0;It<D.length;It++){var kt=D[It];if(!w.hasRenderableParent(kt)){var Yt=w.getTile(kt),qt=Yt.getBucket(B);if(qt){var ce=qt.programConfigurations.get(B.id);I.useProgram("heatmap",ce).draw(G,Q.TRIANGLES,ge.disabled,ut,wt,Te.disabled,Au(kt.posMatrix,Yt,I.transform.zoom,B.paint.get("heatmap-intensity")),B.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,B.paint,I.transform.zoom,ce)}}}G.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(ye,Le){var Ce=ye.context,ke=Ce.gl,nn=Le.heatmapFbo;if(nn){Ce.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,nn.colorAttachment.get()),Ce.activeTexture.set(ke.TEXTURE1);var ln=Le.colorRampTexture;ln||(ln=Le.colorRampTexture=new t.Texture(Ce,Le.colorRamp,ke.RGBA)),ln.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(Ce,ke.TRIANGLES,ge.disabled,Ht.disabled,ye.colorModeForRenderPass(),Te.disabled,function(Qn,Yn,dr,Mr){var $r=t.create();t.ortho($r,0,Qn.width,Qn.height,0,0,1);var Kr=Qn.context.gl;return{u_matrix:$r,u_world:[Kr.drawingBufferWidth,Kr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Yn.paint.get("heatmap-opacity")}}(ye,Le),Le.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,Le.paint,ye.transform.zoom)}}(I,B))},line:function(I,w,B,D){if(I.renderPass==="translucent"){var G=B.paint.get("line-opacity"),Q=B.paint.get("line-width");if(G.constantOr(1)!==0&&Q.constantOr(1)!==0)for(var ut=I.depthModeForSublayer(0,ge.ReadOnly),wt=I.colorModeForRenderPass(),It=B.paint.get("line-dasharray"),kt=B.paint.get("line-pattern"),Yt=kt.constantOr(1),qt=B.paint.get("line-gradient"),ce=B.getCrossfadeParameters(),ye=Yt?"linePattern":It?"lineSDF":qt?"lineGradient":"line",Le=I.context,Ce=Le.gl,ke=!0,nn=0,ln=D;nn<ln.length;nn+=1){var Qn=ln[nn],Yn=w.getTile(Qn);if(!Yt||Yn.patternsLoaded()){var dr=Yn.getBucket(B);if(dr){var Mr=dr.programConfigurations.get(B.id),$r=I.context.program.get(),Kr=I.useProgram(ye,Mr),bi=ke||Kr.program!==$r,Oi=kt.constantOr(null);if(Oi&&Yn.imageAtlas){var zi=Yn.imageAtlas,Vi=zi.patternPositions[Oi.to.toString()],_a=zi.patternPositions[Oi.from.toString()];Vi&&_a&&Mr.setConstantPatternPositions(Vi,_a)}var ya=Yt?nl(I,Yn,B,ce):It?Zl(I,Yn,B,It,ce):qt?Ya(I,Yn,B,dr.lineClipsArray.length):ks(I,Yn,B);if(Yt)Le.activeTexture.set(Ce.TEXTURE0),Yn.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Mr.updatePaintBuffers(ce);else if(It&&(bi||I.lineAtlas.dirty))Le.activeTexture.set(Ce.TEXTURE0),I.lineAtlas.bind(Le);else if(qt){var wi=dr.gradients[B.id],$i=wi.texture;if(B.gradientVersion!==wi.version){var sa=256;if(B.stepInterpolant){var Bi=w.getSource().maxzoom,ca=Qn.canonical.z===Bi?Math.ceil(1<<I.transform.maxZoom-Qn.canonical.z):1;sa=t.clamp(t.nextPowerOfTwo(dr.maxLineLength/t.EXTENT*1024*ca),256,Le.maxTextureSize)}wi.gradient=t.renderColorRamp({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:sa,image:wi.gradient||void 0,clips:dr.lineClipsArray}),wi.texture?wi.texture.update(wi.gradient):wi.texture=new t.Texture(Le,wi.gradient,Ce.RGBA),wi.version=B.gradientVersion,$i=wi.texture}Le.activeTexture.set(Ce.TEXTURE0),$i.bind(B.stepInterpolant?Ce.NEAREST:Ce.LINEAR,Ce.CLAMP_TO_EDGE)}Kr.draw(Le,Ce.TRIANGLES,ut,I.stencilModeForClipping(Qn),wt,Te.disabled,ya,B.id,dr.layoutVertexBuffer,dr.indexBuffer,dr.segments,B.paint,I.transform.zoom,Mr,dr.layoutVertexBuffer2),ke=!1}}}}},fill:function(I,w,B,D){var G=B.paint.get("fill-color"),Q=B.paint.get("fill-opacity");if(Q.constantOr(1)!==0){var ut=I.colorModeForRenderPass(),wt=B.paint.get("fill-pattern"),It=I.opaquePassEnabledForLayer()&&!wt.constantOr(1)&&G.constantOr(t.Color.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===It){var kt=I.depthModeForSublayer(1,I.renderPass==="opaque"?ge.ReadWrite:ge.ReadOnly);Iu(I,w,B,D,kt,ut,!1)}if(I.renderPass==="translucent"&&B.paint.get("fill-antialias")){var Yt=I.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,ge.ReadOnly);Iu(I,w,B,D,Yt,ut,!0)}}},"fill-extrusion":function(I,w,B,D){var G=B.paint.get("fill-extrusion-opacity");if(G!==0&&I.renderPass==="translucent"){var Q=new ge(I.context.gl.LEQUAL,ge.ReadWrite,I.depthRangeFor3D);if(G!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))Lu(I,w,B,D,Q,Ht.disabled,re.disabled),Lu(I,w,B,D,Q,I.stencilModeFor3D(),I.colorModeForRenderPass());else{var ut=I.colorModeForRenderPass();Lu(I,w,B,D,Q,Ht.disabled,ut)}}},hillshade:function(I,w,B,D){if(I.renderPass==="offscreen"||I.renderPass==="translucent"){for(var G=I.context,Q=I.depthModeForSublayer(0,ge.ReadOnly),ut=I.colorModeForRenderPass(),wt=I.renderPass==="translucent"?I.stencilConfigForOverlap(D):[{},D],It=wt[0],kt=0,Yt=wt[1];kt<Yt.length;kt+=1){var qt=Yt[kt],ce=w.getTile(qt);ce.needsHillshadePrepare&&I.renderPass==="offscreen"?vu(I,ce,B,Q,Ht.disabled,ut):I.renderPass==="translucent"&&du(I,ce,B,Q,It[qt.overscaledZ],ut)}G.viewport.set([0,0,I.width,I.height])}},raster:function(I,w,B,D){if(I.renderPass==="translucent"&&B.paint.get("raster-opacity")!==0&&D.length)for(var G=I.context,Q=G.gl,ut=w.getSource(),wt=I.useProgram("raster"),It=I.colorModeForRenderPass(),kt=ut instanceof at?[{},D]:I.stencilConfigForOverlap(D),Yt=kt[0],qt=kt[1],ce=qt[qt.length-1].overscaledZ,ye=!I.options.moving,Le=0,Ce=qt;Le<Ce.length;Le+=1){var ke=Ce[Le],nn=I.depthModeForSublayer(ke.overscaledZ-ce,B.paint.get("raster-opacity")===1?ge.ReadWrite:ge.ReadOnly,Q.LESS),ln=w.getTile(ke),Qn=I.transform.calculatePosMatrix(ke.toUnwrapped(),ye);ln.registerFadeDuration(B.paint.get("raster-fade-duration"));var Yn=w.findLoadedParent(ke,0),dr=pu(ln,Yn,w,B,I.transform),Mr=void 0,$r=void 0,Kr=B.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;G.activeTexture.set(Q.TEXTURE0),ln.texture.bind(Kr,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(Q.TEXTURE1),Yn?(Yn.texture.bind(Kr,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),Mr=Math.pow(2,Yn.tileID.overscaledZ-ln.tileID.overscaledZ),$r=[ln.tileID.canonical.x*Mr%1,ln.tileID.canonical.y*Mr%1]):ln.texture.bind(Kr,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);var bi=Ku(Qn,$r||[0,0],Mr||1,dr,B);ut instanceof at?wt.draw(G,Q.TRIANGLES,nn,Ht.disabled,It,Te.disabled,bi,B.id,ut.boundsBuffer,I.quadTriangleIndexBuffer,ut.boundsSegments):wt.draw(G,Q.TRIANGLES,nn,Yt[ke.overscaledZ],It,Te.disabled,bi,B.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,w,B){var D=B.paint.get("background-color"),G=B.paint.get("background-opacity");if(G!==0){var Q=I.context,ut=Q.gl,wt=I.transform,It=wt.tileSize,kt=B.paint.get("background-pattern");if(!I.isPatternMissing(kt)){var Yt=!kt&&D.a===1&&G===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass===Yt){var qt=Ht.disabled,ce=I.depthModeForSublayer(0,Yt==="opaque"?ge.ReadWrite:ge.ReadOnly),ye=I.colorModeForRenderPass(),Le=I.useProgram(kt?"backgroundPattern":"background"),Ce=wt.coveringTiles({tileSize:It});kt&&(Q.activeTexture.set(ut.TEXTURE0),I.imageManager.bind(I.context));for(var ke=B.getCrossfadeParameters(),nn=0,ln=Ce;nn<ln.length;nn+=1){var Qn=ln[nn],Yn=I.transform.calculatePosMatrix(Qn.toUnwrapped()),dr=kt?Xu(Yn,G,I,kt,{tileID:Qn,tileSize:It},ke):fu(Yn,G,D);Le.draw(Q,ut.TRIANGLES,ce,qt,ye,Te.disabled,dr,B.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}}}}},debug:function(I,w,B){for(var D=0;D<B.length;D++)wl(I,w,B[D])},custom:function(I,w,B){var D=I.context,G=B.implementation;if(I.renderPass==="offscreen"){var Q=G.prerender;Q&&(I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),Q.call(G,D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),D.setStencilMode(Ht.disabled);var ut=G.renderingMode==="3d"?new ge(I.context.gl.LEQUAL,ge.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,ge.ReadOnly);D.setDepthMode(ut),G.render(D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState(),D.bindFramebuffer.set(null)}}},ao=function(I,w){this.context=new ae(I),this.transform=w,this._tileTextures={},this.setup(),this.numSublayers=xe.maxUnderzooming+xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ka,this.gpuTimers={}};ao.prototype.resize=function(j,I){if(this.width=j*t.browser.devicePixelRatio,this.height=I*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var w=0,B=this.style._order;w<B.length;w+=1)this.style._layers[B[w]].resize()},ao.prototype.setup=function(){var j=this.context,I=new t.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(t.EXTENT,0),I.emplaceBack(0,t.EXTENT),I.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=j.createVertexBuffer(I,Ga.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var w=new t.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(t.EXTENT,0),w.emplaceBack(0,t.EXTENT),w.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=j.createVertexBuffer(w,Ga.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var B=new t.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(t.EXTENT,0,t.EXTENT,0),B.emplaceBack(0,t.EXTENT,0,t.EXTENT),B.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=j.createVertexBuffer(B,X.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var D=new t.StructArrayLayout2i4;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=j.createVertexBuffer(D,Ga.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var G=new t.StructArrayLayout1ui2;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=j.createIndexBuffer(G);var Q=new t.StructArrayLayout3ui6;Q.emplaceBack(0,1,2),Q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=j.createIndexBuffer(Q),this.emptyTexture=new t.Texture(j,{width:1,height:1,data:new Uint8Array([0,0,0,0])},j.gl.RGBA);var ut=this.context.gl;this.stencilClearMode=new Ht({func:ut.ALWAYS,mask:0},0,255,ut.ZERO,ut.ZERO,ut.ZERO)},ao.prototype.clearStencil=function(){var j=this.context,I=j.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var w=t.create();t.ortho(w,0,this.width,this.height,0,0,1),t.scale(w,w,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(j,I.TRIANGLES,ge.disabled,this.stencilClearMode,re.disabled,Te.disabled,ms(w),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ao.prototype._renderTileClippingMasks=function(j,I){if(this.currentStencilSource!==j.source&&j.isTileClipped()&&I&&I.length){this.currentStencilSource=j.source;var w=this.context,B=w.gl;this.nextStencilID+I.length>256&&this.clearStencil(),w.setColorMode(re.disabled),w.setDepthMode(ge.disabled);var D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var G=0,Q=I;G<Q.length;G+=1){var ut=Q[G],wt=this._tileClippingMaskIDs[ut.key]=this.nextStencilID++;D.draw(w,B.TRIANGLES,ge.disabled,new Ht({func:B.ALWAYS,mask:0},wt,255,B.KEEP,B.KEEP,B.REPLACE),re.disabled,Te.disabled,ms(ut.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ao.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var j=this.nextStencilID++,I=this.context.gl;return new Ht({func:I.NOTEQUAL,mask:255},j,255,I.KEEP,I.KEEP,I.REPLACE)},ao.prototype.stencilModeForClipping=function(j){var I=this.context.gl;return new Ht({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[j.key],0,I.KEEP,I.KEEP,I.REPLACE)},ao.prototype.stencilConfigForOverlap=function(j){var I,w=this.context.gl,B=j.sort(function(wt,It){return It.overscaledZ-wt.overscaledZ}),D=B[B.length-1].overscaledZ,G=B[0].overscaledZ-D+1;if(G>1){this.currentStencilSource=void 0,this.nextStencilID+G>256&&this.clearStencil();for(var Q={},ut=0;ut<G;ut++)Q[ut+D]=new Ht({func:w.GEQUAL,mask:255},ut+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=G,[Q,B]}return[(I={},I[D]=Ht.disabled,I),B]},ao.prototype.colorModeForRenderPass=function(){var j=this.context.gl;return this._showOverdrawInspector?new re([j.CONSTANT_COLOR,j.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?re.unblended:re.alphaBlended},ao.prototype.depthModeForSublayer=function(j,I,w){if(!this.opaquePassEnabledForLayer())return ge.disabled;var B=1-((1+this.currentLayer)*this.numSublayers+j)*this.depthEpsilon;return new ge(w||this.context.gl.LEQUAL,I,[B,B])},ao.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ao.prototype.render=function(j,I){var w=this;this.style=j,this.options=I,this.lineAtlas=j.lineAtlas,this.imageManager=j.imageManager,this.glyphManager=j.glyphManager,this.symbolFadeChange=j.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var B=this.style._order,D=this.style.sourceCaches;for(var G in D){var Q=D[G];Q.used&&Q.prepare(this.context)}var ut,wt,It={},kt={},Yt={};for(var qt in D){var ce=D[qt];It[qt]=ce.getVisibleCoordinates(),kt[qt]=It[qt].slice().reverse(),Yt[qt]=ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ye=0;ye<B.length;ye++)if(this.style._layers[B[ye]].is3D()){this.opaquePassCutoff=ye;break}this.renderPass="offscreen";for(var Le=0,Ce=B;Le<Ce.length;Le+=1){var ke=this.style._layers[Ce[Le]];if(ke.hasOffscreenPass()&&!ke.isHidden(this.transform.zoom)){var nn=kt[ke.source];(ke.type==="custom"||nn.length)&&this.renderLayer(this,D[ke.source],ke,nn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(j._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){var ln=this.style._layers[B[this.currentLayer]],Qn=D[ln.source],Yn=It[ln.source];this._renderTileClippingMasks(ln,Yn),this.renderLayer(this,Qn,ln,Yn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){var dr=this.style._layers[B[this.currentLayer]],Mr=D[dr.source],$r=(dr.type==="symbol"?Yt:kt)[dr.source];this._renderTileClippingMasks(dr,It[dr.source]),this.renderLayer(this,Mr,dr,$r)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Kr){Kr.source&&!Kr.isHidden(w.transform.zoom)&&(Kr.source!==(wt&&wt.id)&&(wt=w.style.sourceCaches[Kr.source]),(!ut||ut.getSource().maxzoom<wt.getSource().maxzoom)&&(ut=wt))}),ut&&Bs.debug(this,ut,ut.getVisibleCoordinates())),this.options.showPadding&&function(Kr){var bi=Kr.transform.padding;tc(Kr,Kr.transform.height-(bi.top||0),3,Ol),tc(Kr,bi.bottom||0,3,rc),Ou(Kr,bi.left||0,3,ql),Ou(Kr,Kr.transform.width-(bi.right||0),3,gu);var Oi=Kr.transform.centerPoint;(function(zi,Vi,_a,ya){ml(zi,Vi-1,_a-10,2,20,ya),ml(zi,Vi-10,_a-1,20,2,ya)})(Kr,Oi.x,Kr.transform.height-Oi.y,Nl)}(this),this.context.setDefault()},ao.prototype.renderLayer=function(j,I,w,B){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||B.length)&&(this.id=w.id,this.gpuTimingStart(w),Bs[w.type](j,I,w,B,this.style.placement.variableOffsets),this.gpuTimingEnd())},ao.prototype.gpuTimingStart=function(j){if(this.options.gpuTiming){var I=this.context.extTimerQuery,w=this.gpuTimers[j.id];w||(w=this.gpuTimers[j.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),w.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,w.query)}},ao.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var j=this.context.extTimerQuery;j.endQueryEXT(j.TIME_ELAPSED_EXT)}},ao.prototype.collectGpuTimers=function(){var j=this.gpuTimers;return this.gpuTimers={},j},ao.prototype.queryGpuTimers=function(j){var I={};for(var w in j){var B=j[w],D=this.context.extTimerQuery,G=D.getQueryObjectEXT(B.query,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(B.query),I[w]=G}return I},ao.prototype.translatePosMatrix=function(j,I,w,B,D){if(!w[0]&&!w[1])return j;var G=D?B==="map"?this.transform.angle:0:B==="viewport"?-this.transform.angle:0;if(G){var Q=Math.sin(G),ut=Math.cos(G);w=[w[0]*ut-w[1]*Q,w[0]*Q+w[1]*ut]}var wt=[D?w[0]:Pa(I,w[0],this.transform.zoom),D?w[1]:Pa(I,w[1],this.transform.zoom),0],It=new Float32Array(16);return t.translate(It,j,wt),It},ao.prototype.saveTileTexture=function(j){var I=this._tileTextures[j.size[0]];I?I.push(j):this._tileTextures[j.size[0]]=[j]},ao.prototype.getTileTexture=function(j){var I=this._tileTextures[j];return I&&I.length>0?I.pop():null},ao.prototype.isPatternMissing=function(j){if(!j)return!1;if(!j.from||!j.to)return!0;var I=this.imageManager.getPattern(j.from.toString()),w=this.imageManager.getPattern(j.to.toString());return!I||!w},ao.prototype.useProgram=function(j,I){this.cache=this.cache||{};var w=""+j+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[w]||(this.cache[w]=new vl(this.context,j,lu[j],I,Ll[j],this._showOverdrawInspector)),this.cache[w]},ao.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ao.prototype.setBaseState=function(){var j=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(j.FUNC_ADD)},ao.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ao.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var yl=function(I,w){this.points=I,this.planes=w};yl.fromInvProjectionMatrix=function(j,I,w){var B=Math.pow(2,w),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Q){return t.transformMat4([],Q,j)}).map(function(Q){return t.scale$1([],Q,1/Q[3]/I*B)}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Q){var ut=t.sub([],D[Q[0]],D[Q[1]]),wt=t.sub([],D[Q[2]],D[Q[1]]),It=t.normalize([],t.cross([],ut,wt)),kt=-t.dot(It,D[Q[1]]);return It.concat(kt)});return new yl(D,G)};var il=function(I,w){this.min=I,this.max=w,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};il.prototype.quadrant=function(j){for(var I=[j%2==0,j<2],w=t.clone$2(this.min),B=t.clone$2(this.max),D=0;D<I.length;D++)w[D]=I[D]?this.min[D]:this.center[D],B[D]=I[D]?this.center[D]:this.max[D];return B[2]=this.max[2],new il(w,B)},il.prototype.distanceX=function(j){return Math.max(Math.min(this.max[0],j[0]),this.min[0])-j[0]},il.prototype.distanceY=function(j){return Math.max(Math.min(this.max[1],j[1]),this.min[1])-j[1]},il.prototype.intersects=function(j){for(var I=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],w=!0,B=0;B<j.planes.length;B++){for(var D=j.planes[B],G=0,Q=0;Q<I.length;Q++)G+=t.dot$1(D,I[Q])>=0;if(G===0)return 0;G!==I.length&&(w=!1)}if(w)return 2;for(var ut=0;ut<3;ut++){for(var wt=Number.MAX_VALUE,It=-Number.MAX_VALUE,kt=0;kt<j.points.length;kt++){var Yt=j.points[kt][ut]-this.min[ut];wt=Math.min(wt,Yt),It=Math.max(It,Yt)}if(It<0||wt>this.max[ut]-this.min[ut])return 0}return 1};var Hs=function(I,w,B,D){if(I===void 0&&(I=0),w===void 0&&(w=0),B===void 0&&(B=0),D===void 0&&(D=0),isNaN(I)||I<0||isNaN(w)||w<0||isNaN(B)||B<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=I,this.bottom=w,this.left=B,this.right=D};Hs.prototype.interpolate=function(j,I,w){return I.top!=null&&j.top!=null&&(this.top=t.number(j.top,I.top,w)),I.bottom!=null&&j.bottom!=null&&(this.bottom=t.number(j.bottom,I.bottom,w)),I.left!=null&&j.left!=null&&(this.left=t.number(j.left,I.left,w)),I.right!=null&&j.right!=null&&(this.right=t.number(j.right,I.right,w)),this},Hs.prototype.getCenter=function(j,I){var w=t.clamp((this.left+j-this.right)/2,0,j),B=t.clamp((this.top+I-this.bottom)/2,0,I);return new t.Point(w,B)},Hs.prototype.equals=function(j){return this.top===j.top&&this.bottom===j.bottom&&this.left===j.left&&this.right===j.right},Hs.prototype.clone=function(){return new Hs(this.top,this.bottom,this.left,this.right)},Hs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ra=function(I,w,B,D,G){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=G===void 0||G,this._minZoom=I||0,this._maxZoom=w||22,this._minPitch=B==null?0:B,this._maxPitch=D==null?60:D,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hs,this._posMatrixCache={},this._alignedPosMatrixCache={}},xo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ra.prototype.clone=function(){var j=new Ra(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return j.tileSize=this.tileSize,j.latRange=this.latRange,j.width=this.width,j.height=this.height,j._center=this._center,j.zoom=this.zoom,j.angle=this.angle,j._fov=this._fov,j._pitch=this._pitch,j._unmodified=this._unmodified,j._edgeInsets=this._edgeInsets.clone(),j._calcMatrices(),j},xo.minZoom.get=function(){return this._minZoom},xo.minZoom.set=function(j){this._minZoom!==j&&(this._minZoom=j,this.zoom=Math.max(this.zoom,j))},xo.maxZoom.get=function(){return this._maxZoom},xo.maxZoom.set=function(j){this._maxZoom!==j&&(this._maxZoom=j,this.zoom=Math.min(this.zoom,j))},xo.minPitch.get=function(){return this._minPitch},xo.minPitch.set=function(j){this._minPitch!==j&&(this._minPitch=j,this.pitch=Math.max(this.pitch,j))},xo.maxPitch.get=function(){return this._maxPitch},xo.maxPitch.set=function(j){this._maxPitch!==j&&(this._maxPitch=j,this.pitch=Math.min(this.pitch,j))},xo.renderWorldCopies.get=function(){return this._renderWorldCopies},xo.renderWorldCopies.set=function(j){j===void 0?j=!0:j===null&&(j=!1),this._renderWorldCopies=j},xo.worldSize.get=function(){return this.tileSize*this.scale},xo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},xo.size.get=function(){return new t.Point(this.width,this.height)},xo.bearing.get=function(){return-this.angle/Math.PI*180},xo.bearing.set=function(j){var I=-t.wrap(j,-180,180)*Math.PI/180;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},xo.pitch.get=function(){return this._pitch/Math.PI*180},xo.pitch.set=function(j){var I=t.clamp(j,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())},xo.fov.get=function(){return this._fov/Math.PI*180},xo.fov.set=function(j){j=Math.max(.01,Math.min(60,j)),this._fov!==j&&(this._unmodified=!1,this._fov=j/180*Math.PI,this._calcMatrices())},xo.zoom.get=function(){return this._zoom},xo.zoom.set=function(j){var I=Math.min(Math.max(j,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())},xo.center.get=function(){return this._center},xo.center.set=function(j){j.lat===this._center.lat&&j.lng===this._center.lng||(this._unmodified=!1,this._center=j,this._constrain(),this._calcMatrices())},xo.padding.get=function(){return this._edgeInsets.toJSON()},xo.padding.set=function(j){this._edgeInsets.equals(j)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,j,1),this._calcMatrices())},xo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ra.prototype.isPaddingEqual=function(j){return this._edgeInsets.equals(j)},Ra.prototype.interpolatePadding=function(j,I,w){this._unmodified=!1,this._edgeInsets.interpolate(j,I,w),this._constrain(),this._calcMatrices()},Ra.prototype.coveringZoomLevel=function(j){var I=(j.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/j.tileSize));return Math.max(0,I)},Ra.prototype.getVisibleUnwrappedCoordinates=function(j){var I=[new t.UnwrappedTileID(0,j)];if(this._renderWorldCopies)for(var w=this.pointCoordinate(new t.Point(0,0)),B=this.pointCoordinate(new t.Point(this.width,0)),D=this.pointCoordinate(new t.Point(this.width,this.height)),G=this.pointCoordinate(new t.Point(0,this.height)),Q=Math.floor(Math.min(w.x,B.x,D.x,G.x)),ut=Math.floor(Math.max(w.x,B.x,D.x,G.x)),wt=Q-1;wt<=ut+1;wt++)wt!==0&&I.push(new t.UnwrappedTileID(wt,j));return I},Ra.prototype.coveringTiles=function(j){var I=this.coveringZoomLevel(j),w=I;if(j.minzoom!==void 0&&I<j.minzoom)return[];j.maxzoom!==void 0&&I>j.maxzoom&&(I=j.maxzoom);var B=t.MercatorCoordinate.fromLngLat(this.center),D=Math.pow(2,I),G=[D*B.x,D*B.y,0],Q=yl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I),ut=j.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ut=I);var wt=function(bi){return{aabb:new il([bi*D,0,0],[(bi+1)*D,D,0]),zoom:0,x:0,y:0,wrap:bi,fullyVisible:!1}},It=[],kt=[],Yt=I,qt=j.reparseOverscaled?w:I;if(this._renderWorldCopies)for(var ce=1;ce<=3;ce++)It.push(wt(-ce)),It.push(wt(ce));for(It.push(wt(0));It.length>0;){var ye=It.pop(),Le=ye.x,Ce=ye.y,ke=ye.fullyVisible;if(!ke){var nn=ye.aabb.intersects(Q);if(nn===0)continue;ke=nn===2}var ln=ye.aabb.distanceX(G),Qn=ye.aabb.distanceY(G),Yn=Math.max(Math.abs(ln),Math.abs(Qn));if(ye.zoom===Yt||Yn>3+(1<<Yt-ye.zoom)-2&&ye.zoom>=ut)kt.push({tileID:new t.OverscaledTileID(ye.zoom===Yt?qt:ye.zoom,ye.wrap,ye.zoom,Le,Ce),distanceSq:t.sqrLen([G[0]-.5-Le,G[1]-.5-Ce])});else for(var dr=0;dr<4;dr++){var Mr=(Le<<1)+dr%2,$r=(Ce<<1)+(dr>>1);It.push({aabb:ye.aabb.quadrant(dr),zoom:ye.zoom+1,x:Mr,y:$r,wrap:ye.wrap,fullyVisible:ke})}}return kt.sort(function(Kr,bi){return Kr.distanceSq-bi.distanceSq}).map(function(Kr){return Kr.tileID})},Ra.prototype.resize=function(j,I){this.width=j,this.height=I,this.pixelsToGLUnits=[2/j,-2/I],this._constrain(),this._calcMatrices()},xo.unmodified.get=function(){return this._unmodified},Ra.prototype.zoomScale=function(j){return Math.pow(2,j)},Ra.prototype.scaleZoom=function(j){return Math.log(j)/Math.LN2},Ra.prototype.project=function(j){var I=t.clamp(j.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(j.lng)*this.worldSize,t.mercatorYfromLat(I)*this.worldSize)},Ra.prototype.unproject=function(j){return new t.MercatorCoordinate(j.x/this.worldSize,j.y/this.worldSize).toLngLat()},xo.point.get=function(){return this.project(this.center)},Ra.prototype.setLocationAtPoint=function(j,I){var w=this.pointCoordinate(I),B=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(j),G=new t.MercatorCoordinate(D.x-(w.x-B.x),D.y-(w.y-B.y));this.center=this.coordinateLocation(G),this._renderWorldCopies&&(this.center=this.center.wrap())},Ra.prototype.locationPoint=function(j){return this.coordinatePoint(this.locationCoordinate(j))},Ra.prototype.pointLocation=function(j){return this.coordinateLocation(this.pointCoordinate(j))},Ra.prototype.locationCoordinate=function(j){return t.MercatorCoordinate.fromLngLat(j)},Ra.prototype.coordinateLocation=function(j){return j.toLngLat()},Ra.prototype.pointCoordinate=function(j){var I=[j.x,j.y,0,1],w=[j.x,j.y,1,1];t.transformMat4(I,I,this.pixelMatrixInverse),t.transformMat4(w,w,this.pixelMatrixInverse);var B=I[3],D=w[3],G=I[1]/B,Q=w[1]/D,ut=I[2]/B,wt=w[2]/D,It=ut===wt?0:(0-ut)/(wt-ut);return new t.MercatorCoordinate(t.number(I[0]/B,w[0]/D,It)/this.worldSize,t.number(G,Q,It)/this.worldSize)},Ra.prototype.coordinatePoint=function(j){var I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix),new t.Point(I[0]/I[3],I[1]/I[3])},Ra.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Ra.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ra.prototype.setMaxBounds=function(j){j?(this.lngRange=[j.getWest(),j.getEast()],this.latRange=[j.getSouth(),j.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ra.prototype.calculatePosMatrix=function(j,I){I===void 0&&(I=!1);var w=j.key,B=I?this._alignedPosMatrixCache:this._posMatrixCache;if(B[w])return B[w];var D=j.canonical,G=this.worldSize/this.zoomScale(D.z),Q=D.x+Math.pow(2,D.z)*j.wrap,ut=t.identity(new Float64Array(16));return t.translate(ut,ut,[Q*G,D.y*G,0]),t.scale(ut,ut,[G/t.EXTENT,G/t.EXTENT,1]),t.multiply(ut,I?this.alignedProjMatrix:this.projMatrix,ut),B[w]=new Float32Array(ut),B[w]},Ra.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ra.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var j,I,w,B,D=-90,G=90,Q=-180,ut=180,wt=this.size,It=this._unmodified;if(this.latRange){var kt=this.latRange;D=t.mercatorYfromLat(kt[1])*this.worldSize,j=(G=t.mercatorYfromLat(kt[0])*this.worldSize)-D<wt.y?wt.y/(G-D):0}if(this.lngRange){var Yt=this.lngRange;Q=t.mercatorXfromLng(Yt[0])*this.worldSize,I=(ut=t.mercatorXfromLng(Yt[1])*this.worldSize)-Q<wt.x?wt.x/(ut-Q):0}var qt=this.point,ce=Math.max(I||0,j||0);if(ce)return this.center=this.unproject(new t.Point(I?(ut+Q)/2:qt.x,j?(G+D)/2:qt.y)),this.zoom+=this.scaleZoom(ce),this._unmodified=It,void(this._constraining=!1);if(this.latRange){var ye=qt.y,Le=wt.y/2;ye-Le<D&&(B=D+Le),ye+Le>G&&(B=G-Le)}if(this.lngRange){var Ce=qt.x,ke=wt.x/2;Ce-ke<Q&&(w=Q+ke),Ce+ke>ut&&(w=ut-ke)}w===void 0&&B===void 0||(this.center=this.unproject(new t.Point(w!==void 0?w:qt.x,B!==void 0?B:qt.y))),this._unmodified=It,this._constraining=!1}},Ra.prototype._calcMatrices=function(){if(this.height){var j=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var I=Math.PI/2+this._pitch,w=this._fov*(.5+j.y/this.height),B=Math.sin(w)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-I-w,.01,Math.PI-.01)),D=this.point,G=D.x,Q=D.y,ut=1.01*(Math.cos(Math.PI/2-this._pitch)*B+this.cameraToCenterDistance),wt=this.height/50,It=new Float64Array(16);t.perspective(It,this._fov,this.width/this.height,wt,ut),It[8]=2*-j.x/this.width,It[9]=2*j.y/this.height,t.scale(It,It,[1,-1,1]),t.translate(It,It,[0,0,-this.cameraToCenterDistance]),t.rotateX(It,It,this._pitch),t.rotateZ(It,It,this.angle),t.translate(It,It,[-G,-Q,0]),this.mercatorMatrix=t.scale([],It,[this.worldSize,this.worldSize,this.worldSize]),t.scale(It,It,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=It,this.invProjMatrix=t.invert([],this.projMatrix);var kt=this.width%2/2,Yt=this.height%2/2,qt=Math.cos(this.angle),ce=Math.sin(this.angle),ye=G-Math.round(G)+qt*kt+ce*Yt,Le=Q-Math.round(Q)+qt*Yt+ce*kt,Ce=new Float64Array(It);if(t.translate(Ce,Ce,[ye>.5?ye-1:ye,Le>.5?Le-1:Le,0]),this.alignedProjMatrix=Ce,It=t.create(),t.scale(It,It,[this.width/2,-this.height/2,1]),t.translate(It,It,[1,-1,0]),this.labelPlaneMatrix=It,It=t.create(),t.scale(It,It,[1,-1,1]),t.translate(It,It,[-1,-1,0]),t.scale(It,It,[2/this.width,2/this.height,1]),this.glCoordMatrix=It,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(It=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=It,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ra.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var j=this.pointCoordinate(new t.Point(0,0)),I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ra.prototype.getCameraPoint=function(){var j=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,j))},Ra.prototype.getCameraQueryGeometry=function(j){var I=this.getCameraPoint();if(j.length===1)return[j[0],I];for(var w=I.x,B=I.y,D=I.x,G=I.y,Q=0,ut=j;Q<ut.length;Q+=1){var wt=ut[Q];w=Math.min(w,wt.x),B=Math.min(B,wt.y),D=Math.max(D,wt.x),G=Math.max(G,wt.y)}return[new t.Point(w,B),new t.Point(D,B),new t.Point(D,G),new t.Point(w,G),new t.Point(w,B)]},Object.defineProperties(Ra.prototype,xo);var ru=function(I){var w,B,D,G;this._hashName=I&&encodeURIComponent(I),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(w=this._updateHashUnthrottled.bind(this),B=!1,D=null,G=function(){D=null,B&&(w(),D=setTimeout(G,300),B=!1)},function(){return B=!0,D||G(),D})};ru.prototype.addTo=function(j){return this._map=j,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ru.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ru.prototype.getHashString=function(j){var I=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,B=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,B),G=Math.round(I.lng*D)/D,Q=Math.round(I.lat*D)/D,ut=this._map.getBearing(),wt=this._map.getPitch(),It="";if(It+=j?"/"+G+"/"+Q+"/"+w:w+"/"+Q+"/"+G,(ut||wt)&&(It+="/"+Math.round(10*ut)/10),wt&&(It+="/"+Math.round(wt)),this._hashName){var kt=this._hashName,Yt=!1,qt=t.window.location.hash.slice(1).split("&").map(function(ce){var ye=ce.split("=")[0];return ye===kt?(Yt=!0,ye+"="+It):ce}).filter(function(ce){return ce});return Yt||qt.push(kt+"="+It),"#"+qt.join("&")}return"#"+It},ru.prototype._getCurrentHash=function(){var j,I=this,w=t.window.location.hash.replace("#","");return this._hashName?(w.split("&").map(function(B){return B.split("=")}).forEach(function(B){B[0]===I._hashName&&(j=B)}),(j&&j[1]||"").split("/")):w.split("/")},ru.prototype._onHashChange=function(){var j=this._getCurrentHash();if(j.length>=3&&!j.some(function(w){return isNaN(w)})){var I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(j[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:I,pitch:+(j[4]||0)}),!0}return!1},ru.prototype._updateHashUnthrottled=function(){var j=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,j)}catch(I){}};var xl={linearity:.3,easing:t.bezier(0,0,.3,1)},al=t.extend({deceleration:2500,maxSpeed:1400},xl),ku=t.extend({deceleration:20,maxSpeed:1400},xl),zl=t.extend({deceleration:1e3,maxSpeed:360},xl),cs=t.extend({deceleration:1e3,maxSpeed:90},xl),bl=function(I){this._map=I,this.clear()};function mu(j,I){(!j.duration||j.duration<I.duration)&&(j.duration=I.duration,j.easing=I.easing)}function Fs(j,I,w){var B=w.maxSpeed,D=w.linearity,G=w.deceleration,Q=t.clamp(j*D/(I/1e3),-B,B),ut=Math.abs(Q)/(G*D);return{easing:w.easing,duration:1e3*ut,amount:Q*(ut/2)}}bl.prototype.clear=function(){this._inertiaBuffer=[]},bl.prototype.record=function(j){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:j})},bl.prototype._drainInertiaBuffer=function(){for(var j=this._inertiaBuffer,I=t.browser.now();j.length>0&&I-j[0].time>160;)j.shift()},bl.prototype._onMoveEnd=function(j){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var I={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},w=0,B=this._inertiaBuffer;w<B.length;w+=1){var D=B[w].settings;I.zoom+=D.zoomDelta||0,I.bearing+=D.bearingDelta||0,I.pitch+=D.pitchDelta||0,D.panDelta&&I.pan._add(D.panDelta),D.around&&(I.around=D.around),D.pinchAround&&(I.pinchAround=D.pinchAround)}var G=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Q={};if(I.pan.mag()){var ut=Fs(I.pan.mag(),G,t.extend({},al,j||{}));Q.offset=I.pan.mult(ut.amount/I.pan.mag()),Q.center=this._map.transform.center,mu(Q,ut)}if(I.zoom){var wt=Fs(I.zoom,G,ku);Q.zoom=this._map.transform.zoom+wt.amount,mu(Q,wt)}if(I.bearing){var It=Fs(I.bearing,G,zl);Q.bearing=this._map.transform.bearing+t.clamp(It.amount,-179,179),mu(Q,It)}if(I.pitch){var kt=Fs(I.pitch,G,cs);Q.pitch=this._map.transform.pitch+kt.amount,mu(Q,kt)}if(Q.zoom||Q.bearing){var Yt=I.pinchAround===void 0?I.around:I.pinchAround;Q.around=Yt?this._map.unproject(Yt):this._map.getCenter()}return this.clear(),t.extend(Q,{noMoveStart:!0})}};var Wo=function(j){function I(B,D,G,Q){Q===void 0&&(Q={});var ut=s.mousePos(D.getCanvasContainer(),G),wt=D.unproject(ut);j.call(this,B,t.extend({point:ut,lngLat:wt,originalEvent:G},Q)),this._defaultPrevented=!1,this.target=D}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),_s=function(j){function I(B,D,G){var Q=B==="touchend"?G.changedTouches:G.touches,ut=s.touchPos(D.getCanvasContainer(),Q),wt=ut.map(function(Yt){return D.unproject(Yt)}),It=ut.reduce(function(Yt,qt,ce,ye){return Yt.add(qt.div(ye.length))},new t.Point(0,0)),kt=D.unproject(It);j.call(this,B,{points:ut,point:It,lngLats:wt,lngLat:kt,originalEvent:G}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),iu=function(j){function I(B,D,G){j.call(this,B,{originalEvent:G}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),Ho=function(I,w){this._map=I,this._clickTolerance=w.clickTolerance};Ho.prototype.reset=function(){delete this._mousedownPos},Ho.prototype.wheel=function(j){return this._firePreventable(new iu(j.type,this._map,j))},Ho.prototype.mousedown=function(j,I){return this._mousedownPos=I,this._firePreventable(new Wo(j.type,this._map,j))},Ho.prototype.mouseup=function(j){this._map.fire(new Wo(j.type,this._map,j))},Ho.prototype.click=function(j,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new Wo(j.type,this._map,j))},Ho.prototype.dblclick=function(j){return this._firePreventable(new Wo(j.type,this._map,j))},Ho.prototype.mouseover=function(j){this._map.fire(new Wo(j.type,this._map,j))},Ho.prototype.mouseout=function(j){this._map.fire(new Wo(j.type,this._map,j))},Ho.prototype.touchstart=function(j){return this._firePreventable(new _s(j.type,this._map,j))},Ho.prototype.touchmove=function(j){this._map.fire(new _s(j.type,this._map,j))},Ho.prototype.touchend=function(j){this._map.fire(new _s(j.type,this._map,j))},Ho.prototype.touchcancel=function(j){this._map.fire(new _s(j.type,this._map,j))},Ho.prototype._firePreventable=function(j){if(this._map.fire(j),j.defaultPrevented)return{}},Ho.prototype.isEnabled=function(){return!0},Ho.prototype.isActive=function(){return!1},Ho.prototype.enable=function(){},Ho.prototype.disable=function(){};var Ni=function(I){this._map=I};Ni.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ni.prototype.mousemove=function(j){this._map.fire(new Wo(j.type,this._map,j))},Ni.prototype.mousedown=function(){this._delayContextMenu=!0},Ni.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Wo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ni.prototype.contextmenu=function(j){this._delayContextMenu?this._contextMenuEvent=j:this._map.fire(new Wo(j.type,this._map,j)),this._map.listens("contextmenu")&&j.preventDefault()},Ni.prototype.isEnabled=function(){return!0},Ni.prototype.isActive=function(){return!1},Ni.prototype.enable=function(){},Ni.prototype.disable=function(){};var Ns=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._container=I.getContainer(),this._clickTolerance=w.clickTolerance||1};function El(j,I){for(var w={},B=0;B<j.length;B++)w[j[B].identifier]=I[B];return w}Ns.prototype.isEnabled=function(){return!!this._enabled},Ns.prototype.isActive=function(){return!!this._active},Ns.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ns.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ns.prototype.mousedown=function(j,I){this.isEnabled()&&j.shiftKey&&j.button===0&&(s.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)},Ns.prototype.mousemoveWindow=function(j,I){if(this._active){var w=I;if(!(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)){var B=this._startPos;this._lastPos=w,this._box||(this._box=s.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",j));var D=Math.min(B.x,w.x),G=Math.max(B.x,w.x),Q=Math.min(B.y,w.y),ut=Math.max(B.y,w.y);s.setTransform(this._box,"translate("+D+"px,"+Q+"px)"),this._box.style.width=G-D+"px",this._box.style.height=ut-Q+"px"}}},Ns.prototype.mouseupWindow=function(j,I){var w=this;if(this._active&&j.button===0){var B=this._startPos,D=I;if(this.reset(),s.suppressClick(),B.x!==D.x||B.y!==D.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:j})),{cameraAnimation:function(Q){return Q.fitScreenCoordinates(B,D,w._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",j)}},Ns.prototype.keydown=function(j){this._active&&j.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",j))},Ns.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag(),delete this._startPos,delete this._lastPos},Ns.prototype._fireEvent=function(j,I){return this._map.fire(new t.Event(j,{originalEvent:I}))};var ol=function(I){this.reset(),this.numTouches=I.numTouches};ol.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ol.prototype.touchstart=function(j,I,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=j.timeStamp),w.length===this.numTouches&&(this.centroid=function(B){for(var D=new t.Point(0,0),G=0,Q=B;G<Q.length;G+=1)D._add(Q[G]);return D.div(B.length)}(I),this.touches=El(w,I)))},ol.prototype.touchmove=function(j,I,w){if(!this.aborted&&this.centroid){var B=El(w,I);for(var D in this.touches){var G=B[D];(!G||G.dist(this.touches[D])>30)&&(this.aborted=!0)}}},ol.prototype.touchend=function(j,I,w){if((!this.centroid||j.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){var B=!this.aborted&&this.centroid;if(this.reset(),B)return B}};var No=function(I){this.singleTap=new ol(I),this.numTaps=I.numTaps,this.reset()};No.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},No.prototype.touchstart=function(j,I,w){this.singleTap.touchstart(j,I,w)},No.prototype.touchmove=function(j,I,w){this.singleTap.touchmove(j,I,w)},No.prototype.touchend=function(j,I,w){var B=this.singleTap.touchend(j,I,w);if(B){var D=j.timeStamp-this.lastTime<500,G=!this.lastTap||this.lastTap.dist(B)<30;if(D&&G||this.reset(),this.count++,this.lastTime=j.timeStamp,this.lastTap=B,this.count===this.numTaps)return this.reset(),B}};var Co=function(){this._zoomIn=new No({numTouches:1,numTaps:2}),this._zoomOut=new No({numTouches:2,numTaps:1}),this.reset()};Co.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Co.prototype.touchstart=function(j,I,w){this._zoomIn.touchstart(j,I,w),this._zoomOut.touchstart(j,I,w)},Co.prototype.touchmove=function(j,I,w){this._zoomIn.touchmove(j,I,w),this._zoomOut.touchmove(j,I,w)},Co.prototype.touchend=function(j,I,w){var B=this,D=this._zoomIn.touchend(j,I,w),G=this._zoomOut.touchend(j,I,w);return D?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(ut){return ut.easeTo({duration:300,zoom:ut.getZoom()+1,around:ut.unproject(D)},{originalEvent:j})}}):G?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(ut){return ut.easeTo({duration:300,zoom:ut.getZoom()-1,around:ut.unproject(G)},{originalEvent:j})}}):void 0},Co.prototype.touchcancel=function(){this.reset()},Co.prototype.enable=function(){this._enabled=!0},Co.prototype.disable=function(){this._enabled=!1,this.reset()},Co.prototype.isEnabled=function(){return this._enabled},Co.prototype.isActive=function(){return this._active};var tu={0:1,2:2},mi=function(I){this.reset(),this._clickTolerance=I.clickTolerance||1};mi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},mi.prototype._correctButton=function(j,I){return!1},mi.prototype._move=function(j,I){return{}},mi.prototype.mousedown=function(j,I){if(!this._lastPoint){var w=s.mouseButton(j);this._correctButton(j,w)&&(this._lastPoint=I,this._eventButton=w)}},mi.prototype.mousemoveWindow=function(j,I){var w=this._lastPoint;if(w){if(j.preventDefault(),function(B,D){var G=tu[D];return B.buttons===void 0||(B.buttons&G)!==G}(j,this._eventButton))this.reset();else if(this._moved||!(I.dist(w)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(w,I)}},mi.prototype.mouseupWindow=function(j){this._lastPoint&&s.mouseButton(j)===this._eventButton&&(this._moved&&s.suppressClick(),this.reset())},mi.prototype.enable=function(){this._enabled=!0},mi.prototype.disable=function(){this._enabled=!1,this.reset()},mi.prototype.isEnabled=function(){return this._enabled},mi.prototype.isActive=function(){return this._active};var Ru=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.mousedown=function(w,B){j.prototype.mousedown.call(this,w,B),this._lastPoint&&(this._active=!0)},I.prototype._correctButton=function(w,B){return B===0&&!w.ctrlKey},I.prototype._move=function(w,B){return{around:B,panDelta:B.sub(w)}},I}(mi),Du=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=.8*(B.x-w.x);if(D)return this._active=!0,{bearingDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(mi),ju=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=-.5*(B.y-w.y);if(D)return this._active=!0,{pitchDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(mi),Cs=function(I){this._minTouches=1,this._clickTolerance=I.clickTolerance||1,this.reset()};Cs.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Cs.prototype.touchstart=function(j,I,w){return this._calculateTransform(j,I,w)},Cs.prototype.touchmove=function(j,I,w){if(this._active&&!(w.length<this._minTouches))return j.preventDefault(),this._calculateTransform(j,I,w)},Cs.prototype.touchend=function(j,I,w){this._calculateTransform(j,I,w),this._active&&w.length<this._minTouches&&this.reset()},Cs.prototype.touchcancel=function(){this.reset()},Cs.prototype._calculateTransform=function(j,I,w){w.length>0&&(this._active=!0);var B=El(w,I),D=new t.Point(0,0),G=new t.Point(0,0),Q=0;for(var ut in B){var wt=B[ut],It=this._touches[ut];It&&(D._add(wt),G._add(wt.sub(It)),Q++,B[ut]=wt)}if(this._touches=B,!(Q<this._minTouches)&&G.mag()){var kt=G.div(Q);if(this._sum._add(kt),!(this._sum.mag()<this._clickTolerance))return{around:D.div(Q),panDelta:kt}}},Cs.prototype.enable=function(){this._enabled=!0},Cs.prototype.disable=function(){this._enabled=!1,this.reset()},Cs.prototype.isEnabled=function(){return this._enabled},Cs.prototype.isActive=function(){return this._active};var Ae=function(){this.reset()};function _e(j,I,w){for(var B=0;B<j.length;B++)if(j[B].identifier===w)return I[B]}function pn(j,I){return Math.log(j/I)/Math.LN2}Ae.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ae.prototype._start=function(j){},Ae.prototype._move=function(j,I,w){return{}},Ae.prototype.touchstart=function(j,I,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([I[0],I[1]]))},Ae.prototype.touchmove=function(j,I,w){if(this._firstTwoTouches){j.preventDefault();var B=this._firstTwoTouches,D=B[1],G=_e(w,I,B[0]),Q=_e(w,I,D);if(G&&Q){var ut=this._aroundCenter?null:G.add(Q).div(2);return this._move([G,Q],ut,j)}}},Ae.prototype.touchend=function(j,I,w){if(this._firstTwoTouches){var B=this._firstTwoTouches,D=B[1],G=_e(w,I,B[0]),Q=_e(w,I,D);G&&Q||(this._active&&s.suppressClick(),this.reset())}},Ae.prototype.touchcancel=function(){this.reset()},Ae.prototype.enable=function(j){this._enabled=!0,this._aroundCenter=!!j&&j.around==="center"},Ae.prototype.disable=function(){this._enabled=!1,this.reset()},Ae.prototype.isEnabled=function(){return this._enabled},Ae.prototype.isActive=function(){return this._active};var an=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._distance,delete this._startDistance},I.prototype._start=function(w){this._startDistance=this._distance=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._distance;if(this._distance=w[0].dist(w[1]),this._active||!(Math.abs(pn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pn(this._distance,D),pinchAround:B}},I}(Ae);function In(j,I){return 180*j.angleWith(I)/Math.PI}var hr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},I.prototype._start=function(w){this._startVector=this._vector=w[0].sub(w[1]),this._minDiameter=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._vector;if(this._vector=w[0].sub(w[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:In(this._vector,D),pinchAround:B}},I.prototype._isBelowThreshold=function(w){this._minDiameter=Math.min(this._minDiameter,w.mag());var B=25/(Math.PI*this._minDiameter)*360,D=In(w,this._startVector);return Math.abs(D)<B},I}(Ae);function Lr(j){return Math.abs(j.y)>Math.abs(j.x)}var Zr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},I.prototype._start=function(w){this._lastPoints=w,Lr(w[0].sub(w[1]))&&(this._valid=!1)},I.prototype._move=function(w,B,D){var G=w[0].sub(this._lastPoints[0]),Q=w[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(G,Q,D.timeStamp),this._valid)return this._lastPoints=w,this._active=!0,{pitchDelta:(G.y+Q.y)/2*-.5}},I.prototype.gestureBeginsVertically=function(w,B,D){if(this._valid!==void 0)return this._valid;var G=w.mag()>=2,Q=B.mag()>=2;if(G||Q){if(!G||!Q)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;var ut=w.y>0==B.y>0;return Lr(w)&&Lr(B)&&ut}},I}(Ae),ei={panStep:100,bearingStep:15,pitchStep:10},Ur=function(){var I=ei;this._panStep=I.panStep,this._bearingStep=I.bearingStep,this._pitchStep=I.pitchStep,this._rotationDisabled=!1};function hi(j){return j*(2-j)}Ur.prototype.reset=function(){this._active=!1},Ur.prototype.keydown=function(j){var I=this;if(!(j.altKey||j.ctrlKey||j.metaKey)){var w=0,B=0,D=0,G=0,Q=0;switch(j.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:j.shiftKey?B=-1:(j.preventDefault(),G=-1);break;case 39:j.shiftKey?B=1:(j.preventDefault(),G=1);break;case 38:j.shiftKey?D=1:(j.preventDefault(),Q=-1);break;case 40:j.shiftKey?D=-1:(j.preventDefault(),Q=1);break;default:return}return this._rotationDisabled&&(B=0,D=0),{cameraAnimation:function(wt){var It=wt.getZoom();wt.easeTo({duration:300,easeId:"keyboardHandler",easing:hi,zoom:w?Math.round(It)+w*(j.shiftKey?2:1):It,bearing:wt.getBearing()+B*I._bearingStep,pitch:wt.getPitch()+D*I._pitchStep,offset:[-G*I._panStep,-Q*I._panStep],center:wt.getCenter()},{originalEvent:j})}}}},Ur.prototype.enable=function(){this._enabled=!0},Ur.prototype.disable=function(){this._enabled=!1,this.reset()},Ur.prototype.isEnabled=function(){return this._enabled},Ur.prototype.isActive=function(){return this._active},Ur.prototype.disableRotation=function(){this._rotationDisabled=!0},Ur.prototype.enableRotation=function(){this._rotationDisabled=!1};var br=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};br.prototype.setZoomRate=function(j){this._defaultZoomRate=j},br.prototype.setWheelZoomRate=function(j){this._wheelZoomRate=j},br.prototype.isEnabled=function(){return!!this._enabled},br.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},br.prototype.isZooming=function(){return!!this._zooming},br.prototype.enable=function(j){this.isEnabled()||(this._enabled=!0,this._aroundCenter=j&&j.around==="center")},br.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},br.prototype.wheel=function(j){if(this.isEnabled()){var I=j.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*j.deltaY:j.deltaY,w=t.browser.now(),B=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,I!==0&&I%4.000244140625==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":B>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,j)):this._type||(this._type=Math.abs(B*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),j.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=j,this._delta-=I,this._active||this._start(j)),j.preventDefault()}},br.prototype._onTimeout=function(j){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(j)},br.prototype._start=function(j){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var I=s.mousePos(this._el,j);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},br.prototype.renderFrame=function(){var j=this;if(this._frameId&&(this._frameId=null,this.isActive())){var I=this._map.transform;if(this._delta!==0){var w=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,B=2/(1+Math.exp(-Math.abs(this._delta*w)));this._delta<0&&B!==0&&(B=1/B);var D=typeof this._targetZoom=="number"?I.zoomScale(this._targetZoom):I.scale;this._targetZoom=Math.min(I.maxZoom,Math.max(I.minZoom,I.scaleZoom(D*B))),this._type==="wheel"&&(this._startZoom=I.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var G,Q=typeof this._targetZoom=="number"?this._targetZoom:I.zoom,ut=this._startZoom,wt=this._easing,It=!1;if(this._type==="wheel"&&ut&&wt){var kt=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),Yt=wt(kt);G=t.number(ut,Q,Yt),kt<1?this._frameId||(this._frameId=!0):It=!0}else G=Q,It=!0;return this._active=!0,It&&(this._active=!1,this._finishTimeout=setTimeout(function(){j._zooming=!1,j._handler._triggerRenderFrame(),delete j._targetZoom,delete j._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!It,zoomDelta:G-I.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},br.prototype._smoothOutEasing=function(j){var I=t.ease;if(this._prevEase){var w=this._prevEase,B=(t.browser.now()-w.start)/w.duration,D=w.easing(B+.01)-w.easing(B),G=.27/Math.sqrt(D*D+1e-4)*.01,Q=Math.sqrt(.0729-G*G);I=t.bezier(G,Q,.25,1)}return this._prevEase={start:t.browser.now(),duration:j,easing:I},I},br.prototype.reset=function(){this._active=!1};var Xt=function(I,w){this._clickZoom=I,this._tapZoom=w};Xt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Xt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Xt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Xt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ee=function(){this.reset()};ee.prototype.reset=function(){this._active=!1},ee.prototype.dblclick=function(j,I){return j.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(j.shiftKey?-1:1),around:B.unproject(I)},{originalEvent:j})}}},ee.prototype.enable=function(){this._enabled=!0},ee.prototype.disable=function(){this._enabled=!1,this.reset()},ee.prototype.isEnabled=function(){return this._enabled},ee.prototype.isActive=function(){return this._active};var Oe=function(){this._tap=new No({numTouches:1,numTaps:1}),this.reset()};Oe.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Oe.prototype.touchstart=function(j,I,w){this._swipePoint||(this._tapTime&&j.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?w.length>0&&(this._swipePoint=I[0],this._swipeTouch=w[0].identifier):this._tap.touchstart(j,I,w))},Oe.prototype.touchmove=function(j,I,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;var B=I[0],D=B.y-this._swipePoint.y;return this._swipePoint=B,j.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(j,I,w)},Oe.prototype.touchend=function(j,I,w){this._tapTime?this._swipePoint&&w.length===0&&this.reset():this._tap.touchend(j,I,w)&&(this._tapTime=j.timeStamp)},Oe.prototype.touchcancel=function(){this.reset()},Oe.prototype.enable=function(){this._enabled=!0},Oe.prototype.disable=function(){this._enabled=!1,this.reset()},Oe.prototype.isEnabled=function(){return this._enabled},Oe.prototype.isActive=function(){return this._active};var Ee=function(I,w,B){this._el=I,this._mousePan=w,this._touchPan=B};Ee.prototype.enable=function(j){this._inertiaOptions=j||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ee.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ee.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ee.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var jt=function(I,w,B){this._pitchWithRotate=I.pitchWithRotate,this._mouseRotate=w,this._mousePitch=B};jt.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},jt.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},jt.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},jt.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zt=function(I,w,B,D){this._el=I,this._touchZoom=w,this._touchRotate=B,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0};zt.prototype.enable=function(j){this._touchZoom.enable(j),this._rotationDisabled||this._touchRotate.enable(j),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zt.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zt.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zt.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zt.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zt.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var se=function(I){return I.zoom||I.drag||I.pitch||I.rotate},ie=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I}(t.Event);function he(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta}var Be=function(I,w){this._map=I,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new bl(I),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(w),t.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!0}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[t.window,"blur",void 0]];for(var D=0,G=this._listeners;D<G.length;D+=1){var Q=G[D],ut=Q[0];s.addEventListener(ut,Q[1],ut===t.window.document?this.handleWindowEvent:this.handleEvent,Q[2])}};Be.prototype.destroy=function(){for(var j=0,I=this._listeners;j<I.length;j+=1){var w=I[j],B=w[0];s.removeEventListener(B,w[1],B===t.window.document?this.handleWindowEvent:this.handleEvent,w[2])}},Be.prototype._addDefaultHandlers=function(j){var I=this._map,w=I.getCanvasContainer();this._add("mapEvent",new Ho(I,j));var B=I.boxZoom=new Ns(I,j);this._add("boxZoom",B);var D=new Co,G=new ee;I.doubleClickZoom=new Xt(G,D),this._add("tapZoom",D),this._add("clickZoom",G);var Q=new Oe;this._add("tapDragZoom",Q);var ut=I.touchPitch=new Zr;this._add("touchPitch",ut);var wt=new Du(j),It=new ju(j);I.dragRotate=new jt(j,wt,It),this._add("mouseRotate",wt,["mousePitch"]),this._add("mousePitch",It,["mouseRotate"]);var kt=new Ru(j),Yt=new Cs(j);I.dragPan=new Ee(w,kt,Yt),this._add("mousePan",kt),this._add("touchPan",Yt,["touchZoom","touchRotate"]);var qt=new hr,ce=new an;I.touchZoomRotate=new zt(w,ce,qt,Q),this._add("touchRotate",qt,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]);var ye=I.scrollZoom=new br(I,this);this._add("scrollZoom",ye,["mousePan"]);var Le=I.keyboard=new Ur;this._add("keyboard",Le),this._add("blockableMapEvent",new Ni(I));for(var Ce=0,ke=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ce<ke.length;Ce+=1){var nn=ke[Ce];j.interactive&&j[nn]&&I[nn].enable(j[nn])}},Be.prototype._add=function(j,I,w){this._handlers.push({handlerName:j,handler:I,allowed:w}),this._handlersById[j]=I},Be.prototype.stop=function(j){if(!this._updatingCamera){for(var I=0,w=this._handlers;I<w.length;I+=1)w[I].handler.reset();this._inertia.clear(),this._fireEvents({},{},j),this._changes=[]}},Be.prototype.isActive=function(){for(var j=0,I=this._handlers;j<I.length;j+=1)if(I[j].handler.isActive())return!0;return!1},Be.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Be.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Be.prototype.isMoving=function(){return Boolean(se(this._eventsInProgress))||this.isZooming()},Be.prototype._blockedByActive=function(j,I,w){for(var B in j)if(B!==w&&(!I||I.indexOf(B)<0))return!0;return!1},Be.prototype.handleWindowEvent=function(j){this.handleEvent(j,j.type+"Window")},Be.prototype._getMapTouches=function(j){for(var I=[],w=0,B=j;w<B.length;w+=1){var D=B[w];this._el.contains(D.target)&&I.push(D)}return I},Be.prototype.handleEvent=function(j,I){if(j.type!=="blur"){this._updatingCamera=!0;for(var w=j.type==="renderFrame"?void 0:j,B={needsRenderFrame:!1},D={},G={},Q=j.touches?this._getMapTouches(j.touches):void 0,ut=Q?s.touchPos(this._el,Q):s.mousePos(this._el,j),wt=0,It=this._handlers;wt<It.length;wt+=1){var kt=It[wt],Yt=kt.handlerName,qt=kt.handler,ce=kt.allowed;if(qt.isEnabled()){var ye=void 0;this._blockedByActive(G,ce,Yt)?qt.reset():qt[I||j.type]&&(ye=qt[I||j.type](j,ut,Q),this.mergeHandlerResult(B,D,ye,Yt,w),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||qt.isActive())&&(G[Yt]=qt)}}var Le={};for(var Ce in this._previousActiveHandlers)G[Ce]||(Le[Ce]=w);this._previousActiveHandlers=G,(Object.keys(Le).length||he(B))&&(this._changes.push([B,D,Le]),this._triggerRenderFrame()),(Object.keys(G).length||he(B))&&this._map._stop(!0),this._updatingCamera=!1;var ke=B.cameraAnimation;ke&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ke(this._map))}else this.stop(!0)},Be.prototype.mergeHandlerResult=function(j,I,w,B,D){if(w){t.extend(j,w);var G={handlerName:B,originalEvent:w.originalEvent||D};w.zoomDelta!==void 0&&(I.zoom=G),w.panDelta!==void 0&&(I.drag=G),w.pitchDelta!==void 0&&(I.pitch=G),w.bearingDelta!==void 0&&(I.rotate=G)}},Be.prototype._applyChanges=function(){for(var j={},I={},w={},B=0,D=this._changes;B<D.length;B+=1){var G=D[B],Q=G[0],ut=G[1],wt=G[2];Q.panDelta&&(j.panDelta=(j.panDelta||new t.Point(0,0))._add(Q.panDelta)),Q.zoomDelta&&(j.zoomDelta=(j.zoomDelta||0)+Q.zoomDelta),Q.bearingDelta&&(j.bearingDelta=(j.bearingDelta||0)+Q.bearingDelta),Q.pitchDelta&&(j.pitchDelta=(j.pitchDelta||0)+Q.pitchDelta),Q.around!==void 0&&(j.around=Q.around),Q.pinchAround!==void 0&&(j.pinchAround=Q.pinchAround),Q.noInertia&&(j.noInertia=Q.noInertia),t.extend(I,ut),t.extend(w,wt)}this._updateMapTransform(j,I,w),this._changes=[]},Be.prototype._updateMapTransform=function(j,I,w){var B=this._map,D=B.transform;if(!he(j))return this._fireEvents(I,w,!0);var G=j.panDelta,Q=j.zoomDelta,ut=j.bearingDelta,wt=j.pitchDelta,It=j.around,kt=j.pinchAround;kt!==void 0&&(It=kt),B._stop(!0),It=It||B.transform.centerPoint;var Yt=D.pointLocation(G?It.sub(G):It);ut&&(D.bearing+=ut),wt&&(D.pitch+=wt),Q&&(D.zoom+=Q),D.setLocationAtPoint(Yt,It),this._map._update(),j.noInertia||this._inertia.record(j),this._fireEvents(I,w,!0)},Be.prototype._fireEvents=function(j,I,w){var B=this,D=se(this._eventsInProgress),G=se(j),Q={};for(var ut in j)this._eventsInProgress[ut]||(Q[ut+"start"]=j[ut].originalEvent),this._eventsInProgress[ut]=j[ut];for(var wt in!D&&G&&this._fireEvent("movestart",G.originalEvent),Q)this._fireEvent(wt,Q[wt]);for(var It in G&&this._fireEvent("move",G.originalEvent),j)this._fireEvent(It,j[It].originalEvent);var kt,Yt={};for(var qt in this._eventsInProgress){var ce=this._eventsInProgress[qt],ye=ce.handlerName,Le=ce.originalEvent;this._handlersById[ye].isActive()||(delete this._eventsInProgress[qt],Yt[qt+"end"]=kt=I[ye]||Le)}for(var Ce in Yt)this._fireEvent(Ce,Yt[Ce]);var ke=se(this._eventsInProgress);if(w&&(D||G)&&!ke){this._updatingCamera=!0;var nn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ln=function(Yn){return Yn!==0&&-B._bearingSnap<Yn&&Yn<B._bearingSnap};nn?(ln(nn.bearing||this._map.getBearing())&&(nn.bearing=0),this._map.easeTo(nn,{originalEvent:kt})):(this._map.fire(new t.Event("moveend",{originalEvent:kt})),ln(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Be.prototype._fireEvent=function(j,I){this._map.fire(new t.Event(j,I?{originalEvent:I}:{}))},Be.prototype._requestFrame=function(){var j=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(I){delete j._frameId,j.handleEvent(new ie("renderFrame",{timeStamp:I})),j._applyChanges()})},Be.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ze=function(j){function I(w,B){j.call(this),this._moving=!1,this._zooming=!1,this.transform=w,this._bearingSnap=B.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},I.prototype.setCenter=function(w,B){return this.jumpTo({center:w},B)},I.prototype.panBy=function(w,B,D){return w=t.Point.convert(w).mult(-1),this.panTo(this.transform.center,t.extend({offset:w},B),D)},I.prototype.panTo=function(w,B,D){return this.easeTo(t.extend({center:w},B),D)},I.prototype.getZoom=function(){return this.transform.zoom},I.prototype.setZoom=function(w,B){return this.jumpTo({zoom:w},B),this},I.prototype.zoomTo=function(w,B,D){return this.easeTo(t.extend({zoom:w},B),D)},I.prototype.zoomIn=function(w,B){return this.zoomTo(this.getZoom()+1,w,B),this},I.prototype.zoomOut=function(w,B){return this.zoomTo(this.getZoom()-1,w,B),this},I.prototype.getBearing=function(){return this.transform.bearing},I.prototype.setBearing=function(w,B){return this.jumpTo({bearing:w},B),this},I.prototype.getPadding=function(){return this.transform.padding},I.prototype.setPadding=function(w,B){return this.jumpTo({padding:w},B),this},I.prototype.rotateTo=function(w,B,D){return this.easeTo(t.extend({bearing:w},B),D)},I.prototype.resetNorth=function(w,B){return this.rotateTo(0,t.extend({duration:1e3},w),B),this},I.prototype.resetNorthPitch=function(w,B){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},w),B),this},I.prototype.snapToNorth=function(w,B){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(w,B):this},I.prototype.getPitch=function(){return this.transform.pitch},I.prototype.setPitch=function(w,B){return this.jumpTo({pitch:w},B),this},I.prototype.cameraForBounds=function(w,B){w=t.LngLatBounds.convert(w);var D=B&&B.bearing||0;return this._cameraForBoxAndBearing(w.getNorthWest(),w.getSouthEast(),D,B)},I.prototype._cameraForBoxAndBearing=function(w,B,D,G){var Q={top:0,bottom:0,right:0,left:0};if(typeof(G=t.extend({padding:Q,offset:[0,0],maxZoom:this.transform.maxZoom},G)).padding=="number"){var ut=G.padding;G.padding={top:ut,bottom:ut,right:ut,left:ut}}G.padding=t.extend(Q,G.padding);var wt=this.transform,It=wt.padding,kt=wt.project(t.LngLat.convert(w)),Yt=wt.project(t.LngLat.convert(B)),qt=kt.rotate(-D*Math.PI/180),ce=Yt.rotate(-D*Math.PI/180),ye=new t.Point(Math.max(qt.x,ce.x),Math.max(qt.y,ce.y)),Le=new t.Point(Math.min(qt.x,ce.x),Math.min(qt.y,ce.y)),Ce=ye.sub(Le),ke=(wt.width-(It.left+It.right+G.padding.left+G.padding.right))/Ce.x,nn=(wt.height-(It.top+It.bottom+G.padding.top+G.padding.bottom))/Ce.y;if(!(nn<0||ke<0)){var ln=Math.min(wt.scaleZoom(wt.scale*Math.min(ke,nn)),G.maxZoom),Qn=typeof G.offset.x=="number"?new t.Point(G.offset.x,G.offset.y):t.Point.convert(G.offset),Yn=new t.Point((G.padding.left-G.padding.right)/2,(G.padding.top-G.padding.bottom)/2).rotate(D*Math.PI/180),dr=Qn.add(Yn).mult(wt.scale/wt.zoomScale(ln));return{center:wt.unproject(kt.add(Yt).div(2).sub(dr)),zoom:ln,bearing:D}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},I.prototype.fitBounds=function(w,B,D){return this._fitInternal(this.cameraForBounds(w,B),B,D)},I.prototype.fitScreenCoordinates=function(w,B,D,G,Q){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(w)),this.transform.pointLocation(t.Point.convert(B)),D,G),G,Q)},I.prototype._fitInternal=function(w,B,D){return w?(delete(B=t.extend(w,B)).padding,B.linear?this.easeTo(B,D):this.flyTo(B,D)):this},I.prototype.jumpTo=function(w,B){this.stop();var D=this.transform,G=!1,Q=!1,ut=!1;return"zoom"in w&&D.zoom!==+w.zoom&&(G=!0,D.zoom=+w.zoom),w.center!==void 0&&(D.center=t.LngLat.convert(w.center)),"bearing"in w&&D.bearing!==+w.bearing&&(Q=!0,D.bearing=+w.bearing),"pitch"in w&&D.pitch!==+w.pitch&&(ut=!0,D.pitch=+w.pitch),w.padding==null||D.isPaddingEqual(w.padding)||(D.padding=w.padding),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B)),G&&this.fire(new t.Event("zoomstart",B)).fire(new t.Event("zoom",B)).fire(new t.Event("zoomend",B)),Q&&this.fire(new t.Event("rotatestart",B)).fire(new t.Event("rotate",B)).fire(new t.Event("rotateend",B)),ut&&this.fire(new t.Event("pitchstart",B)).fire(new t.Event("pitch",B)).fire(new t.Event("pitchend",B)),this.fire(new t.Event("moveend",B))},I.prototype.easeTo=function(w,B){var D=this;this._stop(!1,w.easeId),((w=t.extend({offset:[0,0],duration:500,easing:t.ease},w)).animate===!1||!w.essential&&t.browser.prefersReducedMotion)&&(w.duration=0);var G=this.transform,Q=this.getZoom(),ut=this.getBearing(),wt=this.getPitch(),It=this.getPadding(),kt="zoom"in w?+w.zoom:Q,Yt="bearing"in w?this._normalizeBearing(w.bearing,ut):ut,qt="pitch"in w?+w.pitch:wt,ce="padding"in w?w.padding:G.padding,ye=t.Point.convert(w.offset),Le=G.centerPoint.add(ye),Ce=G.pointLocation(Le),ke=t.LngLat.convert(w.center||Ce);this._normalizeCenter(ke);var nn,ln,Qn=G.project(Ce),Yn=G.project(ke).sub(Qn),dr=G.zoomScale(kt-Q);w.around&&(nn=t.LngLat.convert(w.around),ln=G.locationPoint(nn));var Mr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||kt!==Q,this._rotating=this._rotating||ut!==Yt,this._pitching=this._pitching||qt!==wt,this._padding=!G.isPaddingEqual(ce),this._easeId=w.easeId,this._prepareEase(B,w.noMoveStart,Mr),this._ease(function($r){if(D._zooming&&(G.zoom=t.number(Q,kt,$r)),D._rotating&&(G.bearing=t.number(ut,Yt,$r)),D._pitching&&(G.pitch=t.number(wt,qt,$r)),D._padding&&(G.interpolatePadding(It,ce,$r),Le=G.centerPoint.add(ye)),nn)G.setLocationAtPoint(nn,ln);else{var Kr=G.zoomScale(G.zoom-Q),bi=kt>Q?Math.min(2,dr):Math.max(.5,dr),Oi=Math.pow(bi,1-$r),zi=G.unproject(Qn.add(Yn.mult($r*Oi)).mult(Kr));G.setLocationAtPoint(G.renderWorldCopies?zi.wrap():zi,Le)}D._fireMoveEvents(B)},function($r){D._afterEase(B,$r)},w),this},I.prototype._prepareEase=function(w,B,D){D===void 0&&(D={}),this._moving=!0,B||D.moving||this.fire(new t.Event("movestart",w)),this._zooming&&!D.zooming&&this.fire(new t.Event("zoomstart",w)),this._rotating&&!D.rotating&&this.fire(new t.Event("rotatestart",w)),this._pitching&&!D.pitching&&this.fire(new t.Event("pitchstart",w))},I.prototype._fireMoveEvents=function(w){this.fire(new t.Event("move",w)),this._zooming&&this.fire(new t.Event("zoom",w)),this._rotating&&this.fire(new t.Event("rotate",w)),this._pitching&&this.fire(new t.Event("pitch",w))},I.prototype._afterEase=function(w,B){if(!this._easeId||!B||this._easeId!==B){delete this._easeId;var D=this._zooming,G=this._rotating,Q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new t.Event("zoomend",w)),G&&this.fire(new t.Event("rotateend",w)),Q&&this.fire(new t.Event("pitchend",w)),this.fire(new t.Event("moveend",w))}},I.prototype.flyTo=function(w,B){var D=this;if(!w.essential&&t.browser.prefersReducedMotion){var G=t.pick(w,["center","zoom","bearing","pitch","around"]);return this.jumpTo(G,B)}this.stop(),w=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},w);var Q=this.transform,ut=this.getZoom(),wt=this.getBearing(),It=this.getPitch(),kt=this.getPadding(),Yt="zoom"in w?t.clamp(+w.zoom,Q.minZoom,Q.maxZoom):ut,qt="bearing"in w?this._normalizeBearing(w.bearing,wt):wt,ce="pitch"in w?+w.pitch:It,ye="padding"in w?w.padding:Q.padding,Le=Q.zoomScale(Yt-ut),Ce=t.Point.convert(w.offset),ke=Q.centerPoint.add(Ce),nn=Q.pointLocation(ke),ln=t.LngLat.convert(w.center||nn);this._normalizeCenter(ln);var Qn=Q.project(nn),Yn=Q.project(ln).sub(Qn),dr=w.curve,Mr=Math.max(Q.width,Q.height),$r=Mr/Le,Kr=Yn.mag();if("minZoom"in w){var bi=t.clamp(Math.min(w.minZoom,ut,Yt),Q.minZoom,Q.maxZoom),Oi=Mr/Q.zoomScale(bi-ut);dr=Math.sqrt(Oi/Kr*2)}var zi=dr*dr;function Vi(qi){var Ca=($r*$r-Mr*Mr+(qi?-1:1)*zi*zi*Kr*Kr)/(2*(qi?$r:Mr)*zi*Kr);return Math.log(Math.sqrt(Ca*Ca+1)-Ca)}function _a(qi){return(Math.exp(qi)-Math.exp(-qi))/2}function ya(qi){return(Math.exp(qi)+Math.exp(-qi))/2}var wi=Vi(0),$i=function(Ca){return ya(wi)/ya(wi+dr*Ca)},sa=function(Ca){return Mr*((ya(wi)*(_a(Na=wi+dr*Ca)/ya(Na))-_a(wi))/zi)/Kr;var Na},Bi=(Vi(1)-wi)/dr;if(Math.abs(Kr)<1e-6||!isFinite(Bi)){if(Math.abs(Mr-$r)<1e-6)return this.easeTo(w,B);var ca=$r<Mr?-1:1;Bi=Math.abs(Math.log($r/Mr))/dr,sa=function(){return 0},$i=function(Ca){return Math.exp(ca*dr*Ca)}}return w.duration="duration"in w?+w.duration:1e3*Bi/("screenSpeed"in w?+w.screenSpeed/dr:+w.speed),w.maxDuration&&w.duration>w.maxDuration&&(w.duration=0),this._zooming=!0,this._rotating=wt!==qt,this._pitching=ce!==It,this._padding=!Q.isPaddingEqual(ye),this._prepareEase(B,!1),this._ease(function(qi){var Ca=qi*Bi,Na=1/$i(Ca);Q.zoom=qi===1?Yt:ut+Q.scaleZoom(Na),D._rotating&&(Q.bearing=t.number(wt,qt,qi)),D._pitching&&(Q.pitch=t.number(It,ce,qi)),D._padding&&(Q.interpolatePadding(kt,ye,qi),ke=Q.centerPoint.add(Ce));var rs=qi===1?ln:Q.unproject(Qn.add(Yn.mult(sa(Ca))).mult(Na));Q.setLocationAtPoint(Q.renderWorldCopies?rs.wrap():rs,ke),D._fireMoveEvents(B)},function(){return D._afterEase(B)},w),this},I.prototype.isEasing=function(){return!!this._easeFrameId},I.prototype.stop=function(){return this._stop()},I.prototype._stop=function(w,B){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,B)}if(!w){var G=this.handlers;G&&G.stop(!1)}return this},I.prototype._ease=function(w,B,D){D.animate===!1||D.duration===0?(w(1),B()):(this._easeStart=t.browser.now(),this._easeOptions=D,this._onEaseFrame=w,this._onEaseEnd=B,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},I.prototype._renderFrameCallback=function(){var w=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},I.prototype._normalizeBearing=function(w,B){w=t.wrap(w,-180,180);var D=Math.abs(w-B);return Math.abs(w-360-B)<D&&(w-=360),Math.abs(w+360-B)<D&&(w+=360),w},I.prototype._normalizeCenter=function(w){var B=this.transform;if(B.renderWorldCopies&&!B.lngRange){var D=w.lng-B.center.lng;w.lng+=D>180?-360:D<-180?360:0}},I}(t.Evented),on=function(I){I===void 0&&(I={}),this.options=I,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};on.prototype.getDefaultPosition=function(){return"bottom-right"},on.prototype.onAdd=function(j){var I=this.options&&this.options.compact;return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),I&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),I===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},on.prototype.onRemove=function(){s.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},on.prototype._setElementTitle=function(j,I){var w=this._map._getUIString("AttributionControl."+I);j.title=w,j.setAttribute("aria-label",w)},on.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},on.prototype._updateEditLink=function(){var j=this._editLink;j||(j=this._editLink=this._container.querySelector(".mapbox-improve-map"));var I=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(j){var w=I.reduce(function(B,D,G){return D.value&&(B+=D.key+"="+D.value+(G<I.length-1?"&":"")),B},"?");j.href=t.config.FEEDBACK_URL+"/"+w+(this._map._hash?this._map._hash.getHashString(!0):""),j.rel="noopener nofollow",this._setElementTitle(j,"MapFeedback")}},on.prototype._updateData=function(j){!j||j.sourceDataType!=="metadata"&&j.sourceDataType!=="visibility"&&j.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},on.prototype._updateAttributions=function(){if(this._map.style){var j=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?j=j.concat(this.options.customAttribution.map(function(ut){return typeof ut!="string"?"":ut})):typeof this.options.customAttribution=="string"&&j.push(this.options.customAttribution)),this._map.style.stylesheet){var I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}var w=this._map.style.sourceCaches;for(var B in w){var D=w[B];if(D.used){var G=D.getSource();G.attribution&&j.indexOf(G.attribution)<0&&j.push(G.attribution)}}j.sort(function(ut,wt){return ut.length-wt.length});var Q=(j=j.filter(function(ut,wt){for(var It=wt+1;It<j.length;It++)if(j[It].indexOf(ut)>=0)return!1;return!0})).join(" | ");Q!==this._attribHTML&&(this._attribHTML=Q,j.length?(this._innerContainer.innerHTML=Q,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},on.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var $e=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};$e.prototype.onAdd=function(j){this._map=j,this._container=s.create("div","mapboxgl-ctrl");var I=s.create("a","mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://www.mapbox.com/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},$e.prototype.onRemove=function(){s.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},$e.prototype.getDefaultPosition=function(){return"bottom-left"},$e.prototype._updateLogo=function(j){j&&j.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},$e.prototype._logoRequired=function(){if(this._map.style){var j=this._map.style.sourceCaches;for(var I in j)if(j[I].getSource().mapbox_logo)return!0;return!1}},$e.prototype._updateCompact=function(){var j=this._container.children;if(j.length){var I=j[0];this._map.getCanvasContainer().offsetWidth<250?I.classList.add("mapboxgl-compact"):I.classList.remove("mapboxgl-compact")}};var gn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};gn.prototype.add=function(j){var I=++this._id;return this._queue.push({callback:j,id:I,cancelled:!1}),I},gn.prototype.remove=function(j){for(var I=this._currentlyRunning,w=0,B=I?this._queue.concat(I):this._queue;w<B.length;w+=1){var D=B[w];if(D.id===j)return void(D.cancelled=!0)}},gn.prototype.run=function(j){j===void 0&&(j=0);var I=this._currentlyRunning=this._queue;this._queue=[];for(var w=0,B=I;w<B.length;w+=1){var D=B[w];if(!D.cancelled&&(D.callback(j),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},gn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var vn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Xn=t.window.HTMLImageElement,Wn=t.window.HTMLElement,Jn=t.window.ImageBitmap,Hn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},fr=function(j){function I(B){var D=this;if((B=t.extend({},Hn,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var G=new Ra(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies);if(j.call(this,G,B),this._interactive=B.interactive,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new gn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},vn,B.locale),this._clickTolerance=B.clickTolerance,this._requestManager=new t.RequestManager(B.transformRequest,B.accessToken),typeof B.container=="string"){if(this._container=t.window.document.getElementById(B.container),!this._container)throw new Error("Container '"+B.container+"' not found.")}else{if(!(B.container instanceof Wn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return D._update(!1)}),this.on("moveend",function(){return D._update(!1)}),this.on("zoom",function(){return D._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Be(this,B),this._hash=B.hash&&new ru(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,t.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new on({customAttribution:B.customAttribution})),this.addControl(new $e,B.logoPosition),this.on("style.load",function(){D.transform.unmodified&&D.jumpTo(D.style.stylesheet)}),this.on("data",function(Q){D._update(Q.dataType==="style"),D.fire(new t.Event(Q.dataType+"data",Q))}),this.on("dataloading",function(Q){D.fire(new t.Event(Q.dataType+"dataloading",Q))})}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return I.prototype._getMapId=function(){return this._mapId},I.prototype.addControl=function(B,D){if(D===void 0&&(D=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var G=B.onAdd(this);this._controls.push(B);var Q=this._controlPositions[D];return D.indexOf("bottom")!==-1?Q.insertBefore(G,Q.firstChild):Q.appendChild(G),this},I.prototype.removeControl=function(B){if(!B||!B.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var D=this._controls.indexOf(B);return D>-1&&this._controls.splice(D,1),B.onRemove(this),this},I.prototype.hasControl=function(B){return this._controls.indexOf(B)>-1},I.prototype.resize=function(B){var D=this._containerDimensions(),G=D[0],Q=D[1];this._resizeCanvas(G,Q),this.transform.resize(G,Q),this.painter.resize(G,Q);var ut=!this._moving;return ut&&(this.stop(),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B))),this.fire(new t.Event("resize",B)),ut&&this.fire(new t.Event("moveend",B)),this},I.prototype.getBounds=function(){return this.transform.getBounds()},I.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},I.prototype.setMaxBounds=function(B){return this.transform.setMaxBounds(t.LngLatBounds.convert(B)),this._update()},I.prototype.setMinZoom=function(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},I.prototype.getMinZoom=function(){return this.transform.minZoom},I.prototype.setMaxZoom=function(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")},I.prototype.getMaxZoom=function(){return this.transform.maxZoom},I.prototype.setMinPitch=function(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},I.prototype.getMinPitch=function(){return this.transform.minPitch},I.prototype.setMaxPitch=function(B){if((B=B==null?60:B)>60)throw new Error("maxPitch must be less than or equal to 60");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")},I.prototype.getMaxPitch=function(){return this.transform.maxPitch},I.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},I.prototype.setRenderWorldCopies=function(B){return this.transform.renderWorldCopies=B,this._update()},I.prototype.project=function(B){return this.transform.locationPoint(t.LngLat.convert(B))},I.prototype.unproject=function(B){return this.transform.pointLocation(t.Point.convert(B))},I.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},I.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},I.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},I.prototype._createDelegatedListener=function(B,D,G){var Q,ut=this;if(B==="mouseenter"||B==="mouseover"){var wt=!1;return{layer:D,listener:G,delegates:{mousemove:function(Yt){var qt=ut.getLayer(D)?ut.queryRenderedFeatures(Yt.point,{layers:[D]}):[];qt.length?wt||(wt=!0,G.call(ut,new Wo(B,ut,Yt.originalEvent,{features:qt}))):wt=!1},mouseout:function(){wt=!1}}}}if(B==="mouseleave"||B==="mouseout"){var It=!1;return{layer:D,listener:G,delegates:{mousemove:function(Yt){(ut.getLayer(D)?ut.queryRenderedFeatures(Yt.point,{layers:[D]}):[]).length?It=!0:It&&(It=!1,G.call(ut,new Wo(B,ut,Yt.originalEvent)))},mouseout:function(Yt){It&&(It=!1,G.call(ut,new Wo(B,ut,Yt.originalEvent)))}}}}return{layer:D,listener:G,delegates:(Q={},Q[B]=function(kt){var Yt=ut.getLayer(D)?ut.queryRenderedFeatures(kt.point,{layers:[D]}):[];Yt.length&&(kt.features=Yt,G.call(ut,kt),delete kt.features)},Q)}},I.prototype.on=function(B,D,G){if(G===void 0)return j.prototype.on.call(this,B,D);var Q=this._createDelegatedListener(B,D,G);for(var ut in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(Q),Q.delegates)this.on(ut,Q.delegates[ut]);return this},I.prototype.once=function(B,D,G){if(G===void 0)return j.prototype.once.call(this,B,D);var Q=this._createDelegatedListener(B,D,G);for(var ut in Q.delegates)this.once(ut,Q.delegates[ut]);return this},I.prototype.off=function(B,D,G){var Q=this;return G===void 0?j.prototype.off.call(this,B,D):(this._delegatedListeners&&this._delegatedListeners[B]&&function(ut){for(var wt=ut[B],It=0;It<wt.length;It++){var kt=wt[It];if(kt.layer===D&&kt.listener===G){for(var Yt in kt.delegates)Q.off(Yt,kt.delegates[Yt]);return wt.splice(It,1),Q}}}(this._delegatedListeners),this)},I.prototype.queryRenderedFeatures=function(B,D){if(!this.style)return[];var G;if(D!==void 0||B===void 0||B instanceof t.Point||Array.isArray(B)||(D=B,B=void 0),D=D||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof B[0]=="number")G=[t.Point.convert(B)];else{var Q=t.Point.convert(B[0]),ut=t.Point.convert(B[1]);G=[Q,new t.Point(ut.x,Q.y),ut,new t.Point(Q.x,ut.y),Q]}return this.style.queryRenderedFeatures(G,D,this.transform)},I.prototype.querySourceFeatures=function(B,D){return this.style.querySourceFeatures(B,D)},I.prototype.setStyle=function(B,D){return(D=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},D)).diff!==!1&&D.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,D),this):(this._localIdeographFontFamily=D.localIdeographFontFamily,this._updateStyle(B,D))},I.prototype._getUIString=function(B){var D=this._locale[B];if(D==null)throw new Error("Missing UI string '"+B+"'");return D},I.prototype._updateStyle=function(B,D){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new mo(this,D||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)},I.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new mo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},I.prototype._diffStyle=function(B,D){var G=this;if(typeof B=="string"){var Q=this._requestManager.normalizeStyleURL(B),ut=this._requestManager.transformRequest(Q,t.ResourceType.Style);t.getJSON(ut,function(wt,It){wt?G.fire(new t.ErrorEvent(wt)):It&&G._updateDiff(It,D)})}else typeof B=="object"&&this._updateDiff(B,D)},I.prototype._updateDiff=function(B,D){try{this.style.setState(B)&&this._update(!0)}catch(G){t.warnOnce("Unable to perform style diff: "+(G.message||G.error||G)+".  Rebuilding the style from scratch."),this._updateStyle(B,D)}},I.prototype.getStyle=function(){if(this.style)return this.style.serialize()},I.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},I.prototype.addSource=function(B,D){return this._lazyInitEmptyStyle(),this.style.addSource(B,D),this._update(!0)},I.prototype.isSourceLoaded=function(B){var D=this.style&&this.style.sourceCaches[B];if(D!==void 0)return D.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+B+"'")))},I.prototype.areTilesLoaded=function(){var B=this.style&&this.style.sourceCaches;for(var D in B){var G=B[D]._tiles;for(var Q in G){var ut=G[Q];if(ut.state!=="loaded"&&ut.state!=="errored")return!1}}return!0},I.prototype.addSourceType=function(B,D,G){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,D,G)},I.prototype.removeSource=function(B){return this.style.removeSource(B),this._update(!0)},I.prototype.getSource=function(B){return this.style.getSource(B)},I.prototype.addImage=function(B,D,G){G===void 0&&(G={});var Q=G.pixelRatio;Q===void 0&&(Q=1);var ut=G.sdf;ut===void 0&&(ut=!1);var wt=G.stretchX,It=G.stretchY,kt=G.content;if(this._lazyInitEmptyStyle(),D instanceof Xn||Jn&&D instanceof Jn){var Yt=t.browser.getImageData(D);this.style.addImage(B,{data:new t.RGBAImage({width:Yt.width,height:Yt.height},Yt.data),pixelRatio:Q,stretchX:wt,stretchY:It,content:kt,sdf:ut,version:0})}else{if(D.width===void 0||D.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=D;this.style.addImage(B,{data:new t.RGBAImage({width:D.width,height:D.height},new Uint8Array(D.data)),pixelRatio:Q,stretchX:wt,stretchY:It,content:kt,sdf:ut,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,B)}},I.prototype.updateImage=function(B,D){var G=this.style.getImage(B);if(!G)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Q=D instanceof Xn||Jn&&D instanceof Jn?t.browser.getImageData(D):D,ut=Q.width,wt=Q.height,It=Q.data;return ut===void 0||wt===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ut!==G.data.width||wt!==G.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(G.data.replace(It,!(D instanceof Xn||Jn&&D instanceof Jn)),void this.style.updateImage(B,G))},I.prototype.hasImage=function(B){return B?!!this.style.getImage(B):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},I.prototype.removeImage=function(B){this.style.removeImage(B)},I.prototype.loadImage=function(B,D){t.getImage(this._requestManager.transformRequest(B,t.ResourceType.Image),D)},I.prototype.listImages=function(){return this.style.listImages()},I.prototype.addLayer=function(B,D){return this._lazyInitEmptyStyle(),this.style.addLayer(B,D),this._update(!0)},I.prototype.moveLayer=function(B,D){return this.style.moveLayer(B,D),this._update(!0)},I.prototype.removeLayer=function(B){return this.style.removeLayer(B),this._update(!0)},I.prototype.getLayer=function(B){return this.style.getLayer(B)},I.prototype.setLayerZoomRange=function(B,D,G){return this.style.setLayerZoomRange(B,D,G),this._update(!0)},I.prototype.setFilter=function(B,D,G){return G===void 0&&(G={}),this.style.setFilter(B,D,G),this._update(!0)},I.prototype.getFilter=function(B){return this.style.getFilter(B)},I.prototype.setPaintProperty=function(B,D,G,Q){return Q===void 0&&(Q={}),this.style.setPaintProperty(B,D,G,Q),this._update(!0)},I.prototype.getPaintProperty=function(B,D){return this.style.getPaintProperty(B,D)},I.prototype.setLayoutProperty=function(B,D,G,Q){return Q===void 0&&(Q={}),this.style.setLayoutProperty(B,D,G,Q),this._update(!0)},I.prototype.getLayoutProperty=function(B,D){return this.style.getLayoutProperty(B,D)},I.prototype.setLight=function(B,D){return D===void 0&&(D={}),this._lazyInitEmptyStyle(),this.style.setLight(B,D),this._update(!0)},I.prototype.getLight=function(){return this.style.getLight()},I.prototype.setFeatureState=function(B,D){return this.style.setFeatureState(B,D),this._update()},I.prototype.removeFeatureState=function(B,D){return this.style.removeFeatureState(B,D),this._update()},I.prototype.getFeatureState=function(B){return this.style.getFeatureState(B)},I.prototype.getContainer=function(){return this._container},I.prototype.getCanvasContainer=function(){return this._canvasContainer},I.prototype.getCanvas=function(){return this._canvas},I.prototype._containerDimensions=function(){var B=0,D=0;return this._container&&(B=this._container.clientWidth||400,D=this._container.clientHeight||300),[B,D]},I.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},I.prototype._setupContainer=function(){var B=this._container;B.classList.add("mapboxgl-map"),(this._missingCSSCanary=s.create("div","mapboxgl-canary",B)).style.visibility="hidden",this._detectMissingCSS();var D=this._canvasContainer=s.create("div","mapboxgl-canvas-container",B);this._interactive&&D.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",D),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var G=this._containerDimensions();this._resizeCanvas(G[0],G[1]);var Q=this._controlContainer=s.create("div","mapboxgl-control-container",B),ut=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(wt){ut[wt]=s.create("div","mapboxgl-ctrl-"+wt,Q)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},I.prototype._resizeCanvas=function(B,D){var G=t.browser.devicePixelRatio||1;this._canvas.width=G*B,this._canvas.height=G*D,this._canvas.style.width=B+"px",this._canvas.style.height=D+"px"},I.prototype._setupPainter=function(){var B=t.extend({},u.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),D=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);D?(this.painter=new ao(D,this.transform),t.webpSupported.testSupport(D)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},I.prototype._contextLost=function(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:B}))},I.prototype._contextRestored=function(B){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:B}))},I.prototype._onMapScroll=function(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},I.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},I.prototype._update=function(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this},I.prototype._requestRenderFrame=function(B){return this._update(),this._renderTaskQueue.add(B)},I.prototype._cancelRenderFrame=function(B){this._renderTaskQueue.remove(B)},I.prototype._render=function(B){var D,G=this,Q=0,ut=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(D=ut.createQueryEXT(),ut.beginQueryEXT(ut.TIME_ELAPSED_EXT,D),Q=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),!this._removed){var wt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var It=this.transform.zoom,kt=t.browser.now();this.style.zoomHistory.update(It,kt);var Yt=new t.EvaluationParameters(It,{now:kt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qt=Yt.crossFadingFactor();qt===1&&qt===this._crossFadingFactor||(wt=!0,this._crossFadingFactor=qt),this.style.update(Yt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||wt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ce=t.browser.now()-Q;ut.endQueryEXT(ut.TIME_ELAPSED_EXT,D),setTimeout(function(){var Ce=ut.getQueryObjectEXT(D,ut.QUERY_RESULT_EXT)/1e6;ut.deleteQueryEXT(D),G.fire(new t.Event("gpu-timing-frame",{cpuTime:ce,gpuTime:Ce}))},50)}if(this.listens("gpu-timing-layer")){var ye=this.painter.collectGpuTimers();setTimeout(function(){var Ce=G.painter.queryGpuTimers(ye);G.fire(new t.Event("gpu-timing-layer",{layerTimes:Ce}))},50)}var Le=this._sourcesDirty||this._styleDirty||this._placementDirty;return Le||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||Le||(this._fullyLoaded=!0),this}},I.prototype.remove=function(){this._hash&&this._hash.remove();for(var B=0,D=this._controls;B<D.length;B+=1)D[B].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var G=this.painter.context.gl.getExtension("WEBGL_lose_context");G&&G.loseContext(),xr(this._canvasContainer),xr(this._controlContainer),xr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},I.prototype.triggerRepaint=function(){var B=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(D){B._frame=null,B._render(D)}))},I.prototype._onWindowOnline=function(){this._update()},I.prototype._onWindowResize=function(B){this._trackResize&&this.resize({originalEvent:B})._update()},w.showTileBoundaries.get=function(){return!!this._showTileBoundaries},w.showTileBoundaries.set=function(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())},w.showPadding.get=function(){return!!this._showPadding},w.showPadding.set=function(B){this._showPadding!==B&&(this._showPadding=B,this._update())},w.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},w.showCollisionBoxes.set=function(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())},w.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},w.showOverdrawInspector.set=function(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())},w.repaint.get=function(){return!!this._repaint},w.repaint.set=function(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())},w.vertices.get=function(){return!!this._vertices},w.vertices.set=function(B){this._vertices=B,this._update()},I.prototype._setCacheLimits=function(B,D){t.setCacheLimits(B,D)},w.version.get=function(){return t.version},Object.defineProperties(I.prototype,w),I}(Ze);function xr(j){j.parentNode&&j.parentNode.removeChild(j)}var Vr={showCompass:!0,showZoom:!0,visualizePitch:!1},gi=function(I){var w=this;this.options=t.extend({},Vr,I),this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return w._map.zoomIn({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return w._map.zoomOut({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){w.options.visualizePitch?w._map.resetNorthPitch({},{originalEvent:B}):w._map.resetNorth({},{originalEvent:B})}),this._compassIcon=s.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};gi.prototype._updateZoomButtons=function(){var j=this._map.getZoom(),I=j===this._map.getMaxZoom(),w=j===this._map.getMinZoom();this._zoomInButton.disabled=I,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",I.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},gi.prototype._rotateCompassArrow=function(){var j=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=j},gi.prototype.onAdd=function(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fr(this._map,this._compass,this.options.visualizePitch)),this._container},gi.prototype.onRemove=function(){s.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},gi.prototype._createButton=function(j,I){var w=s.create("button",j,this._container);return w.type="button",w.addEventListener("click",I),w},gi.prototype._setButtonTitle=function(j,I){var w=this._map._getUIString("NavigationControl."+I);j.title=w,j.setAttribute("aria-label",w)};var Fr=function(I,w,B){B===void 0&&(B=!1),this._clickTolerance=10,this.element=w,this.mouseRotate=new Du({clickTolerance:I.dragRotate._mouseRotate._clickTolerance}),this.map=I,B&&(this.mousePitch=new ju({clickTolerance:I.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),s.addEventListener(w,"mousedown",this.mousedown),s.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),s.addEventListener(w,"touchmove",this.touchmove),s.addEventListener(w,"touchend",this.touchend),s.addEventListener(w,"touchcancel",this.reset)};function ai(j,I,w){if(j=new t.LngLat(j.lng,j.lat),I){var B=new t.LngLat(j.lng-360,j.lat),D=new t.LngLat(j.lng+360,j.lat),G=w.locationPoint(j).distSqr(I);w.locationPoint(B).distSqr(I)<G?j=B:w.locationPoint(D).distSqr(I)<G&&(j=D)}for(;Math.abs(j.lng-w.center.lng)>180;){var Q=w.locationPoint(j);if(Q.x>=0&&Q.y>=0&&Q.x<=w.width&&Q.y<=w.height)break;j.lng>w.center.lng?j.lng-=360:j.lng+=360}return j}Fr.prototype.down=function(j,I){this.mouseRotate.mousedown(j,I),this.mousePitch&&this.mousePitch.mousedown(j,I),s.disableDrag()},Fr.prototype.move=function(j,I){var w=this.map,B=this.mouseRotate.mousemoveWindow(j,I);if(B&&B.bearingDelta&&w.setBearing(w.getBearing()+B.bearingDelta),this.mousePitch){var D=this.mousePitch.mousemoveWindow(j,I);D&&D.pitchDelta&&w.setPitch(w.getPitch()+D.pitchDelta)}},Fr.prototype.off=function(){var j=this.element;s.removeEventListener(j,"mousedown",this.mousedown),s.removeEventListener(j,"touchstart",this.touchstart,{passive:!1}),s.removeEventListener(j,"touchmove",this.touchmove),s.removeEventListener(j,"touchend",this.touchend),s.removeEventListener(j,"touchcancel",this.reset),this.offTemp()},Fr.prototype.offTemp=function(){s.enableDrag(),s.removeEventListener(t.window,"mousemove",this.mousemove),s.removeEventListener(t.window,"mouseup",this.mouseup)},Fr.prototype.mousedown=function(j){this.down(t.extend({},j,{ctrlKey:!0,preventDefault:function(){return j.preventDefault()}}),s.mousePos(this.element,j)),s.addEventListener(t.window,"mousemove",this.mousemove),s.addEventListener(t.window,"mouseup",this.mouseup)},Fr.prototype.mousemove=function(j){this.move(j,s.mousePos(this.element,j))},Fr.prototype.mouseup=function(j){this.mouseRotate.mouseupWindow(j),this.mousePitch&&this.mousePitch.mouseupWindow(j),this.offTemp()},Fr.prototype.touchstart=function(j){j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return j.preventDefault()}},this._startPos))},Fr.prototype.touchmove=function(j){j.targetTouches.length!==1?this.reset():(this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.move({preventDefault:function(){return j.preventDefault()}},this._lastPos))},Fr.prototype.touchend=function(j){j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Fr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var yi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ui(j,I,w){var B=j.classList;for(var D in yi)B.remove("mapboxgl-"+w+"-anchor-"+D);B.add("mapboxgl-"+w+"-anchor-"+I)}var Pi,pa=function(j){function I(w,B){if(j.call(this),(w instanceof t.window.HTMLElement||B)&&(w=t.extend({element:w},B)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=w&&w.anchor||"center",this._color=w&&w.color||"#3FB1CE",this._scale=w&&w.scale||1,this._draggable=w&&w.draggable||!1,this._clickTolerance=w&&w.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=w&&w.rotation||0,this._rotationAlignment=w&&w.rotationAlignment||"auto",this._pitchAlignment=w&&w.pitchAlignment&&w.pitchAlignment!=="auto"?w.pitchAlignment:this._rotationAlignment,w&&w.element)this._element=w.element,this._offset=t.Point.convert(w&&w.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div"),this._element.setAttribute("aria-label","Map marker");var D=s.createNS("http://www.w3.org/2000/svg","svg");D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height","41px"),D.setAttributeNS(null,"width","27px"),D.setAttributeNS(null,"viewBox","0 0 27 41");var G=s.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"stroke-width","1"),G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"fill-rule","evenodd");var Q=s.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill-rule","nonzero");var ut=s.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ut.setAttributeNS(null,"fill","#000000");for(var wt=0,It=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];wt<It.length;wt+=1){var kt=It[wt],Yt=s.createNS("http://www.w3.org/2000/svg","ellipse");Yt.setAttributeNS(null,"opacity","0.04"),Yt.setAttributeNS(null,"cx","10.5"),Yt.setAttributeNS(null,"cy","5.80029008"),Yt.setAttributeNS(null,"rx",kt.rx),Yt.setAttributeNS(null,"ry",kt.ry),ut.appendChild(Yt)}var qt=s.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"fill",this._color);var ce=s.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qt.appendChild(ce);var ye=s.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");var Le=s.createNS("http://www.w3.org/2000/svg","path");Le.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(Le);var Ce=s.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ce.setAttributeNS(null,"fill","#FFFFFF");var ke=s.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");var nn=s.createNS("http://www.w3.org/2000/svg","circle");nn.setAttributeNS(null,"fill","#000000"),nn.setAttributeNS(null,"opacity","0.25"),nn.setAttributeNS(null,"cx","5.5"),nn.setAttributeNS(null,"cy","5.5"),nn.setAttributeNS(null,"r","5.4999962");var ln=s.createNS("http://www.w3.org/2000/svg","circle");ln.setAttributeNS(null,"fill","#FFFFFF"),ln.setAttributeNS(null,"cx","5.5"),ln.setAttributeNS(null,"cy","5.5"),ln.setAttributeNS(null,"r","5.4999962"),ke.appendChild(nn),ke.appendChild(ln),Q.appendChild(ut),Q.appendChild(qt),Q.appendChild(ye),Q.appendChild(Ce),Q.appendChild(ke),D.appendChild(Q),D.setAttributeNS(null,"height",41*this._scale+"px"),D.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(D),this._offset=t.Point.convert(w&&w.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Qn){Qn.preventDefault()}),this._element.addEventListener("mousedown",function(Qn){Qn.preventDefault()}),Ui(this._element,this._anchor,"marker"),this._popup=null}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this.remove(),this._map=w,w.getCanvasContainer().appendChild(this._element),w.on("move",this._update),w.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},I.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},I.prototype.getElement=function(){return this._element},I.prototype.setPopup=function(w){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),w){if(!("offset"in w.options)){var B=Math.sqrt(Math.pow(13.5,2)/2);w.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[B,-1*(24.6+B)],"bottom-right":[-B,-1*(24.6+B)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=w,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},I.prototype._onKeyPress=function(w){var B=w.code,D=w.charCode||w.keyCode;B!=="Space"&&B!=="Enter"&&D!==32&&D!==13||this.togglePopup()},I.prototype._onMapClick=function(w){var B=w.originalEvent.target,D=this._element;this._popup&&(B===D||D.contains(B))&&this.togglePopup()},I.prototype.getPopup=function(){return this._popup},I.prototype.togglePopup=function(){var w=this._popup;return w?(w.isOpen()?w.remove():w.addTo(this._map),this):this},I.prototype._update=function(w){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ai(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var B="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?B="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(B="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D="rotateX("+this._map.getPitch()+"deg)"),w&&w.type!=="moveend"||(this._pos=this._pos.round()),s.setTransform(this._element,yi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+D+" "+B)}},I.prototype.getOffset=function(){return this._offset},I.prototype.setOffset=function(w){return this._offset=t.Point.convert(w),this._update(),this},I.prototype._onMove=function(w){if(!this._isDragging){var B=this._clickTolerance||this._map._clickTolerance;this._isDragging=w.point.dist(this._pointerdownPos)>=B}this._isDragging&&(this._pos=w.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},I.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},I.prototype._addDragHandler=function(w){this._element.contains(w.originalEvent.target)&&(w.preventDefault(),this._positionDelta=w.point.sub(this._pos).add(this._offset),this._pointerdownPos=w.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},I.prototype.setDraggable=function(w){return this._draggable=!!w,this._map&&(w?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},I.prototype.isDraggable=function(){return this._draggable},I.prototype.setRotation=function(w){return this._rotation=w||0,this._update(),this},I.prototype.getRotation=function(){return this._rotation},I.prototype.setRotationAlignment=function(w){return this._rotationAlignment=w||"auto",this._update(),this},I.prototype.getRotationAlignment=function(){return this._rotationAlignment},I.prototype.setPitchAlignment=function(w){return this._pitchAlignment=w&&w!=="auto"?w:this._rotationAlignment,this._update(),this},I.prototype.getPitchAlignment=function(){return this._pitchAlignment},I}(t.Evented),ta={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},oa=0,si=!1,ma=function(j){function I(w){j.call(this),this.options=t.extend({},ta,w),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){var B;return this._map=w,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),B=this._setupUI,Pi!==void 0?B(Pi):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(D){B(Pi=D.state!=="denied")}):B(Pi=!!t.window.navigator.geolocation),this._container},I.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),s.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,oa=0,si=!1},I.prototype._isOutOfMapMaxBounds=function(w){var B=this._map.getMaxBounds(),D=w.coords;return B&&(D.longitude<B.getWest()||D.longitude>B.getEast()||D.latitude<B.getSouth()||D.latitude>B.getNorth())},I.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},I.prototype._onSuccess=function(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(w),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(w),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",w)),this._finish()}},I.prototype._updateCamera=function(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude),D=w.coords.accuracy,G=this._map.getBearing(),Q=t.extend({bearing:G},this.options.fitBoundsOptions);this._map.fitBounds(B.toBounds(D),Q,{geolocateSource:!0})},I.prototype._updateMarker=function(w){if(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(B).addTo(this._map),this._userLocationDotMarker.setLngLat(B).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},I.prototype._updateCircleRadius=function(){var w=this._map._container.clientHeight/2,B=this._map.unproject([0,w]),D=this._map.unproject([1,w]),G=B.distanceTo(D),Q=Math.ceil(2*this._accuracy/G);this._circleElement.style.width=Q+"px",this._circleElement.style.height=Q+"px"},I.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},I.prototype._onError=function(w){if(this._map){if(this.options.trackUserLocation)if(w.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var B=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=B,this._geolocateButton.setAttribute("aria-label",B),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(w.code===3&&si)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",w)),this._finish()}},I.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},I.prototype._setupUI=function(w){var B=this;if(this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this._geolocateButton=s.create("button","mapboxgl-ctrl-geolocate",this._container),s.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",w===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var D=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=D,this._geolocateButton.setAttribute("aria-label",D)}else{var G=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pa(this._dotElement),this._circleElement=s.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Q){Q.geolocateSource||B._watchState!=="ACTIVE_LOCK"||Q.originalEvent&&Q.originalEvent.type==="resize"||(B._watchState="BACKGROUND",B._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),B._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),B.fire(new t.Event("trackuserlocationend")))})},I.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":oa--,si=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++oa>1?(w={maximumAge:6e5,timeout:0},si=!0):(w=this.options.positionOptions,si=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},I.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},I}(t.Evented),to={maxWidth:100,unit:"metric"},Ha=function(I){this.options=t.extend({},to,I),t.bindAll(["_onMove","setUnit"],this)};function _i(j,I,w){var B=w&&w.maxWidth||100,D=j._container.clientHeight/2,G=j.unproject([0,D]),Q=j.unproject([B,D]),ut=G.distanceTo(Q);if(w&&w.unit==="imperial"){var wt=3.2808*ut;wt>5280?Fa(I,B,wt/5280,j._getUIString("ScaleControl.Miles")):Fa(I,B,wt,j._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?Fa(I,B,ut/1852,j._getUIString("ScaleControl.NauticalMiles")):ut>=1e3?Fa(I,B,ut/1e3,j._getUIString("ScaleControl.Kilometers")):Fa(I,B,ut,j._getUIString("ScaleControl.Meters"))}function Fa(j,I,w,B){var D,G,Q,ut=(D=w,(G=Math.pow(10,(""+Math.floor(D)).length-1))*(Q=(Q=D/G)>=10?10:Q>=5?5:Q>=3?3:Q>=2?2:Q>=1?1:function(wt){var It=Math.pow(10,Math.ceil(-Math.log(wt)/Math.LN10));return Math.round(wt*It)/It}(Q)));j.style.width=I*(ut/w)+"px",j.innerHTML=ut+"&nbsp;"+B}Ha.prototype.getDefaultPosition=function(){return"bottom-left"},Ha.prototype._onMove=function(){_i(this._map,this._container,this.options)},Ha.prototype.onAdd=function(j){return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ha.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ha.prototype.setUnit=function(j){this.options.unit=j,_i(this._map,this._container,this.options)};var Za=function(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof t.window.HTMLElement?this._container=I.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Za.prototype.onAdd=function(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Za.prototype.onRemove=function(){s.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Za.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Za.prototype._setupUI=function(){var j=this._fullscreenButton=s.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s.create("span","mapboxgl-ctrl-icon",j).setAttribute("aria-hidden",!0),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Za.prototype._updateTitle=function(){var j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j},Za.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Za.prototype._isFullscreen=function(){return this._fullscreen},Za.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Za.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Os={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ms=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ws=function(j){function I(w){j.call(this),this.options=t.extend(Object.create(Os),w),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},I.prototype.isOpen=function(){return!!this._map},I.prototype.remove=function(){return this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},I.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},I.prototype.getElement=function(){return this._container},I.prototype.setText=function(w){return this.setDOMContent(t.window.document.createTextNode(w))},I.prototype.setHTML=function(w){var B,D=t.window.document.createDocumentFragment(),G=t.window.document.createElement("body");for(G.innerHTML=w;B=G.firstChild;)D.appendChild(B);return this.setDOMContent(D)},I.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},I.prototype.setMaxWidth=function(w){return this.options.maxWidth=w,this._update(),this},I.prototype.setDOMContent=function(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=s.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this},I.prototype.addClassName=function(w){this._container&&this._container.classList.add(w)},I.prototype.removeClassName=function(w){this._container&&this._container.classList.remove(w)},I.prototype.setOffset=function(w){return this.options.offset=w,this._update(),this},I.prototype.toggleClassName=function(w){if(this._container)return this._container.classList.toggle(w)},I.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},I.prototype._onMouseUp=function(w){this._update(w.point)},I.prototype._onMouseMove=function(w){this._update(w.point)},I.prototype._onDrag=function(w){this._update(w.point)},I.prototype._update=function(w){var B=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Yt){return B._container.classList.add(Yt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ai(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||w)){var D=this._pos=this._trackPointer&&w?w:this._map.project(this._lngLat),G=this.options.anchor,Q=function Yt(qt){if(qt){if(typeof qt=="number"){var ce=Math.round(Math.sqrt(.5*Math.pow(qt,2)));return{center:new t.Point(0,0),top:new t.Point(0,qt),"top-left":new t.Point(ce,ce),"top-right":new t.Point(-ce,ce),bottom:new t.Point(0,-qt),"bottom-left":new t.Point(ce,-ce),"bottom-right":new t.Point(-ce,-ce),left:new t.Point(qt,0),right:new t.Point(-qt,0)}}if(qt instanceof t.Point||Array.isArray(qt)){var ye=t.Point.convert(qt);return{center:ye,top:ye,"top-left":ye,"top-right":ye,bottom:ye,"bottom-left":ye,"bottom-right":ye,left:ye,right:ye}}return{center:t.Point.convert(qt.center||[0,0]),top:t.Point.convert(qt.top||[0,0]),"top-left":t.Point.convert(qt["top-left"]||[0,0]),"top-right":t.Point.convert(qt["top-right"]||[0,0]),bottom:t.Point.convert(qt.bottom||[0,0]),"bottom-left":t.Point.convert(qt["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(qt["bottom-right"]||[0,0]),left:t.Point.convert(qt.left||[0,0]),right:t.Point.convert(qt.right||[0,0])}}return Yt(new t.Point(0,0))}(this.options.offset);if(!G){var ut,wt=this._container.offsetWidth,It=this._container.offsetHeight;ut=D.y+Q.bottom.y<It?["top"]:D.y>this._map.transform.height-It?["bottom"]:[],D.x<wt/2?ut.push("left"):D.x>this._map.transform.width-wt/2&&ut.push("right"),G=ut.length===0?"bottom":ut.join("-")}var kt=D.add(Q[G]).round();s.setTransform(this._container,yi[G]+" translate("+kt.x+"px,"+kt.y+"px)"),Ui(this._container,G,"popup")}},I.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var w=this._container.querySelector(Ms);w&&w.focus()}},I.prototype._onClose=function(){this.remove()},I}(t.Evented),au={version:t.version,supported:u,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:fr,NavigationControl:gi,GeolocateControl:ma,AttributionControl:on,ScaleControl:Ha,FullscreenControl:Za,Popup:ws,Marker:pa,Style:mo,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){hn().acquire(_n)},clearPrewarmedResources:function(){var I=Or;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(_n),Or=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(j){t.config.ACCESS_TOKEN=j},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(j){t.config.API_URL=j},get workerCount(){return Cn.workerCount},set workerCount(j){Cn.workerCount=j},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(j){t.config.MAX_PARALLEL_IMAGE_REQUESTS=j},clearStorage:function(I){t.clearTileCache(I)},workerUrl:""};return au}),T})},"4cb6":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.multiBindToService=dt.getServiceIdentifierAsString=dt.typeConstraint=dt.namedConstraint=dt.taggedConstraint=dt.traverseAncerstors=dt.decorate=dt.id=dt.MetadataReader=dt.postConstruct=dt.targetName=dt.multiInject=dt.unmanaged=dt.optional=dt.LazyServiceIdentifer=dt.inject=dt.named=dt.tagged=dt.injectable=dt.ContainerModule=dt.AsyncContainerModule=dt.TargetTypeEnum=dt.BindingTypeEnum=dt.BindingScopeEnum=dt.Container=dt.METADATA_KEY=void 0;var U=L("xfSm");dt.METADATA_KEY=U;var E=L("9Fde");Object.defineProperty(dt,"Container",{enumerable:!0,get:function(){return E.Container}});var T=L("FV85");Object.defineProperty(dt,"BindingScopeEnum",{enumerable:!0,get:function(){return T.BindingScopeEnum}}),Object.defineProperty(dt,"BindingTypeEnum",{enumerable:!0,get:function(){return T.BindingTypeEnum}}),Object.defineProperty(dt,"TargetTypeEnum",{enumerable:!0,get:function(){return T.TargetTypeEnum}});var e=L("dxzI");Object.defineProperty(dt,"AsyncContainerModule",{enumerable:!0,get:function(){return e.AsyncContainerModule}}),Object.defineProperty(dt,"ContainerModule",{enumerable:!0,get:function(){return e.ContainerModule}});var t=L("cZ5Q");Object.defineProperty(dt,"injectable",{enumerable:!0,get:function(){return t.injectable}});var u=L("0gSV");Object.defineProperty(dt,"tagged",{enumerable:!0,get:function(){return u.tagged}});var s=L("ZzCi");Object.defineProperty(dt,"named",{enumerable:!0,get:function(){return s.named}});var h=L("Yk9n");Object.defineProperty(dt,"inject",{enumerable:!0,get:function(){return h.inject}}),Object.defineProperty(dt,"LazyServiceIdentifer",{enumerable:!0,get:function(){return h.LazyServiceIdentifer}});var r=L("jYx5");Object.defineProperty(dt,"optional",{enumerable:!0,get:function(){return r.optional}});var c=L("n2J3");Object.defineProperty(dt,"unmanaged",{enumerable:!0,get:function(){return c.unmanaged}});var n=L("jIg/");Object.defineProperty(dt,"multiInject",{enumerable:!0,get:function(){return n.multiInject}});var i=L("oaX6");Object.defineProperty(dt,"targetName",{enumerable:!0,get:function(){return i.targetName}});var a=L("Sk89");Object.defineProperty(dt,"postConstruct",{enumerable:!0,get:function(){return a.postConstruct}});var o=L("wnjb");Object.defineProperty(dt,"MetadataReader",{enumerable:!0,get:function(){return o.MetadataReader}});var l=L("d9O0");Object.defineProperty(dt,"id",{enumerable:!0,get:function(){return l.id}});var f=L("Ztfv");Object.defineProperty(dt,"decorate",{enumerable:!0,get:function(){return f.decorate}});var v=L("RR/i");Object.defineProperty(dt,"traverseAncerstors",{enumerable:!0,get:function(){return v.traverseAncerstors}}),Object.defineProperty(dt,"taggedConstraint",{enumerable:!0,get:function(){return v.taggedConstraint}}),Object.defineProperty(dt,"namedConstraint",{enumerable:!0,get:function(){return v.namedConstraint}}),Object.defineProperty(dt,"typeConstraint",{enumerable:!0,get:function(){return v.typeConstraint}});var b=L("ujMp");Object.defineProperty(dt,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var g=L("78VC");Object.defineProperty(dt,"multiBindToService",{enumerable:!0,get:function(){return g.multiBindToService}})},"4kj+":function(Se,dt){},"4qC0":function(Se,dt,L){var U=L("NykK"),E=L("Z0cm"),T=L("ExA7"),e="[object String]";function t(u){return typeof u=="string"||!E(u)&&T(u)&&U(u)==e}Se.exports=t},"5Tg0":function(Se,dt,L){(function(U){var E=L("Kz5y"),T=dt&&!dt.nodeType&&dt,e=T&&typeof U=="object"&&U&&!U.nodeType&&U,t=e&&e.exports===T,u=t?E.Buffer:void 0,s=u?u.allocUnsafe:void 0;function h(r,c){if(c)return r.slice();var n=r.length,i=s?s(n):new r.constructor(n);return r.copy(i),i}U.exports=h}).call(this,L("hOG+")(Se))},"5gLl":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return V});var U=L("lSNA"),E=L.n(U),T=L("LvWW"),e=L.n(T),t=L("0wsv");function u(k){if(!k)throw new Error("coord is required");if(!Array.isArray(k)){if(k.type==="Feature"&&k.geometry!==null&&k.geometry.type==="Point")return k.geometry.coordinates;if(k.type==="Point")return k.coordinates}if(Array.isArray(k)&&k.length>=2&&!Array.isArray(k[0])&&!Array.isArray(k[1]))return k;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function s(k){if(Array.isArray(k))return k;if(k.type==="Feature"){if(k.geometry!==null)return k.geometry.coordinates}else if(k.coordinates)return k.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function h(k){if(k.length>1&&Object(t.c)(k[0])&&Object(t.c)(k[1]))return!0;if(Array.isArray(k[0])&&k[0].length)return h(k[0]);throw new Error("coordinates must only contain numbers")}function r(k,Z,X){if(!Z||!X)throw new Error("type and name required");if(!k||k.type!==Z)throw new Error("Invalid input to "+X+": must be a "+Z+", given "+k.type)}function c(k,Z,X){if(!k)throw new Error("No feature passed");if(!X)throw new Error(".featureOf() requires a name");if(!k||k.type!=="Feature"||!k.geometry)throw new Error("Invalid input to "+X+", Feature with geometry required");if(!k.geometry||k.geometry.type!==Z)throw new Error("Invalid input to "+X+": must be a "+Z+", given "+k.geometry.type)}function n(k,Z,X){if(!k)throw new Error("No featureCollection passed");if(!X)throw new Error(".collectionOf() requires a name");if(!k||k.type!=="FeatureCollection")throw new Error("Invalid input to "+X+", FeatureCollection required");for(var at=0,pt=k.features;at<pt.length;at++){var gt=pt[at];if(!gt||gt.type!=="Feature"||!gt.geometry)throw new Error("Invalid input to "+X+", Feature with geometry required");if(!gt.geometry||gt.geometry.type!==Z)throw new Error("Invalid input to "+X+": must be a "+Z+", given "+gt.geometry.type)}}function i(k){return k.type==="Feature"?k.geometry:k}function a(k,Z){return k.type==="FeatureCollection"?"FeatureCollection":k.type==="GeometryCollection"?"GeometryCollection":k.type==="Feature"&&k.geometry!==null?k.geometry.type:k.type}function o(k,Z,X){if(k!==null)for(var at,pt,gt,ft,Rt,Nt,Dt,St=0,xt=0,Ot,it=k.type,At=it==="FeatureCollection",z=it==="Feature",q=At?k.features.length:1,mt=0;mt<q;mt++){Dt=At?k.features[mt].geometry:z?k.geometry:k,Ot=Dt?Dt.type==="GeometryCollection":!1,Rt=Ot?Dt.geometries.length:1;for(var et=0;et<Rt;et++){var st=0,bt=0;if(ft=Ot?Dt.geometries[et]:Dt,ft!==null){Nt=ft.coordinates;var Y=ft.type;switch(St=X&&(Y==="Polygon"||Y==="MultiPolygon")?1:0,Y){case null:break;case"Point":if(Z(Nt,xt,mt,st,bt)===!1)return!1;xt++,st++;break;case"LineString":case"MultiPoint":for(at=0;at<Nt.length;at++){if(Z(Nt[at],xt,mt,st,bt)===!1)return!1;xt++,Y==="MultiPoint"&&st++}Y==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(at=0;at<Nt.length;at++){for(pt=0;pt<Nt[at].length-St;pt++){if(Z(Nt[at][pt],xt,mt,st,bt)===!1)return!1;xt++}Y==="MultiLineString"&&st++,Y==="Polygon"&&bt++}Y==="Polygon"&&st++;break;case"MultiPolygon":for(at=0;at<Nt.length;at++){for(bt=0,pt=0;pt<Nt[at].length;pt++){for(gt=0;gt<Nt[at][pt].length-St;gt++){if(Z(Nt[at][pt][gt],xt,mt,st,bt)===!1)return!1;xt++}bt++}st++}break;case"GeometryCollection":for(at=0;at<ft.geometries.length;at++)if(o(ft.geometries[at],Z,X)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(k,Z,X,at){var pt=X;return o(k,function(gt,ft,Rt,Nt,Dt){ft===0&&X===void 0?pt=gt:pt=Z(pt,gt,ft,Rt,Nt,Dt)},at),pt}function f(k,Z){var X;switch(k.type){case"FeatureCollection":for(X=0;X<k.features.length&&Z(k.features[X].properties,X)!==!1;X++);break;case"Feature":Z(k.properties,0);break}}function v(k,Z,X){var at=X;return f(k,function(pt,gt){gt===0&&X===void 0?at=pt:at=Z(at,pt,gt)}),at}function b(k,Z){if(k.type==="Feature")Z(k,0);else if(k.type==="FeatureCollection")for(var X=0;X<k.features.length&&Z(k.features[X],X)!==!1;X++);}function g(k,Z,X){var at=X;return b(k,function(pt,gt){gt===0&&X===void 0?at=pt:at=Z(at,pt,gt)}),at}function y(k){var Z=[];return o(k,function(X){Z.push(X)}),Z}function _(k,Z){var X,at,pt,gt,ft,Rt,Nt,Dt,St,xt,Ot=0,it=k.type==="FeatureCollection",At=k.type==="Feature",z=it?k.features.length:1;for(X=0;X<z;X++){for(Rt=it?k.features[X].geometry:At?k.geometry:k,Dt=it?k.features[X].properties:At?k.properties:{},St=it?k.features[X].bbox:At?k.bbox:void 0,xt=it?k.features[X].id:At?k.id:void 0,Nt=Rt?Rt.type==="GeometryCollection":!1,ft=Nt?Rt.geometries.length:1,pt=0;pt<ft;pt++){if(gt=Nt?Rt.geometries[pt]:Rt,gt===null){if(Z(null,Ot,Dt,St,xt)===!1)return!1;continue}switch(gt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Z(gt,Ot,Dt,St,xt)===!1)return!1;break}case"GeometryCollection":{for(at=0;at<gt.geometries.length;at++)if(Z(gt.geometries[at],Ot,Dt,St,xt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ot++}}function M(k,Z,X){var at=X;return _(k,function(pt,gt,ft,Rt,Nt){gt===0&&X===void 0?at=pt:at=Z(at,pt,gt,ft,Rt,Nt)}),at}function x(k,Z){_(k,function(X,at,pt,gt,ft){var Rt=X===null?null:X.type;switch(Rt){case null:case"Point":case"LineString":case"Polygon":return Z(Object(t.b)(X,pt,{bbox:gt,id:ft}),at,0)===!1?!1:void 0}var Nt;switch(Rt){case"MultiPoint":Nt="Point";break;case"MultiLineString":Nt="LineString";break;case"MultiPolygon":Nt="Polygon";break}for(var Dt=0;Dt<X.coordinates.length;Dt++){var St=X.coordinates[Dt],xt={type:Nt,coordinates:St};if(Z(Object(t.b)(xt,pt),at,Dt)===!1)return!1}})}function m(k,Z,X){var at=X;return x(k,function(pt,gt,ft){gt===0&&ft===0&&X===void 0?at=pt:at=Z(at,pt,gt,ft)}),at}function S(k,Z){x(k,function(X,at,pt){var gt=0;if(!!X.geometry){var ft=X.geometry.type;if(!(ft==="Point"||ft==="MultiPoint")){var Rt,Nt=0,Dt=0,St=0;if(o(X,function(xt,Ot,it,At,z){if(Rt===void 0||at>Nt||At>Dt||z>St){Rt=xt,Nt=at,Dt=At,St=z,gt=0;return}var q=Object(t.e)([Rt,xt],X.properties);if(Z(q,at,pt,z,gt)===!1)return!1;gt++,Rt=xt})===!1)return!1}}})}function P(k,Z,X){var at=X,pt=!1;return S(k,function(gt,ft,Rt,Nt,Dt){pt===!1&&X===void 0?at=gt:at=Z(at,gt,ft,Rt,Nt,Dt),pt=!0}),at}function A(k,Z){if(!k)throw new Error("geojson is required");x(k,function(X,at,pt){if(X.geometry!==null){var gt=X.geometry.type,ft=X.geometry.coordinates;switch(gt){case"LineString":if(Z(X,at,pt,0,0)===!1)return!1;break;case"Polygon":for(var Rt=0;Rt<ft.length;Rt++)if(Z(Object(t.e)(ft[Rt],X.properties),at,pt,Rt)===!1)return!1;break}}})}function O(k,Z,X){var at=X;return A(k,function(pt,gt,ft,Rt){gt===0&&X===void 0?at=pt:at=Z(at,pt,gt,ft,Rt)}),at}function R(k,Z){if(Z=Z||{},!Object(t.d)(Z))throw new Error("options is invalid");var X=Z.featureIndex||0,at=Z.multiFeatureIndex||0,pt=Z.geometryIndex||0,gt=Z.segmentIndex||0,ft=Z.properties,Rt;switch(k.type){case"FeatureCollection":X<0&&(X=k.features.length+X),ft=ft||k.features[X].properties,Rt=k.features[X].geometry;break;case"Feature":ft=ft||k.properties,Rt=k.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Rt=k;break;default:throw new Error("geojson is invalid")}if(Rt===null)return null;var Nt=Rt.coordinates;switch(Rt.type){case"Point":case"MultiPoint":return null;case"LineString":return gt<0&&(gt=Nt.length+gt-1),Object(t.e)([Nt[gt],Nt[gt+1]],ft,Z);case"Polygon":return pt<0&&(pt=Nt.length+pt),gt<0&&(gt=Nt[pt].length+gt-1),Object(t.e)([Nt[pt][gt],Nt[pt][gt+1]],ft,Z);case"MultiLineString":return at<0&&(at=Nt.length+at),gt<0&&(gt=Nt[at].length+gt-1),Object(t.e)([Nt[at][gt],Nt[at][gt+1]],ft,Z);case"MultiPolygon":return at<0&&(at=Nt.length+at),pt<0&&(pt=Nt[at].length+pt),gt<0&&(gt=Nt[at][pt].length-gt-1),Object(t.e)([Nt[at][pt][gt],Nt[at][pt][gt+1]],ft,Z)}throw new Error("geojson is invalid")}function H(k,Z){if(Z=Z||{},!Object(t.d)(Z))throw new Error("options is invalid");var X=Z.featureIndex||0,at=Z.multiFeatureIndex||0,pt=Z.geometryIndex||0,gt=Z.coordIndex||0,ft=Z.properties,Rt;switch(k.type){case"FeatureCollection":X<0&&(X=k.features.length+X),ft=ft||k.features[X].properties,Rt=k.features[X].geometry;break;case"Feature":ft=ft||k.properties,Rt=k.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Rt=k;break;default:throw new Error("geojson is invalid")}if(Rt===null)return null;var Nt=Rt.coordinates;switch(Rt.type){case"Point":return Object(t.f)(Nt,ft,Z);case"MultiPoint":return at<0&&(at=Nt.length+at),Object(t.f)(Nt[at],ft,Z);case"LineString":return gt<0&&(gt=Nt.length+gt),Object(t.f)(Nt[gt],ft,Z);case"Polygon":return pt<0&&(pt=Nt.length+pt),gt<0&&(gt=Nt[pt].length+gt),Object(t.f)(Nt[pt][gt],ft,Z);case"MultiLineString":return at<0&&(at=Nt.length+at),gt<0&&(gt=Nt[at].length+gt),Object(t.f)(Nt[at][gt],ft,Z);case"MultiPolygon":return at<0&&(at=Nt.length+at),pt<0&&(pt=Nt[at].length+pt),gt<0&&(gt=Nt[at][pt].length-gt),Object(t.f)(Nt[at][pt][gt],ft,Z)}throw new Error("geojson is invalid")}function N(k,Z){var X=Object.keys(k);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(k);Z&&(at=at.filter(function(pt){return Object.getOwnPropertyDescriptor(k,pt).enumerable})),X.push.apply(X,at)}return X}function K(k){for(var Z=1;Z<arguments.length;Z++){var X=arguments[Z]!=null?arguments[Z]:{};Z%2?N(Object(X),!0).forEach(function(at){E()(k,at,X[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(X)):N(Object(X)).forEach(function(at){Object.defineProperty(k,at,Object.getOwnPropertyDescriptor(X,at))})}return k}function V(k,Z){var X=[],at={};if(k.features=k.features.filter(function(gt){var ft=gt.geometry;return gt!=null&&ft&&ft.type&&ft.coordinates&&ft.coordinates.length>0}),e()(k,!0),k.features.length===0)return{dataArray:[],featureKeys:at};var pt=0;return x(k,function(gt,ft){var Rt=s(gt),Nt=ft,Dt=K(K({},gt.properties),{},{coordinates:Rt,_id:Nt});X.push(Dt)}),{dataArray:X,featureKeys:at}}},"5ku3":function(Se,dt,L){"use strict";(function(U){L.d(dt,"a",function(){return e});var E=L("U8pU"),T=L("I0ug");function e(){var u=(typeof U=="undefined"?"undefined":Object(E.a)(U))==="object"&&String(U)==="[object process]"&&!U.browser;return!u||Object(T.a)()}function t(){return e()&&typeof document!="undefined"}}).call(this,L("Q2Ig"))},"5zYK":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return r});var U=L("lSNA"),E=L.n(U),T=L("RIqP"),e=L.n(T),t=L("LvWW"),u=L.n(t);function s(c,n){var i=Object.keys(c);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(c);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(c,o).enumerable})),i.push.apply(i,a)}return i}function h(c){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?s(Object(i),!0).forEach(function(a){E()(c,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(i,a))})}return c}function r(c,n){var i=n.x,a=n.y,o=n.x1,l=n.y1,f=n.coordinates,v=[];return c.forEach(function(b,g){var y=[];if(i&&a&&(y=[parseFloat(b[i]),parseFloat(b[a])]),i&&a&&o&&l){var _=[parseFloat(b[i]),parseFloat(b[a])],M=[parseFloat(b[o]),parseFloat(b[l])];y=[_,M]}if(f){var x="Polygon";Array.isArray(f[0])||(x="Point"),Array.isArray(f[0])&&!Array.isArray(f[0][0])&&(x="LineString");var m={type:x,coordinates:e()(b[f])};u()(m,!0),y=m.coordinates}var S=h(h({},b),{},{_id:g,coordinates:y});v.push(S)}),{dataArray:v}}},"68d/":function(Se,dt,L){"use strict";L.d(dt,"b",function(){return La}),L.d(dt,"c",function(){return Jr}),L.d(dt,"a",function(){return Mi});var U=L("q1tI"),E=L.n(U),T=Object(U.createContext)({});function e(){return Object(U.useContext)(T)}var t=L("8ml+"),u=L("lwsE"),s=L.n(u),h=L("W8MJ"),r=L.n(h),c=L("7W2i"),n=L.n(c),i=L("a1gu"),a=L.n(i),o=L("Nsbk"),l=L.n(o),f=L("lSNA"),v=L.n(f),b=L("yG8O"),g=L.n(b),y=L("U+yc"),_=L.n(y),M=L("1ABj"),x=L("h1nZ"),m,S,P,A,O,R;function H(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function N(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?H(Object(W),!0).forEach(function(ct){v()(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):H(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}var K=(m=Object(x.lazyInject)(x.TYPES.ILogService),S=Object(x.lazyInject)(x.TYPES.IGlobalConfigService),P=(R=function(){function lt(nt){s()(this,lt),g()(this,"logger",A,this),g()(this,"configService",O,this),this.config=void 0,this.config=nt}return r()(lt,[{key:"setContainer",value:function(W,ct){W.bind(x.TYPES.MapConfig).toConstantValue(N(N({},this.config),{},{id:ct})),W.bind(x.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),lt}(),R),A=_()(P.prototype,"logger",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=_()(P.prototype,"configService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P),V=L("QILm"),k=L.n(V),Z=L("yXPU"),X=L.n(Z),at=L("J4zp"),pt=L.n(at),gt=L("o0o1"),ft=L.n(gt),Rt=L("hi0z"),Nt=L.n(Rt),Dt=L("Hel2"),St=L("IOcx"),xt=L("4cb6");function Ot(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function it(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?Ot(Object(W),!0).forEach(function(ct){v()(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):Ot(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}function At(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt={top:0,right:0,bottom:0,left:0};if(typeof lt=="number")return{top:lt,right:lt,bottom:lt,left:lt};if(Array.isArray(lt)){if(lt.length===4)return{top:lt[0],right:lt[1],bottom:lt[2],left:lt[3]};if(lt.length===2)return{top:lt[0],right:lt[1],bottom:lt[0],left:lt[1]}}return it(it({},nt),lt)}var z;(function(lt){lt["GAODE1.x"]="GAODE1.x",lt["GAODE2.x"]="GAODE2.x",lt.MAPBOX="MAPBOX",lt.L7MAP="L7MAP"})(z||(z={}));var q={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},mt=Math.PI/180,et=function(){function lt(){s()(this,lt),this.projectionMatrix=St.b.create(),this.viewMatrix=St.b.create(),this.viewProjectionMatrix=St.b.create(),this.ViewProjectionMatrixUncentered=St.b.create(),this.viewUncenteredMatrix=St.b.create(),this.zoom=void 0,this.center=void 0}return r()(lt,[{key:"syncWithMapCamera",value:function(W){var ct=W.zoom,Et=ct===void 0?1:ct,Ut=W.pitch,fe=Ut===void 0?0:Ut,Ve=W.bearing,Ge=Ve===void 0?0:Ve,Ke=W.center,Rn=Ke===void 0?[0,0]:Ke,ur=W.offsetOrigin,rr=ur===void 0?[0,0]:ur,lr=W.cameraHeight,Zn=lr===void 0?1:lr,qn=W.aspect,kr=qn===void 0?1:qn,ti=W.near,Ir=ti===void 0?.1:ti,Ci=W.far,ni=Ci===void 0?1e3:Ci,qr=W.fov,Qr=qr===void 0?0:qr;this.zoom=Et,this.center=Rn;var oi=fe*mt,Ii=(360-Ge)*mt;St.b.perspective(this.projectionMatrix,Qr,kr,Ir,ni);var ki=St.d.fromValues(Zn*Math.sin(oi)*Math.sin(Ii),-Zn*Math.sin(oi)*Math.cos(Ii),Zn*Math.cos(oi)),xi=St.d.fromValues(-Math.cos(oi)*Math.sin(Ii),Math.cos(oi)*Math.cos(Ii),Math.sin(oi));St.b.lookAt(this.viewMatrix,ki,St.d.fromValues(0,0,0),xi),this.viewUncenteredMatrix=St.b.clone(this.viewMatrix),St.b.translate(this.viewMatrix,this.viewMatrix,St.d.fromValues(-rr[0],rr[1],0)),St.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),St.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var W=pt()(this.center,2),ct=W[0],Et=W[1];return[ct,Et]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(W,ct){var Et=85.0511287798,Ut=Math.max(Math.min(Et,W[1]),-Et),fe=256<<20,Ve=Math.PI/180,Ge=W[0]*Ve,Ke=Ut*Ve;Ke=Math.log(Math.tan(Math.PI/4+Ke/2));var Rn=.5/Math.PI,ur=.5,rr=-.5/Math.PI;return Ve=.5,Ge=fe*(Rn*Ge+ur)-215440491,Ke=-(fe*(rr*Ke+Ve)-106744817),[Ge,Ke]}}]),lt}(),st,bt,Y,rt,ot,$,Pt,yt,Ft,Qt,ne,Wt,$t,De;function Je(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function Qe(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?Je(Object(W),!0).forEach(function(ct){v()(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):Je(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}L("BGjm")(`/* @antv/l7-maps */
.amap-logo{
 display: none !important;
}
`);var de=0;window.forceWebGL=!0;var ue="15cd8a57710d40c9b7c0e3cc120f1200",Ne="1.4.15",cn="amap-script",Fn=!1,wn=[],en=12,tn=(st=Object(xt.injectable)(),bt=Object(xt.inject)(x.TYPES.IGlobalConfigService),Y=Object(xt.inject)(x.TYPES.ILogService),rt=Object(xt.inject)(x.TYPES.MapConfig),ot=Object(xt.inject)(x.TYPES.ICoordinateSystemService),$=Object(xt.inject)(x.TYPES.IEventEmitter),st(Pt=(yt=(De=function(){function lt(){var nt=this;s()(this,lt),this.version=z["GAODE1.x"],this.map=void 0,g()(this,"configService",Ft,this),g()(this,"logger",Qt,this),g()(this,"config",ne,this),g()(this,"coordinateSystemService",Wt,this),g()(this,"eventEmitter",$t,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(W){var ct=W.camera,Et=ct.fov,Ut=ct.near,fe=ct.far,Ve=ct.height,Ge=ct.pitch,Ke=ct.rotation,Rn=ct.aspect,ur=ct.position,rr=nt.getCenter(),lr=rr.lng,Zn=rr.lat;if(nt.cameraChangedCallback){nt.viewport.syncWithMapCamera({aspect:Rn,bearing:360-Ke,far:fe,fov:Et,cameraHeight:Ve,near:Ut,pitch:Ge,zoom:nt.map.getZoom()-1,center:[lr,Zn],offsetOrigin:[ur.x,ur.y]});var qn=nt.config.offsetZoom,kr=qn===void 0?en:qn;nt.viewport.getZoom()>kr?nt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20_OFFSET):nt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20),nt.cameraChangedCallback(nt.viewport)}}}return r()(lt,[{key:"addMarkerContainer",value:function(){var W=this.map.getContainer();if(W!==null){var ct=W.getElementsByClassName("amap-maps")[0];this.markerContainer=Dt.a.create("div","l7-marker-container",ct)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(W,ct){x.MapServiceEvent.indexOf(W)!==-1?this.eventEmitter.on(W,ct):this.map.on(W,ct)}},{key:"off",value:function(W,ct){x.MapServiceEvent.indexOf(W)!==-1?this.eventEmitter.off(W,ct):this.map.off(W,ct)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var W;return(W=this.map.getContainer())===null||W===void 0?void 0:W.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var W=this.map.getSize();return[W.getWidth(),W.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(W){return this.map.setZoom(W)}},{key:"getCenter",value:function(W){if(W!=null&&W.padding){var ct=this.getCenter(),Et=this.getSize(),Ut=pt()(Et,2),fe=Ut[0],Ve=Ut[1],Ge=At(W.padding),Ke=this.lngLatToPixel([ct.lng,ct.lat]),Rn=[(Ge.right-Ge.left)/2,(Ge.bottom-Ge.top)/2],ur=this.pixelToLngLat([Ke.x-Rn[0],Ke.y-Rn[1]]);return ur}var rr=this.map.getCenter();return{lng:rr.getLng(),lat:rr.getLat()}}},{key:"setCenter",value:function(W,ct){if(ct!=null&&ct.padding){var Et=At(ct.padding),Ut=this.lngLatToPixel(W),fe=[(Et.right-Et.left)/2,(Et.bottom-Et.top)/2],Ve=this.pixelToLngLat([Ut.x+fe[0],Ut.y+fe[1]]);this.map.setCenter([Ve.lng,Ve.lat])}else this.map.setCenter(W)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var W=this.map.getBounds().toBounds(),ct=W.getNorthEast(),Et=W.getSouthWest(),Ut=this.getCenter(),fe=Ut.lng>ct.getLng()||Ut.lng<Et.getLng()?180-ct.getLng():ct.getLng(),Ve=Ut.lng<Et.getLng()?Et.getLng()-180:Et.getLng();return[[Ve,Et.getLat()],[fe,ct.getLat()]]}},{key:"getMinZoom",value:function(){var W=this.map.get("zooms");return W[0]-1}},{key:"getMaxZoom",value:function(){var W=this.map.get("zooms");return W[1]-1}},{key:"setRotation",value:function(W){return this.map.setRotation(W)}},{key:"setPitch",value:function(W){return this.map.setPitch(W)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(W){this.map.panTo(W)}},{key:"panBy",value:function(W){this.map.panTo(W)}},{key:"fitBounds",value:function(W){this.map.setBounds(new AMap.Bounds([W[0][0],W[0][1],W[1][0],W[1][1]]))}},{key:"setZoomAndCenter",value:function(W,ct){this.map.setZoomAndCenter(W,ct)}},{key:"setMapStyle",value:function(W){this.map.setMapStyle(this.getMapStyle(W))}},{key:"setMapStatus",value:function(W){this.map.setStatus(W)}},{key:"pixelToLngLat",value:function(W){var ct=this.map.pixelToLngLat(new AMap.Pixel(W[0],W[1]));return{lng:ct.getLng(),lat:ct.getLat()}}},{key:"lngLatToPixel",value:function(W){var ct=this.map.lnglatToPixel(new AMap.LngLat(W[0],W[1]));return{x:ct.getX(),y:ct.getY()}}},{key:"containerToLngLat",value:function(W){var ct=new AMap.Pixel(W[0],W[1]),Et=this.map.containerToLngLat(ct);return{lng:Et==null?void 0:Et.getLng(),lat:Et==null?void 0:Et.getLat()}}},{key:"lngLatToContainer",value:function(W){var ct=new AMap.LngLat(W[0],W[1]),Et=this.map.lngLatToContainer(ct);return{x:Et.getX(),y:Et.getY()}}},{key:"lngLatToMercator",value:function(W,ct){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(W,ct,Et){var Ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],fe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},Ve=this.viewport.projectFlat(W),Ge=St.b.create();return St.b.translate(Ge,Ge,St.d.fromValues(Ve[0],Ve[1],ct)),St.b.scale(Ge,Ge,St.d.fromValues(Ut[0],Ut[1],Ut[2])),St.b.rotateX(Ge,Ge,Et[0]),St.b.rotateY(Ge,Ge,Et[1]),St.b.rotateZ(Ge,Ge,Et[2]),Ge}},{key:"init",value:function(){var nt=X()(ft.a.mark(function ct(){var Et=this,Ut,fe,Ve,Ge,Ke,Rn,ur,rr,lr,Zn,qn,kr,ti,Ir;return ft.a.wrap(function(ni){for(;;)switch(ni.prev=ni.next){case 0:return Ut=this.config,fe=Ut.id,Ve=Ut.style,Ge=Ve===void 0?"light":Ve,Ke=Ut.minZoom,Rn=Ke===void 0?0:Ke,ur=Ut.maxZoom,rr=ur===void 0?18:ur,lr=Ut.token,Zn=lr===void 0?ue:lr,qn=Ut.mapInstance,kr=Ut.plugin,ti=kr===void 0?[]:kr,Ir=k()(Ut,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),ni.next=3,new Promise(function(qr){var Qr=function(){if(qn)Et.map=qn,Et.$mapContainer=Et.map.getContainer(),setTimeout(function(){Et.map.on("camerachange",Et.handleCameraChanged),qr()},30);else{Et.$mapContainer=Et.creatAmapContainer(fe);var Ii=new AMap.Map(Et.$mapContainer,Qe({mapStyle:Et.getMapStyle(Ge),zooms:[Rn,rr],viewMode:"3D"},Ir));Ii.on("camerachange",Et.handleCameraChanged),Et.map=Ii,setTimeout(function(){qr()},10)}};!Fn&&!qn?(Zn===ue&&Et.logger.warn(Et.configService.getSceneWarninfo("MapToken")),Fn=!0,ti.push("Map3D"),Nt.a.load({key:Zn,version:Ne,plugins:ti}).then(function(oi){Qr(),wn.length&&(wn.forEach(function(Ii){return Ii()}),wn=[])}).catch(function(oi){throw new Error(oi)})):Fn&&window.AMap||qn?Qr():wn.push(Qr)});case 3:this.viewport=new et;case 4:case"end":return ni.stop()}},ct,this)}));function W(){return nt.apply(this,arguments)}return W}()},{key:"exportMap",value:function(W){var ct,Et=(ct=this.getContainer())===null||ct===void 0?void 0:ct.getElementsByClassName("amap-layer")[0],Ut=W==="jpg"?Et==null?void 0:Et.toDataURL("image/jpeg"):Et==null?void 0:Et.toDataURL("image/png");return Ut}},{key:"emit",value:function(W){for(var ct,Et=arguments.length,Ut=new Array(Et>1?Et-1:0),fe=1;fe<Et;fe++)Ut[fe-1]=arguments[fe];(ct=this.eventEmitter).emit.apply(ct,[W].concat(Ut))}},{key:"once",value:function(W){for(var ct,Et=arguments.length,Ut=new Array(Et>1?Et-1:0),fe=1;fe<Et;fe++)Ut[fe-1]=arguments[fe];(ct=this.eventEmitter).once.apply(ct,[W].concat(Ut))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var W=document.getElementById(cn);W&&document.head.removeChild(W)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(W){this.cameraChangedCallback=W}},{key:"getMapStyle",value:function(W){return q[W]?q[W]:W}},{key:"creatAmapContainer",value:function(W){var ct=W;typeof W=="string"&&(ct=document.getElementById(W));var Et=document.createElement("div");return Et.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Et.id="l7_amap_div"+de++,ct.appendChild(Et),Et}}]),lt}(),De),Ft=_()(yt.prototype,"configService",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=_()(yt.prototype,"logger",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=_()(yt.prototype,"config",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=_()(yt.prototype,"coordinateSystemService",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=_()(yt.prototype,"eventEmitter",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt))||Pt);function xn(lt){var nt=Bn();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function Bn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var vr=function(lt){n()(W,lt);var nt=xn(W);function W(){return s()(this,W),nt.apply(this,arguments)}return r()(W,[{key:"getServiceConstructor",value:function(){return tn}}]),W}(K);function li(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function Me(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?li(Object(W),!0).forEach(function(ct){Pe(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):li(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}function Pe(lt,nt,W){return nt in lt?Object.defineProperty(lt,nt,{value:W,enumerable:!0,configurable:!0,writable:!0}):lt[nt]=W,lt}function te(lt,nt){return ae(lt)||Te(lt,nt)||Ht(lt,nt)||ge()}function ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(lt,nt){if(!!lt){if(typeof lt=="string")return re(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return re(lt,nt)}}function re(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}function Te(lt,nt){var W=lt==null?null:typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(W!=null){var ct=[],Et=!0,Ut=!1,fe,Ve;try{for(W=W.call(lt);!(Et=(fe=W.next()).done)&&(ct.push(fe.value),!(nt&&ct.length===nt));Et=!0);}catch(Ge){Ut=!0,Ve=Ge}finally{try{!Et&&W.return!=null&&W.return()}finally{if(Ut)throw Ve}}return ct}}function ae(lt){if(Array.isArray(lt))return lt}var xe=E.a.memo(function(lt){var nt=lt.style,W=lt.className,ct=lt.map,Et=lt.option,Ut=lt.onSceneLoaded,fe=lt.children,Ve=Object(U.useRef)(null),Ge=Object(U.useState)(),Ke=te(Ge,2),Rn=Ke[0],ur=Ke[1];return Object(U.useEffect)(function(){var rr=new t.Scene(Me(Me({id:Ve.current},Et),{},{map:new vr(ct)}));return rr.on("loaded",function(){ur(rr),Ut&&Ut(rr)}),function(){rr.destroy()}},[]),Object(U.useEffect)(function(){Rn&&ct.style&&Rn.setMapStyle(ct.style)},[JSON.stringify(ct.style)]),Object(U.useEffect)(function(){Rn&&ct.zoom&&Rn.setZoom(ct.zoom)},[ct.zoom]),Object(U.useEffect)(function(){Rn&&ct.center&&Rn.setCenter(ct.center)},[JSON.stringify(ct.center)]),Object(U.useEffect)(function(){Rn&&ct.pitch&&Rn.setPitch(ct.pitch)},[ct.pitch]),Object(U.useEffect)(function(){Rn&&ct.rotation&&Rn.setRotation(ct.rotation)},[ct.rotation]),E.a.createElement(T.Provider,{value:Rn},E.a.createElement("div",{ref:Ve,className:W,style:nt},Rn&&fe))}),qe=xe,zn=L("4ZJM"),ar=L.n(zn),_n=L("1OyB"),Cn=L("vuIU"),Or=L("md7G"),Ar=L("foSv"),hn=L("Ji7U"),Pr=L("JX7q"),yr=L("ODXe"),Re=L("bl9R");function We(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ye(lt,nt){var W=Re.transformMat4([],nt,lt);return Re.scale(W,W,1/W[3]),W}function dn(lt,nt){var W=lt%nt;return W<0?nt+W:W}function En(lt,nt,W){return W*nt+(1-W)*lt}var Dn=L("ZaHm"),Sn=L("ZxFD"),Nn=L("n+fv");function nr(lt,nt){if(!lt)throw new Error(nt||"viewport-mercator-project: assertion failed.")}var Gn=Math.PI,Tn=Gn/4,Cr=Gn/180,pr=180/Gn,zr=512,Ei=4003e4,Oa=1.5;function wa(lt){return Math.pow(2,lt)}function Ja(lt){return Math.log2(lt)}function wo(lt,nt){var W=Object(yr.a)(lt,2),ct=W[0],Et=W[1];nr(Number.isFinite(ct)&&Number.isFinite(nt)),nr(Number.isFinite(Et)&&Et>=-90&&Et<=90,"invalid latitude"),nt*=zr;var Ut=ct*Cr,fe=Et*Cr,Ve=nt*(Ut+Gn)/(2*Gn),Ge=nt*(Gn-Math.log(Math.tan(Tn+fe*.5)))/(2*Gn);return[Ve,Ge]}function ha(lt,nt){var W=Object(yr.a)(lt,2),ct=W[0],Et=W[1];nt*=zr;var Ut=ct/nt*(2*Gn)-Gn,fe=2*(Math.atan(Math.exp(Gn-Et/nt*(2*Gn)))-Tn);return[Ut*pr,fe*pr]}function ro(lt){var nt=lt.latitude;nr(Number.isFinite(nt));var W=Math.cos(nt*Cr);return Ja(Ei*W)-9}function ko(lt){var nt=lt.latitude,W=lt.longitude,ct=lt.zoom,Et=lt.scale,Ut=lt.highPrecision,fe=Ut===void 0?!1:Ut;Et=Et!==void 0?Et:wa(ct),nr(Number.isFinite(nt)&&Number.isFinite(W)&&Number.isFinite(Et));var Ve={},Ge=zr*Et,Ke=Math.cos(nt*Cr),Rn=Ge/360,ur=Rn/Ke,rr=Ge/Ei/Ke;if(Ve.pixelsPerMeter=[rr,-rr,rr],Ve.metersPerPixel=[1/rr,-1/rr,1/rr],Ve.pixelsPerDegree=[Rn,-ur,rr],Ve.degreesPerPixel=[1/Rn,-1/ur,1/rr],fe){var lr=Cr*Math.tan(nt*Cr)/Ke,Zn=Rn*lr/2,qn=Ge/Ei*lr,kr=qn/ur*rr;Ve.pixelsPerDegree2=[0,-Zn,qn],Ve.pixelsPerMeter2=[kr,0,kr]}return Ve}function $a(lt,nt){var W=Object(yr.a)(lt,3),ct=W[0],Et=W[1],Ut=W[2],fe=Object(yr.a)(nt,3),Ve=fe[0],Ge=fe[1],Ke=fe[2],Rn=1,ur=ko({longitude:ct,latitude:Et,scale:Rn,highPrecision:!0}),rr=ur.pixelsPerMeter,lr=ur.pixelsPerMeter2,Zn=wo(lt,Rn);Zn[0]+=Ve*(rr[0]+lr[0]*Ge),Zn[1]+=Ge*(rr[1]+lr[1]*Ge);var qn=ha(Zn,Rn),kr=(Ut||0)+(Ke||0);return Number.isFinite(Ut)||Number.isFinite(Ke)?[qn[0],qn[1],kr]:qn}function Mo(lt){var nt=lt.height,W=lt.pitch,ct=lt.bearing,Et=lt.altitude,Ut=lt.center,fe=Ut===void 0?null:Ut,Ve=lt.flipY,Ge=Ve===void 0?!1:Ve,Ke=We();return Dn.translate(Ke,Ke,[0,0,-Et]),Dn.scale(Ke,Ke,[1,1,1/nt]),Dn.rotateX(Ke,Ke,-W*Cr),Dn.rotateZ(Ke,Ke,ct*Cr),Ge&&Dn.scale(Ke,Ke,[1,-1,1]),fe&&Dn.translate(Ke,Ke,Nn.negate([],fe)),Ke}function ss(lt){var nt=lt.width,W=lt.height,ct=lt.altitude,Et=ct===void 0?Oa:ct,Ut=lt.pitch,fe=Ut===void 0?0:Ut,Ve=lt.nearZMultiplier,Ge=Ve===void 0?1:Ve,Ke=lt.farZMultiplier,Rn=Ke===void 0?1:Ke,ur=fe*Cr,rr=Math.atan(.5/Et),lr=Math.sin(rr)*Et/Math.sin(Math.PI/2-ur-rr),Zn=Math.cos(Math.PI/2-ur)*lr+Et;return{fov:2*Math.atan(W/2/Et),aspect:nt/W,focalDistance:Et,near:Ge,far:Zn*Rn}}function Pa(lt){var nt=lt.width,W=lt.height,ct=lt.pitch,Et=lt.altitude,Ut=lt.nearZMultiplier,fe=lt.farZMultiplier,Ve=ss({width:nt,height:W,altitude:Et,pitch:ct,nearZMultiplier:Ut,farZMultiplier:fe}),Ge=Ve.fov,Ke=Ve.aspect,Rn=Ve.near,ur=Ve.far,rr=Dn.perspective([],Ge,Ke,Rn,ur);return rr}function Bo(lt,nt){var W=Object(yr.a)(lt,3),ct=W[0],Et=W[1],Ut=W[2],fe=Ut===void 0?0:Ut;return nr(Number.isFinite(ct)&&Number.isFinite(Et)&&Number.isFinite(fe)),Ye(nt,[ct,Et,fe,1])}function Ro(lt,nt){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,ct=Object(yr.a)(lt,3),Et=ct[0],Ut=ct[1],fe=ct[2];if(nr(Number.isFinite(Et)&&Number.isFinite(Ut),"invalid pixel coordinate"),Number.isFinite(fe)){var Ve=Ye(nt,[Et,Ut,fe,1]);return Ve}var Ge=Ye(nt,[Et,Ut,0,1]),Ke=Ye(nt,[Et,Ut,1,1]),Rn=Ge[2],ur=Ke[2],rr=Rn===ur?0:((W||0)-Rn)/(ur-Rn);return Sn.lerp([],Ge,Ke,rr)}var Js=We(),Ko=function(){function lt(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=nt.width,ct=nt.height,Et=nt.viewMatrix,Ut=Et===void 0?Js:Et,fe=nt.projectionMatrix,Ve=fe===void 0?Js:fe;Object(_n.a)(this,lt),this.width=W||1,this.height=ct||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=Ut,this.projectionMatrix=Ve;var Ge=We();Dn.multiply(Ge,Ge,this.projectionMatrix),Dn.multiply(Ge,Ge,this.viewMatrix),this.viewProjectionMatrix=Ge;var Ke=We();Dn.scale(Ke,Ke,[this.width/2,-this.height/2,1]),Dn.translate(Ke,Ke,[1,-1,0]),Dn.multiply(Ke,Ke,this.viewProjectionMatrix);var Rn=Dn.invert(We(),Ke);if(!Rn)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=Ke,this.pixelUnprojectionMatrix=Rn,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(Cn.a)(lt,[{key:"equals",value:function(W){return W instanceof lt?W.width===this.width&&W.height===this.height&&Dn.equals(W.projectionMatrix,this.projectionMatrix)&&Dn.equals(W.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(W){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et=ct.topLeft,Ut=Et===void 0?!0:Et,fe=this.projectPosition(W),Ve=Bo(fe,this.pixelProjectionMatrix),Ge=Object(yr.a)(Ve,2),Ke=Ge[0],Rn=Ge[1],ur=Ut?Rn:this.height-Rn;return W.length===2?[Ke,ur]:[Ke,ur,Ve[2]]}},{key:"unproject",value:function(W){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et=ct.topLeft,Ut=Et===void 0?!0:Et,fe=ct.targetZ,Ve=Object(yr.a)(W,3),Ge=Ve[0],Ke=Ve[1],Rn=Ve[2],ur=Ut?Ke:this.height-Ke,rr=fe&&fe*this.pixelsPerMeter,lr=Ro([Ge,ur,Rn],this.pixelUnprojectionMatrix,rr),Zn=this.unprojectPosition(lr),qn=Object(yr.a)(Zn,3),kr=qn[0],ti=qn[1],Ir=qn[2];return Number.isFinite(Rn)?[kr,ti,Ir]:Number.isFinite(fe)?[kr,ti,fe]:[kr,ti]}},{key:"projectPosition",value:function(W){var ct=this.projectFlat(W),Et=Object(yr.a)(ct,2),Ut=Et[0],fe=Et[1],Ve=(W[2]||0)*this.pixelsPerMeter;return[Ut,fe,Ve]}},{key:"unprojectPosition",value:function(W){var ct=this.unprojectFlat(W),Et=Object(yr.a)(ct,2),Ut=Et[0],fe=Et[1],Ve=(W[2]||0)/this.pixelsPerMeter;return[Ut,fe,Ve]}},{key:"projectFlat",value:function(W){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return W}},{key:"unprojectFlat",value:function(W){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return W}}]),lt}();function nu(lt){var nt=lt.width,W=lt.height,ct=lt.bounds,Et=lt.minExtent,Ut=Et===void 0?0:Et,fe=lt.maxZoom,Ve=fe===void 0?24:fe,Ge=lt.padding,Ke=Ge===void 0?0:Ge,Rn=lt.offset,ur=Rn===void 0?[0,0]:Rn,rr=Object(yr.a)(ct,2),lr=Object(yr.a)(rr[0],2),Zn=lr[0],qn=lr[1],kr=Object(yr.a)(rr[1],2),ti=kr[0],Ir=kr[1];if(Number.isFinite(Ke)){var Ci=Ke;Ke={top:Ci,bottom:Ci,left:Ci,right:Ci}}else nr(Number.isFinite(Ke.top)&&Number.isFinite(Ke.bottom)&&Number.isFinite(Ke.left)&&Number.isFinite(Ke.right));var ni=new Rs({width:nt,height:W,longitude:0,latitude:0,zoom:0}),qr=ni.project([Zn,Ir]),Qr=ni.project([ti,qn]),oi=[Math.max(Math.abs(Qr[0]-qr[0]),Ut),Math.max(Math.abs(Qr[1]-qr[1]),Ut)],Ii=[nt-Ke.left-Ke.right-Math.abs(ur[0])*2,W-Ke.top-Ke.bottom-Math.abs(ur[1])*2];nr(Ii[0]>0&&Ii[1]>0);var ki=Ii[0]/oi[0],xi=Ii[1]/oi[1],di=(Ke.right-Ke.left)/2/ki,ui=(Ke.bottom-Ke.top)/2/xi,da=[(Qr[0]+qr[0])/2+di,(Qr[1]+qr[1])/2+ui],aa=ni.unproject(da),Gi=ni.zoom+Math.log2(Math.abs(Math.min(ki,xi)));return{longitude:aa[0],latitude:aa[1],zoom:Math.min(Gi,Ve)}}var Rs=function(lt){Object(hn.a)(nt,lt);function nt(){var W,ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Et=ct.width,Ut=ct.height,fe=ct.latitude,Ve=fe===void 0?0:fe,Ge=ct.longitude,Ke=Ge===void 0?0:Ge,Rn=ct.zoom,ur=Rn===void 0?0:Rn,rr=ct.pitch,lr=rr===void 0?0:rr,Zn=ct.bearing,qn=Zn===void 0?0:Zn,kr=ct.altitude,ti=kr===void 0?1.5:kr,Ir=ct.nearZMultiplier,Ci=ct.farZMultiplier;Object(_n.a)(this,nt),Et=Et||1,Ut=Ut||1;var ni=wa(ur);ti=Math.max(.75,ti);var qr=wo([Ke,Ve],ni);qr[2]=0;var Qr=Pa({width:Et,height:Ut,pitch:lr,bearing:qn,altitude:ti,nearZMultiplier:Ir||1/Ut,farZMultiplier:Ci||1.01}),oi=Mo({height:Ut,center:qr,pitch:lr,bearing:qn,altitude:ti,flipY:!0});return W=Object(Or.a)(this,Object(Ar.a)(nt).call(this,{width:Et,height:Ut,viewMatrix:oi,projectionMatrix:Qr})),W.latitude=Ve,W.longitude=Ke,W.zoom=ur,W.pitch=lr,W.bearing=qn,W.altitude=ti,W.scale=ni,W.center=qr,W.pixelsPerMeter=ko(Object(Pr.a)(Object(Pr.a)(W))).pixelsPerMeter[2],Object.freeze(Object(Pr.a)(Object(Pr.a)(W))),W}return Object(Cn.a)(nt,[{key:"projectFlat",value:function(ct){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return wo(ct,Et)}},{key:"unprojectFlat",value:function(ct){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return ha(ct,Et)}},{key:"getMapCenterByLngLatPosition",value:function(ct){var Et=ct.lngLat,Ut=ct.pos,fe=Ro(Ut,this.pixelUnprojectionMatrix),Ve=wo(Et,this.scale),Ge=Sn.add([],Ve,Sn.negate([],fe)),Ke=Sn.add([],this.center,Ge);return ha(Ke,this.scale)}},{key:"getLocationAtPoint",value:function(ct){var Et=ct.lngLat,Ut=ct.pos;return this.getMapCenterByLngLatPosition({lngLat:Et,pos:Ut})}},{key:"fitBounds",value:function(ct){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ut=this.width,fe=this.height,Ve=nu(Object.assign({width:Ut,height:fe,bounds:ct},Et)),Ge=Ve.longitude,Ke=Ve.latitude,Rn=Ve.zoom;return new nt({width:Ut,height:fe,longitude:Ge,latitude:Ke,zoom:Rn})}}]),nt}(Ko),je=function(){function lt(){s()(this,lt),this.viewport=void 0}return r()(lt,[{key:"syncWithMapCamera",value:function(W){var ct=W.center,Et=W.zoom,Ut=W.pitch,fe=W.bearing,Ve=W.viewportHeight,Ge=W.viewportWidth;this.viewport=new Rs({width:Ge,height:Ve,longitude:ct&&ct[0],latitude:ct&&ct[1],zoom:Et,pitch:Ut,bearing:fe})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(W,ct){return this.viewport.projectFlat(W,ct)}}]),lt}(),oe={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Zt,be,sn,Vn,er,kn,Xr,vi,Si,ji,Ji,za,va,so;function Ia(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function io(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?Ia(Object(W),!0).forEach(function(ct){v()(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):Ia(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}L("BGjm")(`/* @antv/l7-maps */
.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=ar.a;var uo={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},ka=0,vo=12,Vo="pk.eyJ1IjoibHp4dWUiLCJhIjoiY2tvaWZuM2s4MWZuYjJ1dHI5ZGduYTlrdiJ9.DQCfMRbZzx0VSwecQ69McA",Do=(Zt=Object(xt.injectable)(),be=Object(xt.inject)(x.TYPES.MapConfig),sn=Object(xt.inject)(x.TYPES.IGlobalConfigService),Vn=Object(xt.inject)(x.TYPES.ILogService),er=Object(xt.inject)(x.TYPES.ICoordinateSystemService),kn=Object(xt.inject)(x.TYPES.IEventEmitter),Zt(Xr=(vi=(so=function(){function lt(){var nt=this;s()(this,lt),this.version=z.MAPBOX,this.map=void 0,g()(this,"config",Si,this),g()(this,"configService",ji,this),g()(this,"logger",Ji,this),g()(this,"coordinateSystemService",za,this),g()(this,"eventEmitter",va,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var W=nt.map.getCenter().wrap(),ct=W.lat,Et=W.lng;nt.viewport.syncWithMapCamera({bearing:nt.map.getBearing(),center:[Et,ct],viewportHeight:nt.map.transform.height,pitch:nt.map.getPitch(),viewportWidth:nt.map.transform.width,zoom:nt.map.getZoom(),cameraHeight:0});var Ut=nt.config.offsetZoom,fe=Ut===void 0?vo:Ut;nt.viewport.getZoom()>fe?nt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):nt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),nt.cameraChangedCallback(nt.viewport)}}return r()(lt,[{key:"addMarkerContainer",value:function(){var W=this.map.getCanvasContainer();this.markerContainer=Dt.a.create("div","l7-marker-container",W),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(W,ct){x.MapServiceEvent.indexOf(W)!==-1?this.eventEmitter.on(W,ct):this.map.on(uo[W]||W,ct)}},{key:"off",value:function(W,ct){this.map.off(uo[W]||W,ct)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var W=this.map.transform;return[W.width,W.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(W){return this.map.setZoom(W)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(W){this.map.setCenter(W)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(W){this.map.setBearing(W)}},{key:"zoomIn",value:function(W,ct){this.map.zoomIn(W,ct)}},{key:"zoomOut",value:function(W,ct){this.map.zoomOut(W,ct)}},{key:"setPitch",value:function(W){return this.map.setPitch(W)}},{key:"panTo",value:function(W){this.map.panTo(W)}},{key:"panBy",value:function(W){this.panTo(W)}},{key:"fitBounds",value:function(W,ct){this.map.fitBounds(W,ct)}},{key:"setMaxZoom",value:function(W){this.map.setMaxZoom(W)}},{key:"setMinZoom",value:function(W){this.map.setMinZoom(W)}},{key:"setMapStatus",value:function(W){W.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),W.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),W.dragEnable===!1&&this.map.dragPan.disable(),W.dragEnable===!0&&this.map.dragPan.enable(),W.rotateEnable===!1&&this.map.dragRotate.disable(),W.rotateEnable===!0&&this.map.dragRotate.enable(),W.keyboardEnable===!1&&this.map.keyboard.disable(),W.keyboardEnable===!0&&this.map.keyboard.enable(),W.zoomEnable===!1&&this.map.scrollZoom.disable(),W.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(W,ct){this.map.flyTo({zoom:W,center:ct})}},{key:"setMapStyle",value:function(W){this.map.setStyle(this.getMapStyle(W))}},{key:"pixelToLngLat",value:function(W){return this.map.unproject(W)}},{key:"lngLatToPixel",value:function(W){return this.map.project(W)}},{key:"containerToLngLat",value:function(W){return this.map.unproject(W)}},{key:"lngLatToContainer",value:function(W){return this.map.project(W)}},{key:"lngLatToMercator",value:function(W,ct){var Et=window.mapboxgl.MercatorCoordinate.fromLngLat(W,ct),Ut=Et.x,fe=Ut===void 0?0:Ut,Ve=Et.y,Ge=Ve===void 0?0:Ve,Ke=Et.z,Rn=Ke===void 0?0:Ke;return{x:fe,y:Ge,z:Rn}}},{key:"getModelMatrix",value:function(W,ct,Et){var Ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],fe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},Ve=window.mapboxgl.MercatorCoordinate.fromLngLat(W,ct),Ge=Ve.meterInMercatorCoordinateUnits(),Ke=St.b.create();return St.b.translate(Ke,Ke,St.d.fromValues(Ve.x-fe.x,Ve.y-fe.y,Ve.z||0-fe.z)),St.b.scale(Ke,Ke,St.d.fromValues(Ge*Ut[0],-Ge*Ut[1],Ge*Ut[2])),St.b.rotateX(Ke,Ke,Et[0]),St.b.rotateY(Ke,Ke,Et[1]),St.b.rotateZ(Ke,Ke,Et[2]),Ke}},{key:"init",value:function(){var nt=X()(ft.a.mark(function ct(){var Et,Ut,fe,Ve,Ge,Ke,Rn,ur,rr,lr,Zn,qn,kr;return ft.a.wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:Et=this.config,Ut=Et.id,fe=Ut===void 0?"map":Ut,Ve=Et.attributionControl,Ge=Ve===void 0?!1:Ve,Ke=Et.style,Rn=Ke===void 0?"light":Ke,ur=Et.token,rr=ur===void 0?Vo:ur,lr=Et.rotation,Zn=lr===void 0?0:lr,qn=Et.mapInstance,kr=k()(Et,["id","attributionControl","style","token","rotation","mapInstance"]),this.viewport=new je,!qn&&!window.mapboxgl&&this.logger.error(this.configService.getSceneWarninfo("SDK")),rr===Vo&&Rn!=="blank"&&!window.mapboxgl.accessToken&&!qn&&this.logger.warn(this.configService.getSceneWarninfo("MapToken")),!qn&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=rr),qn?(this.map=qn,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(fe),this.map=new window.mapboxgl.Map(io({container:this.$mapContainer,style:this.getMapStyle(Rn),attributionControl:Ge,bearing:Zn},kr))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return Ir.stop()}},ct,this)}));function W(){return nt.apply(this,arguments)}return W}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(W){for(var ct,Et=arguments.length,Ut=new Array(Et>1?Et-1:0),fe=1;fe<Et;fe++)Ut[fe-1]=arguments[fe];(ct=this.eventEmitter).emit.apply(ct,[W].concat(Ut))}},{key:"once",value:function(W){for(var ct,Et=arguments.length,Ut=new Array(Et>1?Et-1:0),fe=1;fe<Et;fe++)Ut[fe-1]=arguments[fe];(ct=this.eventEmitter).once.apply(ct,[W].concat(Ut))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(W){var ct=this.map.getCanvas(),Et=W==="jpg"?ct==null?void 0:ct.toDataURL("image/jpeg"):ct==null?void 0:ct.toDataURL("image/png");return Et}},{key:"onCameraChanged",value:function(W){this.cameraChangedCallback=W}},{key:"creatAmapContainer",value:function(W){var ct=W;typeof W=="string"&&(ct=document.getElementById(W));var Et=document.createElement("div");return Et.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Et.id="l7_mapbox_div"+ka++,ct.appendChild(Et),Et}},{key:"getMapStyle",value:function(W){return typeof W!="string"?W:oe[W]?oe[W]:W}}]),lt}(),so),Si=_()(vi.prototype,"config",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ji=_()(vi.prototype,"configService",[sn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ji=_()(vi.prototype,"logger",[Vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),za=_()(vi.prototype,"coordinateSystemService",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),va=_()(vi.prototype,"eventEmitter",[kn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi))||Xr);function fs(lt){var nt=mo();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function mo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}L("BGjm")(`/* @antv/l7-maps */
.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var Ga=function(lt){n()(W,lt);var nt=fs(W);function W(){return s()(this,W),nt.apply(this,arguments)}return r()(W,[{key:"getServiceConstructor",value:function(){return Do}}]),W}(K);function us(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function Xo(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?us(Object(W),!0).forEach(function(ct){Ta(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):us(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}function Ta(lt,nt,W){return nt in lt?Object.defineProperty(lt,nt,{value:W,enumerable:!0,configurable:!0,writable:!0}):lt[nt]=W,lt}function mn(lt,nt){return yo(lt)||Ua(lt,nt)||Wr(lt,nt)||cr()}function cr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(lt,nt){if(!!lt){if(typeof lt=="string")return Di(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return Di(lt,nt)}}function Di(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}function Ua(lt,nt){var W=lt==null?null:typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(W!=null){var ct=[],Et=!0,Ut=!1,fe,Ve;try{for(W=W.call(lt);!(Et=(fe=W.next()).done)&&(ct.push(fe.value),!(nt&&ct.length===nt));Et=!0);}catch(Ge){Ut=!0,Ve=Ge}finally{try{!Et&&W.return!=null&&W.return()}finally{if(Ut)throw Ve}}return ct}}function yo(lt){if(Array.isArray(lt))return lt}var lo=E.a.memo(function(lt){var nt=lt.style,W=lt.className,ct=lt.map,Et=lt.option,Ut=lt.onSceneLoaded,fe=Object(U.createRef)(),Ve=Object(U.useState)(),Ge=mn(Ve,2),Ke=Ge[0],Rn=Ge[1];return Object(U.useEffect)(function(){var ur=new t.Scene(Xo(Xo({id:fe.current},Et),{},{map:new Ga(ct)}));return ur.on("loaded",function(){Rn(ur),Ut&&Ut(ur)}),function(){ur.destroy()}},[]),Object(U.useEffect)(function(){Ke&&ct.style&&Ke.setMapStyle(ct.style)},[JSON.stringify(ct.style)]),Object(U.useEffect)(function(){Ke&&ct.zoom&&Ke.setZoom(ct.zoom)},[ct.zoom]),Object(U.useEffect)(function(){Ke&&ct.center&&Ke.setCenter(ct.center)},[JSON.stringify(ct.center)]),Object(U.useEffect)(function(){Ke&&ct.pitch!==void 0&&Ke.setPitch(ct.pitch||0)},[ct.pitch]),Object(U.useEffect)(function(){Ke&&ct.rotation&&Ke.setRotation(ct.rotation)},[ct.rotation]),E.a.createElement(T.Provider,{value:Ke},Object(U.createElement)("div",{ref:fe,style:nt,className:W},Ke&&lt.children))}),La=lo,Va=L("PJYZ"),ts=L.n(Va),ls=L("QkVN"),Ki=L.n(ls),_u=L("uhBA"),Fo=L("cDf5"),hs=L.n(Fo),$s=L("zvhG"),ds=L.n($s);function vs(lt,nt){var W;if(typeof Symbol=="undefined"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(W=Qs(lt))||nt&&lt&&typeof lt.length=="number"){W&&(lt=W);var ct=0,Et=function(){};return{s:Et,n:function(){return ct>=lt.length?{done:!0}:{done:!1,value:lt[ct++]}},e:function(Ke){throw Ke},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=!0,fe=!1,Ve;return{s:function(){W=lt[Symbol.iterator]()},n:function(){var Ke=W.next();return Ut=Ke.done,Ke},e:function(Ke){fe=!0,Ve=Ke},f:function(){try{!Ut&&W.return!=null&&W.return()}finally{if(fe)throw Ve}}}}function Qs(lt,nt){if(!!lt){if(typeof lt=="string")return Mu(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return Mu(lt,nt)}}function Mu(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}var ps;function wu(lt,nt,W){var ct=W-nt,Et=((lt-nt)%ct+ct)%ct+nt;return Et===nt?W:Et}function Ds(lt,nt,W){return Math.min(W,Math.max(nt,lt))}function Aa(lt,nt,W){return lt*(1-W)+nt*W}function lu(lt,nt,W,ct){var Et=new ds.a(lt,nt,W,ct);return function(Ut){return Et.solve(Ut)}}var Pu=lu(.25,.1,.25,1);function Zu(){return window.matchMedia?(ps==null&&(ps=window.matchMedia("(prefers-reduced-motion: reduce)")),ps.matches):!1}function vl(lt,nt){var W={},ct=vs(nt),Et;try{for(ct.s();!(Et=ct.n()).done;){var Ut=Et.value;Ut in lt&&(W[Ut]=lt[Ut])}}catch(fe){ct.e(fe)}finally{ct.f()}return W}var Tu=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),Ao=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,es=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function gs(lt){var nt=Ao(lt);return{cancel:function(){return es(nt)}}}var po=function(){function lt(nt,W){s()(this,lt),this.ne=void 0,this.sw=void 0,nt&&(W?this.setSouthWest(nt).setNorthEast(W):nt.length===4?this.setSouthWest([nt[0],nt[1]]).setNorthEast([nt[2],nt[3]]):this.setSouthWest(nt[0]).setNorthEast(nt[1]))}return r()(lt,[{key:"setNorthEast",value:function(W){return this.ne=W instanceof Oo?new Oo(W.lng,W.lat):Oo.convert(W),this}},{key:"setSouthWest",value:function(W){return this.sw=W instanceof Oo?new Oo(W.lng,W.lat):Oo.convert(W),this}},{key:"extend",value:function(W){var ct=this.sw,Et=this.ne,Ut,fe;if(W instanceof Oo)Ut=W,fe=W;else if(W instanceof lt){if(Ut=W.sw,fe=W.ne,!Ut||!fe)return this}else{if(Array.isArray(W))if(W.length===4||W.every(Array.isArray)){var Ve=W;return this.extend(lt.convert(Ve))}else{var Ge=W;return this.extend(Oo.convert(Ge))}return this}return!ct&&!Et?(this.sw=new Oo(Ut.lng,Ut.lat),this.ne=new Oo(fe.lng,fe.lat)):(ct.lng=Math.min(Ut.lng,ct.lng),ct.lat=Math.min(Ut.lat,ct.lat),Et.lng=Math.max(fe.lng,Et.lng),Et.lat=Math.max(fe.lat,Et.lat)),this}},{key:"getCenter",value:function(){return new Oo((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Oo(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Oo(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(W){var ct=Oo.convert(W),Et=ct.lng,Ut=ct.lat,fe=this.sw.lat<=Ut&&Ut<=this.ne.lat,Ve=this.sw.lng<=Et&&Et<=this.ne.lng;return this.sw.lng>this.ne.lng&&(Ve=this.sw.lng>=Et&&Et>=this.ne.lng),fe&&Ve}}],[{key:"convert",value:function(W){return W instanceof lt?W:new lt(W)}}]),lt}(),cu=63710088e-1,Oo=function(){function lt(nt,W){if(s()(this,lt),this.lng=void 0,this.lat=void 0,isNaN(nt)||isNaN(W))throw new Error("Invalid LngLat object: (".concat(nt,", ").concat(W,")"));if(this.lng=+nt,this.lat=+W,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return r()(lt,[{key:"wrap",value:function(){return new lt(wu(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toBounds",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ct=40075017,Et=360*W/ct,Ut=Et/Math.cos(Math.PI/180*this.lat);return new po(new lt(this.lng-Ut,this.lat-Et),new lt(this.lng+Ut,this.lat+Et))}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(W){var ct=Math.PI/180,Et=this.lat*ct,Ut=W.lat*ct,fe=Math.sin(Et)*Math.sin(Ut)+Math.cos(Et)*Math.cos(Ut)*Math.cos((W.lng-this.lng)*ct),Ve=cu*Math.acos(Math.min(fe,1));return Ve}}],[{key:"convert",value:function(W){if(W instanceof lt)return W;if(Array.isArray(W)&&(W.length===2||W.length===3))return new lt(Number(W[0]),Number(W[1]));if(!Array.isArray(W)&&hs()(W)==="object"&&W!==null){var ct="lng"in W?W.lng:W.lon;return new lt(Number(ct),Number(W.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),lt}(),ba=function(){function lt(nt,W){s()(this,lt),this.x=void 0,this.y=void 0,this.x=nt,this.y=W}return r()(lt,[{key:"clone",value:function(){return new lt(this.x,this.y)}},{key:"_add",value:function(W){return this.x+=W.x,this.y+=W.y,this}},{key:"add",value:function(W){return this.clone()._add(W)}},{key:"_sub",value:function(W){return this.x-=W.x,this.y-=W.y,this}},{key:"sub",value:function(W){return this.clone()._sub(W)}},{key:"_multByPoint",value:function(W){return this.x*=W.x,this.y*=W.y,this}},{key:"multByPoint",value:function(W){return this.clone()._multByPoint(W)}},{key:"_divByPoint",value:function(W){return this.x/=W.x,this.y/=W.y,this}},{key:"divByPoint",value:function(W){return this.clone()._divByPoint(W)}},{key:"_mult",value:function(W){return this.x*=W,this.y*=W,this}},{key:"mult",value:function(W){return this.clone()._mult(W)}},{key:"_div",value:function(W){return this.x/=W,this.y/=W,this}},{key:"div",value:function(W){return this.clone()._div(W)}},{key:"_rotate",value:function(W){var ct=Math.cos(W),Et=Math.sin(W),Ut=ct*this.x-Et*this.y,fe=Et*this.x+ct*this.y;return this.x=Ut,this.y=fe,this}},{key:"rotate",value:function(W){return this.clone()._rotate(W)}},{key:"_rotateAround",value:function(W,ct){var Et=Math.cos(W),Ut=Math.sin(W),fe=ct.x+Et*(this.x-ct.x)-Ut*(this.y-ct.y),Ve=ct.y+Ut*(this.x-ct.x)+Et*(this.y-ct.y);return this.x=fe,this.y=Ve,this}},{key:"roateAround",value:function(W,ct){return this.clone()._rotateAround(W,ct)}},{key:"_matMult",value:function(W){var ct=W[0]*this.x+W[1]*this.y,Et=W[2]*this.x+W[3]*this.y;return this.x=ct,this.y=Et,this}},{key:"matMult",value:function(W){return this.clone()._matMult(W)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var W=this.y;return this.y=this.x,this.x=-W,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(W){return this.x===W.x&&this.y===W.y}},{key:"dist",value:function(W){return Math.sqrt(this.distSqr(W))}},{key:"distSqr",value:function(W){var ct=W.x-this.x,Et=W.y-this.y;return ct*ct+Et*Et}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(W){return Math.atan2(this.y-W.y,this.x-W.x)}},{key:"angleWith",value:function(W){return this.angleWithSep(W.x,W.y)}},{key:"angleWithSep",value:function(W,ct){return Math.atan2(this.x*ct-this.y*W,this.x*W+this.y*ct)}}],[{key:"convert",value:function(W){return W instanceof lt?W:Array.isArray(W)?new lt(W[0],W[1]):W}}]),lt}(),As=function(){function lt(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(s()(this,lt),this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,isNaN(nt)||nt<0||isNaN(W)||W<0||isNaN(ct)||ct<0||isNaN(Et)||Et<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=nt,this.bottom=W,this.left=ct,this.right=Et}return r()(lt,[{key:"interpolate",value:function(W,ct,Et){return ct.top!=null&&W.top!=null&&(this.top=Aa(W.top,ct.top,Et)),ct.bottom!=null&&W.bottom!=null&&(this.bottom=Aa(W.bottom,ct.bottom,Et)),ct.left!=null&&W.left!=null&&(this.left=Aa(W.left,ct.left,Et)),ct.right!=null&&W.right!=null&&(this.right=Aa(W.right,ct.right,Et)),this}},{key:"getCenter",value:function(W,ct){var Et=Ds((this.left+W-this.right)/2,0,W),Ut=Ds((this.top+ct-this.bottom)/2,0,ct);return new ba(Et,Ut)}},{key:"equals",value:function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right}},{key:"clone",value:function(){return new lt(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),lt}(),qs=2*Math.PI*cu;function js(lt){return qs*Math.cos(lt*Math.PI/180)}function ms(lt){return(180+lt)/360}function Au(lt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+lt*Math.PI/360)))/360}function ks(lt,nt){return lt/js(nt)}function Ya(lt){return lt*360-180}function nl(lt){var nt=180-lt*360;return 360/Math.PI*Math.atan(Math.exp(nt*Math.PI/180))-90}function Zl(lt,nt){return lt*js(nl(nt))}function Al(lt){return 1/Math.cos(lt*Math.PI/180)}var pl=function(){function lt(nt,W){var ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;s()(this,lt),this.x=void 0,this.y=void 0,this.z=void 0,this.x=+nt,this.y=+W,this.z=+ct}return r()(lt,[{key:"toLngLat",value:function(){return new Oo(Ya(this.x),nl(this.y))}},{key:"toAltitude",value:function(){return Zl(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/qs*Al(nl(this.y))}}],[{key:"fromLngLat",value:function(W){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Et=Oo.convert(W);return new lt(ms(Et.lng),Au(Et.lat),ks(ct,Et.lat))}}]),lt}();function Ku(lt,nt){var W;if(typeof Symbol=="undefined"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(W=Cu(lt))||nt&&lt&&typeof lt.length=="number"){W&&(lt=W);var ct=0,Et=function(){};return{s:Et,n:function(){return ct>=lt.length?{done:!0}:{done:!1,value:lt[ct++]}},e:function(Ke){throw Ke},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=!0,fe=!1,Ve;return{s:function(){W=lt[Symbol.iterator]()},n:function(){var Ke=W.next();return Ut=Ke.done,Ke},e:function(Ke){fe=!0,Ve=Ke},f:function(){try{!Ut&&W.return!=null&&W.return()}finally{if(fe)throw Ve}}}}function Cu(lt,nt){if(!!lt){if(typeof lt=="string")return Gs(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return Gs(lt,nt)}}function Gs(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}var Cl=8192,ns=function(){function lt(nt,W,ct,Et,Ut){s()(this,lt),this.tileSize=void 0,this.tileZoom=void 0,this.lngRange=void 0,this.latRange=void 0,this.maxValidLatitude=void 0,this.scale=void 0,this.width=void 0,this.height=void 0,this.angle=void 0,this.rotationMatrix=void 0,this.pixelsToGLUnits=void 0,this.cameraToCenterDistance=void 0,this.mercatorMatrix=void 0,this.projMatrix=void 0,this.invProjMatrix=void 0,this.alignedProjMatrix=void 0,this.pixelMatrix=void 0,this.pixelMatrixInverse=void 0,this.glCoordMatrix=void 0,this.labelPlaneMatrix=void 0,this._fov=void 0,this._pitch=void 0,this._zoom=void 0,this._renderWorldCopies=void 0,this._minZoom=void 0,this._maxZoom=void 0,this._minPitch=void 0,this._maxPitch=void 0,this._center=void 0,this.zoomFraction=void 0,this.unmodified=void 0,this.edgeInsets=void 0,this.constraining=void 0,this.posMatrixCache=void 0,this.alignedPosMatrixCache=void 0,this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ut===void 0?!0:Ut,this._minZoom=nt||0,this._maxZoom=W||22,this._minPitch=ct==null?0:ct,this._maxPitch=Et==null?60:Et,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Oo(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new As,this.posMatrixCache={},this.alignedPosMatrixCache={}}return r()(lt,[{key:"minZoom",get:function(){return this._minZoom},set:function(W){this._minZoom!==W&&(this._minZoom=W,this.zoom=Math.max(this.zoom,W))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(W){this._maxZoom!==W&&(this._maxZoom=W,this.zoom=Math.min(this.zoom,W))}},{key:"minPitch",get:function(){return this._minPitch},set:function(W){this._minPitch!==W&&(this._minPitch=W,this._pitch=Math.max(this._pitch,W))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(W){this._maxPitch!==W&&(this._maxPitch=W,this._pitch=Math.min(this._pitch,W))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(W){W===void 0?W=!0:W===null&&(W=!1),this._renderWorldCopies=W}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new ba(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(W){var ct=-wu(W,-180,180)*Math.PI/180;this.angle!==ct&&(this.unmodified=!1,this.angle=ct,this.calcMatrices(),this.rotationMatrix=St.a.create(),St.a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(W){var ct=Ds(W,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==ct&&(this.unmodified=!1,this._pitch=ct,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(W){W=Math.max(.01,Math.min(60,W)),this._fov!==W&&(this.unmodified=!1,this._fov=W/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(W){var ct=Math.min(Math.max(W,this._minZoom),this._maxZoom);this._zoom!==ct&&(this.unmodified=!1,this._zoom=ct,this.scale=this.zoomScale(ct),this.tileZoom=Math.floor(ct),this.zoomFraction=ct-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(W){W.lat===this._center.lat&&W.lng===this._center.lng||(this.unmodified=!1,this._center=W,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(W){this.edgeInsets.equals(W)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,W,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var W=new lt(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W.center=this._center,W.zoom=this.zoom,W.angle=this.angle,W.fov=this._fov,W.pitch=this._pitch,W.unmodified=this.unmodified,W.edgeInsets=this.edgeInsets.clone(),W.calcMatrices(),W}},{key:"isPaddingEqual",value:function(W){return this.edgeInsets.equals(W)}},{key:"interpolatePadding",value:function(W,ct,Et){this.unmodified=!1,this.edgeInsets.interpolate(W,ct,Et),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(W){var ct=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,ct)}},{key:"resize",value:function(W,ct){this.width=W,this.height=ct,this.pixelsToGLUnits=[2/W,-2/ct],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(W){return Math.pow(2,W)}},{key:"scaleZoom",value:function(W){return Math.log(W)/Math.LN2}},{key:"project",value:function(W){var ct=Ds(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new ba(ms(W.lng)*this.worldSize,Au(ct)*this.worldSize)}},{key:"unproject",value:function(W){return new pl(W.x/this.worldSize,W.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(W,ct){var Et=this.pointCoordinate(ct),Ut=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(W),Ve=new pl(fe.x-(Et.x-Ut.x),fe.y-(Et.y-Ut.y));this.center=this.coordinateLocation(Ve),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(W){var ct=0,Et=new Float32Array([W.x,W.y,0,1]),Ut=new Float32Array([W.x,W.y,1,1]);St.e.transformMat4(Et,Et,this.pixelMatrixInverse),St.e.transformMat4(Ut,Ut,this.pixelMatrixInverse);var fe=Et[3],Ve=Ut[3],Ge=Et[0]/fe,Ke=Ut[0]/Ve,Rn=Et[1]/fe,ur=Ut[1]/Ve,rr=Et[2]/fe,lr=Ut[2]/Ve,Zn=rr===lr?0:(ct-rr)/(lr-rr);return new pl(Aa(Ge,Ke,Zn)/this.worldSize,Aa(Rn,ur,Zn)/this.worldSize)}},{key:"getBounds",value:function(){return new po().extend(this.pointLocation(new ba(0,0))).extend(this.pointLocation(new ba(this.width,0))).extend(this.pointLocation(new ba(this.width,this.height))).extend(this.pointLocation(new ba(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new po([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new ba(0,0)),ct=new Float32Array([W.x*this.worldSize,W.y*this.worldSize,0,1]),Et=St.e.transformMat4(ct,ct,this.pixelMatrix);return Et[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var W=this._pitch,ct=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new ba(0,ct))}},{key:"getCameraQueryGeometry",value:function(W){var ct=this.getCameraPoint();if(W.length===1)return[W[0],ct];var Et=ct.x,Ut=ct.y,fe=ct.x,Ve=ct.y,Ge=Ku(W),Ke;try{for(Ge.s();!(Ke=Ge.n()).done;){var Rn=Ke.value;Et=Math.min(Et,Rn.x),Ut=Math.min(Ut,Rn.y),fe=Math.max(fe,Rn.x),Ve=Math.max(Ve,Rn.y)}}catch(ur){Ge.e(ur)}finally{Ge.f()}return[new ba(Et,Ut),new ba(fe,Ut),new ba(fe,Ve),new ba(Et,Ve),new ba(Et,Ut)]}},{key:"coordinatePoint",value:function(W){var ct=St.e.fromValues(W.x*this.worldSize,W.y*this.worldSize,0,1);return St.e.transformMat4(ct,ct,this.pixelMatrix),new ba(ct[0]/ct[3],ct[1]/ct[3])}},{key:"locationPoint",value:function(W){return this.coordinatePoint(this.locationCoordinate(W))}},{key:"pointLocation",value:function(W){return this.coordinateLocation(this.pointCoordinate(W))}},{key:"locationCoordinate",value:function(W){return pl.fromLngLat(W)}},{key:"coordinateLocation",value:function(W){return W.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var W=-90,ct=90,Et=-180,Ut=180,fe,Ve,Ge,Ke,Rn=this.size,ur=this.unmodified;if(this.latRange){var rr=this.latRange;W=Au(rr[1])*this.worldSize,ct=Au(rr[0])*this.worldSize,fe=ct-W<Rn.y?Rn.y/(ct-W):0}if(this.lngRange){var lr=this.lngRange;Et=ms(lr[0])*this.worldSize,Ut=ms(lr[1])*this.worldSize,Ve=Ut-Et<Rn.x?Rn.x/(Ut-Et):0}var Zn=this.point,qn=Math.max(Ve||0,fe||0);if(qn){this.center=this.unproject(new ba(Ve?(Ut+Et)/2:Zn.x,fe?(ct+W)/2:Zn.y)),this.zoom+=this.scaleZoom(qn),this.unmodified=ur,this.constraining=!1;return}if(this.latRange){var kr=Zn.y,ti=Rn.y/2;kr-ti<W&&(Ke=W+ti),kr+ti>ct&&(Ke=ct-ti)}if(this.lngRange){var Ir=Zn.x,Ci=Rn.x/2;Ir-Ci<Et&&(Ge=Et+Ci),Ir+Ci>Ut&&(Ge=Ut-Ci)}(Ge!==void 0||Ke!==void 0)&&(this.center=this.unproject(new ba(Ge!==void 0?Ge:Zn.x,Ke!==void 0?Ke:Zn.y))),this.unmodified=ur,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(!!this.height){var W=this._fov/2,ct=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var Et=Math.PI/2+this._pitch,Ut=this._fov*(.5+ct.y/this.height),fe=Math.sin(Ut)*this.cameraToCenterDistance/Math.sin(Ds(Math.PI-Et-Ut,.01,Math.PI-.01)),Ve=this.point,Ge=Ve.x,Ke=Ve.y,Rn=Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance,ur=Rn*1.01,rr=this.height/50,lr=St.b.create();St.b.perspective(lr,this._fov,this.width/this.height,rr,ur),lr[8]=-ct.x*2/this.width,lr[9]=ct.y*2/this.height,St.b.scale(lr,lr,[1,-1,1]),St.b.translate(lr,lr,[0,0,-this.cameraToCenterDistance]),St.b.rotateX(lr,lr,this._pitch),St.b.rotateZ(lr,lr,this.angle),St.b.translate(lr,lr,[-Ge,-Ke,0]),this.mercatorMatrix=St.b.scale(St.b.create(),lr,[this.worldSize,this.worldSize,this.worldSize]),St.b.scale(lr,lr,St.d.fromValues(1,1,ks(1,this.center.lat)*this.worldSize)),this.projMatrix=lr,this.invProjMatrix=St.b.invert(St.b.create(),this.projMatrix);var Zn=this.width%2/2,qn=this.height%2/2,kr=Math.cos(this.angle),ti=Math.sin(this.angle),Ir=Ge-Math.round(Ge)+kr*Zn+ti*qn,Ci=Ke-Math.round(Ke)+kr*qn+ti*Zn,ni=St.b.clone(lr);if(St.b.translate(ni,ni,[Ir>.5?Ir-1:Ir,Ci>.5?Ci-1:Ci,0]),this.alignedProjMatrix=ni,lr=St.b.create(),St.b.scale(lr,lr,[this.width/2,-this.height/2,1]),St.b.translate(lr,lr,[1,-1,0]),this.labelPlaneMatrix=lr,lr=St.b.create(),St.b.scale(lr,lr,[1,-1,1]),St.b.translate(lr,lr,[-1,-1,0]),St.b.scale(lr,lr,[2/this.width,2/this.height,1]),this.glCoordMatrix=lr,this.pixelMatrix=St.b.multiply(St.b.create(),this.labelPlaneMatrix,this.projMatrix),lr=St.b.invert(St.b.create(),this.pixelMatrix),!lr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=lr,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),lt}(),Wa=function lt(nt){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s()(this,lt),this.type=void 0,Ki()(this,W),this.type=nt};function fu(lt){var nt=Xu();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function Xu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var Ll=function(lt){n()(W,lt);var nt=fu(W);function W(ct){var Et;s()(this,W),Et=nt.call(this),Et.transform=void 0,Et.options=void 0,Et.moving=void 0,Et.zooming=void 0,Et.rotating=void 0,Et.pitching=void 0,Et.padding=void 0,Et.bearingSnap=void 0,Et.easeEndTimeoutID=void 0,Et.easeStart=void 0,Et.easeOptions=void 0,Et.easeId=void 0,Et.onEaseFrame=void 0,Et.onEaseEnd=void 0,Et.easeFrameId=void 0,Et.renderFrameCallback=function(){var Rn=Math.min((Tu()-Et.easeStart)/Et.easeOptions.duration,1);Et.onEaseFrame(Et.easeOptions.easing(Rn)),Rn<1?Et.easeFrameId=Et.requestRenderFrame(Et.renderFrameCallback):Et.stop()},Et.options=ct;var Ut=ct.minZoom,fe=ct.maxZoom,Ve=ct.minPitch,Ge=ct.maxPitch,Ke=ct.renderWorldCopies;return Et.moving=!1,Et.zooming=!1,Et.bearingSnap=ct.bearingSnap,Et.transform=new ns(Ut,fe,Ve,Ge,Ke),Et}return r()(W,[{key:"requestRenderFrame",value:function(Et){return 0}},{key:"cancelRenderFrame",value:function(Et){}},{key:"getCenter",value:function(){var Et=this.transform.center,Ut=Et.lng,fe=Et.lat;return new Oo(Ut,fe)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(Et,Ut){return this.jumpTo({center:Et},Ut)}},{key:"setPitch",value:function(Et,Ut){return this.jumpTo({pitch:Et},Ut),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(Et,Ut,fe){return this.easeTo(Ki()({center:Et},Ut),fe)}},{key:"zoomOut",value:function(Et,Ut){return this.zoomTo(this.getZoom()-1,Et,Ut),this}},{key:"setBearing",value:function(Et,Ut){return this.jumpTo({bearing:Et},Ut),this}},{key:"setZoom",value:function(Et,Ut){return this.jumpTo({zoom:Et},Ut),this}},{key:"zoomIn",value:function(Et,Ut){return this.zoomTo(this.getZoom()+1,Et,Ut),this}},{key:"zoomTo",value:function(Et,Ut,fe){return this.easeTo(Ki()({zoom:Et},Ut),fe)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(Et,Ut){return this.jumpTo({padding:Et},Ut),this}},{key:"rotateTo",value:function(Et,Ut,fe){return this.easeTo(Ki()({bearing:Et},Ut),fe)}},{key:"resetNorth",value:function(Et,Ut){return this.rotateTo(0,Ki()({duration:1e3},Et),Ut),this}},{key:"resetNorthPitch",value:function(Et,Ut){return this.easeTo(Ki()({bearing:0,pitch:0,duration:1e3},Et),Ut),this}},{key:"fitBounds",value:function(Et,Ut,fe){return this.fitInternal(this.cameraForBounds(Et,Ut),Ut,fe)}},{key:"cameraForBounds",value:function(Et,Ut){return Et=po.convert(Et),this.cameraForBoxAndBearing(Et.getNorthWest(),Et.getSouthEast(),0,Ut)}},{key:"snapToNorth",value:function(Et,Ut){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(Et,Ut):this}},{key:"jumpTo",value:function(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ut=arguments.length>1?arguments[1]:void 0;this.stop();var fe=this.transform,Ve=!1,Ge=!1,Ke=!1;return Et.zoom&&fe.zoom!==+Et.zoom&&(Ve=!0,fe.zoom=+Et.zoom),Et.center!==void 0&&(fe.center=Oo.convert(Et.center)),Et.bearing&&fe.bearing!==+Et.bearing&&(Ge=!0,fe.bearing=+Et.bearing),Et.pitch&&fe.pitch!==+Et.pitch&&(Ke=!0,fe.pitch=+Et.pitch),Et.padding!=null&&!fe.isPaddingEqual(Et.padding)&&(fe.padding=Et.padding),this.emit("movestart",new Wa("movestart",Ut)),this.emit("move",new Wa("move",Ut)),Ve&&(this.emit("zoomstart",new Wa("zoomstart",Ut)),this.emit("zoom",new Wa("zoom",Ut)),this.emit("zoomend",new Wa("zoomend",Ut))),Ge&&(this.emit("rotatestart",new Wa("rotatestart",Ut)),this.emit("rotate",new Wa("rotate",Ut)),this.emit("rotateend",new Wa("rotateend",Ut))),Ke&&(this.emit("pitchstart",new Wa("pitchstart",Ut)),this.emit("pitch",new Wa("pitch",Ut)),this.emit("pitchend",new Wa("pitchend",Ut))),this.emit("moveend",new Wa("moveend",Ut))}},{key:"easeTo",value:function(){var Et=this,Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=arguments.length>1?arguments[1]:void 0;Ut=Ki()({offset:[0,0],duration:500,easing:Pu},Ut),(Ut.animate===!1||!Ut.essential&&Zu())&&(Ut.duration=0);var Ve=this.transform,Ge=this.getZoom(),Ke=this.getBearing(),Rn=this.getPitch(),ur=this.getPadding(),rr=Ut.zoom?+Ut.zoom:Ge,lr=Ut.bearing?this.normalizeBearing(Ut.bearing,Ke):Ke,Zn=Ut.pitch?+Ut.pitch:Rn,qn=Ut.padding?Ut.padding:Ve.padding,kr=ba.convert(Ut.offset),ti=Ve.centerPoint.add(kr),Ir=Ve.pointLocation(ti),Ci=Oo.convert(Ut.center||Ir);this.normalizeCenter(Ci);var ni=Ve.project(Ir),qr=Ve.project(Ci).sub(ni),Qr=Ve.zoomScale(rr-Ge),oi,Ii;Ut.around&&(oi=Oo.convert(Ut.around),Ii=Ve.locationPoint(oi));var ki={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||rr!==Ge,this.rotating=this.rotating||Ke!==lr,this.pitching=this.pitching||Zn!==Rn,this.padding=!Ve.isPaddingEqual(qn),this.easeId=Ut.easeId,this.prepareEase(fe,Ut.noMoveStart,ki),clearTimeout(this.easeEndTimeoutID),this.ease(function(xi){if(Et.zooming&&(Ve.zoom=Aa(Ge,rr,xi)),Et.rotating&&(Ve.bearing=Aa(Ke,lr,xi)),Et.pitching&&(Ve.pitch=Aa(Rn,Zn,xi)),Et.padding&&(Ve.interpolatePadding(ur,qn,xi),ti=Ve.centerPoint.add(kr)),oi)Ve.setLocationAtPoint(oi,Ii);else{var di=Ve.zoomScale(Ve.zoom-Ge),ui=rr>Ge?Math.min(2,Qr):Math.max(.5,Qr),da=Math.pow(ui,1-xi),aa=Ve.unproject(ni.add(qr.mult(xi*da)).mult(di));Ve.setLocationAtPoint(Ve.renderWorldCopies?aa.wrap():aa,ti)}Et.fireMoveEvents(fe)},function(xi){Et.afterEase(fe,xi)},Ut),this}},{key:"flyTo",value:function(){var Et=this,Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=arguments.length>1?arguments[1]:void 0;if(!Ut.essential&&Zu()){var Ve=vl(Ut,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ve,fe)}this.stop(),Ut=Ki()({offset:[0,0],speed:1.2,curve:1.42,easing:Pu},Ut);var Ge=this.transform,Ke=this.getZoom(),Rn=this.getBearing(),ur=this.getPitch(),rr=this.getPadding(),lr=Ut.zoom?Ds(+Ut.zoom,Ge.minZoom,Ge.maxZoom):Ke,Zn=Ut.bearing?this.normalizeBearing(Ut.bearing,Rn):Rn,qn=Ut.pitch?+Ut.pitch:ur,kr="padding"in Ut?Ut.padding:Ge.padding,ti=Ge.zoomScale(lr-Ke),Ir=ba.convert(Ut.offset),Ci=Ge.centerPoint.add(Ir),ni=Ge.pointLocation(Ci),qr=Oo.convert(Ut.center||ni);this.normalizeCenter(qr);var Qr=Ge.project(ni),oi=Ge.project(qr).sub(Qr),Ii=Ut.curve,ki=Math.max(Ge.width,Ge.height),xi=ki/ti,di=oi.mag();if("minZoom"in Ut){var ui=Ds(Math.min(Ut.minZoom,Ke,lr),Ge.minZoom,Ge.maxZoom),da=ki/Ge.zoomScale(ui-Ke);Ii=Math.sqrt(da/di*2)}var aa=Ii*Ii;function Gi(zo){var Xs=(xi*xi-ki*ki+(zo?-1:1)*aa*aa*di*di)/(2*(zo?xi:ki)*aa*di);return Math.log(Math.sqrt(Xs*Xs+1)-Xs)}function oo(zo){return(Math.exp(zo)-Math.exp(-zo))/2}function ja(zo){return(Math.exp(zo)+Math.exp(-zo))/2}function So(zo){return oo(zo)/ja(zo)}var Io=Gi(0),ou=function(Xs){return ja(Io)/ja(Io+Ii*Xs)},Bl=function(Xs){return ki*((ja(Io)*So(Io+Ii*Xs)-oo(Io))/aa)/di},Po=(Gi(1)-Io)/Ii;if(Math.abs(di)<1e-6||!isFinite(Po)){if(Math.abs(ki-xi)<1e-6)return this.easeTo(Ut,fe);var Qu=xi<ki?-1:1;Po=Math.abs(Math.log(xi/ki))/Ii,Bl=function(){return 0},ou=function(Xs){return Math.exp(Qu*Ii*Xs)}}if("duration"in Ut)Ut.duration=+Ut.duration;else{var bu="screenSpeed"in Ut?+Ut.screenSpeed/Ii:+Ut.speed;Ut.duration=1e3*Po/bu}return Ut.maxDuration&&Ut.duration>Ut.maxDuration&&(Ut.duration=0),this.zooming=!0,this.rotating=Rn!==Zn,this.pitching=qn!==ur,this.padding=!Ge.isPaddingEqual(kr),this.prepareEase(fe,!1),this.ease(function(zo){var Xs=zo*Po,Fl=1/ou(Xs);Ge.zoom=zo===1?lr:Ke+Ge.scaleZoom(Fl),Et.rotating&&(Ge.bearing=Aa(Rn,Zn,zo)),Et.pitching&&(Ge.pitch=Aa(ur,qn,zo)),Et.padding&&(Ge.interpolatePadding(rr,kr,zo),Ci=Ge.centerPoint.add(Ir));var kl=zo===1?qr:Ge.unproject(Qr.add(oi.mult(Bl(Xs))).mult(Fl));Ge.setLocationAtPoint(Ge.renderWorldCopies?kl.wrap():kl,Ci),Et.fireMoveEvents(fe)},function(){return Et.afterEase(fe)},Ut),this}},{key:"fitScreenCoordinates",value:function(Et,Ut,fe,Ve,Ge){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(ba.convert(Et)),this.transform.pointLocation(ba.convert(Ut)),fe,Ve),Ve,Ge)}},{key:"stop",value:function(Et,Ut){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var fe=this.onEaseEnd;delete this.onEaseEnd,fe.call(this,Ut)}return this}},{key:"normalizeBearing",value:function(Et,Ut){Et=wu(Et,-180,180);var fe=Math.abs(Et-Ut);return Math.abs(Et-360-Ut)<fe&&(Et-=360),Math.abs(Et+360-Ut)<fe&&(Et+=360),Et}},{key:"normalizeCenter",value:function(Et){var Ut=this.transform;if(!(!Ut.renderWorldCopies||Ut.lngRange)){var fe=Et.lng-Ut.center.lng;Et.lng+=fe>180?-360:fe<-180?360:0}}},{key:"fireMoveEvents",value:function(Et){this.emit("move",new Wa("move",Et)),this.zooming&&this.emit("zoom",new Wa("zoom",Et)),this.rotating&&this.emit("rotate",new Wa("rotate",Et)),this.pitching&&this.emit("rotate",new Wa("pitch",Et))}},{key:"prepareEase",value:function(Et){var Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!Ut&&!fe.moving&&this.emit("movestart",new Wa("movestart",Et)),this.zooming&&!fe.zooming&&this.emit("zoomstart",new Wa("zoomstart",Et)),this.rotating&&!fe.rotating&&this.emit("rotatestart",new Wa("rotatestart",Et)),this.pitching&&!fe.pitching&&this.emit("pitchstart",new Wa("pitchstart",Et))}},{key:"afterEase",value:function(Et,Ut){if(!(this.easeId&&Ut&&this.easeId===Ut)){delete this.easeId;var fe=this.zooming,Ve=this.rotating,Ge=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,fe&&this.emit("zoomend",new Wa("zoomend",Et)),Ve&&this.emit("rotateend",new Wa("rotateend",Et)),Ge&&this.emit("pitchend",new Wa("pitchend",Et)),this.emit("moveend",new Wa("moveend",Et))}}},{key:"ease",value:function(Et,Ut,fe){fe.animate===!1||fe.duration===0?(Et(1),Ut()):(this.easeStart=Tu(),this.easeOptions=fe,this.onEaseFrame=Et,this.onEaseEnd=Ut,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(Et,Ut,fe,Ve){var Ge={top:0,bottom:0,right:0,left:0};if(Ve=Ki()({padding:Ge,offset:[0,0],maxZoom:this.transform.maxZoom},Ve),typeof Ve.padding=="number"){var Ke=Ve.padding;Ve.padding={top:Ke,bottom:Ke,right:Ke,left:Ke}}Ve.padding=Ki()(Ge,Ve.padding);var Rn=this.transform,ur=Rn.padding,rr=Rn.project(Oo.convert(Et)),lr=Rn.project(Oo.convert(Ut)),Zn=rr.rotate(-fe*Math.PI/180),qn=lr.rotate(-fe*Math.PI/180),kr=new ba(Math.max(Zn.x,qn.x),Math.max(Zn.y,qn.y)),ti=new ba(Math.min(Zn.x,qn.x),Math.min(Zn.y,qn.y)),Ir=kr.sub(ti),Ci=(Rn.width-(ur.left+ur.right+Ve.padding.left+Ve.padding.right))/Ir.x,ni=(Rn.height-(ur.top+ur.bottom+Ve.padding.top+Ve.padding.bottom))/Ir.y;if(!(ni<0||Ci<0)){var qr=Math.min(Rn.scaleZoom(Rn.scale*Math.min(Ci,ni)),Ve.maxZoom),Qr=ba.convert(Ve.offset),oi=(Ve.padding.left-Ve.padding.right)/2,Ii=(Ve.padding.top-Ve.padding.bottom)/2,ki=new ba(Qr.x+oi,Qr.y+Ii),xi=ki.mult(Rn.scale/Rn.zoomScale(qr)),di=Rn.unproject(rr.add(lr).div(2).sub(xi));return{center:di,zoom:qr,bearing:fe}}}},{key:"fitInternal",value:function(Et,Ut,fe){return Et?(Ut=Ki()(Et,Ut),delete Ut.padding,Ut.linear?this.easeTo(Ut,fe):this.flyTo(Ut,fe)):this}}]),W}(_u.EventEmitter);function Uu(lt,nt){var W;if(typeof Symbol=="undefined"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(W=Vs(lt))||nt&&lt&&typeof lt.length=="number"){W&&(lt=W);var ct=0,Et=function(){};return{s:Et,n:function(){return ct>=lt.length?{done:!0}:{done:!1,value:lt[ct++]}},e:function(Ke){throw Ke},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=!0,fe=!1,Ve;return{s:function(){W=lt[Symbol.iterator]()},n:function(){var Ke=W.next();return Ut=Ke.done,Ke},e:function(Ke){fe=!0,Ve=Ke},f:function(){try{!Ut&&W.return!=null&&W.return()}finally{if(fe)throw Ve}}}}function Vs(lt,nt){if(!!lt){if(typeof lt=="string")return rl(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return rl(lt,nt)}}function rl(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}var hu={},Ss=hu;hu.create=function(lt,nt,W){var ct=window.document.createElement(lt);return nt!==void 0&&(ct.className=nt),W&&W.appendChild(ct),ct},hu.createNS=function(lt,nt){var W=window.document.createElementNS(lt,nt);return W};var Ws=window.document&&window.document.documentElement.style;function gl(lt){if(!Ws)return lt[0];var nt=Uu(lt),W;try{for(nt.s();!(W=nt.n()).done;){var ct=W.value;if(ct in Ws)return ct}}catch(Et){nt.e(Et)}finally{nt.f()}return lt[0]}var Iu=gl(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Lu;hu.disableDrag=function(){Ws&&Iu&&(Lu=Ws[Iu],Ws[Iu]="none")},hu.enableDrag=function(){Ws&&Iu&&(Ws[Iu]=Lu)};var du=gl(["transform","WebkitTransform"]);hu.setTransform=function(lt,nt){lt.style[du]=nt};var vu=!1;try{var pu=Object.defineProperty({},"passive",{get:function(){vu=!0}});window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch(lt){vu=!1}hu.addEventListener=function(lt,nt,W){var ct=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in ct&&vu?lt.addEventListener(nt,W,ct):lt.addEventListener(nt,W,ct.capture)},hu.removeEventListener=function(lt,nt,W){var ct=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in ct&&vu?lt.removeEventListener(nt,W,ct):lt.removeEventListener(nt,W,ct.capture)};var Ol=function lt(nt){nt.preventDefault(),nt.stopPropagation(),window.removeEventListener("click",lt,!0)};hu.suppressClick=function(){window.addEventListener("click",Ol,!0),window.setTimeout(function(){window.removeEventListener("click",Ol,!0)},0)},hu.mousePos=function(lt,nt){var W=lt.getBoundingClientRect();return new ba(nt.clientX-W.left-lt.clientLeft,nt.clientY-W.top-lt.clientTop)},hu.touchPos=function(lt,nt){var W=lt.getBoundingClientRect(),ct=[],Et=Uu(nt),Ut;try{for(Et.s();!(Ut=Et.n()).done;){var fe=Ut.value;ct.push(new ba(fe.clientX-W.left-lt.clientLeft,fe.clientY-W.top-lt.clientTop))}}catch(Ve){Et.e(Ve)}finally{Et.f()}return ct},hu.mouseButton=function(lt){return typeof window.InstallTrigger!="undefined"&&lt.button===2&&lt.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:lt.button},hu.remove=function(lt){lt.parentNode&&lt.parentNode.removeChild(lt)};function rc(lt){var nt=ql();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function ql(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var gu=function(lt){n()(W,lt);var nt=rc(W);function W(ct,Et,Ut){var fe,Ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s()(this,W);var Ge=Ss.mousePos(Et.getCanvasContainer(),Ut),Ke=Et.unproject(Ge);return fe=nt.call(this,ct,Ki()({point:Ge,lngLat:Ke,originalEvent:Ut},Ve)),fe.type=void 0,fe.target=void 0,fe.originalEvent=void 0,fe.point=void 0,fe.lngLat=void 0,fe.defaultPrevented=void 0,fe.defaultPrevented=!1,fe.target=Et,fe}return r()(W,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),W}(Wa);function Nl(lt){var nt=tc();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function tc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var Ou=function(lt){n()(W,lt);var nt=Nl(W);function W(ct,Et,Ut){var fe;s()(this,W);var Ve=ct==="touchend"?Ut.changedTouches:Ut.touches,Ge=Ss.touchPos(Et.getCanvasContainer(),Ve),Ke=Ge.map(function(rr){return Et.unproject(rr)}),Rn=Ge.reduce(function(rr,lr,Zn,qn){return rr.add(lr.div(qn.length))},new ba(0,0)),ur=Et.unproject(Rn);return fe=nt.call(this,ct,{points:Ge,point:Rn,lngLats:Ke,lngLat:ur,originalEvent:Ut}),fe.type=void 0,fe.target=void 0,fe.originalEvent=void 0,fe.lngLat=void 0,fe.point=void 0,fe.points=void 0,fe.lngLats=void 0,fe.defaultPrevented=void 0,fe.defaultPrevented=!1,fe}return r()(W,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),W}(Wa);function ml(lt){var nt=wl();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function wl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var Bs=function(lt){n()(W,lt);var nt=ml(W);function W(ct,Et,Ut){var fe;return s()(this,W),fe=nt.call(this,ct,{originalEvent:Ut}),fe.type=void 0,fe.originalEvent=void 0,fe.defaultPrevented=void 0,fe.target=void 0,fe.defaultPrevented=!1,fe}return r()(W,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),W}(Wa),ao=function(){function lt(nt){s()(this,lt),this.map=void 0,this.delayContextMenu=void 0,this.contextMenuEvent=void 0,this.map=nt}return r()(lt,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(W){this.map.emit(W.type,new gu(W.type,this.map,W))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new gu("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(W){this.delayContextMenu?this.contextMenuEvent=W:this.map.emit(W.type,new gu(W.type,this.map,W)),this.map.listeners("contextmenu")&&W.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),lt}(),yl=function(){function lt(nt,W){s()(this,lt),this.map=void 0,this.el=void 0,this.container=void 0,this.enabled=void 0,this.active=void 0,this.startPos=void 0,this.lastPos=void 0,this.box=void 0,this.clickTolerance=void 0,this.map=nt,this.el=nt.getCanvasContainer(),this.container=nt.getContainer(),this.clickTolerance=W.clickTolerance||1}return r()(lt,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"mousedown",value:function(W,ct){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(Ss.disableDrag(),this.startPos=this.lastPos=ct,this.active=!0)}},{key:"mousemoveWindow",value:function(W,ct){if(!!this.active){var Et=ct;if(!(this.lastPos.equals(Et)||!this.box&&Et.dist(this.startPos)<this.clickTolerance)){var Ut=this.startPos;this.lastPos=Et,this.box||(this.box=Ss.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",W));var fe=Math.min(Ut.x,Et.x),Ve=Math.max(Ut.x,Et.x),Ge=Math.min(Ut.y,Et.y),Ke=Math.max(Ut.y,Et.y);Ss.setTransform(this.box,"translate(".concat(fe,"px,").concat(Ge,"px)")),this.box&&(this.box.style.width="".concat(Ve-fe,"px"),this.box.style.height="".concat(Ke-Ge,"px"))}}}},{key:"mouseupWindow",value:function(W,ct){var Et=this;if(!!this.active&&W.button===0){var Ut=this.startPos,fe=ct;if(this.reset(),Ss.suppressClick(),Ut.x===fe.x&&Ut.y===fe.y)this.fireEvent("boxzoomcancel",W);else return this.map.emit("boxzoomend",new Wa("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Ge){return Ge.fitScreenCoordinates(Ut,fe,Et.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(W){!this.active||W.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",W))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(Ss.remove(this.box),this.box=null),Ss.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(W,ct){return this.map.emit(W,new Wa(W,{originalEvent:ct}))}}]),lt}(),il=yl,Hs=function(){function lt(){s()(this,lt),this.enabled=void 0,this.active=void 0,this.reset()}return r()(lt,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(W,ct){return W.preventDefault(),{cameraAnimation:function(Ut){Ut.easeTo({duration:300,zoom:Ut.getZoom()+(W.shiftKey?-1:1),around:Ut.unproject(ct)},{originalEvent:W})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),lt}();function Ra(lt){var nt=xo();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function xo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var ru=function(lt){n()(W,lt);var nt=Ra(W);function W(){var ct;s()(this,W);for(var Et=arguments.length,Ut=new Array(Et),fe=0;fe<Et;fe++)Ut[fe]=arguments[fe];return ct=nt.call.apply(nt,[this].concat(Ut)),ct.type="renderFrame",ct.timeStamp=void 0,ct}return W}(Wa);function xl(lt,nt){var W;if(typeof Symbol=="undefined"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(W=al(lt))||nt&&lt&&typeof lt.length=="number"){W&&(lt=W);var ct=0,Et=function(){};return{s:Et,n:function(){return ct>=lt.length?{done:!0}:{done:!1,value:lt[ct++]}},e:function(Ke){throw Ke},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=!0,fe=!1,Ve;return{s:function(){W=lt[Symbol.iterator]()},n:function(){var Ke=W.next();return Ut=Ke.done,Ke},e:function(Ke){fe=!0,Ve=Ke},f:function(){try{!Ut&&W.return!=null&&W.return()}finally{if(fe)throw Ve}}}}function al(lt,nt){if(!!lt){if(typeof lt=="string")return ku(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return ku(lt,nt)}}function ku(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}var zl={linearity:.3,easing:lu(0,0,.3,1)},cs=Ki()({deceleration:2500,maxSpeed:1400},zl),bl=Ki()({deceleration:20,maxSpeed:1400},zl),mu=Ki()({deceleration:1e3,maxSpeed:360},zl),Fs=Ki()({deceleration:1e3,maxSpeed:90},zl),Wo=function(){function lt(nt){s()(this,lt),this.map=void 0,this.inertiaBuffer=void 0,this.map=nt,this.clear()}return r()(lt,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(W){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:Tu(),settings:W})}},{key:"drainInertiaBuffer",value:function(){for(var W=this.inertiaBuffer,ct=Tu(),Et=160;W.length>0&&ct-W[0].time>Et;)W.shift()}},{key:"onMoveEnd",value:function(W){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var ct={zoom:0,bearing:0,pitch:0,pan:new ba(0,0),pinchAround:void 0,around:void 0},Et=xl(this.inertiaBuffer),Ut;try{for(Et.s();!(Ut=Et.n()).done;){var fe=Ut.value.settings;ct.zoom+=fe.zoomDelta||0,ct.bearing+=fe.bearingDelta||0,ct.pitch+=fe.pitchDelta||0,fe.panDelta&&ct.pan._add(fe.panDelta),fe.around&&(ct.around=fe.around),fe.pinchAround&&(ct.pinchAround=fe.pinchAround)}}catch(qn){Et.e(qn)}finally{Et.f()}var Ve=this.inertiaBuffer[this.inertiaBuffer.length-1],Ge=Ve.time-this.inertiaBuffer[0].time,Ke={};if(ct.pan.mag()){var Rn=iu(ct.pan.mag(),Ge,Ki()({},cs,W||{}));Ke.offset=ct.pan.mult(Rn.amount/ct.pan.mag()),Ke.center=this.map.transform.center,_s(Ke,Rn)}if(ct.zoom){var ur=iu(ct.zoom,Ge,bl);Ke.zoom=this.map.transform.zoom+ur.amount,_s(Ke,ur)}if(ct.bearing){var rr=iu(ct.bearing,Ge,mu);Ke.bearing=this.map.transform.bearing+Ds(rr.amount,-179,179),_s(Ke,rr)}if(ct.pitch){var lr=iu(ct.pitch,Ge,Fs);Ke.pitch=this.map.transform.pitch+lr.amount,_s(Ke,lr)}if(Ke.zoom||Ke.bearing){var Zn=ct.pinchAround===void 0?ct.around:ct.pinchAround;Ke.around=Zn?this.map.unproject(Zn):this.map.getCenter()}return this.clear(),Ki()(Ke,{noMoveStart:!0})}}}]),lt}();function _s(lt,nt){(!lt.duration||lt.duration<nt.duration)&&(lt.duration=nt.duration,lt.easing=nt.easing)}function iu(lt,nt,W){var ct=W.maxSpeed,Et=W.linearity,Ut=W.deceleration,fe=Ds(lt*Et/(nt/1e3),-ct,ct),Ve=Math.abs(fe)/(Ut*Et);return{easing:W.easing,duration:Ve*1e3,amount:fe*(Ve/2)}}var Ho={panStep:100,bearingStep:15,pitchStep:10},Ni=function(){function lt(){s()(this,lt),this.enabled=void 0,this.active=void 0,this.panStep=void 0,this.bearingStep=void 0,this.pitchStep=void 0;var nt=Ho;this.panStep=nt.panStep,this.bearingStep=nt.bearingStep,this.pitchStep=nt.pitchStep}return r()(lt,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(W){var ct=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var Et=0,Ut=0,fe=0,Ve=0,Ge=0;switch(W.keyCode){case 61:case 107:case 171:case 187:Et=1;break;case 189:case 109:case 173:Et=-1;break;case 37:W.shiftKey?Ut=-1:(W.preventDefault(),Ve=-1);break;case 39:W.shiftKey?Ut=1:(W.preventDefault(),Ve=1);break;case 38:W.shiftKey?fe=1:(W.preventDefault(),Ge=-1);break;case 40:W.shiftKey?fe=-1:(W.preventDefault(),Ge=1);break;default:return}return{cameraAnimation:function(Rn){var ur=Rn.getZoom();Rn.easeTo({duration:300,easeId:"keyboardHandler",easing:Ns,zoom:Et?Math.round(ur)+Et*(W.shiftKey?2:1):ur,bearing:Rn.getBearing()+Ut*ct.bearingStep,pitch:Rn.getPitch()+fe*ct.pitchStep,offset:[-Ve*ct.panStep,-Ge*ct.panStep],center:Rn.getCenter()},{originalEvent:W})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),lt}();function Ns(lt){return lt*(2-lt)}var El=Ni,ol=function(){function lt(nt,W){s()(this,lt),this.mousedownPos=void 0,this.clickTolerance=void 0,this.map=void 0,this.map=nt,this.clickTolerance=W.clickTolerance}return r()(lt,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(W){return this.firePreventable(new Bs(W.type,this.map,W))}},{key:"mousedown",value:function(W,ct){return this.mousedownPos=ct,this.firePreventable(new gu(W.type,this.map,W))}},{key:"mouseup",value:function(W){this.map.emit(W.type,new gu(W.type,this.map,W))}},{key:"click",value:function(W,ct){this.mousedownPos&&this.mousedownPos.dist(ct)>=this.clickTolerance||this.map.emit(W.type,new gu(W.type,this.map,W))}},{key:"dblclick",value:function(W){return this.firePreventable(new gu(W.type,this.map,W))}},{key:"mouseover",value:function(W){this.map.emit(W.type,new gu(W.type,this.map,W))}},{key:"mouseout",value:function(W){this.map.emit(W.type,new gu(W.type,this.map,W))}},{key:"touchstart",value:function(W){return this.firePreventable(new Ou(W.type,this.map,W))}},{key:"touchmove",value:function(W){this.map.emit(W.type,new Ou(W.type,this.map,W))}},{key:"touchend",value:function(W){this.map.emit(W.type,new Ou(W.type,this.map,W))}},{key:"touchcancel",value:function(W){this.map.emit(W.type,new Ou(W.type,this.map,W))}},{key:"firePreventable",value:function(W){if(this.map.emit(W.type,W),W.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),lt}(),No=L("iWIM"),Co=L.n(No),tu,mi=0,Ru=2,Du=(tu={},v()(tu,mi,1),v()(tu,Ru,2),tu);function ju(lt,nt){var W=Du[nt];return lt.buttons===void 0||(lt.buttons&W)!==W}var Cs=function(){function lt(nt){s()(this,lt),this.enabled=void 0,this.active=void 0,this.lastPoint=void 0,this.eventButton=void 0,this.moved=void 0,this.clickTolerance=void 0,this.reset(),this.clickTolerance=nt.clickTolerance||1}return r()(lt,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(W,ct){if(!this.lastPoint){var Et=Ss.mouseButton(W);!this.correctButton(W,Et)||(this.lastPoint=ct,this.eventButton=Et)}}},{key:"mousemoveWindow",value:function(W,ct){var Et=this.lastPoint;if(!!Et){if(W.preventDefault(),ju(W,this.eventButton)){this.reset();return}if(!(!this.moved&&ct.dist(Et)<this.clickTolerance))return this.moved=!0,this.lastPoint=ct,this.move(Et,ct)}}},{key:"mouseupWindow",value:function(W){if(!!this.lastPoint){var ct=Ss.mouseButton(W);ct===this.eventButton&&(this.moved&&Ss.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(W,ct){return!1}},{key:"move",value:function(W,ct){}}]),lt}();function Ae(lt){var nt=_e();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function _e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var pn=function(lt){n()(W,lt);var nt=Ae(W);function W(){return s()(this,W),nt.apply(this,arguments)}return r()(W,[{key:"mousedown",value:function(Et,Ut){Co()(l()(W.prototype),"mousedown",this).call(this,Et,Ut),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(Et,Ut){return{around:Ut,panDelta:Ut.sub(Et)}}},{key:"correctButton",value:function(Et,Ut){return Ut===mi&&!Et.ctrlKey}}]),W}(Cs);function an(lt){var nt=In();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function In(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var hr=function(lt){n()(W,lt);var nt=an(W);function W(){return s()(this,W),nt.apply(this,arguments)}return r()(W,[{key:"correctButton",value:function(Et,Ut){return Ut===mi&&Et.ctrlKey||Ut===Ru}},{key:"move",value:function(Et,Ut){var fe=-.5,Ve=(Ut.y-Et.y)*fe;if(Ve)return this.active=!0,{pitchDelta:Ve}}},{key:"contextmenu",value:function(Et){Et.preventDefault()}}]),W}(Cs);function Lr(lt){var nt=Zr();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function Zr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var ei=function(lt){n()(W,lt);var nt=Lr(W);function W(){return s()(this,W),nt.apply(this,arguments)}return r()(W,[{key:"contextmenu",value:function(Et){Et.preventDefault()}},{key:"correctButton",value:function(Et,Ut){return Ut===mi&&Et.ctrlKey||Ut===Ru}},{key:"move",value:function(Et,Ut){var fe=.8,Ve=(Ut.x-Et.x)*fe;if(Ve)return this.active=!0,{bearingDelta:Ve}}}]),W}(Cs),Ur=4.000244140625,hi=1/100,br=1/450,Xt=2,ee=function(){function lt(nt,W){var ct=this;s()(this,lt),this.map=void 0,this.el=void 0,this.enabled=void 0,this.active=void 0,this.zooming=void 0,this.aroundCenter=void 0,this.around=void 0,this.aroundPoint=void 0,this.type=void 0,this.lastValue=void 0,this.timeout=void 0,this.finishTimeout=void 0,this.lastWheelEvent=void 0,this.lastWheelEventTime=void 0,this.startZoom=void 0,this.targetZoom=void 0,this.delta=void 0,this.easing=void 0,this.prevEase=void 0,this.frameId=void 0,this.handler=void 0,this.defaultZoomRate=void 0,this.wheelZoomRate=void 0,this.onScrollFrame=function(){if(!!ct.frameId&&(ct.frameId=null,!!ct.isActive())){var Et=ct.map.transform;if(ct.delta!==0){var Ut=ct.type==="wheel"&&Math.abs(ct.delta)>Ur?ct.wheelZoomRate:ct.defaultZoomRate,fe=Xt/(1+Math.exp(-Math.abs(ct.delta*Ut)));ct.delta<0&&fe!==0&&(fe=1/fe);var Ve=typeof ct.targetZoom=="number"?Et.zoomScale(ct.targetZoom):Et.scale;ct.targetZoom=Math.min(Et.maxZoom,Math.max(Et.minZoom,Et.scaleZoom(Ve*fe))),ct.type==="wheel"&&(ct.startZoom=Et.zoom,ct.easing=ct.smoothOutEasing(200)),ct.delta=0}var Ge=typeof ct.targetZoom=="number"?ct.targetZoom:Et.zoom,Ke=ct.startZoom,Rn=ct.easing,ur=!1,rr;if(ct.type==="wheel"&&Ke&&Rn){var lr=Math.min((Tu()-ct.lastWheelEventTime)/200,1),Zn=Rn(lr);rr=Aa(Ke,Ge,Zn),lr<1?ct.frameId||(ct.frameId=!0):ur=!0}else rr=Ge,ur=!0;return ct.active=!0,ur&&(ct.active=!1,ct.finishTimeout=setTimeout(function(){ct.zooming=!1,ct.handler.triggerRenderFrame(),delete ct.targetZoom,delete ct.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ur,zoomDelta:rr-Et.zoom,around:ct.aroundPoint,originalEvent:ct.lastWheelEvent}}},this.map=nt,this.el=nt.getCanvasContainer(),this.handler=W,this.delta=0,this.defaultZoomRate=hi,this.wheelZoomRate=br}return r()(lt,[{key:"setZoomRate",value:function(W){this.defaultZoomRate=W}},{key:"setWheelZoomRate",value:function(W){this.wheelZoomRate=W}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(W){this.isEnabled()||(this.enabled=!0,this.aroundCenter=W&&W.around==="center")}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"wheel",value:function(W){if(!!this.isEnabled()){var ct=W.deltaMode===window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,Et=Tu(),Ut=Et-(this.lastWheelEventTime||0);this.lastWheelEventTime=Et,ct!==0&&ct%Ur==0?this.type="wheel":ct!==0&&Math.abs(ct)<4?this.type="trackpad":Ut>400?(this.type=null,this.lastValue=ct,this.timeout=setTimeout(this.onTimeout,40,W)):this.type||(this.type=Math.abs(Ut*ct)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,ct+=this.lastValue)),W.shiftKey&&ct&&(ct=ct/4),this.type&&(this.lastWheelEvent=W,this.delta-=ct,this.active||this.start(W)),W.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(W){this.type="wheel",this.delta-=this.lastValue,this.active||this.start(W)}},{key:"start",value:function(W){if(!!this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var ct=Ss.mousePos(this.el,W);this.around=Oo.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(ct)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(W){var ct=Pu;if(this.prevEase){var Et=this.prevEase,Ut=(Tu()-Et.start)/Et.duration,fe=Et.easing(Ut+.01)-Et.easing(Ut),Ve=.27/Math.sqrt(fe*fe+1e-4)*.01,Ge=Math.sqrt(.27*.27-Ve*Ve);ct=lu(Ve,Ge,.25,1)}return this.prevEase={start:Tu(),duration:W,easing:ct},ct}}]),lt}(),Oe=ee,Ee=function(){function lt(nt,W){s()(this,lt),this.clickZoom=void 0,this.tapZoom=void 0,this.clickZoom=nt,this.tapZoom=W}return r()(lt,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),lt}(),jt=function(){function lt(nt,W,ct){s()(this,lt),this.inertiaOptions=void 0,this.el=void 0,this.mousePan=void 0,this.touchPan=void 0,this.el=nt,this.mousePan=W,this.touchPan=ct}return r()(lt,[{key:"enable",value:function(W){this.inertiaOptions=W||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),lt}(),zt=function(){function lt(nt,W,ct){s()(this,lt),this.mouseRotate=void 0,this.mousePitch=void 0,this.pitchWithRotate=void 0,this.pitchWithRotate=nt.pitchWithRotate,this.mouseRotate=W,this.mousePitch=ct}return r()(lt,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),lt}(),se=function(){function lt(nt,W,ct,Et){s()(this,lt),this.el=void 0,this.touchZoom=void 0,this.touchRotate=void 0,this.tapDragZoom=void 0,this.rotationDisabled=void 0,this.enabled=void 0,this.el=nt,this.touchZoom=W,this.touchRotate=ct,this.tapDragZoom=Et,this.rotationDisabled=!1,this.enabled=!0}return r()(lt,[{key:"enable",value:function(W){this.touchZoom.enable(W),this.rotationDisabled||this.touchRotate.enable(W),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),lt}();function ie(lt,nt){for(var W={},ct=0;ct<lt.length;ct++)W[lt[ct].identifier]=nt[ct];return W}function he(lt,nt){var W;if(typeof Symbol=="undefined"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(W=Be(lt))||nt&&lt&&typeof lt.length=="number"){W&&(lt=W);var ct=0,Et=function(){};return{s:Et,n:function(){return ct>=lt.length?{done:!0}:{done:!1,value:lt[ct++]}},e:function(Ke){throw Ke},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=!0,fe=!1,Ve;return{s:function(){W=lt[Symbol.iterator]()},n:function(){var Ke=W.next();return Ut=Ke.done,Ke},e:function(Ke){fe=!0,Ve=Ke},f:function(){try{!Ut&&W.return!=null&&W.return()}finally{if(fe)throw Ve}}}}function Be(lt,nt){if(!!lt){if(typeof lt=="string")return Ze(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return Ze(lt,nt)}}function Ze(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}function on(lt){var nt=new ba(0,0),W=he(lt),ct;try{for(W.s();!(ct=W.n()).done;){var Et=ct.value;nt._add(Et)}}catch(Ut){W.e(Ut)}finally{W.f()}return nt.div(lt.length)}var $e=500,gn=500,vn=30,Xn=function(){function lt(nt){s()(this,lt),this.numTouches=void 0,this.centroid=void 0,this.startTime=void 0,this.aborted=void 0,this.touches=void 0,this.reset(),this.numTouches=nt.numTouches}return r()(lt,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(W,ct,Et){(this.centroid||Et.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),Et.length===this.numTouches&&(this.centroid=on(ct),this.touches=ie(Et,ct)))}},{key:"touchmove",value:function(W,ct,Et){if(!(this.aborted||!this.centroid)){var Ut=ie(Et,ct);for(var fe in this.touches)if(this.touches[fe]){var Ve=this.touches[fe],Ge=Ut[fe];(!Ge||Ge.dist(Ve)>vn)&&(this.aborted=!0)}}}},{key:"touchend",value:function(W,ct,Et){if((!this.centroid||W.timeStamp-this.startTime>gn)&&(this.aborted=!0),Et.length===0){var Ut=!this.aborted&&this.centroid;if(this.reset(),Ut)return Ut}}}]),lt}(),Wn=function(){function lt(nt){s()(this,lt),this.singleTap=void 0,this.numTaps=void 0,this.lastTime=void 0,this.lastTap=void 0,this.count=void 0,this.singleTap=new Xn(nt),this.numTaps=nt.numTaps,this.reset()}return r()(lt,[{key:"reset",value:function(){this.lastTime=Infinity,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(W,ct,Et){this.singleTap.touchstart(W,ct,Et)}},{key:"touchmove",value:function(W,ct,Et){this.singleTap.touchmove(W,ct,Et)}},{key:"touchend",value:function(W,ct,Et){var Ut=this.singleTap.touchend(W,ct,Et);if(Ut){var fe=W.timeStamp-this.lastTime<$e,Ve=!this.lastTap||this.lastTap.dist(Ut)<vn;if((!fe||!Ve)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=Ut,this.count===this.numTaps)return this.reset(),Ut}}}]),lt}(),Jn=function(){function lt(){s()(this,lt),this.enabled=void 0,this.active=void 0,this.swipePoint=void 0,this.swipeTouch=void 0,this.tapTime=void 0,this.tap=void 0,this.tap=new Wn({numTouches:1,numTaps:1}),this.reset()}return r()(lt,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(W,ct,Et){this.swipePoint||(this.tapTime&&W.timeStamp-this.tapTime>$e&&this.reset(),this.tapTime?Et.length>0&&(this.swipePoint=ct[0],this.swipeTouch=Et[0].identifier):this.tap.touchstart(W,ct,Et))}},{key:"touchmove",value:function(W,ct,Et){if(!this.tapTime)this.tap.touchmove(W,ct,Et);else if(this.swipePoint){if(Et[0].identifier!==this.swipeTouch)return;var Ut=ct[0],fe=Ut.y-this.swipePoint.y;return this.swipePoint=Ut,W.preventDefault(),this.active=!0,{zoomDelta:fe/128}}}},{key:"touchend",value:function(W,ct,Et){if(this.tapTime)this.swipePoint&&Et.length===0&&this.reset();else{var Ut=this.tap.touchend(W,ct,Et);Ut&&(this.tapTime=W.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),lt}(),Hn=function(){function lt(){s()(this,lt),this.enabled=void 0,this.active=void 0,this.zoomIn=void 0,this.zoomOut=void 0,this.zoomIn=new Wn({numTouches:1,numTaps:2}),this.zoomOut=new Wn({numTouches:2,numTaps:1}),this.reset()}return r()(lt,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(W,ct,Et){this.zoomIn.touchstart(W,ct,Et),this.zoomOut.touchstart(W,ct,Et)}},{key:"touchmove",value:function(W,ct,Et){this.zoomIn.touchmove(W,ct,Et),this.zoomOut.touchmove(W,ct,Et)}},{key:"touchend",value:function(W,ct,Et){var Ut=this,fe=this.zoomIn.touchend(W,ct,Et),Ve=this.zoomOut.touchend(W,ct,Et);if(fe)return this.active=!0,W.preventDefault(),setTimeout(function(){return Ut.reset()},0),{cameraAnimation:function(Ke){return Ke.easeTo({duration:300,zoom:Ke.getZoom()+1,around:Ke.unproject(fe)},{originalEvent:W})}};if(Ve)return this.active=!0,W.preventDefault(),setTimeout(function(){return Ut.reset()},0),{cameraAnimation:function(Ke){return Ke.easeTo({duration:300,zoom:Ke.getZoom()-1,around:Ke.unproject(Ve)},{originalEvent:W})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),lt}(),fr=function(){function lt(nt){s()(this,lt),this.enabled=void 0,this.active=void 0,this.touches=void 0,this.minTouches=void 0,this.clickTolerance=void 0,this.sum=void 0,this.minTouches=1,this.clickTolerance=nt.clickTolerance||1,this.reset()}return r()(lt,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new ba(0,0)}},{key:"touchstart",value:function(W,ct,Et){return this.calculateTransform(W,ct,Et)}},{key:"touchmove",value:function(W,ct,Et){if(!!this.active)return W.preventDefault(),this.calculateTransform(W,ct,Et)}},{key:"touchend",value:function(W,ct,Et){this.calculateTransform(W,ct,Et),this.active&&Et.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(W,ct,Et){Et.length>0&&(this.active=!0);var Ut=ie(Et,ct),fe=new ba(0,0),Ve=new ba(0,0),Ge=0;for(var Ke in Ut)if(Ut[Ke]){var Rn=Ut[Ke],ur=this.touches[Ke];ur&&(fe._add(Rn),Ve._add(Rn.sub(ur)),Ge++,Ut[Ke]=Rn)}if(this.touches=Ut,!(Ge<this.minTouches||!Ve.mag())){var rr=Ve.div(Ge);if(this.sum._add(rr),!(this.sum.mag()<this.clickTolerance)){var lr=fe.div(Ge);return{around:lr,panDelta:rr}}}}}]),lt}(),xr=function(){function lt(){s()(this,lt),this.enabled=void 0,this.active=void 0,this.firstTwoTouches=void 0,this.vector=void 0,this.startVector=void 0,this.aroundCenter=void 0,this.reset()}return r()(lt,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(W){}},{key:"move",value:function(W,ct,Et){}},{key:"touchstart",value:function(W,ct,Et){this.firstTwoTouches||Et.length<2||(this.firstTwoTouches=[Et[0].identifier,Et[1].identifier],this.start([ct[0],ct[1]]))}},{key:"touchmove",value:function(W,ct,Et){if(!!this.firstTwoTouches){W.preventDefault();var Ut=pt()(this.firstTwoTouches,2),fe=Ut[0],Ve=Ut[1],Ge=Vr(Et,ct,fe),Ke=Vr(Et,ct,Ve);if(!(!Ge||!Ke)){var Rn=this.aroundCenter?null:Ge.add(Ke).div(2);return this.move([Ge,Ke],Rn,W)}}}},{key:"touchend",value:function(W,ct,Et){if(!!this.firstTwoTouches){var Ut=pt()(this.firstTwoTouches,2),fe=Ut[0],Ve=Ut[1],Ge=Vr(Et,ct,fe),Ke=Vr(Et,ct,Ve);Ge&&Ke||(this.active&&Ss.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(W){this.enabled=!0,this.aroundCenter=!!W&&W.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),lt}();function Vr(lt,nt,W){for(var ct=0;ct<lt.length;ct++)if(lt[ct].identifier===W)return nt[ct]}function gi(lt){var nt=Fr();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function Fr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}function ai(lt){return Math.abs(lt.y)>Math.abs(lt.x)}var yi=100,Ui=function(lt){n()(W,lt);var nt=gi(W);function W(){var ct;s()(this,W);for(var Et=arguments.length,Ut=new Array(Et),fe=0;fe<Et;fe++)Ut[fe]=arguments[fe];return ct=nt.call.apply(nt,[this].concat(Ut)),ct.valid=void 0,ct.firstMove=void 0,ct.lastPoints=void 0,ct}return r()(W,[{key:"reset",value:function(){Co()(l()(W.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(Et){this.lastPoints=Et,ai(Et[0].sub(Et[1]))&&(this.valid=!1)}},{key:"move",value:function(Et,Ut,fe){var Ve=Et[0].sub(this.lastPoints[0]),Ge=Et[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(Ve,Ge,fe.timeStamp),!!this.valid){this.lastPoints=Et,this.active=!0;var Ke=(Ve.y+Ge.y)/2,Rn=-.5;return{pitchDelta:Ke*Rn}}}},{key:"gestureBeginsVertically",value:function(Et,Ut,fe){if(this.valid!==void 0)return this.valid;var Ve=2,Ge=Et.mag()>=Ve,Ke=Ut.mag()>=Ve;if(!(!Ge&&!Ke)){if(!Ge||!Ke)return this.firstMove===void 0&&(this.firstMove=fe),fe-this.firstMove<yi?void 0:!1;var Rn=Et.y>0==Ut.y>0;return ai(Et)&&ai(Ut)&&Rn}}}]),W}(xr);function Pi(lt){var nt=pa();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function pa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var ta=25;function oa(lt,nt){return lt.angleWith(nt)*180/Math.PI}var si=function(lt){n()(W,lt);var nt=Pi(W);function W(){var ct;s()(this,W);for(var Et=arguments.length,Ut=new Array(Et),fe=0;fe<Et;fe++)Ut[fe]=arguments[fe];return ct=nt.call.apply(nt,[this].concat(Ut)),ct.minDiameter=void 0,ct}return r()(W,[{key:"reset",value:function(){Co()(l()(W.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(Et){this.startVector=this.vector=Et[0].sub(Et[1]),this.minDiameter=Et[0].dist(Et[1])}},{key:"move",value:function(Et,Ut){var fe=this.vector;if(this.vector=Et[0].sub(Et[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:oa(this.vector,fe),pinchAround:Ut}}},{key:"isBelowThreshold",value:function(Et){this.minDiameter=Math.min(this.minDiameter,Et.mag());var Ut=Math.PI*this.minDiameter,fe=ta/Ut*360,Ve=oa(Et,this.startVector);return Math.abs(Ve)<fe}}]),W}(xr);function ma(lt){var nt=to();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function to(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var Ha=.1;function _i(lt,nt){return Math.log(lt/nt)/Math.LN2}var Fa=function(lt){n()(W,lt);var nt=ma(W);function W(){var ct;s()(this,W);for(var Et=arguments.length,Ut=new Array(Et),fe=0;fe<Et;fe++)Ut[fe]=arguments[fe];return ct=nt.call.apply(nt,[this].concat(Ut)),ct.distance=void 0,ct.startDistance=void 0,ct}return r()(W,[{key:"reset",value:function(){Co()(l()(W.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(Et){this.startDistance=this.distance=Et[0].dist(Et[1])}},{key:"move",value:function(Et,Ut){var fe=this.distance;if(this.distance=Et[0].dist(Et[1]),!(!this.active&&Math.abs(_i(this.distance,this.startDistance))<Ha))return this.active=!0,{zoomDelta:_i(this.distance,fe),pinchAround:Ut}}}]),W}(xr);function Za(lt,nt){var W;if(typeof Symbol=="undefined"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(W=Os(lt))||nt&&lt&&typeof lt.length=="number"){W&&(lt=W);var ct=0,Et=function(){};return{s:Et,n:function(){return ct>=lt.length?{done:!0}:{done:!1,value:lt[ct++]}},e:function(Ke){throw Ke},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=!0,fe=!1,Ve;return{s:function(){W=lt[Symbol.iterator]()},n:function(){var Ke=W.next();return Ut=Ke.done,Ke},e:function(Ke){fe=!0,Ve=Ke},f:function(){try{!Ut&&W.return!=null&&W.return()}finally{if(fe)throw Ve}}}}function Os(lt,nt){if(!!lt){if(typeof lt=="string")return Ms(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return Ms(lt,nt)}}function Ms(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}var ws=function(nt){return nt.zoom||nt.drag||nt.pitch||nt.rotate};function au(lt){return lt.panDelta&&lt.panDelta.mag()||lt.zoomDelta||lt.bearingDelta||lt.pitchDelta}var j=function(){function lt(nt,W){var ct=this;s()(this,lt),this.map=void 0,this.el=void 0,this.handlers=void 0,this.eventsInProgress=void 0,this.frameId=void 0,this.inertia=void 0,this.bearingSnap=void 0,this.handlersById=void 0,this.updatingCamera=void 0,this.changes=void 0,this.previousActiveHandlers=void 0,this.bearingChanged=void 0,this.listeners=void 0,this.handleWindowEvent=function(ur){ct.handleEvent(ur,"".concat(ur.type,"Window"))},this.handleEvent=function(ur,rr){if(ur.type==="blur"){ct.stop();return}ct.updatingCamera=!0;var lr=ur.type==="renderFrame"?void 0:ur,Zn={needsRenderFrame:!1},qn={},kr={},ti=ur.touches?ct.getMapTouches(ur.touches):void 0,Ir=ti?Ss.touchPos(ct.el,ti):Ss.mousePos(ct.el,ur),Ci=Za(ct.handlers),ni;try{for(Ci.s();!(ni=Ci.n()).done;){var qr=ni.value,Qr=qr.handlerName,oi=qr.handler,Ii=qr.allowed;if(!!oi.isEnabled()){var ki=void 0;if(ct.blockedByActive(kr,Ii,Qr))oi.reset();else{var xi=rr||ur.type;oi&&oi[xi]&&(ki=oi[xi](ur,Ir,ti),ct.mergeIHandlerResult(Zn,qn,ki,Qr,lr),ki&&ki.needsRenderFrame&&ct.triggerRenderFrame())}(ki||oi.isActive())&&(kr[Qr]=oi)}}}catch(aa){Ci.e(aa)}finally{Ci.f()}var di={};for(var ui in ct.previousActiveHandlers)kr[ui]||(di[ui]=lr);ct.previousActiveHandlers=kr,(Object.keys(di).length||au(Zn))&&(ct.changes.push([Zn,qn,di]),ct.triggerRenderFrame()),(Object.keys(kr).length||au(Zn))&&ct.map.stop(!0),ct.updatingCamera=!1;var da=Zn.cameraAnimation;da&&(ct.inertia.clear(),ct.fireEvents({},{}),ct.changes=[],da(ct.map))},this.map=nt,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new Wo(nt),this.bearingSnap=W.bearingSnap,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(W);var Et=this.el;this.listeners=[[Et,"touchstart",{passive:!1}],[Et,"touchmove",{passive:!1}],[Et,"touchend",void 0],[Et,"touchcancel",void 0],[Et,"mousedown",void 0],[Et,"mousemove",void 0],[Et,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[Et,"mouseover",void 0],[Et,"mouseout",void 0],[Et,"dblclick",void 0],[Et,"click",void 0],[Et,"keydown",{capture:!1}],[Et,"keyup",void 0],[Et,"wheel",{passive:!1}],[Et,"contextmenu",void 0],[window,"blur",void 0]];var Ut=Za(this.listeners),fe;try{for(Ut.s();!(fe=Ut.n()).done;){var Ve=pt()(fe.value,3),Ge=Ve[0],Ke=Ve[1],Rn=Ve[2];Ss.addEventListener(Ge,Ke,Ge===window.document?this.handleWindowEvent:this.handleEvent,Rn)}}catch(ur){Ut.e(ur)}finally{Ut.f()}}return r()(lt,[{key:"destroy",value:function(){var W=Za(this.listeners),ct;try{for(W.s();!(ct=W.n()).done;){var Et=pt()(ct.value,3),Ut=Et[0],fe=Et[1],Ve=Et[2];Ss.removeEventListener(Ut,fe,Ut===window.document?this.handleWindowEvent:this.handleEvent,Ve)}}catch(Ge){W.e(Ge)}finally{W.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var W=Za(this.handlers),ct;try{for(W.s();!(ct=W.n()).done;){var Et=ct.value.handler;Et.reset()}}catch(Ut){W.e(Ut)}finally{W.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var W=Za(this.handlers),ct;try{for(W.s();!(ct=W.n()).done;){var Et=ct.value.handler;if(Et.isActive())return!0}}catch(Ut){W.e(Ut)}finally{W.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(ws(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(W,ct,Et,Ut,fe){if(!!Et){Ki()(W,Et);var Ve={handlerName:Ut,originalEvent:Et.originalEvent||fe};Et.zoomDelta!==void 0&&(ct.zoom=Ve),Et.panDelta!==void 0&&(ct.drag=Ve),Et.pitchDelta!==void 0&&(ct.pitch=Ve),Et.bearingDelta!==void 0&&(ct.rotate=Ve)}}},{key:"triggerRenderFrame",value:function(){var W=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(ct){delete W.frameId,W.handleEvent(new ru("renderFrame",{timeStamp:ct})),W.applyChanges()}))}},{key:"addDefaultHandlers",value:function(W){var ct=this.map,Et=ct.getCanvasContainer();this.add("mapEvent",new ol(ct,W));var Ut=ct.boxZoom=new il(ct,W);this.add("boxZoom",Ut);var fe=new Hn,Ve=new Hs;ct.doubleClickZoom=new Ee(Ve,fe),this.add("tapZoom",fe),this.add("clickZoom",Ve);var Ge=new Jn;this.add("tapDragZoom",Ge);var Ke=ct.touchPitch=new Ui;this.add("touchPitch",Ke);var Rn=new hr(W),ur=new ei(W);ct.dragRotate=new zt(W,Rn,ur),this.add("mouseRotate",Rn,["mousePitch"]),this.add("mousePitch",ur,["mouseRotate"]);var rr=new pn(W),lr=new fr(W);ct.dragPan=new jt(Et,rr,lr),this.add("mousePan",rr),this.add("touchPan",lr,["touchZoom","touchRotate"]);var Zn=new si,qn=new Fa;ct.touchZoomRotate=new se(Et,qn,Zn,Ge),this.add("touchRotate",Zn,["touchPan","touchZoom"]),this.add("touchZoom",qn,["touchPan","touchRotate"]);var kr=ct.scrollZoom=new Oe(ct,this);this.add("scrollZoom",kr,["mousePan"]);var ti=ct.keyboard=new El;this.add("keyboard",ti),this.add("blockableMapEvent",new ao(ct));for(var Ir=0,Ci=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ir<Ci.length;Ir++){var ni=Ci[Ir];W.interactive&&W[ni]&&ct[ni].enable(W[ni])}}},{key:"add",value:function(W,ct,Et){this.handlers.push({handlerName:W,handler:ct,allowed:Et}),this.handlersById[W]=ct}},{key:"blockedByActive",value:function(W,ct,Et){for(var Ut in W)if(Ut!==Et&&(!ct||ct.indexOf(Ut)<0))return!0;return!1}},{key:"getMapTouches",value:function(W){var ct=[],Et=Za(W),Ut;try{for(Et.s();!(Ut=Et.n()).done;){var fe=Ut.value,Ve=fe.target;this.el.contains(Ve)&&ct.push(fe)}}catch(Ge){Et.e(Ge)}finally{Et.f()}return ct}},{key:"applyChanges",value:function(){var W={},ct={},Et={},Ut=Za(this.changes),fe;try{for(Ut.s();!(fe=Ut.n()).done;){var Ve=pt()(fe.value,3),Ge=Ve[0],Ke=Ve[1],Rn=Ve[2];Ge.panDelta&&(W.panDelta=(W.panDelta||new ba(0,0))._add(Ge.panDelta)),Ge.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Ge.zoomDelta),Ge.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+Ge.bearingDelta),Ge.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Ge.pitchDelta),Ge.around!==void 0&&(W.around=Ge.around),Ge.pinchAround!==void 0&&(W.pinchAround=Ge.pinchAround),Ge.noInertia&&(W.noInertia=Ge.noInertia),Ki()(ct,Ke),Ki()(Et,Rn)}}catch(ur){Ut.e(ur)}finally{Ut.f()}this.updateMapTransform(W,ct,Et),this.changes=[]}},{key:"updateMapTransform",value:function(W,ct,Et){var Ut=this.map,fe=Ut.transform;if(!au(W))return this.fireEvents(ct,Et);var Ve=W.panDelta,Ge=W.zoomDelta,Ke=W.bearingDelta,Rn=W.pitchDelta,ur=W.pinchAround,rr=W.around;ur!==void 0&&(rr=ur),Ut.stop(!0),rr=rr||Ut.transform.centerPoint;var lr=fe.pointLocation(Ve?rr.sub(Ve):rr);Ke&&(fe.bearing+=Ke),Rn&&(fe.pitch+=Rn),Ge&&(fe.zoom+=Ge),fe.setLocationAtPoint(lr,rr),this.map.update(),W.noInertia||this.inertia.record(W),this.fireEvents(ct,Et)}},{key:"fireEvents",value:function(W,ct){var Et=this,Ut=ws(this.eventsInProgress),fe=ws(W),Ve={};for(var Ge in W)if(W[Ge]){var Ke=W[Ge].originalEvent;this.eventsInProgress[Ge]||(Ve["".concat(Ge,"start")]=Ke),this.eventsInProgress[Ge]=W[Ge]}!Ut&&fe&&this.fireEvent("movestart",fe.originalEvent);for(var Rn in Ve)Ve[Rn]&&this.fireEvent(Rn,Ve[Rn]);W.rotate&&(this.bearingChanged=!0),fe&&this.fireEvent("move",fe.originalEvent);for(var ur in W)if(W[ur]){var rr=W[ur].originalEvent;this.fireEvent(ur,rr)}var lr={},Zn;for(var qn in this.eventsInProgress)if(this.eventsInProgress[qn]){var kr=this.eventsInProgress[qn],ti=kr.handlerName,Ir=kr.originalEvent;this.handlersById[ti].isActive()||(delete this.eventsInProgress[qn],Zn=ct[ti]||Ir,lr["".concat(qn,"end")]=Zn)}for(var Ci in lr)lr[Ci]&&this.fireEvent(Ci,lr[Ci]);var ni=ws(this.eventsInProgress);if((Ut||fe)&&!ni){this.updatingCamera=!0;var qr=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),Qr=function(Ii){return Ii!==0&&-Et.bearingSnap<Ii&&Ii<Et.bearingSnap};qr?(Qr(qr.bearing||this.map.getBearing())&&(qr.bearing=0),this.map.easeTo(qr,{originalEvent:Zn})):(this.map.emit("moveend",new Wa("moveend",{originalEvent:Zn})),Qr(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(W,ct){this.map.emit(W,new Wa(W,ct?{originalEvent:ct}:{}))}}]),lt}(),I=j,w=L("DzJC"),B=L.n(w),D=function(){function lt(nt){var W=this;s()(this,lt),this.map=void 0,this.updateHash=void 0,this.hashName=void 0,this.onHashChange=function(){var ct=W.getCurrentHash();if(ct.length>=3&&!ct.some(function(Ut){return isNaN(+Ut)})){var Et=W.map.dragRotate.isEnabled()&&W.map.touchZoomRotate.isEnabled()?+(ct[3]||0):W.map.getBearing();return W.map.jumpTo({center:[+ct[2],+ct[1]],zoom:+ct[0],bearing:Et,pitch:+(ct[4]||0)}),!0}return!1},this.getCurrentHash=function(){var ct=window.location.hash.replace("#","");if(W.hashName){var Et;return ct.split("&").map(function(Ut){return Ut.split("=")}).forEach(function(Ut){Ut[0]===W.hashName&&(Et=Ut)}),(Et&&Et[1]||"").split("/")}return ct.split("/")},this.updateHashUnthrottled=function(){var ct=W.getHashString();try{window.history.replaceState(window.history.state,"",ct)}catch(Et){}},this.hashName=nt&&encodeURIComponent(nt),this.updateHash=B()(this.updateHashUnthrottled,30*1e3/100)}return r()(lt,[{key:"addTo",value:function(W){return this.map=W,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(W){var ct=this.map.getCenter(),Et=Math.round(this.map.getZoom()*100)/100,Ut=Math.ceil((Et*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,Ut),Ve=Math.round(ct.lng*fe)/fe,Ge=Math.round(ct.lat*fe)/fe,Ke=this.map.getBearing(),Rn=this.map.getPitch(),ur="";if(W?ur+="/".concat(Ve,"/").concat(Ge,"/").concat(Et):ur+="".concat(Et,"/").concat(Ge,"/").concat(Ve),(Ke||Rn)&&(ur+="/".concat(Math.round(Ke*10)/10)),Rn&&(ur+="/".concat(Math.round(Rn))),this.hashName){var rr=this.hashName,lr=!1,Zn=window.location.hash.slice(1).split("&").map(function(qn){var kr=qn.split("=")[0];return kr===rr?(lr=!0,"".concat(kr,"=").concat(ur)):qn}).filter(function(qn){return qn});return lr||Zn.push("".concat(rr,"=").concat(ur)),"#".concat(Zn.join("&"))}return"#".concat(ur)}}]),lt}(),G=D,Q=null,ut=[],wt=30,It=1e3/wt,kt=window.performance,Yt={create:"create",load:"load",fullLoad:"fullLoad"},qt={mark:function(nt){kt.mark(nt)},frame:function(nt){var W=nt;if(Q!=null){var ct=W-Q;ut.push(ct)}Q=W},clearMetrics:function(){Q=null,ut=[],kt.clearMeasures("loadTime"),kt.clearMeasures("fullLoadTime");for(var nt in Yt)kt.clearMarks(Yt[nt])},getPerformanceMetrics:function(){var nt=kt.measure("loadTime",Yt.create,Yt.load).duration,W=kt.measure("fullLoadTime",Yt.create,Yt.fullLoad).duration,ct=ut.length,Et=ut.reduce(function(Ge,Ke){return Ge+Ke},0)/ct/1e3,Ut=1/Et,fe=ut.filter(function(Ge){return Ge>It}).reduce(function(Ge,Ke){return Ge+(Ke-It)/It},0),Ve=fe/(ct+fe)*100;return{loadTime:nt,fullLoadTime:W,fps:Ut,percentDroppedFrames:Ve}}};function ce(lt,nt){var W;if(typeof Symbol=="undefined"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(W=ye(lt))||nt&&lt&&typeof lt.length=="number"){W&&(lt=W);var ct=0,Et=function(){};return{s:Et,n:function(){return ct>=lt.length?{done:!0}:{done:!1,value:lt[ct++]}},e:function(Ke){throw Ke},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=!0,fe=!1,Ve;return{s:function(){W=lt[Symbol.iterator]()},n:function(){var Ke=W.next();return Ut=Ke.done,Ke},e:function(Ke){fe=!0,Ve=Ke},f:function(){try{!Ut&&W.return!=null&&W.return()}finally{if(fe)throw Ve}}}}function ye(lt,nt){if(!!lt){if(typeof lt=="string")return Le(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return Le(lt,nt)}}function Le(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}var Ce=function(){function lt(){s()(this,lt),this.queue=void 0,this.id=void 0,this.cleared=void 0,this.currentlyRunning=void 0,this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return r()(lt,[{key:"add",value:function(W){var ct=++this.id,Et=this.queue;return Et.push({callback:W,id:ct,cancelled:!1}),ct}},{key:"remove",value:function(W){var ct=this.currentlyRunning,Et=ct?this.queue.concat(ct):this.queue,Ut=ce(Et),fe;try{for(Ut.s();!(fe=Ut.n()).done;){var Ve=fe.value;if(Ve.id===W){Ve.cancelled=!0;return}}}catch(Ge){Ut.e(Ge)}finally{Ut.f()}}},{key:"run",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ct=this.currentlyRunning=this.queue;this.queue=[];var Et=ce(ct),Ut;try{for(Et.s();!(Ut=Et.n()).done;){var fe=Ut.value;if(!fe.cancelled&&(fe.callback(W),this.cleared))break}}catch(Ve){Et.e(Ve)}finally{Et.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),lt}(),ke=Ce;function nn(lt){var nt=ln();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function ln(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}L("BGjm")(`/* @antv/l7-map */
.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var Qn=-2,Yn=22,dr=0,Mr=60,$r={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:Qn,maxZoom:Yn,minPitch:dr,maxPitch:Mr,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0},Kr=function(lt){n()(W,lt);var nt=nn(W);function W(ct){var Et;s()(this,W),Et=nt.call(this,Ki()({},$r,ct)),Et.doubleClickZoom=void 0,Et.dragRotate=void 0,Et.dragPan=void 0,Et.touchZoomRotate=void 0,Et.scrollZoom=void 0,Et.keyboard=void 0,Et.touchPitch=void 0,Et.boxZoom=void 0,Et.handlers=void 0,Et.container=void 0,Et.canvas=void 0,Et.canvasContainer=void 0,Et.renderTaskQueue=new ke,Et.frame=void 0,Et.trackResize=!0,Et.hash=void 0,Et.onWindowOnline=function(){Et.update()},Et.onWindowResize=function(fe){Et.trackResize&&Et.resize({originalEvent:fe}).update()},Et.initContainer(),Et.resize(),Et.handlers=new I(ts()(Et),Et.options),typeof window!="undefined"&&(window.addEventListener("online",Et.onWindowOnline,!1),window.addEventListener("resize",Et.onWindowResize,!1),window.addEventListener("orientationchange",Et.onWindowResize,!1));var Ut=typeof ct.hash=="string"&&ct.hash||void 0;return ct.hash&&(Et.hash=new G(Ut).addTo(ts()(Et))),(!Et.hash||!Et.hash.onHashChange())&&(Et.jumpTo({center:ct.center,zoom:ct.zoom,bearing:ct.bearing,pitch:ct.pitch}),ct.bounds&&(Et.resize(),Et.fitBounds(ct.bounds,Ki()({},ct.fitBoundsOptions,{duration:0})))),Et}return r()(W,[{key:"resize",value:function(Et){var Ut=this.containerDimensions(),fe=Ut[0],Ve=Ut[1];this.transform.resize(fe,Ve);var Ge=!this.moving;return Ge&&(this.stop(),this.emit("movestart",new Event("movestart",Et)),this.emit("move",new Event("move",Et))),this.emit("resize",new Event("resize",Et)),Ge&&this.emit("moveend",new Event("moveend",Et)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(Et){return this.transform.locationPoint(Oo.convert(Et))}},{key:"unproject",value:function(Et){return this.transform.pointLocation(ba.convert(Et))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(Et){this.transform.setMaxBounds(po.convert(Et))}},{key:"setStyle",value:function(Et){}},{key:"setMinZoom",value:function(Et){if(Et=Et==null?Qn:Et,Et>=Qn&&Et<=this.transform.maxZoom)return this.transform.minZoom=Et,this.getZoom()<Et&&this.setZoom(Et),this;throw new Error("minZoom must be between ".concat(Qn," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(Et){if(Et=Et==null?Yn:Et,Et>=this.transform.minZoom)return this.transform.maxZoom=Et,this.getZoom()>Et&&this.setZoom(Et),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(Et){if(Et=Et==null?dr:Et,Et<dr)throw new Error("minPitch must be greater than or equal to ".concat(dr));if(Et>=dr&&Et<=this.transform.maxPitch)return this.transform.minPitch=Et,this.getPitch()<Et&&this.setPitch(Et),this;throw new Error("minPitch must be between ".concat(dr," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(Et){if(Et=Et==null?Mr:Et,Et>Mr)throw new Error("maxPitch must be less than or equal to ".concat(Mr));if(Et>=this.transform.minPitch)return this.transform.maxPitch=Et,this.getPitch()>Et&&this.setPitch(Et),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(Et){this.transform.renderWorldCopies=!!Et}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(Et){return this.update(),this.renderTaskQueue.add(Et)}},{key:"cancelRenderFrame",value:function(Et){return this.renderTaskQueue.remove(Et)}},{key:"triggerRepaint",value:function(){var Et=this;this.frame||(this.frame=gs(function(Ut){qt.frame(Ut),Et.frame=null,Et.update(Ut)}))}},{key:"update",value:function(Et){var Ut=this;this.frame||(this.frame=gs(function(fe){qt.frame(fe),Ut.frame=null,Ut.renderTaskQueue.run(Et)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var Et=this.container;Et.classList.add("l7-map");var Ut=this.canvasContainer=Dt.a.create("div","l7-canvas-container",Et);this.options.interactive&&Ut.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var Et=0,Ut=0;return this.container&&(Et=this.container.clientWidth||400,Ut=this.container.clientHeight||300),[Et,Ut]}},{key:"resizeCanvas",value:function(Et,Ut){var fe=Dt.a.DPR||1;this.canvas.width=fe*Et,this.canvas.height=fe*Ut,this.canvas.style.width="".concat(Et,"px"),this.canvas.style.height="".concat(Ut,"px")}}]),W}(Ll),bi=function(){function lt(){s()(this,lt),this.viewport=void 0}return r()(lt,[{key:"syncWithMapCamera",value:function(W){var ct=W.center,Et=W.zoom,Ut=W.pitch,fe=W.bearing,Ve=W.viewportHeight,Ge=W.viewportWidth;this.viewport=new Rs({width:Ge,height:Ve,longitude:ct&&ct[0],latitude:ct&&ct[1],zoom:Et,pitch:Ut,bearing:fe})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(W,ct){return this.viewport.projectFlat(W,ct)}}]),lt}(),Oi={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},zi,Vi,_a,ya,wi,$i,sa,Bi,ca,qi,Ca,Na,rs,Jo;function is(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function jo(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?is(Object(W),!0).forEach(function(ct){v()(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):is(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}var Ps={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},Rl=12,sl=(zi=Object(xt.injectable)(),Vi=Object(xt.inject)(x.TYPES.MapConfig),_a=Object(xt.inject)(x.TYPES.IGlobalConfigService),ya=Object(xt.inject)(x.TYPES.ILogService),wi=Object(xt.inject)(x.TYPES.ICoordinateSystemService),$i=Object(xt.inject)(x.TYPES.IEventEmitter),zi(sa=(Bi=(Jo=function(){function lt(){var nt=this;s()(this,lt),this.version=z.L7MAP,this.map=void 0,g()(this,"config",ca,this),g()(this,"configService",qi,this),g()(this,"logger",Ca,this),g()(this,"coordinateSystemService",Na,this),g()(this,"eventEmitter",rs,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var W=nt.map.getCenter(),ct=W.lat,Et=W.lng,Ut=nt.config.offsetCoordinate,fe=Ut===void 0?!0:Ut;nt.viewport.syncWithMapCamera({bearing:nt.map.getBearing(),center:[Et,ct],viewportHeight:nt.map.transform.height,pitch:nt.map.getPitch(),viewportWidth:nt.map.transform.width,zoom:nt.map.getZoom(),cameraHeight:0}),nt.viewport.getZoom()>Rl&&fe?nt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):nt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),nt.cameraChangedCallback(nt.viewport)}}return r()(lt,[{key:"addMarkerContainer",value:function(){var W=this.map.getCanvasContainer();this.markerContainer=Dt.a.create("div","l7-marker-container",W),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(W,ct){x.MapServiceEvent.indexOf(W)!==-1?this.eventEmitter.on(W,ct):this.map.on(Ps[W]||W,ct)}},{key:"off",value:function(W,ct){this.map.off(Ps[W]||W,ct)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var W=this.map.transform;return[W.width,W.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(W){return this.map.setZoom(W)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(W){this.map.setCenter(W)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(W){this.map.setBearing(W)}},{key:"zoomIn",value:function(W,ct){this.map.zoomIn(W,ct)}},{key:"zoomOut",value:function(W,ct){this.map.zoomOut(W,ct)}},{key:"setPitch",value:function(W){return this.map.setPitch(W)}},{key:"panTo",value:function(W){this.map.panTo(W)}},{key:"panBy",value:function(W){this.panTo(W)}},{key:"fitBounds",value:function(W,ct){this.map.fitBounds(W,ct)}},{key:"setMaxZoom",value:function(W){this.map.setMaxZoom(W)}},{key:"setMinZoom",value:function(W){this.map.setMinZoom(W)}},{key:"setMapStatus",value:function(W){W.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),W.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),W.dragEnable===!1&&this.map.dragPan.disable(),W.dragEnable===!0&&this.map.dragPan.enable(),W.rotateEnable===!1&&this.map.dragRotate.disable(),W.dragEnable===!0&&this.map.dragRotate.enable(),W.keyboardEnable===!1&&this.map.keyboard.disable(),W.keyboardEnable===!0&&this.map.keyboard.enable(),W.zoomEnable===!1&&this.map.scrollZoom.disable(),W.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(W,ct){this.map.flyTo({zoom:W,center:ct})}},{key:"setMapStyle",value:function(W){this.map.setStyle(this.getMapStyle(W))}},{key:"pixelToLngLat",value:function(W){return this.map.unproject(W)}},{key:"lngLatToPixel",value:function(W){return this.map.project(W)}},{key:"containerToLngLat",value:function(W){return this.map.unproject(W)}},{key:"lngLatToContainer",value:function(W){return this.map.project(W)}},{key:"lngLatToMercator",value:function(W,ct){throw new Error("not implement")}},{key:"getModelMatrix",value:function(W,ct,Et){var Ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],fe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0};throw new Error("not implement")}},{key:"init",value:function(){var nt=X()(ft.a.mark(function ct(){var Et,Ut,fe,Ve,Ge,Ke,Rn,ur,rr,lr,Zn;return ft.a.wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:Et=this.config,Ut=Et.id,fe=Ut===void 0?"map":Ut,Ve=Et.attributionControl,Ge=Ve===void 0?!1:Ve,Ke=Et.style,Rn=Ke===void 0?"light":Ke,ur=Et.rotation,rr=ur===void 0?0:ur,lr=Et.mapInstance,Zn=k()(Et,["id","attributionControl","style","rotation","mapInstance"]),this.viewport=new bi,lr?(this.map=lr,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(fe),this.map=new Kr(jo({container:this.$mapContainer,style:this.getMapStyle(Rn),bearing:rr},Zn))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 6:case"end":return kr.stop()}},ct,this)}));function W(){return nt.apply(this,arguments)}return W}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(W){for(var ct,Et=arguments.length,Ut=new Array(Et>1?Et-1:0),fe=1;fe<Et;fe++)Ut[fe-1]=arguments[fe];(ct=this.eventEmitter).emit.apply(ct,[W].concat(Ut))}},{key:"once",value:function(W){for(var ct,Et=arguments.length,Ut=new Array(Et>1?Et-1:0),fe=1;fe<Et;fe++)Ut[fe-1]=arguments[fe];(ct=this.eventEmitter).once.apply(ct,[W].concat(Ut))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(W){var ct=this.map.getCanvas(),Et=W==="jpg"?ct==null?void 0:ct.toDataURL("image/jpeg"):ct==null?void 0:ct.toDataURL("image/png");return Et}},{key:"onCameraChanged",value:function(W){this.cameraChangedCallback=W}},{key:"creatAmapContainer",value:function(W){var ct=W;return typeof W=="string"&&(ct=document.getElementById(W)),ct}},{key:"getMapStyle",value:function(W){return typeof W!="string"?W:Oi[W]?Oi[W]:W}}]),lt}(),Jo),ca=_()(Bi.prototype,"config",[Vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qi=_()(Bi.prototype,"configService",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ca=_()(Bi.prototype,"logger",[ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Na=_()(Bi.prototype,"coordinateSystemService",[wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rs=_()(Bi.prototype,"eventEmitter",[$i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bi))||sa);function lc(lt){var nt=xc();return function(){var ct=l()(lt),Et;if(nt){var Ut=l()(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return a()(this,Et)}}function xc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}var Sl=function(lt){n()(W,lt);var nt=lc(W);function W(){return s()(this,W),nt.apply(this,arguments)}return r()(W,[{key:"getServiceConstructor",value:function(){return sl}}]),W}(K);function _l(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function Ul(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?_l(Object(W),!0).forEach(function(ct){Lc(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):_l(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}function Lc(lt,nt,W){return nt in lt?Object.defineProperty(lt,nt,{value:W,enumerable:!0,configurable:!0,writable:!0}):lt[nt]=W,lt}function Kl(lt,nt){return ic(lt)||bc(lt,nt)||Cc(lt,nt)||Mc()}function Mc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cc(lt,nt){if(!!lt){if(typeof lt=="string")return fc(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return fc(lt,nt)}}function fc(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}function bc(lt,nt){var W=lt==null?null:typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(W!=null){var ct=[],Et=!0,Ut=!1,fe,Ve;try{for(W=W.call(lt);!(Et=(fe=W.next()).done)&&(ct.push(fe.value),!(nt&&ct.length===nt));Et=!0);}catch(Ge){Ut=!0,Ve=Ge}finally{try{!Et&&W.return!=null&&W.return()}finally{if(Ut)throw Ve}}return ct}}function ic(lt){if(Array.isArray(lt))return lt}var yu=E.a.memo(function(lt){var nt=lt.style,W=lt.className,ct=lt.map,Et=lt.option,Ut=lt.onSceneLoaded,fe=lt.children,Ve=Object(U.useRef)(null),Ge=Object(U.useState)(),Ke=Kl(Ge,2),Rn=Ke[0],ur=Ke[1];return Object(U.useEffect)(function(){var rr=new t.Scene(Ul(Ul({id:Ve.current},Et),{},{map:new Sl(ct)}));return rr.on("loaded",function(){ur(rr),Ut&&Ut(rr)}),function(){rr.destroy()}},[]),Object(U.useEffect)(function(){Rn&&ct.style&&Rn.setMapStyle(ct.style)},[JSON.stringify(ct.style)]),Object(U.useEffect)(function(){Rn&&ct.zoom&&Rn.setZoom(ct.zoom)},[ct.zoom]),Object(U.useEffect)(function(){Rn&&ct.center&&Rn.setCenter(ct.center)},[JSON.stringify(ct.center)]),Object(U.useEffect)(function(){Rn&&ct.pitch&&Rn.setPitch(ct.pitch)},[ct.pitch]),Object(U.useEffect)(function(){Rn&&ct.rotation&&Rn.setRotation(ct.rotation)},[ct.rotation]),E.a.createElement(T.Provider,{value:Rn},E.a.createElement("div",{ref:Ve,className:W,style:nt},Rn&&fe))}),Ec=yu;function Sc(lt,nt){return cl(lt)||ll(lt,nt)||Gu(lt,nt)||Dl()}function Dl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gu(lt,nt){if(!!lt){if(typeof lt=="string")return ul(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return ul(lt,nt)}}function ul(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}function ll(lt,nt){var W=lt==null?null:typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(W!=null){var ct=[],Et=!0,Ut=!1,fe,Ve;try{for(W=W.call(lt);!(Et=(fe=W.next()).done)&&(ct.push(fe.value),!(nt&&ct.length===nt));Et=!0);}catch(Ge){Ut=!0,Ve=Ge}finally{try{!Et&&W.return!=null&&W.return()}finally{if(Ut)throw Ve}}return ct}}function cl(lt){if(Array.isArray(lt))return lt}var Ju=E.a.memo(function(lt){var nt=lt.style,W=lt.className,ct=lt.map,Et=lt.children,Ut=Object(U.useRef)(null),fe=Object(U.useState)(),Ve=Sc(fe,2),Ge=Ve[0],Ke=Ve[1];return Object(U.useEffect)(function(){var Rn=new t.Scene({id:Ut.current,map:ct});return Rn.on("loaded",function(){Ke(Rn)}),function(){Rn.destroy()}},[]),E.a.createElement(T.Provider,{value:Ge},E.a.createElement("div",{ref:Ut,className:W,style:nt},Ge&&Et))}),ec=["type","position"];function Rc(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function zc(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?Rc(Object(W),!0).forEach(function(ct){Uc(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):Rc(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}function Uc(lt,nt,W){return nt in lt?Object.defineProperty(lt,nt,{value:W,enumerable:!0,configurable:!0,writable:!0}):lt[nt]=W,lt}function hc(lt,nt){if(lt==null)return{};var W=Xc(lt,nt),ct,Et;if(Object.getOwnPropertySymbols){var Ut=Object.getOwnPropertySymbols(lt);for(Et=0;Et<Ut.length;Et++)ct=Ut[Et],!(nt.indexOf(ct)>=0)&&(!Object.prototype.propertyIsEnumerable.call(lt,ct)||(W[ct]=lt[ct]))}return W}function Xc(lt,nt){if(lt==null)return{};var W={},ct=Object.keys(lt),Et,Ut;for(Ut=0;Ut<ct.length;Ut++)Et=ct[Ut],!(nt.indexOf(Et)>=0)&&(W[Et]=lt[Et]);return W}var Pc=E.a.memo(function(nt){var W=e(),ct=Object(U.useRef)(),Et=nt.type,Ut=nt.position,fe=hc(nt,ec);return Object(U.useEffect)(function(){var Ve;switch(Et){case"scale":Ve=new t.Scale({position:Ut||"bottomright"});break;case"zoom":Ve=new t.Zoom(zc({position:Ut||"topright"},fe));break;case"logo":Ve=new t.Logo(zc({position:Ut||"bottomleft"},fe));case"layer":Ve=new t.Layers(zc({position:Ut||"bottomleft"},fe))}return ct.current=Ve,W.addControl(Ve),function(){ct.current=void 0,W.removeControl(Ve)}},[Et]),Object(U.useEffect)(function(){ct.current&&ct.current.setPosition(Ut||"bottomleft")},[Ut]),null}),jl=L("i8i4");function Bu(lt,nt){return wf(lt)||kf(lt,nt)||sf(lt,nt)||Jc()}function Jc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sf(lt,nt){if(!!lt){if(typeof lt=="string")return $c(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return $c(lt,nt)}}function $c(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}function kf(lt,nt){var W=lt==null?null:typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(W!=null){var ct=[],Et=!0,Ut=!1,fe,Ve;try{for(W=W.call(lt);!(Et=(fe=W.next()).done)&&(ct.push(fe.value),!(nt&&ct.length===nt));Et=!0);}catch(Ge){Ut=!0,Ve=Ge}finally{try{!Et&&W.return!=null&&W.return()}finally{if(Ut)throw Ve}}return ct}}function wf(lt){if(Array.isArray(lt))return lt}var Gf=U.useEffect,Oc=U.useState;function sh(lt){var nt=lt.className,W=lt.style,ct=lt.children,Et=lt.position,Ut=e(),fe=Oc(function(){return document.createElement("div")}),Ve=Bu(fe,1),Ge=Ve[0];return Gf(function(){var Ke=new t.Control({position:Et});return Ke.onAdd=function(){if(nt&&(Ge.className=nt),W){var Rn=Object.keys(W).map(function(ur){return"".concat(ur,":").concat(W[ur])}).join(";");Ge.style.cssText=Rn}return Ge},Ke.onRemove=function(){},Ut.addControl(Ke),function(){Ut.removeControl(Ke)}},[]),Object(jl.createPortal)(ct,Ge)}var uf=Object(U.createContext)({});function lf(){return Object(U.useContext)(uf)}var Tc=U.useEffect,fl=U.memo(function(nt){var W=nt.layer,ct=nt.active;return Tc(function(){W.active(ct.option)},[JSON.stringify(ct)]),null}),xf=U.useEffect,cf=U.memo(function(nt){var W=nt.layer,ct=nt.animate;return xf(function(){W.animate(ct)},[JSON.stringify(ct)]),null}),Vf=U.useEffect,Wf=U.memo(function(nt){var W=nt.layer,ct=nt.color;return Vf(function(){ct.field?W.color(ct.field,ct.values):W.color(ct.values)},[ct.field,ct.scale,JSON.stringify(ct.values),JSON.stringify(ct.options)]),null}),Qc=U.useEffect,ff=U.memo(function(nt){var W=nt.layer,ct=nt.filter;return Qc(function(){ct.field&&W.filter(ct.field,ct.values)},[ct.field,ct.values,JSON.stringify(ct.values),JSON.stringify(ct.options)]),null}),If=U.useEffect,Lf=U.memo(function(nt){var W=nt.layer,ct=nt.scale;return If(function(){W.scale(ct.values)},[ct.values]),null}),bf=U.useEffect,wc=U.memo(function(nt){var W=nt.layer,ct=nt.select;return bf(function(){W.select(ct.option)},[JSON.stringify(ct)]),null}),hf=U.useEffect,eu=U.memo(function(nt){var W=nt.layer,ct=nt.shape;return hf(function(){ct.field?W.shape(ct.field,ct.values):W.shape(ct.values)},[ct.field,JSON.stringify(ct.values),JSON.stringify(ct.options)]),null}),dc=U.useEffect,Ef=U.memo(function(nt){var W=nt.layer,ct=nt.size;return dc(function(){ct.field?W.size(ct.field,ct.values):W.size(ct.values)},[ct.field,ct.scale,JSON.stringify(ct.values),JSON.stringify(ct.options)]),null}),Yc=["data"];function vc(lt,nt){if(lt==null)return{};var W=Dc(lt,nt),ct,Et;if(Object.getOwnPropertySymbols){var Ut=Object.getOwnPropertySymbols(lt);for(Et=0;Et<Ut.length;Et++)ct=Ut[Et],!(nt.indexOf(ct)>=0)&&(!Object.prototype.propertyIsEnumerable.call(lt,ct)||(W[ct]=lt[ct]))}return W}function Dc(lt,nt){if(lt==null)return{};var W={},ct=Object.keys(lt),Et,Ut;for(Ut=0;Ut<ct.length;Ut++)Et=ct[Ut],!(nt.indexOf(Et)>=0)&&(W[Et]=lt[Et]);return W}var df=U.useEffect,Sf=U.memo(function(nt){var W=nt.layer,ct=nt.source,Et=ct.data,Ut=vc(ct,Yc);return df(function(){W.inited?W.setData(Et,Ut):W.source(Et,Ut),Ut.autoFit&&W.fitBounds(Ut&&Ut.fitBoundsOptions)},[Et,JSON.stringify(Ut)]),null}),kc=U.useEffect,Zc=U.memo(function(nt){var W=nt.layer,ct=nt.style;return kc(function(){W.style(ct)},Object.keys(ct).map(function(Et){return ct[Et]})),null});function Gc(lt,nt){return Kt(lt)||Vt(lt,nt)||pe(lt,nt)||qc()}function qc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(lt,nt){if(!!lt){if(typeof lt=="string")return me(lt,nt);var W=Object.prototype.toString.call(lt).slice(8,-1);if(W==="Object"&&lt.constructor&&(W=lt.constructor.name),W==="Map"||W==="Set")return Array.from(lt);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return me(lt,nt)}}function me(lt,nt){(nt==null||nt>lt.length)&&(nt=lt.length);for(var W=0,ct=new Array(nt);W<nt;W++)ct[W]=lt[W];return ct}function Vt(lt,nt){var W=lt==null?null:typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(W!=null){var ct=[],Et=!0,Ut=!1,fe,Ve;try{for(W=W.call(lt);!(Et=(fe=W.next()).done)&&(ct.push(fe.value),!(nt&&ct.length===nt));Et=!0);}catch(Ge){Ut=!0,Ve=Ge}finally{try{!Et&&W.return!=null&&W.return()}finally{if(Ut)throw Ve}}return ct}}function Kt(lt){if(Array.isArray(lt))return lt}var ze=U.useEffect,rn=U.useState;function Un(lt,nt){var W=nt.source,ct=nt.color,Et=nt.shape,Ut=nt.style,fe=nt.size,Ve=nt.scale,Ge=nt.active,Ke=nt.select,Rn=nt.filter,ur=nt.animate,rr=nt.options,lr=nt.onLayerLoaded,Zn=e(),qn=rn(function(){var Ir;switch(lt){case"polygonLayer":Ir=new t.PolygonLayer(rr);break;case"lineLayer":Ir=new t.LineLayer(rr);break;case"pointLayer":Ir=new t.PointLayer(rr);break;case"heatmapLayer":Ir=new t.HeatmapLayer(rr);break;case"rasterLayer":Ir=new t.RasterLayer(rr);break;case"imageLayer":Ir=new t.ImageLayer(rr);break;case"citybuildingLayer":Ir=new t.CityBuildingLayer(rr);break;default:Ir=new t.PolygonLayer(rr)}return Ir.on("inited",function(){lr&&lr(Ir,Zn)}),Ir}),kr=Gc(qn,1),ti=kr[0];return ze(function(){return Zn.addLayer(ti),function(){Zn.removeLayer(ti)}},[]),ze(function(){ti.inited&&rr&&ti.updateLayerConfig(rr)},[rr==null?void 0:rr.minZoom,rr==null?void 0:rr.maxZoom,rr==null?void 0:rr.visible]),ze(function(){ti.inited&&(rr==null?void 0:rr.zIndex)&&ti.setIndex(rr.zIndex)},[rr==null?void 0:rr.zIndex]),ze(function(){ti.inited&&(rr==null?void 0:rr.blend)&&ti.setBlend(rr.blend)},[rr==null?void 0:rr.blend]),ze(function(){Zn.render()}),U.createElement(uf.Provider,{value:ti},U.createElement(Sf,{layer:ti,source:W}),Ve&&U.createElement(Lf,{layer:ti,scale:Ve}),ct&&U.createElement(Wf,{layer:ti,color:ct}),fe&&U.createElement(Ef,{layer:ti,size:fe}),Et&&U.createElement(eu,{layer:ti,shape:Et}),Ut&&U.createElement(Zc,{layer:ti,style:Ut}),Ge&&U.createElement(fl,{layer:ti,active:Ge}),Ke&&U.createElement(wc,{layer:ti,select:Ke}),Rn&&U.createElement(ff,{layer:ti,filter:Rn}),ur&&U.createElement(cf,{layer:ti,animate:ur}),nt.children)}var gr=U.memo(function(nt){return Un("polygonLayer",nt)}),mr=U.memo(function(nt){return Un("lineLayer",nt)}),Jr=U.memo(function(nt){return Un("pointLayer",nt)}),Mi=U.memo(function(nt){return Un("heatmapLayer",nt)}),Hi=U.memo(function(nt){return Un("rasterLayer",nt)}),ra=U.memo(function(nt){return Un("imageLayer",nt)}),Da=U.memo(function(nt){return Un("citybuildingLayer",nt)}),Ka=U.useEffect,Qa=U.memo(function(lt){var nt=lt.type,W=lt.handler,ct=lf();return Ka(function(){return ct.off(nt,W),ct.on(nt,W),function(){ct.off(nt,W)}},[nt,W]),null}),qo=U.memo(function(lt){var nt=[{title:"1",color:"rgb(239,243,255)"},{title:"10",color:"rgb(198,219,239)"},{title:"30",color:"rgb(158,202,225)"},{title:"50",color:"rgb(107,174,214)"},{title:"60",color:"rgb(49,130,189)"},{title:"100",color:"rgb(8,81,156)"}],W=lt.items,ct=W===void 0?nt:W;return U.createElement("div",null,U.createElement("div",null,ct.map(function(Et,Ut){return U.createElement("div",{key:Ut,style:{background:Et.color,height:"100%",display:"inline-block",cursor:"pointer",width:""+(100-ct.length)/ct.length+"%",marginRight:"1%",padding:5}})})),U.createElement("div",null,ct.map(function(Et,Ut){return U.createElement("div",{key:Ut,style:{background:"#fff",height:"100%",display:"inline-block",textAlign:"left",cursor:"pointer",width:""+(100-ct.length)/ct.length+"%",marginRight:"1%"}},Et.title)})))});function bo(lt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bo=function(W){return typeof W}:bo=function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},bo(lt)}function Ts(lt,nt){var W=Object.keys(lt);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(lt);nt&&(ct=ct.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),W.push.apply(W,ct)}return W}function Ys(lt){for(var nt=1;nt<arguments.length;nt++){var W=arguments[nt]!=null?arguments[nt]:{};nt%2?Ts(Object(W),!0).forEach(function(ct){xu(lt,ct,W[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(W)):Ts(Object(W)).forEach(function(ct){Object.defineProperty(lt,ct,Object.getOwnPropertyDescriptor(W,ct))})}return lt}function xu(lt,nt,W){return nt in lt?Object.defineProperty(lt,nt,{value:W,enumerable:!0,configurable:!0,writable:!0}):lt[nt]=W,lt}function Zs(lt,nt){if(!(lt instanceof nt))throw new TypeError("Cannot call a class as a function")}function zs(lt,nt){for(var W=0;W<nt.length;W++){var ct=nt[W];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(lt,ct.key,ct)}}function Eo(lt,nt,W){return nt&&zs(lt.prototype,nt),W&&zs(lt,W),lt}function Ks(lt,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Super expression must either be null or a function");lt.prototype=Object.create(nt&&nt.prototype,{constructor:{value:lt,writable:!0,configurable:!0}}),nt&&$u(lt,nt)}function $u(lt,nt){return $u=Object.setPrototypeOf||function(ct,Et){return ct.__proto__=Et,ct},$u(lt,nt)}function ys(lt){var nt=hl();return function(){var ct=Ic(lt),Et;if(nt){var Ut=Ic(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return Is(this,Et)}}function Is(lt,nt){return nt&&(bo(nt)==="object"||typeof nt=="function")?nt:$o(lt)}function $o(lt){if(lt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return lt}function hl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}function Ic(lt){return Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)},Ic(lt)}var jc=function(lt){Ks(W,lt);var nt=ys(W);function W(ct){var Et;return Zs(this,W),Et=nt.call(this,ct),Et.el=void 0,Et.scene=void 0,Et.popup=void 0,Et.el=document.createElement("div"),Et}return Eo(W,[{key:"componentDidMount",value:function(){var Et,Ut=this.props,fe=Ut.lnglat,Ve=Ut.children,Ge=Ut.option,Ke=Ut.lngLat,Rn=new t.Popup(Ys(Ys({},Ge),{},{stopPropagation:(Et=this.props.option)===null||Et===void 0?void 0:Et.stopPropagation}));fe&&Rn.setLnglat(fe),Ke&&Rn.setLnglat(Ke),Ve&&Rn.setDOMContent(this.el),this.popup=Rn,this.scene.addPopup(Rn)}},{key:"componentDidUpdate",value:function(Et){var Ut,fe,Ve,Ge,Ke,Rn,ur=Array.isArray(Et.lnglat)?Et.lnglat:[Et==null||(Ut=Et.lnglat)===null||Ut===void 0?void 0:Ut.lng,Et==null||(fe=Et.lnglat)===null||fe===void 0?void 0:fe.lat],rr=Array.isArray(this.props.lnglat)?this.props.lnglat:[(Ve=this.props)===null||Ve===void 0||(Ge=Ve.lnglat)===null||Ge===void 0?void 0:Ge.lng,(Ke=this.props)===null||Ke===void 0||(Rn=Ke.lnglat)===null||Rn===void 0?void 0:Rn.lat],lr=ur.toString()!==rr.toString();if(lr){var Zn;this.popup.remove(),this.popup=new t.Popup(Ys(Ys({},this.props.option),{},{stopPropagation:(Zn=this.props.option)===null||Zn===void 0?void 0:Zn.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setDOMContent(this.el),this.scene.addPopup(this.popup)}}},{key:"componentWillUnmount",value:function(){this.popup.remove()}},{key:"render",value:function(){var Et=this;return U.createElement(T.Consumer,{},function(Ut){return Ut&&(Et.scene=Ut),Object(jl.createPortal)(Et.props.children,Et.el)})}}]),W}(U.PureComponent);function Kc(lt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kc=function(W){return typeof W}:Kc=function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},Kc(lt)}function tf(lt,nt){if(!(lt instanceof nt))throw new TypeError("Cannot call a class as a function")}function Xl(lt,nt){for(var W=0;W<nt.length;W++){var ct=nt[W];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(lt,ct.key,ct)}}function $f(lt,nt,W){return nt&&Xl(lt.prototype,nt),W&&Xl(lt,W),lt}function Hf(lt,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Super expression must either be null or a function");lt.prototype=Object.create(nt&&nt.prototype,{constructor:{value:lt,writable:!0,configurable:!0}}),nt&&_f(lt,nt)}function _f(lt,nt){return _f=Object.setPrototypeOf||function(ct,Et){return ct.__proto__=Et,ct},_f(lt,nt)}function nc(lt){var nt=Mh();return function(){var ct=Pf(lt),Et;if(nt){var Ut=Pf(this).constructor;Et=Reflect.construct(ct,arguments,Ut)}else Et=ct.apply(this,arguments);return Yf(this,Et)}}function Yf(lt,nt){return nt&&(Kc(nt)==="object"||typeof nt=="function")?nt:Mf(lt)}function Mf(lt){if(lt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return lt}function Mh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(lt){return!1}}function Pf(lt){return Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)},Pf(lt)}var uh=function(lt){Hf(W,lt);var nt=nc(W);function W(ct){var Et;return tf(this,W),Et=nt.call(this,ct),Et.el=void 0,Et.scene=void 0,Et.marker=void 0,Et.el=document.createElement("div"),Et}return $f(W,[{key:"componentDidMount",value:function(){var Et=this.props,Ut=Et.lnglat,fe=Et.children,Ve=Et.option,Ge=Et.onMarkerLoaded,Ke=new t.Marker(Ve);Ut&&Ke.setLnglat(Ut),fe&&Ke.setElement(this.el),this.marker=Ke,Ge&&Ge(Ke),this.scene.addMarker(Ke)}},{key:"componentDidUpdate",value:function(Et){var Ut,fe=(Et==null?void 0:Et.lnglat.toString())!==((Ut=this.props)===null||Ut===void 0?void 0:Ut.lnglat.toString());fe&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var Et=this;return U.createElement(T.Consumer,{},function(Ut){return Ut&&(Et.scene=Ut),Object(jl.createPortal)(Et.props.children,Et.el)})}}]),W}(U.PureComponent),zh=U.useEffect,Zf=U.memo(function(lt){var nt=lt.type,W=lt.handler,ct=e();return zh(function(){return ct.on(nt,W),function(){ct.off(nt,W)}},[nt]),null}),Bc=Zf,Rf=U.useEffect,Fe=U.memo(function(nt){var W=nt.name,ct=nt.url,Et=e();return Rf(function(){Et.addImage(W,ct)},[W,ct]),null})},"6AGu":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingInSyntax=void 0;var U=L("FV85"),E=L("LKzl"),T=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=U.BindingScopeEnum.Request,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=U.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=U.BindingScopeEnum.Transient,new E.BindingWhenOnSyntax(this._binding)},e}();dt.BindingInSyntax=T},"6D9b":function(Se,dt,L){},"6NqC":function(Se,dt){},"6acW":function(Se,dt,L){var U=L("dt0z"),E=L("gQMU");function T(e){return E(U(e).toLowerCase())}Se.exports=T},"6nK8":function(Se,dt,L){var U=L("dVn5"),E=L("fo6e"),T=L("dt0z"),e=L("9NmV");function t(u,s,h){return u=T(u),s=h?void 0:s,s===void 0?E(u)?e(u):U(u):u.match(s)||[]}Se.exports=t},"711d":function(Se,dt){function L(U){return function(E){return E==null?void 0:E[U]}}Se.exports=L},"78VC":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.multiBindToService=void 0;var U=function(T){return function(e){return function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return t.forEach(function(s){return T.bind(s).toService(e)})}}};dt.multiBindToService=U},"7Ix3":function(Se,dt){function L(U){var E=[];if(U!=null)for(var T in Object(U))E.push(T);return E}Se.exports=L},"7W2i":function(Se,dt,L){var U=L("SksO");function E(T,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(e&&e.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),e&&U(T,e)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"7tbW":function(Se,dt,L){var U=L("LGYb");function E(T){return T&&T.length?U(T):[]}Se.exports=E},"8/Fi":function(Se,dt,L){"use strict";var U=L("J4zp"),E=L.n(U),T=L("9nhX"),e=L.n(T),t=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function u(R){return t.indexOf(R)}var s=2,h=4,r=64,c=128,n=256,i=512,a=8192,o=16384,l=32768,f=32768*2,v=131072,b=262144,g=524288,y=1048576,_=2097152,M=4194304,x=8388608,m=16777216,S=16777216*2;function P(R,H){return R=e()(Math.floor(R),0,255),H=e()(Math.floor(H),0,255),256*R+H}function A(R){var H=R.color,N=R.radius,K=R.tileX,V=R.tileY,k=R.shape,Z=R.opacity,X=R.stroke,at=R.strokeWidth,pt=R.strokeOpacity,gt=[],ft=[],Rt=[],Nt=[P(H[0],H[1]),P(H[2],H[3])],Dt=[P(X[0],X[1]),P(X[2],X[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(St){var xt=E()(St,2),Ot=xt[0],it=xt[1];gt.push([].concat(Nt,[(Ot+1)*x+(it+1)*_+u(k)*v+N,(K+512)*g+(V+512)*r])),ft.push([].concat(Dt,[at,pt])),Rt.push([Z,0,0,0])}),{packedBuffer:gt,packedBuffer2:ft,packedBuffer3:Rt}}function O(R,H){if(R===0&&!H)return 0;if(R===1&&H)return 4294967295;var N=H?1:0,K=Math.floor(R*127);return K*S+N*m+K*v+N*f+K*i+N*n+K*s+N}},"88Gu":function(Se,dt){var L=800,U=16,E=Date.now;function T(e){var t=0,u=0;return function(){var s=E(),h=U-(s-u);if(u=s,h>0){if(++t>=L)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Se.exports=T},"8ml+":function(Se,dt,L){"use strict";var U=L("h1nZ");L.o(U,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return U.CityBuildingLayer}),L.o(U,"Control")&&L.d(dt,"Control",function(){return U.Control}),L.o(U,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return U.HeatmapLayer}),L.o(U,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return U.ImageLayer}),L.o(U,"Layers")&&L.d(dt,"Layers",function(){return U.Layers}),L.o(U,"LineLayer")&&L.d(dt,"LineLayer",function(){return U.LineLayer}),L.o(U,"Logo")&&L.d(dt,"Logo",function(){return U.Logo}),L.o(U,"Marker")&&L.d(dt,"Marker",function(){return U.Marker}),L.o(U,"PointLayer")&&L.d(dt,"PointLayer",function(){return U.PointLayer}),L.o(U,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return U.PolygonLayer}),L.o(U,"Popup")&&L.d(dt,"Popup",function(){return U.Popup}),L.o(U,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return U.RasterLayer}),L.o(U,"Scale")&&L.d(dt,"Scale",function(){return U.Scale}),L.o(U,"Scene")&&L.d(dt,"Scene",function(){return U.Scene}),L.o(U,"Zoom")&&L.d(dt,"Zoom",function(){return U.Zoom});var E=L("kQ+U");L.d(dt,"Scene",function(){return E.a});var T=L("sxDa");L.d(dt,"CityBuildingLayer",function(){return T.a}),L.d(dt,"HeatmapLayer",function(){return T.b}),L.d(dt,"ImageLayer",function(){return T.c}),L.d(dt,"LineLayer",function(){return T.d}),L.d(dt,"PointLayer",function(){return T.e}),L.d(dt,"PolygonLayer",function(){return T.f}),L.d(dt,"RasterLayer",function(){return T.g});var e=L("k5/I");L.d(dt,"Control",function(){return e.a}),L.d(dt,"Layers",function(){return e.b}),L.d(dt,"Logo",function(){return e.c}),L.d(dt,"Marker",function(){return e.d}),L.d(dt,"Popup",function(){return e.e}),L.d(dt,"Scale",function(){return e.f}),L.d(dt,"Zoom",function(){return e.g});var t=L("Hel2"),u=L("RL2/")},"8uyu":function(Se,dt){},"9Fde":function(Se,dt,L){"use strict";var U=this&&this.__awaiter||function(v,b,g,y){function _(M){return M instanceof g?M:new g(function(x){x(M)})}return new(g||(g=Promise))(function(M,x){function m(A){try{P(y.next(A))}catch(O){x(O)}}function S(A){try{P(y.throw(A))}catch(O){x(O)}}function P(A){A.done?M(A.value):_(A.value).then(m,S)}P((y=y.apply(v,b||[])).next())})},E=this&&this.__generator||function(v,b){var g={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},y,_,M,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(P){return function(A){return S([P,A])}}function S(P){if(y)throw new TypeError("Generator is already executing.");for(;g;)try{if(y=1,_&&(M=P[0]&2?_.return:P[0]?_.throw||((M=_.return)&&M.call(_),0):_.next)&&!(M=M.call(_,P[1])).done)return M;switch(_=0,M&&(P=[P[0]&2,M.value]),P[0]){case 0:case 1:M=P;break;case 4:return g.label++,{value:P[1],done:!1};case 5:g.label++,_=P[1],P=[0];continue;case 7:P=g.ops.pop(),g.trys.pop();continue;default:if(M=g.trys,!(M=M.length>0&&M[M.length-1])&&(P[0]===6||P[0]===2)){g=0;continue}if(P[0]===3&&(!M||P[1]>M[0]&&P[1]<M[3])){g.label=P[1];break}if(P[0]===6&&g.label<M[1]){g.label=M[1],M=P;break}if(M&&g.label<M[2]){g.label=M[2],g.ops.push(P);break}M[2]&&g.ops.pop(),g.trys.pop();continue}P=b.call(v,g)}catch(A){P=[6,A],_=0}finally{y=M=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},T=this&&this.__spreadArray||function(v,b){for(var g=0,y=b.length,_=v.length;g<y;g++,_++)v[_]=b[g];return v};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Container=void 0;var e=L("LgvC"),t=L("MON2"),u=L("FV85"),s=L("xfSm"),h=L("wnjb"),r=L("h7MG"),c=L("aPG5"),n=L("gzZq"),i=L("d9O0"),a=L("ujMp"),o=L("HpQ9"),l=L("AwBQ"),f=function(){function v(b){this._appliedMiddleware=[];var g=b||{};if(typeof g!="object")throw new Error(""+t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(g.defaultScope===void 0)g.defaultScope=u.BindingScopeEnum.Transient;else if(g.defaultScope!==u.BindingScopeEnum.Singleton&&g.defaultScope!==u.BindingScopeEnum.Transient&&g.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(g.autoBindInjectable===void 0)g.autoBindInjectable=!1;else if(typeof g.autoBindInjectable!="boolean")throw new Error(""+t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(g.skipBaseClassChecks===void 0)g.skipBaseClassChecks=!1;else if(typeof g.skipBaseClassChecks!="boolean")throw new Error(""+t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:g.autoBindInjectable,defaultScope:g.defaultScope,skipBaseClassChecks:g.skipBaseClassChecks},this.id=i.id(),this._bindingDictionary=new l.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new h.MetadataReader}return v.merge=function(b,g){for(var y=[],_=2;_<arguments.length;_++)y[_-2]=arguments[_];var M=new v,x=T([b,g],y).map(function(P){return r.getBindingDictionary(P)}),m=r.getBindingDictionary(M);function S(P,A){P.traverse(function(O,R){R.forEach(function(H){A.add(H.serviceIdentifier,H.clone())})})}return x.forEach(function(P){S(P,m)}),M},v.prototype.load=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];for(var y=this._getContainerModuleHelpersFactory(),_=0,M=b;_<M.length;_++){var x=M[_],m=y(x.id);x.registry(m.bindFunction,m.unbindFunction,m.isboundFunction,m.rebindFunction)}},v.prototype.loadAsync=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];return U(this,void 0,void 0,function(){var y,_,M,x,m;return E(this,function(S){switch(S.label){case 0:y=this._getContainerModuleHelpersFactory(),_=0,M=b,S.label=1;case 1:return _<M.length?(x=M[_],m=y(x.id),[4,x.registry(m.bindFunction,m.unbindFunction,m.isboundFunction,m.rebindFunction)]):[3,4];case 2:S.sent(),S.label=3;case 3:return _++,[3,1];case 4:return[2]}})})},v.prototype.unload=function(){for(var b=this,g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];var _=function(x){return function(m){return m.moduleId===x}};g.forEach(function(M){var x=_(M.id);b._bindingDictionary.removeByCondition(x)})},v.prototype.bind=function(b){var g=this.options.defaultScope||u.BindingScopeEnum.Transient,y=new e.Binding(b,g);return this._bindingDictionary.add(b,y),new n.BindingToSyntax(y)},v.prototype.rebind=function(b){return this.unbind(b),this.bind(b)},v.prototype.unbind=function(b){try{this._bindingDictionary.remove(b)}catch(g){throw new Error(t.CANNOT_UNBIND+" "+a.getServiceIdentifierAsString(b))}},v.prototype.unbindAll=function(){this._bindingDictionary=new l.Lookup},v.prototype.isBound=function(b){var g=this._bindingDictionary.hasKey(b);return!g&&this.parent&&(g=this.parent.isBound(b)),g},v.prototype.isBoundNamed=function(b,g){return this.isBoundTagged(b,s.NAMED_TAG,g)},v.prototype.isBoundTagged=function(b,g,y){var _=!1;if(this._bindingDictionary.hasKey(b)){var M=this._bindingDictionary.get(b),x=r.createMockRequest(this,b,g,y);_=M.some(function(m){return m.constraint(x)})}return!_&&this.parent&&(_=this.parent.isBoundTagged(b,g,y)),_},v.prototype.snapshot=function(){this._snapshots.push(o.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},v.prototype.restore=function(){var b=this._snapshots.pop();if(b===void 0)throw new Error(t.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=b.bindings,this._middleware=b.middleware},v.prototype.createChild=function(b){var g=new v(b||this.options);return g.parent=this,g},v.prototype.applyMiddleware=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];this._appliedMiddleware=this._appliedMiddleware.concat(b);var y=this._middleware?this._middleware:this._planAndResolve();this._middleware=b.reduce(function(_,M){return M(_)},y)},v.prototype.applyCustomMetadataReader=function(b){this._metadataReader=b},v.prototype.get=function(b){return this._get(!1,!1,u.TargetTypeEnum.Variable,b)},v.prototype.getTagged=function(b,g,y){return this._get(!1,!1,u.TargetTypeEnum.Variable,b,g,y)},v.prototype.getNamed=function(b,g){return this.getTagged(b,s.NAMED_TAG,g)},v.prototype.getAll=function(b){return this._get(!0,!0,u.TargetTypeEnum.Variable,b)},v.prototype.getAllTagged=function(b,g,y){return this._get(!1,!0,u.TargetTypeEnum.Variable,b,g,y)},v.prototype.getAllNamed=function(b,g){return this.getAllTagged(b,s.NAMED_TAG,g)},v.prototype.resolve=function(b){var g=this.createChild();return g.bind(b).toSelf(),this._appliedMiddleware.forEach(function(y){g.applyMiddleware(y)}),g.get(b)},v.prototype._getContainerModuleHelpersFactory=function(){var b=this,g=function(S,P){S._binding.moduleId=P},y=function(S){return function(P){var A=b.bind.bind(b),O=A(P);return g(O,S),O}},_=function(S){return function(P){var A=b.unbind.bind(b);A(P)}},M=function(S){return function(P){var A=b.isBound.bind(b);return A(P)}},x=function(S){return function(P){var A=b.rebind.bind(b),O=A(P);return g(O,S),O}};return function(m){return{bindFunction:y(m),isboundFunction:M(m),rebindFunction:x(m),unbindFunction:_(m)}}},v.prototype._get=function(b,g,y,_,M,x){var m=null,S={avoidConstraints:b,contextInterceptor:function(A){return A},isMultiInject:g,key:M,serviceIdentifier:_,targetType:y,value:x};if(this._middleware){if(m=this._middleware(S),m==null)throw new Error(t.INVALID_MIDDLEWARE_RETURN)}else m=this._planAndResolve()(S);return m},v.prototype._planAndResolve=function(){var b=this;return function(g){var y=r.plan(b._metadataReader,b,g.isMultiInject,g.targetType,g.serviceIdentifier,g.key,g.value,g.avoidConstraints);y=g.contextInterceptor(y);var _=c.resolve(y);return _}},v}();dt.Container=f},"9NmV":function(Se,dt){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",s="\\xac\\xb1\\xd7\\xf7",h="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r="\\u2000-\\u206f",c=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",a=s+h+r+c,o="['\u2019]",l="["+a+"]",f="["+e+"]",v="\\d+",b="["+t+"]",g="["+u+"]",y="[^"+L+a+v+t+u+n+"]",_="\\ud83c[\\udffb-\\udfff]",M="(?:"+f+"|"+_+")",x="[^"+L+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",P="["+n+"]",A="\\u200d",O="(?:"+g+"|"+y+")",R="(?:"+P+"|"+y+")",H="(?:"+o+"(?:d|ll|m|re|s|t|ve))?",N="(?:"+o+"(?:D|LL|M|RE|S|T|VE))?",K=M+"?",V="["+i+"]?",k="(?:"+A+"(?:"+[x,m,S].join("|")+")"+V+K+")*",Z="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",X="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",at=V+K+k,pt="(?:"+[b,m,S].join("|")+")"+at,gt=RegExp([P+"?"+g+"+"+H+"(?="+[l,P,"$"].join("|")+")",R+"+"+N+"(?="+[l,P+O,"$"].join("|")+")",P+"?"+O+"+"+H,P+"+"+N,X,Z,v,pt].join("|"),"g");function ft(Rt){return Rt.match(gt)||[]}Se.exports=ft},"9lTW":function(Se,dt,L){"use strict";(function(U){var E=L("MgzW");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function T(O,R){if(O===R)return 0;for(var H=O.length,N=R.length,K=0,V=Math.min(H,N);K<V;++K)if(O[K]!==R[K]){H=O[K],N=R[K];break}return H<N?-1:N<H?1:0}function e(O){return U.Buffer&&typeof U.Buffer.isBuffer=="function"?U.Buffer.isBuffer(O):!!(O!=null&&O._isBuffer)}var t=L("MCLT"),u=Object.prototype.hasOwnProperty,s=Array.prototype.slice,h=function(){return function(){}.name==="foo"}();function r(O){return Object.prototype.toString.call(O)}function c(O){return e(O)||typeof U.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O?!!(O instanceof DataView||O.buffer&&O.buffer instanceof ArrayBuffer):!1}var n=Se.exports=b,i=/\s*function\s+([^\(\s]*)\s*/;function a(O){if(!!t.isFunction(O)){if(h)return O.name;var R=O.toString(),H=R.match(i);return H&&H[1]}}n.AssertionError=function(R){this.name="AssertionError",this.actual=R.actual,this.expected=R.expected,this.operator=R.operator,R.message?(this.message=R.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var H=R.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,H);else{var N=new Error;if(N.stack){var K=N.stack,V=a(H),k=K.indexOf(`
`+V);if(k>=0){var Z=K.indexOf(`
`,k+1);K=K.substring(Z+1)}this.stack=K}}},t.inherits(n.AssertionError,Error);function o(O,R){return typeof O=="string"?O.length<R?O:O.slice(0,R):O}function l(O){if(h||!t.isFunction(O))return t.inspect(O);var R=a(O),H=R?": "+R:"";return"[Function"+H+"]"}function f(O){return o(l(O.actual),128)+" "+O.operator+" "+o(l(O.expected),128)}function v(O,R,H,N,K){throw new n.AssertionError({message:H,actual:O,expected:R,operator:N,stackStartFunction:K})}n.fail=v;function b(O,R){O||v(O,!0,R,"==",n.ok)}n.ok=b,n.equal=function(R,H,N){R!=H&&v(R,H,N,"==",n.equal)},n.notEqual=function(R,H,N){R==H&&v(R,H,N,"!=",n.notEqual)},n.deepEqual=function(R,H,N){g(R,H,!1)||v(R,H,N,"deepEqual",n.deepEqual)},n.deepStrictEqual=function(R,H,N){g(R,H,!0)||v(R,H,N,"deepStrictEqual",n.deepStrictEqual)};function g(O,R,H,N){if(O===R)return!0;if(e(O)&&e(R))return T(O,R)===0;if(t.isDate(O)&&t.isDate(R))return O.getTime()===R.getTime();if(t.isRegExp(O)&&t.isRegExp(R))return O.source===R.source&&O.global===R.global&&O.multiline===R.multiline&&O.lastIndex===R.lastIndex&&O.ignoreCase===R.ignoreCase;if((O===null||typeof O!="object")&&(R===null||typeof R!="object"))return H?O===R:O==R;if(c(O)&&c(R)&&r(O)===r(R)&&!(O instanceof Float32Array||O instanceof Float64Array))return T(new Uint8Array(O.buffer),new Uint8Array(R.buffer))===0;if(e(O)!==e(R))return!1;N=N||{actual:[],expected:[]};var K=N.actual.indexOf(O);return K!==-1&&K===N.expected.indexOf(R)?!0:(N.actual.push(O),N.expected.push(R),_(O,R,H,N))}function y(O){return Object.prototype.toString.call(O)=="[object Arguments]"}function _(O,R,H,N){if(O==null||R===null||R===void 0)return!1;if(t.isPrimitive(O)||t.isPrimitive(R))return O===R;if(H&&Object.getPrototypeOf(O)!==Object.getPrototypeOf(R))return!1;var K=y(O),V=y(R);if(K&&!V||!K&&V)return!1;if(K)return O=s.call(O),R=s.call(R),g(O,R,H);var k=A(O),Z=A(R),X,at;if(k.length!==Z.length)return!1;for(k.sort(),Z.sort(),at=k.length-1;at>=0;at--)if(k[at]!==Z[at])return!1;for(at=k.length-1;at>=0;at--)if(X=k[at],!g(O[X],R[X],H,N))return!1;return!0}n.notDeepEqual=function(R,H,N){g(R,H,!1)&&v(R,H,N,"notDeepEqual",n.notDeepEqual)},n.notDeepStrictEqual=M;function M(O,R,H){g(O,R,!0)&&v(O,R,H,"notDeepStrictEqual",M)}n.strictEqual=function(R,H,N){R!==H&&v(R,H,N,"===",n.strictEqual)},n.notStrictEqual=function(R,H,N){R===H&&v(R,H,N,"!==",n.notStrictEqual)};function x(O,R){if(!O||!R)return!1;if(Object.prototype.toString.call(R)=="[object RegExp]")return R.test(O);try{if(O instanceof R)return!0}catch(H){}return Error.isPrototypeOf(R)?!1:R.call({},O)===!0}function m(O){var R;try{O()}catch(H){R=H}return R}function S(O,R,H,N){var K;if(typeof R!="function")throw new TypeError('"block" argument must be a function');typeof H=="string"&&(N=H,H=null),K=m(R),N=(H&&H.name?" ("+H.name+").":".")+(N?" "+N:"."),O&&!K&&v(K,H,"Missing expected exception"+N);var V=typeof N=="string",k=!O&&t.isError(K),Z=!O&&K&&!H;if((k&&V&&x(K,H)||Z)&&v(K,H,"Got unwanted exception"+N),O&&K&&H&&!x(K,H)||!O&&K)throw K}n.throws=function(O,R,H){S(!0,O,R,H)},n.doesNotThrow=function(O,R,H){S(!1,O,R,H)},n.ifError=function(O){if(O)throw O};function P(O,R){O||v(O,!0,R,"==",P)}n.strict=E(P,n,{equal:n.strictEqual,deepEqual:n.deepStrictEqual,notEqual:n.notStrictEqual,notDeepEqual:n.notDeepStrictEqual}),n.strict.strict=n.strict;var A=Object.keys||function(O){var R=[];for(var H in O)u.call(O,H)&&R.push(H);return R}}).call(this,L("IyRk"))},"9nhX":function(Se,dt,L){var U=L("g4R6"),E=L("tLB3");function T(e,t,u){return u===void 0&&(u=t,t=void 0),u!==void 0&&(u=E(u),u=u===u?u:0),t!==void 0&&(t=E(t),t=t===t?t:0),U(E(e),t,u)}Se.exports=T},AFH1:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U;(function(E){E.TOPRIGHT="topright",E.TOPLEFT="topleft",E.BOTTOMRIGHT="bottomright",E.BOTTOMLEFT="bottomleft"})(U||(U={}))},APxj:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var U=L("Ucsi");function E(T,e){e===void 0&&(e=!0);var t=U.makePropertyInjectDecorator(T,e),u=U.makePropertyInjectNamedDecorator(T,e),s=U.makePropertyInjectTaggedDecorator(T,e),h=U.makePropertyMultiInjectDecorator(T,e);return{lazyInject:t,lazyInjectNamed:u,lazyInjectTagged:s,lazyMultiInject:h}}dt.default=E},AwBQ:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Lookup=void 0;var U=L("MON2"),E=function(){function T(){this._map=new Map}return T.prototype.getMap=function(){return this._map},T.prototype.add=function(e,t){if(e==null)throw new Error(U.NULL_ARGUMENT);if(t==null)throw new Error(U.NULL_ARGUMENT);var u=this._map.get(e);u!==void 0?(u.push(t),this._map.set(e,u)):this._map.set(e,[t])},T.prototype.get=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);var t=this._map.get(e);if(t!==void 0)return t;throw new Error(U.KEY_NOT_FOUND)},T.prototype.remove=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(U.KEY_NOT_FOUND)},T.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(u,s){var h=u.filter(function(r){return!e(r)});h.length>0?t._map.set(s,h):t._map.delete(s)})},T.prototype.hasKey=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);return this._map.has(e)},T.prototype.clone=function(){var e=new T;return this._map.forEach(function(t,u){t.forEach(function(s){return e.add(u,s.clone())})}),e},T.prototype.traverse=function(e){this._map.forEach(function(t,u){e(u,t)})},T}();dt.Lookup=E},"B6l+":function(Se,dt,L){var U=L("Sq3C"),E=L("Z1HP"),T=L("Sxd8"),e=L("dt0z");function t(u,s,h){u=e(u),s=T(s);var r=s?E(u):0;return s&&r<s?u+U(s-r,h):u}Se.exports=t},BGjm:function(Se,dt){Se.exports=L;function L(U,E){E||(E=document);var T=E.head||E.getElementsByTagName("head")[0];if(!T){T=E.createElement("head");var e=E.body||E.getElementsByTagName("body")[0];e?e.parentNode.insertBefore(T,e):E.documentElement.appendChild(T)}var t=E.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=U:t.appendChild(E.createTextNode(U)),T.appendChild(t),t}},BMrR:function(Se,dt,L){"use strict";var U=L("qrJ5");dt.a=U.a},BkRI:function(Se,dt,L){var U=L("OBhP"),E=1,T=4;function e(t){return U(t,E|T)}Se.exports=e},Bnag:function(Se,dt){function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},BpBL:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return E});var U=L("Hel2");function E(e,t){var u=t.extent,s=new Promise(function(r){T(e,function(c){r(c)})}),h={images:s,_id:1,dataArray:[{_id:0,coordinates:[[u[0],u[1]],[u[2],u[3]]]}]};return h}function T(e,t){var u=e,s=[];if(typeof u=="string")Object(U.o)({url:u},function(c,n){s.push(n),t(s)});else{var h=u.length,r=0;u.forEach(function(c){Object(U.o)({url:c},function(n,i){r++,s.push(i),r===h&&t(s)})})}return E}},CZoQ:function(Se,dt){function L(U,E,T){for(var e=T-1,t=U.length;++e<t;)if(U[e]===E)return e;return-1}Se.exports=L},"D+ow":function(Se,dt){},D9lx:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingInWhenOnSyntax=void 0;var U=L("6AGu"),E=L("406g"),T=L("z4Hk"),e=function(){function t(u){this._binding=u,this._bindingWhenSyntax=new T.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new E.BindingOnSyntax(this._binding),this._bindingInSyntax=new U.BindingInSyntax(u)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(u){return this._bindingWhenSyntax.when(u)},t.prototype.whenTargetNamed=function(u){return this._bindingWhenSyntax.whenTargetNamed(u)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(u,s){return this._bindingWhenSyntax.whenTargetTagged(u,s)},t.prototype.whenInjectedInto=function(u){return this._bindingWhenSyntax.whenInjectedInto(u)},t.prototype.whenParentNamed=function(u){return this._bindingWhenSyntax.whenParentNamed(u)},t.prototype.whenParentTagged=function(u,s){return this._bindingWhenSyntax.whenParentTagged(u,s)},t.prototype.whenAnyAncestorIs=function(u){return this._bindingWhenSyntax.whenAnyAncestorIs(u)},t.prototype.whenNoAncestorIs=function(u){return this._bindingWhenSyntax.whenNoAncestorIs(u)},t.prototype.whenAnyAncestorNamed=function(u){return this._bindingWhenSyntax.whenAnyAncestorNamed(u)},t.prototype.whenAnyAncestorTagged=function(u,s){return this._bindingWhenSyntax.whenAnyAncestorTagged(u,s)},t.prototype.whenNoAncestorNamed=function(u){return this._bindingWhenSyntax.whenNoAncestorNamed(u)},t.prototype.whenNoAncestorTagged=function(u,s){return this._bindingWhenSyntax.whenNoAncestorTagged(u,s)},t.prototype.whenAnyAncestorMatches=function(u){return this._bindingWhenSyntax.whenAnyAncestorMatches(u)},t.prototype.whenNoAncestorMatches=function(u){return this._bindingWhenSyntax.whenNoAncestorMatches(u)},t.prototype.onActivation=function(u){return this._bindingOnSyntax.onActivation(u)},t}();dt.BindingInWhenOnSyntax=e},DnfT:function(Se,dt,L){},"Dw+G":function(Se,dt,L){var U=L("juv8"),E=L("mTTR");function T(e,t){return e&&U(t,E(t),e)}Se.exports=T},DzJC:function(Se,dt,L){var U=L("sEfC"),E=L("GoyQ"),T="Expected a function";function e(t,u,s){var h=!0,r=!0;if(typeof t!="function")throw new TypeError(T);return E(s)&&(h="leading"in s?!!s.leading:h,r="trailing"in s?!!s.trailing:r),U(t,u,{leading:h,maxWait:u,trailing:r})}Se.exports=e},EA7m:function(Se,dt,L){var U=L("zZ0H"),E=L("Ioao"),T=L("wclG");function e(t,u){return T(E(t,u,U),t+"")}Se.exports=e},EEGq:function(Se,dt,L){var U=L("juv8"),E=L("oCl/");function T(e,t){return U(e,E(e),t)}Se.exports=T},EbDI:function(Se,dt){function L(U){if(typeof Symbol!="undefined"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},EfZ0:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},Em2t:function(Se,dt,L){var U=L("bahg"),E=L("quyA"),T=L("0JQy");function e(t){return E(t)?T(t):U(t)}Se.exports=e},FI6e:function(Se,dt){},FRQA:function(Se,dt,L){"use strict";var U=L("GNNt"),E=L("wEI+"),T=L("DnfT"),e=L.n(T),t=L("q1tI"),u=L.n(t),s=L("TSYQ"),h=L.n(s),r=L("jYQm"),c=function(i){var a=Object(t.useContext)(r.a),o=i.children,l=i.contentWidth,f=i.className,v=i.style,b=Object(t.useContext)(E.b.ConfigContext),g=b.getPrefixCls,y=i.prefixCls||g("pro"),_=l||a.contentWidth,M="".concat(y,"-grid-content");return u.a.createElement("div",{className:h()(M,f,{wide:_==="Fixed"}),style:v},u.a.createElement("div",{className:"".concat(y,"-grid-content-children")},o))};dt.a=c},FV85:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.TargetTypeEnum=dt.BindingTypeEnum=dt.BindingScopeEnum=void 0;var U={Request:"Request",Singleton:"Singleton",Transient:"Transient"};dt.BindingScopeEnum=U;var E={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};dt.BindingTypeEnum=E;var T={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};dt.TargetTypeEnum=T},FmoU:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return y}),L.d(dt,"b",function(){return m});var U=function(k,Z,X){k.prototype=Z.prototype=X,X.constructor=k};function E(k,Z){var X=Object.create(k.prototype);for(var at in Z)X[at]=Z[at];return X}function T(){}var e=.7,t=1/e,u="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",h="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,c=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),n=new RegExp("^rgb\\("+[h,h,h]+"\\)$"),i=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),a=new RegExp("^rgba\\("+[h,h,h,s]+"\\)$"),o=new RegExp("^hsl\\("+[s,h,h]+"\\)$"),l=new RegExp("^hsla\\("+[s,h,h,s]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U(T,y,{copy:function(Z){return Object.assign(new this.constructor,this,Z)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:b,formatRgb:g,toString:g});function v(){return this.rgb().formatHex()}function b(){return H(this).formatHsl()}function g(){return this.rgb().formatRgb()}function y(k){var Z,X;return k=(k+"").trim().toLowerCase(),(Z=r.exec(k))?(X=Z[1].length,Z=parseInt(Z[1],16),X===6?_(Z):X===3?new S(Z>>8&15|Z>>4&240,Z>>4&15|Z&240,(Z&15)<<4|Z&15,1):X===8?M(Z>>24&255,Z>>16&255,Z>>8&255,(Z&255)/255):X===4?M(Z>>12&15|Z>>8&240,Z>>8&15|Z>>4&240,Z>>4&15|Z&240,((Z&15)<<4|Z&15)/255):null):(Z=c.exec(k))?new S(Z[1],Z[2],Z[3],1):(Z=n.exec(k))?new S(Z[1]*255/100,Z[2]*255/100,Z[3]*255/100,1):(Z=i.exec(k))?M(Z[1],Z[2],Z[3],Z[4]):(Z=a.exec(k))?M(Z[1]*255/100,Z[2]*255/100,Z[3]*255/100,Z[4]):(Z=o.exec(k))?R(Z[1],Z[2]/100,Z[3]/100,1):(Z=l.exec(k))?R(Z[1],Z[2]/100,Z[3]/100,Z[4]):f.hasOwnProperty(k)?_(f[k]):k==="transparent"?new S(NaN,NaN,NaN,0):null}function _(k){return new S(k>>16&255,k>>8&255,k&255,1)}function M(k,Z,X,at){return at<=0&&(k=Z=X=NaN),new S(k,Z,X,at)}function x(k){return k instanceof T||(k=y(k)),k?(k=k.rgb(),new S(k.r,k.g,k.b,k.opacity)):new S}function m(k,Z,X,at){return arguments.length===1?x(k):new S(k,Z,X,at==null?1:at)}function S(k,Z,X,at){this.r=+k,this.g=+Z,this.b=+X,this.opacity=+at}U(S,m,E(T,{brighter:function(Z){return Z=Z==null?t:Math.pow(t,Z),new S(this.r*Z,this.g*Z,this.b*Z,this.opacity)},darker:function(Z){return Z=Z==null?e:Math.pow(e,Z),new S(this.r*Z,this.g*Z,this.b*Z,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P,formatHex:P,formatRgb:A,toString:A}));function P(){return"#"+O(this.r)+O(this.g)+O(this.b)}function A(){var k=this.opacity;return k=isNaN(k)?1:Math.max(0,Math.min(1,k)),(k===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(k===1?")":", "+k+")")}function O(k){return k=Math.max(0,Math.min(255,Math.round(k)||0)),(k<16?"0":"")+k.toString(16)}function R(k,Z,X,at){return at<=0?k=Z=X=NaN:X<=0||X>=1?k=Z=NaN:Z<=0&&(k=NaN),new K(k,Z,X,at)}function H(k){if(k instanceof K)return new K(k.h,k.s,k.l,k.opacity);if(k instanceof T||(k=y(k)),!k)return new K;if(k instanceof K)return k;k=k.rgb();var Z=k.r/255,X=k.g/255,at=k.b/255,pt=Math.min(Z,X,at),gt=Math.max(Z,X,at),ft=NaN,Rt=gt-pt,Nt=(gt+pt)/2;return Rt?(Z===gt?ft=(X-at)/Rt+(X<at)*6:X===gt?ft=(at-Z)/Rt+2:ft=(Z-X)/Rt+4,Rt/=Nt<.5?gt+pt:2-gt-pt,ft*=60):Rt=Nt>0&&Nt<1?0:ft,new K(ft,Rt,Nt,k.opacity)}function N(k,Z,X,at){return arguments.length===1?H(k):new K(k,Z,X,at==null?1:at)}function K(k,Z,X,at){this.h=+k,this.s=+Z,this.l=+X,this.opacity=+at}U(K,N,E(T,{brighter:function(Z){return Z=Z==null?t:Math.pow(t,Z),new K(this.h,this.s,this.l*Z,this.opacity)},darker:function(Z){return Z=Z==null?e:Math.pow(e,Z),new K(this.h,this.s,this.l*Z,this.opacity)},rgb:function(){var Z=this.h%360+(this.h<0)*360,X=isNaN(Z)||isNaN(this.s)?0:this.s,at=this.l,pt=at+(at<.5?at:1-at)*X,gt=2*at-pt;return new S(V(Z>=240?Z-240:Z+120,gt,pt),V(Z,gt,pt),V(Z<120?Z+240:Z-120,gt,pt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Z=this.opacity;return Z=isNaN(Z)?1:Math.max(0,Math.min(1,Z)),(Z===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Z===1?")":", "+Z+")")}}));function V(k,Z,X){return(k<60?Z+(X-Z)*k/60:k<180?X:k<240?Z+(X-Z)*(240-k)/60:Z)*255}},G6z8:function(Se,dt,L){var U=L("fR/l"),E=L("oCl/"),T=L("mTTR");function e(t){return U(t,T,E)}Se.exports=e},GXnB:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Metadata=void 0;var U=L("xfSm"),E=function(){function T(e,t){this.key=e,this.value=t}return T.prototype.toString=function(){return this.key===U.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},T}();dt.Metadata=E},Gi0A:function(Se,dt,L){var U=L("QqLw"),E=L("ExA7"),T="[object Map]";function e(t){return E(t)&&U(t)==T}Se.exports=e},Hel2:function(Se,dt,L){"use strict";L.d(dt,"o",function(){return Ot}),L.d(dt,"m",function(){return z}),L.d(dt,"p",function(){return st}),L.d(dt,"d",function(){return $}),L.d(dt,"q",function(){return yt}),L.d(dt,"r",function(){return Qt}),L.d(dt,"j",function(){return ne}),L.d(dt,"h",function(){return Wt}),L.d(dt,"b",function(){return $t}),L.d(dt,"i",function(){return De}),L.d(dt,"s",function(){return Qe}),L.d(dt,"k",function(){return de}),L.d(dt,"l",function(){return ue}),L.d(dt,"n",function(){return Ne}),L.d(dt,"f",function(){return cn}),L.d(dt,"e",function(){return Fn}),L.d(dt,"g",function(){return wn}),L.d(dt,"a",function(){return U}),L.d(dt,"c",function(){return E});var U={};L.r(U),L.d(U,"getContainer",function(){return h}),L.d(U,"trim",function(){return r}),L.d(U,"splitWords",function(){return c}),L.d(U,"create",function(){return i}),L.d(U,"remove",function(){return a}),L.d(U,"addClass",function(){return o}),L.d(U,"removeClass",function(){return l}),L.d(U,"hasClass",function(){return f}),L.d(U,"setClass",function(){return v}),L.d(U,"getClass",function(){return b}),L.d(U,"empty",function(){return g}),L.d(U,"setTransform",function(){return _}),L.d(U,"triggerResize",function(){return M}),L.d(U,"printCanvas",function(){return x}),L.d(U,"getViewPortScale",function(){return m}),L.d(U,"DPR",function(){return S});var E={};L.r(E),L.d(E,"sum",function(){return xn}),L.d(E,"max",function(){return en}),L.d(E,"min",function(){return tn}),L.d(E,"mean",function(){return Bn}),L.d(E,"mode",function(){return vr}),L.d(E,"statMap",function(){return li}),L.d(E,"getColumn",function(){return Me}),L.d(E,"getSatByColumn",function(){return Pe});function T(te){var ge=131,Ht=137,re=0;te+="x";for(var Te=Math.floor(9007199254740991/Ht),ae=0;ae<te.length;ae++)re>Te&&(re=Math.floor(re/Ht)),re=re*ge+te.charCodeAt(ae);return re}function e(te){te=te.toString();for(var ge=5381,Ht=te.length;Ht;)ge=ge*33^te.charCodeAt(--Ht);return ge>>>0}var t=L("J4zp"),u=L.n(t),s=window.document.documentElement.style;function h(te){var ge=te;return typeof te=="string"&&(ge=document.getElementById(te)),ge}function r(te){return te.trim?te.trim():te.replace(/^\s+|\s+$/g,"")}function c(te){return r(te).split(/\s+/)}function n(te){if(!s)return te[0];for(var ge in te)if(te[ge]&&te[ge]in s)return te[ge];return te[0]}function i(te,ge,Ht){var re=document.createElement(te);return re.className=ge||"",Ht&&Ht.appendChild(re),re}function a(te){var ge=te.parentNode;ge&&ge.removeChild(te)}function o(te,ge){if(te.classList!==void 0)for(var Ht=c(ge),re=0,Te=Ht.length;re<Te;re++)te.classList.add(Ht[re]);else if(!f(te,ge)){var ae=b(te);v(te,(ae?ae+" ":"")+ge)}}function l(te,ge){te.classList!==void 0?te.classList.remove(ge):v(te,r((" "+b(te)+" ").replace(" "+ge+" "," ")))}function f(te,ge){if(te.classList!==void 0)return te.classList.contains(ge);var Ht=b(te);return Ht.length>0&&new RegExp("(^|\\s)"+ge+"(\\s|$)").test(Ht)}function v(te,ge){te instanceof HTMLElement?te.className=ge:te.className.baseVal=ge}function b(te){return te instanceof SVGElement&&(te=te.correspondingElement),te.className.baseVal===void 0?te.className:te.className.baseVal}function g(te){for(;te&&te.firstChild;)te.removeChild(te.firstChild)}var y=n(["transform","WebkitTransform"]);function _(te,ge){te.style[y]=ge}function M(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var te=window.document.createEvent("UIEvents");te.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(te)}}function x(te){var ge=["padding: "+(te.height/2-8)+"px "+te.width/2+"px;","line-height: "+te.height+"px;","background-image: url("+te.toDataURL()+");"];console.log(`%c
`,ge.join(""))}function m(){var te,ge=document.querySelector('meta[name="viewport"]');if(!ge)return 1;var Ht=(te=ge.content)===null||te===void 0?void 0:te.split(","),re=Ht.find(function(Te){var ae=Te.split("="),xe=u()(ae,2),qe=xe[0],zn=xe[1];return qe==="initial-scale"});return re?re.split("=")[1]*1:1}var S=m()<1?1:window.devicePixelRatio,P=L("lwsE"),A=L.n(P),O=L("W8MJ"),R=L.n(O),H=L("7W2i"),N=L.n(H),K=L("a1gu"),V=L.n(K),k=L("Nsbk"),Z=L.n(k),X=L("oShl"),at=L.n(X);function pt(te){var ge=gt();return function(){var re=Z()(te),Te;if(ge){var ae=Z()(this).constructor;Te=Reflect.construct(re,arguments,ae)}else Te=re.apply(this,arguments);return V()(this,Te)}}function gt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(te){return!1}}var ft=function(te){N()(Ht,te);var ge=pt(Ht);function Ht(re,Te,ae){var xe;return A()(this,Ht),xe=ge.call(this,re),xe.status=void 0,xe.url=void 0,xe.status=Te,xe.url=ae,xe.name=xe.constructor.name,xe.message=re,xe}return R()(Ht,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),Ht}(at()(Error));function Rt(te){var ge=new XMLHttpRequest;ge.open("GET",te.url,!0);for(var Ht in te.headers)te.headers.hasOwnProperty(Ht)&&ge.setRequestHeader(Ht,te.headers[Ht]);return ge.withCredentials=te.credentials==="include",ge}var Nt=function(ge,Ht){var re=Rt(ge);return re.setRequestHeader("Accept","application/json"),re.onerror=function(){Ht(new Error(re.statusText))},re.onload=function(){if(re.status>=200&&re.status<300&&re.response){var Te;try{Te=JSON.parse(re.response)}catch(ae){return Ht(ae)}Ht(null,Te)}else re.status===401?Ht(new ft("".concat(re.statusText),re.status,ge.url)):Ht(new ft(re.statusText,re.status,ge.url))},re.send(),re},Dt=function(ge,Ht){var re=Rt(ge);return re.responseType="arraybuffer",re.onerror=function(){Ht(new Error(re.statusText))},re.onload=function(){var Te=re.response;if(Te.byteLength===0&&re.status===200)return Ht(new Error("http status 200 returned without content."));re.status>=200&&re.status<300&&re.response?Ht(null,{data:Te,cacheControl:re.getResponseHeader("Cache-Control"),expires:re.getResponseHeader("Expires")}):Ht(new ft(re.statusText,re.status,ge.url))},re.send(),re};function St(te){var ge=window.document.createElement("a");return ge.href=te,ge.protocol===window.document.location.protocol&&ge.host===window.document.location.host}var xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",Ot=function(ge,Ht){return Dt(ge,function(re,Te){if(re)Ht(re);else if(Te){var ae=new window.Image;ae.crossOrigin="anonymous";var xe=window.URL||window.webkitURL;ae.onload=function(){Ht(null,ae),xe.revokeObjectURL(ae.src)};var qe=new window.Blob([new Uint8Array(Te.data)],{type:"image/png"});ae.src=Te.data.byteLength?xe.createObjectURL(qe):xt}})},it=L("0wsv"),At=2*Math.PI*6378137/2;function z(te){var ge=[Infinity,Infinity,-Infinity,-Infinity];return te.forEach(function(Ht){var re=Ht.coordinates;q(ge,re)}),ge}function q(te,ge){return Array.isArray(ge[0])?ge.forEach(function(Ht){q(te,Ht)}):(te[0]>ge[0]&&(te[0]=ge[0]),te[1]>ge[1]&&(te[1]=ge[1]),te[2]<ge[0]&&(te[2]=ge[0]),te[3]<ge[1]&&(te[3]=ge[1])),te}function mt(te,ge){return et(te,ge)}function et(te,ge){return Array.isArray(te[0])?te.map(function(Ht){return et(Ht,ge)}):ge(te)}function st(te){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};te=ot(te,ge);var re=te[0],Te=te[1],ae=re*At/180,xe=Math.log(Math.tan((90+Te)*Math.PI/360))/(Math.PI/180);return xe=xe*At/180,Ht.enable&&(ae=Number(ae.toFixed(Ht.decimal)),xe=Number(xe.toFixed(Ht.decimal))),te.length===3?[ae,xe,te[2]]:[ae,xe]}function bt(te){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Ht=te[0],re=te[1],Te=Ht/At*180,ae=re/At*180;return ae=180/Math.PI*(2*Math.atan(Math.exp(ae*Math.PI/180))-Math.PI/2),ge!=null&&(Te=Number(Te.toFixed(ge)),ae=Number(ae.toFixed(ge))),te.length===3?[Te,ae,te[2]]:[Te,ae]}function Y(te){if(te==null)throw new Error("lng is required");return(te>180||te<-180)&&(te=te%360,te>180&&(te=-360+te),te<-180&&(te=360+te),te===0&&(te=0)),te}function rt(te){if(te==null)throw new Error("lat is required");return(te>90||te<-90)&&(te=te%180,te>90&&(te=-180+te),te<-90&&(te=180+te),te===0&&(te=0)),te}function ot(te,ge){if(ge===!1)return te;var Ht=Y(te[0]),re=rt(te[1]);return re>85&&(re=85),re<-85&&(re=-85),te.length===3?[Ht,re,te[2]]:[Ht,re]}function $(te){var ge=85.0511287798,Ht=Math.max(Math.min(ge,te[1]),-ge),re=256<<20,Te=Math.PI/180,ae=te[0]*Te,xe=Ht*Te;xe=Math.log(Math.tan(Math.PI/4+xe/2));var qe=.5/Math.PI,zn=.5,ar=-.5/Math.PI;return Te=.5,ae=re*(qe*ae+zn),xe=re*(ar*xe+Te),[Math.floor(ae),Math.floor(xe)]}function Pt(te){var ge=.5/Math.PI,Ht=.5,re=-.5/Math.PI,Te=.5,ae=256<<20,xe=u()(te,2),qe=xe[0],zn=xe[1];qe=(qe/ae-Ht)/ge,zn=(zn/ae-Te)/re,zn=(Math.atan(Math.pow(Math.E,zn))-Math.PI/4)*2,Te=Math.PI/180;var ar=zn/Te,_n=qe/Te;return[_n,ar]}function yt(te,ge,Ht){var re=Object(it.a)(ge[1]-te[1]),Te=Object(it.a)(ge[0]-te[0]),ae=Object(it.a)(te[1]),xe=Object(it.a)(ge[1]),qe=Math.pow(Math.sin(re/2),2)+Math.pow(Math.sin(Te/2),2)*Math.cos(ae)*Math.cos(xe);return Object(it.g)(2*Math.atan2(Math.sqrt(qe),Math.sqrt(1-qe)),Ht="meters")}function Ft(te){var ge=Math.PI/180,Ht=85.0511287798,re=6378137,Te=Math.max(Math.min(Ht,te[1]),-Ht),ae=Math.sin(Te*ge),xe=re*te[0]*ge,qe=re*Math.log((1+ae)/(1-ae))/2;return[xe,qe]}function Qt(te,ge){var Ht=Math.abs(te[1][1]-te[0][1])*ge,re=Math.abs(te[1][0]-te[0][0])*ge;return[[te[0][0]-re,te[0][1]-Ht],[te[1][0]+re,te[1][1]+Ht]]}function ne(te,ge){return te[0][0]<=ge[0][0]&&te[0][1]<=ge[0][1]&&te[1][0]>=ge[1][0]&&te[1][1]>=ge[1][1]}function Wt(te){return[[te[0],te[1]],[te[2],te[3]]]}var $t=function(){function te(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Ht=arguments.length>1?arguments[1]:void 0;A()(this,te),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=ge,this.destroy=Ht||this.defaultDestroy,this.order=[],this.clear()}return R()(te,[{key:"clear",value:function(){var Ht=this;this.order.forEach(function(re){Ht.delete(re)}),this.cache={},this.order=[]}},{key:"get",value:function(Ht){var re=this.cache[Ht];return re&&(this.deleteOrder(Ht),this.appendOrder(Ht)),re}},{key:"set",value:function(Ht,re){this.cache[Ht]?(this.delete(Ht),this.cache[Ht]=re,this.appendOrder(Ht)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Ht]=re,this.appendOrder(Ht))}},{key:"delete",value:function(Ht){var re=this.cache[Ht];re&&(this.deleteCache(Ht),this.deleteOrder(Ht),this.destroy(re,Ht))}},{key:"deleteCache",value:function(Ht){delete this.cache[Ht]}},{key:"deleteOrder",value:function(Ht){var re=this.order.findIndex(function(Te){return Te===Ht});re>=0&&this.order.splice(re,1)}},{key:"appendOrder",value:function(Ht){this.order.push(Ht)}},{key:"defaultDestroy",value:function(Ht,re){return null}}]),te}();function De(te,ge){te.forEach(function(Ht){!ge[Ht]||(ge[Ht]=ge[Ht].bind(ge))})}var Je=L("FmoU");function Qe(te){var ge=Je.a(te),Ht=[0,0,0,0];return ge!=null&&(Ht[0]=ge.r/255,Ht[1]=ge.g/255,Ht[2]=ge.b/255,Ht[3]=ge.opacity),Ht}function de(te){var ge=te&&te[0],Ht=te&&te[1],re=te&&te[2],Te=ge+Ht*256+re*65536-1;return Te}function ue(te){return[te+1&255,te+1>>8&255,te+1>>8>>8&255]}function Ne(te){var ge=document.createElement("canvas"),Ht=ge.getContext("2d");ge.width=256,ge.height=1;for(var re=Ht.createLinearGradient(0,0,256,1),Te=null,ae=te.positions[0],xe=te.positions[te.positions.length-1],qe=0;qe<te.colors.length;++qe){var zn=(te.positions[qe]-ae)/(xe-ae);re.addColorStop(zn,te.colors[qe])}return Ht.fillStyle=re,Ht.fillRect(0,0,256,1),Te=new Uint8ClampedArray(Ht.getImageData(0,0,256,1).data),new ImageData(Te,256,1)}var cn;(function(te){te.CENTER="center",te.TOP="top",te["TOP-LEFT"]="top-left",te["TOP-RIGHT"]="top-right",te.BOTTOM="bottom",te["BOTTOM-LEFT"]="bottom-left",te.LEFT="left",te.RIGHT="right"})(cn||(cn={}));var Fn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wn(te,ge,Ht){var re=te.classList;for(var Te in Fn)Fn.hasOwnProperty(Te)&&re.remove("l7-".concat(Ht,"-anchor-").concat(Te));re.add("l7-".concat(Ht,"-anchor-").concat(ge))}function en(te){if(te.length===0)throw new Error("max requires at least one data point");for(var ge=te[0],Ht=1;Ht<te.length;Ht++)te[Ht]>ge&&(ge=te[Ht]);return ge*1}function tn(te){if(te.length===0)throw new Error("min requires at least one data point");for(var ge=te[0],Ht=1;Ht<te.length;Ht++)te[Ht]<ge&&(ge=te[Ht]);return ge*1}function xn(te){if(te.length===0)return 0;for(var ge=te[0]*1,Ht=1;Ht<te.length;Ht++)ge+=te[Ht]*1;return ge}function Bn(te){if(te.length===0)throw new Error("mean requires at least one data point");return xn(te)/te.length}function vr(te){if(te.length===0)throw new Error("mean requires at least one data point");if(te.length<3)return te[0];te.sort();for(var ge=te[0],Ht=NaN,re=0,Te=1,ae=1;ae<te.length+1;ae++)te[ae]!==ge?(Te>re&&(re=Te,Ht=ge),Te=1,ge=te[ae]):Te++;return Ht*1}var li={min:tn,max:en,mean:Bn,sum:xn,mode:vr};function Me(te,ge){return te.map(function(Ht){return Ht[ge]})}function Pe(te,ge){return li[te](ge)}},HpQ9:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.ContainerSnapshot=void 0;var U=function(){function E(){}return E.of=function(T,e){var t=new E;return t.bindings=T,t.middleware=e,t},E}();dt.ContainerSnapshot=U},HthE:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U}),L.d(dt,"b",function(){return E});var U;(function(T){T[T.LNGLAT=1]="LNGLAT",T[T.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",T[T.VECTOR_TILE=3]="VECTOR_TILE",T[T.IDENTITY=4]="IDENTITY",T[T.P20=5]="P20",T[T.P20_OFFSET=6]="P20_OFFSET",T[T.METER_OFFSET=7]="METER_OFFSET",T[T.P20_2=8]="P20_2"})(U||(U={}));var E={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"}},I0ug:function(Se,dt,L){"use strict";(function(U){L.d(dt,"a",function(){return T});var E=L("U8pU");function T(e){if(typeof window!="undefined"&&Object(E.a)(window.process)==="object"&&window.process.type==="renderer"||typeof U!="undefined"&&Object(E.a)(U.versions)==="object"&&Boolean(U.versions.electron))return!0;var t=(typeof navigator=="undefined"?"undefined":Object(E.a)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,u=e||t;return!!(u&&u.indexOf("Electron")>=0)}}).call(this,L("Q2Ig"))},IOcx:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U}),L.d(dt,"b",function(){return R}),L.d(dt,"c",function(){return H}),L.d(dt,"d",function(){return N}),L.d(dt,"e",function(){return K});var U={};L.r(U),L.d(U,"create",function(){return T}),L.d(U,"clone",function(){return e}),L.d(U,"copy",function(){return t}),L.d(U,"identity",function(){return u}),L.d(U,"fromValues",function(){return s}),L.d(U,"set",function(){return h}),L.d(U,"transpose",function(){return r}),L.d(U,"invert",function(){return c}),L.d(U,"adjoint",function(){return n}),L.d(U,"determinant",function(){return i}),L.d(U,"multiply",function(){return a}),L.d(U,"rotate",function(){return o}),L.d(U,"scale",function(){return l}),L.d(U,"fromRotation",function(){return f}),L.d(U,"fromScaling",function(){return v}),L.d(U,"str",function(){return b}),L.d(U,"frob",function(){return g}),L.d(U,"LDU",function(){return y}),L.d(U,"add",function(){return _}),L.d(U,"subtract",function(){return M}),L.d(U,"exactEquals",function(){return x}),L.d(U,"equals",function(){return m}),L.d(U,"multiplyScalar",function(){return S}),L.d(U,"multiplyScalarAndAdd",function(){return P}),L.d(U,"mul",function(){return A}),L.d(U,"sub",function(){return O});var E=L("yU0y");function T(){var V=new E.a(4);return E.a!=Float32Array&&(V[1]=0,V[2]=0),V[0]=1,V[3]=1,V}function e(V){var k=new E.a(4);return k[0]=V[0],k[1]=V[1],k[2]=V[2],k[3]=V[3],k}function t(V,k){return V[0]=k[0],V[1]=k[1],V[2]=k[2],V[3]=k[3],V}function u(V){return V[0]=1,V[1]=0,V[2]=0,V[3]=1,V}function s(V,k,Z,X){var at=new E.a(4);return at[0]=V,at[1]=k,at[2]=Z,at[3]=X,at}function h(V,k,Z,X,at){return V[0]=k,V[1]=Z,V[2]=X,V[3]=at,V}function r(V,k){if(V===k){var Z=k[1];V[1]=k[2],V[2]=Z}else V[0]=k[0],V[1]=k[2],V[2]=k[1],V[3]=k[3];return V}function c(V,k){var Z=k[0],X=k[1],at=k[2],pt=k[3],gt=Z*pt-at*X;return gt?(gt=1/gt,V[0]=pt*gt,V[1]=-X*gt,V[2]=-at*gt,V[3]=Z*gt,V):null}function n(V,k){var Z=k[0];return V[0]=k[3],V[1]=-k[1],V[2]=-k[2],V[3]=Z,V}function i(V){return V[0]*V[3]-V[2]*V[1]}function a(V,k,Z){var X=k[0],at=k[1],pt=k[2],gt=k[3],ft=Z[0],Rt=Z[1],Nt=Z[2],Dt=Z[3];return V[0]=X*ft+pt*Rt,V[1]=at*ft+gt*Rt,V[2]=X*Nt+pt*Dt,V[3]=at*Nt+gt*Dt,V}function o(V,k,Z){var X=k[0],at=k[1],pt=k[2],gt=k[3],ft=Math.sin(Z),Rt=Math.cos(Z);return V[0]=X*Rt+pt*ft,V[1]=at*Rt+gt*ft,V[2]=X*-ft+pt*Rt,V[3]=at*-ft+gt*Rt,V}function l(V,k,Z){var X=k[0],at=k[1],pt=k[2],gt=k[3],ft=Z[0],Rt=Z[1];return V[0]=X*ft,V[1]=at*ft,V[2]=pt*Rt,V[3]=gt*Rt,V}function f(V,k){var Z=Math.sin(k),X=Math.cos(k);return V[0]=X,V[1]=Z,V[2]=-Z,V[3]=X,V}function v(V,k){return V[0]=k[0],V[1]=0,V[2]=0,V[3]=k[1],V}function b(V){return"mat2("+V[0]+", "+V[1]+", "+V[2]+", "+V[3]+")"}function g(V){return Math.hypot(V[0],V[1],V[2],V[3])}function y(V,k,Z,X){return V[2]=X[2]/X[0],Z[0]=X[0],Z[1]=X[1],Z[3]=X[3]-V[2]*Z[1],[V,k,Z]}function _(V,k,Z){return V[0]=k[0]+Z[0],V[1]=k[1]+Z[1],V[2]=k[2]+Z[2],V[3]=k[3]+Z[3],V}function M(V,k,Z){return V[0]=k[0]-Z[0],V[1]=k[1]-Z[1],V[2]=k[2]-Z[2],V[3]=k[3]-Z[3],V}function x(V,k){return V[0]===k[0]&&V[1]===k[1]&&V[2]===k[2]&&V[3]===k[3]}function m(V,k){var Z=V[0],X=V[1],at=V[2],pt=V[3],gt=k[0],ft=k[1],Rt=k[2],Nt=k[3];return Math.abs(Z-gt)<=E.b*Math.max(1,Math.abs(Z),Math.abs(gt))&&Math.abs(X-ft)<=E.b*Math.max(1,Math.abs(X),Math.abs(ft))&&Math.abs(at-Rt)<=E.b*Math.max(1,Math.abs(at),Math.abs(Rt))&&Math.abs(pt-Nt)<=E.b*Math.max(1,Math.abs(pt),Math.abs(Nt))}function S(V,k,Z){return V[0]=k[0]*Z,V[1]=k[1]*Z,V[2]=k[2]*Z,V[3]=k[3]*Z,V}function P(V,k,Z,X){return V[0]=k[0]+Z[0]*X,V[1]=k[1]+Z[1]*X,V[2]=k[2]+Z[2]*X,V[3]=k[3]+Z[3]*X,V}var A=a,O=M,R=L("ZaHm"),H=L("ZxFD"),N=L("n+fv"),K=L("bl9R")},ISu3:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return T}),L.d(dt,"c",function(){return e}),L.d(dt,"b",function(){return t}),L.d(dt,"d",function(){return u});var U={},E={},T=function(h){return E[h]},e=function(h,r){E[h]=r},t=function(h){return U[h]},u=function(h,r){U[h]=r}},Ijbi:function(Se,dt,L){var U=L("WkPL");function E(T){if(Array.isArray(T))return U(T)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},Ioao:function(Se,dt,L){var U=L("heNW"),E=Math.max;function T(e,t,u){return t=E(t===void 0?e.length-1:t,0),function(){for(var s=arguments,h=-1,r=E(s.length-t,0),c=Array(r);++h<r;)c[h]=s[t+h];h=-1;for(var n=Array(t+1);++h<t;)n[h]=s[h];return n[t]=u(c),U(e,this,n)}}Se.exports=T},IzEo:function(Se,dt,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("lnY3"),e=L.n(T),t=L("Znn+"),u=L("14J3"),s=L("jCWc")},J2iB:function(Se,dt){function L(U){return U==null}Se.exports=L},J7lC:function(Se,dt){},JBE3:function(Se,dt,L){var U=L("+Qka"),E=L("LsHQ"),T=E(function(e,t,u,s){U(e,t,u,s)});Se.exports=T},Jssm:function(Se,dt,L){"use strict";var U=L("q1tI"),E=L("i8i4"),T=L("17x9"),e=L("fhzG");Se.exports=e({displayName:"ReactFitText",propTypes:{children:T.element.isRequired,compressor:T.number,minFontSize:T.number,maxFontSize:T.number},getDefaultProps:function(){return{compressor:1,minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY}},componentDidMount:function(){window.addEventListener("resize",this._onBodyResize),this._onBodyResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._onBodyResize)},componentDidUpdate:function(){this._onBodyResize()},_onBodyResize:function(){var u=E.findDOMNode(this),s=u.offsetWidth;u.style.fontSize=Math.max(Math.min(s/(this.props.compressor*10),parseFloat(this.props.maxFontSize)),parseFloat(this.props.minFontSize))+"px"},_renderChildren:function(){var u=this;return U.Children.map(this.props.children,function(s){return U.cloneElement(s,{ref:function(r){return u._childRef=r}})})},render:function(){return this._renderChildren()[0]}})},K9nA:function(Se,dt,L){"use strict";(function(U,E){L.d(dt,"b",function(){return u}),L.d(dt,"a",function(){return r});var T=L("U8pU"),e={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof U!="undefined"&&U,document:typeof document!="undefined"&&document,process:(typeof E=="undefined"?"undefined":Object(T.a)(E))==="object"&&E},t=e.self||e.window||e.global,u=e.window||e.self||e.global,s=e.global||e.self||e.window,h=e.document||{},r=e.process||{},c=console}).call(this,L("IyRk"),L("Q2Ig"))},KKCa:function(Se,dt){typeof Object.create=="function"?Se.exports=function(U,E){U.super_=E,U.prototype=Object.create(E.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}})}:Se.exports=function(U,E){U.super_=E;var T=function(){};T.prototype=E.prototype,U.prototype=new T,U.prototype.constructor=U}},KwMD:function(Se,dt){function L(U,E,T,e){for(var t=U.length,u=T+(e?1:-1);e?u--:++u<t;)if(E(U[u],u,U))return u;return-1}Se.exports=L},KxBF:function(Se,dt){function L(U,E,T){var e=-1,t=U.length;E<0&&(E=-E>t?0:t+E),T=T>t?t:T,T<0&&(T+=t),t=E>T?0:T-E>>>0,E>>>=0;for(var u=Array(t);++e<t;)u[e]=U[e+E];return u}Se.exports=L},L56e:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U=["mapload"]},LGYb:function(Se,dt,L){var U=L("1hJj"),E=L("jbM+"),T=L("Xt/L"),e=L("xYSL"),t=L("dQpi"),u=L("rEGp"),s=200;function h(r,c,n){var i=-1,a=E,o=r.length,l=!0,f=[],v=f;if(n)l=!1,a=T;else if(o>=s){var b=c?null:t(r);if(b)return u(b);l=!1,a=e,v=new U}else v=c?[]:f;t:for(;++i<o;){var g=r[i],y=c?c(g):g;if(g=n||g!==0?g:0,l&&y===y){for(var _=v.length;_--;)if(v[_]===y)continue t;c&&v.push(y),f.push(g)}else a(v,y,n)||(v!==f&&v.push(y),f.push(g))}return f}Se.exports=h},LKzl:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingWhenOnSyntax=void 0;var U=L("406g"),E=L("z4Hk"),T=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new E.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new U.BindingOnSyntax(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,u){return this._bindingWhenSyntax.whenTargetTagged(t,u)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,u){return this._bindingWhenSyntax.whenParentTagged(t,u)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,u){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,u)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,u){return this._bindingWhenSyntax.whenNoAncestorTagged(t,u)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}();dt.BindingWhenOnSyntax=T},LcsW:function(Se,dt,L){var U=L("kekF"),E=U(Object.getPrototypeOf,Object);Se.exports=E},LgvC:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Binding=void 0;var U=L("FV85"),E=L("d9O0"),T=function(){function e(t,u){this.id=E.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=u,this.type=U.BindingTypeEnum.Invalid,this.constraint=function(s){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===U.BindingScopeEnum.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();dt.Binding=T},LsHQ:function(Se,dt,L){var U=L("EA7m"),E=L("mv/X");function T(e){return U(function(t,u){var s=-1,h=u.length,r=h>1?u[h-1]:void 0,c=h>2?u[2]:void 0;for(r=e.length>3&&typeof r=="function"?(h--,r):void 0,c&&E(u[0],u[1],c)&&(r=h<3?void 0:r,h=1),t=Object(t);++s<h;){var n=u[s];n&&e(t,n,s,r)}return t})}Se.exports=T},LvWW:function(Se,dt,L){var U=L("mhV4");Se.exports=E;function E(h,r){switch(h&&h.type||null){case"FeatureCollection":return h.features=h.features.map(T(E,r)),h;case"GeometryCollection":return h.geometries=h.geometries.map(T(E,r)),h;case"Feature":return h.geometry=E(h.geometry,r),h;case"Polygon":case"MultiPolygon":return e(h,r);default:return h}}function T(h,r){return function(c){return h(c,r)}}function e(h,r){return h.type==="Polygon"?h.coordinates=t(h.coordinates,r):h.type==="MultiPolygon"&&(h.coordinates=h.coordinates.map(T(t,r))),h}function t(h,r){r=!!r,h[0]=u(h[0],r);for(var c=1;c<h.length;c++)h[c]=u(h[c],!r);return h}function u(h,r){return s(h)===r?h:h.reverse()}function s(h){return U.ring(h)>=0}},MCLT:function(Se,dt,L){(function(U){var E=Object.getOwnPropertyDescriptors||function(gt){for(var ft=Object.keys(gt),Rt={},Nt=0;Nt<ft.length;Nt++)Rt[ft[Nt]]=Object.getOwnPropertyDescriptor(gt,ft[Nt]);return Rt},T=/%[sdj%]/g;dt.format=function(pt){if(!_(pt)){for(var gt=[],ft=0;ft<arguments.length;ft++)gt.push(u(arguments[ft]));return gt.join(" ")}for(var ft=1,Rt=arguments,Nt=Rt.length,Dt=String(pt).replace(T,function(xt){if(xt==="%%")return"%";if(ft>=Nt)return xt;switch(xt){case"%s":return String(Rt[ft++]);case"%d":return Number(Rt[ft++]);case"%j":try{return JSON.stringify(Rt[ft++])}catch(Ot){return"[Circular]"}default:return xt}}),St=Rt[ft];ft<Nt;St=Rt[++ft])b(St)||!S(St)?Dt+=" "+St:Dt+=" "+u(St);return Dt},dt.deprecate=function(pt,gt){if(typeof U!="undefined"&&U.noDeprecation===!0)return pt;if(typeof U=="undefined")return function(){return dt.deprecate(pt,gt).apply(this,arguments)};var ft=!1;function Rt(){if(!ft){if(U.throwDeprecation)throw new Error(gt);U.traceDeprecation?console.trace(gt):console.error(gt),ft=!0}return pt.apply(this,arguments)}return Rt};var e={},t;dt.debuglog=function(pt){if(x(t)&&(t=Object({NODE_ENV:"production"}).NODE_DEBUG||""),pt=pt.toUpperCase(),!e[pt])if(new RegExp("\\b"+pt+"\\b","i").test(t)){var gt=U.pid;e[pt]=function(){var ft=dt.format.apply(dt,arguments);console.error("%s %d: %s",pt,gt,ft)}}else e[pt]=function(){};return e[pt]};function u(pt,gt){var ft={seen:[],stylize:h};return arguments.length>=3&&(ft.depth=arguments[2]),arguments.length>=4&&(ft.colors=arguments[3]),v(gt)?ft.showHidden=gt:gt&&dt._extend(ft,gt),x(ft.showHidden)&&(ft.showHidden=!1),x(ft.depth)&&(ft.depth=2),x(ft.colors)&&(ft.colors=!1),x(ft.customInspect)&&(ft.customInspect=!0),ft.colors&&(ft.stylize=s),c(ft,pt,ft.depth)}dt.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(pt,gt){var ft=u.styles[gt];return ft?"["+u.colors[ft][0]+"m"+pt+"["+u.colors[ft][1]+"m":pt}function h(pt,gt){return pt}function r(pt){var gt={};return pt.forEach(function(ft,Rt){gt[ft]=!0}),gt}function c(pt,gt,ft){if(pt.customInspect&&gt&&O(gt.inspect)&&gt.inspect!==dt.inspect&&!(gt.constructor&&gt.constructor.prototype===gt)){var Rt=gt.inspect(ft,pt);return _(Rt)||(Rt=c(pt,Rt,ft)),Rt}var Nt=n(pt,gt);if(Nt)return Nt;var Dt=Object.keys(gt),St=r(Dt);if(pt.showHidden&&(Dt=Object.getOwnPropertyNames(gt)),A(gt)&&(Dt.indexOf("message")>=0||Dt.indexOf("description")>=0))return i(gt);if(Dt.length===0){if(O(gt)){var xt=gt.name?": "+gt.name:"";return pt.stylize("[Function"+xt+"]","special")}if(m(gt))return pt.stylize(RegExp.prototype.toString.call(gt),"regexp");if(P(gt))return pt.stylize(Date.prototype.toString.call(gt),"date");if(A(gt))return i(gt)}var Ot="",it=!1,At=["{","}"];if(f(gt)&&(it=!0,At=["[","]"]),O(gt)){var z=gt.name?": "+gt.name:"";Ot=" [Function"+z+"]"}if(m(gt)&&(Ot=" "+RegExp.prototype.toString.call(gt)),P(gt)&&(Ot=" "+Date.prototype.toUTCString.call(gt)),A(gt)&&(Ot=" "+i(gt)),Dt.length===0&&(!it||gt.length==0))return At[0]+Ot+At[1];if(ft<0)return m(gt)?pt.stylize(RegExp.prototype.toString.call(gt),"regexp"):pt.stylize("[Object]","special");pt.seen.push(gt);var q;return it?q=a(pt,gt,ft,St,Dt):q=Dt.map(function(mt){return o(pt,gt,ft,St,mt,it)}),pt.seen.pop(),l(q,Ot,At)}function n(pt,gt){if(x(gt))return pt.stylize("undefined","undefined");if(_(gt)){var ft="'"+JSON.stringify(gt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return pt.stylize(ft,"string")}if(y(gt))return pt.stylize(""+gt,"number");if(v(gt))return pt.stylize(""+gt,"boolean");if(b(gt))return pt.stylize("null","null")}function i(pt){return"["+Error.prototype.toString.call(pt)+"]"}function a(pt,gt,ft,Rt,Nt){for(var Dt=[],St=0,xt=gt.length;St<xt;++St)k(gt,String(St))?Dt.push(o(pt,gt,ft,Rt,String(St),!0)):Dt.push("");return Nt.forEach(function(Ot){Ot.match(/^\d+$/)||Dt.push(o(pt,gt,ft,Rt,Ot,!0))}),Dt}function o(pt,gt,ft,Rt,Nt,Dt){var St,xt,Ot;if(Ot=Object.getOwnPropertyDescriptor(gt,Nt)||{value:gt[Nt]},Ot.get?Ot.set?xt=pt.stylize("[Getter/Setter]","special"):xt=pt.stylize("[Getter]","special"):Ot.set&&(xt=pt.stylize("[Setter]","special")),k(Rt,Nt)||(St="["+Nt+"]"),xt||(pt.seen.indexOf(Ot.value)<0?(b(ft)?xt=c(pt,Ot.value,null):xt=c(pt,Ot.value,ft-1),xt.indexOf(`
`)>-1&&(Dt?xt=xt.split(`
`).map(function(it){return"  "+it}).join(`
`).substr(2):xt=`
`+xt.split(`
`).map(function(it){return"   "+it}).join(`
`))):xt=pt.stylize("[Circular]","special")),x(St)){if(Dt&&Nt.match(/^\d+$/))return xt;St=JSON.stringify(""+Nt),St.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(St=St.substr(1,St.length-2),St=pt.stylize(St,"name")):(St=St.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),St=pt.stylize(St,"string"))}return St+": "+xt}function l(pt,gt,ft){var Rt=0,Nt=pt.reduce(function(Dt,St){return Rt++,St.indexOf(`
`)>=0&&Rt++,Dt+St.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Nt>60?ft[0]+(gt===""?"":gt+`
 `)+" "+pt.join(`,
  `)+" "+ft[1]:ft[0]+gt+" "+pt.join(", ")+" "+ft[1]}function f(pt){return Array.isArray(pt)}dt.isArray=f;function v(pt){return typeof pt=="boolean"}dt.isBoolean=v;function b(pt){return pt===null}dt.isNull=b;function g(pt){return pt==null}dt.isNullOrUndefined=g;function y(pt){return typeof pt=="number"}dt.isNumber=y;function _(pt){return typeof pt=="string"}dt.isString=_;function M(pt){return typeof pt=="symbol"}dt.isSymbol=M;function x(pt){return pt===void 0}dt.isUndefined=x;function m(pt){return S(pt)&&H(pt)==="[object RegExp]"}dt.isRegExp=m;function S(pt){return typeof pt=="object"&&pt!==null}dt.isObject=S;function P(pt){return S(pt)&&H(pt)==="[object Date]"}dt.isDate=P;function A(pt){return S(pt)&&(H(pt)==="[object Error]"||pt instanceof Error)}dt.isError=A;function O(pt){return typeof pt=="function"}dt.isFunction=O;function R(pt){return pt===null||typeof pt=="boolean"||typeof pt=="number"||typeof pt=="string"||typeof pt=="symbol"||typeof pt=="undefined"}dt.isPrimitive=R,dt.isBuffer=L("1gqn");function H(pt){return Object.prototype.toString.call(pt)}function N(pt){return pt<10?"0"+pt.toString(10):pt.toString(10)}var K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function V(){var pt=new Date,gt=[N(pt.getHours()),N(pt.getMinutes()),N(pt.getSeconds())].join(":");return[pt.getDate(),K[pt.getMonth()],gt].join(" ")}dt.log=function(){console.log("%s - %s",V(),dt.format.apply(dt,arguments))},dt.inherits=L("KKCa"),dt._extend=function(pt,gt){if(!gt||!S(gt))return pt;for(var ft=Object.keys(gt),Rt=ft.length;Rt--;)pt[ft[Rt]]=gt[ft[Rt]];return pt};function k(pt,gt){return Object.prototype.hasOwnProperty.call(pt,gt)}var Z=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;dt.promisify=function(gt){if(typeof gt!="function")throw new TypeError('The "original" argument must be of type Function');if(Z&&gt[Z]){var ft=gt[Z];if(typeof ft!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ft,Z,{value:ft,enumerable:!1,writable:!1,configurable:!0}),ft}function ft(){for(var Rt,Nt,Dt=new Promise(function(Ot,it){Rt=Ot,Nt=it}),St=[],xt=0;xt<arguments.length;xt++)St.push(arguments[xt]);St.push(function(Ot,it){Ot?Nt(Ot):Rt(it)});try{gt.apply(this,St)}catch(Ot){Nt(Ot)}return Dt}return Object.setPrototypeOf(ft,Object.getPrototypeOf(gt)),Z&&Object.defineProperty(ft,Z,{value:ft,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ft,E(gt))},dt.promisify.custom=Z;function X(pt,gt){if(!pt){var ft=new Error("Promise was rejected with a falsy value");ft.reason=pt,pt=ft}return gt(pt)}function at(pt){if(typeof pt!="function")throw new TypeError('The "original" argument must be of type Function');function gt(){for(var ft=[],Rt=0;Rt<arguments.length;Rt++)ft.push(arguments[Rt]);var Nt=ft.pop();if(typeof Nt!="function")throw new TypeError("The last argument must be of type Function");var Dt=this,St=function(){return Nt.apply(Dt,arguments)};pt.apply(this,ft).then(function(xt){U.nextTick(St,null,xt)},function(xt){U.nextTick(X,xt,St)})}return Object.setPrototypeOf(gt,Object.getPrototypeOf(pt)),Object.defineProperties(gt,E(pt)),gt}dt.callbackify=at}).call(this,L("Q2Ig"))},MON2:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.STACK_OVERFLOW=dt.CIRCULAR_DEPENDENCY_IN_FACTORY=dt.POST_CONSTRUCT_ERROR=dt.MULTIPLE_POST_CONSTRUCT_METHODS=dt.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=dt.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=dt.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=dt.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=dt.ARGUMENTS_LENGTH_MISMATCH=dt.INVALID_DECORATOR_OPERATION=dt.INVALID_TO_SELF_VALUE=dt.INVALID_FUNCTION_BINDING=dt.INVALID_MIDDLEWARE_RETURN=dt.NO_MORE_SNAPSHOTS_AVAILABLE=dt.INVALID_BINDING_TYPE=dt.NOT_IMPLEMENTED=dt.CIRCULAR_DEPENDENCY=dt.UNDEFINED_INJECT_ANNOTATION=dt.MISSING_INJECT_ANNOTATION=dt.MISSING_INJECTABLE_ANNOTATION=dt.NOT_REGISTERED=dt.CANNOT_UNBIND=dt.AMBIGUOUS_MATCH=dt.KEY_NOT_FOUND=dt.NULL_ARGUMENT=dt.DUPLICATED_METADATA=dt.DUPLICATED_INJECTABLE_DECORATOR=void 0,dt.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",dt.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",dt.NULL_ARGUMENT="NULL argument",dt.KEY_NOT_FOUND="Key Not Found",dt.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",dt.CANNOT_UNBIND="Could not unbind serviceIdentifier:",dt.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",dt.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",dt.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var U=function(u){return"@inject called with undefined this could mean that the class "+u+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};dt.UNDEFINED_INJECT_ANNOTATION=U,dt.CIRCULAR_DEPENDENCY="Circular dependency found:",dt.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",dt.INVALID_BINDING_TYPE="Invalid binding type:",dt.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",dt.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",dt.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",dt.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",dt.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var E=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"The number of constructor arguments in the derived class "+(u[0]+" must be >= than the number of constructor arguments of its base class.")};dt.ARGUMENTS_LENGTH_MISMATCH=E,dt.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",dt.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",dt.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",dt.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",dt.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var T=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"@postConstruct error in class "+u[0]+": "+u[1]};dt.POST_CONSTRUCT_ERROR=T;var e=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"It looks like there is a circular dependency "+("in one of the '"+u[0]+"' bindings. Please investigate bindings with")+("service identifier '"+u[1]+"'.")};dt.CIRCULAR_DEPENDENCY_IN_FACTORY=e,dt.STACK_OVERFLOW="Maximum call stack size exceeded"},MrPd:function(Se,dt,L){var U=L("hypo"),E=L("ljhN"),T=Object.prototype,e=T.hasOwnProperty;function t(u,s,h){var r=u[s];(!(e.call(u,s)&&E(r,h))||h===void 0&&!(s in u))&&U(u,s,h)}Se.exports=t},Nsbk:function(Se,dt){function L(U){return Se.exports=L=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},Se.exports.default=Se.exports,Se.exports.__esModule=!0,L(U)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},O0oS:function(Se,dt,L){var U=L("Cwc5"),E=function(){try{var T=U(Object,"defineProperty");return T({},"",{}),T}catch(e){}}();Se.exports=E},O1je:function(Se,dt){},OBhP:function(Se,dt,L){var U=L("fmRc"),E=L("gFfm"),T=L("MrPd"),e=L("WwFo"),t=L("Dw+G"),u=L("5Tg0"),s=L("Q1l4"),h=L("VOtZ"),r=L("EEGq"),c=L("qZTm"),n=L("G6z8"),i=L("QqLw"),a=L("yHx3"),o=L("wrZu"),l=L("+iFO"),f=L("Z0cm"),v=L("DSRE"),b=L("zEVN"),g=L("GoyQ"),y=L("1+5i"),_=L("7GkX"),M=L("mTTR"),x=1,m=2,S=4,P="[object Arguments]",A="[object Array]",O="[object Boolean]",R="[object Date]",H="[object Error]",N="[object Function]",K="[object GeneratorFunction]",V="[object Map]",k="[object Number]",Z="[object Object]",X="[object RegExp]",at="[object Set]",pt="[object String]",gt="[object Symbol]",ft="[object WeakMap]",Rt="[object ArrayBuffer]",Nt="[object DataView]",Dt="[object Float32Array]",St="[object Float64Array]",xt="[object Int8Array]",Ot="[object Int16Array]",it="[object Int32Array]",At="[object Uint8Array]",z="[object Uint8ClampedArray]",q="[object Uint16Array]",mt="[object Uint32Array]",et={};et[P]=et[A]=et[Rt]=et[Nt]=et[O]=et[R]=et[Dt]=et[St]=et[xt]=et[Ot]=et[it]=et[V]=et[k]=et[Z]=et[X]=et[at]=et[pt]=et[gt]=et[At]=et[z]=et[q]=et[mt]=!0,et[H]=et[N]=et[ft]=!1;function st(bt,Y,rt,ot,$,Pt){var yt,Ft=Y&x,Qt=Y&m,ne=Y&S;if(rt&&(yt=$?rt(bt,ot,$,Pt):rt(bt)),yt!==void 0)return yt;if(!g(bt))return bt;var Wt=f(bt);if(Wt){if(yt=a(bt),!Ft)return s(bt,yt)}else{var $t=i(bt),De=$t==N||$t==K;if(v(bt))return u(bt,Ft);if($t==Z||$t==P||De&&!$){if(yt=Qt||De?{}:l(bt),!Ft)return Qt?r(bt,t(yt,bt)):h(bt,e(yt,bt))}else{if(!et[$t])return $?bt:{};yt=o(bt,$t,Ft)}}Pt||(Pt=new U);var Je=Pt.get(bt);if(Je)return Je;Pt.set(bt,yt),y(bt)?bt.forEach(function(ue){yt.add(st(ue,Y,rt,ue,bt,Pt))}):b(bt)&&bt.forEach(function(ue,Ne){yt.set(Ne,st(ue,Y,rt,Ne,bt,Pt))});var Qe=ne?Qt?n:c:Qt?M:_,de=Wt?void 0:Qe(bt);return E(de||bt,function(ue,Ne){de&&(Ne=ue,ue=bt[Ne]),T(yt,Ne,st(ue,Y,rt,Ne,bt,Pt))}),yt}Se.exports=st},PArb:function(Se,dt,L){"use strict";var U=L("wx14"),E=L("rePB"),T=L("q1tI"),e=L.n(T),t=L("TSYQ"),u=L.n(t),s=L("H84U"),h=function(c,n){var i={};for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&n.indexOf(a)<0&&(i[a]=c[a]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(c);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(c,a[o])&&(i[a[o]]=c[a[o]]);return i},r=function(n){return T.createElement(s.a,null,function(i){var a,o=i.getPrefixCls,l=i.direction,f=n.prefixCls,v=n.type,b=v===void 0?"horizontal":v,g=n.orientation,y=g===void 0?"center":g,_=n.className,M=n.children,x=n.dashed,m=n.plain,S=h(n,["prefixCls","type","orientation","className","children","dashed","plain"]),P=o("divider",f),A=y.length>0?"-".concat(y):y,O=!!M,R=u()(P,"".concat(P,"-").concat(b),(a={},Object(E.a)(a,"".concat(P,"-with-text"),O),Object(E.a)(a,"".concat(P,"-with-text").concat(A),O),Object(E.a)(a,"".concat(P,"-dashed"),!!x),Object(E.a)(a,"".concat(P,"-plain"),!!m),Object(E.a)(a,"".concat(P,"-rtl"),l==="rtl"),a),_);return T.createElement("div",Object(U.a)({className:R},S,{role:"separator"}),M&&T.createElement("span",{className:"".concat(P,"-inner-text")},M))})};dt.a=r},PJYZ:function(Se,dt){function L(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},PSsN:function(Se,dt){},PUg6:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U;(function(E){E.normal="normal",E.additive="additive",E.subtractive="subtractive",E.min="min",E.max="max",E.none="none"})(U||(U={}))},Q1l4:function(Se,dt){function L(U,E){var T=-1,e=U.length;for(E||(E=Array(e));++T<e;)E[T]=U[T];return E}Se.exports=L},QGbF:function(Se,dt){},"QQZ/":function(Se,dt,L){var U=L("Sq3C"),E=L("Z1HP"),T=L("Sxd8"),e=L("dt0z");function t(u,s,h){u=e(u),s=T(s);var r=s?E(u):0;return s&&r<s?U(s-r,h)+u:u}Se.exports=t},QcOe:function(Se,dt,L){var U=L("GoyQ"),E=L("6sVZ"),T=L("7Ix3"),e=Object.prototype,t=e.hasOwnProperty;function u(s){if(!U(s))return T(s);var h=E(s),r=[];for(var c in s)c=="constructor"&&(h||!t.call(s,c))||r.push(c);return r}Se.exports=u},QkVN:function(Se,dt,L){var U=L("+Qka"),E=L("LsHQ"),T=E(function(e,t,u){U(e,t,u)});Se.exports=T},"R/W3":function(Se,dt,L){var U=L("KwMD"),E=L("2ajD"),T=L("CZoQ");function e(t,u,s){return u===u?T(t,u,s):U(t,E,s)}Se.exports=e},RIqP:function(Se,dt,L){var U=L("Ijbi"),E=L("EbDI"),T=L("ZhPi"),e=L("Bnag");function t(u){return U(u)||E(u)||T(u)||e()}Se.exports=t,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"RL2/":function(Se,dt,L){"use strict";var U="2.4.2"},RMtq:function(Se,dt){},"RR/i":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.typeConstraint=dt.namedConstraint=dt.taggedConstraint=dt.traverseAncerstors=void 0;var U=L("xfSm"),E=L("GXnB"),T=function s(h,r){var c=h.parentRequest;return c!==null?r(c)?!0:s(c,r):!1};dt.traverseAncerstors=T;var e=function(h){return function(r){var c=function(i){return i!==null&&i.target!==null&&i.target.matchesTag(h)(r)};return c.metaData=new E.Metadata(h,r),c}};dt.taggedConstraint=e;var t=e(U.NAMED_TAG);dt.namedConstraint=t;var u=function(h){return function(r){var c=null;if(r!==null)if(c=r.bindings[0],typeof h=="string"){var n=c.serviceIdentifier;return n===h}else{var i=r.bindings[0].implementationType;return h===i}return!1}};dt.typeConstraint=u},Sk89:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.postConstruct=void 0;var U=L("MON2"),E=L("xfSm"),T=L("GXnB");function e(){return function(t,u,s){var h=new T.Metadata(E.POST_CONSTRUCT,u);if(Reflect.hasOwnMetadata(E.POST_CONSTRUCT,t.constructor))throw new Error(U.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(E.POST_CONSTRUCT,h,t.constructor)}}dt.postConstruct=e},SksO:function(Se,dt){function L(U,E){return Se.exports=L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se.exports.default=Se.exports,Se.exports.__esModule=!0,L(U,E)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},Sq3C:function(Se,dt,L){var U=L("sKgW"),E=L("zoYe"),T=L("wy8a"),e=L("quyA"),t=L("Z1HP"),u=L("Em2t"),s=Math.ceil;function h(r,c){c=c===void 0?" ":E(c);var n=c.length;if(n<2)return n?U(c,r):c;var i=U(c,s(r/t(c)));return e(c)?T(u(i),0,r).join(""):i.slice(0,r)}Se.exports=h},Sxd8:function(Se,dt,L){var U=L("ZCgT");function E(T){var e=U(T),t=e%1;return e===e?t?e-t:e:0}Se.exports=E},T1AV:function(Se,dt,L){var U=L("t2Dn"),E=L("5Tg0"),T=L("yP5f"),e=L("Q1l4"),t=L("+iFO"),u=L("03A+"),s=L("Z0cm"),h=L("3L66"),r=L("DSRE"),c=L("lSCD"),n=L("GoyQ"),i=L("YO3V"),a=L("c6wG"),o=L("itsj"),l=L("jeLo");function f(v,b,g,y,_,M,x){var m=o(v,g),S=o(b,g),P=x.get(S);if(P){U(v,g,P);return}var A=M?M(m,S,g+"",v,b,x):void 0,O=A===void 0;if(O){var R=s(S),H=!R&&r(S),N=!R&&!H&&a(S);A=S,R||H||N?s(m)?A=m:h(m)?A=e(m):H?(O=!1,A=E(S,!0)):N?(O=!1,A=T(S,!0)):A=[]:i(S)||u(S)?(A=m,u(m)?A=l(m):(!n(m)||c(m))&&(A=t(S))):O=!1}O&&(x.set(S,A),_(A,S,y,M,x),x.delete(S)),U(v,g,A)}Se.exports=f},TKrE:function(Se,dt,L){var U=L("qRkn"),E=L("dt0z"),T=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",u="\\u20d0-\\u20ff",s=e+t+u,h="["+s+"]",r=RegExp(h,"g");function c(n){return n=E(n),n&&n.replace(T,U).replace(r,"")}Se.exports=c},"U+yc":function(Se,dt){function L(U,E,T,e,t){var u={};return Object.keys(e).forEach(function(s){u[s]=e[s]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=T.slice().reverse().reduce(function(s,h){return h(U,E,s)||s},u),t&&u.initializer!==void 0&&(u.value=u.initializer?u.initializer.call(t):void 0,u.initializer=void 0),u.initializer===void 0&&(Object.defineProperty(U,E,u),u=null),u}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},U1ZX:function(Se,dt){},UB5X:function(Se,dt,L){var U=L("NykK"),E=L("ExA7"),T="[object Number]";function e(t){return typeof t=="number"||E(t)&&U(t)==T}Se.exports=e},Ucsi:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var U=Symbol.for("INJECTION");function E(s,h,r,c){function n(){return c&&!Reflect.hasMetadata(U,this,h)&&Reflect.defineMetadata(U,r(),this,h),Reflect.hasMetadata(U,this,h)?Reflect.getMetadata(U,this,h):r()}function i(a){Reflect.defineMetadata(U,a,this,h)}Object.defineProperty(s,h,{configurable:!0,enumerable:!0,get:n,set:i})}function T(s,h){return function(r){return function(c,n){var i=function(){return s.get(r)};E(c,n,i,h)}}}dt.makePropertyInjectDecorator=T;function e(s,h){return function(r,c){return function(n,i){var a=function(){return s.getNamed(r,c)};E(n,i,a,h)}}}dt.makePropertyInjectNamedDecorator=e;function t(s,h){return function(r,c,n){return function(i,a){var o=function(){return s.getTagged(r,c,n)};E(i,a,o,h)}}}dt.makePropertyInjectTaggedDecorator=t;function u(s,h){return function(r){return function(c,n){var i=function(){return s.getAll(r)};E(c,n,i,h)}}}dt.makePropertyMultiInjectDecorator=u},V1cb:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U;(function(E){E.Hover="hover",E.Click="click",E.Select="select",E.Active="active",E.Drag="drag"})(U||(U={}))},VIsB:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return u});var U=L("Hel2");function E(i,a){var o;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(o=T(i))||a&&i&&typeof i.length=="number"){o&&(i=o);var l=0,f=function(){};return{s:f,n:function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function(_){throw _},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,b=!1,g;return{s:function(){o=i[Symbol.iterator]()},n:function(){var _=o.next();return v=_.done,_},e:function(_){b=!0,g=_},f:function(){try{!v&&o.return!=null&&o.return()}finally{if(b)throw g}}}}function T(i,a){if(!!i){if(typeof i=="string")return e(i,a);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(i,a)}}function e(i,a){(a==null||a>i.length)&&(a=i.length);for(var o=0,l=new Array(a);o<a;o++)l[o]=i[o];return l}var t=6378e3;function u(i,a){var o=i.dataArray,l=a.size,f=l===void 0?10:l,v=f/(2*Math.PI*t)*(256<<20)/2,b=s(o,f),g=b.gridHash,y=b.gridOffset,_=n(g,y,a);return{yOffset:v,xOffset:v,radius:v,type:"grid",dataArray:_}}function s(i,a){var o=Infinity,l=-Infinity,f,v=E(i),b;try{for(v.s();!(b=v.n()).done;){var g=b.value;f=g.coordinates[1],Number.isFinite(f)&&(o=f<o?f:o,l=f>l?f:l)}}catch(N){v.e(N)}finally{v.f()}var y=(o+l)/2,_=h(a,y);if(_.xOffset<=0||_.yOffset<=0)return{gridHash:{},gridOffset:_};var M={},x=E(i),m;try{for(x.s();!(m=x.n()).done;){var S=m.value,P=S.coordinates[1],A=S.coordinates[0];if(Number.isFinite(P)&&Number.isFinite(A)){var O=Math.floor((P+90)/_.yOffset),R=Math.floor((A+180)/_.xOffset),H="".concat(O,"-").concat(R);M[H]=M[H]||{count:0,points:[]},M[H].count+=1,M[H].points.push(S)}}}catch(N){x.e(N)}finally{x.f()}return{gridHash:M,gridOffset:_}}function h(i,a){var o=r(i),l=c(a,i);return{yOffset:o,xOffset:l}}function r(i){return i/t*(180/Math.PI)}function c(i,a){return a/t*(180/Math.PI)/Math.cos(i*Math.PI/180)}function n(i,a,o){return Object.keys(i).reduce(function(l,f,v){var b=f.split("-"),g=parseInt(b[0],10),y=parseInt(b[1],10),_={};if(o.field&&o.method){var M=U.c.getColumn(i[f].points,o.field);_[o.method]=U.c.statMap[o.method](M)}return Object.assign(_,{_id:v,coordinates:Object(U.d)([-180+a.xOffset*(y+.5),-90+a.yOffset*(g+.5)]),rawData:i[f].points,count:i[f].count}),l.push(_),l},[])}},VOtZ:function(Se,dt,L){var U=L("juv8"),E=L("MvSz");function T(e,t){return U(e,E(e),t)}Se.exports=T},VmRL:function(Se,dt,L){"use strict";Se.exports=U,Se.exports.default=U;function U(V,k,Z){Z=Z||2;var X=k&&k.length,at=X?k[0]*Z:V.length,pt=E(V,0,at,Z,!0),gt=[];if(!pt||pt.next===pt.prev)return gt;var ft,Rt,Nt,Dt,St,xt,Ot;if(X&&(pt=r(V,k,pt,Z)),V.length>80*Z){ft=Nt=V[0],Rt=Dt=V[1];for(var it=Z;it<at;it+=Z)St=V[it],xt=V[it+1],St<ft&&(ft=St),xt<Rt&&(Rt=xt),St>Nt&&(Nt=St),xt>Dt&&(Dt=xt);Ot=Math.max(Nt-ft,Dt-Rt),Ot=Ot!==0?1/Ot:0}return e(pt,gt,Z,ft,Rt,Ot),gt}function E(V,k,Z,X,at){var pt,gt;if(at===K(V,k,Z,X)>0)for(pt=k;pt<Z;pt+=X)gt=R(pt,V[pt],V[pt+1],gt);else for(pt=Z-X;pt>=k;pt-=X)gt=R(pt,V[pt],V[pt+1],gt);return gt&&_(gt,gt.next)&&(H(gt),gt=gt.next),gt}function T(V,k){if(!V)return V;k||(k=V);var Z=V,X;do if(X=!1,!Z.steiner&&(_(Z,Z.next)||y(Z.prev,Z,Z.next)===0)){if(H(Z),Z=k=Z.prev,Z===Z.next)break;X=!0}else Z=Z.next;while(X||Z!==k);return k}function e(V,k,Z,X,at,pt,gt){if(!!V){!gt&&pt&&o(V,X,at,pt);for(var ft=V,Rt,Nt;V.prev!==V.next;){if(Rt=V.prev,Nt=V.next,pt?u(V,X,at,pt):t(V)){k.push(Rt.i/Z),k.push(V.i/Z),k.push(Nt.i/Z),H(V),V=Nt.next,ft=Nt.next;continue}if(V=Nt,V===ft){gt?gt===1?(V=s(T(V),k,Z),e(V,k,Z,X,at,pt,2)):gt===2&&h(V,k,Z,X,at,pt):e(T(V),k,Z,X,at,pt,1);break}}}}function t(V){var k=V.prev,Z=V,X=V.next;if(y(k,Z,X)>=0)return!1;for(var at=V.next.next;at!==V.prev;){if(b(k.x,k.y,Z.x,Z.y,X.x,X.y,at.x,at.y)&&y(at.prev,at,at.next)>=0)return!1;at=at.next}return!0}function u(V,k,Z,X){var at=V.prev,pt=V,gt=V.next;if(y(at,pt,gt)>=0)return!1;for(var ft=at.x<pt.x?at.x<gt.x?at.x:gt.x:pt.x<gt.x?pt.x:gt.x,Rt=at.y<pt.y?at.y<gt.y?at.y:gt.y:pt.y<gt.y?pt.y:gt.y,Nt=at.x>pt.x?at.x>gt.x?at.x:gt.x:pt.x>gt.x?pt.x:gt.x,Dt=at.y>pt.y?at.y>gt.y?at.y:gt.y:pt.y>gt.y?pt.y:gt.y,St=f(ft,Rt,k,Z,X),xt=f(Nt,Dt,k,Z,X),Ot=V.prevZ,it=V.nextZ;Ot&&Ot.z>=St&&it&&it.z<=xt;){if(Ot!==V.prev&&Ot!==V.next&&b(at.x,at.y,pt.x,pt.y,gt.x,gt.y,Ot.x,Ot.y)&&y(Ot.prev,Ot,Ot.next)>=0||(Ot=Ot.prevZ,it!==V.prev&&it!==V.next&&b(at.x,at.y,pt.x,pt.y,gt.x,gt.y,it.x,it.y)&&y(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;Ot&&Ot.z>=St;){if(Ot!==V.prev&&Ot!==V.next&&b(at.x,at.y,pt.x,pt.y,gt.x,gt.y,Ot.x,Ot.y)&&y(Ot.prev,Ot,Ot.next)>=0)return!1;Ot=Ot.prevZ}for(;it&&it.z<=xt;){if(it!==V.prev&&it!==V.next&&b(at.x,at.y,pt.x,pt.y,gt.x,gt.y,it.x,it.y)&&y(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function s(V,k,Z){var X=V;do{var at=X.prev,pt=X.next.next;!_(at,pt)&&M(at,X,X.next,pt)&&P(at,pt)&&P(pt,at)&&(k.push(at.i/Z),k.push(X.i/Z),k.push(pt.i/Z),H(X),H(X.next),X=V=pt),X=X.next}while(X!==V);return T(X)}function h(V,k,Z,X,at,pt){var gt=V;do{for(var ft=gt.next.next;ft!==gt.prev;){if(gt.i!==ft.i&&g(gt,ft)){var Rt=O(gt,ft);gt=T(gt,gt.next),Rt=T(Rt,Rt.next),e(gt,k,Z,X,at,pt),e(Rt,k,Z,X,at,pt);return}ft=ft.next}gt=gt.next}while(gt!==V)}function r(V,k,Z,X){var at=[],pt,gt,ft,Rt,Nt;for(pt=0,gt=k.length;pt<gt;pt++)ft=k[pt]*X,Rt=pt<gt-1?k[pt+1]*X:V.length,Nt=E(V,ft,Rt,X,!1),Nt===Nt.next&&(Nt.steiner=!0),at.push(v(Nt));for(at.sort(c),pt=0;pt<at.length;pt++)Z=n(at[pt],Z),Z=T(Z,Z.next);return Z}function c(V,k){return V.x-k.x}function n(V,k){var Z=i(V,k);if(!Z)return k;var X=O(Z,V),at=T(Z,Z.next);return T(X,X.next),k===Z?at:k}function i(V,k){var Z=k,X=V.x,at=V.y,pt=-Infinity,gt;do{if(at<=Z.y&&at>=Z.next.y&&Z.next.y!==Z.y){var ft=Z.x+(at-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if(ft<=X&&ft>pt){if(pt=ft,ft===X){if(at===Z.y)return Z;if(at===Z.next.y)return Z.next}gt=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==k);if(!gt)return null;if(X===pt)return gt;var Rt=gt,Nt=gt.x,Dt=gt.y,St=Infinity,xt;Z=gt;do X>=Z.x&&Z.x>=Nt&&X!==Z.x&&b(at<Dt?X:pt,at,Nt,Dt,at<Dt?pt:X,at,Z.x,Z.y)&&(xt=Math.abs(at-Z.y)/(X-Z.x),P(Z,V)&&(xt<St||xt===St&&(Z.x>gt.x||Z.x===gt.x&&a(gt,Z)))&&(gt=Z,St=xt)),Z=Z.next;while(Z!==Rt);return gt}function a(V,k){return y(V.prev,V,k.prev)<0&&y(k.next,V,V.next)<0}function o(V,k,Z,X){var at=V;do at.z===null&&(at.z=f(at.x,at.y,k,Z,X)),at.prevZ=at.prev,at.nextZ=at.next,at=at.next;while(at!==V);at.prevZ.nextZ=null,at.prevZ=null,l(at)}function l(V){var k,Z,X,at,pt,gt,ft,Rt,Nt=1;do{for(Z=V,V=null,pt=null,gt=0;Z;){for(gt++,X=Z,ft=0,k=0;k<Nt&&(ft++,X=X.nextZ,!!X);k++);for(Rt=Nt;ft>0||Rt>0&&X;)ft!==0&&(Rt===0||!X||Z.z<=X.z)?(at=Z,Z=Z.nextZ,ft--):(at=X,X=X.nextZ,Rt--),pt?pt.nextZ=at:V=at,at.prevZ=pt,pt=at;Z=X}pt.nextZ=null,Nt*=2}while(gt>1);return V}function f(V,k,Z,X,at){return V=32767*(V-Z)*at,k=32767*(k-X)*at,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,V|k<<1}function v(V){var k=V,Z=V;do(k.x<Z.x||k.x===Z.x&&k.y<Z.y)&&(Z=k),k=k.next;while(k!==V);return Z}function b(V,k,Z,X,at,pt,gt,ft){return(at-gt)*(k-ft)-(V-gt)*(pt-ft)>=0&&(V-gt)*(X-ft)-(Z-gt)*(k-ft)>=0&&(Z-gt)*(pt-ft)-(at-gt)*(X-ft)>=0}function g(V,k){return V.next.i!==k.i&&V.prev.i!==k.i&&!S(V,k)&&(P(V,k)&&P(k,V)&&A(V,k)&&(y(V.prev,V,k.prev)||y(V,k.prev,k))||_(V,k)&&y(V.prev,V,V.next)>0&&y(k.prev,k,k.next)>0)}function y(V,k,Z){return(k.y-V.y)*(Z.x-k.x)-(k.x-V.x)*(Z.y-k.y)}function _(V,k){return V.x===k.x&&V.y===k.y}function M(V,k,Z,X){var at=m(y(V,k,Z)),pt=m(y(V,k,X)),gt=m(y(Z,X,V)),ft=m(y(Z,X,k));return!!(at!==pt&&gt!==ft||at===0&&x(V,Z,k)||pt===0&&x(V,X,k)||gt===0&&x(Z,V,X)||ft===0&&x(Z,k,X))}function x(V,k,Z){return k.x<=Math.max(V.x,Z.x)&&k.x>=Math.min(V.x,Z.x)&&k.y<=Math.max(V.y,Z.y)&&k.y>=Math.min(V.y,Z.y)}function m(V){return V>0?1:V<0?-1:0}function S(V,k){var Z=V;do{if(Z.i!==V.i&&Z.next.i!==V.i&&Z.i!==k.i&&Z.next.i!==k.i&&M(Z,Z.next,V,k))return!0;Z=Z.next}while(Z!==V);return!1}function P(V,k){return y(V.prev,V,V.next)<0?y(V,k,V.next)>=0&&y(V,V.prev,k)>=0:y(V,k,V.prev)<0||y(V,V.next,k)<0}function A(V,k){var Z=V,X=!1,at=(V.x+k.x)/2,pt=(V.y+k.y)/2;do Z.y>pt!=Z.next.y>pt&&Z.next.y!==Z.y&&at<(Z.next.x-Z.x)*(pt-Z.y)/(Z.next.y-Z.y)+Z.x&&(X=!X),Z=Z.next;while(Z!==V);return X}function O(V,k){var Z=new N(V.i,V.x,V.y),X=new N(k.i,k.x,k.y),at=V.next,pt=k.prev;return V.next=k,k.prev=V,Z.next=at,at.prev=Z,X.next=Z,Z.prev=X,pt.next=X,X.prev=pt,X}function R(V,k,Z,X){var at=new N(V,k,Z);return X?(at.next=X.next,at.prev=X,X.next.prev=at,X.next=at):(at.prev=at,at.next=at),at}function H(V){V.next.prev=V.prev,V.prev.next=V.next,V.prevZ&&(V.prevZ.nextZ=V.nextZ),V.nextZ&&(V.nextZ.prevZ=V.prevZ)}function N(V,k,Z){this.i=V,this.x=k,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}U.deviation=function(V,k,Z,X){var at=k&&k.length,pt=at?k[0]*Z:V.length,gt=Math.abs(K(V,0,pt,Z));if(at)for(var ft=0,Rt=k.length;ft<Rt;ft++){var Nt=k[ft]*Z,Dt=ft<Rt-1?k[ft+1]*Z:V.length;gt-=Math.abs(K(V,Nt,Dt,Z))}var St=0;for(ft=0;ft<X.length;ft+=3){var xt=X[ft]*Z,Ot=X[ft+1]*Z,it=X[ft+2]*Z;St+=Math.abs((V[xt]-V[it])*(V[Ot+1]-V[xt+1])-(V[xt]-V[Ot])*(V[it+1]-V[xt+1]))}return gt===0&&St===0?0:Math.abs((St-gt)/gt)};function K(V,k,Z,X){for(var at=0,pt=k,gt=Z-X;pt<Z;pt+=X)at+=(V[gt]-V[pt])*(V[pt+1]+V[gt+1]),gt=pt;return at}U.flatten=function(V){for(var k=V[0][0].length,Z={vertices:[],holes:[],dimensions:k},X=0,at=0;at<V.length;at++){for(var pt=0;pt<V[at].length;pt++)for(var gt=0;gt<k;gt++)Z.vertices.push(V[at][pt][gt]);at>0&&(X+=V[at-1].length,Z.holes.push(X))}return Z}},W8MJ:function(Se,dt){function L(E,T){for(var e=0;e<T.length;e++){var t=T[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(E,t.key,t)}}function U(E,T,e){return T&&L(E.prototype,T),e&&L(E,e),E}Se.exports=U,Se.exports.default=Se.exports,Se.exports.__esModule=!0},WFAs:function(Se,dt){var L=Array.isArray;Se.exports=L},WwFo:function(Se,dt,L){var U=L("juv8"),E=L("7GkX");function T(e,t){return e&&U(t,E(t),e)}Se.exports=T},XYm9:function(Se,dt,L){var U=L("+K+b");function E(T,e){var t=e?U(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.byteLength)}Se.exports=E},"Xt/L":function(Se,dt){function L(U,E,T){for(var e=-1,t=U==null?0:U.length;++e<t;)if(T(E,U[e]))return!0;return!1}Se.exports=L},Y8BV:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});function U(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.filter(e)),E}},YO3V:function(Se,dt,L){var U=L("NykK"),E=L("LcsW"),T=L("ExA7"),e="[object Object]",t=Function.prototype,u=Object.prototype,s=t.toString,h=u.hasOwnProperty,r=s.call(Object);function c(n){if(!T(n)||U(n)!=e)return!1;var i=E(n);if(i===null)return!0;var a=h.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&s.call(a)==r}Se.exports=c},Yk9n:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.inject=dt.LazyServiceIdentifer=void 0;var U=L("MON2"),E=L("xfSm"),T=L("GXnB"),e=L("Ztfv"),t=function(){function s(h){this._cb=h}return s.prototype.unwrap=function(){return this._cb()},s}();dt.LazyServiceIdentifer=t;function u(s){return function(h,r,c){if(s===void 0)throw new Error(U.UNDEFINED_INJECT_ANNOTATION(h.name));var n=new T.Metadata(E.INJECT_TAG,s);typeof c=="number"?e.tagParameter(h,r,c,n):e.tagProperty(h,r,n)}}dt.inject=u},Z1HP:function(Se,dt,L){var U=L("ycre"),E=L("quyA"),T=L("q4HE");function e(t){return E(t)?T(t):U(t)}Se.exports=e},ZCgT:function(Se,dt,L){var U=L("tLB3"),E=1/0,T=17976931348623157e292;function e(t){if(!t)return t===0?t:0;if(t=U(t),t===E||t===-E){var u=t<0?-1:1;return u*T}return t===t?t:0}Se.exports=e},ZK94:function(Se,dt){Se.exports.RADIUS=6378137,Se.exports.FLATTENING=1/298.257223563,Se.exports.POLAR_RADIUS=63567523142e-4},ZaHm:function(Se,dt,L){"use strict";L.r(dt),L.d(dt,"create",function(){return E}),L.d(dt,"clone",function(){return T}),L.d(dt,"copy",function(){return e}),L.d(dt,"fromValues",function(){return t}),L.d(dt,"set",function(){return u}),L.d(dt,"identity",function(){return s}),L.d(dt,"transpose",function(){return h}),L.d(dt,"invert",function(){return r}),L.d(dt,"adjoint",function(){return c}),L.d(dt,"determinant",function(){return n}),L.d(dt,"multiply",function(){return i}),L.d(dt,"translate",function(){return a}),L.d(dt,"scale",function(){return o}),L.d(dt,"rotate",function(){return l}),L.d(dt,"rotateX",function(){return f}),L.d(dt,"rotateY",function(){return v}),L.d(dt,"rotateZ",function(){return b}),L.d(dt,"fromTranslation",function(){return g}),L.d(dt,"fromScaling",function(){return y}),L.d(dt,"fromRotation",function(){return _}),L.d(dt,"fromXRotation",function(){return M}),L.d(dt,"fromYRotation",function(){return x}),L.d(dt,"fromZRotation",function(){return m}),L.d(dt,"fromRotationTranslation",function(){return S}),L.d(dt,"fromQuat2",function(){return P}),L.d(dt,"getTranslation",function(){return A}),L.d(dt,"getScaling",function(){return O}),L.d(dt,"getRotation",function(){return R}),L.d(dt,"fromRotationTranslationScale",function(){return H}),L.d(dt,"fromRotationTranslationScaleOrigin",function(){return N}),L.d(dt,"fromQuat",function(){return K}),L.d(dt,"frustum",function(){return V}),L.d(dt,"perspective",function(){return k}),L.d(dt,"perspectiveFromFieldOfView",function(){return Z}),L.d(dt,"ortho",function(){return X}),L.d(dt,"lookAt",function(){return at}),L.d(dt,"targetTo",function(){return pt}),L.d(dt,"str",function(){return gt}),L.d(dt,"frob",function(){return ft}),L.d(dt,"add",function(){return Rt}),L.d(dt,"subtract",function(){return Nt}),L.d(dt,"multiplyScalar",function(){return Dt}),L.d(dt,"multiplyScalarAndAdd",function(){return St}),L.d(dt,"exactEquals",function(){return xt}),L.d(dt,"equals",function(){return Ot}),L.d(dt,"mul",function(){return it}),L.d(dt,"sub",function(){return At});var U=L("yU0y");function E(){var z=new U.a(16);return U.a!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}function T(z){var q=new U.a(16);return q[0]=z[0],q[1]=z[1],q[2]=z[2],q[3]=z[3],q[4]=z[4],q[5]=z[5],q[6]=z[6],q[7]=z[7],q[8]=z[8],q[9]=z[9],q[10]=z[10],q[11]=z[11],q[12]=z[12],q[13]=z[13],q[14]=z[14],q[15]=z[15],q}function e(z,q){return z[0]=q[0],z[1]=q[1],z[2]=q[2],z[3]=q[3],z[4]=q[4],z[5]=q[5],z[6]=q[6],z[7]=q[7],z[8]=q[8],z[9]=q[9],z[10]=q[10],z[11]=q[11],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15],z}function t(z,q,mt,et,st,bt,Y,rt,ot,$,Pt,yt,Ft,Qt,ne,Wt){var $t=new U.a(16);return $t[0]=z,$t[1]=q,$t[2]=mt,$t[3]=et,$t[4]=st,$t[5]=bt,$t[6]=Y,$t[7]=rt,$t[8]=ot,$t[9]=$,$t[10]=Pt,$t[11]=yt,$t[12]=Ft,$t[13]=Qt,$t[14]=ne,$t[15]=Wt,$t}function u(z,q,mt,et,st,bt,Y,rt,ot,$,Pt,yt,Ft,Qt,ne,Wt,$t){return z[0]=q,z[1]=mt,z[2]=et,z[3]=st,z[4]=bt,z[5]=Y,z[6]=rt,z[7]=ot,z[8]=$,z[9]=Pt,z[10]=yt,z[11]=Ft,z[12]=Qt,z[13]=ne,z[14]=Wt,z[15]=$t,z}function s(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function h(z,q){if(z===q){var mt=q[1],et=q[2],st=q[3],bt=q[6],Y=q[7],rt=q[11];z[1]=q[4],z[2]=q[8],z[3]=q[12],z[4]=mt,z[6]=q[9],z[7]=q[13],z[8]=et,z[9]=bt,z[11]=q[14],z[12]=st,z[13]=Y,z[14]=rt}else z[0]=q[0],z[1]=q[4],z[2]=q[8],z[3]=q[12],z[4]=q[1],z[5]=q[5],z[6]=q[9],z[7]=q[13],z[8]=q[2],z[9]=q[6],z[10]=q[10],z[11]=q[14],z[12]=q[3],z[13]=q[7],z[14]=q[11],z[15]=q[15];return z}function r(z,q){var mt=q[0],et=q[1],st=q[2],bt=q[3],Y=q[4],rt=q[5],ot=q[6],$=q[7],Pt=q[8],yt=q[9],Ft=q[10],Qt=q[11],ne=q[12],Wt=q[13],$t=q[14],De=q[15],Je=mt*rt-et*Y,Qe=mt*ot-st*Y,de=mt*$-bt*Y,ue=et*ot-st*rt,Ne=et*$-bt*rt,cn=st*$-bt*ot,Fn=Pt*Wt-yt*ne,wn=Pt*$t-Ft*ne,en=Pt*De-Qt*ne,tn=yt*$t-Ft*Wt,xn=yt*De-Qt*Wt,Bn=Ft*De-Qt*$t,vr=Je*Bn-Qe*xn+de*tn+ue*en-Ne*wn+cn*Fn;return vr?(vr=1/vr,z[0]=(rt*Bn-ot*xn+$*tn)*vr,z[1]=(st*xn-et*Bn-bt*tn)*vr,z[2]=(Wt*cn-$t*Ne+De*ue)*vr,z[3]=(Ft*Ne-yt*cn-Qt*ue)*vr,z[4]=(ot*en-Y*Bn-$*wn)*vr,z[5]=(mt*Bn-st*en+bt*wn)*vr,z[6]=($t*de-ne*cn-De*Qe)*vr,z[7]=(Pt*cn-Ft*de+Qt*Qe)*vr,z[8]=(Y*xn-rt*en+$*Fn)*vr,z[9]=(et*en-mt*xn-bt*Fn)*vr,z[10]=(ne*Ne-Wt*de+De*Je)*vr,z[11]=(yt*de-Pt*Ne-Qt*Je)*vr,z[12]=(rt*wn-Y*tn-ot*Fn)*vr,z[13]=(mt*tn-et*wn+st*Fn)*vr,z[14]=(Wt*Qe-ne*ue-$t*Je)*vr,z[15]=(Pt*ue-yt*Qe+Ft*Je)*vr,z):null}function c(z,q){var mt=q[0],et=q[1],st=q[2],bt=q[3],Y=q[4],rt=q[5],ot=q[6],$=q[7],Pt=q[8],yt=q[9],Ft=q[10],Qt=q[11],ne=q[12],Wt=q[13],$t=q[14],De=q[15];return z[0]=rt*(Ft*De-Qt*$t)-yt*(ot*De-$*$t)+Wt*(ot*Qt-$*Ft),z[1]=-(et*(Ft*De-Qt*$t)-yt*(st*De-bt*$t)+Wt*(st*Qt-bt*Ft)),z[2]=et*(ot*De-$*$t)-rt*(st*De-bt*$t)+Wt*(st*$-bt*ot),z[3]=-(et*(ot*Qt-$*Ft)-rt*(st*Qt-bt*Ft)+yt*(st*$-bt*ot)),z[4]=-(Y*(Ft*De-Qt*$t)-Pt*(ot*De-$*$t)+ne*(ot*Qt-$*Ft)),z[5]=mt*(Ft*De-Qt*$t)-Pt*(st*De-bt*$t)+ne*(st*Qt-bt*Ft),z[6]=-(mt*(ot*De-$*$t)-Y*(st*De-bt*$t)+ne*(st*$-bt*ot)),z[7]=mt*(ot*Qt-$*Ft)-Y*(st*Qt-bt*Ft)+Pt*(st*$-bt*ot),z[8]=Y*(yt*De-Qt*Wt)-Pt*(rt*De-$*Wt)+ne*(rt*Qt-$*yt),z[9]=-(mt*(yt*De-Qt*Wt)-Pt*(et*De-bt*Wt)+ne*(et*Qt-bt*yt)),z[10]=mt*(rt*De-$*Wt)-Y*(et*De-bt*Wt)+ne*(et*$-bt*rt),z[11]=-(mt*(rt*Qt-$*yt)-Y*(et*Qt-bt*yt)+Pt*(et*$-bt*rt)),z[12]=-(Y*(yt*$t-Ft*Wt)-Pt*(rt*$t-ot*Wt)+ne*(rt*Ft-ot*yt)),z[13]=mt*(yt*$t-Ft*Wt)-Pt*(et*$t-st*Wt)+ne*(et*Ft-st*yt),z[14]=-(mt*(rt*$t-ot*Wt)-Y*(et*$t-st*Wt)+ne*(et*ot-st*rt)),z[15]=mt*(rt*Ft-ot*yt)-Y*(et*Ft-st*yt)+Pt*(et*ot-st*rt),z}function n(z){var q=z[0],mt=z[1],et=z[2],st=z[3],bt=z[4],Y=z[5],rt=z[6],ot=z[7],$=z[8],Pt=z[9],yt=z[10],Ft=z[11],Qt=z[12],ne=z[13],Wt=z[14],$t=z[15],De=q*Y-mt*bt,Je=q*rt-et*bt,Qe=q*ot-st*bt,de=mt*rt-et*Y,ue=mt*ot-st*Y,Ne=et*ot-st*rt,cn=$*ne-Pt*Qt,Fn=$*Wt-yt*Qt,wn=$*$t-Ft*Qt,en=Pt*Wt-yt*ne,tn=Pt*$t-Ft*ne,xn=yt*$t-Ft*Wt;return De*xn-Je*tn+Qe*en+de*wn-ue*Fn+Ne*cn}function i(z,q,mt){var et=q[0],st=q[1],bt=q[2],Y=q[3],rt=q[4],ot=q[5],$=q[6],Pt=q[7],yt=q[8],Ft=q[9],Qt=q[10],ne=q[11],Wt=q[12],$t=q[13],De=q[14],Je=q[15],Qe=mt[0],de=mt[1],ue=mt[2],Ne=mt[3];return z[0]=Qe*et+de*rt+ue*yt+Ne*Wt,z[1]=Qe*st+de*ot+ue*Ft+Ne*$t,z[2]=Qe*bt+de*$+ue*Qt+Ne*De,z[3]=Qe*Y+de*Pt+ue*ne+Ne*Je,Qe=mt[4],de=mt[5],ue=mt[6],Ne=mt[7],z[4]=Qe*et+de*rt+ue*yt+Ne*Wt,z[5]=Qe*st+de*ot+ue*Ft+Ne*$t,z[6]=Qe*bt+de*$+ue*Qt+Ne*De,z[7]=Qe*Y+de*Pt+ue*ne+Ne*Je,Qe=mt[8],de=mt[9],ue=mt[10],Ne=mt[11],z[8]=Qe*et+de*rt+ue*yt+Ne*Wt,z[9]=Qe*st+de*ot+ue*Ft+Ne*$t,z[10]=Qe*bt+de*$+ue*Qt+Ne*De,z[11]=Qe*Y+de*Pt+ue*ne+Ne*Je,Qe=mt[12],de=mt[13],ue=mt[14],Ne=mt[15],z[12]=Qe*et+de*rt+ue*yt+Ne*Wt,z[13]=Qe*st+de*ot+ue*Ft+Ne*$t,z[14]=Qe*bt+de*$+ue*Qt+Ne*De,z[15]=Qe*Y+de*Pt+ue*ne+Ne*Je,z}function a(z,q,mt){var et=mt[0],st=mt[1],bt=mt[2],Y,rt,ot,$,Pt,yt,Ft,Qt,ne,Wt,$t,De;return q===z?(z[12]=q[0]*et+q[4]*st+q[8]*bt+q[12],z[13]=q[1]*et+q[5]*st+q[9]*bt+q[13],z[14]=q[2]*et+q[6]*st+q[10]*bt+q[14],z[15]=q[3]*et+q[7]*st+q[11]*bt+q[15]):(Y=q[0],rt=q[1],ot=q[2],$=q[3],Pt=q[4],yt=q[5],Ft=q[6],Qt=q[7],ne=q[8],Wt=q[9],$t=q[10],De=q[11],z[0]=Y,z[1]=rt,z[2]=ot,z[3]=$,z[4]=Pt,z[5]=yt,z[6]=Ft,z[7]=Qt,z[8]=ne,z[9]=Wt,z[10]=$t,z[11]=De,z[12]=Y*et+Pt*st+ne*bt+q[12],z[13]=rt*et+yt*st+Wt*bt+q[13],z[14]=ot*et+Ft*st+$t*bt+q[14],z[15]=$*et+Qt*st+De*bt+q[15]),z}function o(z,q,mt){var et=mt[0],st=mt[1],bt=mt[2];return z[0]=q[0]*et,z[1]=q[1]*et,z[2]=q[2]*et,z[3]=q[3]*et,z[4]=q[4]*st,z[5]=q[5]*st,z[6]=q[6]*st,z[7]=q[7]*st,z[8]=q[8]*bt,z[9]=q[9]*bt,z[10]=q[10]*bt,z[11]=q[11]*bt,z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15],z}function l(z,q,mt,et){var st=et[0],bt=et[1],Y=et[2],rt=Math.hypot(st,bt,Y),ot,$,Pt,yt,Ft,Qt,ne,Wt,$t,De,Je,Qe,de,ue,Ne,cn,Fn,wn,en,tn,xn,Bn,vr,li;return rt<U.b?null:(rt=1/rt,st*=rt,bt*=rt,Y*=rt,ot=Math.sin(mt),$=Math.cos(mt),Pt=1-$,yt=q[0],Ft=q[1],Qt=q[2],ne=q[3],Wt=q[4],$t=q[5],De=q[6],Je=q[7],Qe=q[8],de=q[9],ue=q[10],Ne=q[11],cn=st*st*Pt+$,Fn=bt*st*Pt+Y*ot,wn=Y*st*Pt-bt*ot,en=st*bt*Pt-Y*ot,tn=bt*bt*Pt+$,xn=Y*bt*Pt+st*ot,Bn=st*Y*Pt+bt*ot,vr=bt*Y*Pt-st*ot,li=Y*Y*Pt+$,z[0]=yt*cn+Wt*Fn+Qe*wn,z[1]=Ft*cn+$t*Fn+de*wn,z[2]=Qt*cn+De*Fn+ue*wn,z[3]=ne*cn+Je*Fn+Ne*wn,z[4]=yt*en+Wt*tn+Qe*xn,z[5]=Ft*en+$t*tn+de*xn,z[6]=Qt*en+De*tn+ue*xn,z[7]=ne*en+Je*tn+Ne*xn,z[8]=yt*Bn+Wt*vr+Qe*li,z[9]=Ft*Bn+$t*vr+de*li,z[10]=Qt*Bn+De*vr+ue*li,z[11]=ne*Bn+Je*vr+Ne*li,q!==z&&(z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z)}function f(z,q,mt){var et=Math.sin(mt),st=Math.cos(mt),bt=q[4],Y=q[5],rt=q[6],ot=q[7],$=q[8],Pt=q[9],yt=q[10],Ft=q[11];return q!==z&&(z[0]=q[0],z[1]=q[1],z[2]=q[2],z[3]=q[3],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z[4]=bt*st+$*et,z[5]=Y*st+Pt*et,z[6]=rt*st+yt*et,z[7]=ot*st+Ft*et,z[8]=$*st-bt*et,z[9]=Pt*st-Y*et,z[10]=yt*st-rt*et,z[11]=Ft*st-ot*et,z}function v(z,q,mt){var et=Math.sin(mt),st=Math.cos(mt),bt=q[0],Y=q[1],rt=q[2],ot=q[3],$=q[8],Pt=q[9],yt=q[10],Ft=q[11];return q!==z&&(z[4]=q[4],z[5]=q[5],z[6]=q[6],z[7]=q[7],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z[0]=bt*st-$*et,z[1]=Y*st-Pt*et,z[2]=rt*st-yt*et,z[3]=ot*st-Ft*et,z[8]=bt*et+$*st,z[9]=Y*et+Pt*st,z[10]=rt*et+yt*st,z[11]=ot*et+Ft*st,z}function b(z,q,mt){var et=Math.sin(mt),st=Math.cos(mt),bt=q[0],Y=q[1],rt=q[2],ot=q[3],$=q[4],Pt=q[5],yt=q[6],Ft=q[7];return q!==z&&(z[8]=q[8],z[9]=q[9],z[10]=q[10],z[11]=q[11],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z[0]=bt*st+$*et,z[1]=Y*st+Pt*et,z[2]=rt*st+yt*et,z[3]=ot*st+Ft*et,z[4]=$*st-bt*et,z[5]=Pt*st-Y*et,z[6]=yt*st-rt*et,z[7]=Ft*st-ot*et,z}function g(z,q){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=q[0],z[13]=q[1],z[14]=q[2],z[15]=1,z}function y(z,q){return z[0]=q[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=q[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=q[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function _(z,q,mt){var et=mt[0],st=mt[1],bt=mt[2],Y=Math.hypot(et,st,bt),rt,ot,$;return Y<U.b?null:(Y=1/Y,et*=Y,st*=Y,bt*=Y,rt=Math.sin(q),ot=Math.cos(q),$=1-ot,z[0]=et*et*$+ot,z[1]=st*et*$+bt*rt,z[2]=bt*et*$-st*rt,z[3]=0,z[4]=et*st*$-bt*rt,z[5]=st*st*$+ot,z[6]=bt*st*$+et*rt,z[7]=0,z[8]=et*bt*$+st*rt,z[9]=st*bt*$-et*rt,z[10]=bt*bt*$+ot,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}function M(z,q){var mt=Math.sin(q),et=Math.cos(q);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=et,z[6]=mt,z[7]=0,z[8]=0,z[9]=-mt,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function x(z,q){var mt=Math.sin(q),et=Math.cos(q);return z[0]=et,z[1]=0,z[2]=-mt,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=mt,z[9]=0,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function m(z,q){var mt=Math.sin(q),et=Math.cos(q);return z[0]=et,z[1]=mt,z[2]=0,z[3]=0,z[4]=-mt,z[5]=et,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function S(z,q,mt){var et=q[0],st=q[1],bt=q[2],Y=q[3],rt=et+et,ot=st+st,$=bt+bt,Pt=et*rt,yt=et*ot,Ft=et*$,Qt=st*ot,ne=st*$,Wt=bt*$,$t=Y*rt,De=Y*ot,Je=Y*$;return z[0]=1-(Qt+Wt),z[1]=yt+Je,z[2]=Ft-De,z[3]=0,z[4]=yt-Je,z[5]=1-(Pt+Wt),z[6]=ne+$t,z[7]=0,z[8]=Ft+De,z[9]=ne-$t,z[10]=1-(Pt+Qt),z[11]=0,z[12]=mt[0],z[13]=mt[1],z[14]=mt[2],z[15]=1,z}function P(z,q){var mt=new U.a(3),et=-q[0],st=-q[1],bt=-q[2],Y=q[3],rt=q[4],ot=q[5],$=q[6],Pt=q[7],yt=et*et+st*st+bt*bt+Y*Y;return yt>0?(mt[0]=(rt*Y+Pt*et+ot*bt-$*st)*2/yt,mt[1]=(ot*Y+Pt*st+$*et-rt*bt)*2/yt,mt[2]=($*Y+Pt*bt+rt*st-ot*et)*2/yt):(mt[0]=(rt*Y+Pt*et+ot*bt-$*st)*2,mt[1]=(ot*Y+Pt*st+$*et-rt*bt)*2,mt[2]=($*Y+Pt*bt+rt*st-ot*et)*2),S(z,q,mt),z}function A(z,q){return z[0]=q[12],z[1]=q[13],z[2]=q[14],z}function O(z,q){var mt=q[0],et=q[1],st=q[2],bt=q[4],Y=q[5],rt=q[6],ot=q[8],$=q[9],Pt=q[10];return z[0]=Math.hypot(mt,et,st),z[1]=Math.hypot(bt,Y,rt),z[2]=Math.hypot(ot,$,Pt),z}function R(z,q){var mt=new U.a(3);O(mt,q);var et=1/mt[0],st=1/mt[1],bt=1/mt[2],Y=q[0]*et,rt=q[1]*st,ot=q[2]*bt,$=q[4]*et,Pt=q[5]*st,yt=q[6]*bt,Ft=q[8]*et,Qt=q[9]*st,ne=q[10]*bt,Wt=Y+Pt+ne,$t=0;return Wt>0?($t=Math.sqrt(Wt+1)*2,z[3]=.25*$t,z[0]=(yt-Qt)/$t,z[1]=(Ft-ot)/$t,z[2]=(rt-$)/$t):Y>Pt&&Y>ne?($t=Math.sqrt(1+Y-Pt-ne)*2,z[3]=(yt-Qt)/$t,z[0]=.25*$t,z[1]=(rt+$)/$t,z[2]=(Ft+ot)/$t):Pt>ne?($t=Math.sqrt(1+Pt-Y-ne)*2,z[3]=(Ft-ot)/$t,z[0]=(rt+$)/$t,z[1]=.25*$t,z[2]=(yt+Qt)/$t):($t=Math.sqrt(1+ne-Y-Pt)*2,z[3]=(rt-$)/$t,z[0]=(Ft+ot)/$t,z[1]=(yt+Qt)/$t,z[2]=.25*$t),z}function H(z,q,mt,et){var st=q[0],bt=q[1],Y=q[2],rt=q[3],ot=st+st,$=bt+bt,Pt=Y+Y,yt=st*ot,Ft=st*$,Qt=st*Pt,ne=bt*$,Wt=bt*Pt,$t=Y*Pt,De=rt*ot,Je=rt*$,Qe=rt*Pt,de=et[0],ue=et[1],Ne=et[2];return z[0]=(1-(ne+$t))*de,z[1]=(Ft+Qe)*de,z[2]=(Qt-Je)*de,z[3]=0,z[4]=(Ft-Qe)*ue,z[5]=(1-(yt+$t))*ue,z[6]=(Wt+De)*ue,z[7]=0,z[8]=(Qt+Je)*Ne,z[9]=(Wt-De)*Ne,z[10]=(1-(yt+ne))*Ne,z[11]=0,z[12]=mt[0],z[13]=mt[1],z[14]=mt[2],z[15]=1,z}function N(z,q,mt,et,st){var bt=q[0],Y=q[1],rt=q[2],ot=q[3],$=bt+bt,Pt=Y+Y,yt=rt+rt,Ft=bt*$,Qt=bt*Pt,ne=bt*yt,Wt=Y*Pt,$t=Y*yt,De=rt*yt,Je=ot*$,Qe=ot*Pt,de=ot*yt,ue=et[0],Ne=et[1],cn=et[2],Fn=st[0],wn=st[1],en=st[2],tn=(1-(Wt+De))*ue,xn=(Qt+de)*ue,Bn=(ne-Qe)*ue,vr=(Qt-de)*Ne,li=(1-(Ft+De))*Ne,Me=($t+Je)*Ne,Pe=(ne+Qe)*cn,te=($t-Je)*cn,ge=(1-(Ft+Wt))*cn;return z[0]=tn,z[1]=xn,z[2]=Bn,z[3]=0,z[4]=vr,z[5]=li,z[6]=Me,z[7]=0,z[8]=Pe,z[9]=te,z[10]=ge,z[11]=0,z[12]=mt[0]+Fn-(tn*Fn+vr*wn+Pe*en),z[13]=mt[1]+wn-(xn*Fn+li*wn+te*en),z[14]=mt[2]+en-(Bn*Fn+Me*wn+ge*en),z[15]=1,z}function K(z,q){var mt=q[0],et=q[1],st=q[2],bt=q[3],Y=mt+mt,rt=et+et,ot=st+st,$=mt*Y,Pt=et*Y,yt=et*rt,Ft=st*Y,Qt=st*rt,ne=st*ot,Wt=bt*Y,$t=bt*rt,De=bt*ot;return z[0]=1-yt-ne,z[1]=Pt+De,z[2]=Ft-$t,z[3]=0,z[4]=Pt-De,z[5]=1-$-ne,z[6]=Qt+Wt,z[7]=0,z[8]=Ft+$t,z[9]=Qt-Wt,z[10]=1-$-yt,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function V(z,q,mt,et,st,bt,Y){var rt=1/(mt-q),ot=1/(st-et),$=1/(bt-Y);return z[0]=bt*2*rt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=bt*2*ot,z[6]=0,z[7]=0,z[8]=(mt+q)*rt,z[9]=(st+et)*ot,z[10]=(Y+bt)*$,z[11]=-1,z[12]=0,z[13]=0,z[14]=Y*bt*2*$,z[15]=0,z}function k(z,q,mt,et,st){var bt=1/Math.tan(q/2),Y;return z[0]=bt/mt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=bt,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,st!=null&&st!==Infinity?(Y=1/(et-st),z[10]=(st+et)*Y,z[14]=2*st*et*Y):(z[10]=-1,z[14]=-2*et),z}function Z(z,q,mt,et){var st=Math.tan(q.upDegrees*Math.PI/180),bt=Math.tan(q.downDegrees*Math.PI/180),Y=Math.tan(q.leftDegrees*Math.PI/180),rt=Math.tan(q.rightDegrees*Math.PI/180),ot=2/(Y+rt),$=2/(st+bt);return z[0]=ot,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=$,z[6]=0,z[7]=0,z[8]=-((Y-rt)*ot*.5),z[9]=(st-bt)*$*.5,z[10]=et/(mt-et),z[11]=-1,z[12]=0,z[13]=0,z[14]=et*mt/(mt-et),z[15]=0,z}function X(z,q,mt,et,st,bt,Y){var rt=1/(q-mt),ot=1/(et-st),$=1/(bt-Y);return z[0]=-2*rt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*ot,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*$,z[11]=0,z[12]=(q+mt)*rt,z[13]=(st+et)*ot,z[14]=(Y+bt)*$,z[15]=1,z}function at(z,q,mt,et){var st,bt,Y,rt,ot,$,Pt,yt,Ft,Qt,ne=q[0],Wt=q[1],$t=q[2],De=et[0],Je=et[1],Qe=et[2],de=mt[0],ue=mt[1],Ne=mt[2];return Math.abs(ne-de)<U.b&&Math.abs(Wt-ue)<U.b&&Math.abs($t-Ne)<U.b?s(z):(Pt=ne-de,yt=Wt-ue,Ft=$t-Ne,Qt=1/Math.hypot(Pt,yt,Ft),Pt*=Qt,yt*=Qt,Ft*=Qt,st=Je*Ft-Qe*yt,bt=Qe*Pt-De*Ft,Y=De*yt-Je*Pt,Qt=Math.hypot(st,bt,Y),Qt?(Qt=1/Qt,st*=Qt,bt*=Qt,Y*=Qt):(st=0,bt=0,Y=0),rt=yt*Y-Ft*bt,ot=Ft*st-Pt*Y,$=Pt*bt-yt*st,Qt=Math.hypot(rt,ot,$),Qt?(Qt=1/Qt,rt*=Qt,ot*=Qt,$*=Qt):(rt=0,ot=0,$=0),z[0]=st,z[1]=rt,z[2]=Pt,z[3]=0,z[4]=bt,z[5]=ot,z[6]=yt,z[7]=0,z[8]=Y,z[9]=$,z[10]=Ft,z[11]=0,z[12]=-(st*ne+bt*Wt+Y*$t),z[13]=-(rt*ne+ot*Wt+$*$t),z[14]=-(Pt*ne+yt*Wt+Ft*$t),z[15]=1,z)}function pt(z,q,mt,et){var st=q[0],bt=q[1],Y=q[2],rt=et[0],ot=et[1],$=et[2],Pt=st-mt[0],yt=bt-mt[1],Ft=Y-mt[2],Qt=Pt*Pt+yt*yt+Ft*Ft;Qt>0&&(Qt=1/Math.sqrt(Qt),Pt*=Qt,yt*=Qt,Ft*=Qt);var ne=ot*Ft-$*yt,Wt=$*Pt-rt*Ft,$t=rt*yt-ot*Pt;return Qt=ne*ne+Wt*Wt+$t*$t,Qt>0&&(Qt=1/Math.sqrt(Qt),ne*=Qt,Wt*=Qt,$t*=Qt),z[0]=ne,z[1]=Wt,z[2]=$t,z[3]=0,z[4]=yt*$t-Ft*Wt,z[5]=Ft*ne-Pt*$t,z[6]=Pt*Wt-yt*ne,z[7]=0,z[8]=Pt,z[9]=yt,z[10]=Ft,z[11]=0,z[12]=st,z[13]=bt,z[14]=Y,z[15]=1,z}function gt(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}function ft(z){return Math.hypot(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15])}function Rt(z,q,mt){return z[0]=q[0]+mt[0],z[1]=q[1]+mt[1],z[2]=q[2]+mt[2],z[3]=q[3]+mt[3],z[4]=q[4]+mt[4],z[5]=q[5]+mt[5],z[6]=q[6]+mt[6],z[7]=q[7]+mt[7],z[8]=q[8]+mt[8],z[9]=q[9]+mt[9],z[10]=q[10]+mt[10],z[11]=q[11]+mt[11],z[12]=q[12]+mt[12],z[13]=q[13]+mt[13],z[14]=q[14]+mt[14],z[15]=q[15]+mt[15],z}function Nt(z,q,mt){return z[0]=q[0]-mt[0],z[1]=q[1]-mt[1],z[2]=q[2]-mt[2],z[3]=q[3]-mt[3],z[4]=q[4]-mt[4],z[5]=q[5]-mt[5],z[6]=q[6]-mt[6],z[7]=q[7]-mt[7],z[8]=q[8]-mt[8],z[9]=q[9]-mt[9],z[10]=q[10]-mt[10],z[11]=q[11]-mt[11],z[12]=q[12]-mt[12],z[13]=q[13]-mt[13],z[14]=q[14]-mt[14],z[15]=q[15]-mt[15],z}function Dt(z,q,mt){return z[0]=q[0]*mt,z[1]=q[1]*mt,z[2]=q[2]*mt,z[3]=q[3]*mt,z[4]=q[4]*mt,z[5]=q[5]*mt,z[6]=q[6]*mt,z[7]=q[7]*mt,z[8]=q[8]*mt,z[9]=q[9]*mt,z[10]=q[10]*mt,z[11]=q[11]*mt,z[12]=q[12]*mt,z[13]=q[13]*mt,z[14]=q[14]*mt,z[15]=q[15]*mt,z}function St(z,q,mt,et){return z[0]=q[0]+mt[0]*et,z[1]=q[1]+mt[1]*et,z[2]=q[2]+mt[2]*et,z[3]=q[3]+mt[3]*et,z[4]=q[4]+mt[4]*et,z[5]=q[5]+mt[5]*et,z[6]=q[6]+mt[6]*et,z[7]=q[7]+mt[7]*et,z[8]=q[8]+mt[8]*et,z[9]=q[9]+mt[9]*et,z[10]=q[10]+mt[10]*et,z[11]=q[11]+mt[11]*et,z[12]=q[12]+mt[12]*et,z[13]=q[13]+mt[13]*et,z[14]=q[14]+mt[14]*et,z[15]=q[15]+mt[15]*et,z}function xt(z,q){return z[0]===q[0]&&z[1]===q[1]&&z[2]===q[2]&&z[3]===q[3]&&z[4]===q[4]&&z[5]===q[5]&&z[6]===q[6]&&z[7]===q[7]&&z[8]===q[8]&&z[9]===q[9]&&z[10]===q[10]&&z[11]===q[11]&&z[12]===q[12]&&z[13]===q[13]&&z[14]===q[14]&&z[15]===q[15]}function Ot(z,q){var mt=z[0],et=z[1],st=z[2],bt=z[3],Y=z[4],rt=z[5],ot=z[6],$=z[7],Pt=z[8],yt=z[9],Ft=z[10],Qt=z[11],ne=z[12],Wt=z[13],$t=z[14],De=z[15],Je=q[0],Qe=q[1],de=q[2],ue=q[3],Ne=q[4],cn=q[5],Fn=q[6],wn=q[7],en=q[8],tn=q[9],xn=q[10],Bn=q[11],vr=q[12],li=q[13],Me=q[14],Pe=q[15];return Math.abs(mt-Je)<=U.b*Math.max(1,Math.abs(mt),Math.abs(Je))&&Math.abs(et-Qe)<=U.b*Math.max(1,Math.abs(et),Math.abs(Qe))&&Math.abs(st-de)<=U.b*Math.max(1,Math.abs(st),Math.abs(de))&&Math.abs(bt-ue)<=U.b*Math.max(1,Math.abs(bt),Math.abs(ue))&&Math.abs(Y-Ne)<=U.b*Math.max(1,Math.abs(Y),Math.abs(Ne))&&Math.abs(rt-cn)<=U.b*Math.max(1,Math.abs(rt),Math.abs(cn))&&Math.abs(ot-Fn)<=U.b*Math.max(1,Math.abs(ot),Math.abs(Fn))&&Math.abs($-wn)<=U.b*Math.max(1,Math.abs($),Math.abs(wn))&&Math.abs(Pt-en)<=U.b*Math.max(1,Math.abs(Pt),Math.abs(en))&&Math.abs(yt-tn)<=U.b*Math.max(1,Math.abs(yt),Math.abs(tn))&&Math.abs(Ft-xn)<=U.b*Math.max(1,Math.abs(Ft),Math.abs(xn))&&Math.abs(Qt-Bn)<=U.b*Math.max(1,Math.abs(Qt),Math.abs(Bn))&&Math.abs(ne-vr)<=U.b*Math.max(1,Math.abs(ne),Math.abs(vr))&&Math.abs(Wt-li)<=U.b*Math.max(1,Math.abs(Wt),Math.abs(li))&&Math.abs($t-Me)<=U.b*Math.max(1,Math.abs($t),Math.abs(Me))&&Math.abs(De-Pe)<=U.b*Math.max(1,Math.abs(De),Math.abs(Pe))}var it=i,At=Nt},ZhIB:function(Se,dt,L){var U,E;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(T,e){U=e,E=typeof U=="function"?U.call(dt,L,dt,Se):U,E!==void 0&&(Se.exports=E)})(this,function(){var T,e,t="2.0.6",u={},s={},h={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},r={currentLocale:h.currentLocale,zeroFormat:h.zeroFormat,nullFormat:h.nullFormat,defaultFormat:h.defaultFormat,scalePercentBy100:h.scalePercentBy100};function c(n,i){this._input=n,this._value=i}return T=function(i){var a,o,l,f;if(T.isNumeral(i))a=i.value();else if(i===0||typeof i=="undefined")a=0;else if(i===null||e.isNaN(i))a=null;else if(typeof i=="string")if(r.zeroFormat&&i===r.zeroFormat)a=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)a=null;else{for(o in u)if(f=typeof u[o].regexps.unformat=="function"?u[o].regexps.unformat():u[o].regexps.unformat,f&&i.match(f)){l=u[o].unformat;break}l=l||T._.stringToNumber,a=l(i)}else a=Number(i)||null;return new c(i,a)},T.version=t,T.isNumeral=function(n){return n instanceof c},T._=e={numberToFormat:function(i,a,o){var l=s[T.options.currentLocale],f=!1,v=!1,b=0,g="",y=1e12,_=1e9,M=1e6,x=1e3,m="",S=!1,P,A,O,R,H,N,K,V,k,Z;if(i=i||0,A=Math.abs(i),T._.includes(a,"(")?(f=!0,a=a.replace(/[\(|\)]/g,"")):(T._.includes(a,"+")||T._.includes(a,"-"))&&(V=T._.includes(a,"+")?a.indexOf("+"):i<0?a.indexOf("-"):-1,a=a.replace(/[\+|\-]/g,"")),T._.includes(a,"a")&&(P=a.match(/a(k|m|b|t)?/),P=P?P[1]:!1,T._.includes(a," a")&&(g=" "),a=a.replace(new RegExp(g+"a[kmbt]?"),""),A>=y&&!P||P==="t"?(g+=l.abbreviations.trillion,i=i/y):A<y&&A>=_&&!P||P==="b"?(g+=l.abbreviations.billion,i=i/_):A<_&&A>=M&&!P||P==="m"?(g+=l.abbreviations.million,i=i/M):(A<M&&A>=x&&!P||P==="k")&&(g+=l.abbreviations.thousand,i=i/x)),T._.includes(a,"[.]")&&(v=!0,a=a.replace("[.]",".")),N=i.toString().split(".")[0],K=a.split(".")[1],k=a.indexOf(","),b=(a.split(".")[0].split(",")[0].match(/0/g)||[]).length,K?(T._.includes(K,"[")?(K=K.replace("]",""),K=K.split("["),m=T._.toFixed(i,K[0].length+K[1].length,o,K[1].length)):m=T._.toFixed(i,K.length,o),N=m.split(".")[0],T._.includes(m,".")?m=l.delimiters.decimal+m.split(".")[1]:m="",v&&Number(m.slice(1))===0&&(m="")):N=T._.toFixed(i,0,o),g&&!P&&Number(N)>=1e3&&g!==l.abbreviations.trillion)switch(N=String(Number(N)/1e3),g){case l.abbreviations.thousand:g=l.abbreviations.million;break;case l.abbreviations.million:g=l.abbreviations.billion;break;case l.abbreviations.billion:g=l.abbreviations.trillion;break}if(T._.includes(N,"-")&&(N=N.slice(1),S=!0),N.length<b)for(var X=b-N.length;X>0;X--)N="0"+N;return k>-1&&(N=N.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+l.delimiters.thousands)),a.indexOf(".")===0&&(N=""),Z=N+m+(g||""),f?Z=(f&&S?"(":"")+Z+(f&&S?")":""):V>=0?Z=V===0?(S?"-":"+")+Z:Z+(S?"-":"+"):S&&(Z="-"+Z),Z},stringToNumber:function(i){var a=s[r.currentLocale],o=i,l={thousand:3,million:6,billion:9,trillion:12},f,v,b,g;if(r.zeroFormat&&i===r.zeroFormat)v=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)v=null;else{v=1,a.delimiters.decimal!=="."&&(i=i.replace(/\./g,"").replace(a.delimiters.decimal,"."));for(f in l)if(g=new RegExp("[^a-zA-Z]"+a.abbreviations[f]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),o.match(g)){v*=Math.pow(10,l[f]);break}v*=(i.split("-").length+Math.min(i.split("(").length-1,i.split(")").length-1))%2?1:-1,i=i.replace(/[^0-9\.]+/g,""),v*=Number(i)}return v},isNaN:function(n){function i(a){return n.apply(this,arguments)}return i.toString=function(){return n.toString()},i}(function(n){return typeof n=="number"&&isNaN(n)}),includes:function(i,a){return i.indexOf(a)!==-1},insert:function(i,a,o){return i.slice(0,o)+a+i.slice(o)},reduce:function(i,a){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof a!="function")throw new TypeError(a+" is not a function");var o=Object(i),l=o.length>>>0,f=0,v;if(arguments.length===3)v=arguments[2];else{for(;f<l&&!(f in o);)f++;if(f>=l)throw new TypeError("Reduce of empty array with no initial value");v=o[f++]}for(;f<l;f++)f in o&&(v=a(v,o[f],f,o));return v},multiplier:function(i){var a=i.toString().split(".");return a.length<2?1:Math.pow(10,a[1].length)},correctionFactor:function(){var i=Array.prototype.slice.call(arguments);return i.reduce(function(a,o){var l=e.multiplier(o);return a>l?a:l},1)},toFixed:function(i,a,o,l){var f=i.toString().split("."),v=a-(l||0),b,g,y,_;return f.length===2?b=Math.min(Math.max(f[1].length,v),a):b=v,y=Math.pow(10,b),_=(o(i+"e+"+b)/y).toFixed(b),l>a-b&&(g=new RegExp("\\.?0{1,"+(l-(a-b))+"}$"),_=_.replace(g,"")),_}},T.options=r,T.formats=u,T.locales=s,T.locale=function(n){return n&&(r.currentLocale=n.toLowerCase()),r.currentLocale},T.localeData=function(n){if(!n)return s[r.currentLocale];if(n=n.toLowerCase(),!s[n])throw new Error("Unknown locale : "+n);return s[n]},T.reset=function(){for(var n in h)r[n]=h[n]},T.zeroFormat=function(n){r.zeroFormat=typeof n=="string"?n:null},T.nullFormat=function(n){r.nullFormat=typeof n=="string"?n:null},T.defaultFormat=function(n){r.defaultFormat=typeof n=="string"?n:"0.0"},T.register=function(n,i,a){if(i=i.toLowerCase(),this[n+"s"][i])throw new TypeError(i+" "+n+" already registered.");return this[n+"s"][i]=a,a},T.validate=function(n,i){var a,o,l,f,v,b,g,y;if(typeof n!="string"&&(n+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",n)),n=n.trim(),n.match(/^\d+$/))return!0;if(n==="")return!1;try{g=T.localeData(i)}catch(_){g=T.localeData(T.locale())}return l=g.currency.symbol,v=g.abbreviations,a=g.delimiters.decimal,g.delimiters.thousands==="."?o="\\.":o=g.delimiters.thousands,y=n.match(/^[^\d]+/),y!==null&&(n=n.substr(1),y[0]!==l)||(y=n.match(/[^\d]+$/),y!==null&&(n=n.slice(0,-1),y[0]!==v.thousand&&y[0]!==v.million&&y[0]!==v.billion&&y[0]!==v.trillion))?!1:(b=new RegExp(o+"{2}"),n.match(/[^\d.,]/g)?!1:(f=n.split(a),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b):f[0].length===1?!!f[0].match(/^\d+$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/)))},T.fn=c.prototype={clone:function(){return T(this)},format:function(i,a){var o=this._value,l=i||r.defaultFormat,f,v,b;if(a=a||Math.round,o===0&&r.zeroFormat!==null)v=r.zeroFormat;else if(o===null&&r.nullFormat!==null)v=r.nullFormat;else{for(f in u)if(l.match(u[f].regexps.format)){b=u[f].format;break}b=b||T._.numberToFormat,v=b(o,l,a)}return v},value:function(){return this._value},input:function(){return this._input},set:function(i){return this._value=Number(i),this},add:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(l,f,v,b){return l+Math.round(a*f)}return this._value=e.reduce([this._value,i],o,0)/a,this},subtract:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(l,f,v,b){return l-Math.round(a*f)}return this._value=e.reduce([i],o,Math.round(this._value*a))/a,this},multiply:function(i){function a(o,l,f,v){var b=e.correctionFactor(o,l);return Math.round(o*b)*Math.round(l*b)/Math.round(b*b)}return this._value=e.reduce([this._value,i],a,1),this},divide:function(i){function a(o,l,f,v){var b=e.correctionFactor(o,l);return Math.round(o*b)/Math.round(l*b)}return this._value=e.reduce([this._value,i],a),this},difference:function(i){return Math.abs(T(this._value).subtract(i).value())}},T.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(i){var a=i%10;return~~(i%100/10)==1?"th":a===1?"st":a===2?"nd":a===3?"rd":"th"},currency:{symbol:"$"}}),function(){T.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(i,a,o){var l=T._.includes(a," BPS")?" ":"",f;return i=i*1e4,a=a.replace(/\s?BPS/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,l+"BPS"),f=f.join("")):f=f+l+"BPS",f},unformat:function(i){return+(T._.stringToNumber(i)*1e-4).toFixed(15)}})}(),function(){var n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},a=n.suffixes.concat(i.suffixes.filter(function(l){return n.suffixes.indexOf(l)<0})),o=a.join("|");o="("+o.replace("B","B(?!PS)")+")",T.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(f,v,b){var g,y=T._.includes(v,"ib")?i:n,_=T._.includes(v," b")||T._.includes(v," ib")?" ":"",M,x,m;for(v=v.replace(/\s?i?b/,""),M=0;M<=y.suffixes.length;M++)if(x=Math.pow(y.base,M),m=Math.pow(y.base,M+1),f===null||f===0||f>=x&&f<m){_+=y.suffixes[M],x>0&&(f=f/x);break}return g=T._.numberToFormat(f,v,b),g+_},unformat:function(f){var v=T._.stringToNumber(f),b,g;if(v){for(b=n.suffixes.length-1;b>=0;b--){if(T._.includes(f,n.suffixes[b])){g=Math.pow(n.base,b);break}if(T._.includes(f,i.suffixes[b])){g=Math.pow(i.base,b);break}}v*=g||1}return v}})}(),function(){T.register("format","currency",{regexps:{format:/(\$)/},format:function(i,a,o){var l=T.locales[T.options.currentLocale],f={before:a.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:a.match(/([\+|\-|\)|\s|\$]*)$/)[0]},v,b,g;for(a=a.replace(/\s?\$\s?/,""),v=T._.numberToFormat(i,a,o),i>=0?(f.before=f.before.replace(/[\-\(]/,""),f.after=f.after.replace(/[\-\)]/,"")):i<0&&!T._.includes(f.before,"-")&&!T._.includes(f.before,"(")&&(f.before="-"+f.before),g=0;g<f.before.length;g++)switch(b=f.before[g],b){case"$":v=T._.insert(v,l.currency.symbol,g);break;case" ":v=T._.insert(v," ",g+l.currency.symbol.length-1);break}for(g=f.after.length-1;g>=0;g--)switch(b=f.after[g],b){case"$":v=g===f.after.length-1?v+l.currency.symbol:T._.insert(v,l.currency.symbol,-(f.after.length-(1+g)));break;case" ":v=g===f.after.length-1?v+" ":T._.insert(v," ",-(f.after.length-(1+g)+l.currency.symbol.length-1));break}return v}})}(),function(){T.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(i,a,o){var l,f=typeof i=="number"&&!T._.isNaN(i)?i.toExponential():"0e+0",v=f.split("e");return a=a.replace(/e[\+|\-]{1}0/,""),l=T._.numberToFormat(Number(v[0]),a,o),l+"e"+v[1]},unformat:function(i){var a=T._.includes(i,"e+")?i.split("e+"):i.split("e-"),o=Number(a[0]),l=Number(a[1]);l=T._.includes(i,"e-")?l*=-1:l;function f(v,b,g,y){var _=T._.correctionFactor(v,b),M=v*_*(b*_)/(_*_);return M}return T._.reduce([o,Math.pow(10,l)],f,1)}})}(),function(){T.register("format","ordinal",{regexps:{format:/(o)/},format:function(i,a,o){var l=T.locales[T.options.currentLocale],f,v=T._.includes(a," o")?" ":"";return a=a.replace(/\s?o/,""),v+=l.ordinal(i),f=T._.numberToFormat(i,a,o),f+v}})}(),function(){T.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(i,a,o){var l=T._.includes(a," %")?" ":"",f;return T.options.scalePercentBy100&&(i=i*100),a=a.replace(/\s?\%/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,l+"%"),f=f.join("")):f=f+l+"%",f},unformat:function(i){var a=T._.stringToNumber(i);return T.options.scalePercentBy100?a*.01:a}})}(),function(){T.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(i,a,o){var l=Math.floor(i/60/60),f=Math.floor((i-l*60*60)/60),v=Math.round(i-l*60*60-f*60);return l+":"+(f<10?"0"+f:f)+":"+(v<10?"0"+v:v)},unformat:function(i){var a=i.split(":"),o=0;return a.length===3?(o=o+Number(a[0])*60*60,o=o+Number(a[1])*60,o=o+Number(a[2])):a.length===2&&(o=o+Number(a[0])*60,o=o+Number(a[1])),Number(o)}})}(),T})},Ztfv:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.tagProperty=dt.tagParameter=dt.decorate=void 0;var U=L("MON2"),E=L("xfSm");function T(r,c,n,i){var a=E.TAGGED;t(a,r,c,i,n)}dt.tagParameter=T;function e(r,c,n){var i=E.TAGGED_PROP;t(i,r.constructor,c,n)}dt.tagProperty=e;function t(r,c,n,i,a){var o={},l=typeof a=="number",f=a!==void 0&&l?a.toString():n;if(l&&n!==void 0)throw new Error(U.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(r,c)&&(o=Reflect.getMetadata(r,c));var v=o[f];if(!Array.isArray(v))v=[];else for(var b=0,g=v;b<g.length;b++){var y=g[b];if(y.key===i.key)throw new Error(U.DUPLICATED_METADATA+" "+y.key.toString())}v.push(i),o[f]=v,Reflect.defineMetadata(r,o,c)}function u(r,c){Reflect.decorate(r,c)}function s(r,c){return function(n,i){c(n,i,r)}}function h(r,c,n){typeof n=="number"?u([s(n,r)],c):typeof n=="string"?Reflect.decorate([r],c,n):u([r],c)}dt.decorate=h},ZxFD:function(Se,dt,L){"use strict";L.r(dt),L.d(dt,"create",function(){return E}),L.d(dt,"clone",function(){return T}),L.d(dt,"fromValues",function(){return e}),L.d(dt,"copy",function(){return t}),L.d(dt,"set",function(){return u}),L.d(dt,"add",function(){return s}),L.d(dt,"subtract",function(){return h}),L.d(dt,"multiply",function(){return r}),L.d(dt,"divide",function(){return c}),L.d(dt,"ceil",function(){return n}),L.d(dt,"floor",function(){return i}),L.d(dt,"min",function(){return a}),L.d(dt,"max",function(){return o}),L.d(dt,"round",function(){return l}),L.d(dt,"scale",function(){return f}),L.d(dt,"scaleAndAdd",function(){return v}),L.d(dt,"distance",function(){return b}),L.d(dt,"squaredDistance",function(){return g}),L.d(dt,"length",function(){return y}),L.d(dt,"squaredLength",function(){return _}),L.d(dt,"negate",function(){return M}),L.d(dt,"inverse",function(){return x}),L.d(dt,"normalize",function(){return m}),L.d(dt,"dot",function(){return S}),L.d(dt,"cross",function(){return P}),L.d(dt,"lerp",function(){return A}),L.d(dt,"random",function(){return O}),L.d(dt,"transformMat2",function(){return R}),L.d(dt,"transformMat2d",function(){return H}),L.d(dt,"transformMat3",function(){return N}),L.d(dt,"transformMat4",function(){return K}),L.d(dt,"rotate",function(){return V}),L.d(dt,"angle",function(){return k}),L.d(dt,"zero",function(){return Z}),L.d(dt,"str",function(){return X}),L.d(dt,"exactEquals",function(){return at}),L.d(dt,"equals",function(){return pt}),L.d(dt,"len",function(){return gt}),L.d(dt,"sub",function(){return ft}),L.d(dt,"mul",function(){return Rt}),L.d(dt,"div",function(){return Nt}),L.d(dt,"dist",function(){return Dt}),L.d(dt,"sqrDist",function(){return St}),L.d(dt,"sqrLen",function(){return xt}),L.d(dt,"forEach",function(){return Ot});var U=L("yU0y");function E(){var it=new U.a(2);return U.a!=Float32Array&&(it[0]=0,it[1]=0),it}function T(it){var At=new U.a(2);return At[0]=it[0],At[1]=it[1],At}function e(it,At){var z=new U.a(2);return z[0]=it,z[1]=At,z}function t(it,At){return it[0]=At[0],it[1]=At[1],it}function u(it,At,z){return it[0]=At,it[1]=z,it}function s(it,At,z){return it[0]=At[0]+z[0],it[1]=At[1]+z[1],it}function h(it,At,z){return it[0]=At[0]-z[0],it[1]=At[1]-z[1],it}function r(it,At,z){return it[0]=At[0]*z[0],it[1]=At[1]*z[1],it}function c(it,At,z){return it[0]=At[0]/z[0],it[1]=At[1]/z[1],it}function n(it,At){return it[0]=Math.ceil(At[0]),it[1]=Math.ceil(At[1]),it}function i(it,At){return it[0]=Math.floor(At[0]),it[1]=Math.floor(At[1]),it}function a(it,At,z){return it[0]=Math.min(At[0],z[0]),it[1]=Math.min(At[1],z[1]),it}function o(it,At,z){return it[0]=Math.max(At[0],z[0]),it[1]=Math.max(At[1],z[1]),it}function l(it,At){return it[0]=Math.round(At[0]),it[1]=Math.round(At[1]),it}function f(it,At,z){return it[0]=At[0]*z,it[1]=At[1]*z,it}function v(it,At,z,q){return it[0]=At[0]+z[0]*q,it[1]=At[1]+z[1]*q,it}function b(it,At){var z=At[0]-it[0],q=At[1]-it[1];return Math.hypot(z,q)}function g(it,At){var z=At[0]-it[0],q=At[1]-it[1];return z*z+q*q}function y(it){var At=it[0],z=it[1];return Math.hypot(At,z)}function _(it){var At=it[0],z=it[1];return At*At+z*z}function M(it,At){return it[0]=-At[0],it[1]=-At[1],it}function x(it,At){return it[0]=1/At[0],it[1]=1/At[1],it}function m(it,At){var z=At[0],q=At[1],mt=z*z+q*q;return mt>0&&(mt=1/Math.sqrt(mt)),it[0]=At[0]*mt,it[1]=At[1]*mt,it}function S(it,At){return it[0]*At[0]+it[1]*At[1]}function P(it,At,z){var q=At[0]*z[1]-At[1]*z[0];return it[0]=it[1]=0,it[2]=q,it}function A(it,At,z,q){var mt=At[0],et=At[1];return it[0]=mt+q*(z[0]-mt),it[1]=et+q*(z[1]-et),it}function O(it,At){At=At||1;var z=U.c()*2*Math.PI;return it[0]=Math.cos(z)*At,it[1]=Math.sin(z)*At,it}function R(it,At,z){var q=At[0],mt=At[1];return it[0]=z[0]*q+z[2]*mt,it[1]=z[1]*q+z[3]*mt,it}function H(it,At,z){var q=At[0],mt=At[1];return it[0]=z[0]*q+z[2]*mt+z[4],it[1]=z[1]*q+z[3]*mt+z[5],it}function N(it,At,z){var q=At[0],mt=At[1];return it[0]=z[0]*q+z[3]*mt+z[6],it[1]=z[1]*q+z[4]*mt+z[7],it}function K(it,At,z){var q=At[0],mt=At[1];return it[0]=z[0]*q+z[4]*mt+z[12],it[1]=z[1]*q+z[5]*mt+z[13],it}function V(it,At,z,q){var mt=At[0]-z[0],et=At[1]-z[1],st=Math.sin(q),bt=Math.cos(q);return it[0]=mt*bt-et*st+z[0],it[1]=mt*st+et*bt+z[1],it}function k(it,At){var z=it[0],q=it[1],mt=At[0],et=At[1],st=Math.sqrt(z*z+q*q)*Math.sqrt(mt*mt+et*et),bt=st&&(z*mt+q*et)/st;return Math.acos(Math.min(Math.max(bt,-1),1))}function Z(it){return it[0]=0,it[1]=0,it}function X(it){return"vec2("+it[0]+", "+it[1]+")"}function at(it,At){return it[0]===At[0]&&it[1]===At[1]}function pt(it,At){var z=it[0],q=it[1],mt=At[0],et=At[1];return Math.abs(z-mt)<=U.b*Math.max(1,Math.abs(z),Math.abs(mt))&&Math.abs(q-et)<=U.b*Math.max(1,Math.abs(q),Math.abs(et))}var gt=y,ft=h,Rt=r,Nt=c,Dt=b,St=g,xt=_,Ot=function(){var it=E();return function(At,z,q,mt,et,st){var bt,Y;for(z||(z=2),q||(q=0),mt?Y=Math.min(mt*z+q,At.length):Y=At.length,bt=q;bt<Y;bt+=z)it[0]=At[bt],it[1]=At[bt+1],et(it,it,st),At[bt]=it[0],At[bt+1]=it[1];return At}}()},ZzCi:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.named=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(t){return function(u,s,h){var r=new E.Metadata(U.NAMED_TAG,t);typeof h=="number"?T.tagParameter(u,s,h,r):T.tagProperty(u,s,r)}}dt.named=e},a1gu:function(Se,dt,L){var U=L("cDf5").default,E=L("PJYZ");function T(e,t){return t&&(U(t)==="object"||typeof t=="function")?t:E(e)}Se.exports=T,Se.exports.default=Se.exports,Se.exports.__esModule=!0},aF1E:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return t});var U=L("lSNA"),E=L.n(U);function T(u,s){var h=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);s&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(u,c).enumerable})),h.push.apply(h,r)}return h}function e(u){for(var s=1;s<arguments.length;s++){var h=arguments[s]!=null?arguments[s]:{};s%2?T(Object(h),!0).forEach(function(r){E()(u,r,h[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(h)):T(Object(h)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(h,r))})}return u}function t(u,s){var h=s.sourceField,r=s.targetField,c=s.data,n={};return c.forEach(function(i){n[i[h]]=i}),u.dataArray=u.dataArray.map(function(i){var a=i[r];return e(e({},i),n[a])}),u}},aHsQ:function(Se,dt,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("6D9b"),e=L.n(T),t=L("cWXX")},aPG5:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.resolve=void 0;var U=L("MON2"),E=L("FV85"),T=L("qK8v"),e=L("ujMp"),t=L("cSJO"),u=function(c,n,i){try{return i()}catch(a){throw T.isStackOverflowExeption(a)?new Error(U.CIRCULAR_DEPENDENCY_IN_FACTORY(c,n.toString())):a}},s=function r(c){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,a=n.childRequests,o=n.target&&n.target.isArray(),l=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(o&&l)return a.map(function(_){var M=r(c);return M(_)});var f=null;if(n.target.isOptional()&&i.length===0)return;var v=i[0],b=v.scope===E.BindingScopeEnum.Singleton,g=v.scope===E.BindingScopeEnum.Request;if(b&&v.activated)return v.cache;if(g&&c!==null&&c.has(v.id))return c.get(v.id);if(v.type===E.BindingTypeEnum.ConstantValue)f=v.cache,v.activated=!0;else if(v.type===E.BindingTypeEnum.Function)f=v.cache,v.activated=!0;else if(v.type===E.BindingTypeEnum.Constructor)f=v.implementationType;else if(v.type===E.BindingTypeEnum.DynamicValue&&v.dynamicValue!==null)f=u("toDynamicValue",v.serviceIdentifier,function(){return v.dynamicValue(n.parentContext)});else if(v.type===E.BindingTypeEnum.Factory&&v.factory!==null)f=u("toFactory",v.serviceIdentifier,function(){return v.factory(n.parentContext)});else if(v.type===E.BindingTypeEnum.Provider&&v.provider!==null)f=u("toProvider",v.serviceIdentifier,function(){return v.provider(n.parentContext)});else if(v.type===E.BindingTypeEnum.Instance&&v.implementationType!==null)f=t.resolveInstance(v.implementationType,a,r(c));else{var y=e.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(U.INVALID_BINDING_TYPE+" "+y)}return typeof v.onActivation=="function"&&(f=v.onActivation(n.parentContext,f)),b&&(v.cache=f,v.activated=!0),g&&c!==null&&!c.has(v.id)&&c.set(v.id,f),f}};function h(r){var c=s(r.plan.rootRequest.requestScope);return c(r.plan.rootRequest)}dt.resolve=h},asDA:function(Se,dt){function L(U,E,T,e){var t=-1,u=U==null?0:U.length;for(e&&u&&(T=U[++t]);++t<u;)T=E(T,U[t],t,U);return T}Se.exports=L},b2z7:function(Se,dt){var L=/\w*$/;function U(E){var T=new E.constructor(E.source,L.exec(E));return T.lastIndex=E.lastIndex,T}Se.exports=U},b48C:function(Se,dt){function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},bB6j:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},bE4E:function(Se,dt,L){},bPkA:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U;(function(E){E.Normal="normal",E.PostProcessing="post-processing"})(U||(U={}))},bTtR:function(Se,dt){},bYl4:function(Se,dt){},bahg:function(Se,dt){function L(U){return U.split("")}Se.exports=L},bl9R:function(Se,dt,L){"use strict";L.r(dt),L.d(dt,"create",function(){return E}),L.d(dt,"clone",function(){return T}),L.d(dt,"fromValues",function(){return e}),L.d(dt,"copy",function(){return t}),L.d(dt,"set",function(){return u}),L.d(dt,"add",function(){return s}),L.d(dt,"subtract",function(){return h}),L.d(dt,"multiply",function(){return r}),L.d(dt,"divide",function(){return c}),L.d(dt,"ceil",function(){return n}),L.d(dt,"floor",function(){return i}),L.d(dt,"min",function(){return a}),L.d(dt,"max",function(){return o}),L.d(dt,"round",function(){return l}),L.d(dt,"scale",function(){return f}),L.d(dt,"scaleAndAdd",function(){return v}),L.d(dt,"distance",function(){return b}),L.d(dt,"squaredDistance",function(){return g}),L.d(dt,"length",function(){return y}),L.d(dt,"squaredLength",function(){return _}),L.d(dt,"negate",function(){return M}),L.d(dt,"inverse",function(){return x}),L.d(dt,"normalize",function(){return m}),L.d(dt,"dot",function(){return S}),L.d(dt,"cross",function(){return P}),L.d(dt,"lerp",function(){return A}),L.d(dt,"random",function(){return O}),L.d(dt,"transformMat4",function(){return R}),L.d(dt,"transformQuat",function(){return H}),L.d(dt,"zero",function(){return N}),L.d(dt,"str",function(){return K}),L.d(dt,"exactEquals",function(){return V}),L.d(dt,"equals",function(){return k}),L.d(dt,"sub",function(){return Z}),L.d(dt,"mul",function(){return X}),L.d(dt,"div",function(){return at}),L.d(dt,"dist",function(){return pt}),L.d(dt,"sqrDist",function(){return gt}),L.d(dt,"len",function(){return ft}),L.d(dt,"sqrLen",function(){return Rt}),L.d(dt,"forEach",function(){return Nt});var U=L("yU0y");function E(){var Dt=new U.a(4);return U.a!=Float32Array&&(Dt[0]=0,Dt[1]=0,Dt[2]=0,Dt[3]=0),Dt}function T(Dt){var St=new U.a(4);return St[0]=Dt[0],St[1]=Dt[1],St[2]=Dt[2],St[3]=Dt[3],St}function e(Dt,St,xt,Ot){var it=new U.a(4);return it[0]=Dt,it[1]=St,it[2]=xt,it[3]=Ot,it}function t(Dt,St){return Dt[0]=St[0],Dt[1]=St[1],Dt[2]=St[2],Dt[3]=St[3],Dt}function u(Dt,St,xt,Ot,it){return Dt[0]=St,Dt[1]=xt,Dt[2]=Ot,Dt[3]=it,Dt}function s(Dt,St,xt){return Dt[0]=St[0]+xt[0],Dt[1]=St[1]+xt[1],Dt[2]=St[2]+xt[2],Dt[3]=St[3]+xt[3],Dt}function h(Dt,St,xt){return Dt[0]=St[0]-xt[0],Dt[1]=St[1]-xt[1],Dt[2]=St[2]-xt[2],Dt[3]=St[3]-xt[3],Dt}function r(Dt,St,xt){return Dt[0]=St[0]*xt[0],Dt[1]=St[1]*xt[1],Dt[2]=St[2]*xt[2],Dt[3]=St[3]*xt[3],Dt}function c(Dt,St,xt){return Dt[0]=St[0]/xt[0],Dt[1]=St[1]/xt[1],Dt[2]=St[2]/xt[2],Dt[3]=St[3]/xt[3],Dt}function n(Dt,St){return Dt[0]=Math.ceil(St[0]),Dt[1]=Math.ceil(St[1]),Dt[2]=Math.ceil(St[2]),Dt[3]=Math.ceil(St[3]),Dt}function i(Dt,St){return Dt[0]=Math.floor(St[0]),Dt[1]=Math.floor(St[1]),Dt[2]=Math.floor(St[2]),Dt[3]=Math.floor(St[3]),Dt}function a(Dt,St,xt){return Dt[0]=Math.min(St[0],xt[0]),Dt[1]=Math.min(St[1],xt[1]),Dt[2]=Math.min(St[2],xt[2]),Dt[3]=Math.min(St[3],xt[3]),Dt}function o(Dt,St,xt){return Dt[0]=Math.max(St[0],xt[0]),Dt[1]=Math.max(St[1],xt[1]),Dt[2]=Math.max(St[2],xt[2]),Dt[3]=Math.max(St[3],xt[3]),Dt}function l(Dt,St){return Dt[0]=Math.round(St[0]),Dt[1]=Math.round(St[1]),Dt[2]=Math.round(St[2]),Dt[3]=Math.round(St[3]),Dt}function f(Dt,St,xt){return Dt[0]=St[0]*xt,Dt[1]=St[1]*xt,Dt[2]=St[2]*xt,Dt[3]=St[3]*xt,Dt}function v(Dt,St,xt,Ot){return Dt[0]=St[0]+xt[0]*Ot,Dt[1]=St[1]+xt[1]*Ot,Dt[2]=St[2]+xt[2]*Ot,Dt[3]=St[3]+xt[3]*Ot,Dt}function b(Dt,St){var xt=St[0]-Dt[0],Ot=St[1]-Dt[1],it=St[2]-Dt[2],At=St[3]-Dt[3];return Math.hypot(xt,Ot,it,At)}function g(Dt,St){var xt=St[0]-Dt[0],Ot=St[1]-Dt[1],it=St[2]-Dt[2],At=St[3]-Dt[3];return xt*xt+Ot*Ot+it*it+At*At}function y(Dt){var St=Dt[0],xt=Dt[1],Ot=Dt[2],it=Dt[3];return Math.hypot(St,xt,Ot,it)}function _(Dt){var St=Dt[0],xt=Dt[1],Ot=Dt[2],it=Dt[3];return St*St+xt*xt+Ot*Ot+it*it}function M(Dt,St){return Dt[0]=-St[0],Dt[1]=-St[1],Dt[2]=-St[2],Dt[3]=-St[3],Dt}function x(Dt,St){return Dt[0]=1/St[0],Dt[1]=1/St[1],Dt[2]=1/St[2],Dt[3]=1/St[3],Dt}function m(Dt,St){var xt=St[0],Ot=St[1],it=St[2],At=St[3],z=xt*xt+Ot*Ot+it*it+At*At;return z>0&&(z=1/Math.sqrt(z)),Dt[0]=xt*z,Dt[1]=Ot*z,Dt[2]=it*z,Dt[3]=At*z,Dt}function S(Dt,St){return Dt[0]*St[0]+Dt[1]*St[1]+Dt[2]*St[2]+Dt[3]*St[3]}function P(Dt,St,xt,Ot){var it=xt[0]*Ot[1]-xt[1]*Ot[0],At=xt[0]*Ot[2]-xt[2]*Ot[0],z=xt[0]*Ot[3]-xt[3]*Ot[0],q=xt[1]*Ot[2]-xt[2]*Ot[1],mt=xt[1]*Ot[3]-xt[3]*Ot[1],et=xt[2]*Ot[3]-xt[3]*Ot[2],st=St[0],bt=St[1],Y=St[2],rt=St[3];return Dt[0]=bt*et-Y*mt+rt*q,Dt[1]=-(st*et)+Y*z-rt*At,Dt[2]=st*mt-bt*z+rt*it,Dt[3]=-(st*q)+bt*At-Y*it,Dt}function A(Dt,St,xt,Ot){var it=St[0],At=St[1],z=St[2],q=St[3];return Dt[0]=it+Ot*(xt[0]-it),Dt[1]=At+Ot*(xt[1]-At),Dt[2]=z+Ot*(xt[2]-z),Dt[3]=q+Ot*(xt[3]-q),Dt}function O(Dt,St){St=St||1;var xt,Ot,it,At,z,q;do xt=U.c()*2-1,Ot=U.c()*2-1,z=xt*xt+Ot*Ot;while(z>=1);do it=U.c()*2-1,At=U.c()*2-1,q=it*it+At*At;while(q>=1);var mt=Math.sqrt((1-z)/q);return Dt[0]=St*xt,Dt[1]=St*Ot,Dt[2]=St*it*mt,Dt[3]=St*At*mt,Dt}function R(Dt,St,xt){var Ot=St[0],it=St[1],At=St[2],z=St[3];return Dt[0]=xt[0]*Ot+xt[4]*it+xt[8]*At+xt[12]*z,Dt[1]=xt[1]*Ot+xt[5]*it+xt[9]*At+xt[13]*z,Dt[2]=xt[2]*Ot+xt[6]*it+xt[10]*At+xt[14]*z,Dt[3]=xt[3]*Ot+xt[7]*it+xt[11]*At+xt[15]*z,Dt}function H(Dt,St,xt){var Ot=St[0],it=St[1],At=St[2],z=xt[0],q=xt[1],mt=xt[2],et=xt[3],st=et*Ot+q*At-mt*it,bt=et*it+mt*Ot-z*At,Y=et*At+z*it-q*Ot,rt=-z*Ot-q*it-mt*At;return Dt[0]=st*et+rt*-z+bt*-mt-Y*-q,Dt[1]=bt*et+rt*-q+Y*-z-st*-mt,Dt[2]=Y*et+rt*-mt+st*-q-bt*-z,Dt[3]=St[3],Dt}function N(Dt){return Dt[0]=0,Dt[1]=0,Dt[2]=0,Dt[3]=0,Dt}function K(Dt){return"vec4("+Dt[0]+", "+Dt[1]+", "+Dt[2]+", "+Dt[3]+")"}function V(Dt,St){return Dt[0]===St[0]&&Dt[1]===St[1]&&Dt[2]===St[2]&&Dt[3]===St[3]}function k(Dt,St){var xt=Dt[0],Ot=Dt[1],it=Dt[2],At=Dt[3],z=St[0],q=St[1],mt=St[2],et=St[3];return Math.abs(xt-z)<=U.b*Math.max(1,Math.abs(xt),Math.abs(z))&&Math.abs(Ot-q)<=U.b*Math.max(1,Math.abs(Ot),Math.abs(q))&&Math.abs(it-mt)<=U.b*Math.max(1,Math.abs(it),Math.abs(mt))&&Math.abs(At-et)<=U.b*Math.max(1,Math.abs(At),Math.abs(et))}var Z=h,X=r,at=c,pt=b,gt=g,ft=y,Rt=_,Nt=function(){var Dt=E();return function(St,xt,Ot,it,At,z){var q,mt;for(xt||(xt=4),Ot||(Ot=0),it?mt=Math.min(it*xt+Ot,St.length):mt=St.length,q=Ot;q<mt;q+=xt)Dt[0]=St[q],Dt[1]=St[q+1],Dt[2]=St[q+2],Dt[3]=St[q+3],At(Dt,Dt,z),St[q]=Dt[0],St[q+1]=Dt[1],St[q+2]=Dt[2],St[q+3]=Dt[3];return St}}()},bx4M:function(Se,dt,L){"use strict";var U=L("rePB"),E=L("wx14"),T=L("q1tI"),e=L("TSYQ"),t=L.n(e),u=L("bT9E"),s=L("H84U"),h=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m},r=function(x){var m=x.prefixCls,S=x.className,P=x.hoverable,A=P===void 0?!0:P,O=h(x,["prefixCls","className","hoverable"]);return T.createElement(s.a,null,function(R){var H=R.getPrefixCls,N=H("card",m),K=t()("".concat(N,"-grid"),S,Object(U.a)({},"".concat(N,"-grid-hoverable"),A));return T.createElement("div",Object(E.a)({},O,{className:K}))})},c=r,n=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m},i=function(x){return T.createElement(s.a,null,function(m){var S=m.getPrefixCls,P=x.prefixCls,A=x.className,O=x.avatar,R=x.title,H=x.description,N=n(x,["prefixCls","className","avatar","title","description"]),K=S("card",P),V=t()("".concat(K,"-meta"),A),k=O?T.createElement("div",{className:"".concat(K,"-meta-avatar")},O):null,Z=R?T.createElement("div",{className:"".concat(K,"-meta-title")},R):null,X=H?T.createElement("div",{className:"".concat(K,"-meta-description")},H):null,at=Z||X?T.createElement("div",{className:"".concat(K,"-meta-detail")},Z,X):null;return T.createElement("div",Object(E.a)({},N,{className:V}),k,at)})},a=i,o=L("ZTPi"),l=L("BMrR"),f=L("kPKH"),v=L("3Nzz"),b=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m};function g(M){var x=M.map(function(m,S){return T.createElement("li",{style:{width:"".concat(100/M.length,"%")},key:"action-".concat(S)},T.createElement("span",null,m))});return x}var y=function(x){var m,S,P=T.useContext(s.b),A=P.getPrefixCls,O=P.direction,R=T.useContext(v.b),H=function(Ne){var cn;(cn=x.onTabChange)===null||cn===void 0||cn.call(x,Ne)},N=function(){var Ne;return T.Children.forEach(x.children,function(cn){cn&&cn.type&&cn.type===c&&(Ne=!0)}),Ne},K=x.prefixCls,V=x.className,k=x.extra,Z=x.headStyle,X=Z===void 0?{}:Z,at=x.bodyStyle,pt=at===void 0?{}:at,gt=x.title,ft=x.loading,Rt=x.bordered,Nt=Rt===void 0?!0:Rt,Dt=x.size,St=x.type,xt=x.cover,Ot=x.actions,it=x.tabList,At=x.children,z=x.activeTabKey,q=x.defaultActiveTabKey,mt=x.tabBarExtraContent,et=x.hoverable,st=x.tabProps,bt=st===void 0?{}:st,Y=b(x,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),rt=A("card",K),ot=pt.padding===0||pt.padding==="0px"?{padding:24}:void 0,$=T.createElement("div",{className:"".concat(rt,"-loading-block")}),Pt=T.createElement("div",{className:"".concat(rt,"-loading-content"),style:ot},T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:22},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:8},$),T.createElement(f.a,{span:15},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:6},$),T.createElement(f.a,{span:18},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:13},$),T.createElement(f.a,{span:9},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:4},$),T.createElement(f.a,{span:3},$),T.createElement(f.a,{span:16},$))),yt=z!==void 0,Ft=Object(E.a)(Object(E.a)({},bt),(m={},Object(U.a)(m,yt?"activeKey":"defaultActiveKey",yt?z:q),Object(U.a)(m,"tabBarExtraContent",mt),m)),Qt,ne=it&&it.length?T.createElement(o.a,Object(E.a)({size:"large"},Ft,{className:"".concat(rt,"-head-tabs"),onChange:H}),it.map(function(ue){return T.createElement(o.a.TabPane,{tab:ue.tab,disabled:ue.disabled,key:ue.key})})):null;(gt||k||ne)&&(Qt=T.createElement("div",{className:"".concat(rt,"-head"),style:X},T.createElement("div",{className:"".concat(rt,"-head-wrapper")},gt&&T.createElement("div",{className:"".concat(rt,"-head-title")},gt),k&&T.createElement("div",{className:"".concat(rt,"-extra")},k)),ne));var Wt=xt?T.createElement("div",{className:"".concat(rt,"-cover")},xt):null,$t=T.createElement("div",{className:"".concat(rt,"-body"),style:pt},ft?Pt:At),De=Ot&&Ot.length?T.createElement("ul",{className:"".concat(rt,"-actions")},g(Ot)):null,Je=Object(u.a)(Y,["onTabChange"]),Qe=Dt||R,de=t()(rt,(S={},Object(U.a)(S,"".concat(rt,"-loading"),ft),Object(U.a)(S,"".concat(rt,"-bordered"),Nt),Object(U.a)(S,"".concat(rt,"-hoverable"),et),Object(U.a)(S,"".concat(rt,"-contain-grid"),N()),Object(U.a)(S,"".concat(rt,"-contain-tabs"),it&&it.length),Object(U.a)(S,"".concat(rt,"-").concat(Qe),Qe),Object(U.a)(S,"".concat(rt,"-type-").concat(St),!!St),Object(U.a)(S,"".concat(rt,"-rtl"),O==="rtl"),S),V);return T.createElement("div",Object(E.a)({},Je,{className:de}),Qt,Wt,$t,De)};y.Grid=c,y.Meta=a;var _=dt.a=y},bzyH:function(Se,dt){},cQSq:function(Se,dt,L){(function(E,T){Se.exports=T()})(window,function(){return function(U){var E={};function T(e){if(E[e])return E[e].exports;var t=E[e]={i:e,l:!1,exports:{}};return U[e].call(t.exports,t,t.exports,T),t.l=!0,t.exports}return T.m=U,T.c=E,T.d=function(e,t,u){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:u})},T.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(t&1&&(e=T(e)),t&8||t&4&&typeof e=="object"&&e&&e.__esModule)return e;var u=Object.create(null);if(T.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),t&2&&typeof e!="string")for(var s in e)T.d(u,s,function(h){return e[h]}.bind(null,s));return u},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T(T.s="./src/index.ts")}({"./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js":function(E,T,e){(function(u,s){E.exports=s()})(typeof self!="undefined"?self:this,function(){return function(t){var u={};function s(h){if(u[h])return u[h].exports;var r=u[h]={i:h,l:!1,exports:{}};return t[h].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=u,s.d=function(h,r,c){s.o(h,r)||Object.defineProperty(h,r,{configurable:!1,enumerable:!0,get:c})},s.n=function(h){var r=h&&h.__esModule?function(){return h.default}:function(){return h};return s.d(r,"a",r),r},s.o=function(h,r){return Object.prototype.hasOwnProperty.call(h,r)},s.p="",s(s.s=31)}([function(t,u,s){"use strict";var h=s(4);u.a=function(r){return Array.isArray?Array.isArray(r):Object(h.a)(r,"Array")}},function(t,u,s){"use strict";var h=function(c){return c!==null&&typeof c!="function"&&isFinite(c.length)};u.a=h},function(t,u,s){"use strict";var h=s(0),r=s(13);function c(n,i){if(!!n){var a;if(Object(h.a)(n))for(var o=0,l=n.length;o<l&&(a=i(n[o],o),a!==!1);o++);else if(Object(r.a)(n)){for(var f in n)if(n.hasOwnProperty(f)&&(a=i(n[f],f),a===!1))break}}}u.a=c},function(t,u,s){"use strict";var h=s(4);u.a=function(r){return Object(h.a)(r,"Function")}},function(t,u,s){"use strict";var h={}.toString,r=function(n,i){return h.call(n)==="[object "+i+"]"};u.a=r},function(t,u,s){"use strict";var h=s(4),r=function(n){return Object(h.a)(n,"Number")};u.a=r},function(t,u,s){"use strict";var h=function(c){return c==null};u.a=h},function(t,u,s){var h=s(33),r=h.mix;t.exports={assign:r}},function(t,u,s){"use strict";var h=s(4);u.a=function(r){return Object(h.a)(r,"String")}},function(t,u,s){"use strict";var h=s(15),r=s(4),c=function(i){if(!Object(h.a)(i)||!Object(r.a)(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;for(var a=i;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(i)===a};u.a=c},function(t,u,s){"use strict";var h=s(6);u.a=function(r){return Object(h.a)(r)?"":r.toString()}},function(t,u,s){var h=s(18),r=function(){function c(i,a){a===void 0&&(a={});var o=this;o.options=a,o.rootNode=h(i,a)}var n=c.prototype;return n.execute=function(){throw new Error("please override this method")},c}();t.exports=r},function(t,u,s){"use strict";var h=s(1),r=function(n,i){return Object(h.a)(n)?n.indexOf(i)>-1:!1};u.a=r},function(t,u,s){"use strict";u.a=function(h){var r=typeof h;return h!==null&&r==="object"||r==="function"}},function(t,u,s){"use strict";var h=s(2),r=s(1),c=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(h.a)(i,function(l,f){a(l,f)&&o.push(l)}),o};u.a=c},function(t,u,s){"use strict";var h=function(c){return typeof c=="object"&&c!==null};u.a=h},function(t,u,s){"use strict";u.a=r;function h(c,n){for(var i in n)n.hasOwnProperty(i)&&i!=="constructor"&&n[i]!==void 0&&(c[i]=n[i])}function r(c,n,i,a){return n&&h(c,n),i&&h(c,i),a&&h(c,a),c}},function(t,u,s){var h=s(30),r=["LR","RL","TB","BT","H","V"],c=["LR","RL","H"],n=function(o){return c.indexOf(o)>-1},i=r[0];t.exports=function(a,o,l){var f=o.direction||i;if(o.isHorizontal=n(f),f&&r.indexOf(f)===-1)throw new TypeError("Invalid direction: "+f);if(f===r[0])l(a,o);else if(f===r[1])l(a,o),a.right2left();else if(f===r[2])l(a,o);else if(f===r[3])l(a,o),a.bottom2top();else if(f===r[4]||f===r[5]){var v=h(a,o),b=v.left,g=v.right;l(b,o),l(g,o),o.isHorizontal?b.right2left():b.bottom2top(),g.translate(b.x-g.x,b.y-g.y),a.x=b.x,a.y=g.y;var y=a.getBoundingBox();o.isHorizontal?y.top<0&&a.translate(0,-y.top):y.left<0&&a.translate(-y.left,0)}var _=o.fixedRoot;return _===void 0&&(_=!0),_&&a.translate(-(a.x+a.width/2+a.hgap),-(a.y+a.height/2+a.vgap)),a}},function(t,u,s){var h=s(7),r=18,c=r*2,n=r,i={getId:function(f){return f.id||f.name},getHGap:function(f){return f.hgap||n},getVGap:function(f){return f.vgap||n},getChildren:function(f){return f.children},getHeight:function(f){return f.height||c},getWidth:function(f){var v=f.label||" ";return f.width||v.split("").length*r}};function a(l,f){var v=this;if(v.vgap=v.hgap=0,l instanceof a)return l;v.data=l;var b=f.getHGap(l),g=f.getVGap(l);return v.width=f.getWidth(l),v.height=f.getHeight(l),v.id=f.getId(l),v.x=v.y=0,v.depth=0,v.children||(v.children=[]),v.addGap(b,g),v}h.assign(a.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(f,v){var b=this;b.hgap+=f,b.vgap+=v,b.width+=2*f,b.height+=2*v},eachNode:function(f){for(var v=this,b=[v],g;g=b.shift();)f(g),b=g.children.concat(b)},DFTraverse:function(f){this.eachNode(f)},BFTraverse:function(f){for(var v=this,b=[v],g;g=b.shift();)f(g),b=b.concat(g.children)},getBoundingBox:function(){var f={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(v){f.left=Math.min(f.left,v.x),f.top=Math.min(f.top,v.y),f.width=Math.max(f.width,v.x+v.width),f.height=Math.max(f.height,v.y+v.height)}),f},translate:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.eachNode(function(b){b.x+=f,b.y+=v})},right2left:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.x=b.x-(b.x-v.left)*2-b.width}),f.translate(v.width,0)},bottom2top:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.y=b.y-(b.y-v.top)*2-b.height}),f.translate(0,v.height)}});function o(l,f,v){f===void 0&&(f={}),f=h.assign({},i,f);var b=new a(l,f),g=[b],y;if(!v&&!l.collapsed){for(;y=g.shift();)if(!y.data.collapsed){var _=f.getChildren(y.data),M=_?_.length:0;if(y.children=new Array(M),_&&M)for(var x=0;x<M;x++){var m=new a(_[x],f);y.children[x]=m,g.push(m),m.parent=y,m.depth=y.depth+1}}}return b}t.exports=o},function(t,u,s){"use strict";var h=s(6),r=s(20);function c(n,i){var a=Object(r.a)(i),o=a.length;if(Object(h.a)(n))return!o;for(var l=0;l<o;l+=1){var f=a[l];if(i[f]!==n[f]||!(f in n))return!1}return!0}u.a=c},function(t,u,s){"use strict";var h=s(2),r=s(3),c=Object.keys?function(n){return Object.keys(n)}:function(n){var i=[];return Object(h.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(o)}),i};u.a=c},function(t,u,s){"use strict";var h=s(1),r=Array.prototype.splice,c=function(i,a){if(!Object(h.a)(i))return[];for(var o=i?a.length:0,l=o-1;o--;){var f=void 0,v=a[o];(o===l||v!==f)&&(f=v,r.call(i,v,1))}return i};u.a=c},function(t,u,s){"use strict";var h=s(12),r=s(2),c=function(i){var a=[];return Object(r.a)(i,function(o){Object(h.a)(a,o)||a.push(o)}),a};u.a=c},function(t,u,s){"use strict";var h=s(0),r=s(3),c=s(24),n=function(a,o){if(!o)return{0:a};if(!Object(r.a)(o)){var l=Object(h.a)(o)?o:o.replace(/\s+/g,"").split("*");o=function(b){for(var g="_",y=0,_=l.length;y<_;y++)g+=b[l[y]]&&b[l[y]].toString();return g}}var f=Object(c.a)(a,o);return f};u.a=n},function(t,u,s){"use strict";var h=s(2),r=s(0),c=s(3),n=Object.prototype.hasOwnProperty;function i(a,o){if(!o||!Object(r.a)(a))return{};var l={},f=Object(c.a)(o)?o:function(b){return b[o]},v;return Object(h.a)(a,function(b){v=f(b),n.call(l,v)?l[v].push(b):l[v]=[b]}),l}u.a=i},function(t,u,s){"use strict";u.a=function(h,r){return h.hasOwnProperty(r)}},function(t,u,s){"use strict";var h=s(2),r=s(3),c=Object.values?function(n){return Object.values(n)}:function(n){var i=[];return Object(h.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(a)}),i};u.a=c},function(t,u,s){"use strict";var h={}.toString,r=function(n){return h.call(n).replace(/^\[object /,"").replace(/]$/,"")};u.a=r},function(t,u,s){"use strict";var h=Object.prototype,r=function(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||h;return n===a};u.a=r},function(t,u,s){"use strict";var h=s(15),r=s(1),c=s(8),n=function i(a,o){if(a===o)return!0;if(!a||!o||Object(c.a)(a)||Object(c.a)(o))return!1;if(Object(r.a)(a)||Object(r.a)(o)){if(a.length!==o.length)return!1;for(var l=!0,f=0;f<a.length&&(l=i(a[f],o[f]),!!l);f++);return l}if(Object(h.a)(a)||Object(h.a)(o)){var v=Object.keys(a),b=Object.keys(o);if(v.length!==b.length)return!1;for(var l=!0,f=0;f<v.length&&(l=i(a[v[f]],o[v[f]]),!!l);f++);return l}return!1};u.a=n},function(t,u,s){var h=s(18);t.exports=function(r,c){for(var n=h(r.data,c,!0),i=h(r.data,c,!0),a=r.children.length,o=Math.round(a/2),l=c.getSide||function(g,y){return y<o?"right":"left"},f=0;f<a;f++){var v=r.children[f],b=l(v,f);b==="right"?i.children.push(v):n.children.push(v)}return n.eachNode(function(g){g.isRoot()||(g.side="left")}),i.eachNode(function(g){g.isRoot()||(g.side="right")}),{left:n,right:i}}},function(t,u,s){var h={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};t.exports=h},function(t,u,s){function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),c=s(113),n=s(17),i=s(7),a=function(f){h(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var y=this;return n(y.rootNode,y.options,c)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var h=s(12);s.d(u,"contains",function(){return h.a}),s.d(u,"includes",function(){return h.a});var r=s(34);s.d(u,"difference",function(){return r.a});var c=s(35);s.d(u,"find",function(){return c.a});var n=s(36);s.d(u,"findIndex",function(){return n.a});var i=s(37);s.d(u,"firstValue",function(){return i.a});var a=s(38);s.d(u,"flatten",function(){return a.a});var o=s(39);s.d(u,"flattenDeep",function(){return o.a});var l=s(40);s.d(u,"getRange",function(){return l.a});var f=s(41);s.d(u,"pull",function(){return f.a});var v=s(21);s.d(u,"pullAt",function(){return v.a});var b=s(42);s.d(u,"reduce",function(){return b.a});var g=s(43);s.d(u,"remove",function(){return g.a});var y=s(44);s.d(u,"sortBy",function(){return y.a});var _=s(45);s.d(u,"union",function(){return _.a});var M=s(22);s.d(u,"uniq",function(){return M.a});var x=s(46);s.d(u,"valuesOfKey",function(){return x.a});var m=s(47);s.d(u,"head",function(){return m.a});var S=s(48);s.d(u,"last",function(){return S.a});var P=s(49);s.d(u,"startsWith",function(){return P.a});var A=s(50);s.d(u,"endsWith",function(){return A.a});var O=s(14);s.d(u,"filter",function(){return O.a});var R=s(51);s.d(u,"every",function(){return R.a});var H=s(52);s.d(u,"some",function(){return H.a});var N=s(53);s.d(u,"group",function(){return N.a});var K=s(24);s.d(u,"groupBy",function(){return K.a});var V=s(23);s.d(u,"groupToMap",function(){return V.a});var k=s(54);s.d(u,"getWrapBehavior",function(){return k.a});var Z=s(55);s.d(u,"wrapBehavior",function(){return Z.a});var X=s(56);s.d(u,"number2color",function(){return X.a});var at=s(57);s.d(u,"parseRadius",function(){return at.a});var pt=s(58);s.d(u,"clamp",function(){return pt.a});var gt=s(59);s.d(u,"fixedBase",function(){return gt.a});var ft=s(60);s.d(u,"isDecimal",function(){return ft.a});var Rt=s(61);s.d(u,"isEven",function(){return Rt.a});var Nt=s(62);s.d(u,"isInteger",function(){return Nt.a});var Dt=s(63);s.d(u,"isNegative",function(){return Dt.a});var St=s(64);s.d(u,"isNumberEqual",function(){return St.a});var xt=s(65);s.d(u,"isOdd",function(){return xt.a});var Ot=s(66);s.d(u,"isPositive",function(){return Ot.a});var it=s(67);s.d(u,"maxBy",function(){return it.a});var At=s(68);s.d(u,"minBy",function(){return At.a});var z=s(69);s.d(u,"mod",function(){return z.a});var q=s(70);s.d(u,"toDegree",function(){return q.a});var mt=s(71);s.d(u,"toInteger",function(){return mt.a});var et=s(72);s.d(u,"toRadian",function(){return et.a});var st=s(73);s.d(u,"forIn",function(){return st.a});var bt=s(25);s.d(u,"has",function(){return bt.a});var Y=s(74);s.d(u,"hasKey",function(){return Y.a});var rt=s(75);s.d(u,"hasValue",function(){return rt.a});var ot=s(20);s.d(u,"keys",function(){return ot.a});var $=s(19);s.d(u,"isMatch",function(){return $.a});var Pt=s(26);s.d(u,"values",function(){return Pt.a});var yt=s(76);s.d(u,"lowerCase",function(){return yt.a});var Ft=s(77);s.d(u,"lowerFirst",function(){return Ft.a});var Qt=s(78);s.d(u,"substitute",function(){return Qt.a});var ne=s(79);s.d(u,"upperCase",function(){return ne.a});var Wt=s(80);s.d(u,"upperFirst",function(){return Wt.a});var $t=s(27);s.d(u,"getType",function(){return $t.a});var De=s(81);s.d(u,"isArguments",function(){return De.a});var Je=s(0);s.d(u,"isArray",function(){return Je.a});var Qe=s(1);s.d(u,"isArrayLike",function(){return Qe.a});var de=s(82);s.d(u,"isBoolean",function(){return de.a});var ue=s(83);s.d(u,"isDate",function(){return ue.a});var Ne=s(84);s.d(u,"isError",function(){return Ne.a});var cn=s(3);s.d(u,"isFunction",function(){return cn.a});var Fn=s(85);s.d(u,"isFinite",function(){return Fn.a});var wn=s(6);s.d(u,"isNil",function(){return wn.a});var en=s(86);s.d(u,"isNull",function(){return en.a});var tn=s(5);s.d(u,"isNumber",function(){return tn.a});var xn=s(13);s.d(u,"isObject",function(){return xn.a});var Bn=s(15);s.d(u,"isObjectLike",function(){return Bn.a});var vr=s(9);s.d(u,"isPlainObject",function(){return vr.a});var li=s(28);s.d(u,"isPrototype",function(){return li.a});var Me=s(87);s.d(u,"isRegExp",function(){return Me.a});var Pe=s(8);s.d(u,"isString",function(){return Pe.a});var te=s(4);s.d(u,"isType",function(){return te.a});var ge=s(88);s.d(u,"isUndefined",function(){return ge.a});var Ht=s(89);s.d(u,"isElement",function(){return Ht.a});var re=s(90);s.d(u,"requestAnimationFrame",function(){return re.a});var Te=s(91);s.d(u,"clearAnimationFrame",function(){return Te.a});var ae=s(92);s.d(u,"augment",function(){return ae.a});var xe=s(93);s.d(u,"clone",function(){return xe.a});var qe=s(94);s.d(u,"debounce",function(){return qe.a});var zn=s(95);s.d(u,"memoize",function(){return zn.a});var ar=s(96);s.d(u,"deepMix",function(){return ar.a});var _n=s(2);s.d(u,"each",function(){return _n.a});var Cn=s(97);s.d(u,"extend",function(){return Cn.a});var Or=s(98);s.d(u,"indexOf",function(){return Or.a});var Ar=s(99);s.d(u,"isEmpty",function(){return Ar.a});var hn=s(29);s.d(u,"isEqual",function(){return hn.a});var Pr=s(100);s.d(u,"isEqualWith",function(){return Pr.a});var yr=s(101);s.d(u,"map",function(){return yr.a});var Re=s(102);s.d(u,"mapValues",function(){return Re.a});var We=s(16);s.d(u,"mix",function(){return We.a}),s.d(u,"assign",function(){return We.a});var Ye=s(103);s.d(u,"get",function(){return Ye.a});var dn=s(104);s.d(u,"set",function(){return dn.a});var En=s(105);s.d(u,"pick",function(){return En.a});var Dn=s(106);s.d(u,"throttle",function(){return Dn.a});var Sn=s(107);s.d(u,"toArray",function(){return Sn.a});var Nn=s(10);s.d(u,"toString",function(){return Nn.a});var nr=s(108);s.d(u,"uniqueId",function(){return nr.a});var Gn=s(109);s.d(u,"noop",function(){return Gn.a});var Tn=s(110);s.d(u,"identity",function(){return Tn.a});var Cr=s(111);s.d(u,"size",function(){return Cr.a});var pr=s(112);s.d(u,"Cache",function(){return pr.a})},function(t,u,s){"use strict";var h=s(14),r=s(12),c=function(i,a){return a===void 0&&(a=[]),Object(h.a)(i,function(o){return!Object(r.a)(a,o)})};u.a=c},function(t,u,s){"use strict";var h=s(3),r=s(19),c=s(0),n=s(9);function i(a,o){if(!Object(c.a)(a))return null;var l;if(Object(h.a)(o)&&(l=o),Object(n.a)(o)&&(l=function(b){return Object(r.a)(b,o)}),l){for(var f=0;f<a.length;f+=1)if(l(a[f]))return a[f]}return null}u.a=i},function(t,u,s){"use strict";function h(r,c,n){n===void 0&&(n=0);for(var i=n;i<r.length;i++)if(c(r[i],i))return i;return-1}u.a=h},function(t,u,s){"use strict";var h=s(6),r=s(0),c=function(i,a){for(var o=null,l=0;l<i.length;l++){var f=i[l],v=f[a];if(!Object(h.a)(v)){Object(r.a)(v)?o=v[0]:o=v;break}}return o};u.a=c},function(t,u,s){"use strict";var h=s(0),r=function(n){if(!Object(h.a)(n))return[];for(var i=[],a=0;a<n.length;a++)i=i.concat(n[a]);return i};u.a=r},function(t,u,s){"use strict";var h=s(0),r=function c(n,i){if(i===void 0&&(i=[]),!Object(h.a)(n))i.push(n);else for(var a=0;a<n.length;a+=1)c(n[a],i);return i};u.a=r},function(t,u,s){"use strict";var h=s(0),r=s(14),c=function(i){if(i=Object(r.a)(i,function(v){return!isNaN(v)}),!i.length)return{min:0,max:0};if(Object(h.a)(i[0])){for(var a=[],o=0;o<i.length;o++)a=a.concat(i[o]);i=a}var l=Math.max.apply(null,i),f=Math.min.apply(null,i);return{min:f,max:l}};u.a=c},function(t,u,s){"use strict";var h=Array.prototype,r=h.splice,c=h.indexOf,n=function(a){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];for(var f=0;f<o.length;f++)for(var v=o[f],b=-1;(b=c.call(a,v))>-1;)r.call(a,b,1);return a};u.a=n},function(t,u,s){"use strict";var h=s(2),r=s(0),c=s(9),n=function(a,o,l){if(!Object(r.a)(a)&&!Object(c.a)(a))return a;var f=l;return Object(h.a)(a,function(v,b){f=o(f,v,b)}),f};u.a=n},function(t,u,s){"use strict";var h=s(1),r=s(21),c=function(i,a){var o=[];if(!Object(h.a)(i))return o;for(var l=-1,f=[],v=i.length;++l<v;){var b=i[l];a(b,l,i)&&(o.push(b),f.push(l))}return Object(r.a)(i,f),o};u.a=c},function(t,u,s){"use strict";var h=s(0),r=s(8),c=s(3);function n(i,a){var o;if(Object(c.a)(a))o=function(v,b){return a(v)-a(b)};else{var l=[];Object(r.a)(a)?l.push(a):Object(h.a)(a)&&(l=a),o=function(v,b){for(var g=0;g<l.length;g+=1){var y=l[g];if(v[y]>b[y])return 1;if(v[y]<b[y])return-1}return 0}}return i.sort(o),i}u.a=n},function(t,u,s){"use strict";var h=s(22),r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Object(h.a)([].concat.apply([],n))};u.a=r},function(t,u,s){"use strict";var h=s(2),r=s(0),c=s(6);u.a=function(n,i){var a=[],o={};return n.forEach(function(l){var f=l[i];Object(c.a)(f)||(Object(r.a)(f)||(f=[f]),Object(h.a)(f,function(v){o[v]||(a.push(v),o[v]=!0)}))}),a}},function(t,u,s){"use strict";u.a=r;var h=s(1);function r(c){if(Object(h.a)(c))return c[0]}},function(t,u,s){"use strict";u.a=r;var h=s(1);function r(c){if(Object(h.a)(c)){var n=c;return n[n.length-1]}}},function(t,u,s){"use strict";var h=s(0),r=s(8);function c(n,i){return Object(h.a)(n)||Object(r.a)(n)?n[0]===i:!1}u.a=c},function(t,u,s){"use strict";var h=s(0),r=s(8);function c(n,i){return Object(h.a)(n)||Object(r.a)(n)?n[n.length-1]===i:!1}u.a=c},function(t,u,s){"use strict";var h=function(c,n){for(var i=0;i<c.length;i++)if(!n(c[i],i))return!1;return!0};u.a=h},function(t,u,s){"use strict";var h=function(c,n){for(var i=0;i<c.length;i++)if(n(c[i],i))return!0;return!1};u.a=h},function(t,u,s){"use strict";var h=s(23);u.a=function(r,c){if(!c)return[r];var n=Object(h.a)(r,c),i=[];for(var a in n)i.push(n[a]);return i}},function(t,u,s){"use strict";function h(r,c){return r["_wrap_"+c]}u.a=h},function(t,u,s){"use strict";function h(r,c){if(r["_wrap_"+c])return r["_wrap_"+c];var n=function(a){r[c](a)};return r["_wrap_"+c]=n,n}u.a=h},function(t,u,s){"use strict";var h={};function r(c){var n=h[c];if(!n){for(var i=c.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,h[c]=n}return n}u.a=r},function(t,u,s){"use strict";var h=s(0);function r(c){var n=0,i=0,a=0,o=0;return Object(h.a)(c)?c.length===1?n=i=a=o=c[0]:c.length===2?(n=a=c[0],i=o=c[1]):c.length===3?(n=c[0],i=o=c[1],a=c[2]):(n=c[0],i=c[1],a=c[2],o=c[3]):n=i=a=o=c,{r1:n,r2:i,r3:a,r4:o}}u.a=r},function(t,u,s){"use strict";var h=function(c,n,i){return c<n?n:c>i?i:c};u.a=h},function(t,u,s){"use strict";var h=function(c,n){var i=n.toString(),a=i.indexOf(".");if(a===-1)return Math.round(c);var o=i.substr(a+1).length;return o>20&&(o=20),parseFloat(c.toFixed(o))};u.a=h},function(t,u,s){"use strict";var h=s(5),r=function(n){return Object(h.a)(n)&&n%1!=0};u.a=r},function(t,u,s){"use strict";var h=s(5),r=function(n){return Object(h.a)(n)&&n%2==0};u.a=r},function(t,u,s){"use strict";var h=s(5),r=Number.isInteger?Number.isInteger:function(c){return Object(h.a)(c)&&c%1==0};u.a=r},function(t,u,s){"use strict";var h=s(5),r=function(n){return Object(h.a)(n)&&n<0};u.a=r},function(t,u,s){"use strict";u.a=r;var h=1e-5;function r(c,n,i){return i===void 0&&(i=h),Math.abs(c-n)<i}},function(t,u,s){"use strict";var h=s(5),r=function(n){return Object(h.a)(n)&&n%2!=0};u.a=r},function(t,u,s){"use strict";var h=s(5),r=function(n){return Object(h.a)(n)&&n>0};u.a=r},function(t,u,s){"use strict";var h=s(2),r=s(0),c=s(3);u.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(c.a)(i)?o=i(n[0]):o=n[0][i];var l;return Object(h.a)(n,function(f){Object(c.a)(i)?l=i(f):l=f[i],l>o&&(a=f,o=l)}),a}}},function(t,u,s){"use strict";var h=s(2),r=s(0),c=s(3);u.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(c.a)(i)?o=i(n[0]):o=n[0][i];var l;return Object(h.a)(n,function(f){Object(c.a)(i)?l=i(f):l=f[i],l<o&&(a=f,o=l)}),a}}},function(t,u,s){"use strict";var h=function(c,n){return(c%n+n)%n};u.a=h},function(t,u,s){"use strict";var h=180/Math.PI,r=function(n){return h*n};u.a=r},function(t,u,s){"use strict";u.a=parseInt},function(t,u,s){"use strict";var h=Math.PI/180,r=function(n){return h*n};u.a=r},function(t,u,s){"use strict";var h=s(2);u.a=h.a},function(t,u,s){"use strict";var h=s(25);u.a=h.a},function(t,u,s){"use strict";var h=s(12),r=s(26);u.a=function(c,n){return Object(h.a)(Object(r.a)(c),n)}},function(t,u,s){"use strict";var h=s(10),r=function(n){return Object(h.a)(n).toLowerCase()};u.a=r},function(t,u,s){"use strict";var h=s(10),r=function(n){var i=Object(h.a)(n);return i.charAt(0).toLowerCase()+i.substring(1)};u.a=r},function(t,u,s){"use strict";function h(r,c){return!r||!c?r:r.replace(/\\?\{([^{}]+)\}/g,function(n,i){return n.charAt(0)==="\\"?n.slice(1):c[i]===void 0?"":c[i]})}u.a=h},function(t,u,s){"use strict";var h=s(10),r=function(n){return Object(h.a)(n).toUpperCase()};u.a=r},function(t,u,s){"use strict";var h=s(10),r=function(n){var i=Object(h.a)(n);return i.charAt(0).toUpperCase()+i.substring(1)};u.a=r},function(t,u,s){"use strict";var h=s(4),r=function(n){return Object(h.a)(n,"Arguments")};u.a=r},function(t,u,s){"use strict";var h=s(4),r=function(n){return Object(h.a)(n,"Boolean")};u.a=r},function(t,u,s){"use strict";var h=s(4),r=function(n){return Object(h.a)(n,"Date")};u.a=r},function(t,u,s){"use strict";var h=s(4),r=function(n){return Object(h.a)(n,"Error")};u.a=r},function(t,u,s){"use strict";var h=s(5);u.a=function(r){return Object(h.a)(r)&&isFinite(r)}},function(t,u,s){"use strict";var h=function(c){return c===null};u.a=h},function(t,u,s){"use strict";var h=s(4),r=function(n){return Object(h.a)(n,"RegExp")};u.a=r},function(t,u,s){"use strict";var h=function(c){return c===void 0};u.a=h},function(t,u,s){"use strict";var h=function(c){return c instanceof Element||c instanceof HTMLDocument};u.a=h},function(t,u,s){"use strict";u.a=h;function h(r){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return setTimeout(n,16)};return c(r)}},function(t,u,s){"use strict";u.a=h;function h(r){var c=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;c(r)}},function(t,u,s){"use strict";var h=s(16),r=s(3),c=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o=i[0],l=1;l<i.length;l++){var f=i[l];Object(r.a)(f)&&(f=f.prototype),Object(h.a)(o.prototype,f)}};u.a=c},function(t,u,s){"use strict";var h=s(0),r=function c(n){if(typeof n!="object"||n===null)return n;var i;if(Object(h.a)(n)){i=[];for(var a=0,o=n.length;a<o;a++)typeof n[a]=="object"&&n[a]!=null?i[a]=c(n[a]):i[a]=n[a]}else{i={};for(var l in n)typeof n[l]=="object"&&n[l]!=null?i[l]=c(n[l]):i[l]=n[l]}return i};u.a=r},function(t,u,s){"use strict";function h(r,c,n){var i;return function(){var a=this,o=arguments,l=function(){i=null,n||r.apply(a,o)},f=n&&!i;clearTimeout(i),i=setTimeout(l,c),f&&r.apply(a,o)}}u.a=h},function(t,u,s){"use strict";var h=s(3);u.a=function(r,c){if(!Object(h.a)(r))throw new TypeError("Expected a function");var n=function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var l=c?c.apply(this,a):a[0],f=i.cache;if(f.has(l))return f.get(l);var v=r.apply(this,a);return f.set(l,v),v};return n.cache=new Map,n}},function(t,u,s){"use strict";var h=s(0),r=s(9),c=5;function n(a,o,l,f){l=l||0,f=f||c;for(var v in o)if(o.hasOwnProperty(v)){var b=o[v];b!==null&&Object(r.a)(b)?(Object(r.a)(a[v])||(a[v]={}),l<f?n(a[v],b,l+1,f):a[v]=o[v]):Object(h.a)(b)?(a[v]=[],a[v]=a[v].concat(b)):b!==void 0&&(a[v]=b)}}var i=function(o){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];for(var v=0;v<l.length;v+=1)n(o,l[v]);return o};u.a=i},function(t,u,s){"use strict";var h=s(16),r=s(3),c=function(i,a,o,l){Object(r.a)(a)||(o=a,a=i,i=function(){});var f=Object.create?function(b,g){return Object.create(b,{constructor:{value:g}})}:function(b,g){function y(){}y.prototype=b;var _=new y;return _.constructor=g,_},v=f(a.prototype,i);return i.prototype=Object(h.a)(v,i.prototype),i.superclass=f(a.prototype,a),Object(h.a)(v,o),Object(h.a)(i,l),i};u.a=c},function(t,u,s){"use strict";var h=s(1),r=function(n,i){if(!Object(h.a)(n))return-1;var a=Array.prototype.indexOf;if(a)return a.call(n,i);for(var o=-1,l=0;l<n.length;l++)if(n[l]===i){o=l;break}return o};u.a=r},function(t,u,s){"use strict";var h=s(6),r=s(1),c=s(27),n=s(28),i=Object.prototype.hasOwnProperty;function a(o){if(Object(h.a)(o))return!0;if(Object(r.a)(o))return!o.length;var l=Object(c.a)(o);if(l==="Map"||l==="Set")return!o.size;if(Object(n.a)(o))return!Object.keys(o).length;for(var f in o)if(i.call(o,f))return!1;return!0}u.a=a},function(t,u,s){"use strict";var h=s(3),r=s(29);u.a=function(c,n,i){return Object(h.a)(i)?!!i(c,n):Object(r.a)(c,n)}},function(t,u,s){"use strict";var h=s(2),r=s(1),c=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(h.a)(i,function(l,f){o.push(a(l,f))}),o};u.a=c},function(t,u,s){"use strict";var h=s(6),r=s(13),c=function(i){return i};u.a=function(n,i){i===void 0&&(i=c);var a={};return Object(r.a)(n)&&!Object(h.a)(n)&&Object.keys(n).forEach(function(o){a[o]=i(n[o],o)}),a}},function(t,u,s){"use strict";var h=s(8);u.a=function(r,c,n){for(var i=0,a=Object(h.a)(c)?c.split("."):c;r&&i<a.length;)r=r[a[i++]];return r===void 0||i<a.length?n:r}},function(t,u,s){"use strict";var h=s(13),r=s(8),c=s(5);u.a=function(n,i,a){var o=n,l=Object(r.a)(i)?i.split("."):i;return l.forEach(function(f,v){v<l.length-1?(Object(h.a)(o[f])||(o[f]=Object(c.a)(l[v+1])?[]:{}),o=o[f]):o[f]=a}),n}},function(t,u,s){"use strict";var h=s(2),r=s(9),c=Object.prototype.hasOwnProperty;u.a=function(n,i){if(n===null||!Object(r.a)(n))return{};var a={};return Object(h.a)(i,function(o){c.call(n,o)&&(a[o]=n[o])}),a}},function(t,u,s){"use strict";u.a=function(h,r,c){var n,i,a,o,l=0;c||(c={});var f=function(){l=c.leading===!1?0:Date.now(),n=null,o=h.apply(i,a),n||(i=a=null)},v=function(){var g=Date.now();!l&&c.leading===!1&&(l=g);var y=r-(g-l);return i=this,a=arguments,y<=0||y>r?(n&&(clearTimeout(n),n=null),l=g,o=h.apply(i,a),n||(i=a=null)):!n&&c.trailing!==!1&&(n=setTimeout(f,y)),o};return v.cancel=function(){clearTimeout(n),l=0,n=i=a=null},v}},function(t,u,s){"use strict";var h=s(1);u.a=function(r){return Object(h.a)(r)?Array.prototype.slice.call(r):[]}},function(t,u,s){"use strict";var h={};u.a=function(r){return r=r||"g",h[r]?h[r]+=1:h[r]=1,r+h[r]}},function(t,u,s){"use strict";u.a=function(){}},function(t,u,s){"use strict";u.a=function(h){return h}},function(t,u,s){"use strict";u.a=c;var h=s(6),r=s(1);function c(n){return Object(h.a)(n)?0:Object(r.a)(n)?n.length:Object.keys(n).length}},function(t,u,s){"use strict";var h=function(){function r(){this.map={}}return r.prototype.has=function(c){return this.map[c]!==void 0},r.prototype.get=function(c,n){var i=this.map[c];return i===void 0?n:i},r.prototype.set=function(c,n){this.map[c]=n},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(c){delete this.map[c]},r.prototype.size=function(){return Object.keys(this.map).length},r}();u.a=h},function(t,u){function s(a,o,l,f){f===void 0&&(f=[]);var v=this;v.w=a||0,v.h=o||0,v.y=l||0,v.x=0,v.c=f||[],v.cs=f.length,v.prelim=0,v.mod=0,v.shift=0,v.change=0,v.tl=null,v.tr=null,v.el=null,v.er=null,v.msel=0,v.mser=0}s.fromNode=function(a,o){if(!a)return null;var l=[];return a.children.forEach(function(f){l.push(s.fromNode(f,o))}),o?new s(a.height,a.width,a.x,l):new s(a.width,a.height,a.y,l)};function h(a,o,l){l?a.y+=o:a.x+=o,a.children.forEach(function(f){h(f,o,l)})}function r(a,o){var l=o?a.y:a.x;return a.children.forEach(function(f){l=Math.min(r(f,o),l)}),l}function c(a,o){var l=r(a,o);h(a,-l,o)}function n(a,o,l){l?o.y=a.x:o.x=a.x,a.c.forEach(function(f,v){n(f,o.children[v],l)})}function i(a,o,l){l===void 0&&(l=0),o?(a.x=l,l+=a.width):(a.y=l,l+=a.height),a.children.forEach(function(f){i(f,o,l)})}t.exports=function(a,o){o===void 0&&(o={});var l=o.isHorizontal;function f(N){if(N.cs===0){v(N);return}f(N.c[0]);for(var K=R(M(N.c[0].el),0,null),V=1;V<N.cs;++V){f(N.c[V]);var k=M(N.c[V].er);b(N,V,K),K=R(k,V,K)}S(N),v(N)}function v(N){N.cs===0?(N.el=N,N.er=N,N.msel=N.mser=0):(N.el=N.c[0].el,N.msel=N.c[0].msel,N.er=N.c[N.cs-1].er,N.mser=N.c[N.cs-1].mser)}function b(N,K,V){for(var k=N.c[K-1],Z=k.mod,X=N.c[K],at=X.mod;k!==null&&X!==null;){M(k)>V.low&&(V=V.nxt);var pt=Z+k.prelim+k.w-(at+X.prelim);pt>0&&(at+=pt,g(N,K,V.index,pt));var gt=M(k),ft=M(X);gt<=ft&&(k=_(k),k!==null&&(Z+=k.mod)),gt>=ft&&(X=y(X),X!==null&&(at+=X.mod))}!k&&!!X?x(N,K,X,at):!!k&&!X&&m(N,K,k,Z)}function g(N,K,V,k){N.c[K].mod+=k,N.c[K].msel+=k,N.c[K].mser+=k,A(N,K,V,k)}function y(N){return N.cs===0?N.tl:N.c[0]}function _(N){return N.cs===0?N.tr:N.c[N.cs-1]}function M(N){return N.y+N.h}function x(N,K,V,k){var Z=N.c[0].el;Z.tl=V;var X=k-V.mod-N.c[0].msel;Z.mod+=X,Z.prelim-=X,N.c[0].el=N.c[K].el,N.c[0].msel=N.c[K].msel}function m(N,K,V,k){var Z=N.c[K].er;Z.tr=V;var X=k-V.mod-N.c[K].mser;Z.mod+=X,Z.prelim-=X,N.c[K].er=N.c[K-1].er,N.c[K].mser=N.c[K-1].mser}function S(N){N.prelim=(N.c[0].prelim+N.c[0].mod+N.c[N.cs-1].mod+N.c[N.cs-1].prelim+N.c[N.cs-1].w)/2-N.w/2}function P(N,K){K+=N.mod,N.x=N.prelim+K,O(N);for(var V=0;V<N.cs;V++)P(N.c[V],K)}function A(N,K,V,k){if(V!==K-1){var Z=K-V;N.c[V+1].shift+=k/Z,N.c[K].shift-=k/Z,N.c[K].change-=k-k/Z}}function O(N){for(var K=0,V=0,k=0;k<N.cs;k++)K+=N.c[k].shift,V+=K+N.c[k].change,N.c[k].mod+=V}function R(N,K,V){for(;V!==null&&N>=V.low;)V=V.nxt;return{low:N,index:K,nxt:V}}i(a,l);var H=s.fromNode(a,l);return f(H),P(H,0),n(H,a,l),c(a,l),a}},function(t,u,s){function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),c=s(115),n=s(17),i=s(7),a=function(f){h(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var y=this;return y.rootNode.width=0,n(y.rootNode,y.options,c)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){var h=s(7);function r(i,a){i===void 0&&(i=0),a===void 0&&(a=[]);var o=this;o.x=o.y=0,o.leftChild=o.rightChild=null,o.height=0,o.children=a}var c={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function n(i,a,o){o?(a.x=i.x,a.y=i.y):(a.x=i.y,a.y=i.x),i.children.forEach(function(l,f){n(l,a.children[f],o)})}t.exports=function(i,a){a===void 0&&(a={}),a=h.assign({},c,a);var o=0;function l(y){if(!y)return null;y.width=0,y.depth&&y.depth>o&&(o=y.depth);var _=y.children,M=_.length,x=new r(y.height,[]);return _.forEach(function(m,S){var P=l(m);x.children.push(P),S===0&&(x.leftChild=P),S===M-1&&(x.rightChild=P)}),x.originNode=y,x.isLeaf=y.isLeaf(),x}function f(y){if(y.isLeaf||y.children.length===0)y.drawingDepth=o;else{var _=y.children.map(function(x){return f(x)}),M=Math.min.apply(null,_);y.drawingDepth=M-1}return y.drawingDepth}var v;function b(y){y.x=y.drawingDepth*a.rankSep,y.isLeaf?(y.y=0,v&&(y.y=v.y+v.height+a.nodeSep,y.originNode.parent!==v.originNode.parent&&(y.y+=a.subTreeSep)),v=y):(y.children.forEach(function(_){b(_)}),y.y=(y.leftChild.y+y.rightChild.y)/2)}var g=l(i);return f(g),b(g),n(g,i,a.isHorizontal),i}},function(t,u,s){function h(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var r=s(11),c=s(117),n=s(30),i=s(7),a=["LR","RL","H"],o=a[0],l=function(b){h(g,b);function g(){return b.apply(this,arguments)||this}var y=g.prototype;return y.execute=function(){var M=this,x=M.options,m=M.rootNode;x.isHorizontal=!0;var S=x.indent,P=S===void 0?20:S,A=x.dropCap,O=A===void 0?!0:A,R=x.direction||o;if(R&&a.indexOf(R)===-1)throw new TypeError("Invalid direction: "+R);if(R===a[0])c(m,P,O);else if(R===a[1])c(m,P,O),m.right2left();else if(R===a[2]){var H=n(m,x),N=H.left,K=H.right;c(N,P,O),N.right2left(),c(K,P,O);var V=N.getBoundingBox();K.translate(V.width,0),m.x=K.x-m.width/2}return m},g}(r),f={};function v(b,g){return g=i.assign({},f,g),new l(b,g).execute()}t.exports=v},function(t,u){function s(h,r,c,n){if(!n)try{if(h.id===h.parent.children[0].id){h.x+=c*h.depth,h.y=r?r.y:0;return}}catch(i){}h.x+=c*h.depth,h.y=r?r.y+r.height:0}t.exports=function(h,r,c){var n=null;h.eachNode(function(i){s(i,n,r,c),n=i})}},function(t,u,s){function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),c=s(119),n=s(17),i=s(7),a=function(f){h(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var y=this;return n(y.rootNode,y.options,c)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){var h=s(7);function r(i,a){var o=0;return i.children.length?i.children.forEach(function(l){o+=r(l,a)}):o=i.height,i._subTreeSep=a.getSubTreeSep(i.data),i.totalHeight=Math.max(i.height,o)+2*i._subTreeSep,i.totalHeight}function c(i){var a=i.children,o=a.length;if(o){a.forEach(function(y){c(y)});var l=a[0],f=a[o-1],v=f.y-l.y+f.height,b=0;if(a.forEach(function(y){b+=y.totalHeight}),v>i.height)i.y=l.y+v/2-i.height/2;else if(a.length!==1||i.height>b){var g=i.y+(i.height-v)/2-l.y;a.forEach(function(y){y.translate(0,g)})}else i.y=(l.y+l.height/2+f.y+f.height/2)/2-i.height/2}}var n={getSubTreeSep:function(){return 0}};t.exports=function(i,a){a===void 0&&(a={}),a=h.assign({},n,a),i.parent={x:0,width:0,height:0,y:0},i.BFTraverse(function(o){o.x=o.parent.x+o.parent.width}),i.parent=null,r(i,a),i.startY=0,i.y=i.totalHeight/2-i.height/2,i.eachNode(function(o){var l=o.children,f=l.length;if(f){var v=l[0];if(v.startY=o.startY+o._subTreeSep,f===1)v.y=o.y+o.height/2-v.height/2;else{v.y=v.startY+v.totalHeight/2-v.height/2;for(var b=1;b<f;b++){var g=l[b];g.startY=l[b-1].startY+l[b-1].totalHeight,g.y=g.startY+g.totalHeight/2-g.height/2}}}}),c(i)}}])})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(){for(var r=[],c=0;c<arguments.length;c++)r[c]=arguments[c];for(var n=r[0],i=1;i<r.length;i++){var a=r[i];u.default(a)&&(a=a.prototype),t.default(n.prototype,a)}};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function u(){this.map={}}return u.prototype.has=function(s){return this.map[s]!==void 0},u.prototype.get=function(s,h){var r=this.map[s];return r===void 0?h:r},u.prototype.set=function(s,h){this.map[s]=h},u.prototype.clear=function(){this.map={}},u.prototype.delete=function(s){delete this.map[s]},u.prototype.size=function(){return Object.keys(this.map).length},u}();T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,h,r){return s<h?h:s>r?r:s};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(u)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function s(h){if(typeof h!="object"||h===null)return h;var r;if(t.default(h)){r=[];for(var c=0,n=h.length;c<n;c++)typeof h[c]=="object"&&h[c]!=null?r[c]=s(h[c]):r[c]=h[c]}else{r={};for(var i in h)typeof h[i]=="object"&&h[i]!=null?r[i]=s(h[i]):r[i]=h[i]}return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(h,r){return t.default(h)?h.indexOf(r)>-1:!1};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s,h){var r;return function(){var c=this,n=arguments,i=function(){r=null,h||u.apply(c,n)},a=h&&!r;clearTimeout(r),r=setTimeout(i,s),a&&u.apply(c,n)}}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=5;function h(c,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];l!==null&&u.default(l)?(u.default(c[o])||(c[o]={}),i<a?h(c[o],l,i+1,a):c[o]=n[o]):t.default(l)?(c[o]=[],c[o]=c[o].concat(l)):l!==void 0&&(c[o]=l)}}var r=function(n){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];for(var o=0;o<i.length;o+=1)h(n,i[o]);return n};T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),s=function(r,c){return c===void 0&&(c=[]),t.default(r,function(n){return!u.default(c,n)})};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");function s(h,r){if(!!h){var c;if(t.default(h))for(var n=0,i=h.length;n<i&&(c=r(h[n],n),c!==!1);n++);else if(u.default(h)){for(var a in h)if(h.hasOwnProperty(a)&&(c=r(h[a],a),c===!1))break}}}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(h,r){return t.default(h)||u.default(h)?h[h.length-1]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,h){for(var r=0;r<s.length;r++)if(!h(s[r],r))return!1;return!0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(r,c,n,i){u.default(c)||(n=c,c=r,r=function(){});var a=Object.create?function(l,f){return Object.create(l,{constructor:{value:f}})}:function(l,f){function v(){}v.prototype=l;var b=new v;return b.constructor=f,b},o=a(c.prototype,r);return r.prototype=t.default(o,r.prototype),r.superclass=a(c.prototype,c),t.default(o,n),t.default(r,i),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(h,r){if(!t.default(h))return h;for(var c=[],n=0;n<h.length;n++){var i=h[n];r(i,n)&&c.push(i)}return c};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s,h){h===void 0&&(h=0);for(var r=h;r<u.length;r++)if(s(u[r],r))return r;return-1}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),h=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");function r(c,n){if(!s.default(c))return null;var i;if(t.default(n)&&(i=n),h.default(n)&&(i=function(l){return u.default(l,n)}),i){for(var a=0;a<c.length;a+=1)if(i(c[a]))return c[a]}return null}T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=function(r,c){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[c];if(!t.default(o)){u.default(o)?n=o[0]:n=o;break}}return n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,h){var r=h.toString(),c=r.indexOf(".");if(c===-1)return Math.round(s);var n=r.substr(c+1).length;return n>20&&(n=20),parseFloat(s.toFixed(n))};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function s(h,r){if(r===void 0&&(r=[]),!t.default(h))r.push(h);else for(var c=0;c<h.length;c+=1)s(h[c],r);return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function(h){if(!t.default(h))return[];for(var r=[],c=0;c<h.length;c++)r=r.concat(h[c]);return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function(h){var r=h.filter(function(o){return!isNaN(o)});if(!r.length)return{min:0,max:0};if(t.default(h[0])){for(var c=[],n=0;n<h.length;n++)c=c.concat(h[n]);r=c}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,u=function(h){return t.call(h).replace(/^\[object /,"").replace(/]$/,"")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){return u["_wrap_"+s]}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");T.default=function(u,s,h){for(var r=0,c=t.default(s)?s.split("."):s;u&&r<c.length;)u=u[c[r++]];return u===void 0||r<c.length?h:u}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.prototype.hasOwnProperty;function h(r,c){if(!c||!t.default(r))return{};for(var n={},i=u.default(c)?c:function(f){return f[c]},a,o=0;o<r.length;o++){var l=r[o];a=i(l),s.call(n,a)?n[a].push(l):n[a]=[l]}return n}T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js"),h=function(c,n){if(!n)return{0:c};if(!u.default(n)){var i=t.default(n)?n:n.replace(/\s+/g,"").split("*");n=function(l){for(var f="_",v=0,b=i.length;v<b;v++)f+=l[i[v]]&&l[i[v]].toString();return f}}var a=s.default(c,n);return a};T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");T.default=function(u,s){if(!s)return[u];var h=t.default(u,s),r=[];for(var c in h)r.push(h[c]);return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");T.default=function(s,h){return t.default(u.default(s),h)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,u){return t.hasOwnProperty(u)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function u(s){if(t.default(s))return s[0]}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){return t}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(h,r){if(!t.default(h))return-1;var c=Array.prototype.indexOf;if(c)return c.call(h,r);for(var n=-1,i=0;i<h.length;i++)if(h[i]===r){n=i;break}return n};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js");Object.defineProperty(T,"contains",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(T,"includes",{enumerable:!0,get:function(){return t.default}});var u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js");Object.defineProperty(T,"difference",{enumerable:!0,get:function(){return u.default}});var s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js");Object.defineProperty(T,"find",{enumerable:!0,get:function(){return s.default}});var h=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js");Object.defineProperty(T,"findIndex",{enumerable:!0,get:function(){return h.default}});var r=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js");Object.defineProperty(T,"firstValue",{enumerable:!0,get:function(){return r.default}});var c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js");Object.defineProperty(T,"flatten",{enumerable:!0,get:function(){return c.default}});var n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js");Object.defineProperty(T,"flattenDeep",{enumerable:!0,get:function(){return n.default}});var i=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js");Object.defineProperty(T,"getRange",{enumerable:!0,get:function(){return i.default}});var a=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js");Object.defineProperty(T,"pull",{enumerable:!0,get:function(){return a.default}});var o=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js");Object.defineProperty(T,"pullAt",{enumerable:!0,get:function(){return o.default}});var l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js");Object.defineProperty(T,"reduce",{enumerable:!0,get:function(){return l.default}});var f=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js");Object.defineProperty(T,"remove",{enumerable:!0,get:function(){return f.default}});var v=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js");Object.defineProperty(T,"sortBy",{enumerable:!0,get:function(){return v.default}});var b=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js");Object.defineProperty(T,"union",{enumerable:!0,get:function(){return b.default}});var g=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js");Object.defineProperty(T,"uniq",{enumerable:!0,get:function(){return g.default}});var y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js");Object.defineProperty(T,"valuesOfKey",{enumerable:!0,get:function(){return y.default}});var _=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js");Object.defineProperty(T,"head",{enumerable:!0,get:function(){return _.default}});var M=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js");Object.defineProperty(T,"last",{enumerable:!0,get:function(){return M.default}});var x=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js");Object.defineProperty(T,"startsWith",{enumerable:!0,get:function(){return x.default}});var m=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js");Object.defineProperty(T,"endsWith",{enumerable:!0,get:function(){return m.default}});var S=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js");Object.defineProperty(T,"filter",{enumerable:!0,get:function(){return S.default}});var P=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js");Object.defineProperty(T,"every",{enumerable:!0,get:function(){return P.default}});var A=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js");Object.defineProperty(T,"some",{enumerable:!0,get:function(){return A.default}});var O=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js");Object.defineProperty(T,"group",{enumerable:!0,get:function(){return O.default}});var R=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js");Object.defineProperty(T,"groupBy",{enumerable:!0,get:function(){return R.default}});var H=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");Object.defineProperty(T,"groupToMap",{enumerable:!0,get:function(){return H.default}});var N=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js");Object.defineProperty(T,"getWrapBehavior",{enumerable:!0,get:function(){return N.default}});var K=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js");Object.defineProperty(T,"wrapBehavior",{enumerable:!0,get:function(){return K.default}});var V=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js");Object.defineProperty(T,"number2color",{enumerable:!0,get:function(){return V.default}});var k=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js");Object.defineProperty(T,"parseRadius",{enumerable:!0,get:function(){return k.default}});var Z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js");Object.defineProperty(T,"clamp",{enumerable:!0,get:function(){return Z.default}});var X=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js");Object.defineProperty(T,"fixedBase",{enumerable:!0,get:function(){return X.default}});var at=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js");Object.defineProperty(T,"isDecimal",{enumerable:!0,get:function(){return at.default}});var pt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js");Object.defineProperty(T,"isEven",{enumerable:!0,get:function(){return pt.default}});var gt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js");Object.defineProperty(T,"isInteger",{enumerable:!0,get:function(){return gt.default}});var ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js");Object.defineProperty(T,"isNegative",{enumerable:!0,get:function(){return ft.default}});var Rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js");Object.defineProperty(T,"isNumberEqual",{enumerable:!0,get:function(){return Rt.default}});var Nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js");Object.defineProperty(T,"isOdd",{enumerable:!0,get:function(){return Nt.default}});var Dt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js");Object.defineProperty(T,"isPositive",{enumerable:!0,get:function(){return Dt.default}});var St=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js");Object.defineProperty(T,"maxBy",{enumerable:!0,get:function(){return St.default}});var xt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js");Object.defineProperty(T,"minBy",{enumerable:!0,get:function(){return xt.default}});var Ot=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js");Object.defineProperty(T,"mod",{enumerable:!0,get:function(){return Ot.default}});var it=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js");Object.defineProperty(T,"toDegree",{enumerable:!0,get:function(){return it.default}});var At=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js");Object.defineProperty(T,"toInteger",{enumerable:!0,get:function(){return At.default}});var z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js");Object.defineProperty(T,"toRadian",{enumerable:!0,get:function(){return z.default}});var q=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js");Object.defineProperty(T,"forIn",{enumerable:!0,get:function(){return q.default}});var mt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");Object.defineProperty(T,"has",{enumerable:!0,get:function(){return mt.default}});var et=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js");Object.defineProperty(T,"hasKey",{enumerable:!0,get:function(){return et.default}});var st=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js");Object.defineProperty(T,"hasValue",{enumerable:!0,get:function(){return st.default}});var bt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");Object.defineProperty(T,"keys",{enumerable:!0,get:function(){return bt.default}});var Y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js");Object.defineProperty(T,"isMatch",{enumerable:!0,get:function(){return Y.default}});var rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");Object.defineProperty(T,"values",{enumerable:!0,get:function(){return rt.default}});var ot=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js");Object.defineProperty(T,"lowerCase",{enumerable:!0,get:function(){return ot.default}});var $=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js");Object.defineProperty(T,"lowerFirst",{enumerable:!0,get:function(){return $.default}});var Pt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js");Object.defineProperty(T,"substitute",{enumerable:!0,get:function(){return Pt.default}});var yt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js");Object.defineProperty(T,"upperCase",{enumerable:!0,get:function(){return yt.default}});var Ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js");Object.defineProperty(T,"upperFirst",{enumerable:!0,get:function(){return Ft.default}});var Qt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js");Object.defineProperty(T,"getType",{enumerable:!0,get:function(){return Qt.default}});var ne=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js");Object.defineProperty(T,"isArguments",{enumerable:!0,get:function(){return ne.default}});var Wt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");Object.defineProperty(T,"isArray",{enumerable:!0,get:function(){return Wt.default}});var $t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");Object.defineProperty(T,"isArrayLike",{enumerable:!0,get:function(){return $t.default}});var De=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js");Object.defineProperty(T,"isBoolean",{enumerable:!0,get:function(){return De.default}});var Je=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js");Object.defineProperty(T,"isDate",{enumerable:!0,get:function(){return Je.default}});var Qe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js");Object.defineProperty(T,"isError",{enumerable:!0,get:function(){return Qe.default}});var de=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");Object.defineProperty(T,"isFunction",{enumerable:!0,get:function(){return de.default}});var ue=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js");Object.defineProperty(T,"isFinite",{enumerable:!0,get:function(){return ue.default}});var Ne=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");Object.defineProperty(T,"isNil",{enumerable:!0,get:function(){return Ne.default}});var cn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js");Object.defineProperty(T,"isNull",{enumerable:!0,get:function(){return cn.default}});var Fn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");Object.defineProperty(T,"isNumber",{enumerable:!0,get:function(){return Fn.default}});var wn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");Object.defineProperty(T,"isObject",{enumerable:!0,get:function(){return wn.default}});var en=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js");Object.defineProperty(T,"isObjectLike",{enumerable:!0,get:function(){return en.default}});var tn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");Object.defineProperty(T,"isPlainObject",{enumerable:!0,get:function(){return tn.default}});var xn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js");Object.defineProperty(T,"isPrototype",{enumerable:!0,get:function(){return xn.default}});var Bn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js");Object.defineProperty(T,"isRegExp",{enumerable:!0,get:function(){return Bn.default}});var vr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");Object.defineProperty(T,"isString",{enumerable:!0,get:function(){return vr.default}});var li=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");Object.defineProperty(T,"isType",{enumerable:!0,get:function(){return li.default}});var Me=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js");Object.defineProperty(T,"isUndefined",{enumerable:!0,get:function(){return Me.default}});var Pe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js");Object.defineProperty(T,"isElement",{enumerable:!0,get:function(){return Pe.default}});var te=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js");Object.defineProperty(T,"requestAnimationFrame",{enumerable:!0,get:function(){return te.default}});var ge=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js");Object.defineProperty(T,"clearAnimationFrame",{enumerable:!0,get:function(){return ge.default}});var Ht=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js");Object.defineProperty(T,"augment",{enumerable:!0,get:function(){return Ht.default}});var re=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js");Object.defineProperty(T,"clone",{enumerable:!0,get:function(){return re.default}});var Te=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js");Object.defineProperty(T,"debounce",{enumerable:!0,get:function(){return Te.default}});var ae=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js");Object.defineProperty(T,"memoize",{enumerable:!0,get:function(){return ae.default}});var xe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js");Object.defineProperty(T,"deepMix",{enumerable:!0,get:function(){return xe.default}});var qe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");Object.defineProperty(T,"each",{enumerable:!0,get:function(){return qe.default}});var zn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js");Object.defineProperty(T,"extend",{enumerable:!0,get:function(){return zn.default}});var ar=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js");Object.defineProperty(T,"indexOf",{enumerable:!0,get:function(){return ar.default}});var _n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js");Object.defineProperty(T,"isEmpty",{enumerable:!0,get:function(){return _n.default}});var Cn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");Object.defineProperty(T,"isEqual",{enumerable:!0,get:function(){return Cn.default}});var Or=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js");Object.defineProperty(T,"isEqualWith",{enumerable:!0,get:function(){return Or.default}});var Ar=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js");Object.defineProperty(T,"map",{enumerable:!0,get:function(){return Ar.default}});var hn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js");Object.defineProperty(T,"mapValues",{enumerable:!0,get:function(){return hn.default}});var Pr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js");Object.defineProperty(T,"mix",{enumerable:!0,get:function(){return Pr.default}}),Object.defineProperty(T,"assign",{enumerable:!0,get:function(){return Pr.default}});var yr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js");Object.defineProperty(T,"get",{enumerable:!0,get:function(){return yr.default}});var Re=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js");Object.defineProperty(T,"set",{enumerable:!0,get:function(){return Re.default}});var We=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js");Object.defineProperty(T,"pick",{enumerable:!0,get:function(){return We.default}});var Ye=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js");Object.defineProperty(T,"throttle",{enumerable:!0,get:function(){return Ye.default}});var dn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js");Object.defineProperty(T,"toArray",{enumerable:!0,get:function(){return dn.default}});var En=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js");Object.defineProperty(T,"toString",{enumerable:!0,get:function(){return En.default}});var Dn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js");Object.defineProperty(T,"uniqueId",{enumerable:!0,get:function(){return Dn.default}});var Sn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js");Object.defineProperty(T,"noop",{enumerable:!0,get:function(){return Sn.default}});var Nn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js");Object.defineProperty(T,"identity",{enumerable:!0,get:function(){return Nn.default}});var nr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js");Object.defineProperty(T,"size",{enumerable:!0,get:function(){return nr.default}});var Gn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js");Object.defineProperty(T,"Cache",{enumerable:!0,get:function(){return Gn.default}})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(h){return t.default(h,"Arguments")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s!==null&&typeof s!="function"&&isFinite(s.length)};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return Array.isArray?Array.isArray(u):t.default(u,"Array")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(h){return t.default(h,"Boolean")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(h){return t.default(h,"Date")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(h){return t.default(h)&&h%1!=0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s instanceof Element||s instanceof HTMLDocument};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js"),h=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js"),r=Object.prototype.hasOwnProperty;function c(n){if(t.default(n))return!0;if(u.default(n))return!n.length;var i=s.default(n);if(i==="Map"||i==="Set")return!n.size;if(h.default(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");T.default=function(s,h,r){return t.default(r)?!!r(s,h):u.default(s,h)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),h=function r(c,n){if(c===n)return!0;if(!c||!n||s.default(c)||s.default(n))return!1;if(u.default(c)||u.default(n)){if(c.length!==n.length)return!1;for(var i=!0,a=0;a<c.length&&(i=r(c[a],n[a]),!!i);a++);return i}if(t.default(c)||t.default(n)){var o=Object.keys(c),l=Object.keys(n);if(o.length!==l.length)return!1;for(var i=!0,a=0;a<o.length&&(i=r(c[o[a]],n[o[a]]),!!i);a++);return i}return!1};T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(h){return t.default(h,"Error")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(h){return t.default(h)&&h%2==0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");function u(s){return t.default(s)&&isFinite(s)}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return t.default(u,"Function")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=Number.isInteger?Number.isInteger:function(s){return t.default(s)&&s%1==0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");function s(h,r){var c=u.default(r),n=c.length;if(t.default(h))return!n;for(var i=0;i<n;i+=1){var a=c[i];if(r[a]!==h[a]||!(a in h))return!1}return!0}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(h){return t.default(h)&&h<0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=1e-5;function u(s,h,r){return r===void 0&&(r=t),Math.abs(s-h)<r}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(h){return t.default(h,"Number")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return typeof s=="object"&&s!==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){var u=typeof t;return t!==null&&u==="object"||u==="function"}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(h){return t.default(h)&&h%2!=0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),s=function(r){if(!t.default(r)||!u.default(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var c=r;Object.getPrototypeOf(c)!==null;)c=Object.getPrototypeOf(c);return Object.getPrototypeOf(r)===c};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(h){return t.default(h)&&h>0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.prototype,u=function(h){var r=h&&h.constructor,c=typeof r=="function"&&r.prototype||t;return h===c};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(h){return t.default(h,"RegExp")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return t.default(u,"String")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,u=function(h,r){return t.call(h)==="[object "+r+"]"};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===void 0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.keys?function(h){return Object.keys(h)}:function(h){var r=[];return t.default(h,function(c,n){u.default(h)&&n==="prototype"||r.push(n)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function u(s){if(t.default(s)){var h=s;return h[h.length-1]}}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(h){return t.default(h).toLowerCase()};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(h){var r=t.default(h);return r.charAt(0).toLowerCase()+r.substring(1)};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),s=function(r){return r};T.default=function(h,r){r===void 0&&(r=s);var c={};return u.default(h)&&!t.default(h)&&Object.keys(h).forEach(function(n){c[n]=r(h[n],n)}),c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(h,r){if(!t.default(h))return h;for(var c=[],n=0;n<h.length;n++){var i=h[n];c.push(r(i,n))}return c};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(h,r){if(!!u.default(h)){var c=h[0],n;s.default(r)?n=r(h[0]):n=h[0][r];var i;return t.default(h,function(a){s.default(r)?i=r(a):i=a[r],i>n&&(c=a,n=i)}),c}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(u,s){if(!t.default(u))throw new TypeError("Expected a function");var h=function r(){for(var c=[],n=0;n<arguments.length;n++)c[n]=arguments[n];var i=s?s.apply(this,c):c[0],a=r.cache;if(a.has(i))return a.get(i);var o=u.apply(this,c);return a.set(i,o),o};return h.cache=new Map,h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(h,r){if(!!u.default(h)){var c=h[0],n;s.default(r)?n=r(h[0]):n=h[0][r];var i;return t.default(h,function(a){s.default(r)?i=r(a):i=a[r],i<n&&(c=a,n=i)}),c}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s,h){for(var r in h)h.hasOwnProperty(r)&&r!=="constructor"&&h[r]!==void 0&&(s[r]=h[r])}function u(s,h,r,c){return h&&t(s,h),r&&t(s,r),c&&t(s,c),s}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,h){return(s%h+h)%h};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};function u(s){var h=t[s];if(!h){for(var r=s.toString(16),c=r.length;c<6;c++)r="0"+r;h="#"+r,t[s]=h}return h}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");function u(s){var h=0,r=0,c=0,n=0;return t.default(s)?s.length===1?h=r=c=n=s[0]:s.length===2?(h=c=s[0],r=n=s[1]):s.length===3?(h=s[0],r=n=s[1],c=s[2]):(h=s[0],r=s[1],c=s[2],n=s[3]):h=r=c=n=s,{r1:h,r2:r,r3:c,r4:n}}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=Object.prototype.hasOwnProperty;T.default=function(h,r){if(h===null||!u.default(h))return{};var c={};return t.default(r,function(n){s.call(h,n)&&(c[n]=h[n])}),c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=Array.prototype.splice,s=function(r,c){if(!t.default(r))return[];for(var n=r?c.length:0,i=n-1;n--;){var a=void 0,o=c[n];(n===i||o!==a)&&(a=o,u.call(r,o,1))}return r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Array.prototype,u=t.splice,s=t.indexOf,h=function(c){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var a=0;a<n.length;a++)for(var o=n[a],l=-1;(l=s.call(c,o))>-1;)u.call(c,l,1);return c};T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),h=function(c,n,i){if(!u.default(c)&&!s.default(c))return c;var a=i;return t.default(c,function(o,l){a=n(a,o,l)}),a};T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js"),s=function(r,c){var n=[];if(!t.default(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var l=r[i];c(l,i,r)&&(n.push(l),a.push(i))}return u.default(r,a),n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(h){return setTimeout(h,16)};return s(u)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");T.default=function(h,r,c){var n=h,i=u.default(r)?r.split("."):r;return i.forEach(function(a,o){o<i.length-1?(t.default(n[a])||(n[a]=s.default(i[o+1])?[]:{}),n=n[a]):n[a]=c}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function s(h){return t.default(h)?0:u.default(h)?h.length:Object.keys(h).length}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,h){for(var r=0;r<s.length;r++)if(h(s[r],r))return!0;return!1};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");function h(r,c){var n;if(s.default(c))n=function(o,l){return c(o)-c(l)};else{var i=[];u.default(c)?i.push(c):t.default(c)&&(i=c),n=function(o,l){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>l[v])return 1;if(o[v]<l[v])return-1}return 0}}return r.sort(n),r}T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(h,r){return t.default(h)||u.default(h)?h[0]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){return!u||!s?u:u.replace(/\\?\{([^{}]+)\}/g,function(h,r){return h.charAt(0)==="\\"?h.slice(1):s[r]===void 0?"":s[r]})}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,u,s){var h,r,c,n,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),h=null,n=t.apply(r,c),h||(r=c=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=u-(f-i);return r=this,c=arguments,v<=0||v>u?(h&&(clearTimeout(h),h=null),i=f,n=t.apply(r,c),h||(r=c=null)):!h&&s.trailing!==!1&&(h=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(h),i=0,h=r=c=null},o}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");T.default=function(u){return t.default(u)?Array.prototype.slice.call(u):[]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=180/Math.PI,u=function(h){return t*h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=parseInt},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Math.PI/180,u=function(h){return t*h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(u){return t.default(u)?"":u.toString()}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js"),u=function(){for(var h=[],r=0;r<arguments.length;r++)h[r]=arguments[r];return t.default([].concat.apply([],h))};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),s=function(r){var c=[];return u.default(r,function(n){t.default(c,n)||c.push(n)}),c};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};T.default=function(u){return u=u||"g",t[u]?t[u]+=1:t[u]=1,u+t[u]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(h){return t.default(h).toUpperCase()};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(h){var r=t.default(h);return r.charAt(0).toUpperCase()+r.substring(1)};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(s,h){for(var r=[],c={},n=0;n<s.length;n++){var i=s[n],a=i[h];if(!u.default(a)){t.default(a)||(a=[a]);for(var o=0;o<a.length;o++){var l=a[o];c[l]||(r.push(l),c[l]=!0)}}}return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.values?function(h){return Object.values(h)}:function(h){var r=[];return t.default(h,function(c,n){u.default(h)&&n==="prototype"||r.push(c)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){if(u["_wrap_"+s])return u["_wrap_"+s];var h=function(c){u[s](c)};return u["_wrap_"+s]=h,h}T.default=t},"./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js":function(E,T){E.exports=e;function e(t){var u=0,s=0,h=0,r=0;return t.map(function(c){c=c.slice();var n=c[0],i=n.toUpperCase();if(n!=i)switch(c[0]=i,n){case"a":c[6]+=h,c[7]+=r;break;case"v":c[1]+=r;break;case"h":c[1]+=h;break;default:for(var a=1;a<c.length;)c[a++]+=h,c[a++]+=r}switch(i){case"Z":h=u,r=s;break;case"H":h=c[1];break;case"V":r=c[1];break;case"M":h=u=c[1],r=s=c[2];break;default:h=c[c.length-2],r=c[c.length-1]}return c})}},"./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(z,q){return z<q?-1:z>q?1:z>=q?0:NaN}function s(z){return z.length===1&&(z=h(z)),{left:function(mt,et,st,bt){for(st==null&&(st=0),bt==null&&(bt=mt.length);st<bt;){var Y=st+bt>>>1;z(mt[Y],et)<0?st=Y+1:bt=Y}return st},right:function(mt,et,st,bt){for(st==null&&(st=0),bt==null&&(bt=mt.length);st<bt;){var Y=st+bt>>>1;z(mt[Y],et)>0?bt=Y:st=Y+1}return st}}}function h(z){return function(q,mt){return u(z(q),mt)}}var r=s(u),c=r.right,n=r.left;function i(z,q){q==null&&(q=a);for(var mt=0,et=z.length-1,st=z[0],bt=new Array(et<0?0:et);mt<et;)bt[mt]=q(st,st=z[++mt]);return bt}function a(z,q){return[z,q]}function o(z,q,mt){var et=z.length,st=q.length,bt=new Array(et*st),Y,rt,ot,$;for(mt==null&&(mt=a),Y=ot=0;Y<et;++Y)for($=z[Y],rt=0;rt<st;++rt,++ot)bt[ot]=mt($,q[rt]);return bt}function l(z,q){return q<z?-1:q>z?1:q>=z?0:NaN}function f(z){return z===null?NaN:+z}function v(z,q){var mt=z.length,et=0,st=-1,bt=0,Y,rt,ot=0;if(q==null)for(;++st<mt;)isNaN(Y=f(z[st]))||(rt=Y-bt,bt+=rt/++et,ot+=rt*(Y-bt));else for(;++st<mt;)isNaN(Y=f(q(z[st],st,z)))||(rt=Y-bt,bt+=rt/++et,ot+=rt*(Y-bt));if(et>1)return ot/(et-1)}function b(z,q){var mt=v(z,q);return mt&&Math.sqrt(mt)}function g(z,q){var mt=z.length,et=-1,st,bt,Y;if(q==null){for(;++et<mt;)if((st=z[et])!=null&&st>=st)for(bt=Y=st;++et<mt;)(st=z[et])!=null&&(bt>st&&(bt=st),Y<st&&(Y=st))}else for(;++et<mt;)if((st=q(z[et],et,z))!=null&&st>=st)for(bt=Y=st;++et<mt;)(st=q(z[et],et,z))!=null&&(bt>st&&(bt=st),Y<st&&(Y=st));return[bt,Y]}var y=Array.prototype,_=y.slice,M=y.map;function x(z){return function(){return z}}function m(z){return z}function S(z,q,mt){z=+z,q=+q,mt=(st=arguments.length)<2?(q=z,z=0,1):st<3?1:+mt;for(var et=-1,st=Math.max(0,Math.ceil((q-z)/mt))|0,bt=new Array(st);++et<st;)bt[et]=z+et*mt;return bt}var P=Math.sqrt(50),A=Math.sqrt(10),O=Math.sqrt(2);function R(z,q,mt){var et,st=-1,bt,Y,rt;if(q=+q,z=+z,mt=+mt,z===q&&mt>0)return[z];if((et=q<z)&&(bt=z,z=q,q=bt),(rt=H(z,q,mt))===0||!isFinite(rt))return[];if(rt>0)for(z=Math.ceil(z/rt),q=Math.floor(q/rt),Y=new Array(bt=Math.ceil(q-z+1));++st<bt;)Y[st]=(z+st)*rt;else for(z=Math.floor(z*rt),q=Math.ceil(q*rt),Y=new Array(bt=Math.ceil(z-q+1));++st<bt;)Y[st]=(z-st)/rt;return et&&Y.reverse(),Y}function H(z,q,mt){var et=(q-z)/Math.max(0,mt),st=Math.floor(Math.log(et)/Math.LN10),bt=et/Math.pow(10,st);return st>=0?(bt>=P?10:bt>=A?5:bt>=O?2:1)*Math.pow(10,st):-Math.pow(10,-st)/(bt>=P?10:bt>=A?5:bt>=O?2:1)}function N(z,q,mt){var et=Math.abs(q-z)/Math.max(0,mt),st=Math.pow(10,Math.floor(Math.log(et)/Math.LN10)),bt=et/st;return bt>=P?st*=10:bt>=A?st*=5:bt>=O&&(st*=2),q<z?-st:st}function K(z){return Math.ceil(Math.log(z.length)/Math.LN2)+1}function V(){var z=m,q=g,mt=K;function et(st){var bt,Y=st.length,rt,ot=new Array(Y);for(bt=0;bt<Y;++bt)ot[bt]=z(st[bt],bt,st);var $=q(ot),Pt=$[0],yt=$[1],Ft=mt(ot,Pt,yt);Array.isArray(Ft)||(Ft=N(Pt,yt,Ft),Ft=S(Math.ceil(Pt/Ft)*Ft,yt,Ft));for(var Qt=Ft.length;Ft[0]<=Pt;)Ft.shift(),--Qt;for(;Ft[Qt-1]>yt;)Ft.pop(),--Qt;var ne=new Array(Qt+1),Wt;for(bt=0;bt<=Qt;++bt)Wt=ne[bt]=[],Wt.x0=bt>0?Ft[bt-1]:Pt,Wt.x1=bt<Qt?Ft[bt]:yt;for(bt=0;bt<Y;++bt)rt=ot[bt],Pt<=rt&&rt<=yt&&ne[c(Ft,rt,0,Qt)].push(st[bt]);return ne}return et.value=function(st){return arguments.length?(z=typeof st=="function"?st:x(st),et):z},et.domain=function(st){return arguments.length?(q=typeof st=="function"?st:x([st[0],st[1]]),et):q},et.thresholds=function(st){return arguments.length?(mt=typeof st=="function"?st:Array.isArray(st)?x(_.call(st)):x(st),et):mt},et}function k(z,q,mt){if(mt==null&&(mt=f),!!(et=z.length)){if((q=+q)<=0||et<2)return+mt(z[0],0,z);if(q>=1)return+mt(z[et-1],et-1,z);var et,st=(et-1)*q,bt=Math.floor(st),Y=+mt(z[bt],bt,z),rt=+mt(z[bt+1],bt+1,z);return Y+(rt-Y)*(st-bt)}}function Z(z,q,mt){return z=M.call(z,f).sort(u),Math.ceil((mt-q)/(2*(k(z,.75)-k(z,.25))*Math.pow(z.length,-1/3)))}function X(z,q,mt){return Math.ceil((mt-q)/(3.5*b(z)*Math.pow(z.length,-1/3)))}function at(z,q){var mt=z.length,et=-1,st,bt;if(q==null){for(;++et<mt;)if((st=z[et])!=null&&st>=st)for(bt=st;++et<mt;)(st=z[et])!=null&&st>bt&&(bt=st)}else for(;++et<mt;)if((st=q(z[et],et,z))!=null&&st>=st)for(bt=st;++et<mt;)(st=q(z[et],et,z))!=null&&st>bt&&(bt=st);return bt}function pt(z,q){var mt=z.length,et=mt,st=-1,bt,Y=0;if(q==null)for(;++st<mt;)isNaN(bt=f(z[st]))?--et:Y+=bt;else for(;++st<mt;)isNaN(bt=f(q(z[st],st,z)))?--et:Y+=bt;if(et)return Y/et}function gt(z,q){var mt=z.length,et=-1,st,bt=[];if(q==null)for(;++et<mt;)isNaN(st=f(z[et]))||bt.push(st);else for(;++et<mt;)isNaN(st=f(q(z[et],et,z)))||bt.push(st);return k(bt.sort(u),.5)}function ft(z){for(var q=z.length,mt,et=-1,st=0,bt,Y;++et<q;)st+=z[et].length;for(bt=new Array(st);--q>=0;)for(Y=z[q],mt=Y.length;--mt>=0;)bt[--st]=Y[mt];return bt}function Rt(z,q){var mt=z.length,et=-1,st,bt;if(q==null){for(;++et<mt;)if((st=z[et])!=null&&st>=st)for(bt=st;++et<mt;)(st=z[et])!=null&&bt>st&&(bt=st)}else for(;++et<mt;)if((st=q(z[et],et,z))!=null&&st>=st)for(bt=st;++et<mt;)(st=q(z[et],et,z))!=null&&bt>st&&(bt=st);return bt}function Nt(z,q){for(var mt=q.length,et=new Array(mt);mt--;)et[mt]=z[q[mt]];return et}function Dt(z,q){if(!!(mt=z.length)){var mt,et=0,st=0,bt,Y=z[st];for(q==null&&(q=u);++et<mt;)(q(bt=z[et],Y)<0||q(Y,Y)!==0)&&(Y=bt,st=et);if(q(Y,Y)===0)return st}}function St(z,q,mt){for(var et=(mt==null?z.length:mt)-(q=q==null?0:+q),st,bt;et;)bt=Math.random()*et--|0,st=z[et+q],z[et+q]=z[bt+q],z[bt+q]=st;return z}function xt(z,q){var mt=z.length,et=-1,st,bt=0;if(q==null)for(;++et<mt;)(st=+z[et])&&(bt+=st);else for(;++et<mt;)(st=+q(z[et],et,z))&&(bt+=st);return bt}function Ot(z){if(!(bt=z.length))return[];for(var q=-1,mt=Rt(z,it),et=new Array(mt);++q<mt;)for(var st=-1,bt,Y=et[q]=new Array(bt);++st<bt;)Y[st]=z[st][q];return et}function it(z){return z.length}function At(){return Ot(arguments)}t.bisect=c,t.bisectRight=c,t.bisectLeft=n,t.ascending=u,t.bisector=s,t.cross=o,t.descending=l,t.deviation=b,t.extent=g,t.histogram=V,t.thresholdFreedmanDiaconis=Z,t.thresholdScott=X,t.thresholdSturges=K,t.max=at,t.mean=pt,t.median=gt,t.merge=ft,t.min=Rt,t.pairs=i,t.permute=Nt,t.quantile=k,t.range=S,t.scan=Dt,t.shuffle=St,t.sum=xt,t.ticks=R,t.tickIncrement=H,t.tickStep=N,t.transpose=Ot,t.variance=v,t.zip=At,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T)})(this,function(u){"use strict";function s(Re,We){return Re<We?-1:Re>We?1:Re>=We?0:NaN}function h(Re){var We=Re,Ye=Re;Re.length===1&&(We=function(Nn,nr){return Re(Nn)-nr},Ye=r(Re));function dn(Sn,Nn,nr,Gn){for(nr==null&&(nr=0),Gn==null&&(Gn=Sn.length);nr<Gn;){var Tn=nr+Gn>>>1;Ye(Sn[Tn],Nn)<0?nr=Tn+1:Gn=Tn}return nr}function En(Sn,Nn,nr,Gn){for(nr==null&&(nr=0),Gn==null&&(Gn=Sn.length);nr<Gn;){var Tn=nr+Gn>>>1;Ye(Sn[Tn],Nn)>0?Gn=Tn:nr=Tn+1}return nr}function Dn(Sn,Nn,nr,Gn){nr==null&&(nr=0),Gn==null&&(Gn=Sn.length);var Tn=dn(Sn,Nn,nr,Gn-1);return Tn>nr&&We(Sn[Tn-1],Nn)>-We(Sn[Tn],Nn)?Tn-1:Tn}return{left:dn,center:Dn,right:En}}function r(Re){return function(We,Ye){return s(Re(We),Ye)}}function c(Re){return Re===null?NaN:+Re}function n(Re,We){var Ye,dn,En,Dn,Sn,Nn,nr,En,Gn,Tn,Cr,pr,zr;return t.__generator(this,function(Ei){switch(Ei.label){case 0:if(We!==void 0)return[3,9];Ei.label=1;case 1:Ei.trys.push([1,6,7,8]),Ye=t.__values(Re),dn=Ye.next(),Ei.label=2;case 2:return dn.done?[3,5]:(En=dn.value,En!=null&&(En=+En)>=En?[4,En]:[3,4]);case 3:Ei.sent(),Ei.label=4;case 4:return dn=Ye.next(),[3,2];case 5:return[3,8];case 6:return Dn=Ei.sent(),Tn={error:Dn},[3,8];case 7:try{dn&&!dn.done&&(Cr=Ye.return)&&Cr.call(Ye)}finally{if(Tn)throw Tn.error}return[7];case 8:return[3,17];case 9:Sn=-1,Ei.label=10;case 10:Ei.trys.push([10,15,16,17]),Nn=t.__values(Re),nr=Nn.next(),Ei.label=11;case 11:return nr.done?[3,14]:(En=nr.value,(En=We(En,++Sn,Re))!=null&&(En=+En)>=En?[4,En]:[3,13]);case 12:Ei.sent(),Ei.label=13;case 13:return nr=Nn.next(),[3,11];case 14:return[3,17];case 15:return Gn=Ei.sent(),pr={error:Gn},[3,17];case 16:try{nr&&!nr.done&&(zr=Nn.return)&&zr.call(Nn)}finally{if(pr)throw pr.error}return[7];case 17:return[2]}})}var i=h(s),a=i.right,o=i.left,l=h(c).center;function f(Re,We){var Ye,dn,En,Dn,Sn=0;if(We===void 0)try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;Gn!=null&&(Gn=+Gn)>=Gn&&++Sn}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}else{var Tn=-1;try{for(var Cr=t.__values(Re),pr=Cr.next();!pr.done;pr=Cr.next()){var Gn=pr.value;(Gn=We(Gn,++Tn,Re))!=null&&(Gn=+Gn)>=Gn&&++Sn}}catch(zr){En={error:zr}}finally{try{pr&&!pr.done&&(Dn=Cr.return)&&Dn.call(Cr)}finally{if(En)throw En.error}}}return Sn}function v(Re){return Re.length|0}function b(Re){return!(Re>0)}function g(Re){return typeof Re!="object"||"length"in Re?Re:Array.from(Re)}function y(Re){return function(We){return Re.apply(void 0,t.__spread(We))}}function _(){for(var Re=[],We=0;We<arguments.length;We++)Re[We]=arguments[We];var Ye=typeof Re[Re.length-1]=="function"&&y(Re.pop());Re=Re.map(g);var dn=Re.map(v),En=Re.length-1,Dn=new Array(En+1).fill(0),Sn=[];if(En<0||dn.some(b))return Sn;for(;;){Sn.push(Dn.map(function(nr,Gn){return Re[Gn][nr]}));for(var Nn=En;++Dn[Nn]===dn[Nn];){if(Nn===0)return Ye?Sn.map(Ye):Sn;Dn[Nn--]=0}}}function M(Re,We){var Ye=0,dn=0;return Float64Array.from(Re,We===void 0?function(En){return Ye+=+En||0}:function(En){return Ye+=+We(En,dn++,Re)||0})}function x(Re,We){return We<Re?-1:We>Re?1:We>=Re?0:NaN}function m(Re,We){var Ye,dn,En,Dn,Sn=0,Nn,nr=0,Gn=0;if(We===void 0)try{for(var Tn=t.__values(Re),Cr=Tn.next();!Cr.done;Cr=Tn.next()){var pr=Cr.value;pr!=null&&(pr=+pr)>=pr&&(Nn=pr-nr,nr+=Nn/++Sn,Gn+=Nn*(pr-nr))}}catch(wa){Ye={error:wa}}finally{try{Cr&&!Cr.done&&(dn=Tn.return)&&dn.call(Tn)}finally{if(Ye)throw Ye.error}}else{var zr=-1;try{for(var Ei=t.__values(Re),Oa=Ei.next();!Oa.done;Oa=Ei.next()){var pr=Oa.value;(pr=We(pr,++zr,Re))!=null&&(pr=+pr)>=pr&&(Nn=pr-nr,nr+=Nn/++Sn,Gn+=Nn*(pr-nr))}}catch(wa){En={error:wa}}finally{try{Oa&&!Oa.done&&(Dn=Ei.return)&&Dn.call(Ei)}finally{if(En)throw En.error}}}if(Sn>1)return Gn/(Sn-1)}function S(Re,We){var Ye=m(Re,We);return Ye&&Math.sqrt(Ye)}function P(Re,We){var Ye,dn,En,Dn,Sn,Nn;if(We===void 0)try{for(var nr=t.__values(Re),Gn=nr.next();!Gn.done;Gn=nr.next()){var Tn=Gn.value;Tn!=null&&(Sn===void 0?Tn>=Tn&&(Sn=Nn=Tn):(Sn>Tn&&(Sn=Tn),Nn<Tn&&(Nn=Tn)))}}catch(Ei){Ye={error:Ei}}finally{try{Gn&&!Gn.done&&(dn=nr.return)&&dn.call(nr)}finally{if(Ye)throw Ye.error}}else{var Cr=-1;try{for(var pr=t.__values(Re),zr=pr.next();!zr.done;zr=pr.next()){var Tn=zr.value;(Tn=We(Tn,++Cr,Re))!=null&&(Sn===void 0?Tn>=Tn&&(Sn=Nn=Tn):(Sn>Tn&&(Sn=Tn),Nn<Tn&&(Nn=Tn)))}}catch(Ei){En={error:Ei}}finally{try{zr&&!zr.done&&(Dn=pr.return)&&Dn.call(pr)}finally{if(En)throw En.error}}}return[Sn,Nn]}var A=function(){function Re(){this._partials=new Float64Array(32),this._n=0}return Re.prototype.add=function(We){for(var Ye=this._partials,dn=0,En=0;En<this._n&&En<32;En++){var Dn=Ye[En],Sn=We+Dn,Nn=Math.abs(We)<Math.abs(Dn)?We-(Sn-Dn):Dn-(Sn-We);Nn&&(Ye[dn++]=Nn),We=Sn}return Ye[dn]=We,this._n=dn+1,this},Re.prototype.valueOf=function(){var We=this._partials,Ye=this._n,dn,En,Dn,Sn=0;if(Ye>0){for(Sn=We[--Ye];Ye>0&&(dn=Sn,En=We[--Ye],Sn=dn+En,Dn=En-(Sn-dn),!Dn););Ye>0&&(Dn<0&&We[Ye-1]<0||Dn>0&&We[Ye-1]>0)&&(En=Dn*2,dn=Sn+En,En==dn-Sn&&(Sn=dn))}return Sn},Re}();function O(Re,We){var Ye,dn,En,Dn,Sn=new A;if(We===void 0)try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;(Gn=+Gn)&&Sn.add(Gn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}else{var Tn=-1;try{for(var Cr=t.__values(Re),pr=Cr.next();!pr.done;pr=Cr.next()){var Gn=pr.value;(Gn=+We(Gn,++Tn,Re))&&Sn.add(Gn)}}catch(zr){En={error:zr}}finally{try{pr&&!pr.done&&(Dn=Cr.return)&&Dn.call(Cr)}finally{if(En)throw En.error}}}return+Sn}var R=function(Re){t.__extends(We,Re);function We(Ye,dn){var En,Dn;Ye===void 0&&(Ye=[]),dn===void 0&&(dn=k);var Sn=Re.call(this)||this;Object.defineProperties(Sn,{_intern:{value:new Map},_key:{value:dn}});try{for(var Nn=t.__values(Ye),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=t.__read(nr.value,2),Tn=Gn[0],Cr=Gn[1];Sn.set(Tn,Cr)}}catch(pr){En={error:pr}}finally{try{nr&&!nr.done&&(Dn=Nn.return)&&Dn.call(Nn)}finally{if(En)throw En.error}}return Sn}return We.prototype.get=function(Ye){return Re.prototype.get.call(this,N(this,Ye))},We.prototype.has=function(Ye){return Re.prototype.has.call(this,N(this,Ye))},We.prototype.set=function(Ye,dn){return Re.prototype.set.call(this,K(this,Ye),dn)},We.prototype.delete=function(Ye){return Re.prototype.delete.call(this,V(this,Ye))},We}(Map),H=function(Re){t.__extends(We,Re);function We(Ye,dn){var En,Dn;Ye===void 0&&(Ye=[]),dn===void 0&&(dn=k);var Sn=Re.call(this)||this;Object.defineProperties(Sn,{_intern:{value:new Map},_key:{value:dn}});try{for(var Nn=t.__values(Ye),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;Sn.add(Gn)}}catch(Tn){En={error:Tn}}finally{try{nr&&!nr.done&&(Dn=Nn.return)&&Dn.call(Nn)}finally{if(En)throw En.error}}return Sn}return We.prototype.has=function(Ye){return Re.prototype.has.call(this,N(this,Ye))},We.prototype.add=function(Ye){return Re.prototype.add.call(this,K(this,Ye))},We.prototype.delete=function(Ye){return Re.prototype.delete.call(this,V(this,Ye))},We}(Set);function N(Re,We){var Ye=Re._intern,dn=Re._key,En=dn(We);return Ye.has(En)?Ye.get(En):We}function K(Re,We){var Ye=Re._intern,dn=Re._key,En=dn(We);return Ye.has(En)?Ye.get(En):(Ye.set(En,We),We)}function V(Re,We){var Ye=Re._intern,dn=Re._key,En=dn(We);return Ye.has(En)&&(We=Ye.get(We),Ye.delete(En)),We}function k(Re){return Re!==null&&typeof Re=="object"?Re.valueOf():Re}function Z(Re){return Re}function X(Re){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Dt(Re,Z,Z,We)}function at(Re){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Dt(Re,Array.from,Z,We)}function pt(Re,We){for(var Ye=[],dn=2;dn<arguments.length;dn++)Ye[dn-2]=arguments[dn];return Dt(Re,Z,We,Ye)}function gt(Re,We){for(var Ye=[],dn=2;dn<arguments.length;dn++)Ye[dn-2]=arguments[dn];return Dt(Re,Array.from,We,Ye)}function ft(Re){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Dt(Re,Z,Nt,We)}function Rt(Re){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Dt(Re,Array.from,Nt,We)}function Nt(Re){if(Re.length!==1)throw new Error("duplicate key");return Re[0]}function Dt(Re,We,Ye,dn){return function En(Dn,Sn){var Nn,nr,Gn,Tn;if(Sn>=dn.length)return Ye(Dn);var Cr=new R,pr=dn[Sn++],zr=-1;try{for(var Ei=t.__values(Dn),Oa=Ei.next();!Oa.done;Oa=Ei.next()){var wa=Oa.value,Ja=pr(wa,++zr,Dn),wo=Cr.get(Ja);wo?wo.push(wa):Cr.set(Ja,[wa])}}catch(Mo){Nn={error:Mo}}finally{try{Oa&&!Oa.done&&(nr=Ei.return)&&nr.call(Ei)}finally{if(Nn)throw Nn.error}}try{for(var ha=t.__values(Cr),ro=ha.next();!ro.done;ro=ha.next()){var ko=t.__read(ro.value,2),Ja=ko[0],$a=ko[1];Cr.set(Ja,En($a,Sn))}}catch(Mo){Gn={error:Mo}}finally{try{ro&&!ro.done&&(Tn=ha.return)&&Tn.call(ha)}finally{if(Gn)throw Gn.error}}return We(Cr)}(Re,0)}function St(Re,We){return Array.from(We,function(Ye){return Re[Ye]})}function xt(Re){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];if(typeof Re[Symbol.iterator]!="function")throw new TypeError("values is not iterable");Re=Array.from(Re);var dn=t.__read(We,1),En=dn[0],Dn=En===void 0?s:En;if(Dn.length===1||We.length>1){var Sn=Uint32Array.from(Re,function(Nn,nr){return nr});return We.length>1?(We=We.map(function(Nn){return Re.map(Nn)}),Sn.sort(function(Nn,nr){var Gn,Tn;try{for(var Cr=t.__values(We),pr=Cr.next();!pr.done;pr=Cr.next()){var zr=pr.value,Ei=s(zr[Nn],zr[nr]);if(Ei)return Ei}}catch(Oa){Gn={error:Oa}}finally{try{pr&&!pr.done&&(Tn=Cr.return)&&Tn.call(Cr)}finally{if(Gn)throw Gn.error}}})):(Dn=Re.map(Dn),Sn.sort(function(Nn,nr){return s(Dn[Nn],Dn[nr])})),St(Re,Sn)}return Re.sort(Dn)}function Ot(Re,We,Ye){return(We.length===1?xt(pt(Re,We,Ye),function(dn,En){var Dn=t.__read(dn,2),Sn=Dn[0],Nn=Dn[1],nr=t.__read(En,2),Gn=nr[0],Tn=nr[1];return s(Nn,Tn)||s(Sn,Gn)}):xt(X(Re,Ye),function(dn,En){var Dn=t.__read(dn,2),Sn=Dn[0],Nn=Dn[1],nr=t.__read(En,2),Gn=nr[0],Tn=nr[1];return We(Nn,Tn)||s(Sn,Gn)})).map(function(dn){var En=t.__read(dn,1),Dn=En[0];return Dn})}var it=Array.prototype,At=it.slice;function z(Re){return function(){return Re}}var q=Math.sqrt(50),mt=Math.sqrt(10),et=Math.sqrt(2);function st(Re,We,Ye){var dn,En=-1,Dn,Sn,Nn;if(We=+We,Re=+Re,Ye=+Ye,Re===We&&Ye>0)return[Re];if((dn=We<Re)&&(Dn=Re,Re=We,We=Dn),(Nn=bt(Re,We,Ye))===0||!isFinite(Nn))return[];if(Nn>0)for(Re=Math.ceil(Re/Nn),We=Math.floor(We/Nn),Sn=new Array(Dn=Math.ceil(We-Re+1));++En<Dn;)Sn[En]=(Re+En)*Nn;else for(Nn=-Nn,Re=Math.ceil(Re*Nn),We=Math.floor(We*Nn),Sn=new Array(Dn=Math.ceil(We-Re+1));++En<Dn;)Sn[En]=(Re+En)/Nn;return dn&&Sn.reverse(),Sn}function bt(Re,We,Ye){var dn=(We-Re)/Math.max(0,Ye),En=Math.floor(Math.log(dn)/Math.LN10),Dn=dn/Math.pow(10,En);return En>=0?(Dn>=q?10:Dn>=mt?5:Dn>=et?2:1)*Math.pow(10,En):-Math.pow(10,-En)/(Dn>=q?10:Dn>=mt?5:Dn>=et?2:1)}function Y(Re,We,Ye){var dn=Math.abs(We-Re)/Math.max(0,Ye),En=Math.pow(10,Math.floor(Math.log(dn)/Math.LN10)),Dn=dn/En;return Dn>=q?En*=10:Dn>=mt?En*=5:Dn>=et&&(En*=2),We<Re?-En:En}function rt(Re,We,Ye){for(var dn;;){var En=bt(Re,We,Ye);if(En===dn||En===0||!isFinite(En))return[Re,We];En>0?(Re=Math.floor(Re/En)*En,We=Math.ceil(We/En)*En):En<0&&(Re=Math.ceil(Re*En)/En,We=Math.floor(We*En)/En),dn=En}}function ot(Re){return Math.ceil(Math.log(f(Re))/Math.LN2)+1}function $(){var Re=Z,We=P,Ye=ot;function dn(En){var Dn;Array.isArray(En)||(En=Array.from(En));var Sn,Nn=En.length,nr,Gn=new Array(Nn);for(Sn=0;Sn<Nn;++Sn)Gn[Sn]=Re(En[Sn],Sn,En);var Tn=We(Gn),Cr=Tn[0],pr=Tn[1],zr=Ye(Gn,Cr,pr);if(!Array.isArray(zr)){var Ei=pr,Oa=+zr;if(We===P&&(Dn=t.__read(rt(Cr,pr,Oa),2),Cr=Dn[0],pr=Dn[1]),zr=st(Cr,pr,Oa),zr[zr.length-1]>=pr)if(Ei>=pr&&We===P){var wa=bt(Cr,pr,Oa);isFinite(wa)&&(wa>0?pr=(Math.floor(pr/wa)+1)*wa:wa<0&&(pr=(Math.ceil(pr*-wa)+1)/-wa))}else zr.pop()}for(var Ja=zr.length;zr[0]<=Cr;)zr.shift(),--Ja;for(;zr[Ja-1]>pr;)zr.pop(),--Ja;var wo=new Array(Ja+1),ha;for(Sn=0;Sn<=Ja;++Sn)ha=wo[Sn]=[],ha.x0=Sn>0?zr[Sn-1]:Cr,ha.x1=Sn<Ja?zr[Sn]:pr;for(Sn=0;Sn<Nn;++Sn)nr=Gn[Sn],Cr<=nr&&nr<=pr&&wo[a(zr,nr,0,Ja)].push(En[Sn]);return wo}return dn.value=function(En){return arguments.length?(Re=typeof En=="function"?En:z(En),dn):Re},dn.domain=function(En){return arguments.length?(We=typeof En=="function"?En:z([En[0],En[1]]),dn):We},dn.thresholds=function(En){return arguments.length?(Ye=typeof En=="function"?En:Array.isArray(En)?z(At.call(En)):z(En),dn):Ye},dn}function Pt(Re,We){var Ye,dn,En,Dn,Sn;if(We===void 0)try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;Gn!=null&&(Sn<Gn||Sn===void 0&&Gn>=Gn)&&(Sn=Gn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}else{var Tn=-1;try{for(var Cr=t.__values(Re),pr=Cr.next();!pr.done;pr=Cr.next()){var Gn=pr.value;(Gn=We(Gn,++Tn,Re))!=null&&(Sn<Gn||Sn===void 0&&Gn>=Gn)&&(Sn=Gn)}}catch(zr){En={error:zr}}finally{try{pr&&!pr.done&&(Dn=Cr.return)&&Dn.call(Cr)}finally{if(En)throw En.error}}}return Sn}function yt(Re,We){var Ye,dn,En,Dn,Sn;if(We===void 0)try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;Gn!=null&&(Sn>Gn||Sn===void 0&&Gn>=Gn)&&(Sn=Gn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}else{var Tn=-1;try{for(var Cr=t.__values(Re),pr=Cr.next();!pr.done;pr=Cr.next()){var Gn=pr.value;(Gn=We(Gn,++Tn,Re))!=null&&(Sn>Gn||Sn===void 0&&Gn>=Gn)&&(Sn=Gn)}}catch(zr){En={error:zr}}finally{try{pr&&!pr.done&&(Dn=Cr.return)&&Dn.call(Cr)}finally{if(En)throw En.error}}}return Sn}function Ft(Re,We,Ye,dn,En){for(Ye===void 0&&(Ye=0),dn===void 0&&(dn=Re.length-1),En===void 0&&(En=s);dn>Ye;){if(dn-Ye>600){var Dn=dn-Ye+1,Sn=We-Ye+1,Nn=Math.log(Dn),nr=.5*Math.exp(2*Nn/3),Gn=.5*Math.sqrt(Nn*nr*(Dn-nr)/Dn)*(Sn-Dn/2<0?-1:1),Tn=Math.max(Ye,Math.floor(We-Sn*nr/Dn+Gn)),Cr=Math.min(dn,Math.floor(We+(Dn-Sn)*nr/Dn+Gn));Ft(Re,We,Tn,Cr,En)}var pr=Re[We],zr=Ye,Ei=dn;for(Qt(Re,Ye,We),En(Re[dn],pr)>0&&Qt(Re,Ye,dn);zr<Ei;){for(Qt(Re,zr,Ei),++zr,--Ei;En(Re[zr],pr)<0;)++zr;for(;En(Re[Ei],pr)>0;)--Ei}En(Re[Ye],pr)===0?Qt(Re,Ye,Ei):(++Ei,Qt(Re,Ei,dn)),Ei<=We&&(Ye=Ei+1),We<=Ei&&(dn=Ei-1)}return Re}function Qt(Re,We,Ye){var dn=Re[We];Re[We]=Re[Ye],Re[Ye]=dn}function ne(Re,We,Ye){if(Re=Float64Array.from(n(Re,Ye)),!!(dn=Re.length)){if((We=+We)<=0||dn<2)return yt(Re);if(We>=1)return Pt(Re);var dn,En=(dn-1)*We,Dn=Math.floor(En),Sn=Pt(Ft(Re,Dn).subarray(0,Dn+1)),Nn=yt(Re.subarray(Dn+1));return Sn+(Nn-Sn)*(En-Dn)}}function Wt(Re,We,Ye){if(Ye===void 0&&(Ye=c),!!(dn=Re.length)){if((We=+We)<=0||dn<2)return+Ye(Re[0],0,Re);if(We>=1)return+Ye(Re[dn-1],dn-1,Re);var dn,En=(dn-1)*We,Dn=Math.floor(En),Sn=+Ye(Re[Dn],Dn,Re),Nn=+Ye(Re[Dn+1],Dn+1,Re);return Sn+(Nn-Sn)*(En-Dn)}}function $t(Re,We,Ye){return Math.ceil((Ye-We)/(2*(ne(Re,.75)-ne(Re,.25))*Math.pow(f(Re),-1/3)))}function De(Re,We,Ye){return Math.ceil((Ye-We)/(3.5*S(Re)*Math.pow(f(Re),-1/3)))}function Je(Re,We){var Ye,dn,En,Dn,Sn,Nn=-1,nr=-1;if(We===void 0)try{for(var Gn=t.__values(Re),Tn=Gn.next();!Tn.done;Tn=Gn.next()){var Cr=Tn.value;++nr,Cr!=null&&(Sn<Cr||Sn===void 0&&Cr>=Cr)&&(Sn=Cr,Nn=nr)}}catch(Ei){Ye={error:Ei}}finally{try{Tn&&!Tn.done&&(dn=Gn.return)&&dn.call(Gn)}finally{if(Ye)throw Ye.error}}else try{for(var pr=t.__values(Re),zr=pr.next();!zr.done;zr=pr.next()){var Cr=zr.value;(Cr=We(Cr,++nr,Re))!=null&&(Sn<Cr||Sn===void 0&&Cr>=Cr)&&(Sn=Cr,Nn=nr)}}catch(Ei){En={error:Ei}}finally{try{zr&&!zr.done&&(Dn=pr.return)&&Dn.call(pr)}finally{if(En)throw En.error}}return Nn}function Qe(Re,We){var Ye,dn,En,Dn,Sn=0,Nn=0;if(We===void 0)try{for(var nr=t.__values(Re),Gn=nr.next();!Gn.done;Gn=nr.next()){var Tn=Gn.value;Tn!=null&&(Tn=+Tn)>=Tn&&(++Sn,Nn+=Tn)}}catch(Ei){Ye={error:Ei}}finally{try{Gn&&!Gn.done&&(dn=nr.return)&&dn.call(nr)}finally{if(Ye)throw Ye.error}}else{var Cr=-1;try{for(var pr=t.__values(Re),zr=pr.next();!zr.done;zr=pr.next()){var Tn=zr.value;(Tn=We(Tn,++Cr,Re))!=null&&(Tn=+Tn)>=Tn&&(++Sn,Nn+=Tn)}}catch(Ei){En={error:Ei}}finally{try{zr&&!zr.done&&(Dn=pr.return)&&Dn.call(pr)}finally{if(En)throw En.error}}}if(Sn)return Nn/Sn}function de(Re,We){return ne(Re,.5,We)}function ue(Re){var We,Ye,dn,En,Dn,Sn;return t.__generator(this,function(Nn){switch(Nn.label){case 0:Nn.trys.push([0,5,6,7]),We=t.__values(Re),Ye=We.next(),Nn.label=1;case 1:return Ye.done?[3,4]:(dn=Ye.value,[5,t.__values(dn)]);case 2:Nn.sent(),Nn.label=3;case 3:return Ye=We.next(),[3,1];case 4:return[3,7];case 5:return En=Nn.sent(),Dn={error:En},[3,7];case 6:try{Ye&&!Ye.done&&(Sn=We.return)&&Sn.call(We)}finally{if(Dn)throw Dn.error}return[7];case 7:return[2]}})}function Ne(Re){return Array.from(ue(Re))}function cn(Re,We){var Ye,dn,En,Dn,Sn,Nn=-1,nr=-1;if(We===void 0)try{for(var Gn=t.__values(Re),Tn=Gn.next();!Tn.done;Tn=Gn.next()){var Cr=Tn.value;++nr,Cr!=null&&(Sn>Cr||Sn===void 0&&Cr>=Cr)&&(Sn=Cr,Nn=nr)}}catch(Ei){Ye={error:Ei}}finally{try{Tn&&!Tn.done&&(dn=Gn.return)&&dn.call(Gn)}finally{if(Ye)throw Ye.error}}else try{for(var pr=t.__values(Re),zr=pr.next();!zr.done;zr=pr.next()){var Cr=zr.value;(Cr=We(Cr,++nr,Re))!=null&&(Sn>Cr||Sn===void 0&&Cr>=Cr)&&(Sn=Cr,Nn=nr)}}catch(Ei){En={error:Ei}}finally{try{zr&&!zr.done&&(Dn=pr.return)&&Dn.call(pr)}finally{if(En)throw En.error}}return Nn}function Fn(Re,We){var Ye,dn;We===void 0&&(We=wn);var En=[],Dn,Sn=!1;try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;Sn&&En.push(We(Dn,Gn)),Dn=Gn,Sn=!0}}catch(Tn){Ye={error:Tn}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}return En}function wn(Re,We){return[Re,We]}function en(Re,We,Ye){Re=+Re,We=+We,Ye=(En=arguments.length)<2?(We=Re,Re=0,1):En<3?1:+Ye;for(var dn=-1,En=Math.max(0,Math.ceil((We-Re)/Ye))|0,Dn=new Array(En);++dn<En;)Dn[dn]=Re+dn*Ye;return Dn}function tn(Re,We){var Ye,dn,En,Dn;We===void 0&&(We=s);var Sn,Nn=!1;if(We.length===1){var nr=void 0;try{for(var Gn=t.__values(Re),Tn=Gn.next();!Tn.done;Tn=Gn.next()){var Cr=Tn.value,pr=We(Cr);(Nn?s(pr,nr)<0:s(pr,pr)===0)&&(Sn=Cr,nr=pr,Nn=!0)}}catch(Oa){Ye={error:Oa}}finally{try{Tn&&!Tn.done&&(dn=Gn.return)&&dn.call(Gn)}finally{if(Ye)throw Ye.error}}}else try{for(var zr=t.__values(Re),Ei=zr.next();!Ei.done;Ei=zr.next()){var pr=Ei.value;(Nn?We(pr,Sn)<0:We(pr,pr)===0)&&(Sn=pr,Nn=!0)}}catch(Oa){En={error:Oa}}finally{try{Ei&&!Ei.done&&(Dn=zr.return)&&Dn.call(zr)}finally{if(En)throw En.error}}return Sn}function xn(Re,We){var Ye,dn;if(We===void 0&&(We=s),We.length===1)return cn(Re,We);var En,Dn=-1,Sn=-1;try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;++Sn,(Dn<0?We(Gn,Gn)===0:We(Gn,En)<0)&&(En=Gn,Dn=Sn)}}catch(Tn){Ye={error:Tn}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}return Dn}function Bn(Re,We){var Ye,dn,En,Dn;We===void 0&&(We=s);var Sn,Nn=!1;if(We.length===1){var nr=void 0;try{for(var Gn=t.__values(Re),Tn=Gn.next();!Tn.done;Tn=Gn.next()){var Cr=Tn.value,pr=We(Cr);(Nn?s(pr,nr)>0:s(pr,pr)===0)&&(Sn=Cr,nr=pr,Nn=!0)}}catch(Oa){Ye={error:Oa}}finally{try{Tn&&!Tn.done&&(dn=Gn.return)&&dn.call(Gn)}finally{if(Ye)throw Ye.error}}}else try{for(var zr=t.__values(Re),Ei=zr.next();!Ei.done;Ei=zr.next()){var pr=Ei.value;(Nn?We(pr,Sn)>0:We(pr,pr)===0)&&(Sn=pr,Nn=!0)}}catch(Oa){En={error:Oa}}finally{try{Ei&&!Ei.done&&(Dn=zr.return)&&Dn.call(zr)}finally{if(En)throw En.error}}return Sn}function vr(Re,We){var Ye,dn;if(We===void 0&&(We=s),We.length===1)return Je(Re,We);var En,Dn=-1,Sn=-1;try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;++Sn,(Dn<0?We(Gn,Gn)===0:We(Gn,En)>0)&&(En=Gn,Dn=Sn)}}catch(Tn){Ye={error:Tn}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}return Dn}function li(Re,We){var Ye=xn(Re,We);return Ye<0?void 0:Ye}var Me=Pe(Math.random);function Pe(Re){return function(Ye,dn,En){dn===void 0&&(dn=0),En===void 0&&(En=Ye.length);for(var Dn=En-(dn=+dn);Dn;){var Sn=Re()*Dn--|0,Nn=Ye[Dn+dn];Ye[Dn+dn]=Ye[Sn+dn],Ye[Sn+dn]=Nn}return Ye}}function te(Re,We){var Ye,dn,En,Dn,Sn=0;if(We===void 0)try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;(Gn=+Gn)&&(Sn+=Gn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}else{var Tn=-1;try{for(var Cr=t.__values(Re),pr=Cr.next();!pr.done;pr=Cr.next()){var Gn=pr.value;(Gn=+We(Gn,++Tn,Re))&&(Sn+=Gn)}}catch(zr){En={error:zr}}finally{try{pr&&!pr.done&&(Dn=Cr.return)&&Dn.call(Cr)}finally{if(En)throw En.error}}}return Sn}function ge(Re){if(!(Dn=Re.length))return[];for(var We=-1,Ye=yt(Re,Ht),dn=new Array(Ye);++We<Ye;)for(var En=-1,Dn,Sn=dn[We]=new Array(Dn);++En<Dn;)Sn[En]=Re[En][We];return dn}function Ht(Re){return Re.length}function re(){return ge(arguments)}function Te(Re,We){var Ye,dn;if(typeof We!="function")throw new TypeError("test is not a function");var En=-1;try{for(var Dn=t.__values(Re),Sn=Dn.next();!Sn.done;Sn=Dn.next()){var Nn=Sn.value;if(!We(Nn,++En,Re))return!1}}catch(nr){Ye={error:nr}}finally{try{Sn&&!Sn.done&&(dn=Dn.return)&&dn.call(Dn)}finally{if(Ye)throw Ye.error}}return!0}function ae(Re,We){var Ye,dn;if(typeof We!="function")throw new TypeError("test is not a function");var En=-1;try{for(var Dn=t.__values(Re),Sn=Dn.next();!Sn.done;Sn=Dn.next()){var Nn=Sn.value;if(We(Nn,++En,Re))return!0}}catch(nr){Ye={error:nr}}finally{try{Sn&&!Sn.done&&(dn=Dn.return)&&dn.call(Dn)}finally{if(Ye)throw Ye.error}}return!1}function xe(Re,We){var Ye,dn;if(typeof We!="function")throw new TypeError("test is not a function");var En=[],Dn=-1;try{for(var Sn=t.__values(Re),Nn=Sn.next();!Nn.done;Nn=Sn.next()){var nr=Nn.value;We(nr,++Dn,Re)&&En.push(nr)}}catch(Gn){Ye={error:Gn}}finally{try{Nn&&!Nn.done&&(dn=Sn.return)&&dn.call(Sn)}finally{if(Ye)throw Ye.error}}return En}function qe(Re,We){if(typeof Re[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof We!="function")throw new TypeError("mapper is not a function");return Array.from(Re,function(Ye,dn){return We(Ye,dn,Re)})}function zn(Re,We,Ye){var dn,En;if(typeof We!="function")throw new TypeError("reducer is not a function");var Dn=Re[Symbol.iterator](),Sn,Nn,nr=-1;if(arguments.length<3){if(dn=Dn.next(),Sn=dn.done,Ye=dn.value,Sn)return;++nr}for(;En=Dn.next(),Sn=En.done,Nn=En.value,!Sn;)Ye=We(Ye,Nn,++nr,Re);return Ye}function ar(Re){if(typeof Re[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(Re).reverse()}function _n(Re){for(var We,Ye,dn,En,Dn=[],Sn=1;Sn<arguments.length;Sn++)Dn[Sn-1]=arguments[Sn];Re=new Set(Re);try{for(var Nn=t.__values(Dn),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;try{for(var Tn=(dn=void 0,t.__values(Gn)),Cr=Tn.next();!Cr.done;Cr=Tn.next()){var pr=Cr.value;Re.delete(pr)}}catch(zr){dn={error:zr}}finally{try{Cr&&!Cr.done&&(En=Tn.return)&&En.call(Tn)}finally{if(dn)throw dn.error}}}}catch(zr){We={error:zr}}finally{try{nr&&!nr.done&&(Ye=Nn.return)&&Ye.call(Nn)}finally{if(We)throw We.error}}return Re}function Cn(Re,We){var Ye,dn,En,Dn=We[Symbol.iterator](),Sn=new Set;try{for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;if(Sn.has(Gn))return!1;for(var Tn=void 0,Cr=void 0;(En=Dn.next(),Tn=En.value,Cr=En.done,En)&&!Cr;){if(Object.is(Gn,Tn))return!1;Sn.add(Tn)}}}catch(pr){Ye={error:pr}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}return!0}function Or(Re){return Re instanceof Set?Re:new Set(Re)}function Ar(Re){for(var We,Ye,dn,En,Dn=[],Sn=1;Sn<arguments.length;Sn++)Dn[Sn-1]=arguments[Sn];Re=new Set(Re),Dn=Dn.map(Or);try{t:for(var Nn=t.__values(Re),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;try{for(var Tn=(dn=void 0,t.__values(Dn)),Cr=Tn.next();!Cr.done;Cr=Tn.next()){var pr=Cr.value;if(!pr.has(Gn)){Re.delete(Gn);continue t}}}catch(zr){dn={error:zr}}finally{try{Cr&&!Cr.done&&(En=Tn.return)&&En.call(Tn)}finally{if(dn)throw dn.error}}}}catch(zr){We={error:zr}}finally{try{nr&&!nr.done&&(Ye=Nn.return)&&Ye.call(Nn)}finally{if(We)throw We.error}}return Re}function hn(Re,We){var Ye,dn,En,Dn=Re[Symbol.iterator](),Sn=new Set;try{for(var Nn=t.__values(We),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;if(!Sn.has(Gn))for(var Tn=void 0,Cr=void 0;En=Dn.next(),Tn=En.value,Cr=En.done,En;){if(Cr)return!1;if(Sn.add(Tn),Object.is(Gn,Tn))break}}}catch(pr){Ye={error:pr}}finally{try{nr&&!nr.done&&(dn=Nn.return)&&dn.call(Nn)}finally{if(Ye)throw Ye.error}}return!0}function Pr(Re,We){return hn(We,Re)}function yr(){for(var Re,We,Ye,dn,En=[],Dn=0;Dn<arguments.length;Dn++)En[Dn]=arguments[Dn];var Sn=new Set;try{for(var Nn=t.__values(En),nr=Nn.next();!nr.done;nr=Nn.next()){var Gn=nr.value;try{for(var Tn=(Ye=void 0,t.__values(Gn)),Cr=Tn.next();!Cr.done;Cr=Tn.next()){var pr=Cr.value;Sn.add(pr)}}catch(zr){Ye={error:zr}}finally{try{Cr&&!Cr.done&&(dn=Tn.return)&&dn.call(Tn)}finally{if(Ye)throw Ye.error}}}}catch(zr){Re={error:zr}}finally{try{nr&&!nr.done&&(We=Nn.return)&&We.call(Nn)}finally{if(Re)throw Re.error}}return Sn}u.Adder=A,u.InternMap=R,u.InternSet=H,u.ascending=s,u.bin=$,u.bisect=a,u.bisectCenter=l,u.bisectLeft=o,u.bisectRight=a,u.bisector=h,u.count=f,u.cross=_,u.cumsum=M,u.descending=x,u.deviation=S,u.difference=_n,u.disjoint=Cn,u.every=Te,u.extent=P,u.filter=xe,u.fsum=O,u.greatest=Bn,u.greatestIndex=vr,u.group=X,u.groupSort=Ot,u.groups=at,u.histogram=$,u.index=ft,u.indexes=Rt,u.intersection=Ar,u.least=tn,u.leastIndex=xn,u.map=qe,u.max=Pt,u.maxIndex=Je,u.mean=Qe,u.median=de,u.merge=Ne,u.min=yt,u.minIndex=cn,u.nice=rt,u.pairs=Fn,u.permute=St,u.quantile=ne,u.quantileSorted=Wt,u.quickselect=Ft,u.range=en,u.reduce=zn,u.reverse=ar,u.rollup=pt,u.rollups=gt,u.scan=li,u.shuffle=Me,u.shuffler=Pe,u.some=ae,u.sort=xt,u.subset=Pr,u.sum=te,u.superset=hn,u.thresholdFreedmanDiaconis=$t,u.thresholdScott=De,u.thresholdSturges=ot,u.tickIncrement=bt,u.tickStep=Y,u.ticks=st,u.transpose=ge,u.union=yr,u.variance=m,u.zip=re,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u="$";function s(){}s.prototype=h.prototype={constructor:s,has:function(_){return u+_ in this},get:function(_){return this[u+_]},set:function(_,M){return this[u+_]=M,this},remove:function(_){var M=u+_;return M in this&&delete this[M]},clear:function(){for(var _ in this)_[0]===u&&delete this[_]},keys:function(){var _=[];for(var M in this)M[0]===u&&_.push(M.slice(1));return _},values:function(){var _=[];for(var M in this)M[0]===u&&_.push(this[M]);return _},entries:function(){var _=[];for(var M in this)M[0]===u&&_.push({key:M.slice(1),value:this[M]});return _},size:function(){var _=0;for(var M in this)M[0]===u&&++_;return _},empty:function(){for(var _ in this)if(_[0]===u)return!1;return!0},each:function(_){for(var M in this)M[0]===u&&_(this[M],M.slice(1),this)}};function h(y,_){var M=new s;if(y instanceof s)y.each(function(A,O){M.set(O,A)});else if(Array.isArray(y)){var x=-1,m=y.length,S;if(_==null)for(;++x<m;)M.set(x,y[x]);else for(;++x<m;)M.set(_(S=y[x],x,y),S)}else if(y)for(var P in y)M.set(P,y[P]);return M}function r(){var y=[],_=[],M,x,m;function S(A,O,R,H){if(O>=y.length)return M!=null&&A.sort(M),x!=null?x(A):A;for(var N=-1,K=A.length,V=y[O++],k,Z,X=h(),at,pt=R();++N<K;)(at=X.get(k=V(Z=A[N])+""))?at.push(Z):X.set(k,[Z]);return X.each(function(gt,ft){H(pt,ft,S(gt,O,R,H))}),pt}function P(A,O){if(++O>y.length)return A;var R,H=_[O-1];return x!=null&&O>=y.length?R=A.entries():(R=[],A.each(function(N,K){R.push({key:K,values:P(N,O)})})),H!=null?R.sort(function(N,K){return H(N.key,K.key)}):R}return m={object:function(O){return S(O,0,c,n)},map:function(O){return S(O,0,i,a)},entries:function(O){return P(S(O,0,i,a),0)},key:function(O){return y.push(O),m},sortKeys:function(O){return _[y.length-1]=O,m},sortValues:function(O){return M=O,m},rollup:function(O){return x=O,m}}}function c(){return{}}function n(y,_,M){y[_]=M}function i(){return h()}function a(y,_,M){y.set(_,M)}function o(){}var l=h.prototype;o.prototype=f.prototype={constructor:o,has:l.has,add:function(_){return _+="",this[u+_]=_,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};function f(y,_){var M=new o;if(y instanceof o)y.each(function(S){M.add(S)});else if(y){var x=-1,m=y.length;if(_==null)for(;++x<m;)M.add(y[x]);else for(;++x<m;)M.add(_(y[x],x,y))}return M}function v(y){var _=[];for(var M in y)_.push(M);return _}function b(y){var _=[];for(var M in y)_.push(y[M]);return _}function g(y){var _=[];for(var M in y)_.push({key:M,value:y[M]});return _}t.nest=r,t.set=f,t.map=h,t.keys=v,t.values=b,t.entries=g,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T,e("./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js"))})(this,function(u,s,h){"use strict";var r=1e-6;function c(){}var n=Infinity,i=n,a=-n,o=a,l={point:f,lineStart:c,lineEnd:c,polygonStart:c,polygonEnd:c,result:function(){var Ot=[[n,i],[a,o]];return a=o=-(i=n=Infinity),Ot}};function f(xt,Ot){xt<n&&(n=xt),xt>a&&(a=xt),Ot<i&&(i=Ot),Ot>o&&(o=Ot)}function v(xt,Ot,it){var At=Ot[1][0]-Ot[0][0],z=Ot[1][1]-Ot[0][1],q=xt.clipExtent&&xt.clipExtent();xt.scale(150).translate([0,0]),q!=null&&xt.clipExtent(null),s.geoStream(it,xt.stream(l));var mt=l.result(),et=Math.min(At/(mt[1][0]-mt[0][0]),z/(mt[1][1]-mt[0][1])),st=+Ot[0][0]+(At-et*(mt[1][0]+mt[0][0]))/2,bt=+Ot[0][1]+(z-et*(mt[1][1]+mt[0][1]))/2;return q!=null&&xt.clipExtent(q),xt.scale(et*150).translate([st,bt])}function b(xt,Ot,it){return v(xt,[[0,0],Ot],it)}function g(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function y(){var xt,Ot,it=s.geoAlbers(),At,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),q,mt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,st,bt={point:function($,Pt){st=[$,Pt]}};function Y(ot){var $=ot[0],Pt=ot[1];return st=null,At.point($,Pt),st||(q.point($,Pt),st)||(et.point($,Pt),st)}Y.invert=function(ot){var $=it.scale(),Pt=it.translate(),yt=(ot[0]-Pt[0])/$,Ft=(ot[1]-Pt[1])/$;return(Ft>=.12&&Ft<.234&&yt>=-.425&&yt<-.214?z:Ft>=.166&&Ft<.234&&yt>=-.214&&yt<-.115?mt:it).invert(ot)},Y.stream=function(ot){return xt&&Ot===ot?xt:xt=g([it.stream(Ot=ot),z.stream(ot),mt.stream(ot)])},Y.precision=function(ot){return arguments.length?(it.precision(ot),z.precision(ot),mt.precision(ot),rt()):it.precision()},Y.scale=function(ot){return arguments.length?(it.scale(ot),z.scale(ot*.35),mt.scale(ot),Y.translate(it.translate())):it.scale()},Y.translate=function(ot){if(!arguments.length)return it.translate();var $=it.scale(),Pt=+ot[0],yt=+ot[1];return At=it.translate(ot).clipExtent([[Pt-.455*$,yt-.238*$],[Pt+.455*$,yt+.238*$]]).stream(bt),q=z.translate([Pt-.307*$,yt+.201*$]).clipExtent([[Pt-.425*$+r,yt+.12*$+r],[Pt-.214*$-r,yt+.234*$-r]]).stream(bt),et=mt.translate([Pt-.205*$,yt+.212*$]).clipExtent([[Pt-.214*$+r,yt+.166*$+r],[Pt-.115*$-r,yt+.234*$-r]]).stream(bt),rt()},Y.fitExtent=function(ot,$){return v(Y,ot,$)},Y.fitSize=function(ot,$){return b(Y,ot,$)};function rt(){return xt=Ot=null,Y}return Y.drawCompositionBorders=function(ot){var $=it([-102.91,26.3]),Pt=it([-104,27.5]),yt=it([-108,29.1]),Ft=it([-110,29.1]),Qt=it([-110,26.7]),ne=it([-112.8,27.6]),Wt=it([-114.3,30.6]),$t=it([-119.3,30.1]);ot.moveTo($[0],$[1]),ot.lineTo(Pt[0],Pt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(Ft[0],Ft[1]),ot.moveTo(Qt[0],Qt[1]),ot.lineTo(ne[0],ne[1]),ot.lineTo(Wt[0],Wt[1]),ot.lineTo($t[0],$t[1])},Y.getCompositionBorders=function(){var ot=h.path();return this.drawCompositionBorders(ot),ot.toString()},Y.scale(1070)}function _(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function M(){var xt,Ot,it=s.geoAlbers(),At,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),q,mt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,st=s.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),bt,Y=s.geoEquirectangular().rotate([173,14]),rt,ot=s.geoEquirectangular().rotate([-145,-16.8]),$,Pt,yt={point:function(Wt,$t){Pt=[Wt,$t]}};function Ft(ne){var Wt=ne[0],$t=ne[1];return Pt=null,At.point(Wt,$t),Pt||(q.point(Wt,$t),Pt)||(et.point(Wt,$t),Pt)||(bt.point(Wt,$t),Pt)||(rt.point(Wt,$t),Pt)||($.point(Wt,$t),Pt)}Ft.invert=function(ne){var Wt=it.scale(),$t=it.translate(),De=(ne[0]-$t[0])/Wt,Je=(ne[1]-$t[1])/Wt;return(Je>=.12&&Je<.234&&De>=-.425&&De<-.214?z:Je>=.166&&Je<.234&&De>=-.214&&De<-.115?mt:Je>=.2064&&Je<.2413&&De>=.312&&De<.385?st:Je>=.09&&Je<.1197&&De>=-.4243&&De<-.3232?Y:Je>=-.0518&&Je<.0895&&De>=-.4243&&De<-.3824?ot:it).invert(ne)},Ft.stream=function(ne){return xt&&Ot===ne?xt:xt=_([it.stream(Ot=ne),z.stream(ne),mt.stream(ne),st.stream(ne),Y.stream(ne),ot.stream(ne)])},Ft.precision=function(ne){return arguments.length?(it.precision(ne),z.precision(ne),mt.precision(ne),st.precision(ne),Y.precision(ne),ot.precision(ne),Qt()):it.precision()},Ft.scale=function(ne){return arguments.length?(it.scale(ne),z.scale(ne*.35),mt.scale(ne),st.scale(ne),Y.scale(ne*2),ot.scale(ne),Ft.translate(it.translate())):it.scale()},Ft.translate=function(ne){if(!arguments.length)return it.translate();var Wt=it.scale(),$t=+ne[0],De=+ne[1];return At=it.translate(ne).clipExtent([[$t-.455*Wt,De-.238*Wt],[$t+.455*Wt,De+.238*Wt]]).stream(yt),q=z.translate([$t-.307*Wt,De+.201*Wt]).clipExtent([[$t-.425*Wt+r,De+.12*Wt+r],[$t-.214*Wt-r,De+.233*Wt-r]]).stream(yt),et=mt.translate([$t-.205*Wt,De+.212*Wt]).clipExtent([[$t-.214*Wt+r,De+.166*Wt+r],[$t-.115*Wt-r,De+.233*Wt-r]]).stream(yt),bt=st.translate([$t+.35*Wt,De+.224*Wt]).clipExtent([[$t+.312*Wt+r,De+.2064*Wt+r],[$t+.385*Wt-r,De+.233*Wt-r]]).stream(yt),rt=Y.translate([$t-.492*Wt,De+.09*Wt]).clipExtent([[$t-.4243*Wt+r,De+.0903*Wt+r],[$t-.3233*Wt-r,De+.1197*Wt-r]]).stream(yt),$=ot.translate([$t-.408*Wt,De+.018*Wt]).clipExtent([[$t-.4244*Wt+r,De-.0519*Wt+r],[$t-.3824*Wt-r,De+.0895*Wt-r]]).stream(yt),Qt()},Ft.fitExtent=function(ne,Wt){return v(Ft,ne,Wt)},Ft.fitSize=function(ne,Wt){return b(Ft,ne,Wt)};function Qt(){return xt=Ot=null,Ft}return Ft.drawCompositionBorders=function(ne){var Wt=it([-110.4641,28.2805]),$t=it([-104.0597,28.9528]),De=it([-103.7049,25.1031]),Je=it([-109.8337,24.4531]),Qe=it([-124.4745,28.1407]),de=it([-110.931,30.8844]),ue=it([-109.8337,24.4531]),Ne=it([-122.4628,21.8562]),cn=it([-76.8579,25.1544]),Fn=it([-72.429,24.2097]),wn=it([-72.8265,22.7056]),en=it([-77.1852,23.6392]),tn=it([-125.0093,29.7791]),xn=it([-118.5193,31.3262]),Bn=it([-118.064,29.6912]),vr=it([-124.4369,28.169]),li=it([-128.1314,37.4582]),Me=it([-125.2132,38.214]),Pe=it([-122.3616,30.5115]),te=it([-125.0315,29.8211]);ne.moveTo(Wt[0],Wt[1]),ne.lineTo($t[0],$t[1]),ne.lineTo(De[0],De[1]),ne.lineTo(De[0],De[1]),ne.lineTo(Je[0],Je[1]),ne.closePath(),ne.moveTo(Qe[0],Qe[1]),ne.lineTo(de[0],de[1]),ne.lineTo(ue[0],ue[1]),ne.lineTo(ue[0],ue[1]),ne.lineTo(Ne[0],Ne[1]),ne.closePath(),ne.moveTo(cn[0],cn[1]),ne.lineTo(Fn[0],Fn[1]),ne.lineTo(wn[0],wn[1]),ne.lineTo(wn[0],wn[1]),ne.lineTo(en[0],en[1]),ne.closePath(),ne.moveTo(tn[0],tn[1]),ne.lineTo(xn[0],xn[1]),ne.lineTo(Bn[0],Bn[1]),ne.lineTo(Bn[0],Bn[1]),ne.lineTo(vr[0],vr[1]),ne.closePath(),ne.moveTo(li[0],li[1]),ne.lineTo(Me[0],Me[1]),ne.lineTo(Pe[0],Pe[1]),ne.lineTo(Pe[0],Pe[1]),ne.lineTo(te[0],te[1]),ne.closePath()},Ft.getCompositionBorders=function(){var ne=h.path();return this.drawCompositionBorders(ne),ne.toString()},Ft.scale(1070)}function x(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function m(){var xt,Ot,it=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),At,z=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),q,mt,et={point:function(rt,ot){mt=[rt,ot]}};function st(Y){var rt=Y[0],ot=Y[1];return mt=null,At.point(rt,ot),mt||(q.point(rt,ot),mt)}st.invert=function(Y){var rt=it.scale(),ot=it.translate(),$=(Y[0]-ot[0])/rt,Pt=(Y[1]-ot[1])/rt;return(Pt>=.05346&&Pt<.0897&&$>=-.13388&&$<-.0322?z:it).invert(Y)},st.stream=function(Y){return xt&&Ot===Y?xt:xt=x([it.stream(Ot=Y),z.stream(Y)])},st.precision=function(Y){return arguments.length?(it.precision(Y),z.precision(Y),bt()):it.precision()},st.scale=function(Y){return arguments.length?(it.scale(Y),z.scale(Y),st.translate(it.translate())):it.scale()},st.translate=function(Y){if(!arguments.length)return it.translate();var rt=it.scale(),ot=+Y[0],$=+Y[1];return At=it.translate(Y).clipExtent([[ot-.06857*rt,$-.1288*rt],[ot+.13249*rt,$+.06*rt]]).stream(et),q=z.translate([ot+.1*rt,$-.094*rt]).clipExtent([[ot-.1331*rt+r,$+.053457*rt+r],[ot-.0354*rt-r,$+.08969*rt-r]]).stream(et),bt()},st.fitExtent=function(Y,rt){return v(st,Y,rt)},st.fitSize=function(Y,rt){return b(st,Y,rt)};function bt(){return xt=Ot=null,st}return st.drawCompositionBorders=function(Y){var rt=it([-14.034675,34.965007]),ot=it([-7.4208899,35.536988]),$=it([-7.3148275,33.54359]);Y.moveTo(rt[0],rt[1]),Y.lineTo(ot[0],ot[1]),Y.lineTo($[0],$[1])},st.getCompositionBorders=function(){var Y=h.path();return this.drawCompositionBorders(Y),Y.toString()},st.scale(2700)}function S(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function P(){var xt,Ot,it=s.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),At,z=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),q,mt=s.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),et,st,bt={point:function($,Pt){st=[$,Pt]}};function Y(ot){var $=ot[0],Pt=ot[1];return st=null,At.point($,Pt),st||(q.point($,Pt),st)||(et.point($,Pt),st)}Y.invert=function(ot){var $=it.scale(),Pt=it.translate(),yt=(ot[0]-Pt[0])/$,Ft=(ot[1]-Pt[1])/$;return(Ft>=.0093&&Ft<.03678&&yt>=-.03875&&yt<-.0116?z:Ft>=-.0412&&Ft<.0091&&yt>=-.07782&&yt<-.01166?mt:it).invert(ot)},Y.stream=function(ot){return xt&&Ot===ot?xt:xt=S([it.stream(Ot=ot),z.stream(ot),mt.stream(ot)])},Y.precision=function(ot){return arguments.length?(it.precision(ot),z.precision(ot),mt.precision(ot),rt()):it.precision()},Y.scale=function(ot){return arguments.length?(it.scale(ot),z.scale(ot),mt.scale(ot*.6),Y.translate(it.translate())):it.scale()},Y.translate=function(ot){if(!arguments.length)return it.translate();var $=it.scale(),Pt=+ot[0],yt=+ot[1];return At=it.translate(ot).clipExtent([[Pt-.0115*$,yt-.1138*$],[Pt+.2105*$,yt+.0673*$]]).stream(bt),q=z.translate([Pt-.0265*$,yt+.025*$]).clipExtent([[Pt-.0388*$+r,yt+.0093*$+r],[Pt-.0116*$-r,yt+.0368*$-r]]).stream(bt),et=mt.translate([Pt-.045*$,yt+-.02*$]).clipExtent([[Pt-.0778*$+r,yt-.0413*$+r],[Pt-.0117*$-r,yt+.0091*$-r]]).stream(bt),rt()},Y.fitExtent=function(ot,$){return v(Y,ot,$)},Y.fitSize=function(ot,$){return b(Y,ot,$)};function rt(){return xt=Ot=null,Y}return Y.drawCompositionBorders=function(ot){var $=it([-12.8351,38.7113]),Pt=it([-10.8482,38.7633]),yt=it([-10.8181,37.2072]),Ft=it([-12.7345,37.1573]),Qt=it([-16.0753,41.4436]),ne=it([-10.9168,41.6861]),Wt=it([-10.8557,38.7747]),$t=it([-15.6728,38.5505]);ot.moveTo($[0],$[1]),ot.lineTo(Pt[0],Pt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(Ft[0],Ft[1]),ot.closePath(),ot.moveTo(Qt[0],Qt[1]),ot.lineTo(ne[0],ne[1]),ot.lineTo(Wt[0],Wt[1]),ot.lineTo(Wt[0],Wt[1]),ot.lineTo($t[0],$t[1]),ot.closePath()},Y.getCompositionBorders=function(){var ot=h.path();return this.drawCompositionBorders(ot),ot.toString()},Y.scale(4200)}function A(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function O(){var xt,Ot,it=s.geoMercator().rotate([80,1.5]),At,z=s.geoMercator().rotate([90.73,1]),q,mt,et={point:function(rt,ot){mt=[rt,ot]}};function st(Y){var rt=Y[0],ot=Y[1];return mt=null,At.point(rt,ot),mt||(q.point(rt,ot),mt)}st.invert=function(Y){var rt=it.scale(),ot=it.translate(),$=(Y[0]-ot[0])/rt,Pt=(Y[1]-ot[1])/rt;return(Pt>=-.0676&&Pt<-.026&&$>=-.0857&&$<-.0263?z:it).invert(Y)},st.stream=function(Y){return xt&&Ot===Y?xt:xt=A([it.stream(Ot=Y),z.stream(Y)])},st.precision=function(Y){return arguments.length?(it.precision(Y),z.precision(Y),bt()):it.precision()},st.scale=function(Y){return arguments.length?(it.scale(Y),z.scale(Y),st.translate(it.translate())):it.scale()},st.translate=function(Y){if(!arguments.length)return it.translate();var rt=it.scale(),ot=+Y[0],$=+Y[1];return At=it.translate(Y).clipExtent([[ot-.0262*rt,$-.0734*rt],[ot+.1741*rt,$+.079*rt]]).stream(et),q=z.translate([ot-.06*rt,$-.04*rt]).clipExtent([[ot-.0857*rt+r,$-.0676*rt+r],[ot-.0263*rt-r,$-.026*rt-r]]).stream(et),bt()},st.fitExtent=function(Y,rt){return v(st,Y,rt)},st.fitSize=function(Y,rt){return b(st,Y,rt)};function bt(){return xt=Ot=null,st}return st.drawCompositionBorders=function(Y){var rt=it([-84.9032,2.3757]),ot=it([-81.5047,2.3708]),$=it([-81.5063,-.01]),Pt=it([-84.9086,-.005]);Y.moveTo(rt[0],rt[1]),Y.lineTo(ot[0],ot[1]),Y.lineTo($[0],$[1]),Y.lineTo(Pt[0],Pt[1]),Y.closePath()},st.getCompositionBorders=function(){var Y=h.path();return this.drawCompositionBorders(Y),Y.toString()},st.scale(3500)}function R(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function H(){var xt,Ot,it=s.geoTransverseMercator().rotate([72,37]),At,z=s.geoStereographic().rotate([72,0]),q,mt=s.geoMercator().rotate([80,33.5]),et,st=s.geoMercator().rotate([110,25]),bt,Y,rt={point:function(yt,Ft){Y=[yt,Ft]}};function ot(Pt){var yt=Pt[0],Ft=Pt[1];return Y=null,At.point(yt,Ft),Y||(q.point(yt,Ft),Y)||(et.point(yt,Ft),Y)||(bt.point(yt,Ft),Y)}ot.invert=function(Pt){var yt=it.scale(),Ft=it.translate(),Qt=(Pt[0]-Ft[0])/yt,ne=(Pt[1]-Ft[1])/yt;return(ne>=.2582&&ne<.32&&Qt>=-.1036&&Qt<-.087?z:ne>=-.01298&&ne<.0133&&Qt>=-.11396&&Qt<-.05944?mt:ne>=.01539&&ne<.03911&&Qt>=-.089&&Qt<-.0588?st:it).invert(Pt)},ot.stream=function(Pt){return xt&&Ot===Pt?xt:xt=R([it.stream(Ot=Pt),z.stream(Pt),mt.stream(Pt),st.stream(Pt)])},ot.precision=function(Pt){return arguments.length?(it.precision(Pt),z.precision(Pt),mt.precision(Pt),st.precision(Pt),$()):it.precision()},ot.scale=function(Pt){return arguments.length?(it.scale(Pt),z.scale(Pt*.15),mt.scale(Pt*1.5),st.scale(Pt*1.5),ot.translate(it.translate())):it.scale()},ot.translate=function(Pt){if(!arguments.length)return it.translate();var yt=it.scale(),Ft=+Pt[0],Qt=+Pt[1];return At=it.translate(Pt).clipExtent([[Ft-.059*yt,Qt-.3835*yt],[Ft+.4498*yt,Qt+.3375*yt]]).stream(rt),q=z.translate([Ft-.087*yt,Qt+.17*yt]).clipExtent([[Ft-.1166*yt+r,Qt+.2582*yt+r],[Ft-.06*yt-r,Qt+.32*yt-r]]).stream(rt),et=mt.translate([Ft-.092*yt,Qt-0*yt]).clipExtent([[Ft-.114*yt+r,Qt-.013*yt+r],[Ft-.0594*yt-r,Qt+.0133*yt-r]]).stream(rt),bt=st.translate([Ft-.089*yt,Qt-.0265*yt]).clipExtent([[Ft-.089*yt+r,Qt+.0154*yt+r],[Ft-.0588*yt-r,Qt+.0391*yt-r]]).stream(rt),$()},ot.fitExtent=function(Pt,yt){return v(ot,Pt,yt)},ot.fitSize=function(Pt,yt){return b(ot,Pt,yt)};function $(){return xt=Ot=null,ot}return ot.drawCompositionBorders=function(Pt){var yt=it([-82.6999,-51.3043]),Ft=it([-77.5442,-51.6631]),Qt=it([-78.0254,-55.186]),ne=it([-83.6106,-54.7785]),Wt=it([-80.0638,-35.984]),$t=it([-76.2153,-36.1811]),De=it([-76.2994,-37.6839]),Je=it([-80.2231,-37.4757]),Qe=it([-78.442,-37.706]),de=it([-76.263,-37.8054]),ue=it([-76.344,-39.1595]),Ne=it([-78.5638,-39.0559]);Pt.moveTo(yt[0],yt[1]),Pt.lineTo(Ft[0],Ft[1]),Pt.lineTo(Qt[0],Qt[1]),Pt.lineTo(Qt[0],Qt[1]),Pt.lineTo(ne[0],ne[1]),Pt.closePath(),Pt.moveTo(Wt[0],Wt[1]),Pt.lineTo($t[0],$t[1]),Pt.lineTo(De[0],De[1]),Pt.lineTo(De[0],De[1]),Pt.lineTo(Je[0],Je[1]),Pt.closePath(),Pt.moveTo(Qe[0],Qe[1]),Pt.lineTo(de[0],de[1]),Pt.lineTo(ue[0],ue[1]),Pt.lineTo(ue[0],ue[1]),Pt.lineTo(Ne[0],Ne[1]),Pt.closePath()},ot.getCompositionBorders=function(){var Pt=h.path();return this.drawCompositionBorders(Pt),Pt.toString()},ot.scale(700)}function N(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function K(){var xt,Ot,it=s.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),At,z=s.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),q,mt=s.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),et,st,bt={point:function($,Pt){st=[$,Pt]}};function Y(ot){var $=ot[0],Pt=ot[1];return st=null,At.point($,Pt),st||(q.point($,Pt),st)||(et.point($,Pt),st)}Y.invert=function(ot){var $=it.scale(),Pt=it.translate(),yt=(ot[0]-Pt[0])/$,Ft=(ot[1]-Pt[1])/$;return(Ft>=-.10925&&Ft<-.02701&&yt>=-.135&&yt<-.0397?z:Ft>=.04713&&Ft<.11138&&yt>=-.03986&&yt<.051?mt:it).invert(ot)},Y.stream=function(ot){return xt&&Ot===ot?xt:xt=N([it.stream(Ot=ot),z.stream(ot),mt.stream(ot)])},Y.precision=function(ot){return arguments.length?(it.precision(ot),z.precision(ot),mt.precision(ot),rt()):it.precision()},Y.scale=function(ot){return arguments.length?(it.scale(ot),z.scale(ot),mt.scale(ot*.7),Y.translate(it.translate())):it.scale()},Y.translate=function(ot){if(!arguments.length)return it.translate();var $=it.scale(),Pt=+ot[0],yt=+ot[1];return At=it.translate(ot).clipExtent([[Pt-.1352*$,yt-.1091*$],[Pt+.117*$,yt+.098*$]]).stream(bt),q=z.translate([Pt-.0425*$,yt-.005*$]).clipExtent([[Pt-.135*$+r,yt-.1093*$+r],[Pt-.0397*$-r,yt-.027*$-r]]).stream(bt),et=mt.translate(ot).clipExtent([[Pt-.0399*$+r,yt+.0471*$+r],[Pt+.051*$-r,yt+.1114*$-r]]).stream(bt),rt()},Y.fitExtent=function(ot,$){return v(Y,ot,$)},Y.fitSize=function(ot,$){return b(Y,ot,$)};function rt(){return xt=Ot=null,Y}return Y.drawCompositionBorders=function(ot){var $=it([126.01320483689143,41.621090310215585]),Pt=it([133.04304387025903,42.15087523707186]),yt=it([133.3021766080688,37.43975444725098]),Ft=it([126.87889168628224,36.95488945159779]),Qt=it([132.9,29.8]),ne=it([134,33]),Wt=it([139.3,33.2]),$t=it([139.16,30.5]);ot.moveTo($[0],$[1]),ot.lineTo(Pt[0],Pt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(Ft[0],Ft[1]),ot.closePath(),ot.moveTo(Qt[0],Qt[1]),ot.lineTo(ne[0],ne[1]),ot.lineTo(Wt[0],Wt[1]),ot.lineTo($t[0],$t[1])},Y.getCompositionBorders=function(){var ot=h.path();return this.drawCompositionBorders(ot),ot.toString()},Y.scale(2200)}function V(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function k(){var xt,Ot,it=s.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),At,z=s.geoMercator().center([-53.2,3.9]),q,mt=s.geoMercator().center([-61.03,14.67]),et,st=s.geoMercator().center([-61.46,16.14]),bt,Y=s.geoMercator().center([-62.85,17.92]),rt,ot=s.geoMercator().center([-56.23,46.93]),$,Pt=s.geoMercator().center([45.16,-12.8]),yt,Ft=s.geoMercator().center([55.52,-21.13]),Qt,ne=s.geoMercator().center([165.8,-21.07]),Wt,$t=s.geoMercator().center([-178.1,-14.3]),De,Je=s.geoMercator().center([-150.55,-17.11]),Qe,de=s.geoMercator().center([-150.55,-17.11]),ue,Ne,cn={point:function(tn,xn){Ne=[tn,xn]}};function Fn(en){var tn=en[0],xn=en[1];return Ne=null,At.point(tn,xn),Ne||(q.point(tn,xn),Ne)||(et.point(tn,xn),Ne)||(bt.point(tn,xn),Ne)||(rt.point(tn,xn),Ne)||($.point(tn,xn),Ne)||(yt.point(tn,xn),Ne)||(Qt.point(tn,xn),Ne)||(Wt.point(tn,xn),Ne)||(De.point(tn,xn),Ne)||(Qe.point(tn,xn),Ne)||(ue.point(tn,xn),Ne)}Fn.invert=function(en){var tn=it.scale(),xn=it.translate(),Bn=(en[0]-xn[0])/tn,vr=(en[1]-xn[1])/tn;return(vr>=.029&&vr<.0864&&Bn>=-.14&&Bn<-.0996?z:vr>=0&&vr<.029&&Bn>=-.14&&Bn<-.0996?mt:vr>=-.032&&vr<0&&Bn>=-.14&&Bn<-.0996?st:vr>=-.052&&vr<-.032&&Bn>=-.14&&Bn<-.0996?Y:vr>=-.076&&vr<.052&&Bn>=-.14&&Bn<-.0996?ot:vr>=-.076&&vr<-.052&&Bn>=.0967&&Bn<.1371?Pt:vr>=-.052&&vr<-.02&&Bn>=.0967&&Bn<.1371?Ft:vr>=-.02&&vr<.012&&Bn>=.0967&&Bn<.1371?ne:vr>=.012&&vr<.033&&Bn>=.0967&&Bn<.1371?$t:vr>=.033&&vr<.0864&&Bn>=.0967&&Bn<.1371?Je:it).invert(en)},Fn.stream=function(en){return xt&&Ot===en?xt:xt=V([it.stream(Ot=en),z.stream(en),mt.stream(en),st.stream(en),Y.stream(en),ot.stream(en),Pt.stream(en),Ft.stream(en),ne.stream(en),$t.stream(en),Je.stream(en),de.stream(en)])},Fn.precision=function(en){return arguments.length?(it.precision(en),z.precision(en),mt.precision(en),st.precision(en),Y.precision(en),ot.precision(en),Pt.precision(en),Ft.precision(en),ne.precision(en),$t.precision(en),Je.precision(en),de.precision(en),wn()):it.precision()},Fn.scale=function(en){return arguments.length?(it.scale(en),z.scale(en*.6),mt.scale(en*1.6),st.scale(en*1.4),Y.scale(en*5),ot.scale(en*1.3),Pt.scale(en*1.6),Ft.scale(en*1.2),ne.scale(en*.3),$t.scale(en*2.7),Je.scale(en*.5),de.scale(en*.06),Fn.translate(it.translate())):it.scale()},Fn.translate=function(en){if(!arguments.length)return it.translate();var tn=it.scale(),xn=+en[0],Bn=+en[1];return At=it.translate(en).clipExtent([[xn-.0996*tn,Bn-.0908*tn],[xn+.0967*tn,Bn+.0864*tn]]).stream(cn),q=z.translate([xn-.12*tn,Bn+.0575*tn]).clipExtent([[xn-.14*tn+r,Bn+.029*tn+r],[xn-.0996*tn-r,Bn+.0864*tn-r]]).stream(cn),et=mt.translate([xn-.12*tn,Bn+.013*tn]).clipExtent([[xn-.14*tn+r,Bn+0*tn+r],[xn-.0996*tn-r,Bn+.029*tn-r]]).stream(cn),bt=st.translate([xn-.12*tn,Bn-.014*tn]).clipExtent([[xn-.14*tn+r,Bn-.032*tn+r],[xn-.0996*tn-r,Bn+0*tn-r]]).stream(cn),rt=Y.translate([xn-.12*tn,Bn-.044*tn]).clipExtent([[xn-.14*tn+r,Bn-.052*tn+r],[xn-.0996*tn-r,Bn-.032*tn-r]]).stream(cn),$=ot.translate([xn-.12*tn,Bn-.065*tn]).clipExtent([[xn-.14*tn+r,Bn-.076*tn+r],[xn-.0996*tn-r,Bn-.052*tn-r]]).stream(cn),yt=Pt.translate([xn+.117*tn,Bn-.064*tn]).clipExtent([[xn+.0967*tn+r,Bn-.076*tn+r],[xn+.1371*tn-r,Bn-.052*tn-r]]).stream(cn),Qt=Ft.translate([xn+.116*tn,Bn-.0355*tn]).clipExtent([[xn+.0967*tn+r,Bn-.052*tn+r],[xn+.1371*tn-r,Bn-.02*tn-r]]).stream(cn),Wt=ne.translate([xn+.116*tn,Bn-.0048*tn]).clipExtent([[xn+.0967*tn+r,Bn-.02*tn+r],[xn+.1371*tn-r,Bn+.012*tn-r]]).stream(cn),De=$t.translate([xn+.116*tn,Bn+.022*tn]).clipExtent([[xn+.0967*tn+r,Bn+.012*tn+r],[xn+.1371*tn-r,Bn+.033*tn-r]]).stream(cn),ue=de.translate([xn+.11*tn,Bn+.045*tn]).clipExtent([[xn+.0967*tn+r,Bn+.033*tn+r],[xn+.1371*tn-r,Bn+.06*tn-r]]).stream(cn),Qe=Je.translate([xn+.115*tn,Bn+.075*tn]).clipExtent([[xn+.0967*tn+r,Bn+.06*tn+r],[xn+.1371*tn-r,Bn+.0864*tn-r]]).stream(cn),wn()},Fn.fitExtent=function(en,tn){return v(Fn,en,tn)},Fn.fitSize=function(en,tn){return b(Fn,en,tn)};function wn(){return xt=Ot=null,Fn}return Fn.drawCompositionBorders=function(en){var tn,xn,Bn,vr;tn=it([-7.938886725111036,43.7219460918835]),xn=it([-4.832080896458295,44.12930268549372]),Bn=it([-4.205299743793263,40.98096346967365]),vr=it([-7.071796453126152,40.610037319181444]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([-8.42751373617692,45.32889452553031]),xn=it([-5.18599305777107,45.7566442062976]),Bn=it([-4.832080905154431,44.129302726751426]),vr=it([-7.938886737126192,43.72194613263854]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([-9.012656899657046,47.127733821030176]),xn=it([-5.6105244772793155,47.579777861410626]),Bn=it([-5.185993067168585,45.756644248170346]),vr=it([-8.427513749141811,45.32889456686326]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([-9.405747558985553,48.26506375557457]),xn=it([-5.896175018439575,48.733352850851624]),Bn=it([-5.610524487556043,47.57977790393761]),vr=it([-9.012656913808351,47.127733862971255]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([-9.908436061346974,49.642448789505856]),xn=it([-6.262026716233124,50.131426841787174]),Bn=it([-5.896175029331232,48.73335289377258]),vr=it([-9.40574757396393,48.26506379787767]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([11.996907706504462,50.16039028163579]),xn=it([15.649907879773343,49.68279246765253]),Bn=it([15.156712840526632,48.30371557625831]),vr=it([11.64122661754411,48.761078240546816]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([11.641226606955788,48.7610781975889]),xn=it([15.156712825832164,48.30371553390465]),Bn=it([14.549932166241172,46.4866532486199]),vr=it([11.204443787952183,46.91899233914248]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([11.204443778297161,46.918992296823646]),xn=it([14.549932152815039,46.486653206856396]),Bn=it([13.994409796764009,44.695833444323256]),vr=it([10.805306599253848,45.105133870684924]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([10.805306590412085,45.10513382903308]),xn=it([13.99440978444733,44.695833403183606]),Bn=it([13.654633799024392,43.53552468558152]),vr=it([10.561516803980956,43.930671459798624]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([10.561516795617383,43.93067141859757]),xn=it([13.654633787361952,43.5355246448671]),Bn=it([12.867691604239901,40.640701985019405]),vr=it([9.997809515987688,41.00288343254471]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([10.8,42.4]),xn=it([12.8,42.13]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1])},Fn.getCompositionBorders=function(){var en=h.path();return this.drawCompositionBorders(en),en.toString()},Fn.scale(2700)}function Z(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function X(){var xt,Ot,it=s.geoConicConformal().rotate([-10,-53]).parallels([0,60]),At,z=s.geoMercator().center([-61.46,16.14]),q,mt=s.geoMercator().center([-53.2,3.9]),et,st=s.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),bt,Y=s.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),rt,ot=s.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),$,Pt=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),yt,Ft=s.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),Qt,ne=s.geoMercator().center([-61.03,14.67]),Wt,$t=s.geoMercator().center([45.16,-12.8]),De,Je=s.geoMercator().center([55.52,-21.13]),Qe,de=s.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),ue,Ne,cn={point:function(tn,xn){Ne=[tn,xn]}};function Fn(en){var tn=en[0],xn=en[1];return Ne=null,At.point(tn,xn),Ne||(et.point(tn,xn),Ne)||(Wt.point(tn,xn),Ne)||(q.point(tn,xn),Ne)||(Qt.point(tn,xn),Ne)||(yt.point(tn,xn),Ne)||(De.point(tn,xn),Ne)||(Qe.point(tn,xn),Ne)||(ue.point(tn,xn),Ne)||(bt.point(tn,xn),Ne)||(rt.point(tn,xn),Ne)||($.point(tn,xn),Ne)}Fn.invert=function(en){var tn=it.scale(),xn=it.translate(),Bn=(en[0]-(xn[0]+.08*tn))/tn,vr=(en[1]-xn[1])/tn;return(vr>=-.31&&vr<-.24&&Bn>=.14&&Bn<.24?z:vr>=-.24&&vr<-.17&&Bn>=.14&&Bn<.24?mt:vr>=-.17&&vr<-.12&&Bn>=.21&&Bn<.24?Y:vr>=-.17&&vr<-.14&&Bn>=.14&&Bn<.165?ot:vr>=-.17&&vr<-.1&&Bn>=.14&&Bn<.24?st:vr>=-.1&&vr<-.03&&Bn>=.14&&Bn<.24?Pt:vr>=-.03&&vr<.04&&Bn>=.14&&Bn<.24?Ft:vr>=-.31&&vr<-.24&&Bn>=.24&&Bn<.34?ne:vr>=-.24&&vr<-.17&&Bn>=.24&&Bn<.34?$t:vr>=-.17&&vr<-.1&&Bn>=.24&&Bn<.34?Je:vr>=-.1&&vr<-.03&&Bn>=.24&&Bn<.34?de:it).invert(en)},Fn.stream=function(en){return xt&&Ot===en?xt:xt=Z([it.stream(Ot=en),mt.stream(en),ne.stream(en),z.stream(en),Ft.stream(en),Pt.stream(en),$t.stream(en),Je.stream(en),de.stream(en),st.stream(en),Y.stream(en),ot.stream(en)])},Fn.precision=function(en){return arguments.length?(it.precision(en),mt.precision(en),ne.precision(en),z.precision(en),Ft.precision(en),Pt.precision(en),$t.precision(en),Je.precision(en),de.precision(en),st.precision(en),Y.precision(en),ot.precision(en),wn()):it.precision()},Fn.scale=function(en){return arguments.length?(it.scale(en),z.scale(en*3),mt.scale(en*.8),ne.scale(en*3.5),Je.scale(en*2.7),st.scale(en*2),Y.scale(en*2),ot.scale(en*2),Pt.scale(en*3),Ft.scale(en),$t.scale(en*5.5),de.scale(en*6),Fn.translate(it.translate())):it.scale()},Fn.translate=function(en){if(!arguments.length)return it.translate();var tn=it.scale(),xn=+en[0],Bn=+en[1];return At=it.translate([xn-.08*tn,Bn]).clipExtent([[xn-.51*tn,Bn-.33*tn],[xn+.5*tn,Bn+.33*tn]]).stream(cn),q=z.translate([xn+.19*tn,Bn-.275*tn]).clipExtent([[xn+.14*tn+r,Bn-.31*tn+r],[xn+.24*tn-r,Bn-.24*tn-r]]).stream(cn),et=mt.translate([xn+.19*tn,Bn-.205*tn]).clipExtent([[xn+.14*tn+r,Bn-.24*tn+r],[xn+.24*tn-r,Bn-.17*tn-r]]).stream(cn),bt=st.translate([xn+.19*tn,Bn-.135*tn]).clipExtent([[xn+.14*tn+r,Bn-.17*tn+r],[xn+.24*tn-r,Bn-.1*tn-r]]).stream(cn),rt=Y.translate([xn+.225*tn,Bn-.147*tn]).clipExtent([[xn+.21*tn+r,Bn-.17*tn+r],[xn+.24*tn-r,Bn-.12*tn-r]]).stream(cn),$=ot.translate([xn+.153*tn,Bn-.15*tn]).clipExtent([[xn+.14*tn+r,Bn-.17*tn+r],[xn+.165*tn-r,Bn-.14*tn-r]]).stream(cn),yt=Pt.translate([xn+.19*tn,Bn-.065*tn]).clipExtent([[xn+.14*tn+r,Bn-.1*tn+r],[xn+.24*tn-r,Bn-.03*tn-r]]).stream(cn),Qt=Ft.translate([xn+.19*tn,Bn+.005*tn]).clipExtent([[xn+.14*tn+r,Bn-.03*tn+r],[xn+.24*tn-r,Bn+.04*tn-r]]).stream(cn),Wt=ne.translate([xn+.29*tn,Bn-.275*tn]).clipExtent([[xn+.24*tn+r,Bn-.31*tn+r],[xn+.34*tn-r,Bn-.24*tn-r]]).stream(cn),De=$t.translate([xn+.29*tn,Bn-.205*tn]).clipExtent([[xn+.24*tn+r,Bn-.24*tn+r],[xn+.34*tn-r,Bn-.17*tn-r]]).stream(cn),Qe=Je.translate([xn+.29*tn,Bn-.135*tn]).clipExtent([[xn+.24*tn+r,Bn-.17*tn+r],[xn+.34*tn-r,Bn-.1*tn-r]]).stream(cn),ue=de.translate([xn+.29*tn,Bn-.065*tn]).clipExtent([[xn+.24*tn+r,Bn-.1*tn+r],[xn+.34*tn-r,Bn-.03*tn-r]]).stream(cn),wn()},Fn.fitExtent=function(en,tn){return v(Fn,en,tn)},Fn.fitSize=function(en,tn){return b(Fn,en,tn)};function wn(){return xt=Ot=null,Fn}return Fn.drawCompositionBorders=function(en){var tn,xn,Bn,vr;tn=it([42.45755610828648,63.343658547914934]),xn=it([52.65837266667029,59.35045080290929]),Bn=it([47.19754502247785,56.12653496548117]),vr=it([37.673034273363044,59.61638268506111]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([59.41110754003403,62.35069727399336]),xn=it([66.75050228640794,57.11797303636038]),Bn=it([60.236065725110436,54.63331433818992]),vr=it([52.65837313153311,59.350450804599355]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([48.81091130080243,66.93353402634641]),xn=it([59.41110730654679,62.35069740653086]),Bn=it([52.6583728974441,59.3504509222445]),vr=it([42.45755631675751,63.34365868805821]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([31.054198418446475,52.1080673766184]),xn=it([39.09869284884117,49.400700047190554]),Bn=it([36.0580811499175,46.02944174908498]),vr=it([28.690508588835726,48.433126979386415]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([33.977877745912025,55.849945501331]),xn=it([42.75328432167726,52.78455122462353]),Bn=it([39.09869297540224,49.400700176148625]),vr=it([31.05419851807008,52.10806751810923]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([52.658372900759296,59.35045068526415]),xn=it([60.23606549583304,54.63331423800264]),Bn=it([54.6756370953122,51.892298789399455]),vr=it([47.19754524788189,56.126534861222794]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([47.19754506082455,56.126534735591456]),xn=it([54.675636900123514,51.892298681337095]),Bn=it([49.94448648951486,48.98775484983285]),vr=it([42.75328468716108,52.78455126060818]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([42.75328453416769,52.78455113209101]),xn=it([49.94448632339758,48.98775473706457]),Bn=it([45.912339990394315,45.99361784987003]),vr=it([39.09869317356607,49.40070009378711]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([37.673034114296634,59.61638254183119]),xn=it([47.197544835420544,56.126534839849846]),Bn=it([42.75328447467064,52.78455135314068]),vr=it([33.977877870363905,55.849945644671145]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([44.56748486446032,57.26489367845818]),Bn=it([43.9335791193588,53.746540942601726]),vr=it([43,56]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath(),tn=it([37.673034114296634,59.61638254183119]),xn=it([40.25902691953466,58.83002044222639]),Bn=it([38.458270492742024,57.26232178028002]),vr=it([35.97754948030156,58.00266637992386]),en.moveTo(tn[0],tn[1]),en.lineTo(xn[0],xn[1]),en.lineTo(Bn[0],Bn[1]),en.lineTo(vr[0],vr[1]),en.closePath()},Fn.getCompositionBorders=function(){var en=h.path();return this.drawCompositionBorders(en),en.toString()},Fn.scale(750)}function at(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function pt(){var xt,Ot,it=s.geoConicConformal().rotate([-5.5,-52.2]).parallels([0,60]),At,z=s.geoMercator().center([-68.25,12.2]),q,mt=s.geoMercator().center([-63.1,17.5]),et,st,bt={point:function($,Pt){st=[$,Pt]}};function Y(ot){var $=t.__read(ot,2),Pt=$[0],yt=$[1];return st=null,At.point(Pt,yt),st||(q.point(Pt,yt),st)||(et.point(Pt,yt),st)}Y.invert=function(ot){var $=it.scale(),Pt=it.translate(),yt=(ot[0]-Pt[0])/$,Ft=(ot[1]-Pt[1])/$;return(Ft>=-.0067&&Ft<.0015&&yt>=-.0232&&yt<-.0154?z:Ft>=-.022&&Ft<-.014&&yt>=-.023&&yt<-.014?mt:it).invert(ot)},Y.stream=function(ot){return xt&&Ot===ot?xt:xt=at([it.stream(Ot=ot),z.stream(ot),mt.stream(ot)])},Y.precision=function(ot){return arguments.length?(it.precision(ot),z.precision(ot),mt.precision(ot),rt()):it.precision()},Y.scale=function(ot){return arguments.length?(it.scale(ot),z.scale(ot),mt.scale(ot),Y.translate(it.translate())):it.scale()},Y.translate=function(ot){if(!arguments.length)return it.translate();var $=it.scale(),Pt=+ot[0],yt=+ot[1];return At=it.translate(ot).clipExtent([[Pt-.0245*$,yt-.026*$],[Pt+.023*$,yt+.026*$]]).stream(bt),q=z.translate([Pt-.0186*$,yt-.00325*$]).clipExtent([[Pt-.0232*$+r,yt-.0067*$+r],[Pt-.0154*$-r,yt+.0015*$-r]]).stream(bt),et=mt.translate([Pt-.0185*$,yt-.017*$]).clipExtent([[Pt-.023*$+r,yt-.022*$+r],[Pt-.014*$-r,yt-.014*$-r]]).stream(bt),rt()},Y.fitExtent=function(ot,$){return v(Y,ot,$)},Y.fitSize=function(ot,$){return b(Y,ot,$)};function rt(){return xt=Ot=null,Y}return Y.drawCompositionBorders=function(ot){var $=it([3.30573,52.5562]),Pt=it([4.043,52.572]),yt=it([4.0646,52.1017]),Ft=it([3.3382,52.0861]),Qt=it([3.262,53.439]),ne=it([4.1373,53.4571]),Wt=it([4.1574,52.9946]),$t=it([3.2951,52.9768]);ot.moveTo($[0],$[1]),ot.lineTo(Pt[0],Pt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(Ft[0],Ft[1]),ot.closePath(),ot.moveTo(Qt[0],Qt[1]),ot.lineTo(ne[0],ne[1]),ot.lineTo(Wt[0],Wt[1]),ot.lineTo(Wt[0],Wt[1]),ot.lineTo($t[0],$t[1]),ot.closePath()},Y.getCompositionBorders=function(){var ot=h.path();return this.drawCompositionBorders(ot),ot.toString()},Y.scale(4200)}function gt(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function ft(){var xt,Ot,it=s.geoMercator().center([105.25,4]),At,z=s.geoMercator().center([118.65,2.86]),q,mt,et={point:function(rt,ot){mt=[rt,ot]}};function st(Y){var rt=Y[0],ot=Y[1];return mt=null,At.point(rt,ot),mt||(q.point(rt,ot),mt)}st.invert=function(Y){var rt=it.scale(),ot=it.translate(),$=(Y[0]-ot[0])/rt,Pt=(Y[1]-ot[1])/rt;return(Pt>=-.0521&&Pt<.0229&&$>=-.0111&&$<.1?z:it).invert(Y)},st.stream=function(Y){return xt&&Ot===Y?xt:xt=gt([it.stream(Ot=Y),z.stream(Y)])},st.precision=function(Y){return arguments.length?(it.precision(Y),z.precision(Y),bt()):it.precision()},st.scale=function(Y){return arguments.length?(it.scale(Y),z.scale(Y*.615),st.translate(it.translate())):it.scale()},st.translate=function(Y){if(!arguments.length)return it.translate();var rt=it.scale(),ot=+Y[0],$=+Y[1];return At=it.translate(Y).clipExtent([[ot-.11*rt,$-.0521*rt],[ot-.0111*rt,$+.0521*rt]]).stream(et),q=z.translate([ot+.09*rt,$-0*rt]).clipExtent([[ot-.0111*rt+r,$-.0521*rt+r],[ot+.1*rt-r,$+.024*rt-r]]).stream(et),bt()},st.fitExtent=function(Y,rt){return v(st,Y,rt)},st.fitSize=function(Y,rt){return b(st,Y,rt)};function bt(){return xt=Ot=null,st}return st.drawCompositionBorders=function(Y){var rt=it([106.3214,2.0228]),ot=it([105.1843,2.3761]),$=it([104.2151,3.3618]),Pt=it([104.215,4.5651]);Y.moveTo(rt[0],rt[1]),Y.lineTo(ot[0],ot[1]),Y.lineTo($[0],$[1]),Y.lineTo(Pt[0],Pt[1])},st.getCompositionBorders=function(){var Y=h.path();return this.drawCompositionBorders(Y),Y.toString()},st.scale(4800)}function Rt(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function Nt(){var xt,Ot,it=s.geoMercator().rotate([-9.5,-1.5]),At,z=s.geoMercator().rotate([-8.6,-3.5]),q,mt=s.geoMercator().rotate([-5.6,1.45]),et,st,bt={point:function($,Pt){st=[$,Pt]}};function Y(ot){var $=ot[0],Pt=ot[1];return st=null,At.point($,Pt),st||(q.point($,Pt),st)||(et.point($,Pt),st)}Y.invert=function(ot){var $=it.scale(),Pt=it.translate(),yt=(ot[0]-Pt[0])/$,Ft=(ot[1]-Pt[1])/$;return(Ft>=-.02&&Ft<0&&yt>=-.038&&yt<-.005?z:Ft>=0&&Ft<.02&&yt>=-.038&&yt<-.005?mt:it).invert(ot)},Y.stream=function(ot){return xt&&Ot===ot?xt:xt=Rt([it.stream(Ot=ot),z.stream(ot),mt.stream(ot)])},Y.precision=function(ot){return arguments.length?(it.precision(ot),z.precision(ot),mt.precision(ot),rt()):it.precision()},Y.scale=function(ot){return arguments.length?(it.scale(ot),z.scale(ot*1.5),mt.scale(ot*4),Y.translate(it.translate())):it.scale()},Y.translate=function(ot){if(!arguments.length)return it.translate();var $=it.scale(),Pt=+ot[0],yt=+ot[1];return At=it.translate(ot).clipExtent([[Pt-.005*$,yt-.02*$],[Pt+.038*$,yt+.02*$]]).stream(bt),q=z.translate([Pt-.025*$,yt-.01*$]).clipExtent([[Pt-.038*$+r,yt-.02*$+r],[Pt-.005*$-r,yt+0*$-r]]).stream(bt),et=mt.translate([Pt-.025*$,yt+.01*$]).clipExtent([[Pt-.038*$+r,yt-0*$+r],[Pt-.005*$-r,yt+.02*$-r]]).stream(bt),rt()},Y.fitExtent=function(ot,$){return v(Y,ot,$)},Y.fitSize=function(ot,$){return b(Y,ot,$)};function rt(){return xt=Ot=null,Y}return Y.drawCompositionBorders=function(ot){var $,Pt,yt,Ft;$=it([9.21327272751682,2.645820439454123]),Pt=it([11.679126293239872,2.644755519268689]),yt=it([11.676845389029227,.35307824637606433]),Ft=it([9.213572917774014,.35414205204417754]),ot.moveTo($[0],$[1]),ot.lineTo(Pt[0],Pt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(Ft[0],Ft[1]),ot.closePath(),$=it([7.320873711543669,2.64475551449975]),Pt=it([9.213272722738658,2.645820434679803]),yt=it([9.213422896480349,1.4999812505283054]),Ft=it([7.322014760520787,1.4989168878985566]),ot.moveTo($[0],$[1]),ot.lineTo(Pt[0],Pt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(Ft[0],Ft[1]),ot.closePath(),$=it([7.3220147605302905,1.4989168783492766]),Pt=it([9.213422896481598,1.499981240979021]),yt=it([9.213572912999604,.354142056817247]),Ft=it([7.323154615739809,.353078251154504]),ot.moveTo($[0],$[1]),ot.lineTo(Pt[0],Pt[1]),ot.lineTo(yt[0],yt[1]),ot.lineTo(Ft[0],Ft[1]),ot.closePath()},Y.getCompositionBorders=function(){var ot=h.path();return this.drawCompositionBorders(ot),ot.toString()},Y.scale(12e3)}function Dt(xt){var Ot=xt.length;return{point:function(At,z){for(var q=-1;++q<Ot;)xt[q].point(At,z)},sphere:function(){for(var At=-1;++At<Ot;)xt[At].sphere()},lineStart:function(){for(var At=-1;++At<Ot;)xt[At].lineStart()},lineEnd:function(){for(var At=-1;++At<Ot;)xt[At].lineEnd()},polygonStart:function(){for(var At=-1;++At<Ot;)xt[At].polygonStart()},polygonEnd:function(){for(var At=-1;++At<Ot;)xt[At].polygonEnd()}}}function St(){var xt,Ot,it=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),At,z=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),q,mt,et={point:function(rt,ot){mt=[rt,ot]}};function st(Y){var rt=Y[0],ot=Y[1];return mt=null,At.point(rt,ot),mt||(q.point(rt,ot),mt)}st.invert=function(Y){var rt=it.scale(),ot=it.translate(),$=(Y[0]-ot[0])/rt,Pt=(Y[1]-ot[1])/rt;return(Pt>=-.089&&Pt<.06&&$>=.029&&$<.046?z:it).invert(Y)},st.stream=function(Y){return xt&&Ot===Y?xt:xt=Dt([it.stream(Ot=Y),z.stream(Y)])},st.precision=function(Y){return arguments.length?(it.precision(Y),z.precision(Y),bt()):it.precision()},st.scale=function(Y){return arguments.length?(it.scale(Y),z.scale(Y),st.translate(it.translate())):it.scale()},st.translate=function(Y){if(!arguments.length)return it.translate();var rt=it.scale(),ot=+Y[0],$=+Y[1];return At=it.translate(Y).clipExtent([[ot-.065*rt,$-.089*rt],[ot+.075*rt,$+.089*rt]]).stream(et),q=z.translate([ot+.01*rt,$+.025*rt]).clipExtent([[ot+.029*rt+r,$-.089*rt+r],[ot+.046*rt-r,$-.06*rt-r]]).stream(et),bt()},st.fitExtent=function(Y,rt){return v(st,Y,rt)},st.fitSize=function(Y,rt){return b(st,Y,rt)};function bt(){return xt=Ot=null,st}return st.drawCompositionBorders=function(Y){var rt,ot,$,Pt;rt=it([-1.113205870242365,59.64920050773357]),ot=it([.807899092399606,59.59085836472269]),$=it([.5778611961420386,57.93467822832577]),Pt=it([-1.25867782078448,57.99029450085142]),Y.moveTo(rt[0],rt[1]),Y.lineTo(ot[0],ot[1]),Y.lineTo($[0],$[1]),Y.lineTo(Pt[0],Pt[1]),Y.closePath()},st.getCompositionBorders=function(){var Y=h.path();return this.drawCompositionBorders(Y),Y.toString()},st.scale(2800)}u.geoAlbersUk=St,u.geoAlbersUsa=y,u.geoAlbersUsaTerritories=M,u.geoConicConformalEurope=X,u.geoConicConformalFrance=k,u.geoConicConformalNetherlands=pt,u.geoConicConformalPortugal=P,u.geoConicConformalSpain=m,u.geoConicEquidistantJapan=K,u.geoMercatorEcuador=O,u.geoMercatorEquatorialGuinea=Nt,u.geoMercatorMalaysia=ft,u.geoTransverseMercatorChile=H,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u={},s={},h=34,r=10,c=13;function n(X){return new Function("d","return {"+X.map(function(at,pt){return JSON.stringify(at)+": d["+pt+'] || ""'}).join(",")+"}")}function i(X,at){var pt=n(X);return function(gt,ft){return at(pt(gt),ft,X)}}function a(X){var at=Object.create(null),pt=[];return X.forEach(function(gt){for(var ft in gt)ft in at||pt.push(at[ft]=ft)}),pt}function o(X,at){var pt=X+"",gt=pt.length;return gt<at?new Array(at-gt+1).join(0)+pt:pt}function l(X){return X<0?"-"+o(-X,6):X>9999?"+"+o(X,6):o(X,4)}function f(X){var at=X.getUTCHours(),pt=X.getUTCMinutes(),gt=X.getUTCSeconds(),ft=X.getUTCMilliseconds();return isNaN(X)?"Invalid Date":l(X.getUTCFullYear())+"-"+o(X.getUTCMonth()+1,2)+"-"+o(X.getUTCDate(),2)+(ft?"T"+o(at,2)+":"+o(pt,2)+":"+o(gt,2)+"."+o(ft,3)+"Z":gt?"T"+o(at,2)+":"+o(pt,2)+":"+o(gt,2)+"Z":pt||at?"T"+o(at,2)+":"+o(pt,2)+"Z":"")}function v(X){var at=new RegExp('["'+X+`
\r]`),pt=X.charCodeAt(0);function gt(it,At){var z,q,mt=ft(it,function(et,st){if(z)return z(et,st-1);q=et,z=At?i(et,At):n(et)});return mt.columns=q||[],mt}function ft(it,At){var z=[],q=it.length,mt=0,et=0,st,bt=q<=0,Y=!1;it.charCodeAt(q-1)===r&&--q,it.charCodeAt(q-1)===c&&--q;function rt(){if(bt)return s;if(Y)return Y=!1,u;var $,Pt=mt,yt;if(it.charCodeAt(Pt)===h){for(;mt++<q&&it.charCodeAt(mt)!==h||it.charCodeAt(++mt)===h;);return($=mt)>=q?bt=!0:(yt=it.charCodeAt(mt++))===r?Y=!0:yt===c&&(Y=!0,it.charCodeAt(mt)===r&&++mt),it.slice(Pt+1,$-1).replace(/""/g,'"')}for(;mt<q;){if((yt=it.charCodeAt($=mt++))===r)Y=!0;else if(yt===c)Y=!0,it.charCodeAt(mt)===r&&++mt;else if(yt!==pt)continue;return it.slice(Pt,$)}return bt=!0,it.slice(Pt,q)}for(;(st=rt())!==s;){for(var ot=[];st!==u&&st!==s;)ot.push(st),st=rt();At&&(ot=At(ot,et++))==null||z.push(ot)}return z}function Rt(it,At){return it.map(function(z){return At.map(function(q){return Ot(z[q])}).join(X)})}function Nt(it,At){return At==null&&(At=a(it)),[At.map(Ot).join(X)].concat(Rt(it,At)).join(`
`)}function Dt(it,At){return At==null&&(At=a(it)),Rt(it,At).join(`
`)}function St(it){return it.map(xt).join(`
`)}function xt(it){return it.map(Ot).join(X)}function Ot(it){return it==null?"":it instanceof Date?f(it):at.test(it+="")?'"'+it.replace(/"/g,'""')+'"':it}return{parse:gt,parseRows:ft,format:Nt,formatBody:Dt,formatRows:St,formatRow:xt,formatValue:Ot}}var b=v(","),g=b.parse,y=b.parseRows,_=b.format,M=b.formatBody,x=b.formatRows,m=b.formatRow,S=b.formatValue,P=v("	"),A=P.parse,O=P.parseRows,R=P.format,H=P.formatBody,N=P.formatRows,K=P.formatRow,V=P.formatValue;function k(X){for(var at in X){var pt=X[at].trim(),gt,ft;if(!pt)pt=null;else if(pt==="true")pt=!0;else if(pt==="false")pt=!1;else if(pt==="NaN")pt=NaN;else if(!isNaN(gt=+pt))pt=gt;else if(ft=pt.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Z&&!!ft[4]&&!ft[7]&&(pt=pt.replace(/-/g,"/").replace(/T/," ")),pt=new Date(pt);else continue;X[at]=pt}return X}var Z=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=k,t.csvFormat=_,t.csvFormatBody=M,t.csvFormatRow=m,t.csvFormatRows=x,t.csvFormatValue=S,t.csvParse=g,t.csvParseRows=y,t.dsvFormat=v,t.tsvFormat=R,t.tsvFormatBody=H,t.tsvFormatRow=K,t.tsvFormatRows=N,t.tsvFormatValue=V,t.tsvParse=A,t.tsvParseRows=O,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u,s){"use strict";var h=Math.abs,r=Math.atan,c=Math.atan2,n=Math.cos,i=Math.exp,a=Math.floor,o=Math.log,l=Math.max,f=Math.min,v=Math.pow,b=Math.round,g=Math.sign||function(D){return D>0?1:D<0?-1:0},y=Math.sin,_=Math.tan,M=1e-6,x=1e-12,m=Math.PI,S=m/2,P=m/4,A=Math.SQRT1_2,O=X(2),R=X(m),H=m*2,N=180/m,K=m/180;function V(D){return D?D/Math.sin(D):1}function k(D){return D>1?S:D<-1?-S:Math.asin(D)}function Z(D){return D>1?0:D<-1?m:Math.acos(D)}function X(D){return D>0?Math.sqrt(D):0}function at(D){return D=i(2*D),(D-1)/(D+1)}function pt(D){return(i(D)-i(-D))/2}function gt(D){return(i(D)+i(-D))/2}function ft(D){return o(D+X(D*D+1))}function Rt(D){return o(D+X(D*D-1))}function Nt(D){var G=_(D/2),Q=2*o(n(D/2))/(G*G);function ut(wt,It){var kt=n(wt),Yt=n(It),qt=y(It),ce=Yt*kt,ye=-((1-ce?o((1+ce)/2)/(1-ce):-.5)+Q/(1+ce));return[ye*Yt*y(wt),ye*qt]}return ut.invert=function(wt,It){var kt=X(wt*wt+It*It),Yt=-D/2,qt=50,ce;if(!kt)return[0,0];do{var ye=Yt/2,Le=n(ye),Ce=y(ye),ke=_(ye),nn=o(1/Le);Yt-=ce=(2/ke*nn-Q*ke-kt)/(-nn/(Ce*Ce)+1-Q/(2*Le*Le))}while(h(ce)>M&&--qt>0);var ln=y(Yt);return[c(wt*ln,kt*n(Yt)),k(It*ln/kt)]},ut}var Dt=function(){var G=S,Q=u.geoProjectionMutator(Nt),ut=Q(G);return ut.radius=function(wt){return arguments.length?Q(G=wt*K):G*N},ut.scale(179.976).clipAngle(147)};function St(D,G){var Q=n(G),ut=V(Z(Q*n(D/=2)));return[2*Q*y(D)*ut,y(G)*ut]}St.invert=function(D,G){if(!(D*D+4*G*G>m*m+M)){var Q=D,ut=G,wt=25;do{var It=y(Q),kt=y(Q/2),Yt=n(Q/2),qt=y(ut),ce=n(ut),ye=y(2*ut),Le=qt*qt,Ce=ce*ce,ke=kt*kt,nn=1-Ce*Yt*Yt,ln=nn?Z(ce*Yt)*X(Qn=1/nn):Qn=0,Qn,Yn=2*ln*ce*kt-D,dr=ln*qt-G,Mr=Qn*(Ce*ke+ln*ce*Yt*Le),$r=Qn*(.5*It*ye-ln*2*qt*kt),Kr=Qn*.25*(ye*kt-ln*qt*Ce*It),bi=Qn*(Le*Yt+ln*ke*ce),Oi=$r*Kr-bi*Mr;if(!Oi)break;var zi=(dr*$r-Yn*bi)/Oi,Vi=(Yn*Kr-dr*Mr)/Oi;Q-=zi,ut-=Vi}while((h(zi)>M||h(Vi)>M)&&--wt>0);return[Q,ut]}};var xt=function(){return u.geoProjection(St).scale(152.63)};function Ot(D){var G=y(D),Q=n(D),ut=D>=0?1:-1,wt=_(ut*D),It=(1+G-Q)/2;function kt(Yt,qt){var ce=n(qt),ye=n(Yt/=2);return[(1+ce)*y(Yt),(ut*qt>-c(ye,wt)-.001?0:-ut*10)+It+y(qt)*Q-(1+ce)*G*ye]}return kt.invert=function(Yt,qt){var ce=0,ye=0,Le=50;do{var Ce=n(ce),ke=y(ce),nn=n(ye),ln=y(ye),Qn=1+nn,Yn=Qn*ke-Yt,dr=It+ln*Q-Qn*G*Ce-qt,Mr=Qn*Ce/2,$r=-ke*ln,Kr=G*Qn*ke/2,bi=Q*nn+G*Ce*ln,Oi=$r*Kr-bi*Mr,zi=(dr*$r-Yn*bi)/Oi/2,Vi=(Yn*Kr-dr*Mr)/Oi;ce-=zi,ye-=Vi}while((h(zi)>M||h(Vi)>M)&&--Le>0);return ut*ye>-c(n(ce),wt)-.001?[ce*2,ye]:null},kt}var it=function(){var G=20*K,Q=G>=0?1:-1,ut=_(Q*G),wt=u.geoProjectionMutator(Ot),It=wt(G),kt=It.stream;return It.parallel=function(Yt){return arguments.length?(ut=_((Q=(G=Yt*K)>=0?1:-1)*G),wt(G)):G*N},It.stream=function(Yt){var qt=It.rotate(),ce=kt(Yt),ye=(It.rotate([0,0]),kt(Yt));return It.rotate(qt),ce.sphere=function(){ye.polygonStart(),ye.lineStart();for(var Le=Q*-180;Q*Le<180;Le+=Q*90)ye.point(Le,Q*90);for(;Q*(Le-=G)>=-180;)ye.point(Le,Q*-c(n(Le*K/2),ut)*N);ye.lineEnd(),ye.polygonEnd()},ce},It.scale(218.695).center([0,28.0974])};function At(D,G){var Q=_(G/2),ut=X(1-Q*Q),wt=1+ut*n(D/=2),It=y(D)*ut/wt,kt=Q/wt,Yt=It*It,qt=kt*kt;return[4/3*It*(3+Yt-3*qt),4/3*kt*(3+3*Yt-qt)]}At.invert=function(D,G){if(D*=3/8,G*=3/8,!D&&h(G)>1)return null;var Q=D*D,ut=G*G,wt=1+Q+ut,It=X((wt-X(wt*wt-4*G*G))/2),kt=k(It)/3,Yt=It?Rt(h(G/It))/3:ft(h(D))/3,qt=n(kt),ce=gt(Yt),ye=ce*ce-qt*qt;return[g(D)*2*c(pt(Yt)*qt,.25-ye),g(G)*2*c(ce*y(kt),.25+ye)]};var z=function(){return u.geoProjection(At).scale(66.1603)},q=X(8),mt=o(1+O);function et(D,G){var Q=h(G);return Q<P?[D,o(_(P+G/2))]:[D*n(Q)*(2*O-1/y(Q)),g(G)*(2*O*(Q-P)-o(_(Q/2)))]}et.invert=function(D,G){if((It=h(G))<mt)return[D,2*r(i(G))-S];var Q=P,ut=25,wt,It;do{var kt=n(Q/2),Yt=_(Q/2);Q-=wt=(q*(Q-P)-o(Yt)-It)/(q-kt*kt/(2*Yt))}while(h(wt)>x&&--ut>0);return[D/(n(Q)*(q-1/y(Q))),g(G)*Q]};var st=function(){return u.geoProjection(et).scale(112.314)};function bt(D){var G=2*m/D;function Q(ut,wt){var It=u.geoAzimuthalEquidistantRaw(ut,wt);if(h(ut)>S){var kt=c(It[1],It[0]),Yt=X(It[0]*It[0]+It[1]*It[1]),qt=G*b((kt-S)/G)+S,ce=c(y(kt-=qt),2-n(kt));kt=qt+k(m/Yt*y(ce))-ce,It[0]=Yt*n(kt),It[1]=Yt*y(kt)}return It}return Q.invert=function(ut,wt){var It=X(ut*ut+wt*wt);if(It>S){var kt=c(wt,ut),Yt=G*b((kt-S)/G)+S,qt=kt>Yt?-1:1,ce=It*n(Yt-kt),ye=1/_(qt*Z((ce-m)/X(m*(m-2*ce)+It*It)));kt=Yt+2*r((ye+qt*X(ye*ye-3))/3),ut=It*n(kt),wt=It*y(kt)}return u.geoAzimuthalEquidistantRaw.invert(ut,wt)},Q}var Y=function(){var G=5,Q=u.geoProjectionMutator(bt),ut=Q(G),wt=ut.stream,It=.01,kt=-n(It*K),Yt=y(It*K);return ut.lobes=function(qt){return arguments.length?Q(G=+qt):G},ut.stream=function(qt){var ce=ut.rotate(),ye=wt(qt),Le=(ut.rotate([0,0]),wt(qt));return ut.rotate(ce),ye.sphere=function(){Le.polygonStart(),Le.lineStart();for(var Ce=0,ke=360/G,nn=2*m/G,ln=90-180/G,Qn=S;Ce<G;++Ce,ln-=ke,Qn-=nn)Le.point(c(Yt*n(Qn),kt)*N,k(Yt*y(Qn))*N),ln<-90?(Le.point(-90,-180-ln-It),Le.point(-90,-180-ln+It)):(Le.point(90,ln+It),Le.point(90,ln-It));Le.lineEnd(),Le.polygonEnd()},ye},ut.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)};function rt(D,G){var Q=D*y(G),ut=30,wt;do G-=wt=(G+y(G)-Q)/(1+n(G));while(h(wt)>M&&--ut>0);return G/2}function ot(D,G,Q){function ut(wt,It){return[D*wt*n(It=rt(Q,It)),G*y(It)]}return ut.invert=function(wt,It){return It=k(It/G),[wt/(D*n(It)),k((2*It+y(2*It))/Q)]},ut}var $=ot(O/S,O,m),Pt=function(){return u.geoProjection($).scale(169.529)},yt=2.00276,Ft=1.11072;function Qt(D,G){var Q=rt(m,G);return[yt*D/(1/n(G)+Ft/n(Q)),(G+O*y(Q))/yt]}Qt.invert=function(D,G){var Q=yt*G,ut=G<0?-P:P,wt=25,It,kt;do kt=Q-O*y(ut),ut-=It=(y(2*ut)+2*ut-m*y(kt))/(2*n(2*ut)+2+m*n(kt)*O*n(ut));while(h(It)>M&&--wt>0);return kt=Q-O*y(ut),[D*(1/n(kt)+Ft/n(ut))/yt,kt]};var ne=function(){return u.geoProjection(Qt).scale(160.857)},Wt=function(G){var Q=0,ut=u.geoProjectionMutator(G),wt=ut(Q);return wt.parallel=function(It){return arguments.length?ut(Q=It*K):Q*N},wt};function $t(D,G){return[D*n(G),G]}$t.invert=function(D,G){return[D/n(G),G]};var De=function(){return u.geoProjection($t).scale(152.63)};function Je(D){if(!D)return $t;var G=1/_(D);function Q(ut,wt){var It=G+D-wt,kt=It&&ut*n(wt)/It;return[It*y(kt),G-It*n(kt)]}return Q.invert=function(ut,wt){var It=X(ut*ut+(wt=G-wt)*wt),kt=G+D-It;return[It/n(kt)*c(ut,wt),kt]},Q}var Qe=function(){return Wt(Je).scale(123.082).center([0,26.1441]).parallel(45)};function de(D){function G(Q,ut){var wt=S-ut,It=wt&&Q*D*y(wt)/wt;return[wt*y(It)/D,S-wt*n(It)]}return G.invert=function(Q,ut){var wt=Q*D,It=S-ut,kt=X(wt*wt+It*It),Yt=c(wt,It);return[(kt?kt/y(kt):1)*Yt/D,S-kt]},G}var ue=function(){var G=.5,Q=u.geoProjectionMutator(de),ut=Q(G);return ut.fraction=function(wt){return arguments.length?Q(G=+wt):G},ut.scale(158.837)},Ne=ot(1,4/m,m),cn=function(){return u.geoProjection(Ne).scale(152.63)};function Fn(D,G,Q,ut,wt,It){var kt=n(It),Yt;if(h(D)>1||h(It)>1)Yt=Z(Q*wt+G*ut*kt);else{var qt=y(D/2),ce=y(It/2);Yt=2*k(X(qt*qt+G*ut*ce*ce))}return h(Yt)>M?[Yt,c(ut*y(It),G*wt-Q*ut*kt)]:[0,0]}function wn(D,G,Q){return Z((D*D+G*G-Q*Q)/(2*D*G))}function en(D){return D-2*m*a((D+m)/(2*m))}function tn(D,G,Q){for(var ut=[[D[0],D[1],y(D[1]),n(D[1])],[G[0],G[1],y(G[1]),n(G[1])],[Q[0],Q[1],y(Q[1]),n(Q[1])]],wt=ut[2],It,kt=0;kt<3;++kt,wt=It)It=ut[kt],wt.v=Fn(It[1]-wt[1],wt[3],wt[2],It[3],It[2],It[0]-wt[0]),wt.point=[0,0];var Yt=wn(ut[0].v[0],ut[2].v[0],ut[1].v[0]),qt=wn(ut[0].v[0],ut[1].v[0],ut[2].v[0]),ce=m-Yt;ut[2].point[1]=0,ut[0].point[0]=-(ut[1].point[0]=ut[0].v[0]/2);var ye=[ut[2].point[0]=ut[0].point[0]+ut[2].v[0]*n(Yt),2*(ut[0].point[1]=ut[1].point[1]=ut[2].v[0]*y(Yt))];function Le(Ce,ke){var nn=y(ke),ln=n(ke),Qn=new Array(3),Yn;for(Yn=0;Yn<3;++Yn){var dr=ut[Yn];if(Qn[Yn]=Fn(ke-dr[1],dr[3],dr[2],ln,nn,Ce-dr[0]),!Qn[Yn][0])return dr.point;Qn[Yn][1]=en(Qn[Yn][1]-dr.v[1])}var Mr=ye.slice();for(Yn=0;Yn<3;++Yn){var $r=Yn==2?0:Yn+1,Kr=wn(ut[Yn].v[0],Qn[Yn][0],Qn[$r][0]);Qn[Yn][1]<0&&(Kr=-Kr),Yn?Yn==1?(Kr=qt-Kr,Mr[0]-=Qn[Yn][0]*n(Kr),Mr[1]-=Qn[Yn][0]*y(Kr)):(Kr=ce-Kr,Mr[0]+=Qn[Yn][0]*n(Kr),Mr[1]+=Qn[Yn][0]*y(Kr)):(Mr[0]+=Qn[Yn][0]*n(Kr),Mr[1]-=Qn[Yn][0]*y(Kr))}return Mr[0]/=3,Mr[1]/=3,Mr}return Le}function xn(D){return D[0]*=K,D[1]*=K,D}function Bn(){return vr([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function vr(D,G,Q){var ut=u.geoCentroid({type:"MultiPoint",coordinates:[D,G,Q]}),wt=[-ut[0],-ut[1]],It=u.geoRotation(wt),kt=u.geoProjection(tn(xn(It(D)),xn(It(G)),xn(It(Q)))).rotate(wt),Yt=kt.center;return delete kt.rotate,kt.center=function(qt){return arguments.length?Yt(It(qt)):It.invert(Yt())},kt.clipAngle(90)}function li(D,G){var Q=X(1-y(G));return[2/R*D*Q,R*(1-Q)]}li.invert=function(D,G){var Q=(Q=G/R-1)*Q;return[Q>0?D*X(m/Q)/2:0,k(1-Q)]};var Me=function(){return u.geoProjection(li).scale(95.6464).center([0,30])};function Pe(D){var G=_(D);function Q(ut,wt){return[ut,(ut?ut/y(ut):1)*(y(wt)*n(ut)-G*n(wt))]}return Q.invert=G?function(ut,wt){ut&&(wt*=y(ut)/ut);var It=n(ut);return[ut,2*c(X(It*It+G*G-wt*wt)-It,G-wt)]}:function(ut,wt){return[ut,k(ut?wt*_(ut)/ut:wt)]},Q}var te=function(){return Wt(Pe).scale(249.828).clipAngle(90)},ge=X(3);function Ht(D,G){return[ge*D*(2*n(2*G/3)-1)/R,ge*R*y(G/3)]}Ht.invert=function(D,G){var Q=3*k(G/(ge*R));return[R*D/(ge*(2*n(2*Q/3)-1)),Q]};var re=function(){return u.geoProjection(Ht).scale(156.19)};function Te(D){var G=n(D);function Q(ut,wt){return[ut*G,y(wt)/G]}return Q.invert=function(ut,wt){return[ut/G,k(wt*G)]},Q}var ae=function(){return Wt(Te).parallel(38.58).scale(195.044)};function xe(D){var G=n(D);function Q(ut,wt){return[ut*G,(1+G)*_(wt/2)]}return Q.invert=function(ut,wt){return[ut/G,r(wt/(1+G))*2]},Q}var qe=function(){return Wt(xe).scale(124.75)};function zn(D,G){var Q=X(8/(3*m));return[Q*D*(1-h(G)/m),Q*G]}zn.invert=function(D,G){var Q=X(8/(3*m)),ut=G/Q;return[D/(Q*(1-h(ut)/m)),ut]};var ar=function(){return u.geoProjection(zn).scale(165.664)};function _n(D,G){var Q=X(4-3*y(h(G)));return[2/X(6*m)*D*Q,g(G)*X(2*m/3)*(2-Q)]}_n.invert=function(D,G){var Q=2-h(G)/X(2*m/3);return[D*X(6*m)/(2*Q),g(G)*k((4-Q*Q)/3)]};var Cn=function(){return u.geoProjection(_n).scale(165.664)};function Or(D,G){var Q=X(m*(4+m));return[2/Q*D*(1+X(1-4*G*G/(m*m))),4/Q*G]}Or.invert=function(D,G){var Q=X(m*(4+m))/2;return[D*Q/(1+X(1-G*G*(4+m)/(4*m))),G*Q/2]};var Ar=function(){return u.geoProjection(Or).scale(180.739)};function hn(D,G){var Q=(2+S)*y(G);G/=2;for(var ut=0,wt=Infinity;ut<10&&h(wt)>M;ut++){var It=n(G);G-=wt=(G+y(G)*(It+2)-Q)/(2*It*(1+It))}return[2/X(m*(4+m))*D*(1+n(G)),2*X(m/(4+m))*y(G)]}hn.invert=function(D,G){var Q=G*X((4+m)/m)/2,ut=k(Q),wt=n(ut);return[D/(2/X(m*(4+m))*(1+wt)),k((ut+Q*(wt+2))/(2+S))]};var Pr=function(){return u.geoProjection(hn).scale(180.739)};function yr(D,G){return[D*(1+n(G))/X(2+m),2*G/X(2+m)]}yr.invert=function(D,G){var Q=X(2+m),ut=G*Q/2;return[Q*D/(1+n(ut)),ut]};var Re=function(){return u.geoProjection(yr).scale(173.044)};function We(D,G){for(var Q=(1+S)*y(G),ut=0,wt=Infinity;ut<10&&h(wt)>M;ut++)G-=wt=(G+y(G)-Q)/(1+n(G));return Q=X(2+m),[D*(1+n(G))/Q,2*G/Q]}We.invert=function(D,G){var Q=1+S,ut=X(Q/2);return[D*2*ut/(1+n(G*=ut)),k((G+y(G))/Q)]};var Ye=function(){return u.geoProjection(We).scale(173.044)},dn=3+2*O;function En(D,G){var Q=y(D/=2),ut=n(D),wt=X(n(G)),It=n(G/=2),kt=y(G)/(It+O*ut*wt),Yt=X(2/(1+kt*kt)),qt=X((O*It+(ut+Q)*wt)/(O*It+(ut-Q)*wt));return[dn*(Yt*(qt-1/qt)-2*o(qt)),dn*(Yt*kt*(qt+1/qt)-2*r(kt))]}En.invert=function(D,G){if(!(It=At.invert(D/1.2,G*1.065)))return null;var Q=It[0],ut=It[1],wt=20,It;D/=dn,G/=dn;do{var kt=Q/2,Yt=ut/2,qt=y(kt),ce=n(kt),ye=y(Yt),Le=n(Yt),Ce=n(ut),ke=X(Ce),nn=ye/(Le+O*ce*ke),ln=nn*nn,Qn=X(2/(1+ln)),Yn=O*Le+(ce+qt)*ke,dr=O*Le+(ce-qt)*ke,Mr=Yn/dr,$r=X(Mr),Kr=$r-1/$r,bi=$r+1/$r,Oi=Qn*Kr-2*o($r)-D,zi=Qn*nn*bi-2*r(nn)-G,Vi=ye&&A*ke*qt*ln/ye,_a=(O*ce*Le+ke)/(2*(Le+O*ce*ke)*(Le+O*ce*ke)*ke),ya=-.5*nn*Qn*Qn*Qn,wi=ya*Vi,$i=ya*_a,sa=(sa=2*Le+O*ke*(ce-qt))*sa*$r,Bi=(O*ce*Le*ke+Ce)/sa,ca=-(O*qt*ye)/(ke*sa),qi=Kr*wi-2*Bi/$r+Qn*(Bi+Bi/Mr),Ca=Kr*$i-2*ca/$r+Qn*(ca+ca/Mr),Na=nn*bi*wi-2*Vi/(1+ln)+Qn*bi*Vi+Qn*nn*(Bi-Bi/Mr),rs=nn*bi*$i-2*_a/(1+ln)+Qn*bi*_a+Qn*nn*(ca-ca/Mr),Jo=Ca*Na-rs*qi;if(!Jo)break;var is=(zi*Ca-Oi*rs)/Jo,jo=(Oi*Na-zi*qi)/Jo;Q-=is,ut=l(-S,f(S,ut-jo))}while((h(is)>M||h(jo)>M)&&--wt>0);return h(h(ut)-S)<M?[0,ut]:wt&&[Q,ut]};var Dn=function(){return u.geoProjection(En).scale(62.5271)},Sn=n(35*K);function Nn(D,G){var Q=_(G/2);return[D*Sn*X(1-Q*Q),(1+Sn)*Q]}Nn.invert=function(D,G){var Q=G/(1+Sn);return[D&&D/(Sn*X(1-Q*Q)),2*r(Q)]};var nr=function(){return u.geoProjection(Nn).scale(137.152)};function Gn(D,G){var Q=G/2,ut=n(Q);return[2*D/R*n(G)*ut*ut,R*_(Q)]}Gn.invert=function(D,G){var Q=r(G/R),ut=n(Q),wt=2*Q;return[D*R/2/(n(wt)*ut*ut),wt]};var Tn=function(){return u.geoProjection(Gn).scale(135.264)};function Cr(D){return[D[0]/2,k(_(D[1]/2*K))*N]}function pr(D){return[D[0]*2,2*r(y(D[1]*K))*N]}var zr=function(G){G==null&&(G=u.geoOrthographic);var Q=G(),ut=u.geoEquirectangular().scale(N).precision(0).clipAngle(null).translate([0,0]);function wt(kt){return Q(Cr(kt))}Q.invert&&(wt.invert=function(kt){return pr(Q.invert(kt))}),wt.stream=function(kt){var Yt=Q.stream(kt),qt=ut.stream({point:function(ye,Le){Yt.point(ye/2,k(_(-Le/2*K))*N)},lineStart:function(){Yt.lineStart()},lineEnd:function(){Yt.lineEnd()},polygonStart:function(){Yt.polygonStart()},polygonEnd:function(){Yt.polygonEnd()}});return qt.sphere=Yt.sphere,qt};function It(kt){wt[kt]=function(Yt){return arguments.length?(Q[kt](Yt),wt):Q[kt]()}}return wt.rotate=function(kt){return arguments.length?(ut.rotate(kt),wt):ut.rotate()},wt.center=function(kt){return arguments.length?(Q.center(Cr(kt)),wt):pr(Q.center())},It("clipAngle"),It("clipExtent"),It("scale"),It("translate"),It("precision"),wt.scale(249.5)};function Ei(D,G){var Q=2*m/G,ut=D*D;function wt(It,kt){var Yt=u.geoAzimuthalEquidistantRaw(It,kt),qt=Yt[0],ce=Yt[1],ye=qt*qt+ce*ce;if(ye>ut){var Le=X(ye),Ce=c(ce,qt),ke=Q*b(Ce/Q),nn=Ce-ke,ln=D*n(nn),Qn=(D*y(nn)-nn*y(ln))/(S-ln),Yn=Oa(nn,Qn),dr=(m-D)/wa(Yn,ln,m);qt=Le;var Mr=50,$r;do qt-=$r=(D+wa(Yn,ln,qt)*dr-Le)/(Yn(qt)*dr);while(h($r)>M&&--Mr>0);ce=nn*y(qt),qt<S&&(ce-=Qn*(qt-S));var Kr=y(ke),bi=n(ke);Yt[0]=qt*bi-ce*Kr,Yt[1]=qt*Kr+ce*bi}return Yt}return wt.invert=function(It,kt){var Yt=It*It+kt*kt;if(Yt>ut){var qt=X(Yt),ce=c(kt,It),ye=Q*b(ce/Q),Le=ce-ye;It=qt*n(Le),kt=qt*y(Le);for(var Ce=It-S,ke=y(It),nn=kt/ke,ln=It<S?Infinity:0,Qn=10;;){var Yn=D*y(nn),dr=D*n(nn),Mr=y(dr),$r=S-dr,Kr=(Yn-nn*Mr)/$r,bi=Oa(nn,Kr);if(h(ln)<x||!--Qn)break;nn-=ln=(nn*ke-Kr*Ce-kt)/(ke-Ce*2*($r*(dr+nn*Yn*n(dr)-Mr)-Yn*(Yn-nn*Mr))/($r*$r))}qt=D+wa(bi,dr,It)*(m-D)/wa(bi,dr,m),ce=ye+nn,It=qt*n(ce),kt=qt*y(ce)}return u.geoAzimuthalEquidistantRaw.invert(It,kt)},wt}function Oa(D,G){return function(Q){var ut=D*n(Q);return Q<S&&(ut-=G),X(1+ut*ut)}}function wa(D,G,Q){for(var ut=50,wt=(Q-G)/ut,It=D(G)+D(Q),kt=1,Yt=G;kt<ut;++kt)It+=2*D(Yt+=wt);return It*.5*wt}var Ja=function(){var G=6,Q=30*K,ut=n(Q),wt=y(Q),It=u.geoProjectionMutator(Ei),kt=It(Q,G),Yt=kt.stream,qt=.01,ce=-n(qt*K),ye=y(qt*K);return kt.radius=function(Le){return arguments.length?(ut=n(Q=Le*K),wt=y(Q),It(Q,G)):Q*N},kt.lobes=function(Le){return arguments.length?It(Q,G=+Le):G},kt.stream=function(Le){var Ce=kt.rotate(),ke=Yt(Le),nn=(kt.rotate([0,0]),Yt(Le));return kt.rotate(Ce),ke.sphere=function(){nn.polygonStart(),nn.lineStart();for(var ln=0,Qn=2*m/G,Yn=0;ln<G;++ln,Yn-=Qn)nn.point(c(ye*n(Yn),ce)*N,k(ye*y(Yn))*N),nn.point(c(wt*n(Yn-Qn/2),ut)*N,k(wt*y(Yn-Qn/2))*N);nn.lineEnd(),nn.polygonEnd()},ke},kt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)},wo=function(G,Q,ut,wt,It,kt,Yt,qt){arguments.length<8&&(qt=0);function ce(ye,Le){if(!Le)return[G*ye/m,0];var Ce=Le*Le,ke=G+Ce*(Q+Ce*(ut+Ce*wt)),nn=Le*(It-1+Ce*(kt-qt+Ce*Yt)),ln=(ke*ke+nn*nn)/(2*nn),Qn=ye*k(ke/ln)/m;return[ln*y(Qn),Le*(1+Ce*qt)+ln*(1-n(Qn))]}return ce.invert=function(ye,Le){var Ce=m*ye/G,ke=Le,nn,ln,Qn=50;do{var Yn=ke*ke,dr=G+Yn*(Q+Yn*(ut+Yn*wt)),Mr=ke*(It-1+Yn*(kt-qt+Yn*Yt)),$r=dr*dr+Mr*Mr,Kr=2*Mr,bi=$r/Kr,Oi=bi*bi,zi=k(dr/bi)/m,Vi=Ce*zi,_a=dr*dr,ya=(2*Q+Yn*(4*ut+Yn*6*wt))*ke,wi=It+Yn*(3*kt+Yn*5*Yt),$i=2*(dr*ya+Mr*(wi-1)),sa=2*(wi-1),Bi=($i*Kr-$r*sa)/(Kr*Kr),ca=n(Vi),qi=y(Vi),Ca=bi*ca,Na=bi*qi,rs=Ce/m*(1/X(1-_a/Oi))*(ya*bi-dr*Bi)/Oi,Jo=Na-ye,is=ke*(1+Yn*qt)+bi-Ca-Le,jo=Bi*qi+Ca*rs,Ps=Ca*zi,Rl=1+Bi-(Bi*ca-Na*rs),sl=Na*zi,lc=jo*sl-Rl*Ps;if(!lc)break;Ce-=nn=(is*jo-Jo*Rl)/lc,ke-=ln=(Jo*sl-is*Ps)/lc}while((h(nn)>M||h(ln)>M)&&--Qn>0);return[Ce,ke]},ce},ha=wo(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),ro=function(){return u.geoProjection(ha).scale(149.995)},ko=wo(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),$a=function(){return u.geoProjection(ko).scale(153.93)},Mo=wo(5/6*m,-.62636,-.0344,0,1.3493,-.05524,0,.045),ss=function(){return u.geoProjection(Mo).scale(130.945)};function Pa(D,G){var Q=D*D,ut=G*G;return[D*(1-.162388*ut)*(.87-952426e-9*Q*Q),G*(1+ut/12)]}Pa.invert=function(D,G){var Q=D,ut=G,wt=50,It;do{var kt=ut*ut;ut-=It=(ut*(1+kt/12)-G)/(1+kt/4)}while(h(It)>M&&--wt>0);wt=50,D/=1-.162388*kt;do{var Yt=(Yt=Q*Q)*Yt;Q-=It=(Q*(.87-952426e-9*Yt)-D)/(.87-.00476213*Yt)}while(h(It)>M&&--wt>0);return[Q,ut]};var Bo=function(){return u.geoProjection(Pa).scale(131.747)},Ro=wo(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),Js=function(){return u.geoProjection(Ro).scale(131.087)},Ko=function(G){var Q=G(S,0)[0]-G(-S,0)[0];function ut(wt,It){var kt=wt>0?-.5:.5,Yt=G(wt+kt*m,It);return Yt[0]-=kt*Q,Yt}return G.invert&&(ut.invert=function(wt,It){var kt=wt>0?-.5:.5,Yt=G.invert(wt+kt*Q,It),qt=Yt[0]-kt*m;return qt<-m?qt+=2*m:qt>m&&(qt-=2*m),Yt[0]=qt,Yt}),ut};function nu(D,G){var Q=g(D),ut=g(G),wt=n(G),It=n(D)*wt,kt=y(D)*wt,Yt=y(ut*G);D=h(c(kt,Yt)),G=k(It),h(D-S)>M&&(D%=S);var qt=Rs(D>m/4?S-D:D,G);return D>m/4&&(Yt=qt[0],qt[0]=-qt[1],qt[1]=-Yt),qt[0]*=Q,qt[1]*=-ut,qt}nu.invert=function(D,G){h(D)>1&&(D=g(D)*2-D),h(G)>1&&(G=g(G)*2-G);var Q=g(D),ut=g(G),wt=-Q*D,It=-ut*G,kt=It/wt<1,Yt=je(kt?It:wt,kt?wt:It),qt=Yt[0],ce=Yt[1],ye=n(ce);return kt&&(qt=-S-qt),[Q*(c(y(qt)*ye,-y(ce))+m),ut*k(n(qt)*ye)]};function Rs(D,G){if(G===S)return[0,0];var Q=y(G),ut=Q*Q,wt=ut*ut,It=1+wt,kt=1+3*wt,Yt=1-wt,qt=k(1/X(It)),ce=Yt+ut*It*qt,ye=(1-Q)/ce,Le=X(ye),Ce=ye*It,ke=X(Ce),nn=Le*Yt,ln,Qn;if(D===0)return[0,-(nn+ut*ke)];var Yn=n(G),dr=1/Yn,Mr=2*Q*Yn,$r=(-3*ut+qt*kt)*Mr,Kr=(-ce*Yn-(1-Q)*$r)/(ce*ce),bi=.5*Kr/Le,Oi=Yt*bi-2*ut*Le*Mr,zi=ut*It*Kr+ye*kt*Mr,Vi=-dr*Mr,_a=-dr*zi,ya=-2*dr*Oi,wi=4*D/m,$i;if(D>.222*m||G<m/4&&D>.175*m){if(ln=(nn+ut*X(Ce*(1+wt)-nn*nn))/(1+wt),D>m/4)return[ln,ln];var sa=ln,Bi=.5*ln;ln=.5*(Bi+sa),Qn=50;do{var ca=X(Ce-ln*ln),qi=ln*(ya+Vi*ca)+_a*k(ln/ke)-wi;if(!qi)break;qi<0?Bi=ln:sa=ln,ln=.5*(Bi+sa)}while(h(sa-Bi)>M&&--Qn>0)}else{ln=M,Qn=25;do{var Ca=ln*ln,Na=X(Ce-Ca),rs=ya+Vi*Na,Jo=ln*rs+_a*k(ln/ke)-wi,is=rs+(_a-Vi*Ca)/Na;ln-=$i=Na?Jo/is:0}while(h($i)>M&&--Qn>0)}return[ln,-nn-ut*X(Ce-ln*ln)]}function je(D,G){for(var Q=0,ut=1,wt=.5,It=50;;){var kt=wt*wt,Yt=X(wt),qt=k(1/X(1+kt)),ce=1-kt+wt*(1+kt)*qt,ye=(1-Yt)/ce,Le=X(ye),Ce=ye*(1+kt),ke=Le*(1-kt),nn=Ce-D*D,ln=X(nn),Qn=G+ke+wt*ln;if(h(ut-Q)<x||--It==0||Qn===0)break;Qn>0?Q=wt:ut=wt,wt=.5*(Q+ut)}if(!It)return null;var Yn=k(Yt),dr=n(Yn),Mr=1/dr,$r=2*Yt*dr,Kr=(-3*wt+qt*(1+3*kt))*$r,bi=(-ce*dr-(1-Yt)*Kr)/(ce*ce),Oi=.5*bi/Le,zi=(1-kt)*Oi-2*wt*Le*$r,Vi=-2*Mr*zi,_a=-Mr*$r,ya=-Mr*(wt*(1+kt)*bi+ye*(1+3*kt)*$r);return[m/4*(D*(Vi+_a*ln)+ya*k(D/X(Ce))),Yn]}var oe=function(){return u.geoProjection(Ko(nu)).scale(239.75)};function Zt(D,G,Q){var ut,wt,It;return D?(ut=be(D,Q),G?(wt=be(G,1-Q),It=wt[1]*wt[1]+Q*ut[0]*ut[0]*wt[0]*wt[0],[[ut[0]*wt[2]/It,ut[1]*ut[2]*wt[0]*wt[1]/It],[ut[1]*wt[1]/It,-ut[0]*ut[2]*wt[0]*wt[2]/It],[ut[2]*wt[1]*wt[2]/It,-Q*ut[0]*ut[1]*wt[0]/It]]):[[ut[0],0],[ut[1],0],[ut[2],0]]):(wt=be(G,1-Q),[[0,wt[0]/wt[1]],[1/wt[1],0],[wt[2]/wt[1],0]])}function be(D,G){var Q,ut,wt,It,kt;if(G<M)return It=y(D),ut=n(D),Q=G*(D-It*ut)/4,[It-Q*ut,ut+Q*It,1-G*It*It/2,D-Q];if(G>=1-M)return Q=(1-G)/4,ut=gt(D),It=at(D),wt=1/ut,kt=ut*pt(D),[It+Q*(kt-D)/(ut*ut),wt-Q*It*wt*(kt-D),wt+Q*It*wt*(kt+D),2*r(i(D))-S+Q*(kt-D)/ut];var Yt=[1,0,0,0,0,0,0,0,0],qt=[X(G),0,0,0,0,0,0,0,0],ce=0;for(ut=X(1-G),kt=1;h(qt[ce]/Yt[ce])>M&&ce<8;)Q=Yt[ce++],qt[ce]=(Q-ut)/2,Yt[ce]=(Q+ut)/2,ut=X(Q*ut),kt*=2;wt=kt*Yt[ce]*D;do It=qt[ce]*y(ut=wt)/Yt[ce],wt=(k(It)+wt)/2;while(--ce);return[y(wt),It=n(wt),It/n(wt-ut),wt]}function sn(D,G,Q){var ut=h(D),wt=h(G),It=pt(wt);if(ut){var kt=1/y(ut),Yt=1/(_(ut)*_(ut)),qt=-(Yt+Q*(It*It*kt*kt)-1+Q),ce=(Q-1)*Yt,ye=(-qt+X(qt*qt-4*ce))/2;return[Vn(r(1/X(ye)),Q)*g(D),Vn(r(X((ye/Yt-1)/Q)),1-Q)*g(G)]}return[0,Vn(r(It),1-Q)*g(G)]}function Vn(D,G){if(!G)return D;if(G===1)return o(_(D/2+P));for(var Q=1,ut=X(1-G),wt=X(G),It=0;h(wt)>M;It++){if(D%m){var kt=r(ut*_(D)/Q);kt<0&&(kt+=m),D+=kt+~~(D/m)*m}else D+=D;wt=(Q+ut)/2,ut=X(Q*ut),wt=((Q=wt)-ut)/2}return D/(v(2,It)*Q)}function er(D,G){var Q=(O-1)/(O+1),ut=X(1-Q*Q),wt=Vn(S,ut*ut),It=-1,kt=o(_(m/4+h(G)/2)),Yt=i(It*kt)/X(Q),qt=kn(Yt*n(It*D),Yt*y(It*D)),ce=sn(qt[0],qt[1],ut*ut);return[-ce[1],(G>=0?1:-1)*(.5*wt-ce[0])]}function kn(D,G){var Q=D*D,ut=G+1,wt=1-Q-G*G;return[.5*((D>=0?S:-S)-c(wt,2*D)),-.25*o(wt*wt+4*Q)+.5*o(ut*ut+Q)]}function Xr(D,G){var Q=G[0]*G[0]+G[1]*G[1];return[(D[0]*G[0]+D[1]*G[1])/Q,(D[1]*G[0]-D[0]*G[1])/Q]}er.invert=function(D,G){var Q=(O-1)/(O+1),ut=X(1-Q*Q),wt=Vn(S,ut*ut),It=-1,kt=Zt(.5*wt-G,-D,ut*ut),Yt=Xr(kt[0],kt[1]),qt=c(Yt[1],Yt[0])/It;return[qt,2*r(i(.5/It*o(Q*Yt[0]*Yt[0]+Q*Yt[1]*Yt[1])))-S]};var vi=function(){return u.geoProjection(Ko(er)).scale(151.496)};function Si(D,G){if(arguments.length<2&&(G=D),G===1)return u.geoAzimuthalEqualAreaRaw;if(G===Infinity)return ji;function Q(ut,wt){var It=u.geoAzimuthalEqualAreaRaw(ut/G,wt);return It[0]*=D,It}return Q.invert=function(ut,wt){var It=u.geoAzimuthalEqualAreaRaw.invert(ut/D,wt);return It[0]*=G,It},Q}function ji(D,G){return[D*n(G)/n(G/=2),2*y(G)]}ji.invert=function(D,G){var Q=2*k(G/2);return[D*n(Q/2)/n(Q),Q]};var Ji=function(){var G=2,Q=u.geoProjectionMutator(Si),ut=Q(G);return ut.coefficient=function(wt){return arguments.length?Q(G=+wt):G},ut.scale(169.529)};function za(D){var G=y(D),Q=n(D),ut=va(D);ut.invert=va(-D);function wt(It,kt){var Yt=ut(It,kt);It=Yt[0],kt=Yt[1];var qt=y(kt),ce=n(kt),ye=n(It),Le=Z(G*qt+Q*ce*ye),Ce=y(Le),ke=h(Ce)>M?Le/Ce:1;return[ke*Q*y(It),(h(It)>S?ke:-ke)*(G*ce-Q*qt*ye)]}return wt.invert=function(It,kt){var Yt=X(It*It+kt*kt),qt=-y(Yt),ce=n(Yt),ye=Yt*ce,Le=-kt*qt,Ce=Yt*G,ke=X(ye*ye+Le*Le-Ce*Ce),nn=c(ye*Ce+Le*ke,Le*Ce-ye*ke),ln=(Yt>S?-1:1)*c(It*qt,Yt*n(nn)*ce+kt*y(nn)*qt);return ut.invert(ln,nn)},wt}function va(D){var G=y(D),Q=n(D);return function(ut,wt){var It=n(wt),kt=n(ut)*It,Yt=y(ut)*It,qt=y(wt);return[c(Yt,kt*Q-qt*G),k(qt*Q+kt*G)]}}var so=function(){var G=0,Q=u.geoProjectionMutator(za),ut=Q(G),wt=ut.rotate,It=ut.stream,kt=u.geoCircle();return ut.parallel=function(Yt){if(!arguments.length)return G*N;var qt=ut.rotate();return Q(G=Yt*K).rotate(qt)},ut.rotate=function(Yt){return arguments.length?(wt.call(ut,[Yt[0],Yt[1]-G*N]),kt.center([-Yt[0],-Yt[1]]),ut):(Yt=wt.call(ut),Yt[1]+=G*N,Yt)},ut.stream=function(Yt){return Yt=It(Yt),Yt.sphere=function(){Yt.polygonStart();var qt=.01,ce=kt.radius(90-qt)().coordinates[0],ye=ce.length-1,Le=-1,Ce;for(Yt.lineStart();++Le<ye;)Yt.point((Ce=ce[Le])[0],Ce[1]);for(Yt.lineEnd(),ce=kt.radius(90+qt)().coordinates[0],ye=ce.length-1,Yt.lineStart();--Le>=0;)Yt.point((Ce=ce[Le])[0],Ce[1]);Yt.lineEnd(),Yt.polygonEnd()},Yt},ut.scale(79.4187).parallel(45).clipAngle(180-.001)},Ia=41+48/36+37/3600,io=Te(0);function uo(D){var G=Ia*K,Q=li(m,G)[0]-li(-m,G)[0],ut=io(0,G)[1],wt=li(0,G)[1],It=R-wt,kt=H/D,Yt=4/H,qt=ut+It*It*4/H;function ce(ye,Le){var Ce,ke=h(Le);if(ke>G){var nn=f(D-1,l(0,a((ye+m)/kt)));ye+=m*(D-1)/D-nn*kt,Ce=li(ye,ke),Ce[0]=Ce[0]*H/Q-H*(D-1)/(2*D)+nn*H/D,Ce[1]=ut+(Ce[1]-wt)*4*It/H,Le<0&&(Ce[1]=-Ce[1])}else Ce=io(ye,Le);return Ce[0]*=Yt,Ce[1]/=qt,Ce}return ce.invert=function(ye,Le){ye/=Yt,Le*=qt;var Ce=h(Le);if(Ce>ut){var ke=f(D-1,l(0,a((ye+m)/kt)));ye=(ye+m*(D-1)/D-ke*kt)*Q/H;var nn=li.invert(ye,.25*(Ce-ut)*H/It+wt);return nn[0]-=m*(D-1)/D-ke*kt,Le<0&&(nn[1]=-nn[1]),nn}return io.invert(ye,Le)},ce}function ka(D){return{type:"Polygon",coordinates:[s.range(-180,180+D/2,D).map(function(G,Q){return[G,Q&1?90-1e-6:Ia]}).concat(s.range(180,-180-D/2,-D).map(function(G,Q){return[G,Q&1?-90+1e-6:-Ia]}))]}}var vo=function(){var G=4,Q=u.geoProjectionMutator(uo),ut=Q(G),wt=ut.stream;return ut.lobes=function(It){return arguments.length?Q(G=+It):G},ut.stream=function(It){var kt=ut.rotate(),Yt=wt(It),qt=(ut.rotate([0,0]),wt(It));return ut.rotate(kt),Yt.sphere=function(){u.geoStream(ka(180/G),qt)},Yt},ut.scale(239.75)};function Vo(D){var G=1+D,Q=y(1/G),ut=k(Q),wt=2*X(m/(It=m+4*ut*G)),It,kt=.5*wt*(G+X(D*(2+D))),Yt=D*D,qt=G*G;function ce(ye,Le){var Ce=1-y(Le),ke,nn;if(Ce&&Ce<2){var ln=S-Le,Qn=25,Yn;do{var dr=y(ln),Mr=n(ln),$r=ut+c(dr,G-Mr),Kr=1+qt-2*G*Mr;ln-=Yn=(ln-Yt*ut-G*dr+Kr*$r-.5*Ce*It)/(2*G*dr*$r)}while(h(Yn)>x&&--Qn>0);ke=wt*X(Kr),nn=ye*$r/m}else ke=wt*(D+Ce),nn=ye*ut/m;return[ke*y(nn),kt-ke*n(nn)]}return ce.invert=function(ye,Le){var Ce=ye*ye+(Le-=kt)*Le,ke=(1+qt-Ce/(wt*wt))/(2*G),nn=Z(ke),ln=y(nn),Qn=ut+c(ln,G-ke);return[k(ye/X(Ce))*m/Qn,k(1-2*(nn-Yt*ut-G*ln+(1+qt-2*G*ke)*Qn)/It)]},ce}var Do=function(){var G=1,Q=u.geoProjectionMutator(Vo),ut=Q(G);return ut.ratio=function(wt){return arguments.length?Q(G=+wt):G},ut.scale(167.774).center([0,18.67])},fs=.7109889596207567,mo=.0528035274542;function Ga(D,G){return G>-fs?(D=$(D,G),D[1]+=mo,D):$t(D,G)}Ga.invert=function(D,G){return G>-fs?$.invert(D,G-mo):$t.invert(D,G)};var us=function(){return u.geoProjection(Ga).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};function Xo(D,G){return h(G)>fs?(D=$(D,G),D[1]-=G>0?mo:-mo,D):$t(D,G)}Xo.invert=function(D,G){return h(G)>fs?$.invert(D,G+(G>0?mo:-mo)):$t.invert(D,G)};var Ta=function(){return u.geoProjection(Xo).scale(152.63)};function mn(D,G){return h(D[0]-G[0])<M&&h(D[1]-G[1])<M}function cr(D,G){for(var Q=-1,ut=D.length,wt=D[0],It,kt,Yt,qt=[];++Q<ut;){It=D[Q],kt=(It[0]-wt[0])/G,Yt=(It[1]-wt[1])/G;for(var ce=0;ce<G;++ce)qt.push([wt[0]+ce*kt,wt[1]+ce*Yt]);wt=It}return qt.push(It),qt}function Wr(D){var G=[],Q,ut,wt,It,kt,Yt,qt,ce=D[0].length;for(qt=0;qt<ce;++qt)Q=D[0][qt],ut=Q[0][0],wt=Q[0][1],It=Q[1][1],kt=Q[2][0],Yt=Q[2][1],G.push(cr([[ut+M,wt+M],[ut+M,It-M],[kt-M,It-M],[kt-M,Yt+M]],30));for(qt=D[1].length-1;qt>=0;--qt)Q=D[1][qt],ut=Q[0][0],wt=Q[0][1],It=Q[1][1],kt=Q[2][0],Yt=Q[2][1],G.push(cr([[kt-M,Yt-M],[kt-M,It+M],[ut+M,It+M],[ut+M,wt-M]],30));return{type:"Polygon",coordinates:[s.merge(G)]}}var Di=function(G,Q){var ut=Wr(Q);Q=Q.map(function(qt){return qt.map(function(ce){return[[ce[0][0]*K,ce[0][1]*K],[ce[1][0]*K,ce[1][1]*K],[ce[2][0]*K,ce[2][1]*K]]})});var wt=Q.map(function(qt){return qt.map(function(ce){var ye=G(ce[0][0],ce[0][1])[0],Le=G(ce[2][0],ce[2][1])[0],Ce=G(ce[1][0],ce[0][1])[1],ke=G(ce[1][0],ce[1][1])[1],nn;return Ce>ke&&(nn=Ce,Ce=ke,ke=nn),[[ye,Ce],[Le,ke]]})});function It(qt,ce){for(var ye=ce<0?-1:1,Le=Q[+(ce<0)],Ce=0,ke=Le.length-1;Ce<ke&&qt>Le[Ce][2][0];++Ce);var nn=G(qt-Le[Ce][1][0],ce);return nn[0]+=G(Le[Ce][1][0],ye*ce>ye*Le[Ce][0][1]?Le[Ce][0][1]:ce)[0],nn}G.invert&&(It.invert=function(qt,ce){for(var ye=wt[+(ce<0)],Le=Q[+(ce<0)],Ce=0,ke=ye.length;Ce<ke;++Ce){var nn=ye[Ce];if(nn[0][0]<=qt&&qt<nn[1][0]&&nn[0][1]<=ce&&ce<nn[1][1]){var ln=G.invert(qt-G(Le[Ce][1][0],0)[0],ce);return ln[0]+=Le[Ce][1][0],mn(It(ln[0],ln[1]),[qt,ce])?ln:null}}});var kt=u.geoProjection(It),Yt=kt.stream;return kt.stream=function(qt){var ce=kt.rotate(),ye=Yt(qt),Le=(kt.rotate([0,0]),Yt(qt));return kt.rotate(ce),ye.sphere=function(){u.geoStream(ut,Le)},ye},kt},Ua=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],yo=function(){return Di(Qt,Ua).scale(160.857)},lo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],La=function(){return Di(Xo,lo).scale(152.63)},Va=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],ts=function(){return Di($,Va).scale(169.529)},ls=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Ki=function(){return Di($,ls).scale(169.529).rotate([20,0])},_u=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Fo=function(){return Di(Ga,_u).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},hs=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],$s=function(){return Di($t,hs).scale(152.63).rotate([-20,0])};function ds(D,G){return[3/H*D*X(m*m/3-G*G),G]}ds.invert=function(D,G){return[H/3*D/X(m*m/3-G*G),G]};var vs=function(){return u.geoProjection(ds).scale(158.837)};function Qs(D){function G(Q,ut){if(h(h(ut)-S)<M)return[0,ut<0?-2:2];var wt=y(ut),It=v((1+wt)/(1-wt),D/2),kt=.5*(It+1/It)+n(Q*=D);return[2*y(Q)/kt,(It-1/It)/kt]}return G.invert=function(Q,ut){var wt=h(ut);if(h(wt-2)<M)return Q?null:[0,g(ut)*S];if(wt>2)return null;Q/=2,ut/=2;var It=Q*Q,kt=ut*ut,Yt=2*ut/(1+It+kt);return Yt=v((1+Yt)/(1-Yt),1/D),[c(2*Q,1-It-kt)/D,k((Yt-1)/(Yt+1))]},G}var Mu=function(){var G=.5,Q=u.geoProjectionMutator(Qs),ut=Q(G);return ut.spacing=function(wt){return arguments.length?Q(G=+wt):G},ut.scale(124.75)},ps=m/O;function wu(D,G){return[D*(1+X(n(G)))/2,G/(n(G/2)*n(D/6))]}wu.invert=function(D,G){var Q=h(D),ut=h(G),wt=M,It=S;ut<ps?It*=ut/ps:wt+=6*Z(ps/ut);for(var kt=0;kt<25;kt++){var Yt=y(It),qt=X(n(It)),ce=y(It/2),ye=n(It/2),Le=y(wt/6),Ce=n(wt/6),ke=.5*wt*(1+qt)-Q,nn=It/(ye*Ce)-ut,ln=qt?-.25*wt*Yt/qt:0,Qn=.5*(1+qt),Yn=(1+.5*It*ce/ye)/(ye*Ce),dr=It/ye*(Le/6)/(Ce*Ce),Mr=ln*dr-Yn*Qn,$r=(ke*dr-nn*Qn)/Mr,Kr=(nn*ln-ke*Yn)/Mr;if(It-=$r,wt-=Kr,h($r)<M&&h(Kr)<M)break}return[D<0?-wt:wt,G<0?-It:It]};var Ds=function(){return u.geoProjection(wu).scale(97.2672)};function Aa(D,G){var Q=D*D,ut=G*G;return[D*(.975534+ut*(-.119161+Q*-.0143059+ut*-.0547009)),G*(1.00384+Q*(.0802894+ut*-.02855+Q*199025e-9)+ut*(.0998909+ut*-.0491032))]}Aa.invert=function(D,G){var Q=g(D)*m,ut=G/2,wt=50;do{var It=Q*Q,kt=ut*ut,Yt=Q*ut,qt=Q*(.975534+kt*(-.119161+It*-.0143059+kt*-.0547009))-D,ce=ut*(1.00384+It*(.0802894+kt*-.02855+It*199025e-9)+kt*(.0998909+kt*-.0491032))-G,ye=.975534-kt*(.119161+3*It*.0143059+kt*.0547009),Le=-Yt*(2*.119161+4*.0547009*kt+2*.0143059*It),Ce=Yt*(2*.0802894+4*199025e-9*It+2*-.02855*kt),ke=1.00384+It*(.0802894+199025e-9*It)+kt*(3*(.0998909-.02855*It)-5*.0491032*kt),nn=Le*Ce-ke*ye,ln=(ce*Le-qt*ke)/nn,Qn=(qt*Ce-ce*ye)/nn;Q-=ln,ut-=Qn}while((h(ln)>M||h(Qn)>M)&&--wt>0);return wt&&[Q,ut]};var lu=function(){return u.geoProjection(Aa).scale(139.98)};function Pu(D,G){return[y(D)/n(G),_(G)*n(D)]}Pu.invert=function(D,G){var Q=D*D,ut=G*G,wt=ut+1,It=D?A*X((wt-X(Q*Q+2*Q*(ut-1)+wt*wt))/Q+1):1/X(wt);return[k(D*It),g(G)*Z(It)]};var Zu=function(){return u.geoProjection(Pu).scale(144.049).clipAngle(90-.001)};function vl(D){var G=n(D),Q=_(P+D/2);function ut(wt,It){var kt=It-D,Yt=h(kt)<M?wt*G:h(Yt=P+It/2)<M||h(h(Yt)-S)<M?0:wt*kt/o(_(Yt)/Q);return[Yt,kt]}return ut.invert=function(wt,It){var kt,Yt=It+D;return[h(It)<M?wt/G:h(kt=P+Yt/2)<M||h(h(kt)-S)<M?0:wt*o(_(kt)/Q)/It,Yt]},ut}var Tu=function(){return Wt(vl).parallel(40).scale(158.837)};function Ao(D,G){return[D,1.25*o(_(P+.4*G))]}Ao.invert=function(D,G){return[D,2.5*r(i(.8*G))-.625*m]};var es=function(){return u.geoProjection(Ao).scale(108.318)};function gs(D){var G=D.length-1;function Q(ut,wt){for(var It=n(wt),kt=2/(1+It*n(ut)),Yt=kt*It*y(ut),qt=kt*y(wt),ce=G,ye=D[ce],Le=ye[0],Ce=ye[1],ke;--ce>=0;)ye=D[ce],Le=ye[0]+Yt*(ke=Le)-qt*Ce,Ce=ye[1]+Yt*Ce+qt*ke;return Le=Yt*(ke=Le)-qt*Ce,Ce=Yt*Ce+qt*ke,[Le,Ce]}return Q.invert=function(ut,wt){var It=20,kt=ut,Yt=wt;do{for(var qt=G,ce=D[qt],ye=ce[0],Le=ce[1],Ce=0,ke=0,nn;--qt>=0;)ce=D[qt],Ce=ye+kt*(nn=Ce)-Yt*ke,ke=Le+kt*ke+Yt*nn,ye=ce[0]+kt*(nn=ye)-Yt*Le,Le=ce[1]+kt*Le+Yt*nn;Ce=ye+kt*(nn=Ce)-Yt*ke,ke=Le+kt*ke+Yt*nn,ye=kt*(nn=ye)-Yt*Le-ut,Le=kt*Le+Yt*nn-wt;var ln=Ce*Ce+ke*ke,Qn,Yn;kt-=Qn=(ye*Ce+Le*ke)/ln,Yt-=Yn=(Le*Ce-ye*ke)/ln}while(h(Qn)+h(Yn)>M*M&&--It>0);if(It){var dr=X(kt*kt+Yt*Yt),Mr=2*r(dr*.5),$r=y(Mr);return[c(kt*$r,dr*n(Mr)),dr?k(Yt*$r/dr):0]}},Q}var po=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],cu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Oo=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ba=[[.9245,0],[0,0],[.01943,0]],As=[[.721316,0],[0,0],[-.00881625,-.00617325]];function qs(){return Ya(po,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function js(){return Ya(cu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function ms(){return Ya(Oo,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Au(){return Ya(ba,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function ks(){return Ya(As,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ya(D,G){var Q=u.geoProjection(gs(D)).rotate(G).clipAngle(90),ut=u.geoRotation(G),wt=Q.center;return delete Q.rotate,Q.center=function(It){return arguments.length?wt(ut(It)):ut.invert(wt())},Q}var nl=X(6),Zl=X(7);function Al(D,G){var Q=k(7*y(G)/(3*nl));return[nl*D*(2*n(2*Q/3)-1)/Zl,9*y(Q/3)/Zl]}Al.invert=function(D,G){var Q=3*k(G*Zl/9);return[D*Zl/(nl*(2*n(2*Q/3)-1)),k(y(Q)*3*nl/7)]};var pl=function(){return u.geoProjection(Al).scale(164.859)};function Ku(D,G){for(var Q=(1+A)*y(G),ut=G,wt=0,It;wt<25&&(ut-=It=(y(ut/2)+y(ut)-Q)/(.5*n(ut/2)+n(ut)),!(h(It)<M));wt++);return[D*(1+2*n(ut)/n(ut/2))/(3*O),2*X(3)*y(ut/2)/X(2+O)]}Ku.invert=function(D,G){var Q=G*X(2+O)/(2*X(3)),ut=2*k(Q);return[3*O*D/(1+2*n(ut)/n(ut/2)),k((Q+y(ut))/(1+A))]};var Cu=function(){return u.geoProjection(Ku).scale(188.209)};function Gs(D,G){for(var Q=X(6/(4+m)),ut=(1+m/4)*y(G),wt=G/2,It=0,kt;It<25&&(wt-=kt=(wt/2+y(wt)-ut)/(.5+n(wt)),!(h(kt)<M));It++);return[Q*(.5+n(wt))*D/1.5,Q*wt]}Gs.invert=function(D,G){var Q=X(6/(4+m)),ut=G/Q;return h(h(ut)-S)<M&&(ut=ut<0?-S:S),[1.5*D/(Q*(.5+n(ut))),k((ut/2+y(ut))/(1+m/4))]};var Cl=function(){return u.geoProjection(Gs).scale(166.518)};function ns(D,G){var Q=G*G,ut=Q*Q;return[D*(.8707-.131979*Q+ut*(-.013791+ut*(.003971*Q-.001529*ut))),G*(1.007226+Q*(.015085+ut*(-.044475+.028874*Q-.005916*ut)))]}ns.invert=function(D,G){var Q=G,ut=25,wt;do{var It=Q*Q,kt=It*It;Q-=wt=(Q*(1.007226+It*(.015085+kt*(-.044475+.028874*It-.005916*kt)))-G)/(1.007226+It*(.015085*3+kt*(-.044475*7+.028874*9*It-.005916*11*kt)))}while(h(wt)>M&&--ut>0);return[D/(.8707+(It=Q*Q)*(-.131979+It*(-.013791+It*It*It*(.003971-.001529*It)))),Q]};var Wa=function(){return u.geoProjection(ns).scale(175.295)};function fu(D,G){var Q=G*G,ut=Q*Q,wt=Q*ut;return[D*(.84719-.13063*Q+wt*wt*(-.04515+.05494*Q-.02326*ut+.00331*wt)),G*(1.01183+ut*ut*(-.02625+.01926*Q-.00396*ut))]}fu.invert=function(D,G){var Q=G,ut=25,wt,It,kt,Yt;do It=Q*Q,kt=It*It,Q-=wt=(Q*(1.01183+kt*kt*(-.02625+.01926*It-.00396*kt))-G)/(1.01183+kt*kt*(9*-.02625+11*.01926*It+13*-.00396*kt));while(h(wt)>x&&--ut>0);return It=Q*Q,kt=It*It,Yt=It*kt,[D/(.84719-.13063*It+Yt*Yt*(-.04515+.05494*It-.02326*kt+.00331*Yt)),Q]};var Xu=function(){return u.geoProjection(fu).scale(175.295)};function Ll(D,G){return[D*(1+n(G))/2,2*(G-_(G/2))]}Ll.invert=function(D,G){for(var Q=G/2,ut=0,wt=Infinity;ut<10&&h(wt)>M;++ut){var It=n(G/2);G-=wt=(G-_(G/2)-Q)/(1-.5/(It*It))}return[2*D/(1+n(G)),G]};var Uu=function(){return u.geoProjection(Ll).scale(152.63)},Vs=1.0148,rl=.23185,hu=-.14499,Ss=.02406,Ws=Vs,gl=5*rl,Iu=7*hu,Lu=9*Ss,du=1.790857183;function vu(D,G){var Q=G*G;return[D,G*(Vs+Q*Q*(rl+Q*(hu+Ss*Q)))]}vu.invert=function(D,G){G>du?G=du:G<-du&&(G=-du);var Q=G,ut;do{var wt=Q*Q;Q-=ut=(Q*(Vs+wt*wt*(rl+wt*(hu+Ss*wt)))-G)/(Ws+wt*wt*(gl+wt*(Iu+Lu*wt)))}while(h(ut)>M);return[D,Q]};var pu=function(){return u.geoProjection(vu).scale(139.319)};function Ol(D,G){if(h(G)<M)return[D,0];var Q=_(G),ut=D*y(G);return[y(ut)/Q,G+(1-n(ut))/Q]}Ol.invert=function(D,G){if(h(G)<M)return[D,0];var Q=D*D+G*G,ut=G*.5,wt=10,It;do{var kt=_(ut),Yt=1/n(ut),qt=Q-2*G*ut+ut*ut;ut-=It=(kt*qt+2*(ut-G))/(2+qt*Yt*Yt+2*(ut-G)*kt)}while(h(It)>M&&--wt>0);return kt=_(ut),[(h(G)<h(ut+1/kt)?k(D*kt):g(D)*(Z(h(D*kt))+S))/y(ut),ut]};var rc=function(){return u.geoProjection(Ol).scale(103.74)},ql=function(G,Q){var ut=tc(G[1],G[0]),wt=tc(Q[1],Q[0]),It=ml(ut,wt),kt=Ou(ut)/Ou(wt);return Nl([1,0,G[0][0],0,1,G[0][1]],Nl([kt,0,0,0,kt,0],Nl([n(It),y(It),0,-y(It),n(It),0],[1,0,-Q[0][0],0,1,-Q[0][1]])))};function gu(D){var G=1/(D[0]*D[4]-D[1]*D[3]);return[G*D[4],-G*D[1],G*(D[1]*D[5]-D[2]*D[4]),-G*D[3],G*D[0],G*(D[2]*D[3]-D[0]*D[5])]}function Nl(D,G){return[D[0]*G[0]+D[1]*G[3],D[0]*G[1]+D[1]*G[4],D[0]*G[2]+D[1]*G[5]+D[2],D[3]*G[0]+D[4]*G[3],D[3]*G[1]+D[4]*G[4],D[3]*G[2]+D[4]*G[5]+D[5]]}function tc(D,G){return[D[0]-G[0],D[1]-G[1]]}function Ou(D){return X(D[0]*D[0]+D[1]*D[1])}function ml(D,G){return c(D[0]*G[1]-D[1]*G[0],D[0]*G[0]+D[1]*G[1])}var wl=function(G,Q,ut){ut=ut==null?-m/6:ut,wt(G,{transform:[n(ut),y(ut),0,-y(ut),n(ut),0]});function wt(ye,Le){if(ye.edges=il(ye.face),Le.face){var Ce=ye.shared=yl(ye.face,Le.face),ke=ql(Ce.map(Le.project),Ce.map(ye.project));ye.transform=Le.transform?Nl(Le.transform,ke):ke;for(var nn=Le.edges,ln=0,Qn=nn.length;ln<Qn;++ln)ao(Ce[0],nn[ln][1])&&ao(Ce[1],nn[ln][0])&&(nn[ln]=ye),ao(Ce[0],nn[ln][0])&&ao(Ce[1],nn[ln][1])&&(nn[ln]=ye);for(nn=ye.edges,ln=0,Qn=nn.length;ln<Qn;++ln)ao(Ce[0],nn[ln][0])&&ao(Ce[1],nn[ln][1])&&(nn[ln]=Le),ao(Ce[0],nn[ln][1])&&ao(Ce[1],nn[ln][0])&&(nn[ln]=Le)}else ye.transform=Le.transform;return ye.children&&ye.children.forEach(function(Yn){wt(Yn,ye)}),ye}function It(ye,Le){var Ce=Q(ye,Le),ke=Ce.project([ye*N,Le*N]),nn;return(nn=Ce.transform)?[nn[0]*ke[0]+nn[1]*ke[1]+nn[2],-(nn[3]*ke[0]+nn[4]*ke[1]+nn[5])]:(ke[1]=-ke[1],ke)}Hs(G)&&(It.invert=function(ye,Le){var Ce=kt(G,[ye,-Le]);return Ce&&(Ce[0]*=K,Ce[1]*=K,Ce)});function kt(ye,Le){var Ce=ye.project.invert,ke=ye.transform,nn=Le;if(ke&&(ke=gu(ke),nn=[ke[0]*nn[0]+ke[1]*nn[1]+ke[2],ke[3]*nn[0]+ke[4]*nn[1]+ke[5]]),Ce&&ye===Yt(ln=Ce(nn)))return ln;for(var ln,Qn=ye.children,Yn=0,dr=Qn&&Qn.length;Yn<dr;++Yn)if(ln=kt(Qn[Yn],Le))return ln}function Yt(ye){return Q(ye[0]*K,ye[1]*K)}var qt=u.geoProjection(It),ce=qt.stream;return qt.stream=function(ye){var Le=qt.rotate(),Ce=ce(ye),ke=(qt.rotate([0,0]),ce(ye));return qt.rotate(Le),Ce.sphere=function(){ke.polygonStart(),ke.lineStart(),Bs(ke,G),ke.lineEnd(),ke.polygonEnd()},Ce},qt};function Bs(D,G,Q){var ut,wt=G.edges,It=wt.length,kt,Yt={type:"MultiPoint",coordinates:G.face},qt=G.face.filter(function(ln){return h(ln[1])!==90}),ce=u.geoBounds({type:"MultiPoint",coordinates:qt}),ye=!1,Le=-1,Ce=ce[1][0]-ce[0][0],ke=Ce===180||Ce===360?[(ce[0][0]+ce[1][0])/2,(ce[0][1]+ce[1][1])/2]:u.geoCentroid(Yt);if(Q)for(;++Le<It&&wt[Le]!==Q;);++Le;for(var nn=0;nn<It;++nn)kt=wt[(nn+Le)%It],Array.isArray(kt)?(ye||(D.point((ut=u.geoInterpolate(kt[0],ke)(M))[0],ut[1]),ye=!0),D.point((ut=u.geoInterpolate(kt[1],ke)(M))[0],ut[1])):(ye=!1,kt!==Q&&Bs(D,kt,G))}function ao(D,G){return D&&G&&D[0]===G[0]&&D[1]===G[1]}function yl(D,G){for(var Q,ut,wt=D.length,It=null,kt=0;kt<wt;++kt){Q=D[kt];for(var Yt=G.length;--Yt>=0;)if(ut=G[Yt],Q[0]===ut[0]&&Q[1]===ut[1]){if(It)return[It,Q];It=Q}}}function il(D){for(var G=D.length,Q=[],ut=D[G-1],wt=0;wt<G;++wt)Q.push([ut,ut=D[wt]]);return Q}function Hs(D){return D.project.invert||D.children&&D.children.some(Hs)}var Ra=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],xo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(D){return D.map(function(G){return Ra[G]})}),ru=function(G){G=G||function(ut){var wt=u.geoCentroid({type:"MultiPoint",coordinates:ut});return u.geoGnomonic().scale(1).translate([0,0]).rotate([-wt[0],-wt[1]])};var Q=xo.map(function(ut){return{face:ut,project:G(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,wt){var It=Q[ut];It&&(It.children||(It.children=[])).push(Q[wt])}),wl(Q[0],function(ut,wt){return Q[ut<-m/2?wt<0?6:4:ut<0?wt<0?2:0:ut<m/2?wt<0?3:1:wt<0?7:5]}).scale(101.858).center([0,45])},xl=2/X(3);function al(D,G){var Q=li(D,G);return[Q[0]*xl,Q[1]]}al.invert=function(D,G){return li.invert(D/xl,G)};var ku=function(G){G=G||function(ut){var wt=u.geoCentroid({type:"MultiPoint",coordinates:ut});return u.geoProjection(al).translate([0,0]).scale(1).rotate(wt[1]>0?[-wt[0],0]:[180-wt[0],180])};var Q=xo.map(function(ut){return{face:ut,project:G(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,wt){var It=Q[ut];It&&(It.children||(It.children=[])).push(Q[wt])}),wl(Q[0],function(ut,wt){return Q[ut<-m/2?wt<0?6:4:ut<0?wt<0?2:0:ut<m/2?wt<0?3:1:wt<0?7:5]}).scale(121.906).center([0,48.5904])},zl=function(G){G=G||function(Yt){var qt=Yt.length===6?u.geoCentroid({type:"MultiPoint",coordinates:Yt}):Yt[0];return u.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var Q=xo.map(function(Yt){for(var qt=Yt.map(Fs),ce=qt.length,ye=qt[ce-1],Le,Ce=[],ke=0;ke<ce;++ke)Le=qt[ke],Ce.push(mu([ye[0]*.9486832980505138+Le[0]*.31622776601683794,ye[1]*.9486832980505138+Le[1]*.31622776601683794,ye[2]*.9486832980505138+Le[2]*.31622776601683794]),mu([Le[0]*.9486832980505138+ye[0]*.31622776601683794,Le[1]*.9486832980505138+ye[1]*.31622776601683794,Le[2]*.9486832980505138+ye[2]*.31622776601683794])),ye=Le;return Ce}),ut=[],wt=[-1,0,0,1,0,1,4,5];Q.forEach(function(Yt,qt){for(var ce=xo[qt],ye=ce.length,Le=ut[qt]=[],Ce=0;Ce<ye;++Ce)Q.push([ce[Ce],Yt[(Ce*2+2)%(2*ye)],Yt[(Ce*2+1)%(2*ye)]]),wt.push(qt),Le.push(bl(Fs(Yt[(Ce*2+2)%(2*ye)]),Fs(Yt[(Ce*2+1)%(2*ye)])))});var It=Q.map(function(Yt){return{project:G(Yt),face:Yt}});wt.forEach(function(Yt,qt){var ce=It[Yt];ce&&(ce.children||(ce.children=[])).push(It[qt])});function kt(Yt,qt){var ce=n(qt),ye=[ce*n(Yt),ce*y(Yt),y(qt)],Le=Yt<-m/2?qt<0?6:4:Yt<0?qt<0?2:0:Yt<m/2?qt<0?3:1:qt<0?7:5,Ce=ut[Le];return It[cs(Ce[0],ye)<0?8+3*Le:cs(Ce[1],ye)<0?8+3*Le+1:cs(Ce[2],ye)<0?8+3*Le+2:Le]}return wl(It[0],kt).scale(110.625).center([0,45])};function cs(D,G){for(var Q=0,ut=D.length,wt=0;Q<ut;++Q)wt+=D[Q]*G[Q];return wt}function bl(D,G){return[D[1]*G[2]-D[2]*G[1],D[2]*G[0]-D[0]*G[2],D[0]*G[1]-D[1]*G[0]]}function mu(D){return[c(D[1],D[0])*N,k(l(-1,f(1,D[2])))*N]}function Fs(D){var G=D[0]*K,Q=D[1]*K,ut=n(Q);return[ut*n(G),ut*y(G),y(Q)]}var Wo=function(){},_s=function(G){if((ut=G.length)<4)return!1;for(var Q=0,ut,wt=G[ut-1][1]*G[0][0]-G[ut-1][0]*G[0][1];++Q<ut;)wt+=G[Q-1][1]*G[Q][0]-G[Q-1][0]*G[Q][1];return wt<=0},iu=function(G,Q){for(var ut=Q[0],wt=Q[1],It=!1,kt=0,Yt=G.length,qt=Yt-1;kt<Yt;qt=kt++){var ce=G[kt],ye=ce[0],Le=ce[1],Ce=G[qt],ke=Ce[0],nn=Ce[1];Le>wt^nn>wt&&ut<(ke-ye)*(wt-Le)/(nn-Le)+ye&&(It=!It)}return It},Ho=function(G,Q){var ut=Q.stream,wt;if(!ut)throw new Error("invalid projection");switch(G&&G.type){case"Feature":wt=Ns;break;case"FeatureCollection":wt=Ni;break;default:wt=ol;break}return wt(G,ut)};function Ni(D,G){return{type:"FeatureCollection",features:D.features.map(function(Q){return Ns(Q,G)})}}function Ns(D,G){return{type:"Feature",id:D.id,properties:D.properties,geometry:ol(D.geometry,G)}}function El(D,G){return{type:"GeometryCollection",geometries:D.geometries.map(function(Q){return ol(Q,G)})}}function ol(D,G){if(!D)return null;if(D.type==="GeometryCollection")return El(D,G);var Q;switch(D.type){case"Point":Q=tu;break;case"MultiPoint":Q=tu;break;case"LineString":Q=mi;break;case"MultiLineString":Q=mi;break;case"Polygon":Q=Ru;break;case"MultiPolygon":Q=Ru;break;case"Sphere":Q=Ru;break;default:return null}return u.geoStream(D,G(Q)),Q.result()}var No=[],Co=[],tu={point:function(G,Q){No.push([G,Q])},result:function(){var G=No.length?No.length<2?{type:"Point",coordinates:No[0]}:{type:"MultiPoint",coordinates:No}:null;return No=[],G}},mi={lineStart:Wo,point:function(G,Q){No.push([G,Q])},lineEnd:function(){No.length&&(Co.push(No),No=[])},result:function(){var G=Co.length?Co.length<2?{type:"LineString",coordinates:Co[0]}:{type:"MultiLineString",coordinates:Co}:null;return Co=[],G}},Ru={polygonStart:Wo,lineStart:Wo,point:function(G,Q){No.push([G,Q])},lineEnd:function(){var G=No.length;if(G){do No.push(No[0].slice());while(++G<4);Co.push(No),No=[]}},polygonEnd:Wo,result:function(){if(!Co.length)return null;var G=[],Q=[];return Co.forEach(function(ut){_s(ut)?G.push([ut]):Q.push(ut)}),Q.forEach(function(ut){var wt=ut[0];G.some(function(It){if(iu(It[0],wt))return It.push(ut),!0})||G.push([ut])}),Co=[],G.length?G.length>1?{type:"MultiPolygon",coordinates:G}:{type:"Polygon",coordinates:G[0]}:null}},Du=function(G){var Q=G(S,0)[0]-G(-S,0)[0];function ut(wt,It){var kt=h(wt)<S,Yt=G(kt?wt:wt>0?wt-m:wt+m,It),qt=(Yt[0]-Yt[1])*A,ce=(Yt[0]+Yt[1])*A;if(kt)return[qt,ce];var ye=Q*A,Le=qt>0^ce>0?-1:1;return[Le*qt-g(ce)*ye,Le*ce-g(qt)*ye]}return G.invert&&(ut.invert=function(wt,It){var kt=(wt+It)*A,Yt=(It-wt)*A,qt=h(kt)<.5*Q&&h(Yt)<.5*Q;if(!qt){var ce=Q*A,ye=kt>0^Yt>0?-1:1,Le=-ye*wt+(Yt>0?1:-1)*ce,Ce=-ye*It+(kt>0?1:-1)*ce;kt=(-Le-Ce)*A,Yt=(Le-Ce)*A}var ke=G.invert(kt,Yt);return qt||(ke[0]+=kt>0?m:-m),ke}),u.geoProjection(ut).rotate([-90,-90,45]).clipAngle(180-.001)},ju=function(){return Du(nu).scale(176.423)},Cs=function(){return Du(er).scale(111.48)},Ae=function(G,Q){if(!(0<=(Q=+Q)&&Q<=20))throw new Error("invalid digits");function ut(ce){var ye=ce.length,Le=2,Ce=new Array(ye);for(Ce[0]=+ce[0].toFixed(Q),Ce[1]=+ce[1].toFixed(Q);Le<ye;)Ce[Le]=ce[Le],++Le;return Ce}function wt(ce){return ce.map(ut)}function It(ce){return ce.map(wt)}function kt(ce){if(ce==null)return ce;var ye;switch(ce.type){case"GeometryCollection":ye={type:"GeometryCollection",geometries:ce.geometries.map(kt)};break;case"Point":ye={type:"Point",coordinates:ut(ce.coordinates)};break;case"MultiPoint":case"LineString":ye={type:ce.type,coordinates:wt(ce.coordinates)};break;case"MultiLineString":case"Polygon":ye={type:ce.type,coordinates:It(ce.coordinates)};break;case"MultiPolygon":ye={type:"MultiPolygon",coordinates:ce.coordinates.map(It)};break;default:return ce}return ce.bbox!=null&&(ye.bbox=ce.bbox),ye}function Yt(ce){var ye={type:"Feature",properties:ce.properties,geometry:kt(ce.geometry)};return ce.id!=null&&(ye.id=ce.id),ce.bbox!=null&&(ye.bbox=ce.bbox),ye}if(G!=null)switch(G.type){case"Feature":return Yt(G);case"FeatureCollection":{var qt={type:"FeatureCollection",features:G.features.map(Yt)};return G.bbox!=null&&(qt.bbox=G.bbox),qt}default:return kt(G)}return G};function _e(D){var G=y(D);function Q(ut,wt){var It=G?_(ut*G/2)/G:ut/2;if(!wt)return[2*It,-D];var kt=2*r(It*y(wt)),Yt=1/_(wt);return[y(kt)*Yt,wt+(1-n(kt))*Yt-D]}return Q.invert=function(ut,wt){if(h(wt+=D)<M)return[G?2*r(G*ut/2)/G:ut,0];var It=ut*ut+wt*wt,kt=0,Yt=10,qt;do{var ce=_(kt),ye=1/n(kt),Le=It-2*wt*kt+kt*kt;kt-=qt=(ce*Le+2*(kt-wt))/(2+Le*ye*ye+2*(kt-wt)*ce)}while(h(qt)>M&&--Yt>0);var Ce=ut*(ce=_(kt)),ke=_(h(wt)<h(kt+1/ce)?k(Ce)*.5:Z(Ce)*.5+m/4)/y(kt);return[G?2*r(G*ke)/G:2*ke,kt]},Q}var pn=function(){return Wt(_e).scale(131.215)},an=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];an.forEach(function(D){D[1]*=1.0144});function In(D,G){var Q=f(18,h(G)*36/m),ut=a(Q),wt=Q-ut,It=(Le=an[ut])[0],kt=Le[1],Yt=(Le=an[++ut])[0],qt=Le[1],ce=(Le=an[f(19,++ut)])[0],ye=Le[1],Le;return[D*(Yt+wt*(ce-It)/2+wt*wt*(ce-2*Yt+It)/2),(G>0?S:-S)*(qt+wt*(ye-kt)/2+wt*wt*(ye-2*qt+kt)/2)]}In.invert=function(D,G){var Q=G/S,ut=Q*90,wt=f(18,h(ut/5)),It=l(0,a(wt));do{var kt=an[It][1],Yt=an[It+1][1],qt=an[f(19,It+2)][1],ce=qt-kt,ye=qt-2*Yt+kt,Le=2*(h(Q)-Yt)/ce,Ce=ye/ce,ke=Le*(1-Ce*Le*(1-2*Ce*Le));if(ke>=0||It===1){ut=(G>=0?5:-5)*(ke+wt);var nn=50,ln;do wt=f(18,h(ut)/5),It=a(wt),ke=wt-It,kt=an[It][1],Yt=an[It+1][1],qt=an[f(19,It+2)][1],ut-=(ln=(G>=0?S:-S)*(Yt+ke*(qt-kt)/2+ke*ke*(qt-2*Yt+kt)/2)-G)*N;while(h(ln)>x&&--nn>0);break}}while(--It>=0);var Qn=an[It][0],Yn=an[It+1][0],dr=an[f(19,It+2)][0];return[D/(Yn+ke*(dr-Qn)/2+ke*ke*(dr-2*Yn+Qn)/2),ut*K]};var hr=function(){return u.geoProjection(In).scale(152.63)};function Lr(D){function G(Q,ut){var wt=n(ut),It=(D-1)/(D-wt*n(Q));return[It*wt*y(Q),It*y(ut)]}return G.invert=function(Q,ut){var wt=Q*Q+ut*ut,It=X(wt),kt=(D-X(1-wt*(D+1)/(D-1)))/((D-1)/It+It/(D-1));return[c(Q*kt,It*X(1-kt*kt)),It?k(ut*kt/It):0]},G}function Zr(D,G){var Q=Lr(D);if(!G)return Q;var ut=n(G),wt=y(G);function It(kt,Yt){var qt=Q(kt,Yt),ce=qt[1],ye=ce*wt/(D-1)+ut;return[qt[0]*ut/ye,ce/ye]}return It.invert=function(kt,Yt){var qt=(D-1)/(D-1-Yt*wt);return Q.invert(qt*kt,qt*Yt*ut)},It}var ei=function(){var G=2,Q=0,ut=u.geoProjectionMutator(Zr),wt=ut(G,Q);return wt.distance=function(It){return arguments.length?ut(G=+It,Q):G},wt.tilt=function(It){return arguments.length?ut(G,Q=It*K):Q*N},wt.scale(432.147).clipAngle(Z(1/G)*N-1e-6)},Ur=1e-4,hi=1e4,br=-180,Xt=br+Ur,ee=180,Oe=ee-Ur,Ee=-90,jt=Ee+Ur,zt=90,se=zt-Ur;function ie(D){return D.length>0}function he(D){return Math.floor(D*hi)/hi}function Be(D){return D===Ee||D===zt?[0,D]:[br,he(D)]}function Ze(D){var G=D[0],Q=D[1],ut=!1;return G<=Xt?(G=br,ut=!0):G>=Oe&&(G=ee,ut=!0),Q<=jt?(Q=Ee,ut=!0):Q>=se&&(Q=zt,ut=!0),ut?[G,Q]:D}function on(D){return D.map(Ze)}function $e(D,G,Q){for(var ut=0,wt=D.length;ut<wt;++ut){var It=D[ut].slice();Q.push({index:-1,polygon:G,ring:It});for(var kt=0,Yt=It.length;kt<Yt;++kt){var qt=It[kt],ce=qt[0],ye=qt[1];if(ce<=Xt||ce>=Oe||ye<=jt||ye>=se){It[kt]=Ze(qt);for(var Le=kt+1;Le<Yt;++Le){var Ce=It[Le],ke=Ce[0],nn=Ce[1];if(ke>Xt&&ke<Oe&&nn>jt&&nn<se)break}if(Le===kt+1)continue;if(kt){var ln={index:-1,polygon:G,ring:It.slice(0,kt+1)};ln.ring[ln.ring.length-1]=Be(ye),Q[Q.length-1]=ln}else Q.pop();if(Le>=Yt)break;Q.push({index:-1,polygon:G,ring:It=It.slice(Le-1)}),It[0]=Be(It[0][1]),kt=-1,Yt=It.length}}}}function gn(D){var G,Q=D.length,ut={},wt={},It,kt,Yt,qt,ce;for(G=0;G<Q;++G){if(It=D[G],kt=It.ring[0],qt=It.ring[It.ring.length-1],kt[0]===qt[0]&&kt[1]===qt[1]){It.polygon.push(It.ring),D[G]=null;continue}It.index=G,ut[kt]=wt[qt]=It}for(G=0;G<Q;++G)if(It=D[G],It){if(kt=It.ring[0],qt=It.ring[It.ring.length-1],Yt=wt[kt],ce=ut[qt],delete ut[kt],delete wt[qt],kt[0]===qt[0]&&kt[1]===qt[1]){It.polygon.push(It.ring);continue}Yt?(delete wt[kt],delete ut[Yt.ring[0]],Yt.ring.pop(),D[Yt.index]=null,It={index:-1,polygon:Yt.polygon,ring:Yt.ring.concat(It.ring)},Yt===ce?It.polygon.push(It.ring):(It.index=Q++,D.push(ut[It.ring[0]]=wt[It.ring[It.ring.length-1]]=It))):ce?(delete ut[qt],delete wt[ce.ring[ce.ring.length-1]],It.ring.pop(),It={index:Q++,polygon:ce.polygon,ring:It.ring.concat(ce.ring)},D[ce.index]=null,D.push(ut[It.ring[0]]=wt[It.ring[It.ring.length-1]]=It)):(It.ring.push(It.ring[0]),It.polygon.push(It.ring))}}function vn(D){var G={type:"Feature",geometry:Xn(D.geometry)};return D.id!=null&&(G.id=D.id),D.bbox!=null&&(G.bbox=D.bbox),D.properties!=null&&(G.properties=D.properties),G}function Xn(D){if(D==null)return D;var G,Q,ut,wt;switch(D.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:D.geometries.map(Xn)};break;case"Point":G={type:"Point",coordinates:Ze(D.coordinates)};break;case"MultiPoint":case"LineString":G={type:D.type,coordinates:on(D.coordinates)};break;case"MultiLineString":G={type:"MultiLineString",coordinates:D.coordinates.map(on)};break;case"Polygon":{var It=[];$e(D.coordinates,It,Q=[]),gn(Q),G={type:"Polygon",coordinates:It};break}case"MultiPolygon":{Q=[],ut=-1,wt=D.coordinates.length;for(var kt=new Array(wt);++ut<wt;)$e(D.coordinates[ut],kt[ut]=[],Q);gn(Q),G={type:"MultiPolygon",coordinates:kt.filter(ie)};break}default:return D}return D.bbox!=null&&(G.bbox=D.bbox),G}var Wn=function(G){if(G==null)return G;switch(G.type){case"Feature":return vn(G);case"FeatureCollection":{var Q={type:"FeatureCollection",features:G.features.map(vn)};return G.bbox!=null&&(Q.bbox=G.bbox),Q}default:return Xn(G)}};function Jn(D,G){var Q=_(G/2),ut=y(P*Q);return[D*(.74482-.34588*ut*ut),1.70711*Q]}Jn.invert=function(D,G){var Q=G/1.70711,ut=y(P*Q);return[D/(.74482-.34588*ut*ut),2*r(Q)]};var Hn=function(){return u.geoProjection(Jn).scale(146.153)},fr=function(G,Q,ut){var wt=u.geoInterpolate(Q,ut),It=wt(.5),kt=u.geoRotation([-It[0],-It[1]])(Q),Yt=wt.distance/2,qt=-k(y(kt[1]*K)/y(Yt)),ce=[-It[0],-It[1],-(kt[0]>0?m-qt:qt)*N],ye=u.geoProjection(G(Yt)).rotate(ce),Le=u.geoRotation(ce),Ce=ye.center;return delete ye.rotate,ye.center=function(ke){return arguments.length?Ce(Le(ke)):Le.invert(Ce())},ye.clipAngle(90)};function xr(D){var G=n(D);function Q(ut,wt){var It=u.geoGnomonicRaw(ut,wt);return It[0]*=G,It}return Q.invert=function(ut,wt){return u.geoGnomonicRaw.invert(ut/G,wt)},Q}function Vr(){return gi([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function gi(D,G){return fr(xr,D,G)}function Fr(D){if(!(D*=2))return u.geoAzimuthalEquidistantRaw;var G=-D/2,Q=-G,ut=D*D,wt=_(Q),It=.5/y(Q);function kt(Yt,qt){var ce=Z(n(qt)*n(Yt-G)),ye=Z(n(qt)*n(Yt-Q)),Le=qt<0?-1:1;return ce*=ce,ye*=ye,[(ce-ye)/(2*D),Le*X(4*ut*ye-(ut-ce+ye)*(ut-ce+ye))/(2*D)]}return kt.invert=function(Yt,qt){var ce=qt*qt,ye=n(X(ce+(Ce=Yt+G)*Ce)),Le=n(X(ce+(Ce=Yt+Q)*Ce)),Ce,ke;return[c(ke=ye-Le,Ce=(ye+Le)*wt),(qt<0?-1:1)*Z(X(Ce*Ce+ke*ke)*It)]},kt}function ai(){return yi([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function yi(D,G){return fr(Fr,D,G)}function Ui(D,G){if(h(G)<M)return[D,0];var Q=h(G/S),ut=k(Q);if(h(D)<M||h(h(G)-S)<M)return[0,g(G)*m*_(ut/2)];var wt=n(ut),It=h(m/D-D/m)/2,kt=It*It,Yt=wt/(Q+wt-1),qt=Yt*(2/Q-1),ce=qt*qt,ye=ce+kt,Le=Yt-ce,Ce=kt+Yt;return[g(D)*m*(It*Le+X(kt*Le*Le-ye*(Yt*Yt-ce)))/ye,g(G)*m*(qt*Ce-It*X((kt+1)*ye-Ce*Ce))/ye]}Ui.invert=function(D,G){if(h(G)<M)return[D,0];if(h(D)<M)return[0,S*y(2*r(G/m))];var Q=(D/=m)*D,ut=(G/=m)*G,wt=Q+ut,It=wt*wt,kt=-h(G)*(1+wt),Yt=kt-2*ut+Q,qt=-2*kt+1+2*ut+It,ce=ut/qt+(2*Yt*Yt*Yt/(qt*qt*qt)-9*kt*Yt/(qt*qt))/27,ye=(kt-Yt*Yt/(3*qt))/qt,Le=2*X(-ye/3),Ce=Z(3*ce/(ye*Le))/3;return[m*(wt-1+X(1+2*(Q-ut)+It))/(2*D),g(G)*m*(-Le*n(Ce+m/3)-Yt/(3*qt))]};var Pi=function(){return u.geoProjection(Ui).scale(79.4183)};function pa(D,G){if(h(G)<M)return[D,0];var Q=h(G/S),ut=k(Q);if(h(D)<M||h(h(G)-S)<M)return[0,g(G)*m*_(ut/2)];var wt=n(ut),It=h(m/D-D/m)/2,kt=It*It,Yt=wt*(X(1+kt)-It*wt)/(1+kt*Q*Q);return[g(D)*m*Yt,g(G)*m*X(1-Yt*(2*It+Yt))]}pa.invert=function(D,G){if(!D)return[0,S*y(2*r(G/m))];var Q=h(D/m),ut=(1-Q*Q-(G/=m)*G)/(2*Q),wt=ut*ut,It=X(wt+1);return[g(D)*m*(It-ut),g(G)*S*y(2*c(X((1-2*ut*Q)*(ut+It)-Q),X(It+ut+Q)))]};var ta=function(){return u.geoProjection(pa).scale(79.4183)};function oa(D,G){if(h(G)<M)return[D,0];var Q=G/S,ut=k(Q);if(h(D)<M||h(h(G)-S)<M)return[0,m*_(ut/2)];var wt=(m/D-D/m)/2,It=Q/(1+n(ut));return[m*(g(D)*X(wt*wt+1-It*It)-wt),m*It]}oa.invert=function(D,G){if(!G)return[D,0];var Q=G/m,ut=(m*m*(1-Q*Q)-D*D)/(2*m*D);return[D?m*(g(D)*X(ut*ut+1)-ut):0,S*y(2*r(Q))]};var si=function(){return u.geoProjection(oa).scale(79.4183)};function ma(D,G){if(!G)return[D,0];var Q=h(G);if(!D||Q===S)return[0,G];var ut=Q/S,wt=ut*ut,It=(8*ut-wt*(wt+2)-5)/(2*wt*(ut-1)),kt=It*It,Yt=ut*It,qt=wt+kt+2*Yt,ce=ut+3*It,ye=D/S,Le=ye+1/ye,Ce=g(h(D)-S)*X(Le*Le-4),ke=Ce*Ce,nn=qt*(wt+kt*ke-1)+(1-wt)*(wt*(ce*ce+4*kt)+12*Yt*kt+4*kt*kt),ln=(Ce*(qt+kt-1)+2*X(nn))/(4*qt+ke);return[g(D)*S*ln,g(G)*S*X(1+Ce*h(ln)-ln*ln)]}ma.invert=function(D,G){var Q;if(!D||!G)return[D,G];G/=m;var ut=g(D)*D/S,wt=(ut*ut-1+4*G*G)/h(ut),It=wt*wt,kt=2*G,Yt=50;do{var qt=kt*kt,ce=(8*kt-qt*(qt+2)-5)/(2*qt*(kt-1)),ye=(3*kt-qt*kt-10)/(2*qt*kt),Le=ce*ce,Ce=kt*ce,ke=kt+ce,nn=ke*ke,ln=kt+3*ce,Qn=nn*(qt+Le*It-1)+(1-qt)*(qt*(ln*ln+4*Le)+Le*(12*Ce+4*Le)),Yn=-2*ke*(4*Ce*Le+(1-4*qt+3*qt*qt)*(1+ye)+Le*(-6+14*qt-It+(-8+8*qt-2*It)*ye)+Ce*(-8+12*qt+(-10+10*qt-It)*ye)),dr=X(Qn),Mr=wt*(nn+Le-1)+2*dr-ut*(4*nn+It),$r=wt*(2*ce*ye+2*ke*(1+ye))+Yn/dr-8*ke*(wt*(-1+Le+nn)+2*dr)*(1+ye)/(It+4*nn);kt-=Q=Mr/$r}while(Q>M&&--Yt>0);return[g(D)*(X(wt*wt+4)+wt)*m/4,S*kt]};var to=function(){return u.geoProjection(ma).scale(127.16)},Ha=4*m+3*X(3),_i=2*X(2*m*X(3)/Ha),Fa=ot(_i*X(3)/m,_i,Ha/6),Za=function(){return u.geoProjection(Fa).scale(176.84)};function Os(D,G){return[D*X(1-3*G*G/(m*m)),G]}Os.invert=function(D,G){return[D/X(1-3*G*G/(m*m)),G]};var Ms=function(){return u.geoProjection(Os).scale(152.63)};function ws(D,G){var Q=.90631*y(G),ut=X(1-Q*Q),wt=X(2/(1+ut*n(D/=3)));return[2.66723*ut*wt*y(D),1.24104*Q*wt]}ws.invert=function(D,G){var Q=D/2.66723,ut=G/1.24104,wt=X(Q*Q+ut*ut),It=2*k(wt/2);return[3*c(D*_(It),2.66723*wt),wt&&k(G*y(It)/(1.24104*.90631*wt))]};var au=function(){return u.geoProjection(ws).scale(172.632)};function j(D,G){var Q=n(G),ut=n(D)*Q,wt=1-ut,It=n(D=c(y(D)*Q,-y(G))),kt=y(D);return Q=X(1-ut*ut),[kt*Q-It*wt,-It*Q-kt*wt]}j.invert=function(D,G){var Q=(D*D+G*G)/-2,ut=X(-Q*(2+Q)),wt=G*Q+D*ut,It=D*Q-G*ut,kt=X(It*It+wt*wt);return[c(ut*wt,kt*(1+Q)),kt?-k(ut*It/kt):0]};var I=function(){return u.geoProjection(j).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)};function w(D,G){var Q=St(D,G);return[(Q[0]+D/S)/2,(Q[1]+G)/2]}w.invert=function(D,G){var Q=D,ut=G,wt=25;do{var It=n(ut),kt=y(ut),Yt=y(2*ut),qt=kt*kt,ce=It*It,ye=y(Q),Le=n(Q/2),Ce=y(Q/2),ke=Ce*Ce,nn=1-ce*Le*Le,ln=nn?Z(It*Le)*X(Qn=1/nn):Qn=0,Qn,Yn=.5*(2*ln*It*Ce+Q/S)-D,dr=.5*(ln*kt+ut)-G,Mr=.5*Qn*(ce*ke+ln*It*Le*qt)+.5/S,$r=Qn*(ye*Yt/4-ln*kt*Ce),Kr=.125*Qn*(Yt*Ce-ln*kt*ce*ye),bi=.5*Qn*(qt*Le+ln*ke*It)+.5,Oi=$r*Kr-bi*Mr,zi=(dr*$r-Yn*bi)/Oi,Vi=(Yn*Kr-dr*Mr)/Oi;Q-=zi,ut-=Vi}while((h(zi)>M||h(Vi)>M)&&--wt>0);return[Q,ut]};var B=function(){return u.geoProjection(w).scale(158.837)};t.geoAiry=Dt,t.geoAiryRaw=Nt,t.geoAitoff=xt,t.geoAitoffRaw=St,t.geoArmadillo=it,t.geoArmadilloRaw=Ot,t.geoAugust=z,t.geoAugustRaw=At,t.geoBaker=st,t.geoBakerRaw=et,t.geoBerghaus=Y,t.geoBerghausRaw=bt,t.geoBoggs=ne,t.geoBoggsRaw=Qt,t.geoBonne=Qe,t.geoBonneRaw=Je,t.geoBottomley=ue,t.geoBottomleyRaw=de,t.geoBromley=cn,t.geoBromleyRaw=Ne,t.geoChamberlin=vr,t.geoChamberlinRaw=tn,t.geoChamberlinAfrica=Bn,t.geoCollignon=Me,t.geoCollignonRaw=li,t.geoCraig=te,t.geoCraigRaw=Pe,t.geoCraster=re,t.geoCrasterRaw=Ht,t.geoCylindricalEqualArea=ae,t.geoCylindricalEqualAreaRaw=Te,t.geoCylindricalStereographic=qe,t.geoCylindricalStereographicRaw=xe,t.geoEckert1=ar,t.geoEckert1Raw=zn,t.geoEckert2=Cn,t.geoEckert2Raw=_n,t.geoEckert3=Ar,t.geoEckert3Raw=Or,t.geoEckert4=Pr,t.geoEckert4Raw=hn,t.geoEckert5=Re,t.geoEckert5Raw=yr,t.geoEckert6=Ye,t.geoEckert6Raw=We,t.geoEisenlohr=Dn,t.geoEisenlohrRaw=En,t.geoFahey=nr,t.geoFaheyRaw=Nn,t.geoFoucaut=Tn,t.geoFoucautRaw=Gn,t.geoGilbert=zr,t.geoGingery=Ja,t.geoGingeryRaw=Ei,t.geoGinzburg4=ro,t.geoGinzburg4Raw=ha,t.geoGinzburg5=$a,t.geoGinzburg5Raw=ko,t.geoGinzburg6=ss,t.geoGinzburg6Raw=Mo,t.geoGinzburg8=Bo,t.geoGinzburg8Raw=Pa,t.geoGinzburg9=Js,t.geoGinzburg9Raw=Ro,t.geoGringorten=oe,t.geoGringortenRaw=nu,t.geoGuyou=vi,t.geoGuyouRaw=er,t.geoHammer=Ji,t.geoHammerRaw=Si,t.geoHammerRetroazimuthal=so,t.geoHammerRetroazimuthalRaw=za,t.geoHealpix=vo,t.geoHealpixRaw=uo,t.geoHill=Do,t.geoHillRaw=Vo,t.geoHomolosine=Ta,t.geoHomolosineRaw=Xo,t.geoInterrupt=Di,t.geoInterruptedBoggs=yo,t.geoInterruptedHomolosine=La,t.geoInterruptedMollweide=ts,t.geoInterruptedMollweideHemispheres=Ki,t.geoInterruptedSinuMollweide=Fo,t.geoInterruptedSinusoidal=$s,t.geoKavrayskiy7=vs,t.geoKavrayskiy7Raw=ds,t.geoLagrange=Mu,t.geoLagrangeRaw=Qs,t.geoLarrivee=Ds,t.geoLarriveeRaw=wu,t.geoLaskowski=lu,t.geoLaskowskiRaw=Aa,t.geoLittrow=Zu,t.geoLittrowRaw=Pu,t.geoLoximuthal=Tu,t.geoLoximuthalRaw=vl,t.geoMiller=es,t.geoMillerRaw=Ao,t.geoModifiedStereographic=Ya,t.geoModifiedStereographicRaw=gs,t.geoModifiedStereographicAlaska=qs,t.geoModifiedStereographicGs48=js,t.geoModifiedStereographicGs50=ms,t.geoModifiedStereographicMiller=Au,t.geoModifiedStereographicLee=ks,t.geoMollweide=Pt,t.geoMollweideRaw=$,t.geoMtFlatPolarParabolic=pl,t.geoMtFlatPolarParabolicRaw=Al,t.geoMtFlatPolarQuartic=Cu,t.geoMtFlatPolarQuarticRaw=Ku,t.geoMtFlatPolarSinusoidal=Cl,t.geoMtFlatPolarSinusoidalRaw=Gs,t.geoNaturalEarth=Wa,t.geoNaturalEarthRaw=ns,t.geoNaturalEarth2=Xu,t.geoNaturalEarth2Raw=fu,t.geoNellHammer=Uu,t.geoNellHammerRaw=Ll,t.geoPatterson=pu,t.geoPattersonRaw=vu,t.geoPolyconic=rc,t.geoPolyconicRaw=Ol,t.geoPolyhedral=wl,t.geoPolyhedralButterfly=ru,t.geoPolyhedralCollignon=ku,t.geoPolyhedralWaterman=zl,t.geoProject=Ho,t.geoGringortenQuincuncial=ju,t.geoPeirceQuincuncial=Cs,t.geoPierceQuincuncial=Cs,t.geoQuantize=Ae,t.geoQuincuncial=Du,t.geoRectangularPolyconic=pn,t.geoRectangularPolyconicRaw=_e,t.geoRobinson=hr,t.geoRobinsonRaw=In,t.geoSatellite=ei,t.geoSatelliteRaw=Zr,t.geoSinuMollweide=us,t.geoSinuMollweideRaw=Ga,t.geoSinusoidal=De,t.geoSinusoidalRaw=$t,t.geoStitch=Wn,t.geoTimes=Hn,t.geoTimesRaw=Jn,t.geoTwoPointAzimuthal=gi,t.geoTwoPointAzimuthalRaw=xr,t.geoTwoPointAzimuthalUsa=Vr,t.geoTwoPointEquidistant=yi,t.geoTwoPointEquidistantRaw=Fr,t.geoTwoPointEquidistantUsa=ai,t.geoVanDerGrinten=Pi,t.geoVanDerGrintenRaw=Ui,t.geoVanDerGrinten2=ta,t.geoVanDerGrinten2Raw=pa,t.geoVanDerGrinten3=si,t.geoVanDerGrinten3Raw=oa,t.geoVanDerGrinten4=to,t.geoVanDerGrinten4Raw=ma,t.geoWagner4=Za,t.geoWagner4Raw=Fa,t.geoWagner6=Ms,t.geoWagner6Raw=Os,t.geoWagner7=au,t.geoWagner7Raw=ws,t.geoWiechel=I,t.geoWiechelRaw=j,t.geoWinkel3=B,t.geoWinkel3Raw=w,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";function s(){return new h}function h(){this.reset()}h.prototype={constructor:h,reset:function(){this.s=this.t=0},add:function(zt){c(r,zt,this.t),c(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new h;function c(jt,zt,se){var ie=jt.s=zt+se,he=ie-zt,Be=ie-he;jt.t=zt-Be+(se-he)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,l=a/4,f=a*2,v=180/a,b=a/180,g=Math.abs,y=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,m=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(jt){return jt>0?1:jt<0?-1:0},R=Math.sqrt,H=Math.tan;function N(jt){return jt>1?0:jt<-1?a:Math.acos(jt)}function K(jt){return jt>1?o:jt<-1?-o:Math.asin(jt)}function V(jt){return(jt=A(jt/2))*jt}function k(){}function Z(jt,zt){jt&&at.hasOwnProperty(jt.type)&&at[jt.type](jt,zt)}var X={Feature:function(zt,se){Z(zt.geometry,se)},FeatureCollection:function(zt,se){for(var ie=zt.features,he=-1,Be=ie.length;++he<Be;)Z(ie[he].geometry,se)}},at={Sphere:function(zt,se){se.sphere()},Point:function(zt,se){zt=zt.coordinates,se.point(zt[0],zt[1],zt[2])},MultiPoint:function(zt,se){for(var ie=zt.coordinates,he=-1,Be=ie.length;++he<Be;)zt=ie[he],se.point(zt[0],zt[1],zt[2])},LineString:function(zt,se){pt(zt.coordinates,se,0)},MultiLineString:function(zt,se){for(var ie=zt.coordinates,he=-1,Be=ie.length;++he<Be;)pt(ie[he],se,0)},Polygon:function(zt,se){gt(zt.coordinates,se)},MultiPolygon:function(zt,se){for(var ie=zt.coordinates,he=-1,Be=ie.length;++he<Be;)gt(ie[he],se)},GeometryCollection:function(zt,se){for(var ie=zt.geometries,he=-1,Be=ie.length;++he<Be;)Z(ie[he],se)}};function pt(jt,zt,se){var ie=-1,he=jt.length-se,Be;for(zt.lineStart();++ie<he;)Be=jt[ie],zt.point(Be[0],Be[1],Be[2]);zt.lineEnd()}function gt(jt,zt){var se=-1,ie=jt.length;for(zt.polygonStart();++se<ie;)pt(jt[se],zt,1);zt.polygonEnd()}function ft(jt,zt){jt&&X.hasOwnProperty(jt.type)?X[jt.type](jt,zt):Z(jt,zt)}var Rt=s(),Nt=s(),Dt,St,xt,Ot,it,At={point:k,lineStart:k,lineEnd:k,polygonStart:function(){Rt.reset(),At.lineStart=z,At.lineEnd=q},polygonEnd:function(){var zt=+Rt;Nt.add(zt<0?f+zt:zt),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Nt.add(f)}};function z(){At.point=mt}function q(){et(Dt,St)}function mt(jt,zt){At.point=et,Dt=jt,St=zt,jt*=b,zt*=b,xt=jt,Ot=M(zt=zt/2+l),it=A(zt)}function et(jt,zt){jt*=b,zt*=b,zt=zt/2+l;var se=jt-xt,ie=se>=0?1:-1,he=ie*se,Be=M(zt),Ze=A(zt),on=it*Ze,$e=Ot*Be+on*M(he),gn=on*ie*A(he);Rt.add(_(gn,$e)),xt=jt,Ot=Be,it=Ze}function st(jt){return Nt.reset(),ft(jt,At),Nt*2}function bt(jt){return[_(jt[1],jt[0]),K(jt[2])]}function Y(jt){var zt=jt[0],se=jt[1],ie=M(se);return[ie*M(zt),ie*A(zt),A(se)]}function rt(jt,zt){return jt[0]*zt[0]+jt[1]*zt[1]+jt[2]*zt[2]}function ot(jt,zt){return[jt[1]*zt[2]-jt[2]*zt[1],jt[2]*zt[0]-jt[0]*zt[2],jt[0]*zt[1]-jt[1]*zt[0]]}function $(jt,zt){jt[0]+=zt[0],jt[1]+=zt[1],jt[2]+=zt[2]}function Pt(jt,zt){return[jt[0]*zt,jt[1]*zt,jt[2]*zt]}function yt(jt){var zt=R(jt[0]*jt[0]+jt[1]*jt[1]+jt[2]*jt[2]);jt[0]/=zt,jt[1]/=zt,jt[2]/=zt}var Ft,Qt,ne,Wt,$t,De,Je,Qe,de=s(),ue,Ne,cn={point:Fn,lineStart:en,lineEnd:tn,polygonStart:function(){cn.point=xn,cn.lineStart=Bn,cn.lineEnd=vr,de.reset(),At.polygonStart()},polygonEnd:function(){At.polygonEnd(),cn.point=Fn,cn.lineStart=en,cn.lineEnd=tn,Rt<0?(Ft=-(ne=180),Qt=-(Wt=90)):de>n?Wt=90:de<-n&&(Qt=-90),Ne[0]=Ft,Ne[1]=ne},sphere:function(){Ft=-(ne=180),Qt=-(Wt=90)}};function Fn(jt,zt){ue.push(Ne=[Ft=jt,ne=jt]),zt<Qt&&(Qt=zt),zt>Wt&&(Wt=zt)}function wn(jt,zt){var se=Y([jt*b,zt*b]);if(Qe){var ie=ot(Qe,se),he=[ie[1],-ie[0],0],Be=ot(he,ie);yt(Be),Be=bt(Be);var Ze=jt-$t,on=Ze>0?1:-1,$e=Be[0]*v*on,gn,vn=g(Ze)>180;vn^(on*$t<$e&&$e<on*jt)?(gn=Be[1]*v,gn>Wt&&(Wt=gn)):($e=($e+360)%360-180,vn^(on*$t<$e&&$e<on*jt)?(gn=-Be[1]*v,gn<Qt&&(Qt=gn)):(zt<Qt&&(Qt=zt),zt>Wt&&(Wt=zt))),vn?jt<$t?li(Ft,jt)>li(Ft,ne)&&(ne=jt):li(jt,ne)>li(Ft,ne)&&(Ft=jt):ne>=Ft?(jt<Ft&&(Ft=jt),jt>ne&&(ne=jt)):jt>$t?li(Ft,jt)>li(Ft,ne)&&(ne=jt):li(jt,ne)>li(Ft,ne)&&(Ft=jt)}else ue.push(Ne=[Ft=jt,ne=jt]);zt<Qt&&(Qt=zt),zt>Wt&&(Wt=zt),Qe=se,$t=jt}function en(){cn.point=wn}function tn(){Ne[0]=Ft,Ne[1]=ne,cn.point=Fn,Qe=null}function xn(jt,zt){if(Qe){var se=jt-$t;de.add(g(se)>180?se+(se>0?360:-360):se)}else De=jt,Je=zt;At.point(jt,zt),wn(jt,zt)}function Bn(){At.lineStart()}function vr(){xn(De,Je),At.lineEnd(),g(de)>n&&(Ft=-(ne=180)),Ne[0]=Ft,Ne[1]=ne,Qe=null}function li(jt,zt){return(zt-=jt)<0?zt+360:zt}function Me(jt,zt){return jt[0]-zt[0]}function Pe(jt,zt){return jt[0]<=jt[1]?jt[0]<=zt&&zt<=jt[1]:zt<jt[0]||jt[1]<zt}function te(jt){var zt,se,ie,he,Be,Ze,on;if(Wt=ne=-(Ft=Qt=Infinity),ue=[],ft(jt,cn),se=ue.length){for(ue.sort(Me),zt=1,ie=ue[0],Be=[ie];zt<se;++zt)he=ue[zt],Pe(ie,he[0])||Pe(ie,he[1])?(li(ie[0],he[1])>li(ie[0],ie[1])&&(ie[1]=he[1]),li(he[0],ie[1])>li(ie[0],ie[1])&&(ie[0]=he[0])):Be.push(ie=he);for(Ze=-Infinity,se=Be.length-1,zt=0,ie=Be[se];zt<=se;ie=he,++zt)he=Be[zt],(on=li(ie[1],he[0]))>Ze&&(Ze=on,Ft=he[0],ne=ie[1])}return ue=Ne=null,Ft===Infinity||Qt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Ft,Qt],[ne,Wt]]}var ge,Ht,re,Te,ae,xe,qe,zn,ar,_n,Cn,Or,Ar,hn,Pr,yr,Re={sphere:k,point:We,lineStart:dn,lineEnd:Sn,polygonStart:function(){Re.lineStart=Nn,Re.lineEnd=nr},polygonEnd:function(){Re.lineStart=dn,Re.lineEnd=Sn}};function We(jt,zt){jt*=b,zt*=b;var se=M(zt);Ye(se*M(jt),se*A(jt),A(zt))}function Ye(jt,zt,se){++ge,re+=(jt-re)/ge,Te+=(zt-Te)/ge,ae+=(se-ae)/ge}function dn(){Re.point=En}function En(jt,zt){jt*=b,zt*=b;var se=M(zt);hn=se*M(jt),Pr=se*A(jt),yr=A(zt),Re.point=Dn,Ye(hn,Pr,yr)}function Dn(jt,zt){jt*=b,zt*=b;var se=M(zt),ie=se*M(jt),he=se*A(jt),Be=A(zt),Ze=_(R((Ze=Pr*Be-yr*he)*Ze+(Ze=yr*ie-hn*Be)*Ze+(Ze=hn*he-Pr*ie)*Ze),hn*ie+Pr*he+yr*Be);Ht+=Ze,xe+=Ze*(hn+(hn=ie)),qe+=Ze*(Pr+(Pr=he)),zn+=Ze*(yr+(yr=Be)),Ye(hn,Pr,yr)}function Sn(){Re.point=We}function Nn(){Re.point=Gn}function nr(){Tn(Or,Ar),Re.point=We}function Gn(jt,zt){Or=jt,Ar=zt,jt*=b,zt*=b,Re.point=Tn;var se=M(zt);hn=se*M(jt),Pr=se*A(jt),yr=A(zt),Ye(hn,Pr,yr)}function Tn(jt,zt){jt*=b,zt*=b;var se=M(zt),ie=se*M(jt),he=se*A(jt),Be=A(zt),Ze=Pr*Be-yr*he,on=yr*ie-hn*Be,$e=hn*he-Pr*ie,gn=R(Ze*Ze+on*on+$e*$e),vn=K(gn),Xn=gn&&-vn/gn;ar+=Xn*Ze,_n+=Xn*on,Cn+=Xn*$e,Ht+=vn,xe+=vn*(hn+(hn=ie)),qe+=vn*(Pr+(Pr=he)),zn+=vn*(yr+(yr=Be)),Ye(hn,Pr,yr)}function Cr(jt){ge=Ht=re=Te=ae=xe=qe=zn=ar=_n=Cn=0,ft(jt,Re);var zt=ar,se=_n,ie=Cn,he=zt*zt+se*se+ie*ie;return he<i&&(zt=xe,se=qe,ie=zn,Ht<n&&(zt=re,se=Te,ie=ae),he=zt*zt+se*se+ie*ie,he<i)?[NaN,NaN]:[_(se,zt)*v,K(ie/R(he))*v]}function pr(jt){return function(){return jt}}function zr(jt,zt){function se(ie,he){return ie=jt(ie,he),zt(ie[0],ie[1])}return jt.invert&&zt.invert&&(se.invert=function(ie,he){return ie=zt.invert(ie,he),ie&&jt.invert(ie[0],ie[1])}),se}function Ei(jt,zt){return[g(jt)>a?jt+Math.round(-jt/f)*f:jt,zt]}Ei.invert=Ei;function Oa(jt,zt,se){return(jt%=f)?zt||se?zr(Ja(jt),wo(zt,se)):Ja(jt):zt||se?wo(zt,se):Ei}function wa(jt){return function(zt,se){return zt+=jt,[zt>a?zt-f:zt<-a?zt+f:zt,se]}}function Ja(jt){var zt=wa(jt);return zt.invert=wa(-jt),zt}function wo(jt,zt){var se=M(jt),ie=A(jt),he=M(zt),Be=A(zt);function Ze(on,$e){var gn=M($e),vn=M(on)*gn,Xn=A(on)*gn,Wn=A($e),Jn=Wn*se+vn*ie;return[_(Xn*he-Jn*Be,vn*se-Wn*ie),K(Jn*he+Xn*Be)]}return Ze.invert=function(on,$e){var gn=M($e),vn=M(on)*gn,Xn=A(on)*gn,Wn=A($e),Jn=Wn*he-Xn*Be;return[_(Xn*he+Wn*Be,vn*se+Jn*ie),K(Jn*se-vn*ie)]},Ze}function ha(jt){jt=Oa(jt[0]*b,jt[1]*b,jt.length>2?jt[2]*b:0);function zt(se){return se=jt(se[0]*b,se[1]*b),se[0]*=v,se[1]*=v,se}return zt.invert=function(se){return se=jt.invert(se[0]*b,se[1]*b),se[0]*=v,se[1]*=v,se},zt}function ro(jt,zt,se,ie,he,Be){if(!!se){var Ze=M(zt),on=A(zt),$e=ie*se;he==null?(he=zt+ie*f,Be=zt-$e/2):(he=ko(Ze,he),Be=ko(Ze,Be),(ie>0?he<Be:he>Be)&&(he+=ie*f));for(var gn,vn=he;ie>0?vn>Be:vn<Be;vn-=$e)gn=bt([Ze,-on*M(vn),-on*A(vn)]),jt.point(gn[0],gn[1])}}function ko(jt,zt){zt=Y(zt),zt[0]-=jt,yt(zt);var se=N(-zt[1]);return((-zt[2]<0?-se:se)+f-n)%f}function $a(){var jt=pr([0,0]),zt=pr(90),se=pr(6),ie,he,Be={point:Ze};function Ze($e,gn){ie.push($e=he($e,gn)),$e[0]*=v,$e[1]*=v}function on(){var $e=jt.apply(this,arguments),gn=zt.apply(this,arguments)*b,vn=se.apply(this,arguments)*b;return ie=[],he=Oa(-$e[0]*b,-$e[1]*b,0).invert,ro(Be,gn,vn,1),$e={type:"Polygon",coordinates:[ie]},ie=he=null,$e}return on.center=function($e){return arguments.length?(jt=typeof $e=="function"?$e:pr([+$e[0],+$e[1]]),on):jt},on.radius=function($e){return arguments.length?(zt=typeof $e=="function"?$e:pr(+$e),on):zt},on.precision=function($e){return arguments.length?(se=typeof $e=="function"?$e:pr(+$e),on):se},on}function Mo(){var jt=[],zt;return{point:function(ie,he,Be){zt.push([ie,he,Be])},lineStart:function(){jt.push(zt=[])},lineEnd:k,rejoin:function(){jt.length>1&&jt.push(jt.pop().concat(jt.shift()))},result:function(){var ie=jt;return jt=[],zt=null,ie}}}function ss(jt,zt){return g(jt[0]-zt[0])<n&&g(jt[1]-zt[1])<n}function Pa(jt,zt,se,ie){this.x=jt,this.z=zt,this.o=se,this.e=ie,this.v=!1,this.n=this.p=null}function Bo(jt,zt,se,ie,he){var Be=[],Ze=[],on,$e;if(jt.forEach(function(Hn){if(!((fr=Hn.length-1)<=0)){var fr,xr=Hn[0],Vr=Hn[fr],gi;if(ss(xr,Vr)){if(!xr[2]&&!Vr[2]){for(he.lineStart(),on=0;on<fr;++on)he.point((xr=Hn[on])[0],xr[1]);he.lineEnd();return}Vr[0]+=2*n}Be.push(gi=new Pa(xr,Hn,null,!0)),Ze.push(gi.o=new Pa(xr,null,gi,!1)),Be.push(gi=new Pa(Vr,Hn,null,!1)),Ze.push(gi.o=new Pa(Vr,null,gi,!0))}}),!!Be.length){for(Ze.sort(zt),Ro(Be),Ro(Ze),on=0,$e=Ze.length;on<$e;++on)Ze[on].e=se=!se;for(var gn=Be[0],vn,Xn;;){for(var Wn=gn,Jn=!0;Wn.v;)if((Wn=Wn.n)===gn)return;vn=Wn.z,he.lineStart();do{if(Wn.v=Wn.o.v=!0,Wn.e){if(Jn)for(on=0,$e=vn.length;on<$e;++on)he.point((Xn=vn[on])[0],Xn[1]);else ie(Wn.x,Wn.n.x,1,he);Wn=Wn.n}else{if(Jn)for(vn=Wn.p.z,on=vn.length-1;on>=0;--on)he.point((Xn=vn[on])[0],Xn[1]);else ie(Wn.x,Wn.p.x,-1,he);Wn=Wn.p}Wn=Wn.o,vn=Wn.z,Jn=!Jn}while(!Wn.v);he.lineEnd()}}}function Ro(jt){if(!!(zt=jt.length)){for(var zt,se=0,ie=jt[0],he;++se<zt;)ie.n=he=jt[se],he.p=ie,ie=he;ie.n=he=jt[0],he.p=ie}}var Js=s();function Ko(jt){return g(jt[0])<=a?jt[0]:O(jt[0])*((g(jt[0])+a)%f-a)}function nu(jt,zt){var se=Ko(zt),ie=zt[1],he=A(ie),Be=[A(se),-M(se),0],Ze=0,on=0;Js.reset(),he===1?ie=o+n:he===-1&&(ie=-o-n);for(var $e=0,gn=jt.length;$e<gn;++$e)if(!!(Xn=(vn=jt[$e]).length))for(var vn,Xn,Wn=vn[Xn-1],Jn=Ko(Wn),Hn=Wn[1]/2+l,fr=A(Hn),xr=M(Hn),Vr=0;Vr<Xn;++Vr,Jn=Fr,fr=yi,xr=Ui,Wn=gi){var gi=vn[Vr],Fr=Ko(gi),ai=gi[1]/2+l,yi=A(ai),Ui=M(ai),Pi=Fr-Jn,pa=Pi>=0?1:-1,ta=pa*Pi,oa=ta>a,si=fr*yi;if(Js.add(_(si*pa*A(ta),xr*Ui+si*M(ta))),Ze+=oa?Pi+pa*f:Pi,oa^Jn>=se^Fr>=se){var ma=ot(Y(Wn),Y(gi));yt(ma);var to=ot(Be,ma);yt(to);var Ha=(oa^Pi>=0?-1:1)*K(to[2]);(ie>Ha||ie===Ha&&(ma[0]||ma[1]))&&(on+=oa^Pi>=0?1:-1)}}return(Ze<-n||Ze<n&&Js<-n)^on&1}function Rs(jt,zt,se,ie){return function(he){var Be=zt(he),Ze=Mo(),on=zt(Ze),$e=!1,gn,vn,Xn,Wn={point:Jn,lineStart:fr,lineEnd:xr,polygonStart:function(){Wn.point=Vr,Wn.lineStart=gi,Wn.lineEnd=Fr,vn=[],gn=[]},polygonEnd:function(){Wn.point=Jn,Wn.lineStart=fr,Wn.lineEnd=xr,vn=u.merge(vn);var yi=nu(gn,ie);vn.length?($e||(he.polygonStart(),$e=!0),Bo(vn,oe,yi,se,he)):yi&&($e||(he.polygonStart(),$e=!0),he.lineStart(),se(null,null,1,he),he.lineEnd()),$e&&(he.polygonEnd(),$e=!1),vn=gn=null},sphere:function(){he.polygonStart(),he.lineStart(),se(null,null,1,he),he.lineEnd(),he.polygonEnd()}};function Jn(ai,yi){jt(ai,yi)&&he.point(ai,yi)}function Hn(ai,yi){Be.point(ai,yi)}function fr(){Wn.point=Hn,Be.lineStart()}function xr(){Wn.point=Jn,Be.lineEnd()}function Vr(ai,yi){Xn.push([ai,yi]),on.point(ai,yi)}function gi(){on.lineStart(),Xn=[]}function Fr(){Vr(Xn[0][0],Xn[0][1]),on.lineEnd();var ai=on.clean(),yi=Ze.result(),Ui,Pi=yi.length,pa,ta,oa;if(Xn.pop(),gn.push(Xn),Xn=null,!!Pi){if(ai&1){if(ta=yi[0],(pa=ta.length-1)>0){for($e||(he.polygonStart(),$e=!0),he.lineStart(),Ui=0;Ui<pa;++Ui)he.point((oa=ta[Ui])[0],oa[1]);he.lineEnd()}return}Pi>1&&ai&2&&yi.push(yi.pop().concat(yi.shift())),vn.push(yi.filter(je))}}return Wn}}function je(jt){return jt.length>1}function oe(jt,zt){return((jt=jt.x)[0]<0?jt[1]-o-n:o-jt[1])-((zt=zt.x)[0]<0?zt[1]-o-n:o-zt[1])}var Zt=Rs(function(){return!0},be,Vn,[-a,-o]);function be(jt){var zt=NaN,se=NaN,ie=NaN,he;return{lineStart:function(){jt.lineStart(),he=1},point:function(Ze,on){var $e=Ze>0?a:-a,gn=g(Ze-zt);g(gn-a)<n?(jt.point(zt,se=(se+on)/2>0?o:-o),jt.point(ie,se),jt.lineEnd(),jt.lineStart(),jt.point($e,se),jt.point(Ze,se),he=0):ie!==$e&&gn>=a&&(g(zt-ie)<n&&(zt-=ie*n),g(Ze-$e)<n&&(Ze-=$e*n),se=sn(zt,se,Ze,on),jt.point(ie,se),jt.lineEnd(),jt.lineStart(),jt.point($e,se),he=0),jt.point(zt=Ze,se=on),ie=$e},lineEnd:function(){jt.lineEnd(),zt=se=NaN},clean:function(){return 2-he}}}function sn(jt,zt,se,ie){var he,Be,Ze=A(jt-se);return g(Ze)>n?y((A(zt)*(Be=M(ie))*A(se)-A(ie)*(he=M(zt))*A(jt))/(he*Be*Ze)):(zt+ie)/2}function Vn(jt,zt,se,ie){var he;if(jt==null)he=se*o,ie.point(-a,he),ie.point(0,he),ie.point(a,he),ie.point(a,0),ie.point(a,-he),ie.point(0,-he),ie.point(-a,-he),ie.point(-a,0),ie.point(-a,he);else if(g(jt[0]-zt[0])>n){var Be=jt[0]<zt[0]?a:-a;he=se*Be/2,ie.point(-Be,he),ie.point(0,he),ie.point(Be,he)}else ie.point(zt[0],zt[1])}function er(jt){var zt=M(jt),se=6*b,ie=zt>0,he=g(zt)>n;function Be(vn,Xn,Wn,Jn){ro(Jn,jt,se,Wn,vn,Xn)}function Ze(vn,Xn){return M(vn)*M(Xn)>zt}function on(vn){var Xn,Wn,Jn,Hn,fr;return{lineStart:function(){Hn=Jn=!1,fr=1},point:function(Vr,gi){var Fr=[Vr,gi],ai,yi=Ze(Vr,gi),Ui=ie?yi?0:gn(Vr,gi):yi?gn(Vr+(Vr<0?a:-a),gi):0;if(!Xn&&(Hn=Jn=yi)&&vn.lineStart(),yi!==Jn&&(ai=$e(Xn,Fr),(!ai||ss(Xn,ai)||ss(Fr,ai))&&(Fr[2]=1)),yi!==Jn)fr=0,yi?(vn.lineStart(),ai=$e(Fr,Xn),vn.point(ai[0],ai[1])):(ai=$e(Xn,Fr),vn.point(ai[0],ai[1],2),vn.lineEnd()),Xn=ai;else if(he&&Xn&&ie^yi){var Pi;!(Ui&Wn)&&(Pi=$e(Fr,Xn,!0))&&(fr=0,ie?(vn.lineStart(),vn.point(Pi[0][0],Pi[0][1]),vn.point(Pi[1][0],Pi[1][1]),vn.lineEnd()):(vn.point(Pi[1][0],Pi[1][1]),vn.lineEnd(),vn.lineStart(),vn.point(Pi[0][0],Pi[0][1],3)))}yi&&(!Xn||!ss(Xn,Fr))&&vn.point(Fr[0],Fr[1]),Xn=Fr,Jn=yi,Wn=Ui},lineEnd:function(){Jn&&vn.lineEnd(),Xn=null},clean:function(){return fr|(Hn&&Jn)<<1}}}function $e(vn,Xn,Wn){var Jn=Y(vn),Hn=Y(Xn),fr=[1,0,0],xr=ot(Jn,Hn),Vr=rt(xr,xr),gi=xr[0],Fr=Vr-gi*gi;if(!Fr)return!Wn&&vn;var ai=zt*Vr/Fr,yi=-zt*gi/Fr,Ui=ot(fr,xr),Pi=Pt(fr,ai),pa=Pt(xr,yi);$(Pi,pa);var ta=Ui,oa=rt(Pi,ta),si=rt(ta,ta),ma=oa*oa-si*(rt(Pi,Pi)-1);if(!(ma<0)){var to=R(ma),Ha=Pt(ta,(-oa-to)/si);if($(Ha,Pi),Ha=bt(Ha),!Wn)return Ha;var _i=vn[0],Fa=Xn[0],Za=vn[1],Os=Xn[1],Ms;Fa<_i&&(Ms=_i,_i=Fa,Fa=Ms);var ws=Fa-_i,au=g(ws-a)<n,j=au||ws<n;if(!au&&Os<Za&&(Ms=Za,Za=Os,Os=Ms),j?au?Za+Os>0^Ha[1]<(g(Ha[0]-_i)<n?Za:Os):Za<=Ha[1]&&Ha[1]<=Os:ws>a^(_i<=Ha[0]&&Ha[0]<=Fa)){var I=Pt(ta,(-oa+to)/si);return $(I,Pi),[Ha,bt(I)]}}}function gn(vn,Xn){var Wn=ie?jt:a-jt,Jn=0;return vn<-Wn?Jn|=1:vn>Wn&&(Jn|=2),Xn<-Wn?Jn|=4:Xn>Wn&&(Jn|=8),Jn}return Rs(Ze,on,Be,ie?[0,-jt]:[-a,jt-a])}function kn(jt,zt,se,ie,he,Be){var Ze=jt[0],on=jt[1],$e=zt[0],gn=zt[1],vn=0,Xn=1,Wn=$e-Ze,Jn=gn-on,Hn;if(Hn=se-Ze,!(!Wn&&Hn>0)){if(Hn/=Wn,Wn<0){if(Hn<vn)return;Hn<Xn&&(Xn=Hn)}else if(Wn>0){if(Hn>Xn)return;Hn>vn&&(vn=Hn)}if(Hn=he-Ze,!(!Wn&&Hn<0)){if(Hn/=Wn,Wn<0){if(Hn>Xn)return;Hn>vn&&(vn=Hn)}else if(Wn>0){if(Hn<vn)return;Hn<Xn&&(Xn=Hn)}if(Hn=ie-on,!(!Jn&&Hn>0)){if(Hn/=Jn,Jn<0){if(Hn<vn)return;Hn<Xn&&(Xn=Hn)}else if(Jn>0){if(Hn>Xn)return;Hn>vn&&(vn=Hn)}if(Hn=Be-on,!(!Jn&&Hn<0)){if(Hn/=Jn,Jn<0){if(Hn>Xn)return;Hn>vn&&(vn=Hn)}else if(Jn>0){if(Hn<vn)return;Hn<Xn&&(Xn=Hn)}return vn>0&&(jt[0]=Ze+vn*Wn,jt[1]=on+vn*Jn),Xn<1&&(zt[0]=Ze+Xn*Wn,zt[1]=on+Xn*Jn),!0}}}}}var Xr=1e9,vi=-Xr;function Si(jt,zt,se,ie){function he(gn,vn){return jt<=gn&&gn<=se&&zt<=vn&&vn<=ie}function Be(gn,vn,Xn,Wn){var Jn=0,Hn=0;if(gn==null||(Jn=Ze(gn,Xn))!==(Hn=Ze(vn,Xn))||$e(gn,vn)<0^Xn>0)do Wn.point(Jn===0||Jn===3?jt:se,Jn>1?ie:zt);while((Jn=(Jn+Xn+4)%4)!==Hn);else Wn.point(vn[0],vn[1])}function Ze(gn,vn){return g(gn[0]-jt)<n?vn>0?0:3:g(gn[0]-se)<n?vn>0?2:1:g(gn[1]-zt)<n?vn>0?1:0:vn>0?3:2}function on(gn,vn){return $e(gn.x,vn.x)}function $e(gn,vn){var Xn=Ze(gn,1),Wn=Ze(vn,1);return Xn!==Wn?Xn-Wn:Xn===0?vn[1]-gn[1]:Xn===1?gn[0]-vn[0]:Xn===2?gn[1]-vn[1]:vn[0]-gn[0]}return function(gn){var vn=gn,Xn=Mo(),Wn,Jn,Hn,fr,xr,Vr,gi,Fr,ai,yi,Ui,Pi={point:pa,lineStart:ma,lineEnd:to,polygonStart:oa,polygonEnd:si};function pa(_i,Fa){he(_i,Fa)&&vn.point(_i,Fa)}function ta(){for(var _i=0,Fa=0,Za=Jn.length;Fa<Za;++Fa)for(var Os=Jn[Fa],Ms=1,ws=Os.length,au=Os[0],j,I,w=au[0],B=au[1];Ms<ws;++Ms)j=w,I=B,au=Os[Ms],w=au[0],B=au[1],I<=ie?B>ie&&(w-j)*(ie-I)>(B-I)*(jt-j)&&++_i:B<=ie&&(w-j)*(ie-I)<(B-I)*(jt-j)&&--_i;return _i}function oa(){vn=Xn,Wn=[],Jn=[],Ui=!0}function si(){var _i=ta(),Fa=Ui&&_i,Za=(Wn=u.merge(Wn)).length;(Fa||Za)&&(gn.polygonStart(),Fa&&(gn.lineStart(),Be(null,null,1,gn),gn.lineEnd()),Za&&Bo(Wn,on,_i,Be,gn),gn.polygonEnd()),vn=gn,Wn=Jn=Hn=null}function ma(){Pi.point=Ha,Jn&&Jn.push(Hn=[]),yi=!0,ai=!1,gi=Fr=NaN}function to(){Wn&&(Ha(fr,xr),Vr&&ai&&Xn.rejoin(),Wn.push(Xn.result())),Pi.point=pa,ai&&vn.lineEnd()}function Ha(_i,Fa){var Za=he(_i,Fa);if(Jn&&Hn.push([_i,Fa]),yi)fr=_i,xr=Fa,Vr=Za,yi=!1,Za&&(vn.lineStart(),vn.point(_i,Fa));else if(Za&&ai)vn.point(_i,Fa);else{var Os=[gi=Math.max(vi,Math.min(Xr,gi)),Fr=Math.max(vi,Math.min(Xr,Fr))],Ms=[_i=Math.max(vi,Math.min(Xr,_i)),Fa=Math.max(vi,Math.min(Xr,Fa))];kn(Os,Ms,jt,zt,se,ie)?(ai||(vn.lineStart(),vn.point(Os[0],Os[1])),vn.point(Ms[0],Ms[1]),Za||vn.lineEnd(),Ui=!1):Za&&(vn.lineStart(),vn.point(_i,Fa),Ui=!1)}gi=_i,Fr=Fa,ai=Za}return Pi}}function ji(){var jt=0,zt=0,se=960,ie=500,he,Be,Ze;return Ze={stream:function($e){return he&&Be===$e?he:he=Si(jt,zt,se,ie)(Be=$e)},extent:function($e){return arguments.length?(jt=+$e[0][0],zt=+$e[0][1],se=+$e[1][0],ie=+$e[1][1],he=Be=null,Ze):[[jt,zt],[se,ie]]}}}var Ji=s(),za,va,so,Ia={sphere:k,point:k,lineStart:io,lineEnd:k,polygonStart:k,polygonEnd:k};function io(){Ia.point=ka,Ia.lineEnd=uo}function uo(){Ia.point=Ia.lineEnd=k}function ka(jt,zt){jt*=b,zt*=b,za=jt,va=A(zt),so=M(zt),Ia.point=vo}function vo(jt,zt){jt*=b,zt*=b;var se=A(zt),ie=M(zt),he=g(jt-za),Be=M(he),Ze=A(he),on=ie*Ze,$e=so*se-va*ie*Be,gn=va*se+so*ie*Be;Ji.add(_(R(on*on+$e*$e),gn)),za=jt,va=se,so=ie}function Vo(jt){return Ji.reset(),ft(jt,Ia),+Ji}var Do=[null,null],fs={type:"LineString",coordinates:Do};function mo(jt,zt){return Do[0]=jt,Do[1]=zt,Vo(fs)}var Ga={Feature:function(zt,se){return Xo(zt.geometry,se)},FeatureCollection:function(zt,se){for(var ie=zt.features,he=-1,Be=ie.length;++he<Be;)if(Xo(ie[he].geometry,se))return!0;return!1}},us={Sphere:function(){return!0},Point:function(zt,se){return Ta(zt.coordinates,se)},MultiPoint:function(zt,se){for(var ie=zt.coordinates,he=-1,Be=ie.length;++he<Be;)if(Ta(ie[he],se))return!0;return!1},LineString:function(zt,se){return mn(zt.coordinates,se)},MultiLineString:function(zt,se){for(var ie=zt.coordinates,he=-1,Be=ie.length;++he<Be;)if(mn(ie[he],se))return!0;return!1},Polygon:function(zt,se){return cr(zt.coordinates,se)},MultiPolygon:function(zt,se){for(var ie=zt.coordinates,he=-1,Be=ie.length;++he<Be;)if(cr(ie[he],se))return!0;return!1},GeometryCollection:function(zt,se){for(var ie=zt.geometries,he=-1,Be=ie.length;++he<Be;)if(Xo(ie[he],se))return!0;return!1}};function Xo(jt,zt){return jt&&us.hasOwnProperty(jt.type)?us[jt.type](jt,zt):!1}function Ta(jt,zt){return mo(jt,zt)===0}function mn(jt,zt){for(var se,ie,he,Be=0,Ze=jt.length;Be<Ze;Be++){if(ie=mo(jt[Be],zt),ie===0||Be>0&&(he=mo(jt[Be],jt[Be-1]),he>0&&se<=he&&ie<=he&&(se+ie-he)*(1-Math.pow((se-ie)/he,2))<i*he))return!0;se=ie}return!1}function cr(jt,zt){return!!nu(jt.map(Wr),Di(zt))}function Wr(jt){return jt=jt.map(Di),jt.pop(),jt}function Di(jt){return[jt[0]*b,jt[1]*b]}function Ua(jt,zt){return(jt&&Ga.hasOwnProperty(jt.type)?Ga[jt.type]:Xo)(jt,zt)}function yo(jt,zt,se){var ie=u.range(jt,zt-n,se).concat(zt);return function(he){return ie.map(function(Be){return[he,Be]})}}function lo(jt,zt,se){var ie=u.range(jt,zt-n,se).concat(zt);return function(he){return ie.map(function(Be){return[Be,he]})}}function La(){var jt,zt,se,ie,he,Be,Ze,on,$e=10,gn=$e,vn=90,Xn=360,Wn,Jn,Hn,fr,xr=2.5;function Vr(){return{type:"MultiLineString",coordinates:gi()}}function gi(){return u.range(x(ie/vn)*vn,se,vn).map(Hn).concat(u.range(x(on/Xn)*Xn,Ze,Xn).map(fr)).concat(u.range(x(zt/$e)*$e,jt,$e).filter(function(Fr){return g(Fr%vn)>n}).map(Wn)).concat(u.range(x(Be/gn)*gn,he,gn).filter(function(Fr){return g(Fr%Xn)>n}).map(Jn))}return Vr.lines=function(){return gi().map(function(Fr){return{type:"LineString",coordinates:Fr}})},Vr.outline=function(){return{type:"Polygon",coordinates:[Hn(ie).concat(fr(Ze).slice(1),Hn(se).reverse().slice(1),fr(on).reverse().slice(1))]}},Vr.extent=function(Fr){return arguments.length?Vr.extentMajor(Fr).extentMinor(Fr):Vr.extentMinor()},Vr.extentMajor=function(Fr){return arguments.length?(ie=+Fr[0][0],se=+Fr[1][0],on=+Fr[0][1],Ze=+Fr[1][1],ie>se&&(Fr=ie,ie=se,se=Fr),on>Ze&&(Fr=on,on=Ze,Ze=Fr),Vr.precision(xr)):[[ie,on],[se,Ze]]},Vr.extentMinor=function(Fr){return arguments.length?(zt=+Fr[0][0],jt=+Fr[1][0],Be=+Fr[0][1],he=+Fr[1][1],zt>jt&&(Fr=zt,zt=jt,jt=Fr),Be>he&&(Fr=Be,Be=he,he=Fr),Vr.precision(xr)):[[zt,Be],[jt,he]]},Vr.step=function(Fr){return arguments.length?Vr.stepMajor(Fr).stepMinor(Fr):Vr.stepMinor()},Vr.stepMajor=function(Fr){return arguments.length?(vn=+Fr[0],Xn=+Fr[1],Vr):[vn,Xn]},Vr.stepMinor=function(Fr){return arguments.length?($e=+Fr[0],gn=+Fr[1],Vr):[$e,gn]},Vr.precision=function(Fr){return arguments.length?(xr=+Fr,Wn=yo(Be,he,90),Jn=lo(zt,jt,xr),Hn=yo(on,Ze,90),fr=lo(ie,se,xr),Vr):xr},Vr.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Va(){return La()()}function ts(jt,zt){var se=jt[0]*b,ie=jt[1]*b,he=zt[0]*b,Be=zt[1]*b,Ze=M(ie),on=A(ie),$e=M(Be),gn=A(Be),vn=Ze*M(se),Xn=Ze*A(se),Wn=$e*M(he),Jn=$e*A(he),Hn=2*K(R(V(Be-ie)+Ze*$e*V(he-se))),fr=A(Hn),xr=Hn?function(Vr){var gi=A(Vr*=Hn)/fr,Fr=A(Hn-Vr)/fr,ai=Fr*vn+gi*Wn,yi=Fr*Xn+gi*Jn,Ui=Fr*on+gi*gn;return[_(yi,ai)*v,_(Ui,R(ai*ai+yi*yi))*v]}:function(){return[se*v,ie*v]};return xr.distance=Hn,xr}function ls(jt){return jt}var Ki=s(),_u=s(),Fo,hs,$s,ds,vs={point:k,lineStart:k,lineEnd:k,polygonStart:function(){vs.lineStart=Qs,vs.lineEnd=wu},polygonEnd:function(){vs.lineStart=vs.lineEnd=vs.point=k,Ki.add(g(_u)),_u.reset()},result:function(){var zt=Ki/2;return Ki.reset(),zt}};function Qs(){vs.point=Mu}function Mu(jt,zt){vs.point=ps,Fo=$s=jt,hs=ds=zt}function ps(jt,zt){_u.add(ds*jt-$s*zt),$s=jt,ds=zt}function wu(){ps(Fo,hs)}var Ds=Infinity,Aa=Ds,lu=-Ds,Pu=lu,Zu={point:vl,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var zt=[[Ds,Aa],[lu,Pu]];return lu=Pu=-(Aa=Ds=Infinity),zt}};function vl(jt,zt){jt<Ds&&(Ds=jt),jt>lu&&(lu=jt),zt<Aa&&(Aa=zt),zt>Pu&&(Pu=zt)}var Tu=0,Ao=0,es=0,gs=0,po=0,cu=0,Oo=0,ba=0,As=0,qs,js,ms,Au,ks={point:Ya,lineStart:nl,lineEnd:pl,polygonStart:function(){ks.lineStart=Ku,ks.lineEnd=Cu},polygonEnd:function(){ks.point=Ya,ks.lineStart=nl,ks.lineEnd=pl},result:function(){var zt=As?[Oo/As,ba/As]:cu?[gs/cu,po/cu]:es?[Tu/es,Ao/es]:[NaN,NaN];return Tu=Ao=es=gs=po=cu=Oo=ba=As=0,zt}};function Ya(jt,zt){Tu+=jt,Ao+=zt,++es}function nl(){ks.point=Zl}function Zl(jt,zt){ks.point=Al,Ya(ms=jt,Au=zt)}function Al(jt,zt){var se=jt-ms,ie=zt-Au,he=R(se*se+ie*ie);gs+=he*(ms+jt)/2,po+=he*(Au+zt)/2,cu+=he,Ya(ms=jt,Au=zt)}function pl(){ks.point=Ya}function Ku(){ks.point=Gs}function Cu(){Cl(qs,js)}function Gs(jt,zt){ks.point=Cl,Ya(qs=ms=jt,js=Au=zt)}function Cl(jt,zt){var se=jt-ms,ie=zt-Au,he=R(se*se+ie*ie);gs+=he*(ms+jt)/2,po+=he*(Au+zt)/2,cu+=he,he=Au*jt-ms*zt,Oo+=he*(ms+jt),ba+=he*(Au+zt),As+=he*3,Ya(ms=jt,Au=zt)}function ns(jt){this._context=jt}ns.prototype={_radius:4.5,pointRadius:function(zt){return this._radius=zt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(zt,se){switch(this._point){case 0:{this._context.moveTo(zt,se),this._point=1;break}case 1:{this._context.lineTo(zt,se);break}default:{this._context.moveTo(zt+this._radius,se),this._context.arc(zt,se,this._radius,0,f);break}}},result:k};var Wa=s(),fu,Xu,Ll,Uu,Vs,rl={point:k,lineStart:function(){rl.point=hu},lineEnd:function(){fu&&Ss(Xu,Ll),rl.point=k},polygonStart:function(){fu=!0},polygonEnd:function(){fu=null},result:function(){var zt=+Wa;return Wa.reset(),zt}};function hu(jt,zt){rl.point=Ss,Xu=Uu=jt,Ll=Vs=zt}function Ss(jt,zt){Uu-=jt,Vs-=zt,Wa.add(R(Uu*Uu+Vs*Vs)),Uu=jt,Vs=zt}function Ws(){this._string=[]}Ws.prototype={_radius:4.5,_circle:gl(4.5),pointRadius:function(zt){return(zt=+zt)!==this._radius&&(this._radius=zt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(zt,se){switch(this._point){case 0:{this._string.push("M",zt,",",se),this._point=1;break}case 1:{this._string.push("L",zt,",",se);break}default:{this._circle==null&&(this._circle=gl(this._radius)),this._string.push("M",zt,",",se,this._circle);break}}},result:function(){if(this._string.length){var zt=this._string.join("");return this._string=[],zt}else return null}};function gl(jt){return"m0,"+jt+"a"+jt+","+jt+" 0 1,1 0,"+-2*jt+"a"+jt+","+jt+" 0 1,1 0,"+2*jt+"z"}function Iu(jt,zt){var se=4.5,ie,he;function Be(Ze){return Ze&&(typeof se=="function"&&he.pointRadius(+se.apply(this,arguments)),ft(Ze,ie(he))),he.result()}return Be.area=function(Ze){return ft(Ze,ie(vs)),vs.result()},Be.measure=function(Ze){return ft(Ze,ie(rl)),rl.result()},Be.bounds=function(Ze){return ft(Ze,ie(Zu)),Zu.result()},Be.centroid=function(Ze){return ft(Ze,ie(ks)),ks.result()},Be.projection=function(Ze){return arguments.length?(ie=Ze==null?(jt=null,ls):(jt=Ze).stream,Be):jt},Be.context=function(Ze){return arguments.length?(he=Ze==null?(zt=null,new Ws):new ns(zt=Ze),typeof se!="function"&&he.pointRadius(se),Be):zt},Be.pointRadius=function(Ze){return arguments.length?(se=typeof Ze=="function"?Ze:(he.pointRadius(+Ze),+Ze),Be):se},Be.projection(jt).context(zt)}function Lu(jt){return{stream:du(jt)}}function du(jt){return function(zt){var se=new vu;for(var ie in jt)se[ie]=jt[ie];return se.stream=zt,se}}function vu(){}vu.prototype={constructor:vu,point:function(zt,se){this.stream.point(zt,se)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function pu(jt,zt,se){var ie=jt.clipExtent&&jt.clipExtent();return jt.scale(150).translate([0,0]),ie!=null&&jt.clipExtent(null),ft(se,jt.stream(Zu)),zt(Zu.result()),ie!=null&&jt.clipExtent(ie),jt}function Ol(jt,zt,se){return pu(jt,function(ie){var he=zt[1][0]-zt[0][0],Be=zt[1][1]-zt[0][1],Ze=Math.min(he/(ie[1][0]-ie[0][0]),Be/(ie[1][1]-ie[0][1])),on=+zt[0][0]+(he-Ze*(ie[1][0]+ie[0][0]))/2,$e=+zt[0][1]+(Be-Ze*(ie[1][1]+ie[0][1]))/2;jt.scale(150*Ze).translate([on,$e])},se)}function rc(jt,zt,se){return Ol(jt,[[0,0],zt],se)}function ql(jt,zt,se){return pu(jt,function(ie){var he=+zt,Be=he/(ie[1][0]-ie[0][0]),Ze=(he-Be*(ie[1][0]+ie[0][0]))/2,on=-Be*ie[0][1];jt.scale(150*Be).translate([Ze,on])},se)}function gu(jt,zt,se){return pu(jt,function(ie){var he=+zt,Be=he/(ie[1][1]-ie[0][1]),Ze=-Be*ie[0][0],on=(he-Be*(ie[1][1]+ie[0][1]))/2;jt.scale(150*Be).translate([Ze,on])},se)}var Nl=16,tc=M(30*b);function Ou(jt,zt){return+zt?wl(jt,zt):ml(jt)}function ml(jt){return du({point:function(se,ie){se=jt(se,ie),this.stream.point(se[0],se[1])}})}function wl(jt,zt){function se(ie,he,Be,Ze,on,$e,gn,vn,Xn,Wn,Jn,Hn,fr,xr){var Vr=gn-ie,gi=vn-he,Fr=Vr*Vr+gi*gi;if(Fr>4*zt&&fr--){var ai=Ze+Wn,yi=on+Jn,Ui=$e+Hn,Pi=R(ai*ai+yi*yi+Ui*Ui),pa=K(Ui/=Pi),ta=g(g(Ui)-1)<n||g(Be-Xn)<n?(Be+Xn)/2:_(yi,ai),oa=jt(ta,pa),si=oa[0],ma=oa[1],to=si-ie,Ha=ma-he,_i=gi*to-Vr*Ha;(_i*_i/Fr>zt||g((Vr*to+gi*Ha)/Fr-.5)>.3||Ze*Wn+on*Jn+$e*Hn<tc)&&(se(ie,he,Be,Ze,on,$e,si,ma,ta,ai/=Pi,yi/=Pi,Ui,fr,xr),xr.point(si,ma),se(si,ma,ta,ai,yi,Ui,gn,vn,Xn,Wn,Jn,Hn,fr,xr))}}return function(ie){var he,Be,Ze,on,$e,gn,vn,Xn,Wn,Jn,Hn,fr,xr={point:Vr,lineStart:gi,lineEnd:ai,polygonStart:function(){ie.polygonStart(),xr.lineStart=yi},polygonEnd:function(){ie.polygonEnd(),xr.lineStart=gi}};function Vr(pa,ta){pa=jt(pa,ta),ie.point(pa[0],pa[1])}function gi(){Xn=NaN,xr.point=Fr,ie.lineStart()}function Fr(pa,ta){var oa=Y([pa,ta]),si=jt(pa,ta);se(Xn,Wn,vn,Jn,Hn,fr,Xn=si[0],Wn=si[1],vn=pa,Jn=oa[0],Hn=oa[1],fr=oa[2],Nl,ie),ie.point(Xn,Wn)}function ai(){xr.point=Vr,ie.lineEnd()}function yi(){gi(),xr.point=Ui,xr.lineEnd=Pi}function Ui(pa,ta){Fr(he=pa,ta),Be=Xn,Ze=Wn,on=Jn,$e=Hn,gn=fr,xr.point=Fr}function Pi(){se(Xn,Wn,vn,Jn,Hn,fr,Be,Ze,he,on,$e,gn,Nl,ie),xr.lineEnd=ai,ai()}return xr}}var Bs=du({point:function(zt,se){this.stream.point(zt*b,se*b)}});function ao(jt){return du({point:function(se,ie){var he=jt(se,ie);return this.stream.point(he[0],he[1])}})}function yl(jt,zt,se,ie,he){function Be(Ze,on){return Ze*=ie,on*=he,[zt+jt*Ze,se-jt*on]}return Be.invert=function(Ze,on){return[(Ze-zt)/jt*ie,(se-on)/jt*he]},Be}function il(jt,zt,se,ie,he,Be){var Ze=M(Be),on=A(Be),$e=Ze*jt,gn=on*jt,vn=Ze/jt,Xn=on/jt,Wn=(on*se-Ze*zt)/jt,Jn=(on*zt+Ze*se)/jt;function Hn(fr,xr){return fr*=ie,xr*=he,[$e*fr-gn*xr+zt,se-gn*fr-$e*xr]}return Hn.invert=function(fr,xr){return[ie*(vn*fr-Xn*xr+Wn),he*(Jn-Xn*fr-vn*xr)]},Hn}function Hs(jt){return Ra(function(){return jt})()}function Ra(jt){var zt,se=150,ie=480,he=250,Be=0,Ze=0,on=0,$e=0,gn=0,vn,Xn=0,Wn=1,Jn=1,Hn=null,fr=Zt,xr=null,Vr,gi,Fr,ai=ls,yi=.5,Ui,Pi,pa,ta,oa;function si(_i){return pa(_i[0]*b,_i[1]*b)}function ma(_i){return _i=pa.invert(_i[0],_i[1]),_i&&[_i[0]*v,_i[1]*v]}si.stream=function(_i){return ta&&oa===_i?ta:ta=Bs(ao(vn)(fr(Ui(ai(oa=_i)))))},si.preclip=function(_i){return arguments.length?(fr=_i,Hn=void 0,Ha()):fr},si.postclip=function(_i){return arguments.length?(ai=_i,xr=Vr=gi=Fr=null,Ha()):ai},si.clipAngle=function(_i){return arguments.length?(fr=+_i?er(Hn=_i*b):(Hn=null,Zt),Ha()):Hn*v},si.clipExtent=function(_i){return arguments.length?(ai=_i==null?(xr=Vr=gi=Fr=null,ls):Si(xr=+_i[0][0],Vr=+_i[0][1],gi=+_i[1][0],Fr=+_i[1][1]),Ha()):xr==null?null:[[xr,Vr],[gi,Fr]]},si.scale=function(_i){return arguments.length?(se=+_i,to()):se},si.translate=function(_i){return arguments.length?(ie=+_i[0],he=+_i[1],to()):[ie,he]},si.center=function(_i){return arguments.length?(Be=_i[0]%360*b,Ze=_i[1]%360*b,to()):[Be*v,Ze*v]},si.rotate=function(_i){return arguments.length?(on=_i[0]%360*b,$e=_i[1]%360*b,gn=_i.length>2?_i[2]%360*b:0,to()):[on*v,$e*v,gn*v]},si.angle=function(_i){return arguments.length?(Xn=_i%360*b,to()):Xn*v},si.reflectX=function(_i){return arguments.length?(Wn=_i?-1:1,to()):Wn<0},si.reflectY=function(_i){return arguments.length?(Jn=_i?-1:1,to()):Jn<0},si.precision=function(_i){return arguments.length?(Ui=Ou(Pi,yi=_i*_i),Ha()):R(yi)},si.fitExtent=function(_i,Fa){return Ol(si,_i,Fa)},si.fitSize=function(_i,Fa){return rc(si,_i,Fa)},si.fitWidth=function(_i,Fa){return ql(si,_i,Fa)},si.fitHeight=function(_i,Fa){return gu(si,_i,Fa)};function to(){var _i=il(se,0,0,Wn,Jn,Xn).apply(null,zt(Be,Ze)),Fa=(Xn?il:yl)(se,ie-_i[0],he-_i[1],Wn,Jn,Xn);return vn=Oa(on,$e,gn),Pi=zr(zt,Fa),pa=zr(vn,Pi),Ui=Ou(Pi,yi),Ha()}function Ha(){return ta=oa=null,si}return function(){return zt=jt.apply(this,arguments),si.invert=zt.invert&&ma,to()}}function xo(jt){var zt=0,se=a/3,ie=Ra(jt),he=ie(zt,se);return he.parallels=function(Be){return arguments.length?ie(zt=Be[0]*b,se=Be[1]*b):[zt*v,se*v]},he}function ru(jt){var zt=M(jt);function se(ie,he){return[ie*zt,A(he)/zt]}return se.invert=function(ie,he){return[ie/zt,K(he*zt)]},se}function xl(jt,zt){var se=A(jt),ie=(se+A(zt))/2;if(g(ie)<n)return ru(jt);var he=1+se*(2*ie-se),Be=R(he)/ie;function Ze(on,$e){var gn=R(he-2*ie*A($e))/ie;return[gn*A(on*=ie),Be-gn*M(on)]}return Ze.invert=function(on,$e){var gn=Be-$e,vn=_(on,g(gn))*O(gn);return gn*ie<0&&(vn-=a*O(on)*O(gn)),[vn/ie,K((he-(on*on+gn*gn)*ie*ie)/(2*ie))]},Ze}function al(){return xo(xl).scale(155.424).center([0,33.6442])}function ku(){return al().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function zl(jt){var zt=jt.length;return{point:function(ie,he){for(var Be=-1;++Be<zt;)jt[Be].point(ie,he)},sphere:function(){for(var ie=-1;++ie<zt;)jt[ie].sphere()},lineStart:function(){for(var ie=-1;++ie<zt;)jt[ie].lineStart()},lineEnd:function(){for(var ie=-1;++ie<zt;)jt[ie].lineEnd()},polygonStart:function(){for(var ie=-1;++ie<zt;)jt[ie].polygonStart()},polygonEnd:function(){for(var ie=-1;++ie<zt;)jt[ie].polygonEnd()}}}function cs(){var jt,zt,se=ku(),ie,he=al().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Be,Ze=al().rotate([157,0]).center([-3,19.9]).parallels([8,18]),on,$e,gn={point:function(Jn,Hn){$e=[Jn,Hn]}};function vn(Wn){var Jn=Wn[0],Hn=Wn[1];return $e=null,ie.point(Jn,Hn),$e||(Be.point(Jn,Hn),$e)||(on.point(Jn,Hn),$e)}vn.invert=function(Wn){var Jn=se.scale(),Hn=se.translate(),fr=(Wn[0]-Hn[0])/Jn,xr=(Wn[1]-Hn[1])/Jn;return(xr>=.12&&xr<.234&&fr>=-.425&&fr<-.214?he:xr>=.166&&xr<.234&&fr>=-.214&&fr<-.115?Ze:se).invert(Wn)},vn.stream=function(Wn){return jt&&zt===Wn?jt:jt=zl([se.stream(zt=Wn),he.stream(Wn),Ze.stream(Wn)])},vn.precision=function(Wn){return arguments.length?(se.precision(Wn),he.precision(Wn),Ze.precision(Wn),Xn()):se.precision()},vn.scale=function(Wn){return arguments.length?(se.scale(Wn),he.scale(Wn*.35),Ze.scale(Wn),vn.translate(se.translate())):se.scale()},vn.translate=function(Wn){if(!arguments.length)return se.translate();var Jn=se.scale(),Hn=+Wn[0],fr=+Wn[1];return ie=se.translate(Wn).clipExtent([[Hn-.455*Jn,fr-.238*Jn],[Hn+.455*Jn,fr+.238*Jn]]).stream(gn),Be=he.translate([Hn-.307*Jn,fr+.201*Jn]).clipExtent([[Hn-.425*Jn+n,fr+.12*Jn+n],[Hn-.214*Jn-n,fr+.234*Jn-n]]).stream(gn),on=Ze.translate([Hn-.205*Jn,fr+.212*Jn]).clipExtent([[Hn-.214*Jn+n,fr+.166*Jn+n],[Hn-.115*Jn-n,fr+.234*Jn-n]]).stream(gn),Xn()},vn.fitExtent=function(Wn,Jn){return Ol(vn,Wn,Jn)},vn.fitSize=function(Wn,Jn){return rc(vn,Wn,Jn)},vn.fitWidth=function(Wn,Jn){return ql(vn,Wn,Jn)},vn.fitHeight=function(Wn,Jn){return gu(vn,Wn,Jn)};function Xn(){return jt=zt=null,vn}return vn.scale(1070)}function bl(jt){return function(zt,se){var ie=M(zt),he=M(se),Be=jt(ie*he);return[Be*he*A(zt),Be*A(se)]}}function mu(jt){return function(zt,se){var ie=R(zt*zt+se*se),he=jt(ie),Be=A(he),Ze=M(he);return[_(zt*Be,ie*Ze),K(ie&&se*Be/ie)]}}var Fs=bl(function(jt){return R(2/(1+jt))});Fs.invert=mu(function(jt){return 2*K(jt/2)});function Wo(){return Hs(Fs).scale(124.75).clipAngle(180-.001)}var _s=bl(function(jt){return(jt=N(jt))&&jt/A(jt)});_s.invert=mu(function(jt){return jt});function iu(){return Hs(_s).scale(79.4188).clipAngle(180-.001)}function Ho(jt,zt){return[jt,S(H((o+zt)/2))]}Ho.invert=function(jt,zt){return[jt,2*y(m(zt))-o]};function Ni(){return Ns(Ho).scale(961/f)}function Ns(jt){var zt=Hs(jt),se=zt.center,ie=zt.scale,he=zt.translate,Be=zt.clipExtent,Ze=null,on,$e,gn;zt.scale=function(Xn){return arguments.length?(ie(Xn),vn()):ie()},zt.translate=function(Xn){return arguments.length?(he(Xn),vn()):he()},zt.center=function(Xn){return arguments.length?(se(Xn),vn()):se()},zt.clipExtent=function(Xn){return arguments.length?(Xn==null?Ze=on=$e=gn=null:(Ze=+Xn[0][0],on=+Xn[0][1],$e=+Xn[1][0],gn=+Xn[1][1]),vn()):Ze==null?null:[[Ze,on],[$e,gn]]};function vn(){var Xn=a*ie(),Wn=zt(ha(zt.rotate()).invert([0,0]));return Be(Ze==null?[[Wn[0]-Xn,Wn[1]-Xn],[Wn[0]+Xn,Wn[1]+Xn]]:jt===Ho?[[Math.max(Wn[0]-Xn,Ze),on],[Math.min(Wn[0]+Xn,$e),gn]]:[[Ze,Math.max(Wn[1]-Xn,on)],[$e,Math.min(Wn[1]+Xn,gn)]])}return vn()}function El(jt){return H((o+jt)/2)}function ol(jt,zt){var se=M(jt),ie=jt===zt?A(jt):S(se/M(zt))/S(El(zt)/El(jt)),he=se*P(El(jt),ie)/ie;if(!ie)return Ho;function Be(Ze,on){he>0?on<-o+n&&(on=-o+n):on>o-n&&(on=o-n);var $e=he/P(El(on),ie);return[$e*A(ie*Ze),he-$e*M(ie*Ze)]}return Be.invert=function(Ze,on){var $e=he-on,gn=O(ie)*R(Ze*Ze+$e*$e),vn=_(Ze,g($e))*O($e);return $e*ie<0&&(vn-=a*O(Ze)*O($e)),[vn/ie,2*y(P(he/gn,1/ie))-o]},Be}function No(){return xo(ol).scale(109.5).parallels([30,30])}function Co(jt,zt){return[jt,zt]}Co.invert=Co;function tu(){return Hs(Co).scale(152.63)}function mi(jt,zt){var se=M(jt),ie=jt===zt?A(jt):(se-M(zt))/(zt-jt),he=se/ie+jt;if(g(ie)<n)return Co;function Be(Ze,on){var $e=he-on,gn=ie*Ze;return[$e*A(gn),he-$e*M(gn)]}return Be.invert=function(Ze,on){var $e=he-on,gn=_(Ze,g($e))*O($e);return $e*ie<0&&(gn-=a*O(Ze)*O($e)),[gn/ie,he-O(ie)*R(Ze*Ze+$e*$e)]},Be}function Ru(){return xo(mi).scale(131.154).center([0,13.9389])}var Du=1.340264,ju=-.081106,Cs=893e-6,Ae=.003796,_e=R(3)/2,pn=12;function an(jt,zt){var se=K(_e*A(zt)),ie=se*se,he=ie*ie*ie;return[jt*M(se)/(_e*(Du+3*ju*ie+he*(7*Cs+9*Ae*ie))),se*(Du+ju*ie+he*(Cs+Ae*ie))]}an.invert=function(jt,zt){for(var se=zt,ie=se*se,he=ie*ie*ie,Be=0,Ze,on,$e;Be<pn&&(on=se*(Du+ju*ie+he*(Cs+Ae*ie))-zt,$e=Du+3*ju*ie+he*(7*Cs+9*Ae*ie),se-=Ze=on/$e,ie=se*se,he=ie*ie*ie,!(g(Ze)<i));++Be);return[_e*jt*(Du+3*ju*ie+he*(7*Cs+9*Ae*ie))/M(se),K(A(se)/_e)]};function In(){return Hs(an).scale(177.158)}function hr(jt,zt){var se=M(zt),ie=M(jt)*se;return[se*A(jt)/ie,A(zt)/ie]}hr.invert=mu(y);function Lr(){return Hs(hr).scale(144.049).clipAngle(60)}function Zr(){var jt=1,zt=0,se=0,ie=1,he=1,Be=0,Ze,on,$e=null,gn,vn,Xn,Wn=1,Jn=1,Hn=du({point:function(yi,Ui){var Pi=Fr([yi,Ui]);this.stream.point(Pi[0],Pi[1])}}),fr=ls,xr,Vr;function gi(){return Wn=jt*ie,Jn=jt*he,xr=Vr=null,Fr}function Fr(ai){var yi=ai[0]*Wn,Ui=ai[1]*Jn;if(Be){var Pi=Ui*Ze-yi*on;yi=yi*Ze+Ui*on,Ui=Pi}return[yi+zt,Ui+se]}return Fr.invert=function(ai){var yi=ai[0]-zt,Ui=ai[1]-se;if(Be){var Pi=Ui*Ze+yi*on;yi=yi*Ze-Ui*on,Ui=Pi}return[yi/Wn,Ui/Jn]},Fr.stream=function(ai){return xr&&Vr===ai?xr:xr=Hn(fr(Vr=ai))},Fr.postclip=function(ai){return arguments.length?(fr=ai,$e=gn=vn=Xn=null,gi()):fr},Fr.clipExtent=function(ai){return arguments.length?(fr=ai==null?($e=gn=vn=Xn=null,ls):Si($e=+ai[0][0],gn=+ai[0][1],vn=+ai[1][0],Xn=+ai[1][1]),gi()):$e==null?null:[[$e,gn],[vn,Xn]]},Fr.scale=function(ai){return arguments.length?(jt=+ai,gi()):jt},Fr.translate=function(ai){return arguments.length?(zt=+ai[0],se=+ai[1],gi()):[zt,se]},Fr.angle=function(ai){return arguments.length?(Be=ai%360*b,on=A(Be),Ze=M(Be),gi()):Be*v},Fr.reflectX=function(ai){return arguments.length?(ie=ai?-1:1,gi()):ie<0},Fr.reflectY=function(ai){return arguments.length?(he=ai?-1:1,gi()):he<0},Fr.fitExtent=function(ai,yi){return Ol(Fr,ai,yi)},Fr.fitSize=function(ai,yi){return rc(Fr,ai,yi)},Fr.fitWidth=function(ai,yi){return ql(Fr,ai,yi)},Fr.fitHeight=function(ai,yi){return gu(Fr,ai,yi)},Fr}function ei(jt,zt){var se=zt*zt,ie=se*se;return[jt*(.8707-.131979*se+ie*(-.013791+ie*(.003971*se-.001529*ie))),zt*(1.007226+se*(.015085+ie*(-.044475+.028874*se-.005916*ie)))]}ei.invert=function(jt,zt){var se=zt,ie=25,he;do{var Be=se*se,Ze=Be*Be;se-=he=(se*(1.007226+Be*(.015085+Ze*(-.044475+.028874*Be-.005916*Ze)))-zt)/(1.007226+Be*(.015085*3+Ze*(-.044475*7+.028874*9*Be-.005916*11*Ze)))}while(g(he)>n&&--ie>0);return[jt/(.8707+(Be=se*se)*(-.131979+Be*(-.013791+Be*Be*Be*(.003971-.001529*Be)))),se]};function Ur(){return Hs(ei).scale(175.295)}function hi(jt,zt){return[M(zt)*A(jt),A(zt)]}hi.invert=mu(K);function br(){return Hs(hi).scale(249.5).clipAngle(90+n)}function Xt(jt,zt){var se=M(zt),ie=1+M(jt)*se;return[se*A(jt)/ie,A(zt)/ie]}Xt.invert=mu(function(jt){return 2*y(jt)});function ee(){return Hs(Xt).scale(250).clipAngle(142)}function Oe(jt,zt){return[S(H((o+zt)/2)),-jt]}Oe.invert=function(jt,zt){return[-zt,2*y(m(jt))-o]};function Ee(){var jt=Ns(Oe),zt=jt.center,se=jt.rotate;return jt.center=function(ie){return arguments.length?zt([-ie[1],ie[0]]):(ie=zt(),[ie[1],-ie[0]])},jt.rotate=function(ie){return arguments.length?se([ie[0],ie[1],ie.length>2?ie[2]+90:90]):(ie=se(),[ie[0],ie[1],ie[2]-90])},se([0,0,90]).scale(159.155)}t.geoAlbers=ku,t.geoAlbersUsa=cs,t.geoArea=st,t.geoAzimuthalEqualArea=Wo,t.geoAzimuthalEqualAreaRaw=Fs,t.geoAzimuthalEquidistant=iu,t.geoAzimuthalEquidistantRaw=_s,t.geoBounds=te,t.geoCentroid=Cr,t.geoCircle=$a,t.geoClipAntimeridian=Zt,t.geoClipCircle=er,t.geoClipExtent=ji,t.geoClipRectangle=Si,t.geoConicConformal=No,t.geoConicConformalRaw=ol,t.geoConicEqualArea=al,t.geoConicEqualAreaRaw=xl,t.geoConicEquidistant=Ru,t.geoConicEquidistantRaw=mi,t.geoContains=Ua,t.geoDistance=mo,t.geoEqualEarth=In,t.geoEqualEarthRaw=an,t.geoEquirectangular=tu,t.geoEquirectangularRaw=Co,t.geoGnomonic=Lr,t.geoGnomonicRaw=hr,t.geoGraticule=La,t.geoGraticule10=Va,t.geoIdentity=Zr,t.geoInterpolate=ts,t.geoLength=Vo,t.geoMercator=Ni,t.geoMercatorRaw=Ho,t.geoNaturalEarth1=Ur,t.geoNaturalEarth1Raw=ei,t.geoOrthographic=br,t.geoOrthographicRaw=hi,t.geoPath=Iu,t.geoProjection=Hs,t.geoProjectionMutator=Ra,t.geoRotation=ha,t.geoStereographic=ee,t.geoStereographicRaw=Xt,t.geoStream=ft,t.geoTransform=Lu,t.geoTransverseMercator=Ee,t.geoTransverseMercatorRaw=Oe,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";var s=function(){return new h};function h(){this.reset()}h.prototype={constructor:h,reset:function(){this.s=this.t=0},add:function(_e){c(r,_e,this.t),c(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new h;function c(Ae,_e,pn){var an=Ae.s=_e+pn,In=an-_e,hr=an-In;Ae.t=_e-hr+(pn-In)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,l=a/4,f=a*2,v=180/a,b=a/180,g=Math.abs,y=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,m=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(Ae){return Ae>0?1:Ae<0?-1:0},R=Math.sqrt,H=Math.tan;function N(Ae){return Ae>1?0:Ae<-1?a:Math.acos(Ae)}function K(Ae){return Ae>1?o:Ae<-1?-o:Math.asin(Ae)}function V(Ae){return(Ae=A(Ae/2))*Ae}function k(){}function Z(Ae,_e){Ae&&at.hasOwnProperty(Ae.type)&&at[Ae.type](Ae,_e)}var X={Feature:function(_e,pn){Z(_e.geometry,pn)},FeatureCollection:function(_e,pn){for(var an=_e.features,In=-1,hr=an.length;++In<hr;)Z(an[In].geometry,pn)}},at={Sphere:function(_e,pn){pn.sphere()},Point:function(_e,pn){_e=_e.coordinates,pn.point(_e[0],_e[1],_e[2])},MultiPoint:function(_e,pn){for(var an=_e.coordinates,In=-1,hr=an.length;++In<hr;)_e=an[In],pn.point(_e[0],_e[1],_e[2])},LineString:function(_e,pn){pt(_e.coordinates,pn,0)},MultiLineString:function(_e,pn){for(var an=_e.coordinates,In=-1,hr=an.length;++In<hr;)pt(an[In],pn,0)},Polygon:function(_e,pn){gt(_e.coordinates,pn)},MultiPolygon:function(_e,pn){for(var an=_e.coordinates,In=-1,hr=an.length;++In<hr;)gt(an[In],pn)},GeometryCollection:function(_e,pn){for(var an=_e.geometries,In=-1,hr=an.length;++In<hr;)Z(an[In],pn)}};function pt(Ae,_e,pn){var an=-1,In=Ae.length-pn,hr;for(_e.lineStart();++an<In;)hr=Ae[an],_e.point(hr[0],hr[1],hr[2]);_e.lineEnd()}function gt(Ae,_e){var pn=-1,an=Ae.length;for(_e.polygonStart();++pn<an;)pt(Ae[pn],_e,1);_e.polygonEnd()}var ft=function(_e,pn){_e&&X.hasOwnProperty(_e.type)?X[_e.type](_e,pn):Z(_e,pn)},Rt=s(),Nt=s(),Dt,St,xt,Ot,it,At={point:k,lineStart:k,lineEnd:k,polygonStart:function(){Rt.reset(),At.lineStart=z,At.lineEnd=q},polygonEnd:function(){var _e=+Rt;Nt.add(_e<0?f+_e:_e),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Nt.add(f)}};function z(){At.point=mt}function q(){et(Dt,St)}function mt(Ae,_e){At.point=et,Dt=Ae,St=_e,Ae*=b,_e*=b,xt=Ae,Ot=M(_e=_e/2+l),it=A(_e)}function et(Ae,_e){Ae*=b,_e*=b,_e=_e/2+l;var pn=Ae-xt,an=pn>=0?1:-1,In=an*pn,hr=M(_e),Lr=A(_e),Zr=it*Lr,ei=Ot*hr+Zr*M(In),Ur=Zr*an*A(In);Rt.add(_(Ur,ei)),xt=Ae,Ot=hr,it=Lr}var st=function(_e){return Nt.reset(),ft(_e,At),Nt*2};function bt(Ae){return[_(Ae[1],Ae[0]),K(Ae[2])]}function Y(Ae){var _e=Ae[0],pn=Ae[1],an=M(pn);return[an*M(_e),an*A(_e),A(pn)]}function rt(Ae,_e){return Ae[0]*_e[0]+Ae[1]*_e[1]+Ae[2]*_e[2]}function ot(Ae,_e){return[Ae[1]*_e[2]-Ae[2]*_e[1],Ae[2]*_e[0]-Ae[0]*_e[2],Ae[0]*_e[1]-Ae[1]*_e[0]]}function $(Ae,_e){Ae[0]+=_e[0],Ae[1]+=_e[1],Ae[2]+=_e[2]}function Pt(Ae,_e){return[Ae[0]*_e,Ae[1]*_e,Ae[2]*_e]}function yt(Ae){var _e=R(Ae[0]*Ae[0]+Ae[1]*Ae[1]+Ae[2]*Ae[2]);Ae[0]/=_e,Ae[1]/=_e,Ae[2]/=_e}var Ft,Qt,ne,Wt,$t,De,Je,Qe,de=s(),ue,Ne,cn={point:Fn,lineStart:en,lineEnd:tn,polygonStart:function(){cn.point=xn,cn.lineStart=Bn,cn.lineEnd=vr,de.reset(),At.polygonStart()},polygonEnd:function(){At.polygonEnd(),cn.point=Fn,cn.lineStart=en,cn.lineEnd=tn,Rt<0?(Ft=-(ne=180),Qt=-(Wt=90)):de>n?Wt=90:de<-n&&(Qt=-90),Ne[0]=Ft,Ne[1]=ne}};function Fn(Ae,_e){ue.push(Ne=[Ft=Ae,ne=Ae]),_e<Qt&&(Qt=_e),_e>Wt&&(Wt=_e)}function wn(Ae,_e){var pn=Y([Ae*b,_e*b]);if(Qe){var an=ot(Qe,pn),In=[an[1],-an[0],0],hr=ot(In,an);yt(hr),hr=bt(hr);var Lr=Ae-$t,Zr=Lr>0?1:-1,ei=hr[0]*v*Zr,Ur,hi=g(Lr)>180;hi^(Zr*$t<ei&&ei<Zr*Ae)?(Ur=hr[1]*v,Ur>Wt&&(Wt=Ur)):(ei=(ei+360)%360-180,hi^(Zr*$t<ei&&ei<Zr*Ae)?(Ur=-hr[1]*v,Ur<Qt&&(Qt=Ur)):(_e<Qt&&(Qt=_e),_e>Wt&&(Wt=_e))),hi?Ae<$t?li(Ft,Ae)>li(Ft,ne)&&(ne=Ae):li(Ae,ne)>li(Ft,ne)&&(Ft=Ae):ne>=Ft?(Ae<Ft&&(Ft=Ae),Ae>ne&&(ne=Ae)):Ae>$t?li(Ft,Ae)>li(Ft,ne)&&(ne=Ae):li(Ae,ne)>li(Ft,ne)&&(Ft=Ae)}else ue.push(Ne=[Ft=Ae,ne=Ae]);_e<Qt&&(Qt=_e),_e>Wt&&(Wt=_e),Qe=pn,$t=Ae}function en(){cn.point=wn}function tn(){Ne[0]=Ft,Ne[1]=ne,cn.point=Fn,Qe=null}function xn(Ae,_e){if(Qe){var pn=Ae-$t;de.add(g(pn)>180?pn+(pn>0?360:-360):pn)}else De=Ae,Je=_e;At.point(Ae,_e),wn(Ae,_e)}function Bn(){At.lineStart()}function vr(){xn(De,Je),At.lineEnd(),g(de)>n&&(Ft=-(ne=180)),Ne[0]=Ft,Ne[1]=ne,Qe=null}function li(Ae,_e){return(_e-=Ae)<0?_e+360:_e}function Me(Ae,_e){return Ae[0]-_e[0]}function Pe(Ae,_e){return Ae[0]<=Ae[1]?Ae[0]<=_e&&_e<=Ae[1]:_e<Ae[0]||Ae[1]<_e}var te=function(_e){var pn,an,In,hr,Lr,Zr,ei;if(Wt=ne=-(Ft=Qt=Infinity),ue=[],ft(_e,cn),an=ue.length){for(ue.sort(Me),pn=1,In=ue[0],Lr=[In];pn<an;++pn)hr=ue[pn],Pe(In,hr[0])||Pe(In,hr[1])?(li(In[0],hr[1])>li(In[0],In[1])&&(In[1]=hr[1]),li(hr[0],In[1])>li(In[0],In[1])&&(In[0]=hr[0])):Lr.push(In=hr);for(Zr=-Infinity,an=Lr.length-1,pn=0,In=Lr[an];pn<=an;In=hr,++pn)hr=Lr[pn],(ei=li(In[1],hr[0]))>Zr&&(Zr=ei,Ft=hr[0],ne=In[1])}return ue=Ne=null,Ft===Infinity||Qt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Ft,Qt],[ne,Wt]]},ge,Ht,re,Te,ae,xe,qe,zn,ar,_n,Cn,Or,Ar,hn,Pr,yr,Re={sphere:k,point:We,lineStart:dn,lineEnd:Sn,polygonStart:function(){Re.lineStart=Nn,Re.lineEnd=nr},polygonEnd:function(){Re.lineStart=dn,Re.lineEnd=Sn}};function We(Ae,_e){Ae*=b,_e*=b;var pn=M(_e);Ye(pn*M(Ae),pn*A(Ae),A(_e))}function Ye(Ae,_e,pn){++ge,re+=(Ae-re)/ge,Te+=(_e-Te)/ge,ae+=(pn-ae)/ge}function dn(){Re.point=En}function En(Ae,_e){Ae*=b,_e*=b;var pn=M(_e);hn=pn*M(Ae),Pr=pn*A(Ae),yr=A(_e),Re.point=Dn,Ye(hn,Pr,yr)}function Dn(Ae,_e){Ae*=b,_e*=b;var pn=M(_e),an=pn*M(Ae),In=pn*A(Ae),hr=A(_e),Lr=_(R((Lr=Pr*hr-yr*In)*Lr+(Lr=yr*an-hn*hr)*Lr+(Lr=hn*In-Pr*an)*Lr),hn*an+Pr*In+yr*hr);Ht+=Lr,xe+=Lr*(hn+(hn=an)),qe+=Lr*(Pr+(Pr=In)),zn+=Lr*(yr+(yr=hr)),Ye(hn,Pr,yr)}function Sn(){Re.point=We}function Nn(){Re.point=Gn}function nr(){Tn(Or,Ar),Re.point=We}function Gn(Ae,_e){Or=Ae,Ar=_e,Ae*=b,_e*=b,Re.point=Tn;var pn=M(_e);hn=pn*M(Ae),Pr=pn*A(Ae),yr=A(_e),Ye(hn,Pr,yr)}function Tn(Ae,_e){Ae*=b,_e*=b;var pn=M(_e),an=pn*M(Ae),In=pn*A(Ae),hr=A(_e),Lr=Pr*hr-yr*In,Zr=yr*an-hn*hr,ei=hn*In-Pr*an,Ur=R(Lr*Lr+Zr*Zr+ei*ei),hi=K(Ur),br=Ur&&-hi/Ur;ar+=br*Lr,_n+=br*Zr,Cn+=br*ei,Ht+=hi,xe+=hi*(hn+(hn=an)),qe+=hi*(Pr+(Pr=In)),zn+=hi*(yr+(yr=hr)),Ye(hn,Pr,yr)}var Cr=function(_e){ge=Ht=re=Te=ae=xe=qe=zn=ar=_n=Cn=0,ft(_e,Re);var pn=ar,an=_n,In=Cn,hr=pn*pn+an*an+In*In;return hr<i&&(pn=xe,an=qe,In=zn,Ht<n&&(pn=re,an=Te,In=ae),hr=pn*pn+an*an+In*In,hr<i)?[NaN,NaN]:[_(an,pn)*v,K(In/R(hr))*v]},pr=function(_e){return function(){return _e}},zr=function(_e,pn){function an(In,hr){return In=_e(In,hr),pn(In[0],In[1])}return _e.invert&&pn.invert&&(an.invert=function(In,hr){return In=pn.invert(In,hr),In&&_e.invert(In[0],In[1])}),an};function Ei(Ae,_e){return[Ae>a?Ae-f:Ae<-a?Ae+f:Ae,_e]}Ei.invert=Ei;function Oa(Ae,_e,pn){return(Ae%=f)?_e||pn?zr(Ja(Ae),wo(_e,pn)):Ja(Ae):_e||pn?wo(_e,pn):Ei}function wa(Ae){return function(_e,pn){return _e+=Ae,[_e>a?_e-f:_e<-a?_e+f:_e,pn]}}function Ja(Ae){var _e=wa(Ae);return _e.invert=wa(-Ae),_e}function wo(Ae,_e){var pn=M(Ae),an=A(Ae),In=M(_e),hr=A(_e);function Lr(Zr,ei){var Ur=M(ei),hi=M(Zr)*Ur,br=A(Zr)*Ur,Xt=A(ei),ee=Xt*pn+hi*an;return[_(br*In-ee*hr,hi*pn-Xt*an),K(ee*In+br*hr)]}return Lr.invert=function(Zr,ei){var Ur=M(ei),hi=M(Zr)*Ur,br=A(Zr)*Ur,Xt=A(ei),ee=Xt*In-br*hr;return[_(br*In+Xt*hr,hi*pn+ee*an),K(ee*pn-hi*an)]},Lr}var ha=function(_e){_e=Oa(_e[0]*b,_e[1]*b,_e.length>2?_e[2]*b:0);function pn(an){return an=_e(an[0]*b,an[1]*b),an[0]*=v,an[1]*=v,an}return pn.invert=function(an){return an=_e.invert(an[0]*b,an[1]*b),an[0]*=v,an[1]*=v,an},pn};function ro(Ae,_e,pn,an,In,hr){if(!!pn){var Lr=M(_e),Zr=A(_e),ei=an*pn;In==null?(In=_e+an*f,hr=_e-ei/2):(In=ko(Lr,In),hr=ko(Lr,hr),(an>0?In<hr:In>hr)&&(In+=an*f));for(var Ur,hi=In;an>0?hi>hr:hi<hr;hi-=ei)Ur=bt([Lr,-Zr*M(hi),-Zr*A(hi)]),Ae.point(Ur[0],Ur[1])}}function ko(Ae,_e){_e=Y(_e),_e[0]-=Ae,yt(_e);var pn=N(-_e[1]);return((-_e[2]<0?-pn:pn)+f-n)%f}var $a=function(){var _e=pr([0,0]),pn=pr(90),an=pr(6),In,hr,Lr={point:Zr};function Zr(Ur,hi){In.push(Ur=hr(Ur,hi)),Ur[0]*=v,Ur[1]*=v}function ei(){var Ur=_e.apply(this,arguments),hi=pn.apply(this,arguments)*b,br=an.apply(this,arguments)*b;return In=[],hr=Oa(-Ur[0]*b,-Ur[1]*b,0).invert,ro(Lr,hi,br,1),Ur={type:"Polygon",coordinates:[In]},In=hr=null,Ur}return ei.center=function(Ur){return arguments.length?(_e=typeof Ur=="function"?Ur:pr([+Ur[0],+Ur[1]]),ei):_e},ei.radius=function(Ur){return arguments.length?(pn=typeof Ur=="function"?Ur:pr(+Ur),ei):pn},ei.precision=function(Ur){return arguments.length?(an=typeof Ur=="function"?Ur:pr(+Ur),ei):an},ei},Mo=function(){var _e=[],pn;return{point:function(In,hr){pn.push([In,hr])},lineStart:function(){_e.push(pn=[])},lineEnd:k,rejoin:function(){_e.length>1&&_e.push(_e.pop().concat(_e.shift()))},result:function(){var In=_e;return _e=[],pn=null,In}}},ss=function(_e,pn,an,In,hr,Lr){var Zr=_e[0],ei=_e[1],Ur=pn[0],hi=pn[1],br=0,Xt=1,ee=Ur-Zr,Oe=hi-ei,Ee;if(Ee=an-Zr,!(!ee&&Ee>0)){if(Ee/=ee,ee<0){if(Ee<br)return;Ee<Xt&&(Xt=Ee)}else if(ee>0){if(Ee>Xt)return;Ee>br&&(br=Ee)}if(Ee=hr-Zr,!(!ee&&Ee<0)){if(Ee/=ee,ee<0){if(Ee>Xt)return;Ee>br&&(br=Ee)}else if(ee>0){if(Ee<br)return;Ee<Xt&&(Xt=Ee)}if(Ee=In-ei,!(!Oe&&Ee>0)){if(Ee/=Oe,Oe<0){if(Ee<br)return;Ee<Xt&&(Xt=Ee)}else if(Oe>0){if(Ee>Xt)return;Ee>br&&(br=Ee)}if(Ee=Lr-ei,!(!Oe&&Ee<0)){if(Ee/=Oe,Oe<0){if(Ee>Xt)return;Ee>br&&(br=Ee)}else if(Oe>0){if(Ee<br)return;Ee<Xt&&(Xt=Ee)}return br>0&&(_e[0]=Zr+br*ee,_e[1]=ei+br*Oe),Xt<1&&(pn[0]=Zr+Xt*ee,pn[1]=ei+Xt*Oe),!0}}}}},Pa=function(_e,pn){return g(_e[0]-pn[0])<n&&g(_e[1]-pn[1])<n};function Bo(Ae,_e,pn,an){this.x=Ae,this.z=_e,this.o=pn,this.e=an,this.v=!1,this.n=this.p=null}var Ro=function(_e,pn,an,In,hr){var Lr=[],Zr=[],ei,Ur;if(_e.forEach(function(Ee){if(!((jt=Ee.length-1)<=0)){var jt,zt=Ee[0],se=Ee[jt],ie;if(Pa(zt,se)){for(hr.lineStart(),ei=0;ei<jt;++ei)hr.point((zt=Ee[ei])[0],zt[1]);hr.lineEnd();return}Lr.push(ie=new Bo(zt,Ee,null,!0)),Zr.push(ie.o=new Bo(zt,null,ie,!1)),Lr.push(ie=new Bo(se,Ee,null,!1)),Zr.push(ie.o=new Bo(se,null,ie,!0))}}),!!Lr.length){for(Zr.sort(pn),Js(Lr),Js(Zr),ei=0,Ur=Zr.length;ei<Ur;++ei)Zr[ei].e=an=!an;for(var hi=Lr[0],br,Xt;;){for(var ee=hi,Oe=!0;ee.v;)if((ee=ee.n)===hi)return;br=ee.z,hr.lineStart();do{if(ee.v=ee.o.v=!0,ee.e){if(Oe)for(ei=0,Ur=br.length;ei<Ur;++ei)hr.point((Xt=br[ei])[0],Xt[1]);else In(ee.x,ee.n.x,1,hr);ee=ee.n}else{if(Oe)for(br=ee.p.z,ei=br.length-1;ei>=0;--ei)hr.point((Xt=br[ei])[0],Xt[1]);else In(ee.x,ee.p.x,-1,hr);ee=ee.p}ee=ee.o,br=ee.z,Oe=!Oe}while(!ee.v);hr.lineEnd()}}};function Js(Ae){if(!!(_e=Ae.length)){for(var _e,pn=0,an=Ae[0],In;++pn<_e;)an.n=In=Ae[pn],In.p=an,an=In;an.n=In=Ae[0],In.p=an}}var Ko=1e9,nu=-Ko;function Rs(Ae,_e,pn,an){function In(Ur,hi){return Ae<=Ur&&Ur<=pn&&_e<=hi&&hi<=an}function hr(Ur,hi,br,Xt){var ee=0,Oe=0;if(Ur==null||(ee=Lr(Ur,br))!==(Oe=Lr(hi,br))||ei(Ur,hi)<0^br>0)do Xt.point(ee===0||ee===3?Ae:pn,ee>1?an:_e);while((ee=(ee+br+4)%4)!==Oe);else Xt.point(hi[0],hi[1])}function Lr(Ur,hi){return g(Ur[0]-Ae)<n?hi>0?0:3:g(Ur[0]-pn)<n?hi>0?2:1:g(Ur[1]-_e)<n?hi>0?1:0:hi>0?3:2}function Zr(Ur,hi){return ei(Ur.x,hi.x)}function ei(Ur,hi){var br=Lr(Ur,1),Xt=Lr(hi,1);return br!==Xt?br-Xt:br===0?hi[1]-Ur[1]:br===1?Ur[0]-hi[0]:br===2?Ur[1]-hi[1]:hi[0]-Ur[0]}return function(Ur){var hi=Ur,br=Mo(),Xt,ee,Oe,Ee,jt,zt,se,ie,he,Be,Ze,on={point:$e,lineStart:Wn,lineEnd:Jn,polygonStart:vn,polygonEnd:Xn};function $e(fr,xr){In(fr,xr)&&hi.point(fr,xr)}function gn(){for(var fr=0,xr=0,Vr=ee.length;xr<Vr;++xr)for(var gi=ee[xr],Fr=1,ai=gi.length,yi=gi[0],Ui,Pi,pa=yi[0],ta=yi[1];Fr<ai;++Fr)Ui=pa,Pi=ta,yi=gi[Fr],pa=yi[0],ta=yi[1],Pi<=an?ta>an&&(pa-Ui)*(an-Pi)>(ta-Pi)*(Ae-Ui)&&++fr:ta<=an&&(pa-Ui)*(an-Pi)<(ta-Pi)*(Ae-Ui)&&--fr;return fr}function vn(){hi=br,Xt=[],ee=[],Ze=!0}function Xn(){var fr=gn(),xr=Ze&&fr,Vr=(Xt=u.merge(Xt)).length;(xr||Vr)&&(Ur.polygonStart(),xr&&(Ur.lineStart(),hr(null,null,1,Ur),Ur.lineEnd()),Vr&&Ro(Xt,Zr,fr,hr,Ur),Ur.polygonEnd()),hi=Ur,Xt=ee=Oe=null}function Wn(){on.point=Hn,ee&&ee.push(Oe=[]),Be=!0,he=!1,se=ie=NaN}function Jn(){Xt&&(Hn(Ee,jt),zt&&he&&br.rejoin(),Xt.push(br.result())),on.point=$e,he&&hi.lineEnd()}function Hn(fr,xr){var Vr=In(fr,xr);if(ee&&Oe.push([fr,xr]),Be)Ee=fr,jt=xr,zt=Vr,Be=!1,Vr&&(hi.lineStart(),hi.point(fr,xr));else if(Vr&&he)hi.point(fr,xr);else{var gi=[se=Math.max(nu,Math.min(Ko,se)),ie=Math.max(nu,Math.min(Ko,ie))],Fr=[fr=Math.max(nu,Math.min(Ko,fr)),xr=Math.max(nu,Math.min(Ko,xr))];ss(gi,Fr,Ae,_e,pn,an)?(he||(hi.lineStart(),hi.point(gi[0],gi[1])),hi.point(Fr[0],Fr[1]),Vr||hi.lineEnd(),Ze=!1):Vr&&(hi.lineStart(),hi.point(fr,xr),Ze=!1)}se=fr,ie=xr,he=Vr}return on}}var je=function(){var _e=0,pn=0,an=960,In=500,hr,Lr,Zr;return Zr={stream:function(Ur){return hr&&Lr===Ur?hr:hr=Rs(_e,pn,an,In)(Lr=Ur)},extent:function(Ur){return arguments.length?(_e=+Ur[0][0],pn=+Ur[0][1],an=+Ur[1][0],In=+Ur[1][1],hr=Lr=null,Zr):[[_e,pn],[an,In]]}}},oe=s(),Zt=function(_e,pn){var an=pn[0],In=pn[1],hr=[A(an),-M(an),0],Lr=0,Zr=0;oe.reset();for(var ei=0,Ur=_e.length;ei<Ur;++ei)if(!!(br=(hi=_e[ei]).length))for(var hi,br,Xt=hi[br-1],ee=Xt[0],Oe=Xt[1]/2+l,Ee=A(Oe),jt=M(Oe),zt=0;zt<br;++zt,ee=ie,Ee=Be,jt=Ze,Xt=se){var se=hi[zt],ie=se[0],he=se[1]/2+l,Be=A(he),Ze=M(he),on=ie-ee,$e=on>=0?1:-1,gn=$e*on,vn=gn>a,Xn=Ee*Be;if(oe.add(_(Xn*$e*A(gn),jt*Ze+Xn*M(gn))),Lr+=vn?on+$e*f:on,vn^ee>=an^ie>=an){var Wn=ot(Y(Xt),Y(se));yt(Wn);var Jn=ot(hr,Wn);yt(Jn);var Hn=(vn^on>=0?-1:1)*K(Jn[2]);(In>Hn||In===Hn&&(Wn[0]||Wn[1]))&&(Zr+=vn^on>=0?1:-1)}}return(Lr<-n||Lr<n&&oe<-n)^Zr&1},be=s(),sn,Vn,er,kn={sphere:k,point:k,lineStart:Xr,lineEnd:k,polygonStart:k,polygonEnd:k};function Xr(){kn.point=Si,kn.lineEnd=vi}function vi(){kn.point=kn.lineEnd=k}function Si(Ae,_e){Ae*=b,_e*=b,sn=Ae,Vn=A(_e),er=M(_e),kn.point=ji}function ji(Ae,_e){Ae*=b,_e*=b;var pn=A(_e),an=M(_e),In=g(Ae-sn),hr=M(In),Lr=A(In),Zr=an*Lr,ei=er*pn-Vn*an*hr,Ur=Vn*pn+er*an*hr;be.add(_(R(Zr*Zr+ei*ei),Ur)),sn=Ae,Vn=pn,er=an}var Ji=function(_e){return be.reset(),ft(_e,kn),+be},za=[null,null],va={type:"LineString",coordinates:za},so=function(_e,pn){return za[0]=_e,za[1]=pn,Ji(va)},Ia={Feature:function(_e,pn){return uo(_e.geometry,pn)},FeatureCollection:function(_e,pn){for(var an=_e.features,In=-1,hr=an.length;++In<hr;)if(uo(an[In].geometry,pn))return!0;return!1}},io={Sphere:function(){return!0},Point:function(_e,pn){return ka(_e.coordinates,pn)},MultiPoint:function(_e,pn){for(var an=_e.coordinates,In=-1,hr=an.length;++In<hr;)if(ka(an[In],pn))return!0;return!1},LineString:function(_e,pn){return vo(_e.coordinates,pn)},MultiLineString:function(_e,pn){for(var an=_e.coordinates,In=-1,hr=an.length;++In<hr;)if(vo(an[In],pn))return!0;return!1},Polygon:function(_e,pn){return Vo(_e.coordinates,pn)},MultiPolygon:function(_e,pn){for(var an=_e.coordinates,In=-1,hr=an.length;++In<hr;)if(Vo(an[In],pn))return!0;return!1},GeometryCollection:function(_e,pn){for(var an=_e.geometries,In=-1,hr=an.length;++In<hr;)if(uo(an[In],pn))return!0;return!1}};function uo(Ae,_e){return Ae&&io.hasOwnProperty(Ae.type)?io[Ae.type](Ae,_e):!1}function ka(Ae,_e){return so(Ae,_e)===0}function vo(Ae,_e){var pn=so(Ae[0],Ae[1]),an=so(Ae[0],_e),In=so(_e,Ae[1]);return an+In<=pn+n}function Vo(Ae,_e){return!!Zt(Ae.map(Do),fs(_e))}function Do(Ae){return Ae=Ae.map(fs),Ae.pop(),Ae}function fs(Ae){return[Ae[0]*b,Ae[1]*b]}var mo=function(_e,pn){return(_e&&Ia.hasOwnProperty(_e.type)?Ia[_e.type]:uo)(_e,pn)};function Ga(Ae,_e,pn){var an=u.range(Ae,_e-n,pn).concat(_e);return function(In){return an.map(function(hr){return[In,hr]})}}function us(Ae,_e,pn){var an=u.range(Ae,_e-n,pn).concat(_e);return function(In){return an.map(function(hr){return[hr,In]})}}function Xo(){var Ae,_e,pn,an,In,hr,Lr,Zr,ei=10,Ur=ei,hi=90,br=360,Xt,ee,Oe,Ee,jt=2.5;function zt(){return{type:"MultiLineString",coordinates:se()}}function se(){return u.range(x(an/hi)*hi,pn,hi).map(Oe).concat(u.range(x(Zr/br)*br,Lr,br).map(Ee)).concat(u.range(x(_e/ei)*ei,Ae,ei).filter(function(ie){return g(ie%hi)>n}).map(Xt)).concat(u.range(x(hr/Ur)*Ur,In,Ur).filter(function(ie){return g(ie%br)>n}).map(ee))}return zt.lines=function(){return se().map(function(ie){return{type:"LineString",coordinates:ie}})},zt.outline=function(){return{type:"Polygon",coordinates:[Oe(an).concat(Ee(Lr).slice(1),Oe(pn).reverse().slice(1),Ee(Zr).reverse().slice(1))]}},zt.extent=function(ie){return arguments.length?zt.extentMajor(ie).extentMinor(ie):zt.extentMinor()},zt.extentMajor=function(ie){return arguments.length?(an=+ie[0][0],pn=+ie[1][0],Zr=+ie[0][1],Lr=+ie[1][1],an>pn&&(ie=an,an=pn,pn=ie),Zr>Lr&&(ie=Zr,Zr=Lr,Lr=ie),zt.precision(jt)):[[an,Zr],[pn,Lr]]},zt.extentMinor=function(ie){return arguments.length?(_e=+ie[0][0],Ae=+ie[1][0],hr=+ie[0][1],In=+ie[1][1],_e>Ae&&(ie=_e,_e=Ae,Ae=ie),hr>In&&(ie=hr,hr=In,In=ie),zt.precision(jt)):[[_e,hr],[Ae,In]]},zt.step=function(ie){return arguments.length?zt.stepMajor(ie).stepMinor(ie):zt.stepMinor()},zt.stepMajor=function(ie){return arguments.length?(hi=+ie[0],br=+ie[1],zt):[hi,br]},zt.stepMinor=function(ie){return arguments.length?(ei=+ie[0],Ur=+ie[1],zt):[ei,Ur]},zt.precision=function(ie){return arguments.length?(jt=+ie,Xt=Ga(hr,In,90),ee=us(_e,Ae,jt),Oe=Ga(Zr,Lr,90),Ee=us(an,pn,jt),zt):jt},zt.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Ta(){return Xo()()}var mn=function(_e,pn){var an=_e[0]*b,In=_e[1]*b,hr=pn[0]*b,Lr=pn[1]*b,Zr=M(In),ei=A(In),Ur=M(Lr),hi=A(Lr),br=Zr*M(an),Xt=Zr*A(an),ee=Ur*M(hr),Oe=Ur*A(hr),Ee=2*K(R(V(Lr-In)+Zr*Ur*V(hr-an))),jt=A(Ee),zt=Ee?function(se){var ie=A(se*=Ee)/jt,he=A(Ee-se)/jt,Be=he*br+ie*ee,Ze=he*Xt+ie*Oe,on=he*ei+ie*hi;return[_(Ze,Be)*v,_(on,R(Be*Be+Ze*Ze))*v]}:function(){return[an*v,In*v]};return zt.distance=Ee,zt},cr=function(_e){return _e},Wr=s(),Di=s(),Ua,yo,lo,La,Va={point:k,lineStart:k,lineEnd:k,polygonStart:function(){Va.lineStart=ts,Va.lineEnd=_u},polygonEnd:function(){Va.lineStart=Va.lineEnd=Va.point=k,Wr.add(g(Di)),Di.reset()},result:function(){var _e=Wr/2;return Wr.reset(),_e}};function ts(){Va.point=ls}function ls(Ae,_e){Va.point=Ki,Ua=lo=Ae,yo=La=_e}function Ki(Ae,_e){Di.add(La*Ae-lo*_e),lo=Ae,La=_e}function _u(){Ki(Ua,yo)}var Fo=Infinity,hs=Fo,$s=-Fo,ds=$s,vs={point:Qs,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var _e=[[Fo,hs],[$s,ds]];return $s=ds=-(hs=Fo=Infinity),_e}};function Qs(Ae,_e){Ae<Fo&&(Fo=Ae),Ae>$s&&($s=Ae),_e<hs&&(hs=_e),_e>ds&&(ds=_e)}var Mu=0,ps=0,wu=0,Ds=0,Aa=0,lu=0,Pu=0,Zu=0,vl=0,Tu,Ao,es,gs,po={point:cu,lineStart:Oo,lineEnd:qs,polygonStart:function(){po.lineStart=js,po.lineEnd=ms},polygonEnd:function(){po.point=cu,po.lineStart=Oo,po.lineEnd=qs},result:function(){var _e=vl?[Pu/vl,Zu/vl]:lu?[Ds/lu,Aa/lu]:wu?[Mu/wu,ps/wu]:[NaN,NaN];return Mu=ps=wu=Ds=Aa=lu=Pu=Zu=vl=0,_e}};function cu(Ae,_e){Mu+=Ae,ps+=_e,++wu}function Oo(){po.point=ba}function ba(Ae,_e){po.point=As,cu(es=Ae,gs=_e)}function As(Ae,_e){var pn=Ae-es,an=_e-gs,In=R(pn*pn+an*an);Ds+=In*(es+Ae)/2,Aa+=In*(gs+_e)/2,lu+=In,cu(es=Ae,gs=_e)}function qs(){po.point=cu}function js(){po.point=Au}function ms(){ks(Tu,Ao)}function Au(Ae,_e){po.point=ks,cu(Tu=es=Ae,Ao=gs=_e)}function ks(Ae,_e){var pn=Ae-es,an=_e-gs,In=R(pn*pn+an*an);Ds+=In*(es+Ae)/2,Aa+=In*(gs+_e)/2,lu+=In,In=gs*Ae-es*_e,Pu+=In*(es+Ae),Zu+=In*(gs+_e),vl+=In*3,cu(es=Ae,gs=_e)}function Ya(Ae){this._context=Ae}Ya.prototype={_radius:4.5,pointRadius:function(_e){return this._radius=_e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(_e,pn){switch(this._point){case 0:{this._context.moveTo(_e,pn),this._point=1;break}case 1:{this._context.lineTo(_e,pn);break}default:{this._context.moveTo(_e+this._radius,pn),this._context.arc(_e,pn,this._radius,0,f);break}}},result:k};var nl=s(),Zl,Al,pl,Ku,Cu,Gs={point:k,lineStart:function(){Gs.point=Cl},lineEnd:function(){Zl&&ns(Al,pl),Gs.point=k},polygonStart:function(){Zl=!0},polygonEnd:function(){Zl=null},result:function(){var _e=+nl;return nl.reset(),_e}};function Cl(Ae,_e){Gs.point=ns,Al=Ku=Ae,pl=Cu=_e}function ns(Ae,_e){Ku-=Ae,Cu-=_e,nl.add(R(Ku*Ku+Cu*Cu)),Ku=Ae,Cu=_e}function Wa(){this._string=[]}Wa.prototype={_radius:4.5,_circle:fu(4.5),pointRadius:function(_e){return(_e=+_e)!==this._radius&&(this._radius=_e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(_e,pn){switch(this._point){case 0:{this._string.push("M",_e,",",pn),this._point=1;break}case 1:{this._string.push("L",_e,",",pn);break}default:{this._circle==null&&(this._circle=fu(this._radius)),this._string.push("M",_e,",",pn,this._circle);break}}},result:function(){if(this._string.length){var _e=this._string.join("");return this._string=[],_e}else return null}};function fu(Ae){return"m0,"+Ae+"a"+Ae+","+Ae+" 0 1,1 0,"+-2*Ae+"a"+Ae+","+Ae+" 0 1,1 0,"+2*Ae+"z"}var Xu=function(_e,pn){var an=4.5,In,hr;function Lr(Zr){return Zr&&(typeof an=="function"&&hr.pointRadius(+an.apply(this,arguments)),ft(Zr,In(hr))),hr.result()}return Lr.area=function(Zr){return ft(Zr,In(Va)),Va.result()},Lr.measure=function(Zr){return ft(Zr,In(Gs)),Gs.result()},Lr.bounds=function(Zr){return ft(Zr,In(vs)),vs.result()},Lr.centroid=function(Zr){return ft(Zr,In(po)),po.result()},Lr.projection=function(Zr){return arguments.length?(In=Zr==null?(_e=null,cr):(_e=Zr).stream,Lr):_e},Lr.context=function(Zr){return arguments.length?(hr=Zr==null?(pn=null,new Wa):new Ya(pn=Zr),typeof an!="function"&&hr.pointRadius(an),Lr):pn},Lr.pointRadius=function(Zr){return arguments.length?(an=typeof Zr=="function"?Zr:(hr.pointRadius(+Zr),+Zr),Lr):an},Lr.projection(_e).context(pn)},Ll=function(_e,pn,an,In){return function(hr,Lr){var Zr=pn(Lr),ei=hr.invert(In[0],In[1]),Ur=Mo(),hi=pn(Ur),br=!1,Xt,ee,Oe,Ee={point:jt,lineStart:se,lineEnd:ie,polygonStart:function(){Ee.point=he,Ee.lineStart=Be,Ee.lineEnd=Ze,ee=[],Xt=[]},polygonEnd:function(){Ee.point=jt,Ee.lineStart=se,Ee.lineEnd=ie,ee=u.merge(ee);var $e=Zt(Xt,ei);ee.length?(br||(Lr.polygonStart(),br=!0),Ro(ee,Vs,$e,an,Lr)):$e&&(br||(Lr.polygonStart(),br=!0),Lr.lineStart(),an(null,null,1,Lr),Lr.lineEnd()),br&&(Lr.polygonEnd(),br=!1),ee=Xt=null},sphere:function(){Lr.polygonStart(),Lr.lineStart(),an(null,null,1,Lr),Lr.lineEnd(),Lr.polygonEnd()}};function jt(on,$e){var gn=hr(on,$e);_e(on=gn[0],$e=gn[1])&&Lr.point(on,$e)}function zt(on,$e){var gn=hr(on,$e);Zr.point(gn[0],gn[1])}function se(){Ee.point=zt,Zr.lineStart()}function ie(){Ee.point=jt,Zr.lineEnd()}function he(on,$e){Oe.push([on,$e]);var gn=hr(on,$e);hi.point(gn[0],gn[1])}function Be(){hi.lineStart(),Oe=[]}function Ze(){he(Oe[0][0],Oe[0][1]),hi.lineEnd();var on=hi.clean(),$e=Ur.result(),gn,vn=$e.length,Xn,Wn,Jn;if(Oe.pop(),Xt.push(Oe),Oe=null,!!vn){if(on&1){if(Wn=$e[0],(Xn=Wn.length-1)>0){for(br||(Lr.polygonStart(),br=!0),Lr.lineStart(),gn=0;gn<Xn;++gn)Lr.point((Jn=Wn[gn])[0],Jn[1]);Lr.lineEnd()}return}vn>1&&on&2&&$e.push($e.pop().concat($e.shift())),ee.push($e.filter(Uu))}}return Ee}};function Uu(Ae){return Ae.length>1}function Vs(Ae,_e){return((Ae=Ae.x)[0]<0?Ae[1]-o-n:o-Ae[1])-((_e=_e.x)[0]<0?_e[1]-o-n:o-_e[1])}var rl=Ll(function(){return!0},hu,Ws,[-a,-o]);function hu(Ae){var _e=NaN,pn=NaN,an=NaN,In;return{lineStart:function(){Ae.lineStart(),In=1},point:function(Lr,Zr){var ei=Lr>0?a:-a,Ur=g(Lr-_e);g(Ur-a)<n?(Ae.point(_e,pn=(pn+Zr)/2>0?o:-o),Ae.point(an,pn),Ae.lineEnd(),Ae.lineStart(),Ae.point(ei,pn),Ae.point(Lr,pn),In=0):an!==ei&&Ur>=a&&(g(_e-an)<n&&(_e-=an*n),g(Lr-ei)<n&&(Lr-=ei*n),pn=Ss(_e,pn,Lr,Zr),Ae.point(an,pn),Ae.lineEnd(),Ae.lineStart(),Ae.point(ei,pn),In=0),Ae.point(_e=Lr,pn=Zr),an=ei},lineEnd:function(){Ae.lineEnd(),_e=pn=NaN},clean:function(){return 2-In}}}function Ss(Ae,_e,pn,an){var In,hr,Lr=A(Ae-pn);return g(Lr)>n?y((A(_e)*(hr=M(an))*A(pn)-A(an)*(In=M(_e))*A(Ae))/(In*hr*Lr)):(_e+an)/2}function Ws(Ae,_e,pn,an){var In;if(Ae==null)In=pn*o,an.point(-a,In),an.point(0,In),an.point(a,In),an.point(a,0),an.point(a,-In),an.point(0,-In),an.point(-a,-In),an.point(-a,0),an.point(-a,In);else if(g(Ae[0]-_e[0])>n){var hr=Ae[0]<_e[0]?a:-a;In=pn*hr/2,an.point(-hr,In),an.point(0,In),an.point(hr,In)}else an.point(_e[0],_e[1])}var gl=function(_e,pn){var an=M(_e),In=an>0,hr=g(an)>n;function Lr(br,Xt,ee,Oe){ro(Oe,_e,pn,ee,br,Xt)}function Zr(br,Xt){return M(br)*M(Xt)>an}function ei(br){var Xt,ee,Oe,Ee,jt;return{lineStart:function(){Ee=Oe=!1,jt=1},point:function(se,ie){var he=[se,ie],Be,Ze=Zr(se,ie),on=In?Ze?0:hi(se,ie):Ze?hi(se+(se<0?a:-a),ie):0;if(!Xt&&(Ee=Oe=Ze)&&br.lineStart(),Ze!==Oe&&(Be=Ur(Xt,he),(!Be||Pa(Xt,Be)||Pa(he,Be))&&(he[0]+=n,he[1]+=n,Ze=Zr(he[0],he[1]))),Ze!==Oe)jt=0,Ze?(br.lineStart(),Be=Ur(he,Xt),br.point(Be[0],Be[1])):(Be=Ur(Xt,he),br.point(Be[0],Be[1]),br.lineEnd()),Xt=Be;else if(hr&&Xt&&In^Ze){var $e;!(on&ee)&&($e=Ur(he,Xt,!0))&&(jt=0,In?(br.lineStart(),br.point($e[0][0],$e[0][1]),br.point($e[1][0],$e[1][1]),br.lineEnd()):(br.point($e[1][0],$e[1][1]),br.lineEnd(),br.lineStart(),br.point($e[0][0],$e[0][1])))}Ze&&(!Xt||!Pa(Xt,he))&&br.point(he[0],he[1]),Xt=he,Oe=Ze,ee=on},lineEnd:function(){Oe&&br.lineEnd(),Xt=null},clean:function(){return jt|(Ee&&Oe)<<1}}}function Ur(br,Xt,ee){var Oe=Y(br),Ee=Y(Xt),jt=[1,0,0],zt=ot(Oe,Ee),se=rt(zt,zt),ie=zt[0],he=se-ie*ie;if(!he)return!ee&&br;var Be=an*se/he,Ze=-an*ie/he,on=ot(jt,zt),$e=Pt(jt,Be),gn=Pt(zt,Ze);$($e,gn);var vn=on,Xn=rt($e,vn),Wn=rt(vn,vn),Jn=Xn*Xn-Wn*(rt($e,$e)-1);if(!(Jn<0)){var Hn=R(Jn),fr=Pt(vn,(-Xn-Hn)/Wn);if($(fr,$e),fr=bt(fr),!ee)return fr;var xr=br[0],Vr=Xt[0],gi=br[1],Fr=Xt[1],ai;Vr<xr&&(ai=xr,xr=Vr,Vr=ai);var yi=Vr-xr,Ui=g(yi-a)<n,Pi=Ui||yi<n;if(!Ui&&Fr<gi&&(ai=gi,gi=Fr,Fr=ai),Pi?Ui?gi+Fr>0^fr[1]<(g(fr[0]-xr)<n?gi:Fr):gi<=fr[1]&&fr[1]<=Fr:yi>a^(xr<=fr[0]&&fr[0]<=Vr)){var pa=Pt(vn,(-Xn+Hn)/Wn);return $(pa,$e),[fr,bt(pa)]}}}function hi(br,Xt){var ee=In?_e:a-_e,Oe=0;return br<-ee?Oe|=1:br>ee&&(Oe|=2),Xt<-ee?Oe|=4:Xt>ee&&(Oe|=8),Oe}return Ll(Zr,ei,Lr,In?[0,-_e]:[-a,_e-a])},Iu=function(_e){return{stream:Lu(_e)}};function Lu(Ae){return function(_e){var pn=new du;for(var an in Ae)pn[an]=Ae[an];return pn.stream=_e,pn}}function du(){}du.prototype={constructor:du,point:function(_e,pn){this.stream.point(_e,pn)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function vu(Ae,_e,pn){var an=_e[1][0]-_e[0][0],In=_e[1][1]-_e[0][1],hr=Ae.clipExtent&&Ae.clipExtent();Ae.scale(150).translate([0,0]),hr!=null&&Ae.clipExtent(null),ft(pn,Ae.stream(vs));var Lr=vs.result(),Zr=Math.min(an/(Lr[1][0]-Lr[0][0]),In/(Lr[1][1]-Lr[0][1])),ei=+_e[0][0]+(an-Zr*(Lr[1][0]+Lr[0][0]))/2,Ur=+_e[0][1]+(In-Zr*(Lr[1][1]+Lr[0][1]))/2;return hr!=null&&Ae.clipExtent(hr),Ae.scale(Zr*150).translate([ei,Ur])}function pu(Ae,_e,pn){return vu(Ae,[[0,0],_e],pn)}var Ol=16,rc=M(30*b),ql=function(_e,pn){return+pn?Nl(_e,pn):gu(_e)};function gu(Ae){return Lu({point:function(pn,an){pn=Ae(pn,an),this.stream.point(pn[0],pn[1])}})}function Nl(Ae,_e){function pn(an,In,hr,Lr,Zr,ei,Ur,hi,br,Xt,ee,Oe,Ee,jt){var zt=Ur-an,se=hi-In,ie=zt*zt+se*se;if(ie>4*_e&&Ee--){var he=Lr+Xt,Be=Zr+ee,Ze=ei+Oe,on=R(he*he+Be*Be+Ze*Ze),$e=K(Ze/=on),gn=g(g(Ze)-1)<n||g(hr-br)<n?(hr+br)/2:_(Be,he),vn=Ae(gn,$e),Xn=vn[0],Wn=vn[1],Jn=Xn-an,Hn=Wn-In,fr=se*Jn-zt*Hn;(fr*fr/ie>_e||g((zt*Jn+se*Hn)/ie-.5)>.3||Lr*Xt+Zr*ee+ei*Oe<rc)&&(pn(an,In,hr,Lr,Zr,ei,Xn,Wn,gn,he/=on,Be/=on,Ze,Ee,jt),jt.point(Xn,Wn),pn(Xn,Wn,gn,he,Be,Ze,Ur,hi,br,Xt,ee,Oe,Ee,jt))}}return function(an){var In,hr,Lr,Zr,ei,Ur,hi,br,Xt,ee,Oe,Ee,jt={point:zt,lineStart:se,lineEnd:he,polygonStart:function(){an.polygonStart(),jt.lineStart=Be},polygonEnd:function(){an.polygonEnd(),jt.lineStart=se}};function zt($e,gn){$e=Ae($e,gn),an.point($e[0],$e[1])}function se(){br=NaN,jt.point=ie,an.lineStart()}function ie($e,gn){var vn=Y([$e,gn]),Xn=Ae($e,gn);pn(br,Xt,hi,ee,Oe,Ee,br=Xn[0],Xt=Xn[1],hi=$e,ee=vn[0],Oe=vn[1],Ee=vn[2],Ol,an),an.point(br,Xt)}function he(){jt.point=zt,an.lineEnd()}function Be(){se(),jt.point=Ze,jt.lineEnd=on}function Ze($e,gn){ie(In=$e,gn),hr=br,Lr=Xt,Zr=ee,ei=Oe,Ur=Ee,jt.point=ie}function on(){pn(br,Xt,hi,ee,Oe,Ee,hr,Lr,In,Zr,ei,Ur,Ol,an),jt.lineEnd=he,he()}return jt}}var tc=Lu({point:function(_e,pn){this.stream.point(_e*b,pn*b)}});function Ou(Ae){return ml(function(){return Ae})()}function ml(Ae){var _e,pn=150,an=480,In=250,hr,Lr,Zr=0,ei=0,Ur=0,hi=0,br=0,Xt,ee,Oe=null,Ee=rl,jt=null,zt,se,ie,he=cr,Be=.5,Ze=ql(Xn,Be),on,$e;function gn(Hn){return Hn=ee(Hn[0]*b,Hn[1]*b),[Hn[0]*pn+hr,Lr-Hn[1]*pn]}function vn(Hn){return Hn=ee.invert((Hn[0]-hr)/pn,(Lr-Hn[1])/pn),Hn&&[Hn[0]*v,Hn[1]*v]}function Xn(Hn,fr){return Hn=_e(Hn,fr),[Hn[0]*pn+hr,Lr-Hn[1]*pn]}gn.stream=function(Hn){return on&&$e===Hn?on:on=tc(Ee(Xt,Ze(he($e=Hn))))},gn.clipAngle=function(Hn){return arguments.length?(Ee=+Hn?gl(Oe=Hn*b,6*b):(Oe=null,rl),Jn()):Oe*v},gn.clipExtent=function(Hn){return arguments.length?(he=Hn==null?(jt=zt=se=ie=null,cr):Rs(jt=+Hn[0][0],zt=+Hn[0][1],se=+Hn[1][0],ie=+Hn[1][1]),Jn()):jt==null?null:[[jt,zt],[se,ie]]},gn.scale=function(Hn){return arguments.length?(pn=+Hn,Wn()):pn},gn.translate=function(Hn){return arguments.length?(an=+Hn[0],In=+Hn[1],Wn()):[an,In]},gn.center=function(Hn){return arguments.length?(Zr=Hn[0]%360*b,ei=Hn[1]%360*b,Wn()):[Zr*v,ei*v]},gn.rotate=function(Hn){return arguments.length?(Ur=Hn[0]%360*b,hi=Hn[1]%360*b,br=Hn.length>2?Hn[2]%360*b:0,Wn()):[Ur*v,hi*v,br*v]},gn.precision=function(Hn){return arguments.length?(Ze=ql(Xn,Be=Hn*Hn),Jn()):R(Be)},gn.fitExtent=function(Hn,fr){return vu(gn,Hn,fr)},gn.fitSize=function(Hn,fr){return pu(gn,Hn,fr)};function Wn(){ee=zr(Xt=Oa(Ur,hi,br),_e);var Hn=_e(Zr,ei);return hr=an-Hn[0]*pn,Lr=In+Hn[1]*pn,Jn()}function Jn(){return on=$e=null,gn}return function(){return _e=Ae.apply(this,arguments),gn.invert=_e.invert&&vn,Wn()}}function wl(Ae){var _e=0,pn=a/3,an=ml(Ae),In=an(_e,pn);return In.parallels=function(hr){return arguments.length?an(_e=hr[0]*b,pn=hr[1]*b):[_e*v,pn*v]},In}function Bs(Ae){var _e=M(Ae);function pn(an,In){return[an*_e,A(In)/_e]}return pn.invert=function(an,In){return[an/_e,K(In*_e)]},pn}function ao(Ae,_e){var pn=A(Ae),an=(pn+A(_e))/2;if(g(an)<n)return Bs(Ae);var In=1+pn*(2*an-pn),hr=R(In)/an;function Lr(Zr,ei){var Ur=R(In-2*an*A(ei))/an;return[Ur*A(Zr*=an),hr-Ur*M(Zr)]}return Lr.invert=function(Zr,ei){var Ur=hr-ei;return[_(Zr,g(Ur))/an*O(Ur),K((In-(Zr*Zr+Ur*Ur)*an*an)/(2*an))]},Lr}var yl=function(){return wl(ao).scale(155.424).center([0,33.6442])},il=function(){return yl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Hs(Ae){var _e=Ae.length;return{point:function(an,In){for(var hr=-1;++hr<_e;)Ae[hr].point(an,In)},sphere:function(){for(var an=-1;++an<_e;)Ae[an].sphere()},lineStart:function(){for(var an=-1;++an<_e;)Ae[an].lineStart()},lineEnd:function(){for(var an=-1;++an<_e;)Ae[an].lineEnd()},polygonStart:function(){for(var an=-1;++an<_e;)Ae[an].polygonStart()},polygonEnd:function(){for(var an=-1;++an<_e;)Ae[an].polygonEnd()}}}var Ra=function(){var _e,pn,an=il(),In,hr=yl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Lr,Zr=yl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ei,Ur,hi={point:function(Oe,Ee){Ur=[Oe,Ee]}};function br(ee){var Oe=ee[0],Ee=ee[1];return Ur=null,In.point(Oe,Ee),Ur||(Lr.point(Oe,Ee),Ur)||(ei.point(Oe,Ee),Ur)}br.invert=function(ee){var Oe=an.scale(),Ee=an.translate(),jt=(ee[0]-Ee[0])/Oe,zt=(ee[1]-Ee[1])/Oe;return(zt>=.12&&zt<.234&&jt>=-.425&&jt<-.214?hr:zt>=.166&&zt<.234&&jt>=-.214&&jt<-.115?Zr:an).invert(ee)},br.stream=function(ee){return _e&&pn===ee?_e:_e=Hs([an.stream(pn=ee),hr.stream(ee),Zr.stream(ee)])},br.precision=function(ee){return arguments.length?(an.precision(ee),hr.precision(ee),Zr.precision(ee),Xt()):an.precision()},br.scale=function(ee){return arguments.length?(an.scale(ee),hr.scale(ee*.35),Zr.scale(ee),br.translate(an.translate())):an.scale()},br.translate=function(ee){if(!arguments.length)return an.translate();var Oe=an.scale(),Ee=+ee[0],jt=+ee[1];return In=an.translate(ee).clipExtent([[Ee-.455*Oe,jt-.238*Oe],[Ee+.455*Oe,jt+.238*Oe]]).stream(hi),Lr=hr.translate([Ee-.307*Oe,jt+.201*Oe]).clipExtent([[Ee-.425*Oe+n,jt+.12*Oe+n],[Ee-.214*Oe-n,jt+.234*Oe-n]]).stream(hi),ei=Zr.translate([Ee-.205*Oe,jt+.212*Oe]).clipExtent([[Ee-.214*Oe+n,jt+.166*Oe+n],[Ee-.115*Oe-n,jt+.234*Oe-n]]).stream(hi),Xt()},br.fitExtent=function(ee,Oe){return vu(br,ee,Oe)},br.fitSize=function(ee,Oe){return pu(br,ee,Oe)};function Xt(){return _e=pn=null,br}return br.scale(1070)};function xo(Ae){return function(_e,pn){var an=M(_e),In=M(pn),hr=Ae(an*In);return[hr*In*A(_e),hr*A(pn)]}}function ru(Ae){return function(_e,pn){var an=R(_e*_e+pn*pn),In=Ae(an),hr=A(In),Lr=M(In);return[_(_e*hr,an*Lr),K(an&&pn*hr/an)]}}var xl=xo(function(Ae){return R(2/(1+Ae))});xl.invert=ru(function(Ae){return 2*K(Ae/2)});var al=function(){return Ou(xl).scale(124.75).clipAngle(180-.001)},ku=xo(function(Ae){return(Ae=N(Ae))&&Ae/A(Ae)});ku.invert=ru(function(Ae){return Ae});var zl=function(){return Ou(ku).scale(79.4188).clipAngle(180-.001)};function cs(Ae,_e){return[Ae,S(H((o+_e)/2))]}cs.invert=function(Ae,_e){return[Ae,2*y(m(_e))-o]};var bl=function(){return mu(cs).scale(961/f)};function mu(Ae){var _e=Ou(Ae),pn=_e.center,an=_e.scale,In=_e.translate,hr=_e.clipExtent,Lr=null,Zr,ei,Ur;_e.scale=function(br){return arguments.length?(an(br),hi()):an()},_e.translate=function(br){return arguments.length?(In(br),hi()):In()},_e.center=function(br){return arguments.length?(pn(br),hi()):pn()},_e.clipExtent=function(br){return arguments.length?(br==null?Lr=Zr=ei=Ur=null:(Lr=+br[0][0],Zr=+br[0][1],ei=+br[1][0],Ur=+br[1][1]),hi()):Lr==null?null:[[Lr,Zr],[ei,Ur]]};function hi(){var br=a*an(),Xt=_e(ha(_e.rotate()).invert([0,0]));return hr(Lr==null?[[Xt[0]-br,Xt[1]-br],[Xt[0]+br,Xt[1]+br]]:Ae===cs?[[Math.max(Xt[0]-br,Lr),Zr],[Math.min(Xt[0]+br,ei),Ur]]:[[Lr,Math.max(Xt[1]-br,Zr)],[ei,Math.min(Xt[1]+br,Ur)]])}return hi()}function Fs(Ae){return H((o+Ae)/2)}function Wo(Ae,_e){var pn=M(Ae),an=Ae===_e?A(Ae):S(pn/M(_e))/S(Fs(_e)/Fs(Ae)),In=pn*P(Fs(Ae),an)/an;if(!an)return cs;function hr(Lr,Zr){In>0?Zr<-o+n&&(Zr=-o+n):Zr>o-n&&(Zr=o-n);var ei=In/P(Fs(Zr),an);return[ei*A(an*Lr),In-ei*M(an*Lr)]}return hr.invert=function(Lr,Zr){var ei=In-Zr,Ur=O(an)*R(Lr*Lr+ei*ei);return[_(Lr,g(ei))/an*O(ei),2*y(P(In/Ur,1/an))-o]},hr}var _s=function(){return wl(Wo).scale(109.5).parallels([30,30])};function iu(Ae,_e){return[Ae,_e]}iu.invert=iu;var Ho=function(){return Ou(iu).scale(152.63)};function Ni(Ae,_e){var pn=M(Ae),an=Ae===_e?A(Ae):(pn-M(_e))/(_e-Ae),In=pn/an+Ae;if(g(an)<n)return iu;function hr(Lr,Zr){var ei=In-Zr,Ur=an*Lr;return[ei*A(Ur),In-ei*M(Ur)]}return hr.invert=function(Lr,Zr){var ei=In-Zr;return[_(Lr,g(ei))/an*O(ei),In-O(an)*R(Lr*Lr+ei*ei)]},hr}var Ns=function(){return wl(Ni).scale(131.154).center([0,13.9389])};function El(Ae,_e){var pn=M(_e),an=M(Ae)*pn;return[pn*A(Ae)/an,A(_e)/an]}El.invert=ru(y);var ol=function(){return Ou(El).scale(144.049).clipAngle(60)};function No(Ae,_e,pn,an){return Ae===1&&_e===1&&pn===0&&an===0?cr:Lu({point:function(hr,Lr){this.stream.point(hr*Ae+pn,Lr*_e+an)}})}var Co=function(){var _e=1,pn=0,an=0,In=1,hr=1,Lr=cr,Zr=null,ei,Ur,hi,br=cr,Xt,ee,Oe;function Ee(){return Xt=ee=null,Oe}return Oe={stream:function(zt){return Xt&&ee===zt?Xt:Xt=Lr(br(ee=zt))},clipExtent:function(zt){return arguments.length?(br=zt==null?(Zr=ei=Ur=hi=null,cr):Rs(Zr=+zt[0][0],ei=+zt[0][1],Ur=+zt[1][0],hi=+zt[1][1]),Ee()):Zr==null?null:[[Zr,ei],[Ur,hi]]},scale:function(zt){return arguments.length?(Lr=No((_e=+zt)*In,_e*hr,pn,an),Ee()):_e},translate:function(zt){return arguments.length?(Lr=No(_e*In,_e*hr,pn=+zt[0],an=+zt[1]),Ee()):[pn,an]},reflectX:function(zt){return arguments.length?(Lr=No(_e*(In=zt?-1:1),_e*hr,pn,an),Ee()):In<0},reflectY:function(zt){return arguments.length?(Lr=No(_e*In,_e*(hr=zt?-1:1),pn,an),Ee()):hr<0},fitExtent:function(zt,se){return vu(Oe,zt,se)},fitSize:function(zt,se){return pu(Oe,zt,se)}}};function tu(Ae,_e){return[M(_e)*A(Ae),A(_e)]}tu.invert=ru(K);var mi=function(){return Ou(tu).scale(249.5).clipAngle(90+n)};function Ru(Ae,_e){var pn=M(_e),an=1+M(Ae)*pn;return[pn*A(Ae)/an,A(_e)/an]}Ru.invert=ru(function(Ae){return 2*y(Ae)});var Du=function(){return Ou(Ru).scale(250).clipAngle(142)};function ju(Ae,_e){return[S(H((o+_e)/2)),-Ae]}ju.invert=function(Ae,_e){return[-_e,2*y(m(Ae))-o]};var Cs=function(){var _e=mu(ju),pn=_e.center,an=_e.rotate;return _e.center=function(In){return arguments.length?pn([-In[1],In[0]]):(In=pn(),[In[1],-In[0]])},_e.rotate=function(In){return arguments.length?an([In[0],In[1],In.length>2?In[2]+90:90]):(In=an(),[In[0],In[1],In[2]-90])},an([0,0,90]).scale(159.155)};t.geoArea=st,t.geoBounds=te,t.geoCentroid=Cr,t.geoCircle=$a,t.geoClipExtent=je,t.geoContains=mo,t.geoDistance=so,t.geoGraticule=Xo,t.geoGraticule10=Ta,t.geoInterpolate=mn,t.geoLength=Ji,t.geoPath=Xu,t.geoAlbers=il,t.geoAlbersUsa=Ra,t.geoAzimuthalEqualArea=al,t.geoAzimuthalEqualAreaRaw=xl,t.geoAzimuthalEquidistant=zl,t.geoAzimuthalEquidistantRaw=ku,t.geoConicConformal=_s,t.geoConicConformalRaw=Wo,t.geoConicEqualArea=yl,t.geoConicEqualAreaRaw=ao,t.geoConicEquidistant=Ns,t.geoConicEquidistantRaw=Ni,t.geoEquirectangular=Ho,t.geoEquirectangularRaw=iu,t.geoGnomonic=ol,t.geoGnomonicRaw=El,t.geoIdentity=Co,t.geoProjection=Ou,t.geoProjectionMutator=ml,t.geoMercator=bl,t.geoMercatorRaw=cs,t.geoOrthographic=mi,t.geoOrthographicRaw=tu,t.geoStereographic=Du,t.geoStereographicRaw=Ru,t.geoTransverseMercator=Cs,t.geoTransverseMercatorRaw=ju,t.geoRotation=ha,t.geoStream=ft,t.geoTransform=Iu,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";var s=1e-6,h=1e-12,r=Math.PI,c=r/2,n=r/4,i=r*2,a=180/r,o=r/180,l=Math.abs,f=Math.atan,v=Math.atan2,b=Math.cos,g=Math.ceil,y=Math.exp,_=Math.hypot,M=Math.log,x=Math.pow,m=Math.sin,S=Math.sign||function(Xt){return Xt>0?1:Xt<0?-1:0},P=Math.sqrt,A=Math.tan;function O(Xt){return Xt>1?0:Xt<-1?r:Math.acos(Xt)}function R(Xt){return Xt>1?c:Xt<-1?-c:Math.asin(Xt)}function H(Xt){return(Xt=m(Xt/2))*Xt}function N(){}function K(Xt,ee){Xt&&k.hasOwnProperty(Xt.type)&&k[Xt.type](Xt,ee)}var V={Feature:function(ee,Oe){K(ee.geometry,Oe)},FeatureCollection:function(ee,Oe){for(var Ee=ee.features,jt=-1,zt=Ee.length;++jt<zt;)K(Ee[jt].geometry,Oe)}},k={Sphere:function(ee,Oe){Oe.sphere()},Point:function(ee,Oe){ee=ee.coordinates,Oe.point(ee[0],ee[1],ee[2])},MultiPoint:function(ee,Oe){for(var Ee=ee.coordinates,jt=-1,zt=Ee.length;++jt<zt;)ee=Ee[jt],Oe.point(ee[0],ee[1],ee[2])},LineString:function(ee,Oe){Z(ee.coordinates,Oe,0)},MultiLineString:function(ee,Oe){for(var Ee=ee.coordinates,jt=-1,zt=Ee.length;++jt<zt;)Z(Ee[jt],Oe,0)},Polygon:function(ee,Oe){X(ee.coordinates,Oe)},MultiPolygon:function(ee,Oe){for(var Ee=ee.coordinates,jt=-1,zt=Ee.length;++jt<zt;)X(Ee[jt],Oe)},GeometryCollection:function(ee,Oe){for(var Ee=ee.geometries,jt=-1,zt=Ee.length;++jt<zt;)K(Ee[jt],Oe)}};function Z(Xt,ee,Oe){var Ee=-1,jt=Xt.length-Oe,zt;for(ee.lineStart();++Ee<jt;)zt=Xt[Ee],ee.point(zt[0],zt[1],zt[2]);ee.lineEnd()}function X(Xt,ee){var Oe=-1,Ee=Xt.length;for(ee.polygonStart();++Oe<Ee;)Z(Xt[Oe],ee,1);ee.polygonEnd()}function at(Xt,ee){Xt&&V.hasOwnProperty(Xt.type)?V[Xt.type](Xt,ee):K(Xt,ee)}var pt=new u.Adder,gt=new u.Adder,ft,Rt,Nt,Dt,St,xt={point:N,lineStart:N,lineEnd:N,polygonStart:function(){pt=new u.Adder,xt.lineStart=Ot,xt.lineEnd=it},polygonEnd:function(){var ee=+pt;gt.add(ee<0?i+ee:ee),this.lineStart=this.lineEnd=this.point=N},sphere:function(){gt.add(i)}};function Ot(){xt.point=At}function it(){z(ft,Rt)}function At(Xt,ee){xt.point=z,ft=Xt,Rt=ee,Xt*=o,ee*=o,Nt=Xt,Dt=b(ee=ee/2+n),St=m(ee)}function z(Xt,ee){Xt*=o,ee*=o,ee=ee/2+n;var Oe=Xt-Nt,Ee=Oe>=0?1:-1,jt=Ee*Oe,zt=b(ee),se=m(ee),ie=St*se,he=Dt*zt+ie*b(jt),Be=ie*Ee*m(jt);pt.add(v(Be,he)),Nt=Xt,Dt=zt,St=se}function q(Xt){return gt=new u.Adder,at(Xt,xt),gt*2}function mt(Xt){return[v(Xt[1],Xt[0]),R(Xt[2])]}function et(Xt){var ee=Xt[0],Oe=Xt[1],Ee=b(Oe);return[Ee*b(ee),Ee*m(ee),m(Oe)]}function st(Xt,ee){return Xt[0]*ee[0]+Xt[1]*ee[1]+Xt[2]*ee[2]}function bt(Xt,ee){return[Xt[1]*ee[2]-Xt[2]*ee[1],Xt[2]*ee[0]-Xt[0]*ee[2],Xt[0]*ee[1]-Xt[1]*ee[0]]}function Y(Xt,ee){Xt[0]+=ee[0],Xt[1]+=ee[1],Xt[2]+=ee[2]}function rt(Xt,ee){return[Xt[0]*ee,Xt[1]*ee,Xt[2]*ee]}function ot(Xt){var ee=P(Xt[0]*Xt[0]+Xt[1]*Xt[1]+Xt[2]*Xt[2]);Xt[0]/=ee,Xt[1]/=ee,Xt[2]/=ee}var $,Pt,yt,Ft,Qt,ne,Wt,$t,De,Je,Qe,de={point:ue,lineStart:cn,lineEnd:Fn,polygonStart:function(){de.point=wn,de.lineStart=en,de.lineEnd=tn,De=new u.Adder,xt.polygonStart()},polygonEnd:function(){xt.polygonEnd(),de.point=ue,de.lineStart=cn,de.lineEnd=Fn,pt<0?($=-(yt=180),Pt=-(Ft=90)):De>s?Ft=90:De<-s&&(Pt=-90),Qe[0]=$,Qe[1]=yt},sphere:function(){$=-(yt=180),Pt=-(Ft=90)}};function ue(Xt,ee){Je.push(Qe=[$=Xt,yt=Xt]),ee<Pt&&(Pt=ee),ee>Ft&&(Ft=ee)}function Ne(Xt,ee){var Oe=et([Xt*o,ee*o]);if($t){var Ee=bt($t,Oe),jt=[Ee[1],-Ee[0],0],zt=bt(jt,Ee);ot(zt),zt=mt(zt);var se=Xt-Qt,ie=se>0?1:-1,he=zt[0]*a*ie,Be,Ze=l(se)>180;Ze^(ie*Qt<he&&he<ie*Xt)?(Be=zt[1]*a,Be>Ft&&(Ft=Be)):(he=(he+360)%360-180,Ze^(ie*Qt<he&&he<ie*Xt)?(Be=-zt[1]*a,Be<Pt&&(Pt=Be)):(ee<Pt&&(Pt=ee),ee>Ft&&(Ft=ee))),Ze?Xt<Qt?xn($,Xt)>xn($,yt)&&(yt=Xt):xn(Xt,yt)>xn($,yt)&&($=Xt):yt>=$?(Xt<$&&($=Xt),Xt>yt&&(yt=Xt)):Xt>Qt?xn($,Xt)>xn($,yt)&&(yt=Xt):xn(Xt,yt)>xn($,yt)&&($=Xt)}else Je.push(Qe=[$=Xt,yt=Xt]);ee<Pt&&(Pt=ee),ee>Ft&&(Ft=ee),$t=Oe,Qt=Xt}function cn(){de.point=Ne}function Fn(){Qe[0]=$,Qe[1]=yt,de.point=ue,$t=null}function wn(Xt,ee){if($t){var Oe=Xt-Qt;De.add(l(Oe)>180?Oe+(Oe>0?360:-360):Oe)}else ne=Xt,Wt=ee;xt.point(Xt,ee),Ne(Xt,ee)}function en(){xt.lineStart()}function tn(){wn(ne,Wt),xt.lineEnd(),l(De)>s&&($=-(yt=180)),Qe[0]=$,Qe[1]=yt,$t=null}function xn(Xt,ee){return(ee-=Xt)<0?ee+360:ee}function Bn(Xt,ee){return Xt[0]-ee[0]}function vr(Xt,ee){return Xt[0]<=Xt[1]?Xt[0]<=ee&&ee<=Xt[1]:ee<Xt[0]||Xt[1]<ee}function li(Xt){var ee,Oe,Ee,jt,zt,se,ie;if(Ft=yt=-($=Pt=Infinity),Je=[],at(Xt,de),Oe=Je.length){for(Je.sort(Bn),ee=1,Ee=Je[0],zt=[Ee];ee<Oe;++ee)jt=Je[ee],vr(Ee,jt[0])||vr(Ee,jt[1])?(xn(Ee[0],jt[1])>xn(Ee[0],Ee[1])&&(Ee[1]=jt[1]),xn(jt[0],Ee[1])>xn(Ee[0],Ee[1])&&(Ee[0]=jt[0])):zt.push(Ee=jt);for(se=-Infinity,Oe=zt.length-1,ee=0,Ee=zt[Oe];ee<=Oe;Ee=jt,++ee)jt=zt[ee],(ie=xn(Ee[1],jt[0]))>se&&(se=ie,$=jt[0],yt=Ee[1])}return Je=Qe=null,$===Infinity||Pt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[$,Pt],[yt,Ft]]}var Me,Pe,te,ge,Ht,re,Te,ae,xe,qe,zn,ar,_n,Cn,Or,Ar,hn={sphere:N,point:Pr,lineStart:Re,lineEnd:dn,polygonStart:function(){hn.lineStart=En,hn.lineEnd=Dn},polygonEnd:function(){hn.lineStart=Re,hn.lineEnd=dn}};function Pr(Xt,ee){Xt*=o,ee*=o;var Oe=b(ee);yr(Oe*b(Xt),Oe*m(Xt),m(ee))}function yr(Xt,ee,Oe){++Me,te+=(Xt-te)/Me,ge+=(ee-ge)/Me,Ht+=(Oe-Ht)/Me}function Re(){hn.point=We}function We(Xt,ee){Xt*=o,ee*=o;var Oe=b(ee);Cn=Oe*b(Xt),Or=Oe*m(Xt),Ar=m(ee),hn.point=Ye,yr(Cn,Or,Ar)}function Ye(Xt,ee){Xt*=o,ee*=o;var Oe=b(ee),Ee=Oe*b(Xt),jt=Oe*m(Xt),zt=m(ee),se=v(P((se=Or*zt-Ar*jt)*se+(se=Ar*Ee-Cn*zt)*se+(se=Cn*jt-Or*Ee)*se),Cn*Ee+Or*jt+Ar*zt);Pe+=se,re+=se*(Cn+(Cn=Ee)),Te+=se*(Or+(Or=jt)),ae+=se*(Ar+(Ar=zt)),yr(Cn,Or,Ar)}function dn(){hn.point=Pr}function En(){hn.point=Sn}function Dn(){Nn(ar,_n),hn.point=Pr}function Sn(Xt,ee){ar=Xt,_n=ee,Xt*=o,ee*=o,hn.point=Nn;var Oe=b(ee);Cn=Oe*b(Xt),Or=Oe*m(Xt),Ar=m(ee),yr(Cn,Or,Ar)}function Nn(Xt,ee){Xt*=o,ee*=o;var Oe=b(ee),Ee=Oe*b(Xt),jt=Oe*m(Xt),zt=m(ee),se=Or*zt-Ar*jt,ie=Ar*Ee-Cn*zt,he=Cn*jt-Or*Ee,Be=_(se,ie,he),Ze=R(Be),on=Be&&-Ze/Be;xe.add(on*se),qe.add(on*ie),zn.add(on*he),Pe+=Ze,re+=Ze*(Cn+(Cn=Ee)),Te+=Ze*(Or+(Or=jt)),ae+=Ze*(Ar+(Ar=zt)),yr(Cn,Or,Ar)}function nr(Xt){Me=Pe=te=ge=Ht=re=Te=ae=0,xe=new u.Adder,qe=new u.Adder,zn=new u.Adder,at(Xt,hn);var ee=+xe,Oe=+qe,Ee=+zn,jt=_(ee,Oe,Ee);return jt<h&&(ee=re,Oe=Te,Ee=ae,Pe<s&&(ee=te,Oe=ge,Ee=Ht),jt=_(ee,Oe,Ee),jt<h)?[NaN,NaN]:[v(Oe,ee)*a,R(Ee/jt)*a]}function Gn(Xt){return function(){return Xt}}function Tn(Xt,ee){function Oe(Ee,jt){return Ee=Xt(Ee,jt),ee(Ee[0],Ee[1])}return Xt.invert&&ee.invert&&(Oe.invert=function(Ee,jt){return Ee=ee.invert(Ee,jt),Ee&&Xt.invert(Ee[0],Ee[1])}),Oe}function Cr(Xt,ee){return[l(Xt)>r?Xt+Math.round(-Xt/i)*i:Xt,ee]}Cr.invert=Cr;function pr(Xt,ee,Oe){return(Xt%=i)?ee||Oe?Tn(Ei(Xt),Oa(ee,Oe)):Ei(Xt):ee||Oe?Oa(ee,Oe):Cr}function zr(Xt){return function(ee,Oe){return ee+=Xt,[ee>r?ee-i:ee<-r?ee+i:ee,Oe]}}function Ei(Xt){var ee=zr(Xt);return ee.invert=zr(-Xt),ee}function Oa(Xt,ee){var Oe=b(Xt),Ee=m(Xt),jt=b(ee),zt=m(ee);function se(ie,he){var Be=b(he),Ze=b(ie)*Be,on=m(ie)*Be,$e=m(he),gn=$e*Oe+Ze*Ee;return[v(on*jt-gn*zt,Ze*Oe-$e*Ee),R(gn*jt+on*zt)]}return se.invert=function(ie,he){var Be=b(he),Ze=b(ie)*Be,on=m(ie)*Be,$e=m(he),gn=$e*jt-on*zt;return[v(on*jt+$e*zt,Ze*Oe+gn*Ee),R(gn*Oe-Ze*Ee)]},se}function wa(Xt){Xt=pr(Xt[0]*o,Xt[1]*o,Xt.length>2?Xt[2]*o:0);function ee(Oe){return Oe=Xt(Oe[0]*o,Oe[1]*o),Oe[0]*=a,Oe[1]*=a,Oe}return ee.invert=function(Oe){return Oe=Xt.invert(Oe[0]*o,Oe[1]*o),Oe[0]*=a,Oe[1]*=a,Oe},ee}function Ja(Xt,ee,Oe,Ee,jt,zt){if(!!Oe){var se=b(ee),ie=m(ee),he=Ee*Oe;jt==null?(jt=ee+Ee*i,zt=ee-he/2):(jt=wo(se,jt),zt=wo(se,zt),(Ee>0?jt<zt:jt>zt)&&(jt+=Ee*i));for(var Be,Ze=jt;Ee>0?Ze>zt:Ze<zt;Ze-=he)Be=mt([se,-ie*b(Ze),-ie*m(Ze)]),Xt.point(Be[0],Be[1])}}function wo(Xt,ee){ee=et(ee),ee[0]-=Xt,ot(ee);var Oe=O(-ee[1]);return((-ee[2]<0?-Oe:Oe)+i-s)%i}function ha(){var Xt=Gn([0,0]),ee=Gn(90),Oe=Gn(6),Ee,jt,zt={point:se};function se(he,Be){Ee.push(he=jt(he,Be)),he[0]*=a,he[1]*=a}function ie(){var he=Xt.apply(this,arguments),Be=ee.apply(this,arguments)*o,Ze=Oe.apply(this,arguments)*o;return Ee=[],jt=pr(-he[0]*o,-he[1]*o,0).invert,Ja(zt,Be,Ze,1),he={type:"Polygon",coordinates:[Ee]},Ee=jt=null,he}return ie.center=function(he){return arguments.length?(Xt=typeof he=="function"?he:Gn([+he[0],+he[1]]),ie):Xt},ie.radius=function(he){return arguments.length?(ee=typeof he=="function"?he:Gn(+he),ie):ee},ie.precision=function(he){return arguments.length?(Oe=typeof he=="function"?he:Gn(+he),ie):Oe},ie}function ro(){var Xt=[],ee;return{point:function(Ee,jt,zt){ee.push([Ee,jt,zt])},lineStart:function(){Xt.push(ee=[])},lineEnd:N,rejoin:function(){Xt.length>1&&Xt.push(Xt.pop().concat(Xt.shift()))},result:function(){var Ee=Xt;return Xt=[],ee=null,Ee}}}function ko(Xt,ee){return l(Xt[0]-ee[0])<s&&l(Xt[1]-ee[1])<s}function $a(Xt,ee,Oe,Ee){this.x=Xt,this.z=ee,this.o=Oe,this.e=Ee,this.v=!1,this.n=this.p=null}function Mo(Xt,ee,Oe,Ee,jt){var zt=[],se=[],ie,he;if(Xt.forEach(function(vn){if(!((Xn=vn.length-1)<=0)){var Xn,Wn=vn[0],Jn=vn[Xn],Hn;if(ko(Wn,Jn)){if(!Wn[2]&&!Jn[2]){for(jt.lineStart(),ie=0;ie<Xn;++ie)jt.point((Wn=vn[ie])[0],Wn[1]);jt.lineEnd();return}Jn[0]+=2*s}zt.push(Hn=new $a(Wn,vn,null,!0)),se.push(Hn.o=new $a(Wn,null,Hn,!1)),zt.push(Hn=new $a(Jn,vn,null,!1)),se.push(Hn.o=new $a(Jn,null,Hn,!0))}}),!!zt.length){for(se.sort(ee),ss(zt),ss(se),ie=0,he=se.length;ie<he;++ie)se[ie].e=Oe=!Oe;for(var Be=zt[0],Ze,on;;){for(var $e=Be,gn=!0;$e.v;)if(($e=$e.n)===Be)return;Ze=$e.z,jt.lineStart();do{if($e.v=$e.o.v=!0,$e.e){if(gn)for(ie=0,he=Ze.length;ie<he;++ie)jt.point((on=Ze[ie])[0],on[1]);else Ee($e.x,$e.n.x,1,jt);$e=$e.n}else{if(gn)for(Ze=$e.p.z,ie=Ze.length-1;ie>=0;--ie)jt.point((on=Ze[ie])[0],on[1]);else Ee($e.x,$e.p.x,-1,jt);$e=$e.p}$e=$e.o,Ze=$e.z,gn=!gn}while(!$e.v);jt.lineEnd()}}}function ss(Xt){if(!!(ee=Xt.length)){for(var ee,Oe=0,Ee=Xt[0],jt;++Oe<ee;)Ee.n=jt=Xt[Oe],jt.p=Ee,Ee=jt;Ee.n=jt=Xt[0],jt.p=Ee}}function Pa(Xt){return l(Xt[0])<=r?Xt[0]:S(Xt[0])*((l(Xt[0])+r)%i-r)}function Bo(Xt,ee){var Oe=Pa(ee),Ee=ee[1],jt=m(Ee),zt=[m(Oe),-b(Oe),0],se=0,ie=0,he=new u.Adder;jt===1?Ee=c+s:jt===-1&&(Ee=-c-s);for(var Be=0,Ze=Xt.length;Be<Ze;++Be)if(!!($e=(on=Xt[Be]).length))for(var on,$e,gn=on[$e-1],vn=Pa(gn),Xn=gn[1]/2+n,Wn=m(Xn),Jn=b(Xn),Hn=0;Hn<$e;++Hn,vn=xr,Wn=gi,Jn=Fr,gn=fr){var fr=on[Hn],xr=Pa(fr),Vr=fr[1]/2+n,gi=m(Vr),Fr=b(Vr),ai=xr-vn,yi=ai>=0?1:-1,Ui=yi*ai,Pi=Ui>r,pa=Wn*gi;if(he.add(v(pa*yi*m(Ui),Jn*Fr+pa*b(Ui))),se+=Pi?ai+yi*i:ai,Pi^vn>=Oe^xr>=Oe){var ta=bt(et(gn),et(fr));ot(ta);var oa=bt(zt,ta);ot(oa);var si=(Pi^ai>=0?-1:1)*R(oa[2]);(Ee>si||Ee===si&&(ta[0]||ta[1]))&&(ie+=Pi^ai>=0?1:-1)}}return(se<-s||se<s&&he<-h)^ie&1}function Ro(Xt,ee,Oe,Ee){return function(jt){var zt=ee(jt),se=ro(),ie=ee(se),he=!1,Be,Ze,on,$e={point:gn,lineStart:Xn,lineEnd:Wn,polygonStart:function(){$e.point=Jn,$e.lineStart=Hn,$e.lineEnd=fr,Ze=[],Be=[]},polygonEnd:function(){$e.point=gn,$e.lineStart=Xn,$e.lineEnd=Wn,Ze=u.merge(Ze);var Vr=Bo(Be,Ee);Ze.length?(he||(jt.polygonStart(),he=!0),Mo(Ze,Ko,Vr,Oe,jt)):Vr&&(he||(jt.polygonStart(),he=!0),jt.lineStart(),Oe(null,null,1,jt),jt.lineEnd()),he&&(jt.polygonEnd(),he=!1),Ze=Be=null},sphere:function(){jt.polygonStart(),jt.lineStart(),Oe(null,null,1,jt),jt.lineEnd(),jt.polygonEnd()}};function gn(xr,Vr){Xt(xr,Vr)&&jt.point(xr,Vr)}function vn(xr,Vr){zt.point(xr,Vr)}function Xn(){$e.point=vn,zt.lineStart()}function Wn(){$e.point=gn,zt.lineEnd()}function Jn(xr,Vr){on.push([xr,Vr]),ie.point(xr,Vr)}function Hn(){ie.lineStart(),on=[]}function fr(){Jn(on[0][0],on[0][1]),ie.lineEnd();var xr=ie.clean(),Vr=se.result(),gi,Fr=Vr.length,ai,yi,Ui;if(on.pop(),Be.push(on),on=null,!!Fr){if(xr&1){if(yi=Vr[0],(ai=yi.length-1)>0){for(he||(jt.polygonStart(),he=!0),jt.lineStart(),gi=0;gi<ai;++gi)jt.point((Ui=yi[gi])[0],Ui[1]);jt.lineEnd()}return}Fr>1&&xr&2&&Vr.push(Vr.pop().concat(Vr.shift())),Ze.push(Vr.filter(Js))}}return $e}}function Js(Xt){return Xt.length>1}function Ko(Xt,ee){return((Xt=Xt.x)[0]<0?Xt[1]-c-s:c-Xt[1])-((ee=ee.x)[0]<0?ee[1]-c-s:c-ee[1])}var nu=Ro(function(){return!0},Rs,oe,[-r,-c]);function Rs(Xt){var ee=NaN,Oe=NaN,Ee=NaN,jt;return{lineStart:function(){Xt.lineStart(),jt=1},point:function(se,ie){var he=se>0?r:-r,Be=l(se-ee);l(Be-r)<s?(Xt.point(ee,Oe=(Oe+ie)/2>0?c:-c),Xt.point(Ee,Oe),Xt.lineEnd(),Xt.lineStart(),Xt.point(he,Oe),Xt.point(se,Oe),jt=0):Ee!==he&&Be>=r&&(l(ee-Ee)<s&&(ee-=Ee*s),l(se-he)<s&&(se-=he*s),Oe=je(ee,Oe,se,ie),Xt.point(Ee,Oe),Xt.lineEnd(),Xt.lineStart(),Xt.point(he,Oe),jt=0),Xt.point(ee=se,Oe=ie),Ee=he},lineEnd:function(){Xt.lineEnd(),ee=Oe=NaN},clean:function(){return 2-jt}}}function je(Xt,ee,Oe,Ee){var jt,zt,se=m(Xt-Oe);return l(se)>s?f((m(ee)*(zt=b(Ee))*m(Oe)-m(Ee)*(jt=b(ee))*m(Xt))/(jt*zt*se)):(ee+Ee)/2}function oe(Xt,ee,Oe,Ee){var jt;if(Xt==null)jt=Oe*c,Ee.point(-r,jt),Ee.point(0,jt),Ee.point(r,jt),Ee.point(r,0),Ee.point(r,-jt),Ee.point(0,-jt),Ee.point(-r,-jt),Ee.point(-r,0),Ee.point(-r,jt);else if(l(Xt[0]-ee[0])>s){var zt=Xt[0]<ee[0]?r:-r;jt=Oe*zt/2,Ee.point(-zt,jt),Ee.point(0,jt),Ee.point(zt,jt)}else Ee.point(ee[0],ee[1])}function Zt(Xt){var ee=b(Xt),Oe=6*o,Ee=ee>0,jt=l(ee)>s;function zt(Ze,on,$e,gn){Ja(gn,Xt,Oe,$e,Ze,on)}function se(Ze,on){return b(Ze)*b(on)>ee}function ie(Ze){var on,$e,gn,vn,Xn;return{lineStart:function(){vn=gn=!1,Xn=1},point:function(Jn,Hn){var fr=[Jn,Hn],xr,Vr=se(Jn,Hn),gi=Ee?Vr?0:Be(Jn,Hn):Vr?Be(Jn+(Jn<0?r:-r),Hn):0;if(!on&&(vn=gn=Vr)&&Ze.lineStart(),Vr!==gn&&(xr=he(on,fr),(!xr||ko(on,xr)||ko(fr,xr))&&(fr[2]=1)),Vr!==gn)Xn=0,Vr?(Ze.lineStart(),xr=he(fr,on),Ze.point(xr[0],xr[1])):(xr=he(on,fr),Ze.point(xr[0],xr[1],2),Ze.lineEnd()),on=xr;else if(jt&&on&&Ee^Vr){var Fr;!(gi&$e)&&(Fr=he(fr,on,!0))&&(Xn=0,Ee?(Ze.lineStart(),Ze.point(Fr[0][0],Fr[0][1]),Ze.point(Fr[1][0],Fr[1][1]),Ze.lineEnd()):(Ze.point(Fr[1][0],Fr[1][1]),Ze.lineEnd(),Ze.lineStart(),Ze.point(Fr[0][0],Fr[0][1],3)))}Vr&&(!on||!ko(on,fr))&&Ze.point(fr[0],fr[1]),on=fr,gn=Vr,$e=gi},lineEnd:function(){gn&&Ze.lineEnd(),on=null},clean:function(){return Xn|(vn&&gn)<<1}}}function he(Ze,on,$e){var gn=et(Ze),vn=et(on),Xn=[1,0,0],Wn=bt(gn,vn),Jn=st(Wn,Wn),Hn=Wn[0],fr=Jn-Hn*Hn;if(!fr)return!$e&&Ze;var xr=ee*Jn/fr,Vr=-ee*Hn/fr,gi=bt(Xn,Wn),Fr=rt(Xn,xr),ai=rt(Wn,Vr);Y(Fr,ai);var yi=gi,Ui=st(Fr,yi),Pi=st(yi,yi),pa=Ui*Ui-Pi*(st(Fr,Fr)-1);if(!(pa<0)){var ta=P(pa),oa=rt(yi,(-Ui-ta)/Pi);if(Y(oa,Fr),oa=mt(oa),!$e)return oa;var si=Ze[0],ma=on[0],to=Ze[1],Ha=on[1],_i;ma<si&&(_i=si,si=ma,ma=_i);var Fa=ma-si,Za=l(Fa-r)<s,Os=Za||Fa<s;if(!Za&&Ha<to&&(_i=to,to=Ha,Ha=_i),Os?Za?to+Ha>0^oa[1]<(l(oa[0]-si)<s?to:Ha):to<=oa[1]&&oa[1]<=Ha:Fa>r^(si<=oa[0]&&oa[0]<=ma)){var Ms=rt(yi,(-Ui+ta)/Pi);return Y(Ms,Fr),[oa,mt(Ms)]}}}function Be(Ze,on){var $e=Ee?Xt:r-Xt,gn=0;return Ze<-$e?gn|=1:Ze>$e&&(gn|=2),on<-$e?gn|=4:on>$e&&(gn|=8),gn}return Ro(se,ie,zt,Ee?[0,-Xt]:[-r,Xt-r])}function be(Xt,ee,Oe,Ee,jt,zt){var se=Xt[0],ie=Xt[1],he=ee[0],Be=ee[1],Ze=0,on=1,$e=he-se,gn=Be-ie,vn;if(vn=Oe-se,!(!$e&&vn>0)){if(vn/=$e,$e<0){if(vn<Ze)return;vn<on&&(on=vn)}else if($e>0){if(vn>on)return;vn>Ze&&(Ze=vn)}if(vn=jt-se,!(!$e&&vn<0)){if(vn/=$e,$e<0){if(vn>on)return;vn>Ze&&(Ze=vn)}else if($e>0){if(vn<Ze)return;vn<on&&(on=vn)}if(vn=Ee-ie,!(!gn&&vn>0)){if(vn/=gn,gn<0){if(vn<Ze)return;vn<on&&(on=vn)}else if(gn>0){if(vn>on)return;vn>Ze&&(Ze=vn)}if(vn=zt-ie,!(!gn&&vn<0)){if(vn/=gn,gn<0){if(vn>on)return;vn>Ze&&(Ze=vn)}else if(gn>0){if(vn<Ze)return;vn<on&&(on=vn)}return Ze>0&&(Xt[0]=se+Ze*$e,Xt[1]=ie+Ze*gn),on<1&&(ee[0]=se+on*$e,ee[1]=ie+on*gn),!0}}}}}var sn=1e9,Vn=-sn;function er(Xt,ee,Oe,Ee){function jt(Be,Ze){return Xt<=Be&&Be<=Oe&&ee<=Ze&&Ze<=Ee}function zt(Be,Ze,on,$e){var gn=0,vn=0;if(Be==null||(gn=se(Be,on))!==(vn=se(Ze,on))||he(Be,Ze)<0^on>0)do $e.point(gn===0||gn===3?Xt:Oe,gn>1?Ee:ee);while((gn=(gn+on+4)%4)!==vn);else $e.point(Ze[0],Ze[1])}function se(Be,Ze){return l(Be[0]-Xt)<s?Ze>0?0:3:l(Be[0]-Oe)<s?Ze>0?2:1:l(Be[1]-ee)<s?Ze>0?1:0:Ze>0?3:2}function ie(Be,Ze){return he(Be.x,Ze.x)}function he(Be,Ze){var on=se(Be,1),$e=se(Ze,1);return on!==$e?on-$e:on===0?Ze[1]-Be[1]:on===1?Be[0]-Ze[0]:on===2?Be[1]-Ze[1]:Ze[0]-Be[0]}return function(Be){var Ze=Be,on=ro(),$e,gn,vn,Xn,Wn,Jn,Hn,fr,xr,Vr,gi,Fr={point:ai,lineStart:pa,lineEnd:ta,polygonStart:Ui,polygonEnd:Pi};function ai(si,ma){jt(si,ma)&&Ze.point(si,ma)}function yi(){for(var si=0,ma=0,to=gn.length;ma<to;++ma)for(var Ha=gn[ma],_i=1,Fa=Ha.length,Za=Ha[0],Os,Ms,ws=Za[0],au=Za[1];_i<Fa;++_i)Os=ws,Ms=au,Za=Ha[_i],ws=Za[0],au=Za[1],Ms<=Ee?au>Ee&&(ws-Os)*(Ee-Ms)>(au-Ms)*(Xt-Os)&&++si:au<=Ee&&(ws-Os)*(Ee-Ms)<(au-Ms)*(Xt-Os)&&--si;return si}function Ui(){Ze=on,$e=[],gn=[],gi=!0}function Pi(){var si=yi(),ma=gi&&si,to=($e=u.merge($e)).length;(ma||to)&&(Be.polygonStart(),ma&&(Be.lineStart(),zt(null,null,1,Be),Be.lineEnd()),to&&Mo($e,ie,si,zt,Be),Be.polygonEnd()),Ze=Be,$e=gn=vn=null}function pa(){Fr.point=oa,gn&&gn.push(vn=[]),Vr=!0,xr=!1,Hn=fr=NaN}function ta(){$e&&(oa(Xn,Wn),Jn&&xr&&on.rejoin(),$e.push(on.result())),Fr.point=ai,xr&&Ze.lineEnd()}function oa(si,ma){var to=jt(si,ma);if(gn&&vn.push([si,ma]),Vr)Xn=si,Wn=ma,Jn=to,Vr=!1,to&&(Ze.lineStart(),Ze.point(si,ma));else if(to&&xr)Ze.point(si,ma);else{var Ha=[Hn=Math.max(Vn,Math.min(sn,Hn)),fr=Math.max(Vn,Math.min(sn,fr))],_i=[si=Math.max(Vn,Math.min(sn,si)),ma=Math.max(Vn,Math.min(sn,ma))];be(Ha,_i,Xt,ee,Oe,Ee)?(xr||(Ze.lineStart(),Ze.point(Ha[0],Ha[1])),Ze.point(_i[0],_i[1]),to||Ze.lineEnd(),gi=!1):to&&(Ze.lineStart(),Ze.point(si,ma),gi=!1)}Hn=si,fr=ma,xr=to}return Fr}}function kn(){var Xt=0,ee=0,Oe=960,Ee=500,jt,zt,se;return se={stream:function(he){return jt&&zt===he?jt:jt=er(Xt,ee,Oe,Ee)(zt=he)},extent:function(he){return arguments.length?(Xt=+he[0][0],ee=+he[0][1],Oe=+he[1][0],Ee=+he[1][1],jt=zt=null,se):[[Xt,ee],[Oe,Ee]]}}}var Xr,vi,Si,ji,Ji={sphere:N,point:N,lineStart:za,lineEnd:N,polygonStart:N,polygonEnd:N};function za(){Ji.point=so,Ji.lineEnd=va}function va(){Ji.point=Ji.lineEnd=N}function so(Xt,ee){Xt*=o,ee*=o,vi=Xt,Si=m(ee),ji=b(ee),Ji.point=Ia}function Ia(Xt,ee){Xt*=o,ee*=o;var Oe=m(ee),Ee=b(ee),jt=l(Xt-vi),zt=b(jt),se=m(jt),ie=Ee*se,he=ji*Oe-Si*Ee*zt,Be=Si*Oe+ji*Ee*zt;Xr.add(v(P(ie*ie+he*he),Be)),vi=Xt,Si=Oe,ji=Ee}function io(Xt){return Xr=new u.Adder,at(Xt,Ji),+Xr}var uo=[null,null],ka={type:"LineString",coordinates:uo};function vo(Xt,ee){return uo[0]=Xt,uo[1]=ee,io(ka)}var Vo={Feature:function(ee,Oe){return fs(ee.geometry,Oe)},FeatureCollection:function(ee,Oe){for(var Ee=ee.features,jt=-1,zt=Ee.length;++jt<zt;)if(fs(Ee[jt].geometry,Oe))return!0;return!1}},Do={Sphere:function(){return!0},Point:function(ee,Oe){return mo(ee.coordinates,Oe)},MultiPoint:function(ee,Oe){for(var Ee=ee.coordinates,jt=-1,zt=Ee.length;++jt<zt;)if(mo(Ee[jt],Oe))return!0;return!1},LineString:function(ee,Oe){return Ga(ee.coordinates,Oe)},MultiLineString:function(ee,Oe){for(var Ee=ee.coordinates,jt=-1,zt=Ee.length;++jt<zt;)if(Ga(Ee[jt],Oe))return!0;return!1},Polygon:function(ee,Oe){return us(ee.coordinates,Oe)},MultiPolygon:function(ee,Oe){for(var Ee=ee.coordinates,jt=-1,zt=Ee.length;++jt<zt;)if(us(Ee[jt],Oe))return!0;return!1},GeometryCollection:function(ee,Oe){for(var Ee=ee.geometries,jt=-1,zt=Ee.length;++jt<zt;)if(fs(Ee[jt],Oe))return!0;return!1}};function fs(Xt,ee){return Xt&&Do.hasOwnProperty(Xt.type)?Do[Xt.type](Xt,ee):!1}function mo(Xt,ee){return vo(Xt,ee)===0}function Ga(Xt,ee){for(var Oe,Ee,jt,zt=0,se=Xt.length;zt<se;zt++){if(Ee=vo(Xt[zt],ee),Ee===0||zt>0&&(jt=vo(Xt[zt],Xt[zt-1]),jt>0&&Oe<=jt&&Ee<=jt&&(Oe+Ee-jt)*(1-Math.pow((Oe-Ee)/jt,2))<h*jt))return!0;Oe=Ee}return!1}function us(Xt,ee){return!!Bo(Xt.map(Xo),Ta(ee))}function Xo(Xt){return Xt=Xt.map(Ta),Xt.pop(),Xt}function Ta(Xt){return[Xt[0]*o,Xt[1]*o]}function mn(Xt,ee){return(Xt&&Vo.hasOwnProperty(Xt.type)?Vo[Xt.type]:fs)(Xt,ee)}function cr(Xt,ee,Oe){var Ee=u.range(Xt,ee-s,Oe).concat(ee);return function(jt){return Ee.map(function(zt){return[jt,zt]})}}function Wr(Xt,ee,Oe){var Ee=u.range(Xt,ee-s,Oe).concat(ee);return function(jt){return Ee.map(function(zt){return[zt,jt]})}}function Di(){var Xt,ee,Oe,Ee,jt,zt,se,ie,he=10,Be=he,Ze=90,on=360,$e,gn,vn,Xn,Wn=2.5;function Jn(){return{type:"MultiLineString",coordinates:Hn()}}function Hn(){return u.range(g(Ee/Ze)*Ze,Oe,Ze).map(vn).concat(u.range(g(ie/on)*on,se,on).map(Xn)).concat(u.range(g(ee/he)*he,Xt,he).filter(function(fr){return l(fr%Ze)>s}).map($e)).concat(u.range(g(zt/Be)*Be,jt,Be).filter(function(fr){return l(fr%on)>s}).map(gn))}return Jn.lines=function(){return Hn().map(function(fr){return{type:"LineString",coordinates:fr}})},Jn.outline=function(){return{type:"Polygon",coordinates:[vn(Ee).concat(Xn(se).slice(1),vn(Oe).reverse().slice(1),Xn(ie).reverse().slice(1))]}},Jn.extent=function(fr){return arguments.length?Jn.extentMajor(fr).extentMinor(fr):Jn.extentMinor()},Jn.extentMajor=function(fr){return arguments.length?(Ee=+fr[0][0],Oe=+fr[1][0],ie=+fr[0][1],se=+fr[1][1],Ee>Oe&&(fr=Ee,Ee=Oe,Oe=fr),ie>se&&(fr=ie,ie=se,se=fr),Jn.precision(Wn)):[[Ee,ie],[Oe,se]]},Jn.extentMinor=function(fr){return arguments.length?(ee=+fr[0][0],Xt=+fr[1][0],zt=+fr[0][1],jt=+fr[1][1],ee>Xt&&(fr=ee,ee=Xt,Xt=fr),zt>jt&&(fr=zt,zt=jt,jt=fr),Jn.precision(Wn)):[[ee,zt],[Xt,jt]]},Jn.step=function(fr){return arguments.length?Jn.stepMajor(fr).stepMinor(fr):Jn.stepMinor()},Jn.stepMajor=function(fr){return arguments.length?(Ze=+fr[0],on=+fr[1],Jn):[Ze,on]},Jn.stepMinor=function(fr){return arguments.length?(he=+fr[0],Be=+fr[1],Jn):[he,Be]},Jn.precision=function(fr){return arguments.length?(Wn=+fr,$e=cr(zt,jt,90),gn=Wr(ee,Xt,Wn),vn=cr(ie,se,90),Xn=Wr(Ee,Oe,Wn),Jn):Wn},Jn.extentMajor([[-180,-90+s],[180,90-s]]).extentMinor([[-180,-80-s],[180,80+s]])}function Ua(){return Di()()}function yo(Xt,ee){var Oe=Xt[0]*o,Ee=Xt[1]*o,jt=ee[0]*o,zt=ee[1]*o,se=b(Ee),ie=m(Ee),he=b(zt),Be=m(zt),Ze=se*b(Oe),on=se*m(Oe),$e=he*b(jt),gn=he*m(jt),vn=2*R(P(H(zt-Ee)+se*he*H(jt-Oe))),Xn=m(vn),Wn=vn?function(Jn){var Hn=m(Jn*=vn)/Xn,fr=m(vn-Jn)/Xn,xr=fr*Ze+Hn*$e,Vr=fr*on+Hn*gn,gi=fr*ie+Hn*Be;return[v(Vr,xr)*a,v(gi,P(xr*xr+Vr*Vr))*a]}:function(){return[Oe*a,Ee*a]};return Wn.distance=vn,Wn}var lo=function(ee){return ee},La=new u.Adder,Va=new u.Adder,ts,ls,Ki,_u,Fo={point:N,lineStart:N,lineEnd:N,polygonStart:function(){Fo.lineStart=hs,Fo.lineEnd=vs},polygonEnd:function(){Fo.lineStart=Fo.lineEnd=Fo.point=N,La.add(l(Va)),Va=new u.Adder},result:function(){var ee=La/2;return La=new u.Adder,ee}};function hs(){Fo.point=$s}function $s(Xt,ee){Fo.point=ds,ts=Ki=Xt,ls=_u=ee}function ds(Xt,ee){Va.add(_u*Xt-Ki*ee),Ki=Xt,_u=ee}function vs(){ds(ts,ls)}var Qs=Infinity,Mu=Qs,ps=-Qs,wu=ps,Ds={point:Aa,lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N,result:function(){var ee=[[Qs,Mu],[ps,wu]];return ps=wu=-(Mu=Qs=Infinity),ee}};function Aa(Xt,ee){Xt<Qs&&(Qs=Xt),Xt>ps&&(ps=Xt),ee<Mu&&(Mu=ee),ee>wu&&(wu=ee)}var lu=0,Pu=0,Zu=0,vl=0,Tu=0,Ao=0,es=0,gs=0,po=0,cu,Oo,ba,As,qs={point:js,lineStart:ms,lineEnd:Ya,polygonStart:function(){qs.lineStart=nl,qs.lineEnd=Zl},polygonEnd:function(){qs.point=js,qs.lineStart=ms,qs.lineEnd=Ya},result:function(){var ee=po?[es/po,gs/po]:Ao?[vl/Ao,Tu/Ao]:Zu?[lu/Zu,Pu/Zu]:[NaN,NaN];return lu=Pu=Zu=vl=Tu=Ao=es=gs=po=0,ee}};function js(Xt,ee){lu+=Xt,Pu+=ee,++Zu}function ms(){qs.point=Au}function Au(Xt,ee){qs.point=ks,js(ba=Xt,As=ee)}function ks(Xt,ee){var Oe=Xt-ba,Ee=ee-As,jt=P(Oe*Oe+Ee*Ee);vl+=jt*(ba+Xt)/2,Tu+=jt*(As+ee)/2,Ao+=jt,js(ba=Xt,As=ee)}function Ya(){qs.point=js}function nl(){qs.point=Al}function Zl(){pl(cu,Oo)}function Al(Xt,ee){qs.point=pl,js(cu=ba=Xt,Oo=As=ee)}function pl(Xt,ee){var Oe=Xt-ba,Ee=ee-As,jt=P(Oe*Oe+Ee*Ee);vl+=jt*(ba+Xt)/2,Tu+=jt*(As+ee)/2,Ao+=jt,jt=As*Xt-ba*ee,es+=jt*(ba+Xt),gs+=jt*(As+ee),po+=jt*3,js(ba=Xt,As=ee)}function Ku(Xt){this._context=Xt}Ku.prototype={_radius:4.5,pointRadius:function(ee){return this._radius=ee,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(ee,Oe){switch(this._point){case 0:{this._context.moveTo(ee,Oe),this._point=1;break}case 1:{this._context.lineTo(ee,Oe);break}default:{this._context.moveTo(ee+this._radius,Oe),this._context.arc(ee,Oe,this._radius,0,i);break}}},result:N};var Cu=new u.Adder,Gs,Cl,ns,Wa,fu,Xu={point:N,lineStart:function(){Xu.point=Ll},lineEnd:function(){Gs&&Uu(Cl,ns),Xu.point=N},polygonStart:function(){Gs=!0},polygonEnd:function(){Gs=null},result:function(){var ee=+Cu;return Cu=new u.Adder,ee}};function Ll(Xt,ee){Xu.point=Uu,Cl=Wa=Xt,ns=fu=ee}function Uu(Xt,ee){Wa-=Xt,fu-=ee,Cu.add(P(Wa*Wa+fu*fu)),Wa=Xt,fu=ee}function Vs(){this._string=[]}Vs.prototype={_radius:4.5,_circle:rl(4.5),pointRadius:function(ee){return(ee=+ee)!==this._radius&&(this._radius=ee,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(ee,Oe){switch(this._point){case 0:{this._string.push("M",ee,",",Oe),this._point=1;break}case 1:{this._string.push("L",ee,",",Oe);break}default:{this._circle==null&&(this._circle=rl(this._radius)),this._string.push("M",ee,",",Oe,this._circle);break}}},result:function(){if(this._string.length){var ee=this._string.join("");return this._string=[],ee}else return null}};function rl(Xt){return"m0,"+Xt+"a"+Xt+","+Xt+" 0 1,1 0,"+-2*Xt+"a"+Xt+","+Xt+" 0 1,1 0,"+2*Xt+"z"}function hu(Xt,ee){var Oe=4.5,Ee,jt;function zt(se){return se&&(typeof Oe=="function"&&jt.pointRadius(+Oe.apply(this,arguments)),at(se,Ee(jt))),jt.result()}return zt.area=function(se){return at(se,Ee(Fo)),Fo.result()},zt.measure=function(se){return at(se,Ee(Xu)),Xu.result()},zt.bounds=function(se){return at(se,Ee(Ds)),Ds.result()},zt.centroid=function(se){return at(se,Ee(qs)),qs.result()},zt.projection=function(se){return arguments.length?(Ee=se==null?(Xt=null,lo):(Xt=se).stream,zt):Xt},zt.context=function(se){return arguments.length?(jt=se==null?(ee=null,new Vs):new Ku(ee=se),typeof Oe!="function"&&jt.pointRadius(Oe),zt):ee},zt.pointRadius=function(se){return arguments.length?(Oe=typeof se=="function"?se:(jt.pointRadius(+se),+se),zt):Oe},zt.projection(Xt).context(ee)}function Ss(Xt){return{stream:Ws(Xt)}}function Ws(Xt){return function(ee){var Oe=new gl;for(var Ee in Xt)Oe[Ee]=Xt[Ee];return Oe.stream=ee,Oe}}function gl(){}gl.prototype={constructor:gl,point:function(ee,Oe){this.stream.point(ee,Oe)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Iu(Xt,ee,Oe){var Ee=Xt.clipExtent&&Xt.clipExtent();return Xt.scale(150).translate([0,0]),Ee!=null&&Xt.clipExtent(null),at(Oe,Xt.stream(Ds)),ee(Ds.result()),Ee!=null&&Xt.clipExtent(Ee),Xt}function Lu(Xt,ee,Oe){return Iu(Xt,function(Ee){var jt=ee[1][0]-ee[0][0],zt=ee[1][1]-ee[0][1],se=Math.min(jt/(Ee[1][0]-Ee[0][0]),zt/(Ee[1][1]-Ee[0][1])),ie=+ee[0][0]+(jt-se*(Ee[1][0]+Ee[0][0]))/2,he=+ee[0][1]+(zt-se*(Ee[1][1]+Ee[0][1]))/2;Xt.scale(150*se).translate([ie,he])},Oe)}function du(Xt,ee,Oe){return Lu(Xt,[[0,0],ee],Oe)}function vu(Xt,ee,Oe){return Iu(Xt,function(Ee){var jt=+ee,zt=jt/(Ee[1][0]-Ee[0][0]),se=(jt-zt*(Ee[1][0]+Ee[0][0]))/2,ie=-zt*Ee[0][1];Xt.scale(150*zt).translate([se,ie])},Oe)}function pu(Xt,ee,Oe){return Iu(Xt,function(Ee){var jt=+ee,zt=jt/(Ee[1][1]-Ee[0][1]),se=-zt*Ee[0][0],ie=(jt-zt*(Ee[1][1]+Ee[0][1]))/2;Xt.scale(150*zt).translate([se,ie])},Oe)}var Ol=16,rc=b(30*o);function ql(Xt,ee){return+ee?Nl(Xt,ee):gu(Xt)}function gu(Xt){return Ws({point:function(Oe,Ee){Oe=Xt(Oe,Ee),this.stream.point(Oe[0],Oe[1])}})}function Nl(Xt,ee){function Oe(Ee,jt,zt,se,ie,he,Be,Ze,on,$e,gn,vn,Xn,Wn){var Jn=Be-Ee,Hn=Ze-jt,fr=Jn*Jn+Hn*Hn;if(fr>4*ee&&Xn--){var xr=se+$e,Vr=ie+gn,gi=he+vn,Fr=P(xr*xr+Vr*Vr+gi*gi),ai=R(gi/=Fr),yi=l(l(gi)-1)<s||l(zt-on)<s?(zt+on)/2:v(Vr,xr),Ui=Xt(yi,ai),Pi=Ui[0],pa=Ui[1],ta=Pi-Ee,oa=pa-jt,si=Hn*ta-Jn*oa;(si*si/fr>ee||l((Jn*ta+Hn*oa)/fr-.5)>.3||se*$e+ie*gn+he*vn<rc)&&(Oe(Ee,jt,zt,se,ie,he,Pi,pa,yi,xr/=Fr,Vr/=Fr,gi,Xn,Wn),Wn.point(Pi,pa),Oe(Pi,pa,yi,xr,Vr,gi,Be,Ze,on,$e,gn,vn,Xn,Wn))}}return function(Ee){var jt,zt,se,ie,he,Be,Ze,on,$e,gn,vn,Xn,Wn={point:Jn,lineStart:Hn,lineEnd:xr,polygonStart:function(){Ee.polygonStart(),Wn.lineStart=Vr},polygonEnd:function(){Ee.polygonEnd(),Wn.lineStart=Hn}};function Jn(ai,yi){ai=Xt(ai,yi),Ee.point(ai[0],ai[1])}function Hn(){on=NaN,Wn.point=fr,Ee.lineStart()}function fr(ai,yi){var Ui=et([ai,yi]),Pi=Xt(ai,yi);Oe(on,$e,Ze,gn,vn,Xn,on=Pi[0],$e=Pi[1],Ze=ai,gn=Ui[0],vn=Ui[1],Xn=Ui[2],Ol,Ee),Ee.point(on,$e)}function xr(){Wn.point=Jn,Ee.lineEnd()}function Vr(){Hn(),Wn.point=gi,Wn.lineEnd=Fr}function gi(ai,yi){fr(jt=ai,yi),zt=on,se=$e,ie=gn,he=vn,Be=Xn,Wn.point=fr}function Fr(){Oe(on,$e,Ze,gn,vn,Xn,zt,se,jt,ie,he,Be,Ol,Ee),Wn.lineEnd=xr,xr()}return Wn}}var tc=Ws({point:function(ee,Oe){this.stream.point(ee*o,Oe*o)}});function Ou(Xt){return Ws({point:function(Oe,Ee){var jt=Xt(Oe,Ee);return this.stream.point(jt[0],jt[1])}})}function ml(Xt,ee,Oe,Ee,jt){function zt(se,ie){return se*=Ee,ie*=jt,[ee+Xt*se,Oe-Xt*ie]}return zt.invert=function(se,ie){return[(se-ee)/Xt*Ee,(Oe-ie)/Xt*jt]},zt}function wl(Xt,ee,Oe,Ee,jt,zt){if(!zt)return ml(Xt,ee,Oe,Ee,jt);var se=b(zt),ie=m(zt),he=se*Xt,Be=ie*Xt,Ze=se/Xt,on=ie/Xt,$e=(ie*Oe-se*ee)/Xt,gn=(ie*ee+se*Oe)/Xt;function vn(Xn,Wn){return Xn*=Ee,Wn*=jt,[he*Xn-Be*Wn+ee,Oe-Be*Xn-he*Wn]}return vn.invert=function(Xn,Wn){return[Ee*(Ze*Xn-on*Wn+$e),jt*(gn-on*Xn-Ze*Wn)]},vn}function Bs(Xt){return ao(function(){return Xt})()}function ao(Xt){var ee,Oe=150,Ee=480,jt=250,zt=0,se=0,ie=0,he=0,Be=0,Ze,on=0,$e=1,gn=1,vn=null,Xn=nu,Wn=null,Jn,Hn,fr,xr=lo,Vr=.5,gi,Fr,ai,yi,Ui;function Pi(si){return ai(si[0]*o,si[1]*o)}function pa(si){return si=ai.invert(si[0],si[1]),si&&[si[0]*a,si[1]*a]}Pi.stream=function(si){return yi&&Ui===si?yi:yi=tc(Ou(Ze)(Xn(gi(xr(Ui=si)))))},Pi.preclip=function(si){return arguments.length?(Xn=si,vn=void 0,oa()):Xn},Pi.postclip=function(si){return arguments.length?(xr=si,Wn=Jn=Hn=fr=null,oa()):xr},Pi.clipAngle=function(si){return arguments.length?(Xn=+si?Zt(vn=si*o):(vn=null,nu),oa()):vn*a},Pi.clipExtent=function(si){return arguments.length?(xr=si==null?(Wn=Jn=Hn=fr=null,lo):er(Wn=+si[0][0],Jn=+si[0][1],Hn=+si[1][0],fr=+si[1][1]),oa()):Wn==null?null:[[Wn,Jn],[Hn,fr]]},Pi.scale=function(si){return arguments.length?(Oe=+si,ta()):Oe},Pi.translate=function(si){return arguments.length?(Ee=+si[0],jt=+si[1],ta()):[Ee,jt]},Pi.center=function(si){return arguments.length?(zt=si[0]%360*o,se=si[1]%360*o,ta()):[zt*a,se*a]},Pi.rotate=function(si){return arguments.length?(ie=si[0]%360*o,he=si[1]%360*o,Be=si.length>2?si[2]%360*o:0,ta()):[ie*a,he*a,Be*a]},Pi.angle=function(si){return arguments.length?(on=si%360*o,ta()):on*a},Pi.reflectX=function(si){return arguments.length?($e=si?-1:1,ta()):$e<0},Pi.reflectY=function(si){return arguments.length?(gn=si?-1:1,ta()):gn<0},Pi.precision=function(si){return arguments.length?(gi=ql(Fr,Vr=si*si),oa()):P(Vr)},Pi.fitExtent=function(si,ma){return Lu(Pi,si,ma)},Pi.fitSize=function(si,ma){return du(Pi,si,ma)},Pi.fitWidth=function(si,ma){return vu(Pi,si,ma)},Pi.fitHeight=function(si,ma){return pu(Pi,si,ma)};function ta(){var si=wl(Oe,0,0,$e,gn,on).apply(null,ee(zt,se)),ma=wl(Oe,Ee-si[0],jt-si[1],$e,gn,on);return Ze=pr(ie,he,Be),Fr=Tn(ee,ma),ai=Tn(Ze,Fr),gi=ql(Fr,Vr),oa()}function oa(){return yi=Ui=null,Pi}return function(){return ee=Xt.apply(this,arguments),Pi.invert=ee.invert&&pa,ta()}}function yl(Xt){var ee=0,Oe=r/3,Ee=ao(Xt),jt=Ee(ee,Oe);return jt.parallels=function(zt){return arguments.length?Ee(ee=zt[0]*o,Oe=zt[1]*o):[ee*a,Oe*a]},jt}function il(Xt){var ee=b(Xt);function Oe(Ee,jt){return[Ee*ee,m(jt)/ee]}return Oe.invert=function(Ee,jt){return[Ee/ee,R(jt*ee)]},Oe}function Hs(Xt,ee){var Oe=m(Xt),Ee=(Oe+m(ee))/2;if(l(Ee)<s)return il(Xt);var jt=1+Oe*(2*Ee-Oe),zt=P(jt)/Ee;function se(ie,he){var Be=P(jt-2*Ee*m(he))/Ee;return[Be*m(ie*=Ee),zt-Be*b(ie)]}return se.invert=function(ie,he){var Be=zt-he,Ze=v(ie,l(Be))*S(Be);return Be*Ee<0&&(Ze-=r*S(ie)*S(Be)),[Ze/Ee,R((jt-(ie*ie+Be*Be)*Ee*Ee)/(2*Ee))]},se}function Ra(){return yl(Hs).scale(155.424).center([0,33.6442])}function xo(){return Ra().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ru(Xt){var ee=Xt.length;return{point:function(Ee,jt){for(var zt=-1;++zt<ee;)Xt[zt].point(Ee,jt)},sphere:function(){for(var Ee=-1;++Ee<ee;)Xt[Ee].sphere()},lineStart:function(){for(var Ee=-1;++Ee<ee;)Xt[Ee].lineStart()},lineEnd:function(){for(var Ee=-1;++Ee<ee;)Xt[Ee].lineEnd()},polygonStart:function(){for(var Ee=-1;++Ee<ee;)Xt[Ee].polygonStart()},polygonEnd:function(){for(var Ee=-1;++Ee<ee;)Xt[Ee].polygonEnd()}}}function xl(){var Xt,ee,Oe=xo(),Ee,jt=Ra().rotate([154,0]).center([-2,58.5]).parallels([55,65]),zt,se=Ra().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ie,he,Be={point:function(gn,vn){he=[gn,vn]}};function Ze($e){var gn=$e[0],vn=$e[1];return he=null,Ee.point(gn,vn),he||(zt.point(gn,vn),he)||(ie.point(gn,vn),he)}Ze.invert=function($e){var gn=Oe.scale(),vn=Oe.translate(),Xn=($e[0]-vn[0])/gn,Wn=($e[1]-vn[1])/gn;return(Wn>=.12&&Wn<.234&&Xn>=-.425&&Xn<-.214?jt:Wn>=.166&&Wn<.234&&Xn>=-.214&&Xn<-.115?se:Oe).invert($e)},Ze.stream=function($e){return Xt&&ee===$e?Xt:Xt=ru([Oe.stream(ee=$e),jt.stream($e),se.stream($e)])},Ze.precision=function($e){return arguments.length?(Oe.precision($e),jt.precision($e),se.precision($e),on()):Oe.precision()},Ze.scale=function($e){return arguments.length?(Oe.scale($e),jt.scale($e*.35),se.scale($e),Ze.translate(Oe.translate())):Oe.scale()},Ze.translate=function($e){if(!arguments.length)return Oe.translate();var gn=Oe.scale(),vn=+$e[0],Xn=+$e[1];return Ee=Oe.translate($e).clipExtent([[vn-.455*gn,Xn-.238*gn],[vn+.455*gn,Xn+.238*gn]]).stream(Be),zt=jt.translate([vn-.307*gn,Xn+.201*gn]).clipExtent([[vn-.425*gn+s,Xn+.12*gn+s],[vn-.214*gn-s,Xn+.234*gn-s]]).stream(Be),ie=se.translate([vn-.205*gn,Xn+.212*gn]).clipExtent([[vn-.214*gn+s,Xn+.166*gn+s],[vn-.115*gn-s,Xn+.234*gn-s]]).stream(Be),on()},Ze.fitExtent=function($e,gn){return Lu(Ze,$e,gn)},Ze.fitSize=function($e,gn){return du(Ze,$e,gn)},Ze.fitWidth=function($e,gn){return vu(Ze,$e,gn)},Ze.fitHeight=function($e,gn){return pu(Ze,$e,gn)};function on(){return Xt=ee=null,Ze}return Ze.scale(1070)}function al(Xt){return function(ee,Oe){var Ee=b(ee),jt=b(Oe),zt=Xt(Ee*jt);return zt===Infinity?[2,0]:[zt*jt*m(ee),zt*m(Oe)]}}function ku(Xt){return function(ee,Oe){var Ee=P(ee*ee+Oe*Oe),jt=Xt(Ee),zt=m(jt),se=b(jt);return[v(ee*zt,Ee*se),R(Ee&&Oe*zt/Ee)]}}var zl=al(function(Xt){return P(2/(1+Xt))});zl.invert=ku(function(Xt){return 2*R(Xt/2)});function cs(){return Bs(zl).scale(124.75).clipAngle(180-.001)}var bl=al(function(Xt){return(Xt=O(Xt))&&Xt/m(Xt)});bl.invert=ku(function(Xt){return Xt});function mu(){return Bs(bl).scale(79.4188).clipAngle(180-.001)}function Fs(Xt,ee){return[Xt,M(A((c+ee)/2))]}Fs.invert=function(Xt,ee){return[Xt,2*f(y(ee))-c]};function Wo(){return _s(Fs).scale(961/i)}function _s(Xt){var ee=Bs(Xt),Oe=ee.center,Ee=ee.scale,jt=ee.translate,zt=ee.clipExtent,se=null,ie,he,Be;ee.scale=function(on){return arguments.length?(Ee(on),Ze()):Ee()},ee.translate=function(on){return arguments.length?(jt(on),Ze()):jt()},ee.center=function(on){return arguments.length?(Oe(on),Ze()):Oe()},ee.clipExtent=function(on){return arguments.length?(on==null?se=ie=he=Be=null:(se=+on[0][0],ie=+on[0][1],he=+on[1][0],Be=+on[1][1]),Ze()):se==null?null:[[se,ie],[he,Be]]};function Ze(){var on=r*Ee(),$e=ee(wa(ee.rotate()).invert([0,0]));return zt(se==null?[[$e[0]-on,$e[1]-on],[$e[0]+on,$e[1]+on]]:Xt===Fs?[[Math.max($e[0]-on,se),ie],[Math.min($e[0]+on,he),Be]]:[[se,Math.max($e[1]-on,ie)],[he,Math.min($e[1]+on,Be)]])}return Ze()}function iu(Xt){return A((c+Xt)/2)}function Ho(Xt,ee){var Oe=b(Xt),Ee=Xt===ee?m(Xt):M(Oe/b(ee))/M(iu(ee)/iu(Xt)),jt=Oe*x(iu(Xt),Ee)/Ee;if(!Ee)return Fs;function zt(se,ie){jt>0?ie<-c+s&&(ie=-c+s):ie>c-s&&(ie=c-s);var he=jt/x(iu(ie),Ee);return[he*m(Ee*se),jt-he*b(Ee*se)]}return zt.invert=function(se,ie){var he=jt-ie,Be=S(Ee)*P(se*se+he*he),Ze=v(se,l(he))*S(he);return he*Ee<0&&(Ze-=r*S(se)*S(he)),[Ze/Ee,2*f(x(jt/Be,1/Ee))-c]},zt}function Ni(){return yl(Ho).scale(109.5).parallels([30,30])}function Ns(Xt,ee){return[Xt,ee]}Ns.invert=Ns;function El(){return Bs(Ns).scale(152.63)}function ol(Xt,ee){var Oe=b(Xt),Ee=Xt===ee?m(Xt):(Oe-b(ee))/(ee-Xt),jt=Oe/Ee+Xt;if(l(Ee)<s)return Ns;function zt(se,ie){var he=jt-ie,Be=Ee*se;return[he*m(Be),jt-he*b(Be)]}return zt.invert=function(se,ie){var he=jt-ie,Be=v(se,l(he))*S(he);return he*Ee<0&&(Be-=r*S(se)*S(he)),[Be/Ee,jt-S(Ee)*P(se*se+he*he)]},zt}function No(){return yl(ol).scale(131.154).center([0,13.9389])}var Co=1.340264,tu=-.081106,mi=893e-6,Ru=.003796,Du=P(3)/2,ju=12;function Cs(Xt,ee){var Oe=R(Du*m(ee)),Ee=Oe*Oe,jt=Ee*Ee*Ee;return[Xt*b(Oe)/(Du*(Co+3*tu*Ee+jt*(7*mi+9*Ru*Ee))),Oe*(Co+tu*Ee+jt*(mi+Ru*Ee))]}Cs.invert=function(Xt,ee){for(var Oe=ee,Ee=Oe*Oe,jt=Ee*Ee*Ee,zt=0,se,ie,he;zt<ju&&(ie=Oe*(Co+tu*Ee+jt*(mi+Ru*Ee))-ee,he=Co+3*tu*Ee+jt*(7*mi+9*Ru*Ee),Oe-=se=ie/he,Ee=Oe*Oe,jt=Ee*Ee*Ee,!(l(se)<h));++zt);return[Du*Xt*(Co+3*tu*Ee+jt*(7*mi+9*Ru*Ee))/b(Oe),R(m(Oe)/Du)]};function Ae(){return Bs(Cs).scale(177.158)}function _e(Xt,ee){var Oe=b(ee),Ee=b(Xt)*Oe;return[Oe*m(Xt)/Ee,m(ee)/Ee]}_e.invert=ku(f);function pn(){return Bs(_e).scale(144.049).clipAngle(60)}function an(){var Xt=1,ee=0,Oe=0,Ee=1,jt=1,zt=0,se,ie,he=null,Be,Ze,on,$e=1,gn=1,vn=Ws({point:function(Vr,gi){var Fr=fr([Vr,gi]);this.stream.point(Fr[0],Fr[1])}}),Xn=lo,Wn,Jn;function Hn(){return $e=Xt*Ee,gn=Xt*jt,Wn=Jn=null,fr}function fr(xr){var Vr=xr[0]*$e,gi=xr[1]*gn;if(zt){var Fr=gi*se-Vr*ie;Vr=Vr*se+gi*ie,gi=Fr}return[Vr+ee,gi+Oe]}return fr.invert=function(xr){var Vr=xr[0]-ee,gi=xr[1]-Oe;if(zt){var Fr=gi*se+Vr*ie;Vr=Vr*se-gi*ie,gi=Fr}return[Vr/$e,gi/gn]},fr.stream=function(xr){return Wn&&Jn===xr?Wn:Wn=vn(Xn(Jn=xr))},fr.postclip=function(xr){return arguments.length?(Xn=xr,he=Be=Ze=on=null,Hn()):Xn},fr.clipExtent=function(xr){return arguments.length?(Xn=xr==null?(he=Be=Ze=on=null,lo):er(he=+xr[0][0],Be=+xr[0][1],Ze=+xr[1][0],on=+xr[1][1]),Hn()):he==null?null:[[he,Be],[Ze,on]]},fr.scale=function(xr){return arguments.length?(Xt=+xr,Hn()):Xt},fr.translate=function(xr){return arguments.length?(ee=+xr[0],Oe=+xr[1],Hn()):[ee,Oe]},fr.angle=function(xr){return arguments.length?(zt=xr%360*o,ie=m(zt),se=b(zt),Hn()):zt*a},fr.reflectX=function(xr){return arguments.length?(Ee=xr?-1:1,Hn()):Ee<0},fr.reflectY=function(xr){return arguments.length?(jt=xr?-1:1,Hn()):jt<0},fr.fitExtent=function(xr,Vr){return Lu(fr,xr,Vr)},fr.fitSize=function(xr,Vr){return du(fr,xr,Vr)},fr.fitWidth=function(xr,Vr){return vu(fr,xr,Vr)},fr.fitHeight=function(xr,Vr){return pu(fr,xr,Vr)},fr}function In(Xt,ee){var Oe=ee*ee,Ee=Oe*Oe;return[Xt*(.8707-.131979*Oe+Ee*(-.013791+Ee*(.003971*Oe-.001529*Ee))),ee*(1.007226+Oe*(.015085+Ee*(-.044475+.028874*Oe-.005916*Ee)))]}In.invert=function(Xt,ee){var Oe=ee,Ee=25,jt;do{var zt=Oe*Oe,se=zt*zt;Oe-=jt=(Oe*(1.007226+zt*(.015085+se*(-.044475+.028874*zt-.005916*se)))-ee)/(1.007226+zt*(.015085*3+se*(-.044475*7+.028874*9*zt-.005916*11*se)))}while(l(jt)>s&&--Ee>0);return[Xt/(.8707+(zt=Oe*Oe)*(-.131979+zt*(-.013791+zt*zt*zt*(.003971-.001529*zt)))),Oe]};function hr(){return Bs(In).scale(175.295)}function Lr(Xt,ee){return[b(ee)*m(Xt),m(ee)]}Lr.invert=ku(R);function Zr(){return Bs(Lr).scale(249.5).clipAngle(90+s)}function ei(Xt,ee){var Oe=b(ee),Ee=1+b(Xt)*Oe;return[Oe*m(Xt)/Ee,m(ee)/Ee]}ei.invert=ku(function(Xt){return 2*f(Xt)});function Ur(){return Bs(ei).scale(250).clipAngle(142)}function hi(Xt,ee){return[M(A((c+ee)/2)),-Xt]}hi.invert=function(Xt,ee){return[-ee,2*f(y(Xt))-c]};function br(){var Xt=_s(hi),ee=Xt.center,Oe=Xt.rotate;return Xt.center=function(Ee){return arguments.length?ee([-Ee[1],Ee[0]]):(Ee=ee(),[Ee[1],-Ee[0]])},Xt.rotate=function(Ee){return arguments.length?Oe([Ee[0],Ee[1],Ee.length>2?Ee[2]+90:90]):(Ee=Oe(),[Ee[0],Ee[1],Ee[2]-90])},Oe([0,0,90]).scale(159.155)}t.geoAlbers=xo,t.geoAlbersUsa=xl,t.geoArea=q,t.geoAzimuthalEqualArea=cs,t.geoAzimuthalEqualAreaRaw=zl,t.geoAzimuthalEquidistant=mu,t.geoAzimuthalEquidistantRaw=bl,t.geoBounds=li,t.geoCentroid=nr,t.geoCircle=ha,t.geoClipAntimeridian=nu,t.geoClipCircle=Zt,t.geoClipExtent=kn,t.geoClipRectangle=er,t.geoConicConformal=Ni,t.geoConicConformalRaw=Ho,t.geoConicEqualArea=Ra,t.geoConicEqualAreaRaw=Hs,t.geoConicEquidistant=No,t.geoConicEquidistantRaw=ol,t.geoContains=mn,t.geoDistance=vo,t.geoEqualEarth=Ae,t.geoEqualEarthRaw=Cs,t.geoEquirectangular=El,t.geoEquirectangularRaw=Ns,t.geoGnomonic=pn,t.geoGnomonicRaw=_e,t.geoGraticule=Di,t.geoGraticule10=Ua,t.geoIdentity=an,t.geoInterpolate=yo,t.geoLength=io,t.geoMercator=Wo,t.geoMercatorRaw=Fs,t.geoNaturalEarth1=hr,t.geoNaturalEarth1Raw=In,t.geoOrthographic=Zr,t.geoOrthographicRaw=Lr,t.geoPath=hu,t.geoProjection=Bs,t.geoProjectionMutator=ao,t.geoRotation=wa,t.geoStereographic=Ur,t.geoStereographicRaw=ei,t.geoStream=at,t.geoTransform=Ss,t.geoTransverseMercator=br,t.geoTransverseMercatorRaw=hi,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";function s(l,f,v){var b=l.layout,g=[],y=0;Object.keys(l.hexes).forEach(function(H){l.hexes[H].key=H,g.push(l.hexes[H])});var _=u.max(g,function(H){return+H.q}),M=u.min(g,function(H){return+H.q}),x=u.max(g,function(H){return+H.r}),m=u.min(g,function(H){return+H.r}),S=_-M+1,P=x-m+1;b==="odd-r"||b==="even-r"?y=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):y=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var A=y*Math.sqrt(3),O=c(b,A,y),R=n(O);return g.forEach(function(H){H.qc=H.q-M,H.rc=x-H.r,H.x=h(H,b,A,y),H.y=r(H,b,A,y),H.vertices=O,H.points=R}),g}function h(l,f,v,b){var g=0,y=0;switch(f){case"odd-r":y=l.rc%2==1?v:v/2,g=l.qc*v+y;break;case"even-r":y=l.rc%2==0?v:v/2,g=l.qc*v+y;break;case"odd-q":case"even-q":g=l.qc*b*1.5+b;break}return g}function r(l,f,v,b){var g=0,y=0;switch(f){case"odd-r":case"even-r":g=l.rc*b*1.5+b;break;case"odd-q":y=l.qc%2==1?v:v/2,g=l.rc*v+y;break;case"even-q":y=l.qc%2==0?v:v/2,g=l.rc*v+y;break}return g}function c(l,f,v){var b=[];switch(l){case"odd-r":case"even-r":b.push({x:0,y:0-v}),b.push({x:0+f*.5,y:0-.5*v}),b.push({x:0+f*.5,y:0+.5*v}),b.push({x:0,y:0+v}),b.push({x:0-f*.5,y:0+.5*v}),b.push({x:0-f*.5,y:0-.5*v});break;case"odd-q":case"even-q":b.push({x:0-v,y:0}),b.push({x:0-.5*v,y:0-f*.5}),b.push({x:0+.5*v,y:0-f*.5}),b.push({x:0+v,y:0}),b.push({x:0+.5*v,y:0+f*.5}),b.push({x:0-.5*v,y:0+f*.5});break}return b}function n(l){var f="";return l.forEach(function(v){f+=v.x+","+v.y+" "}),f.substring(0,f.length-1)}function i(l){var f={};f.layout=l.layout,f.hexes={};var v=[];Object.keys(l.hexes).forEach(function(S){v.push(l.hexes[S])});var b=u.max(v,function(S){return+S.q}),g=u.min(v,function(S){return+S.q}),y=u.max(v,function(S){return+S.r}),_=u.min(v,function(S){return+S.r}),M,x,m;for(M=g;M<=b;M++)for(x=_;x<=y;x++)m="Q"+M+"R"+x,f.hexes[m]={q:M,r:x};return f}function a(l,f,v,b){var g=[],y=l.layout;Object.keys(l.hexes).forEach(function(gt){g.push(l.hexes[gt])});var _=u.max(g,function(gt){return+gt.q}),M=u.min(g,function(gt){return+gt.q}),x=u.max(g,function(gt){return+gt.r}),m=u.min(g,function(gt){return+gt.r}),S=_-M+1,P=x-m+1,A;y==="odd-r"||y==="even-r"?A=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),R=[],H=A*A*4,N=g.length;if(N>1){g.forEach(function(gt){gt.qc=gt.q-M,gt.rc=x-gt.r,gt.x=h(gt,y,O,A),gt.y=r(gt,y,O,A)});for(var K=0;K<N-1;K++)for(var V=K+1;V<N;V++){var k=g[K],Z=g[V];if(k[b]!==Z[b]&&Math.abs(k.q-Z.q)<=1&&Math.abs(k.r-Z.r)<=1&&(k.x-Z.x)*(k.x-Z.x)+(k.y-Z.y)*(k.y-Z.y)<H){var X={};X.x=Z.x+(k.x-Z.x)/2,X.y=Z.y+(k.y-Z.y)/2;var at={},pt=Math.sqrt(3)*4;at.dx=(k.y-Z.y)/pt,at.dy=-(k.x-Z.x)/pt,R.push({x:X.x-2*at.dx,y:X.y-2*at.dy}),R.push({x:X.x-at.dx,y:X.y-at.dy}),R.push({x:X.x,y:X.y}),R.push({x:X.x+at.dx,y:X.y+at.dy}),R.push({x:X.x+2*at.dx,y:X.y+2*at.dy})}}}return R}function o(l,f,v,b){var g=[],y=l.layout;Object.keys(l.hexes).forEach(function(ft){g.push(l.hexes[ft])});var _=u.max(g,function(ft){return+ft.q}),M=u.min(g,function(ft){return+ft.q}),x=u.max(g,function(ft){return+ft.r}),m=u.min(g,function(ft){return+ft.r}),S=_-M+1,P=x-m+1,A;y==="odd-r"||y==="even-r"?A=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),R=[],H=A*A*4,N=g.length;if(N>1){g.forEach(function(ft){ft.qc=ft.q-M,ft.rc=x-ft.r,ft.x=h(ft,y,O,A),ft.y=r(ft,y,O,A)});for(var K=0;K<N-1;K++)for(var V=K+1;V<N;V++){var k=g[K],Z=g[V];if(k[b]!==Z[b]&&Math.abs(k.q-Z.q)<=1&&Math.abs(k.r-Z.r)<=1&&(k.x-Z.x)*(k.x-Z.x)+(k.y-Z.y)*(k.y-Z.y)<H){var X={};X.x=Z.x+(k.x-Z.x)/2,X.y=Z.y+(k.y-Z.y)/2;var at={},pt=1;k[b]<Z[b]&&(pt=-1);var gt=Math.sqrt(3)*2*pt;at.dx=(k.y-Z.y)/gt,at.dy=-(k.x-Z.x)/gt,R.push({x1:X.x-at.dx,y1:X.y-at.dy,x2:X.x+at.dx,y2:X.y+at.dy})}}}return R}t.renderHexJSON=s,t.getGridForHexJSON=i,t.getBoundaryDotsForHexJSON=a,t.getBoundarySegmentsForHexJSON=o,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(Ht,re){return Ht.parent===re.parent?1:2}function s(Ht){return Ht.reduce(h,0)/Ht.length}function h(Ht,re){return Ht+re.x}function r(Ht){return 1+Ht.reduce(c,0)}function c(Ht,re){return Math.max(Ht,re.y)}function n(Ht){for(var re;re=Ht.children;)Ht=re[0];return Ht}function i(Ht){for(var re;re=Ht.children;)Ht=re[re.length-1];return Ht}function a(){var Ht=u,re=1,Te=1,ae=!1;function xe(qe){var zn,ar=0;qe.eachAfter(function(hn){var Pr=hn.children;Pr?(hn.x=s(Pr),hn.y=r(Pr)):(hn.x=zn?ar+=Ht(hn,zn):0,hn.y=0,zn=hn)});var _n=n(qe),Cn=i(qe),Or=_n.x-Ht(_n,Cn)/2,Ar=Cn.x+Ht(Cn,_n)/2;return qe.eachAfter(ae?function(hn){hn.x=(hn.x-qe.x)*re,hn.y=(qe.y-hn.y)*Te}:function(hn){hn.x=(hn.x-Or)/(Ar-Or)*re,hn.y=(1-(qe.y?hn.y/qe.y:1))*Te})}return xe.separation=function(qe){return arguments.length?(Ht=qe,xe):Ht},xe.size=function(qe){return arguments.length?(ae=!1,re=+qe[0],Te=+qe[1],xe):ae?null:[re,Te]},xe.nodeSize=function(qe){return arguments.length?(ae=!0,re=+qe[0],Te=+qe[1],xe):ae?[re,Te]:null},xe}function o(Ht){var re=0,Te=Ht.children,ae=Te&&Te.length;if(!ae)re=1;else for(;--ae>=0;)re+=Te[ae].value;Ht.value=re}function l(){return this.eachAfter(o)}function f(Ht){var re=this,Te,ae=[re],xe,qe,zn;do for(Te=ae.reverse(),ae=[];re=Te.pop();)if(Ht(re),xe=re.children,xe)for(qe=0,zn=xe.length;qe<zn;++qe)ae.push(xe[qe]);while(ae.length);return this}function v(Ht){for(var re=this,Te=[re],ae,xe;re=Te.pop();)if(Ht(re),ae=re.children,ae)for(xe=ae.length-1;xe>=0;--xe)Te.push(ae[xe]);return this}function b(Ht){for(var re=this,Te=[re],ae=[],xe,qe,zn;re=Te.pop();)if(ae.push(re),xe=re.children,xe)for(qe=0,zn=xe.length;qe<zn;++qe)Te.push(xe[qe]);for(;re=ae.pop();)Ht(re);return this}function g(Ht){return this.eachAfter(function(re){for(var Te=+Ht(re.data)||0,ae=re.children,xe=ae&&ae.length;--xe>=0;)Te+=ae[xe].value;re.value=Te})}function y(Ht){return this.eachBefore(function(re){re.children&&re.children.sort(Ht)})}function _(Ht){for(var re=this,Te=M(re,Ht),ae=[re];re!==Te;)re=re.parent,ae.push(re);for(var xe=ae.length;Ht!==Te;)ae.splice(xe,0,Ht),Ht=Ht.parent;return ae}function M(Ht,re){if(Ht===re)return Ht;var Te=Ht.ancestors(),ae=re.ancestors(),xe=null;for(Ht=Te.pop(),re=ae.pop();Ht===re;)xe=Ht,Ht=Te.pop(),re=ae.pop();return xe}function x(){for(var Ht=this,re=[Ht];Ht=Ht.parent;)re.push(Ht);return re}function m(){var Ht=[];return this.each(function(re){Ht.push(re)}),Ht}function S(){var Ht=[];return this.eachBefore(function(re){re.children||Ht.push(re)}),Ht}function P(){var Ht=this,re=[];return Ht.each(function(Te){Te!==Ht&&re.push({source:Te.parent,target:Te})}),re}function A(Ht,re){var Te=new K(Ht),ae=+Ht.value&&(Te.value=Ht.value),xe,qe=[Te],zn,ar,_n,Cn;for(re==null&&(re=R);xe=qe.pop();)if(ae&&(xe.value=+xe.data.value),(ar=re(xe.data))&&(Cn=ar.length))for(xe.children=new Array(Cn),_n=Cn-1;_n>=0;--_n)qe.push(zn=xe.children[_n]=new K(ar[_n])),zn.parent=xe,zn.depth=xe.depth+1;return Te.eachBefore(N)}function O(){return A(this).eachBefore(H)}function R(Ht){return Ht.children}function H(Ht){Ht.data=Ht.data.data}function N(Ht){var re=0;do Ht.height=re;while((Ht=Ht.parent)&&Ht.height<++re)}function K(Ht){this.data=Ht,this.depth=this.height=0,this.parent=null}K.prototype=A.prototype={constructor:K,count:l,each:f,eachAfter:b,eachBefore:v,sum:g,sort:y,path:_,ancestors:x,descendants:m,leaves:S,links:P,copy:O};var V=Array.prototype.slice;function k(Ht){for(var re=Ht.length,Te,ae;re;)ae=Math.random()*re--|0,Te=Ht[re],Ht[re]=Ht[ae],Ht[ae]=Te;return Ht}function Z(Ht){for(var re=0,Te=(Ht=k(V.call(Ht))).length,ae=[],xe,qe;re<Te;)xe=Ht[re],qe&&pt(qe,xe)?++re:(qe=ft(ae=X(ae,xe)),re=0);return qe}function X(Ht,re){var Te,ae;if(gt(re,Ht))return[re];for(Te=0;Te<Ht.length;++Te)if(at(re,Ht[Te])&&gt(Nt(Ht[Te],re),Ht))return[Ht[Te],re];for(Te=0;Te<Ht.length-1;++Te)for(ae=Te+1;ae<Ht.length;++ae)if(at(Nt(Ht[Te],Ht[ae]),re)&&at(Nt(Ht[Te],re),Ht[ae])&&at(Nt(Ht[ae],re),Ht[Te])&&gt(Dt(Ht[Te],Ht[ae],re),Ht))return[Ht[Te],Ht[ae],re];throw new Error}function at(Ht,re){var Te=Ht.r-re.r,ae=re.x-Ht.x,xe=re.y-Ht.y;return Te<0||Te*Te<ae*ae+xe*xe}function pt(Ht,re){var Te=Ht.r-re.r+1e-6,ae=re.x-Ht.x,xe=re.y-Ht.y;return Te>0&&Te*Te>ae*ae+xe*xe}function gt(Ht,re){for(var Te=0;Te<re.length;++Te)if(!pt(Ht,re[Te]))return!1;return!0}function ft(Ht){switch(Ht.length){case 1:return Rt(Ht[0]);case 2:return Nt(Ht[0],Ht[1]);case 3:return Dt(Ht[0],Ht[1],Ht[2])}}function Rt(Ht){return{x:Ht.x,y:Ht.y,r:Ht.r}}function Nt(Ht,re){var Te=Ht.x,ae=Ht.y,xe=Ht.r,qe=re.x,zn=re.y,ar=re.r,_n=qe-Te,Cn=zn-ae,Or=ar-xe,Ar=Math.sqrt(_n*_n+Cn*Cn);return{x:(Te+qe+_n/Ar*Or)/2,y:(ae+zn+Cn/Ar*Or)/2,r:(Ar+xe+ar)/2}}function Dt(Ht,re,Te){var ae=Ht.x,xe=Ht.y,qe=Ht.r,zn=re.x,ar=re.y,_n=re.r,Cn=Te.x,Or=Te.y,Ar=Te.r,hn=ae-zn,Pr=ae-Cn,yr=xe-ar,Re=xe-Or,We=_n-qe,Ye=Ar-qe,dn=ae*ae+xe*xe-qe*qe,En=dn-zn*zn-ar*ar+_n*_n,Dn=dn-Cn*Cn-Or*Or+Ar*Ar,Sn=Pr*yr-hn*Re,Nn=(yr*Dn-Re*En)/(Sn*2)-ae,nr=(Re*We-yr*Ye)/Sn,Gn=(Pr*En-hn*Dn)/(Sn*2)-xe,Tn=(hn*Ye-Pr*We)/Sn,Cr=nr*nr+Tn*Tn-1,pr=2*(qe+Nn*nr+Gn*Tn),zr=Nn*Nn+Gn*Gn-qe*qe,Ei=-(Cr?(pr+Math.sqrt(pr*pr-4*Cr*zr))/(2*Cr):zr/pr);return{x:ae+Nn+nr*Ei,y:xe+Gn+Tn*Ei,r:Ei}}function St(Ht,re,Te){var ae=Ht.x-re.x,xe,qe,zn=Ht.y-re.y,ar,_n,Cn=ae*ae+zn*zn;Cn?(qe=re.r+Te.r,qe*=qe,_n=Ht.r+Te.r,_n*=_n,qe>_n?(xe=(Cn+_n-qe)/(2*Cn),ar=Math.sqrt(Math.max(0,_n/Cn-xe*xe)),Te.x=Ht.x-xe*ae-ar*zn,Te.y=Ht.y-xe*zn+ar*ae):(xe=(Cn+qe-_n)/(2*Cn),ar=Math.sqrt(Math.max(0,qe/Cn-xe*xe)),Te.x=re.x+xe*ae-ar*zn,Te.y=re.y+xe*zn+ar*ae)):(Te.x=re.x+Te.r,Te.y=re.y)}function xt(Ht,re){var Te=Ht.r+re.r-1e-6,ae=re.x-Ht.x,xe=re.y-Ht.y;return Te>0&&Te*Te>ae*ae+xe*xe}function Ot(Ht){var re=Ht._,Te=Ht.next._,ae=re.r+Te.r,xe=(re.x*Te.r+Te.x*re.r)/ae,qe=(re.y*Te.r+Te.y*re.r)/ae;return xe*xe+qe*qe}function it(Ht){this._=Ht,this.next=null,this.previous=null}function At(Ht){if(!(xe=Ht.length))return 0;var re,Te,ae,xe,qe,zn,ar,_n,Cn,Or,Ar;if(re=Ht[0],re.x=0,re.y=0,!(xe>1))return re.r;if(Te=Ht[1],re.x=-Te.r,Te.x=re.r,Te.y=0,!(xe>2))return re.r+Te.r;St(Te,re,ae=Ht[2]),re=new it(re),Te=new it(Te),ae=new it(ae),re.next=ae.previous=Te,Te.next=re.previous=ae,ae.next=Te.previous=re;t:for(ar=3;ar<xe;++ar){St(re._,Te._,ae=Ht[ar]),ae=new it(ae),_n=Te.next,Cn=re.previous,Or=Te._.r,Ar=re._.r;do if(Or<=Ar){if(xt(_n._,ae._)){Te=_n,re.next=Te,Te.previous=re,--ar;continue t}Or+=_n._.r,_n=_n.next}else{if(xt(Cn._,ae._)){re=Cn,re.next=Te,Te.previous=re,--ar;continue t}Ar+=Cn._.r,Cn=Cn.previous}while(_n!==Cn.next);for(ae.previous=re,ae.next=Te,re.next=Te.previous=Te=ae,qe=Ot(re);(ae=ae.next)!==Te;)(zn=Ot(ae))<qe&&(re=ae,qe=zn);Te=re.next}for(re=[Te._],ae=Te;(ae=ae.next)!==Te;)re.push(ae._);for(ae=Z(re),ar=0;ar<xe;++ar)re=Ht[ar],re.x-=ae.x,re.y-=ae.y;return ae.r}function z(Ht){return At(Ht),Ht}function q(Ht){return Ht==null?null:mt(Ht)}function mt(Ht){if(typeof Ht!="function")throw new Error;return Ht}function et(){return 0}function st(Ht){return function(){return Ht}}function bt(Ht){return Math.sqrt(Ht.value)}function Y(){var Ht=null,re=1,Te=1,ae=et;function xe(qe){return qe.x=re/2,qe.y=Te/2,Ht?qe.eachBefore(rt(Ht)).eachAfter(ot(ae,.5)).eachBefore($(1)):qe.eachBefore(rt(bt)).eachAfter(ot(et,1)).eachAfter(ot(ae,qe.r/Math.min(re,Te))).eachBefore($(Math.min(re,Te)/(2*qe.r))),qe}return xe.radius=function(qe){return arguments.length?(Ht=q(qe),xe):Ht},xe.size=function(qe){return arguments.length?(re=+qe[0],Te=+qe[1],xe):[re,Te]},xe.padding=function(qe){return arguments.length?(ae=typeof qe=="function"?qe:st(+qe),xe):ae},xe}function rt(Ht){return function(re){re.children||(re.r=Math.max(0,+Ht(re)||0))}}function ot(Ht,re){return function(Te){if(ae=Te.children){var ae,xe,qe=ae.length,zn=Ht(Te)*re||0,ar;if(zn)for(xe=0;xe<qe;++xe)ae[xe].r+=zn;if(ar=At(ae),zn)for(xe=0;xe<qe;++xe)ae[xe].r-=zn;Te.r=ar+zn}}}function $(Ht){return function(re){var Te=re.parent;re.r*=Ht,Te&&(re.x=Te.x+Ht*re.x,re.y=Te.y+Ht*re.y)}}function Pt(Ht){Ht.x0=Math.round(Ht.x0),Ht.y0=Math.round(Ht.y0),Ht.x1=Math.round(Ht.x1),Ht.y1=Math.round(Ht.y1)}function yt(Ht,re,Te,ae,xe){for(var qe=Ht.children,zn,ar=-1,_n=qe.length,Cn=Ht.value&&(ae-re)/Ht.value;++ar<_n;)zn=qe[ar],zn.y0=Te,zn.y1=xe,zn.x0=re,zn.x1=re+=zn.value*Cn}function Ft(){var Ht=1,re=1,Te=0,ae=!1;function xe(zn){var ar=zn.height+1;return zn.x0=zn.y0=Te,zn.x1=Ht,zn.y1=re/ar,zn.eachBefore(qe(re,ar)),ae&&zn.eachBefore(Pt),zn}function qe(zn,ar){return function(_n){_n.children&&yt(_n,_n.x0,zn*(_n.depth+1)/ar,_n.x1,zn*(_n.depth+2)/ar);var Cn=_n.x0,Or=_n.y0,Ar=_n.x1-Te,hn=_n.y1-Te;Ar<Cn&&(Cn=Ar=(Cn+Ar)/2),hn<Or&&(Or=hn=(Or+hn)/2),_n.x0=Cn,_n.y0=Or,_n.x1=Ar,_n.y1=hn}}return xe.round=function(zn){return arguments.length?(ae=!!zn,xe):ae},xe.size=function(zn){return arguments.length?(Ht=+zn[0],re=+zn[1],xe):[Ht,re]},xe.padding=function(zn){return arguments.length?(Te=+zn,xe):Te},xe}var Qt="$",ne={depth:-1},Wt={};function $t(Ht){return Ht.id}function De(Ht){return Ht.parentId}function Je(){var Ht=$t,re=De;function Te(ae){var xe,qe,zn=ae.length,ar,_n,Cn,Or=new Array(zn),Ar,hn,Pr={};for(qe=0;qe<zn;++qe)xe=ae[qe],Cn=Or[qe]=new K(xe),(Ar=Ht(xe,qe,ae))!=null&&(Ar+="")&&(hn=Qt+(Cn.id=Ar),Pr[hn]=hn in Pr?Wt:Cn);for(qe=0;qe<zn;++qe)if(Cn=Or[qe],Ar=re(ae[qe],qe,ae),Ar==null||!(Ar+="")){if(ar)throw new Error("multiple roots");ar=Cn}else{if(_n=Pr[Qt+Ar],!_n)throw new Error("missing: "+Ar);if(_n===Wt)throw new Error("ambiguous: "+Ar);_n.children?_n.children.push(Cn):_n.children=[Cn],Cn.parent=_n}if(!ar)throw new Error("no root");if(ar.parent=ne,ar.eachBefore(function(yr){yr.depth=yr.parent.depth+1,--zn}).eachBefore(N),ar.parent=null,zn>0)throw new Error("cycle");return ar}return Te.id=function(ae){return arguments.length?(Ht=mt(ae),Te):Ht},Te.parentId=function(ae){return arguments.length?(re=mt(ae),Te):re},Te}function Qe(Ht,re){return Ht.parent===re.parent?1:2}function de(Ht){var re=Ht.children;return re?re[0]:Ht.t}function ue(Ht){var re=Ht.children;return re?re[re.length-1]:Ht.t}function Ne(Ht,re,Te){var ae=Te/(re.i-Ht.i);re.c-=ae,re.s+=Te,Ht.c+=ae,re.z+=Te,re.m+=Te}function cn(Ht){for(var re=0,Te=0,ae=Ht.children,xe=ae.length,qe;--xe>=0;)qe=ae[xe],qe.z+=re,qe.m+=re,re+=qe.s+(Te+=qe.c)}function Fn(Ht,re,Te){return Ht.a.parent===re.parent?Ht.a:Te}function wn(Ht,re){this._=Ht,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=re}wn.prototype=Object.create(K.prototype);function en(Ht){for(var re=new wn(Ht,0),Te,ae=[re],xe,qe,zn,ar;Te=ae.pop();)if(qe=Te._.children)for(Te.children=new Array(ar=qe.length),zn=ar-1;zn>=0;--zn)ae.push(xe=Te.children[zn]=new wn(qe[zn],zn)),xe.parent=Te;return(re.parent=new wn(null,0)).children=[re],re}function tn(){var Ht=Qe,re=1,Te=1,ae=null;function xe(Cn){var Or=en(Cn);if(Or.eachAfter(qe),Or.parent.m=-Or.z,Or.eachBefore(zn),ae)Cn.eachBefore(_n);else{var Ar=Cn,hn=Cn,Pr=Cn;Cn.eachBefore(function(dn){dn.x<Ar.x&&(Ar=dn),dn.x>hn.x&&(hn=dn),dn.depth>Pr.depth&&(Pr=dn)});var yr=Ar===hn?1:Ht(Ar,hn)/2,Re=yr-Ar.x,We=re/(hn.x+yr+Re),Ye=Te/(Pr.depth||1);Cn.eachBefore(function(dn){dn.x=(dn.x+Re)*We,dn.y=dn.depth*Ye})}return Cn}function qe(Cn){var Or=Cn.children,Ar=Cn.parent.children,hn=Cn.i?Ar[Cn.i-1]:null;if(Or){cn(Cn);var Pr=(Or[0].z+Or[Or.length-1].z)/2;hn?(Cn.z=hn.z+Ht(Cn._,hn._),Cn.m=Cn.z-Pr):Cn.z=Pr}else hn&&(Cn.z=hn.z+Ht(Cn._,hn._));Cn.parent.A=ar(Cn,hn,Cn.parent.A||Ar[0])}function zn(Cn){Cn._.x=Cn.z+Cn.parent.m,Cn.m+=Cn.parent.m}function ar(Cn,Or,Ar){if(Or){for(var hn=Cn,Pr=Cn,yr=Or,Re=hn.parent.children[0],We=hn.m,Ye=Pr.m,dn=yr.m,En=Re.m,Dn;yr=ue(yr),hn=de(hn),yr&&hn;)Re=de(Re),Pr=ue(Pr),Pr.a=Cn,Dn=yr.z+dn-hn.z-We+Ht(yr._,hn._),Dn>0&&(Ne(Fn(yr,Cn,Ar),Cn,Dn),We+=Dn,Ye+=Dn),dn+=yr.m,We+=hn.m,En+=Re.m,Ye+=Pr.m;yr&&!ue(Pr)&&(Pr.t=yr,Pr.m+=dn-Ye),hn&&!de(Re)&&(Re.t=hn,Re.m+=We-En,Ar=Cn)}return Ar}function _n(Cn){Cn.x*=re,Cn.y=Cn.depth*Te}return xe.separation=function(Cn){return arguments.length?(Ht=Cn,xe):Ht},xe.size=function(Cn){return arguments.length?(ae=!1,re=+Cn[0],Te=+Cn[1],xe):ae?null:[re,Te]},xe.nodeSize=function(Cn){return arguments.length?(ae=!0,re=+Cn[0],Te=+Cn[1],xe):ae?[re,Te]:null},xe}function xn(Ht,re,Te,ae,xe){for(var qe=Ht.children,zn,ar=-1,_n=qe.length,Cn=Ht.value&&(xe-Te)/Ht.value;++ar<_n;)zn=qe[ar],zn.x0=re,zn.x1=ae,zn.y0=Te,zn.y1=Te+=zn.value*Cn}var Bn=(1+Math.sqrt(5))/2;function vr(Ht,re,Te,ae,xe,qe){for(var zn=[],ar=re.children,_n,Cn,Or=0,Ar=0,hn=ar.length,Pr,yr,Re=re.value,We,Ye,dn,En,Dn,Sn,Nn;Or<hn;){Pr=xe-Te,yr=qe-ae;do We=ar[Ar++].value;while(!We&&Ar<hn);for(Ye=dn=We,Sn=Math.max(yr/Pr,Pr/yr)/(Re*Ht),Nn=We*We*Sn,Dn=Math.max(dn/Nn,Nn/Ye);Ar<hn;++Ar){if(We+=Cn=ar[Ar].value,Cn<Ye&&(Ye=Cn),Cn>dn&&(dn=Cn),Nn=We*We*Sn,En=Math.max(dn/Nn,Nn/Ye),En>Dn){We-=Cn;break}Dn=En}zn.push(_n={value:We,dice:Pr<yr,children:ar.slice(Or,Ar)}),_n.dice?yt(_n,Te,ae,xe,Re?ae+=yr*We/Re:qe):xn(_n,Te,ae,Re?Te+=Pr*We/Re:xe,qe),Re-=We,Or=Ar}return zn}var li=function Ht(re){function Te(ae,xe,qe,zn,ar){vr(re,ae,xe,qe,zn,ar)}return Te.ratio=function(ae){return Ht((ae=+ae)>1?ae:1)},Te}(Bn);function Me(){var Ht=li,re=!1,Te=1,ae=1,xe=[0],qe=et,zn=et,ar=et,_n=et,Cn=et;function Or(hn){return hn.x0=hn.y0=0,hn.x1=Te,hn.y1=ae,hn.eachBefore(Ar),xe=[0],re&&hn.eachBefore(Pt),hn}function Ar(hn){var Pr=xe[hn.depth],yr=hn.x0+Pr,Re=hn.y0+Pr,We=hn.x1-Pr,Ye=hn.y1-Pr;We<yr&&(yr=We=(yr+We)/2),Ye<Re&&(Re=Ye=(Re+Ye)/2),hn.x0=yr,hn.y0=Re,hn.x1=We,hn.y1=Ye,hn.children&&(Pr=xe[hn.depth+1]=qe(hn)/2,yr+=Cn(hn)-Pr,Re+=zn(hn)-Pr,We-=ar(hn)-Pr,Ye-=_n(hn)-Pr,We<yr&&(yr=We=(yr+We)/2),Ye<Re&&(Re=Ye=(Re+Ye)/2),Ht(hn,yr,Re,We,Ye))}return Or.round=function(hn){return arguments.length?(re=!!hn,Or):re},Or.size=function(hn){return arguments.length?(Te=+hn[0],ae=+hn[1],Or):[Te,ae]},Or.tile=function(hn){return arguments.length?(Ht=mt(hn),Or):Ht},Or.padding=function(hn){return arguments.length?Or.paddingInner(hn).paddingOuter(hn):Or.paddingInner()},Or.paddingInner=function(hn){return arguments.length?(qe=typeof hn=="function"?hn:st(+hn),Or):qe},Or.paddingOuter=function(hn){return arguments.length?Or.paddingTop(hn).paddingRight(hn).paddingBottom(hn).paddingLeft(hn):Or.paddingTop()},Or.paddingTop=function(hn){return arguments.length?(zn=typeof hn=="function"?hn:st(+hn),Or):zn},Or.paddingRight=function(hn){return arguments.length?(ar=typeof hn=="function"?hn:st(+hn),Or):ar},Or.paddingBottom=function(hn){return arguments.length?(_n=typeof hn=="function"?hn:st(+hn),Or):_n},Or.paddingLeft=function(hn){return arguments.length?(Cn=typeof hn=="function"?hn:st(+hn),Or):Cn},Or}function Pe(Ht,re,Te,ae,xe){var qe=Ht.children,zn,ar=qe.length,_n,Cn=new Array(ar+1);for(Cn[0]=_n=zn=0;zn<ar;++zn)Cn[zn+1]=_n+=qe[zn].value;Or(0,ar,Ht.value,re,Te,ae,xe);function Or(Ar,hn,Pr,yr,Re,We,Ye){if(Ar>=hn-1){var dn=qe[Ar];dn.x0=yr,dn.y0=Re,dn.x1=We,dn.y1=Ye;return}for(var En=Cn[Ar],Dn=Pr/2+En,Sn=Ar+1,Nn=hn-1;Sn<Nn;){var nr=Sn+Nn>>>1;Cn[nr]<Dn?Sn=nr+1:Nn=nr}Dn-Cn[Sn-1]<Cn[Sn]-Dn&&Ar+1<Sn&&--Sn;var Gn=Cn[Sn]-En,Tn=Pr-Gn;if(We-yr>Ye-Re){var Cr=(yr*Tn+We*Gn)/Pr;Or(Ar,Sn,Gn,yr,Re,Cr,Ye),Or(Sn,hn,Tn,Cr,Re,We,Ye)}else{var pr=(Re*Tn+Ye*Gn)/Pr;Or(Ar,Sn,Gn,yr,Re,We,pr),Or(Sn,hn,Tn,yr,pr,We,Ye)}}}function te(Ht,re,Te,ae,xe){(Ht.depth&1?xn:yt)(Ht,re,Te,ae,xe)}var ge=function Ht(re){function Te(ae,xe,qe,zn,ar){if((_n=ae._squarify)&&_n.ratio===re)for(var _n,Cn,Or,Ar,hn=-1,Pr,yr=_n.length,Re=ae.value;++hn<yr;){for(Cn=_n[hn],Or=Cn.children,Ar=Cn.value=0,Pr=Or.length;Ar<Pr;++Ar)Cn.value+=Or[Ar].value;Cn.dice?yt(Cn,xe,qe,zn,qe+=(ar-qe)*Cn.value/Re):xn(Cn,xe,qe,xe+=(zn-xe)*Cn.value/Re,ar),Re-=Cn.value}else ae._squarify=_n=vr(re,ae,xe,qe,zn,ar),_n.ratio=re}return Te.ratio=function(ae){return Ht((ae=+ae)>1?ae:1)},Te}(Bn);t.cluster=a,t.hierarchy=A,t.pack=Y,t.packEnclose=Z,t.packSiblings=z,t.partition=Ft,t.stratify=Je,t.tree=tn,t.treemap=Me,t.treemapBinary=Pe,t.treemapDice=yt,t.treemapResquarify=ge,t.treemapSlice=xn,t.treemapSliceDice=te,t.treemapSquarify=li,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u=Math.PI,s=2*u,h=1e-6,r=s-h;function c(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new c}c.prototype=n.prototype={constructor:c,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,l,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+l)+","+(this._y1=+f)},bezierCurveTo:function(a,o,l,f,v,b){this._+="C"+ +a+","+ +o+","+ +l+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,l,f,v){a=+a,o=+o,l=+l,f=+f,v=+v;var b=this._x1,g=this._y1,y=l-a,_=f-o,M=b-a,x=g-o,m=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(m>h)if(!(Math.abs(x*y-_*M)>h)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=l-b,P=f-g,A=y*y+_*_,O=S*S+P*P,R=Math.sqrt(A),H=Math.sqrt(m),N=v*Math.tan((u-Math.acos((A+m-O)/(2*R*H)))/2),K=N/H,V=N/R;Math.abs(K-1)>h&&(this._+="L"+(a+K*M)+","+(o+K*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+V*y)+","+(this._y1=o+V*_)}},arc:function(a,o,l,f,v,b){a=+a,o=+o,l=+l,b=!!b;var g=l*Math.cos(f),y=l*Math.sin(f),_=a+g,M=o+y,x=1^b,m=b?f-v:v-f;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>h||Math.abs(this._y1-M)>h)&&(this._+="L"+_+","+M),!!l&&(m<0&&(m=m%s+s),m>r?this._+="A"+l+","+l+",0,1,"+x+","+(a-g)+","+(o-y)+"A"+l+","+l+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):m>h&&(this._+="A"+l+","+l+",0,"+ +(m>=u)+","+x+","+(this._x1=a+l*Math.cos(v))+","+(this._y1=o+l*Math.sin(v))))},rect:function(a,o,l,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +l+"v"+ +f+"h"+-l+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u=Math.PI,s=2*u,h=1e-6,r=s-h;function c(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new c}c.prototype=n.prototype={constructor:c,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,l,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+l)+","+(this._y1=+f)},bezierCurveTo:function(a,o,l,f,v,b){this._+="C"+ +a+","+ +o+","+ +l+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,l,f,v){a=+a,o=+o,l=+l,f=+f,v=+v;var b=this._x1,g=this._y1,y=l-a,_=f-o,M=b-a,x=g-o,m=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(m>h)if(!(Math.abs(x*y-_*M)>h)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=l-b,P=f-g,A=y*y+_*_,O=S*S+P*P,R=Math.sqrt(A),H=Math.sqrt(m),N=v*Math.tan((u-Math.acos((A+m-O)/(2*R*H)))/2),K=N/H,V=N/R;Math.abs(K-1)>h&&(this._+="L"+(a+K*M)+","+(o+K*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+V*y)+","+(this._y1=o+V*_)}},arc:function(a,o,l,f,v,b){a=+a,o=+o,l=+l,b=!!b;var g=l*Math.cos(f),y=l*Math.sin(f),_=a+g,M=o+y,x=1^b,m=b?f-v:v-f;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>h||Math.abs(this._y1-M)>h)&&(this._+="L"+_+","+M),!!l&&(m<0&&(m=m%s+s),m>r?this._+="A"+l+","+l+",0,1,"+x+","+(a-g)+","+(o-y)+"A"+l+","+l+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):m>h&&(this._+="A"+l+","+l+",0,"+ +(m>=u)+","+x+","+(this._x1=a+l*Math.cos(v))+","+(this._y1=o+l*Math.sin(v))))},rect:function(a,o,l,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +l+"v"+ +f+"h"+-l+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"),e("./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js"),e("./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js"))})(this,function(u,s,h,r){"use strict";function c(O){return O.target.depth}function n(O){return O.depth}function i(O,R){return R-1-O.height}function a(O,R){return O.sourceLinks.length?O.depth:R-1}function o(O){return O.targetLinks.length?O.depth:O.sourceLinks.length?s.min(O.sourceLinks,c)-1:0}function l(O){return function(){return O}}function f(O,R){return b(O.source,R.source)||O.index-R.index}function v(O,R){return b(O.target,R.target)||O.index-R.index}function b(O,R){return O.y0-R.y0}function g(O){return O.value}function y(O){return O.index}function _(O){return O.nodes}function M(O){return O.links}function x(O,R){var H=O.get(R);if(!H)throw new Error("missing: "+R);return H}function m(){var O=0,R=0,H=1,N=1,K=24,V=8,k=y,Z=a,X,at=_,pt=M,gt=6;function ft(){var Ot={nodes:at.apply(null,arguments),links:pt.apply(null,arguments)};return Rt(Ot),Nt(Ot),Dt(Ot),St(Ot),xt(Ot),Ot}ft.update=function(Ot){return xt(Ot),Ot},ft.nodeId=function(Ot){return arguments.length?(k=typeof Ot=="function"?Ot:l(Ot),ft):k},ft.nodeAlign=function(Ot){return arguments.length?(Z=typeof Ot=="function"?Ot:l(Ot),ft):Z},ft.nodeSort=function(Ot){return arguments.length?(X=Ot,ft):X},ft.nodeWidth=function(Ot){return arguments.length?(K=+Ot,ft):K},ft.nodePadding=function(Ot){return arguments.length?(V=+Ot,ft):V},ft.nodes=function(Ot){return arguments.length?(at=typeof Ot=="function"?Ot:l(Ot),ft):at},ft.links=function(Ot){return arguments.length?(pt=typeof Ot=="function"?Ot:l(Ot),ft):pt},ft.size=function(Ot){return arguments.length?(O=R=0,H=+Ot[0],N=+Ot[1],ft):[H-O,N-R]},ft.extent=function(Ot){return arguments.length?(O=+Ot[0][0],H=+Ot[1][0],R=+Ot[0][1],N=+Ot[1][1],ft):[[O,R],[H,N]]},ft.iterations=function(Ot){return arguments.length?(gt=+Ot,ft):gt};function Rt(Ot){Ot.nodes.forEach(function(At,z){At.index=z,At.sourceLinks=[],At.targetLinks=[]});var it=h.map(Ot.nodes,k);Ot.links.forEach(function(At,z){At.index=z;var q=At.source,mt=At.target;typeof q!="object"&&(q=At.source=x(it,q)),typeof mt!="object"&&(mt=At.target=x(it,mt)),q.sourceLinks.push(At),mt.targetLinks.push(At)})}function Nt(Ot){Ot.nodes.forEach(function(it){it.value=Math.max(s.sum(it.sourceLinks,g),s.sum(it.targetLinks,g))})}function Dt(Ot){var it,At,z,q=Ot.nodes.length;for(it=Ot.nodes,At=[],z=0;it.length;++z,it=At,At=[]){if(z>q)throw new Error("circular link");it.forEach(function(et){et.depth=z,et.sourceLinks.forEach(function(st){At.indexOf(st.target)<0&&At.push(st.target)})})}for(it=Ot.nodes,At=[],z=0;it.length;++z,it=At,At=[]){if(z>q)throw new Error("circular link");it.forEach(function(et){et.height=z,et.targetLinks.forEach(function(st){At.indexOf(st.source)<0&&At.push(st.source)})})}var mt=(H-O-K)/(z-1);Ot.nodes.forEach(function(et){et.x1=(et.x0=O+Math.max(0,Math.min(z-1,Math.floor(Z.call(null,et,z))))*mt)+K})}function St(Ot){var it=h.nest().key(function(bt){return bt.x0}).sortKeys(s.ascending).entries(Ot.nodes).map(function(bt){return bt.values});q(),st();for(var At=.9,z=gt;z>0;--z,At*=.9)et(At),st(),mt(At),st();function q(){var bt=s.min(it,function(Y){return(N-R-(Y.length-1)*V)/s.sum(Y,g)});it.forEach(function(Y){X!=null&&Y.sort(X),Y.forEach(function(rt,ot){rt.y1=(rt.y0=ot)+rt.value*bt})}),Ot.links.forEach(function(Y){Y.width=Y.value*bt})}function mt(bt){it.forEach(function(Y){Y.forEach(function(rt){var ot,$,Pt,yt,Ft=rt.y0;try{for(var Qt=t.__values(rt.sourceLinks.sort(v)),ne=Qt.next();!ne.done;ne=Qt.next()){var Wt=ne.value,$t=Wt.target,De=Wt.width,Je=Wt.value;if(Je>0){var Qe=0;try{for(var de=(Pt=void 0,t.__values($t.targetLinks)),ue=de.next();!ue.done;ue=de.next()){var Ne=ue.value,cn=Ne.source,Fn=Ne.width;if(cn===rt)break;Qe+=Fn+V/2}}catch(wn){Pt={error:wn}}finally{try{ue&&!ue.done&&(yt=de.return)&&yt.call(de)}finally{if(Pt)throw Pt.error}}Qe=(Ft-Qe-$t.y0)*bt*(Je/Math.min(rt.value,$t.value)),$t.y0+=Qe,$t.y1+=Qe}Ft+=De+V/2}}catch(wn){ot={error:wn}}finally{try{ne&&!ne.done&&($=Qt.return)&&$.call(Qt)}finally{if(ot)throw ot.error}}})})}function et(bt){it.slice().reverse().forEach(function(Y){Y.forEach(function(rt){var ot,$,Pt,yt,Ft=rt.y0;try{for(var Qt=t.__values(rt.targetLinks.sort(f)),ne=Qt.next();!ne.done;ne=Qt.next()){var Wt=ne.value,$t=Wt.source,De=Wt.width,Je=Wt.value;if(Je>0){var Qe=0;try{for(var de=(Pt=void 0,t.__values($t.sourceLinks)),ue=de.next();!ue.done;ue=de.next()){var Ne=ue.value,cn=Ne.target,Fn=Ne.width;if(cn===rt)break;Qe+=Fn+V/2}}catch(wn){Pt={error:wn}}finally{try{ue&&!ue.done&&(yt=de.return)&&yt.call(de)}finally{if(Pt)throw Pt.error}}Qe=(Ft-Qe-$t.y0)*bt*(Je/Math.min(rt.value,$t.value)),$t.y0+=Qe,$t.y1+=Qe}Ft+=De+V/2}}catch(wn){ot={error:wn}}finally{try{ne&&!ne.done&&($=Qt.return)&&$.call(Qt)}finally{if(ot)throw ot.error}}})})}function st(){it.forEach(function(bt){var Y,rt,ot=R,$=bt.length,Pt;for(X===void 0&&bt.sort(b),Pt=0;Pt<$;++Pt)Y=bt[Pt],rt=ot-Y.y0,rt>0&&(Y.y0+=rt,Y.y1+=rt),ot=Y.y1+V;if(rt=ot-V-N,rt>0)for(ot=Y.y0-=rt,Y.y1-=rt,Pt=$-2;Pt>=0;--Pt)Y=bt[Pt],rt=Y.y1+V-ot,rt>0&&(Y.y0-=rt,Y.y1-=rt),ot=Y.y0})}}function xt(Ot){Ot.nodes.forEach(function(it){it.sourceLinks.sort(v),it.targetLinks.sort(f)}),Ot.nodes.forEach(function(it){var At=it.y0,z=At;it.sourceLinks.forEach(function(q){q.y0=At+q.width/2,At+=q.width}),it.targetLinks.forEach(function(q){q.y1=z+q.width/2,z+=q.width})})}return ft}function S(O){return[O.source.x1,O.y0]}function P(O){return[O.target.x0,O.y1]}function A(){return r.linkHorizontal().source(S).target(P)}u.sankey=m,u.sankeyCenter=o,u.sankeyLeft=n,u.sankeyRight=i,u.sankeyJustify=a,u.sankeyLinkHorizontal=A,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))})(this,function(t,u){"use strict";function s(je){return function(){return je}}var h=Math.abs,r=Math.atan2,c=Math.cos,n=Math.max,i=Math.min,a=Math.sin,o=Math.sqrt,l=1e-12,f=Math.PI,v=f/2,b=2*f;function g(je){return je>1?0:je<-1?f:Math.acos(je)}function y(je){return je>=1?v:je<=-1?-v:Math.asin(je)}function _(je){return je.innerRadius}function M(je){return je.outerRadius}function x(je){return je.startAngle}function m(je){return je.endAngle}function S(je){return je&&je.padAngle}function P(je,oe,Zt,be,sn,Vn,er,kn){var Xr=Zt-je,vi=be-oe,Si=er-sn,ji=kn-Vn,Ji=ji*Xr-Si*vi;if(!(Ji*Ji<l))return Ji=(Si*(oe-Vn)-ji*(je-sn))/Ji,[je+Ji*Xr,oe+Ji*vi]}function A(je,oe,Zt,be,sn,Vn,er){var kn=je-Zt,Xr=oe-be,vi=(er?Vn:-Vn)/o(kn*kn+Xr*Xr),Si=vi*Xr,ji=-vi*kn,Ji=je+Si,za=oe+ji,va=Zt+Si,so=be+ji,Ia=(Ji+va)/2,io=(za+so)/2,uo=va-Ji,ka=so-za,vo=uo*uo+ka*ka,Vo=sn-Vn,Do=Ji*so-va*za,fs=(ka<0?-1:1)*o(n(0,Vo*Vo*vo-Do*Do)),mo=(Do*ka-uo*fs)/vo,Ga=(-Do*uo-ka*fs)/vo,us=(Do*ka+uo*fs)/vo,Xo=(-Do*uo+ka*fs)/vo,Ta=mo-Ia,mn=Ga-io,cr=us-Ia,Wr=Xo-io;return Ta*Ta+mn*mn>cr*cr+Wr*Wr&&(mo=us,Ga=Xo),{cx:mo,cy:Ga,x01:-Si,y01:-ji,x11:mo*(sn/Vo-1),y11:Ga*(sn/Vo-1)}}function O(){var je=_,oe=M,Zt=s(0),be=null,sn=x,Vn=m,er=S,kn=null;function Xr(){var vi,Si,ji=+je.apply(this,arguments),Ji=+oe.apply(this,arguments),za=sn.apply(this,arguments)-v,va=Vn.apply(this,arguments)-v,so=h(va-za),Ia=va>za;if(kn||(kn=vi=u.path()),Ji<ji&&(Si=Ji,Ji=ji,ji=Si),!(Ji>l))kn.moveTo(0,0);else if(so>b-l)kn.moveTo(Ji*c(za),Ji*a(za)),kn.arc(0,0,Ji,za,va,!Ia),ji>l&&(kn.moveTo(ji*c(va),ji*a(va)),kn.arc(0,0,ji,va,za,Ia));else{var io=za,uo=va,ka=za,vo=va,Vo=so,Do=so,fs=er.apply(this,arguments)/2,mo=fs>l&&(be?+be.apply(this,arguments):o(ji*ji+Ji*Ji)),Ga=i(h(Ji-ji)/2,+Zt.apply(this,arguments)),us=Ga,Xo=Ga,Ta,mn;if(mo>l){var cr=y(mo/ji*a(fs)),Wr=y(mo/Ji*a(fs));(Vo-=cr*2)>l?(cr*=Ia?1:-1,ka+=cr,vo-=cr):(Vo=0,ka=vo=(za+va)/2),(Do-=Wr*2)>l?(Wr*=Ia?1:-1,io+=Wr,uo-=Wr):(Do=0,io=uo=(za+va)/2)}var Di=Ji*c(io),Ua=Ji*a(io),yo=ji*c(vo),lo=ji*a(vo);if(Ga>l){var La=Ji*c(uo),Va=Ji*a(uo),ts=ji*c(ka),ls=ji*a(ka),Ki;if(so<f&&(Ki=P(Di,Ua,ts,ls,La,Va,yo,lo))){var _u=Di-Ki[0],Fo=Ua-Ki[1],hs=La-Ki[0],$s=Va-Ki[1],ds=1/a(g((_u*hs+Fo*$s)/(o(_u*_u+Fo*Fo)*o(hs*hs+$s*$s)))/2),vs=o(Ki[0]*Ki[0]+Ki[1]*Ki[1]);us=i(Ga,(ji-vs)/(ds-1)),Xo=i(Ga,(Ji-vs)/(ds+1))}}Do>l?Xo>l?(Ta=A(ts,ls,Di,Ua,Ji,Xo,Ia),mn=A(La,Va,yo,lo,Ji,Xo,Ia),kn.moveTo(Ta.cx+Ta.x01,Ta.cy+Ta.y01),Xo<Ga?kn.arc(Ta.cx,Ta.cy,Xo,r(Ta.y01,Ta.x01),r(mn.y01,mn.x01),!Ia):(kn.arc(Ta.cx,Ta.cy,Xo,r(Ta.y01,Ta.x01),r(Ta.y11,Ta.x11),!Ia),kn.arc(0,0,Ji,r(Ta.cy+Ta.y11,Ta.cx+Ta.x11),r(mn.cy+mn.y11,mn.cx+mn.x11),!Ia),kn.arc(mn.cx,mn.cy,Xo,r(mn.y11,mn.x11),r(mn.y01,mn.x01),!Ia))):(kn.moveTo(Di,Ua),kn.arc(0,0,Ji,io,uo,!Ia)):kn.moveTo(Di,Ua),!(ji>l)||!(Vo>l)?kn.lineTo(yo,lo):us>l?(Ta=A(yo,lo,La,Va,ji,-us,Ia),mn=A(Di,Ua,ts,ls,ji,-us,Ia),kn.lineTo(Ta.cx+Ta.x01,Ta.cy+Ta.y01),us<Ga?kn.arc(Ta.cx,Ta.cy,us,r(Ta.y01,Ta.x01),r(mn.y01,mn.x01),!Ia):(kn.arc(Ta.cx,Ta.cy,us,r(Ta.y01,Ta.x01),r(Ta.y11,Ta.x11),!Ia),kn.arc(0,0,ji,r(Ta.cy+Ta.y11,Ta.cx+Ta.x11),r(mn.cy+mn.y11,mn.cx+mn.x11),Ia),kn.arc(mn.cx,mn.cy,us,r(mn.y11,mn.x11),r(mn.y01,mn.x01),!Ia))):kn.arc(0,0,ji,vo,ka,Ia)}if(kn.closePath(),vi)return kn=null,vi+""||null}return Xr.centroid=function(){var vi=(+je.apply(this,arguments)+ +oe.apply(this,arguments))/2,Si=(+sn.apply(this,arguments)+ +Vn.apply(this,arguments))/2-f/2;return[c(Si)*vi,a(Si)*vi]},Xr.innerRadius=function(vi){return arguments.length?(je=typeof vi=="function"?vi:s(+vi),Xr):je},Xr.outerRadius=function(vi){return arguments.length?(oe=typeof vi=="function"?vi:s(+vi),Xr):oe},Xr.cornerRadius=function(vi){return arguments.length?(Zt=typeof vi=="function"?vi:s(+vi),Xr):Zt},Xr.padRadius=function(vi){return arguments.length?(be=vi==null?null:typeof vi=="function"?vi:s(+vi),Xr):be},Xr.startAngle=function(vi){return arguments.length?(sn=typeof vi=="function"?vi:s(+vi),Xr):sn},Xr.endAngle=function(vi){return arguments.length?(Vn=typeof vi=="function"?vi:s(+vi),Xr):Vn},Xr.padAngle=function(vi){return arguments.length?(er=typeof vi=="function"?vi:s(+vi),Xr):er},Xr.context=function(vi){return arguments.length?(kn=vi==null?null:vi,Xr):kn},Xr}function R(je){this._context=je}R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Zt):this._context.moveTo(oe,Zt);break;case 1:this._point=2;default:this._context.lineTo(oe,Zt);break}}};function H(je){return new R(je)}function N(je){return je[0]}function K(je){return je[1]}function V(){var je=N,oe=K,Zt=s(!0),be=null,sn=H,Vn=null;function er(kn){var Xr,vi=kn.length,Si,ji=!1,Ji;for(be==null&&(Vn=sn(Ji=u.path())),Xr=0;Xr<=vi;++Xr)!(Xr<vi&&Zt(Si=kn[Xr],Xr,kn))===ji&&((ji=!ji)?Vn.lineStart():Vn.lineEnd()),ji&&Vn.point(+je(Si,Xr,kn),+oe(Si,Xr,kn));if(Ji)return Vn=null,Ji+""||null}return er.x=function(kn){return arguments.length?(je=typeof kn=="function"?kn:s(+kn),er):je},er.y=function(kn){return arguments.length?(oe=typeof kn=="function"?kn:s(+kn),er):oe},er.defined=function(kn){return arguments.length?(Zt=typeof kn=="function"?kn:s(!!kn),er):Zt},er.curve=function(kn){return arguments.length?(sn=kn,be!=null&&(Vn=sn(be)),er):sn},er.context=function(kn){return arguments.length?(kn==null?be=Vn=null:Vn=sn(be=kn),er):be},er}function k(){var je=N,oe=null,Zt=s(0),be=K,sn=s(!0),Vn=null,er=H,kn=null;function Xr(Si){var ji,Ji,za,va=Si.length,so,Ia=!1,io,uo=new Array(va),ka=new Array(va);for(Vn==null&&(kn=er(io=u.path())),ji=0;ji<=va;++ji){if(!(ji<va&&sn(so=Si[ji],ji,Si))===Ia)if(Ia=!Ia)Ji=ji,kn.areaStart(),kn.lineStart();else{for(kn.lineEnd(),kn.lineStart(),za=ji-1;za>=Ji;--za)kn.point(uo[za],ka[za]);kn.lineEnd(),kn.areaEnd()}Ia&&(uo[ji]=+je(so,ji,Si),ka[ji]=+Zt(so,ji,Si),kn.point(oe?+oe(so,ji,Si):uo[ji],be?+be(so,ji,Si):ka[ji]))}if(io)return kn=null,io+""||null}function vi(){return V().defined(sn).curve(er).context(Vn)}return Xr.x=function(Si){return arguments.length?(je=typeof Si=="function"?Si:s(+Si),oe=null,Xr):je},Xr.x0=function(Si){return arguments.length?(je=typeof Si=="function"?Si:s(+Si),Xr):je},Xr.x1=function(Si){return arguments.length?(oe=Si==null?null:typeof Si=="function"?Si:s(+Si),Xr):oe},Xr.y=function(Si){return arguments.length?(Zt=typeof Si=="function"?Si:s(+Si),be=null,Xr):Zt},Xr.y0=function(Si){return arguments.length?(Zt=typeof Si=="function"?Si:s(+Si),Xr):Zt},Xr.y1=function(Si){return arguments.length?(be=Si==null?null:typeof Si=="function"?Si:s(+Si),Xr):be},Xr.lineX0=Xr.lineY0=function(){return vi().x(je).y(Zt)},Xr.lineY1=function(){return vi().x(je).y(be)},Xr.lineX1=function(){return vi().x(oe).y(Zt)},Xr.defined=function(Si){return arguments.length?(sn=typeof Si=="function"?Si:s(!!Si),Xr):sn},Xr.curve=function(Si){return arguments.length?(er=Si,Vn!=null&&(kn=er(Vn)),Xr):er},Xr.context=function(Si){return arguments.length?(Si==null?Vn=kn=null:kn=er(Vn=Si),Xr):Vn},Xr}function Z(je,oe){return oe<je?-1:oe>je?1:oe>=je?0:NaN}function X(je){return je}function at(){var je=X,oe=Z,Zt=null,be=s(0),sn=s(b),Vn=s(0);function er(kn){var Xr,vi=kn.length,Si,ji,Ji=0,za=new Array(vi),va=new Array(vi),so=+be.apply(this,arguments),Ia=Math.min(b,Math.max(-b,sn.apply(this,arguments)-so)),io,uo=Math.min(Math.abs(Ia)/vi,Vn.apply(this,arguments)),ka=uo*(Ia<0?-1:1),vo;for(Xr=0;Xr<vi;++Xr)(vo=va[za[Xr]=Xr]=+je(kn[Xr],Xr,kn))>0&&(Ji+=vo);for(oe!=null?za.sort(function(Vo,Do){return oe(va[Vo],va[Do])}):Zt!=null&&za.sort(function(Vo,Do){return Zt(kn[Vo],kn[Do])}),Xr=0,ji=Ji?(Ia-vi*ka)/Ji:0;Xr<vi;++Xr,so=io)Si=za[Xr],vo=va[Si],io=so+(vo>0?vo*ji:0)+ka,va[Si]={data:kn[Si],index:Xr,value:vo,startAngle:so,endAngle:io,padAngle:uo};return va}return er.value=function(kn){return arguments.length?(je=typeof kn=="function"?kn:s(+kn),er):je},er.sortValues=function(kn){return arguments.length?(oe=kn,Zt=null,er):oe},er.sort=function(kn){return arguments.length?(Zt=kn,oe=null,er):Zt},er.startAngle=function(kn){return arguments.length?(be=typeof kn=="function"?kn:s(+kn),er):be},er.endAngle=function(kn){return arguments.length?(sn=typeof kn=="function"?kn:s(+kn),er):sn},er.padAngle=function(kn){return arguments.length?(Vn=typeof kn=="function"?kn:s(+kn),er):Vn},er}var pt=ft(H);function gt(je){this._curve=je}gt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(oe,Zt){this._curve.point(Zt*Math.sin(oe),Zt*-Math.cos(oe))}};function ft(je){function oe(Zt){return new gt(je(Zt))}return oe._curve=je,oe}function Rt(je){var oe=je.curve;return je.angle=je.x,delete je.x,je.radius=je.y,delete je.y,je.curve=function(Zt){return arguments.length?oe(ft(Zt)):oe()._curve},je}function Nt(){return Rt(V().curve(pt))}function Dt(){var je=k().curve(pt),oe=je.curve,Zt=je.lineX0,be=je.lineX1,sn=je.lineY0,Vn=je.lineY1;return je.angle=je.x,delete je.x,je.startAngle=je.x0,delete je.x0,je.endAngle=je.x1,delete je.x1,je.radius=je.y,delete je.y,je.innerRadius=je.y0,delete je.y0,je.outerRadius=je.y1,delete je.y1,je.lineStartAngle=function(){return Rt(Zt())},delete je.lineX0,je.lineEndAngle=function(){return Rt(be())},delete je.lineX1,je.lineInnerRadius=function(){return Rt(sn())},delete je.lineY0,je.lineOuterRadius=function(){return Rt(Vn())},delete je.lineY1,je.curve=function(er){return arguments.length?oe(ft(er)):oe()._curve},je}function St(je,oe){return[(oe=+oe)*Math.cos(je-=Math.PI/2),oe*Math.sin(je)]}var xt=Array.prototype.slice;function Ot(je){return je.source}function it(je){return je.target}function At(je){var oe=Ot,Zt=it,be=N,sn=K,Vn=null;function er(){var kn,Xr=xt.call(arguments),vi=oe.apply(this,Xr),Si=Zt.apply(this,Xr);if(Vn||(Vn=kn=u.path()),je(Vn,+be.apply(this,(Xr[0]=vi,Xr)),+sn.apply(this,Xr),+be.apply(this,(Xr[0]=Si,Xr)),+sn.apply(this,Xr)),kn)return Vn=null,kn+""||null}return er.source=function(kn){return arguments.length?(oe=kn,er):oe},er.target=function(kn){return arguments.length?(Zt=kn,er):Zt},er.x=function(kn){return arguments.length?(be=typeof kn=="function"?kn:s(+kn),er):be},er.y=function(kn){return arguments.length?(sn=typeof kn=="function"?kn:s(+kn),er):sn},er.context=function(kn){return arguments.length?(Vn=kn==null?null:kn,er):Vn},er}function z(je,oe,Zt,be,sn){je.moveTo(oe,Zt),je.bezierCurveTo(oe=(oe+be)/2,Zt,oe,sn,be,sn)}function q(je,oe,Zt,be,sn){je.moveTo(oe,Zt),je.bezierCurveTo(oe,Zt=(Zt+sn)/2,be,Zt,be,sn)}function mt(je,oe,Zt,be,sn){var Vn=St(oe,Zt),er=St(oe,Zt=(Zt+sn)/2),kn=St(be,Zt),Xr=St(be,sn);je.moveTo(Vn[0],Vn[1]),je.bezierCurveTo(er[0],er[1],kn[0],kn[1],Xr[0],Xr[1])}function et(){return At(z)}function st(){return At(q)}function bt(){var je=At(mt);return je.angle=je.x,delete je.x,je.radius=je.y,delete je.y,je}var Y={draw:function(oe,Zt){var be=Math.sqrt(Zt/f);oe.moveTo(be,0),oe.arc(0,0,be,0,b)}},rt={draw:function(oe,Zt){var be=Math.sqrt(Zt/5)/2;oe.moveTo(-3*be,-be),oe.lineTo(-be,-be),oe.lineTo(-be,-3*be),oe.lineTo(be,-3*be),oe.lineTo(be,-be),oe.lineTo(3*be,-be),oe.lineTo(3*be,be),oe.lineTo(be,be),oe.lineTo(be,3*be),oe.lineTo(-be,3*be),oe.lineTo(-be,be),oe.lineTo(-3*be,be),oe.closePath()}},ot=Math.sqrt(1/3),$=ot*2,Pt={draw:function(oe,Zt){var be=Math.sqrt(Zt/$),sn=be*ot;oe.moveTo(0,-be),oe.lineTo(sn,0),oe.lineTo(0,be),oe.lineTo(-sn,0),oe.closePath()}},yt=.8908130915292852,Ft=Math.sin(f/10)/Math.sin(7*f/10),Qt=Math.sin(b/10)*Ft,ne=-Math.cos(b/10)*Ft,Wt={draw:function(oe,Zt){var be=Math.sqrt(Zt*yt),sn=Qt*be,Vn=ne*be;oe.moveTo(0,-be),oe.lineTo(sn,Vn);for(var er=1;er<5;++er){var kn=b*er/5,Xr=Math.cos(kn),vi=Math.sin(kn);oe.lineTo(vi*be,-Xr*be),oe.lineTo(Xr*sn-vi*Vn,vi*sn+Xr*Vn)}oe.closePath()}},$t={draw:function(oe,Zt){var be=Math.sqrt(Zt),sn=-be/2;oe.rect(sn,sn,be,be)}},De=Math.sqrt(3),Je={draw:function(oe,Zt){var be=-Math.sqrt(Zt/(De*3));oe.moveTo(0,be*2),oe.lineTo(-De*be,-be),oe.lineTo(De*be,-be),oe.closePath()}},Qe=-.5,de=Math.sqrt(3)/2,ue=1/Math.sqrt(12),Ne=(ue/2+1)*3,cn={draw:function(oe,Zt){var be=Math.sqrt(Zt/Ne),sn=be/2,Vn=be*ue,er=sn,kn=be*ue+be,Xr=-er,vi=kn;oe.moveTo(sn,Vn),oe.lineTo(er,kn),oe.lineTo(Xr,vi),oe.lineTo(Qe*sn-de*Vn,de*sn+Qe*Vn),oe.lineTo(Qe*er-de*kn,de*er+Qe*kn),oe.lineTo(Qe*Xr-de*vi,de*Xr+Qe*vi),oe.lineTo(Qe*sn+de*Vn,Qe*Vn-de*sn),oe.lineTo(Qe*er+de*kn,Qe*kn-de*er),oe.lineTo(Qe*Xr+de*vi,Qe*vi-de*Xr),oe.closePath()}},Fn=[Y,rt,Pt,$t,Wt,Je,cn];function wn(){var je=s(Y),oe=s(64),Zt=null;function be(){var sn;if(Zt||(Zt=sn=u.path()),je.apply(this,arguments).draw(Zt,+oe.apply(this,arguments)),sn)return Zt=null,sn+""||null}return be.type=function(sn){return arguments.length?(je=typeof sn=="function"?sn:s(sn),be):je},be.size=function(sn){return arguments.length?(oe=typeof sn=="function"?sn:s(+sn),be):oe},be.context=function(sn){return arguments.length?(Zt=sn==null?null:sn,be):Zt},be}function en(){}function tn(je,oe,Zt){je._context.bezierCurveTo((2*je._x0+je._x1)/3,(2*je._y0+je._y1)/3,(je._x0+2*je._x1)/3,(je._y0+2*je._y1)/3,(je._x0+4*je._x1+oe)/6,(je._y0+4*je._y1+Zt)/6)}function xn(je){this._context=je}xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Zt):this._context.moveTo(oe,Zt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tn(this,oe,Zt);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Zt}};function Bn(je){return new xn(je)}function vr(je){this._context=je}vr.prototype={areaStart:en,areaEnd:en,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1,this._x2=oe,this._y2=Zt;break;case 1:this._point=2,this._x3=oe,this._y3=Zt;break;case 2:this._point=3,this._x4=oe,this._y4=Zt,this._context.moveTo((this._x0+4*this._x1+oe)/6,(this._y0+4*this._y1+Zt)/6);break;default:tn(this,oe,Zt);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Zt}};function li(je){return new vr(je)}function Me(je){this._context=je}Me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var be=(this._x0+4*this._x1+oe)/6,sn=(this._y0+4*this._y1+Zt)/6;this._line?this._context.lineTo(be,sn):this._context.moveTo(be,sn);break;case 3:this._point=4;default:tn(this,oe,Zt);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Zt}};function Pe(je){return new Me(je)}function te(je,oe){this._basis=new xn(je),this._beta=oe}te.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var oe=this._x,Zt=this._y,be=oe.length-1;if(be>0)for(var sn=oe[0],Vn=Zt[0],er=oe[be]-sn,kn=Zt[be]-Vn,Xr=-1,vi;++Xr<=be;)vi=Xr/be,this._basis.point(this._beta*oe[Xr]+(1-this._beta)*(sn+vi*er),this._beta*Zt[Xr]+(1-this._beta)*(Vn+vi*kn));this._x=this._y=null,this._basis.lineEnd()},point:function(oe,Zt){this._x.push(+oe),this._y.push(+Zt)}};var ge=function je(oe){function Zt(be){return oe===1?new xn(be):new te(be,oe)}return Zt.beta=function(be){return je(+be)},Zt}(.85);function Ht(je,oe,Zt){je._context.bezierCurveTo(je._x1+je._k*(je._x2-je._x0),je._y1+je._k*(je._y2-je._y0),je._x2+je._k*(je._x1-oe),je._y2+je._k*(je._y1-Zt),je._x2,je._y2)}function re(je,oe){this._context=je,this._k=(1-oe)/6}re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ht(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Zt):this._context.moveTo(oe,Zt);break;case 1:this._point=2,this._x1=oe,this._y1=Zt;break;case 2:this._point=3;default:Ht(this,oe,Zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Zt}};var Te=function je(oe){function Zt(be){return new re(be,oe)}return Zt.tension=function(be){return je(+be)},Zt}(0);function ae(je,oe){this._context=je,this._k=(1-oe)/6}ae.prototype={areaStart:en,areaEnd:en,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1,this._x3=oe,this._y3=Zt;break;case 1:this._point=2,this._context.moveTo(this._x4=oe,this._y4=Zt);break;case 2:this._point=3,this._x5=oe,this._y5=Zt;break;default:Ht(this,oe,Zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Zt}};var xe=function je(oe){function Zt(be){return new ae(be,oe)}return Zt.tension=function(be){return je(+be)},Zt}(0);function qe(je,oe){this._context=je,this._k=(1-oe)/6}qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ht(this,oe,Zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Zt}};var zn=function je(oe){function Zt(be){return new qe(be,oe)}return Zt.tension=function(be){return je(+be)},Zt}(0);function ar(je,oe,Zt){var be=je._x1,sn=je._y1,Vn=je._x2,er=je._y2;if(je._l01_a>l){var kn=2*je._l01_2a+3*je._l01_a*je._l12_a+je._l12_2a,Xr=3*je._l01_a*(je._l01_a+je._l12_a);be=(be*kn-je._x0*je._l12_2a+je._x2*je._l01_2a)/Xr,sn=(sn*kn-je._y0*je._l12_2a+je._y2*je._l01_2a)/Xr}if(je._l23_a>l){var vi=2*je._l23_2a+3*je._l23_a*je._l12_a+je._l12_2a,Si=3*je._l23_a*(je._l23_a+je._l12_a);Vn=(Vn*vi+je._x1*je._l23_2a-oe*je._l12_2a)/Si,er=(er*vi+je._y1*je._l23_2a-Zt*je._l12_2a)/Si}je._context.bezierCurveTo(be,sn,Vn,er,je._x2,je._y2)}function _n(je,oe){this._context=je,this._alpha=oe}_n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){if(oe=+oe,Zt=+Zt,this._point){var be=this._x2-oe,sn=this._y2-Zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(be*be+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Zt):this._context.moveTo(oe,Zt);break;case 1:this._point=2;break;case 2:this._point=3;default:ar(this,oe,Zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Zt}};var Cn=function je(oe){function Zt(be){return oe?new _n(be,oe):new re(be,0)}return Zt.alpha=function(be){return je(+be)},Zt}(.5);function Or(je,oe){this._context=je,this._alpha=oe}Or.prototype={areaStart:en,areaEnd:en,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(oe,Zt){if(oe=+oe,Zt=+Zt,this._point){var be=this._x2-oe,sn=this._y2-Zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(be*be+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=oe,this._y3=Zt;break;case 1:this._point=2,this._context.moveTo(this._x4=oe,this._y4=Zt);break;case 2:this._point=3,this._x5=oe,this._y5=Zt;break;default:ar(this,oe,Zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Zt}};var Ar=function je(oe){function Zt(be){return oe?new Or(be,oe):new ae(be,0)}return Zt.alpha=function(be){return je(+be)},Zt}(.5);function hn(je,oe){this._context=je,this._alpha=oe}hn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){if(oe=+oe,Zt=+Zt,this._point){var be=this._x2-oe,sn=this._y2-Zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(be*be+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ar(this,oe,Zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Zt}};var Pr=function je(oe){function Zt(be){return oe?new hn(be,oe):new qe(be,0)}return Zt.alpha=function(be){return je(+be)},Zt}(.5);function yr(je){this._context=je}yr.prototype={areaStart:en,areaEnd:en,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(oe,Zt){oe=+oe,Zt=+Zt,this._point?this._context.lineTo(oe,Zt):(this._point=1,this._context.moveTo(oe,Zt))}};function Re(je){return new yr(je)}function We(je){return je<0?-1:1}function Ye(je,oe,Zt){var be=je._x1-je._x0,sn=oe-je._x1,Vn=(je._y1-je._y0)/(be||sn<0&&-0),er=(Zt-je._y1)/(sn||be<0&&-0),kn=(Vn*sn+er*be)/(be+sn);return(We(Vn)+We(er))*Math.min(Math.abs(Vn),Math.abs(er),.5*Math.abs(kn))||0}function dn(je,oe){var Zt=je._x1-je._x0;return Zt?(3*(je._y1-je._y0)/Zt-oe)/2:oe}function En(je,oe,Zt){var be=je._x0,sn=je._y0,Vn=je._x1,er=je._y1,kn=(Vn-be)/3;je._context.bezierCurveTo(be+kn,sn+kn*oe,Vn-kn,er-kn*Zt,Vn,er)}function Dn(je){this._context=je}Dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:En(this,this._t0,dn(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Zt){var be=NaN;if(oe=+oe,Zt=+Zt,!(oe===this._x1&&Zt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Zt):this._context.moveTo(oe,Zt);break;case 1:this._point=2;break;case 2:this._point=3,En(this,dn(this,be=Ye(this,oe,Zt)),be);break;default:En(this,this._t0,be=Ye(this,oe,Zt));break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Zt,this._t0=be}}};function Sn(je){this._context=new Nn(je)}(Sn.prototype=Object.create(Dn.prototype)).point=function(je,oe){Dn.prototype.point.call(this,oe,je)};function Nn(je){this._context=je}Nn.prototype={moveTo:function(oe,Zt){this._context.moveTo(Zt,oe)},closePath:function(){this._context.closePath()},lineTo:function(oe,Zt){this._context.lineTo(Zt,oe)},bezierCurveTo:function(oe,Zt,be,sn,Vn,er){this._context.bezierCurveTo(Zt,oe,sn,be,er,Vn)}};function nr(je){return new Dn(je)}function Gn(je){return new Sn(je)}function Tn(je){this._context=je}Tn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var oe=this._x,Zt=this._y,be=oe.length;if(be)if(this._line?this._context.lineTo(oe[0],Zt[0]):this._context.moveTo(oe[0],Zt[0]),be===2)this._context.lineTo(oe[1],Zt[1]);else for(var sn=Cr(oe),Vn=Cr(Zt),er=0,kn=1;kn<be;++er,++kn)this._context.bezierCurveTo(sn[0][er],Vn[0][er],sn[1][er],Vn[1][er],oe[kn],Zt[kn]);(this._line||this._line!==0&&be===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(oe,Zt){this._x.push(+oe),this._y.push(+Zt)}};function Cr(je){var oe,Zt=je.length-1,be,sn=new Array(Zt),Vn=new Array(Zt),er=new Array(Zt);for(sn[0]=0,Vn[0]=2,er[0]=je[0]+2*je[1],oe=1;oe<Zt-1;++oe)sn[oe]=1,Vn[oe]=4,er[oe]=4*je[oe]+2*je[oe+1];for(sn[Zt-1]=2,Vn[Zt-1]=7,er[Zt-1]=8*je[Zt-1]+je[Zt],oe=1;oe<Zt;++oe)be=sn[oe]/Vn[oe-1],Vn[oe]-=be,er[oe]-=be*er[oe-1];for(sn[Zt-1]=er[Zt-1]/Vn[Zt-1],oe=Zt-2;oe>=0;--oe)sn[oe]=(er[oe]-sn[oe+1])/Vn[oe];for(Vn[Zt-1]=(je[Zt]+sn[Zt-1])/2,oe=0;oe<Zt-1;++oe)Vn[oe]=2*je[oe+1]-sn[oe+1];return[sn,Vn]}function pr(je){return new Tn(je)}function zr(je,oe){this._context=je,this._t=oe}zr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(oe,Zt){switch(oe=+oe,Zt=+Zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Zt):this._context.moveTo(oe,Zt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Zt),this._context.lineTo(oe,Zt);else{var be=this._x*(1-this._t)+oe*this._t;this._context.lineTo(be,this._y),this._context.lineTo(be,Zt)}break}}this._x=oe,this._y=Zt}};function Ei(je){return new zr(je,.5)}function Oa(je){return new zr(je,0)}function wa(je){return new zr(je,1)}function Ja(je,oe){if((er=je.length)>1)for(var Zt=1,be,sn,Vn=je[oe[0]],er,kn=Vn.length;Zt<er;++Zt)for(sn=Vn,Vn=je[oe[Zt]],be=0;be<kn;++be)Vn[be][1]+=Vn[be][0]=isNaN(sn[be][1])?sn[be][0]:sn[be][1]}function wo(je){for(var oe=je.length,Zt=new Array(oe);--oe>=0;)Zt[oe]=oe;return Zt}function ha(je,oe){return je[oe]}function ro(){var je=s([]),oe=wo,Zt=Ja,be=ha;function sn(Vn){var er=je.apply(this,arguments),kn,Xr=Vn.length,vi=er.length,Si=new Array(vi),ji;for(kn=0;kn<vi;++kn){for(var Ji=er[kn],za=Si[kn]=new Array(Xr),va=0,so;va<Xr;++va)za[va]=so=[0,+be(Vn[va],Ji,va,Vn)],so.data=Vn[va];za.key=Ji}for(kn=0,ji=oe(Si);kn<vi;++kn)Si[ji[kn]].index=kn;return Zt(Si,ji),Si}return sn.keys=function(Vn){return arguments.length?(je=typeof Vn=="function"?Vn:s(xt.call(Vn)),sn):je},sn.value=function(Vn){return arguments.length?(be=typeof Vn=="function"?Vn:s(+Vn),sn):be},sn.order=function(Vn){return arguments.length?(oe=Vn==null?wo:typeof Vn=="function"?Vn:s(xt.call(Vn)),sn):oe},sn.offset=function(Vn){return arguments.length?(Zt=Vn==null?Ja:Vn,sn):Zt},sn}function ko(je,oe){if((be=je.length)>0){for(var Zt,be,sn=0,Vn=je[0].length,er;sn<Vn;++sn){for(er=Zt=0;Zt<be;++Zt)er+=je[Zt][sn][1]||0;if(er)for(Zt=0;Zt<be;++Zt)je[Zt][sn][1]/=er}Ja(je,oe)}}function $a(je,oe){if((Xr=je.length)>0)for(var Zt,be=0,sn,Vn,er,kn,Xr,vi=je[oe[0]].length;be<vi;++be)for(er=kn=0,Zt=0;Zt<Xr;++Zt)(Vn=(sn=je[oe[Zt]][be])[1]-sn[0])>0?(sn[0]=er,sn[1]=er+=Vn):Vn<0?(sn[1]=kn,sn[0]=kn+=Vn):(sn[0]=0,sn[1]=Vn)}function Mo(je,oe){if((sn=je.length)>0){for(var Zt=0,be=je[oe[0]],sn,Vn=be.length;Zt<Vn;++Zt){for(var er=0,kn=0;er<sn;++er)kn+=je[er][Zt][1]||0;be[Zt][1]+=be[Zt][0]=-kn/2}Ja(je,oe)}}function ss(je,oe){if(!(!((er=je.length)>0)||!((Vn=(sn=je[oe[0]]).length)>0))){for(var Zt=0,be=1,sn,Vn,er;be<Vn;++be){for(var kn=0,Xr=0,vi=0;kn<er;++kn){for(var Si=je[oe[kn]],ji=Si[be][1]||0,Ji=Si[be-1][1]||0,za=(ji-Ji)/2,va=0;va<kn;++va){var so=je[oe[va]],Ia=so[be][1]||0,io=so[be-1][1]||0;za+=Ia-io}Xr+=ji,vi+=za*ji}sn[be-1][1]+=sn[be-1][0]=Zt,Xr&&(Zt-=vi/Xr)}sn[be-1][1]+=sn[be-1][0]=Zt,Ja(je,oe)}}function Pa(je){var oe=je.map(Bo);return wo(je).sort(function(Zt,be){return oe[Zt]-oe[be]})}function Bo(je){for(var oe=-1,Zt=0,be=je.length,sn,Vn=-Infinity;++oe<be;)(sn=+je[oe][1])>Vn&&(Vn=sn,Zt=oe);return Zt}function Ro(je){var oe=je.map(Js);return wo(je).sort(function(Zt,be){return oe[Zt]-oe[be]})}function Js(je){for(var oe=0,Zt=-1,be=je.length,sn;++Zt<be;)(sn=+je[Zt][1])&&(oe+=sn);return oe}function Ko(je){return Ro(je).reverse()}function nu(je){var oe=je.length,Zt,be,sn=je.map(Js),Vn=Pa(je),er=0,kn=0,Xr=[],vi=[];for(Zt=0;Zt<oe;++Zt)be=Vn[Zt],er<kn?(er+=sn[be],Xr.push(be)):(kn+=sn[be],vi.push(be));return vi.reverse().concat(Xr)}function Rs(je){return wo(je).reverse()}t.arc=O,t.area=k,t.areaRadial=Dt,t.curveBasis=Bn,t.curveBasisClosed=li,t.curveBasisOpen=Pe,t.curveBundle=ge,t.curveCardinal=Te,t.curveCardinalClosed=xe,t.curveCardinalOpen=zn,t.curveCatmullRom=Cn,t.curveCatmullRomClosed=Ar,t.curveCatmullRomOpen=Pr,t.curveLinear=H,t.curveLinearClosed=Re,t.curveMonotoneX=nr,t.curveMonotoneY=Gn,t.curveNatural=pr,t.curveStep=Ei,t.curveStepAfter=wa,t.curveStepBefore=Oa,t.line=V,t.lineRadial=Nt,t.linkHorizontal=et,t.linkRadial=bt,t.linkVertical=st,t.pie=at,t.pointRadial=St,t.radialArea=Dt,t.radialLine=Nt,t.stack=ro,t.stackOffsetDiverging=$a,t.stackOffsetExpand=ko,t.stackOffsetNone=Ja,t.stackOffsetSilhouette=Mo,t.stackOffsetWiggle=ss,t.stackOrderAppearance=Pa,t.stackOrderAscending=Ro,t.stackOrderDescending=Ko,t.stackOrderInsideOut=nu,t.stackOrderNone=wo,t.stackOrderReverse=Rs,t.symbol=wn,t.symbolCircle=Y,t.symbolCross=rt,t.symbolDiamond=Pt,t.symbolSquare=$t,t.symbolStar=Wt,t.symbolTriangle=Je,t.symbolWye=cn,t.symbols=Fn,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(z){return function(){return z}}function s(z){return z[0]}function h(z){return z[1]}function r(){this._=null}function c(z){z.U=z.C=z.L=z.R=z.P=z.N=null}r.prototype={constructor:r,insert:function(q,mt){var et,st,bt;if(q){if(mt.P=q,mt.N=q.N,q.N&&(q.N.P=mt),q.N=mt,q.R){for(q=q.R;q.L;)q=q.L;q.L=mt}else q.R=mt;et=q}else this._?(q=a(this._),mt.P=null,mt.N=q,q.P=q.L=mt,et=q):(mt.P=mt.N=null,this._=mt,et=null);for(mt.L=mt.R=null,mt.U=et,mt.C=!0,q=mt;et&&et.C;)st=et.U,et===st.L?(bt=st.R,bt&&bt.C?(et.C=bt.C=!1,st.C=!0,q=st):(q===et.R&&(n(this,et),q=et,et=q.U),et.C=!1,st.C=!0,i(this,st))):(bt=st.L,bt&&bt.C?(et.C=bt.C=!1,st.C=!0,q=st):(q===et.L&&(i(this,et),q=et,et=q.U),et.C=!1,st.C=!0,n(this,st))),et=q.U;this._.C=!1},remove:function(q){q.N&&(q.N.P=q.P),q.P&&(q.P.N=q.N),q.N=q.P=null;var mt=q.U,et,st=q.L,bt=q.R,Y,rt;if(st?bt?Y=a(bt):Y=st:Y=bt,mt?mt.L===q?mt.L=Y:mt.R=Y:this._=Y,st&&bt?(rt=Y.C,Y.C=q.C,Y.L=st,st.U=Y,Y!==bt?(mt=Y.U,Y.U=q.U,q=Y.R,mt.L=q,Y.R=bt,bt.U=Y):(Y.U=mt,mt=Y,q=Y.R)):(rt=q.C,q=Y),q&&(q.U=mt),!rt){if(q&&q.C){q.C=!1;return}do{if(q===this._)break;if(q===mt.L){if(et=mt.R,et.C&&(et.C=!1,mt.C=!0,n(this,mt),et=mt.R),et.L&&et.L.C||et.R&&et.R.C){(!et.R||!et.R.C)&&(et.L.C=!1,et.C=!0,i(this,et),et=mt.R),et.C=mt.C,mt.C=et.R.C=!1,n(this,mt),q=this._;break}}else if(et=mt.L,et.C&&(et.C=!1,mt.C=!0,i(this,mt),et=mt.L),et.L&&et.L.C||et.R&&et.R.C){(!et.L||!et.L.C)&&(et.R.C=!1,et.C=!0,n(this,et),et=mt.L),et.C=mt.C,mt.C=et.L.C=!1,i(this,mt),q=this._;break}et.C=!0,q=mt,mt=mt.U}while(!q.C);q&&(q.C=!1)}}};function n(z,q){var mt=q,et=q.R,st=mt.U;st?st.L===mt?st.L=et:st.R=et:z._=et,et.U=st,mt.U=et,mt.R=et.L,mt.R&&(mt.R.U=mt),et.L=mt}function i(z,q){var mt=q,et=q.L,st=mt.U;st?st.L===mt?st.L=et:st.R=et:z._=et,et.U=st,mt.U=et,mt.L=et.R,mt.L&&(mt.L.U=mt),et.R=mt}function a(z){for(;z.L;)z=z.L;return z}function o(z,q,mt,et){var st=[null,null],bt=St.push(st)-1;return st.left=z,st.right=q,mt&&f(st,z,q,mt),et&&f(st,q,z,et),Nt[z.index].halfedges.push(bt),Nt[q.index].halfedges.push(bt),st}function l(z,q,mt){var et=[q,mt];return et.left=z,et}function f(z,q,mt,et){!z[0]&&!z[1]?(z[0]=et,z.left=q,z.right=mt):z.left===mt?z[1]=et:z[0]=et}function v(z,q,mt,et,st){var bt=z[0],Y=z[1],rt=bt[0],ot=bt[1],$=Y[0],Pt=Y[1],yt=0,Ft=1,Qt=$-rt,ne=Pt-ot,Wt;if(Wt=q-rt,!(!Qt&&Wt>0)){if(Wt/=Qt,Qt<0){if(Wt<yt)return;Wt<Ft&&(Ft=Wt)}else if(Qt>0){if(Wt>Ft)return;Wt>yt&&(yt=Wt)}if(Wt=et-rt,!(!Qt&&Wt<0)){if(Wt/=Qt,Qt<0){if(Wt>Ft)return;Wt>yt&&(yt=Wt)}else if(Qt>0){if(Wt<yt)return;Wt<Ft&&(Ft=Wt)}if(Wt=mt-ot,!(!ne&&Wt>0)){if(Wt/=ne,ne<0){if(Wt<yt)return;Wt<Ft&&(Ft=Wt)}else if(ne>0){if(Wt>Ft)return;Wt>yt&&(yt=Wt)}if(Wt=st-ot,!(!ne&&Wt<0)){if(Wt/=ne,ne<0){if(Wt>Ft)return;Wt>yt&&(yt=Wt)}else if(ne>0){if(Wt<yt)return;Wt<Ft&&(Ft=Wt)}return!(yt>0)&&!(Ft<1)||(yt>0&&(z[0]=[rt+yt*Qt,ot+yt*ne]),Ft<1&&(z[1]=[rt+Ft*Qt,ot+Ft*ne])),!0}}}}}function b(z,q,mt,et,st){var bt=z[1];if(bt)return!0;var Y=z[0],rt=z.left,ot=z.right,$=rt[0],Pt=rt[1],yt=ot[0],Ft=ot[1],Qt=($+yt)/2,ne=(Pt+Ft)/2,Wt,$t;if(Ft===Pt){if(Qt<q||Qt>=et)return;if($>yt){if(!Y)Y=[Qt,mt];else if(Y[1]>=st)return;bt=[Qt,st]}else{if(!Y)Y=[Qt,st];else if(Y[1]<mt)return;bt=[Qt,mt]}}else if(Wt=($-yt)/(Ft-Pt),$t=ne-Wt*Qt,Wt<-1||Wt>1)if($>yt){if(!Y)Y=[(mt-$t)/Wt,mt];else if(Y[1]>=st)return;bt=[(st-$t)/Wt,st]}else{if(!Y)Y=[(st-$t)/Wt,st];else if(Y[1]<mt)return;bt=[(mt-$t)/Wt,mt]}else if(Pt<Ft){if(!Y)Y=[q,Wt*q+$t];else if(Y[0]>=et)return;bt=[et,Wt*et+$t]}else{if(!Y)Y=[et,Wt*et+$t];else if(Y[0]<q)return;bt=[q,Wt*q+$t]}return z[0]=Y,z[1]=bt,!0}function g(z,q,mt,et){for(var st=St.length,bt;st--;)(!b(bt=St[st],z,q,mt,et)||!v(bt,z,q,mt,et)||!(Math.abs(bt[0][0]-bt[1][0])>gt||Math.abs(bt[0][1]-bt[1][1])>gt))&&delete St[st]}function y(z){return Nt[z.index]={site:z,halfedges:[]}}function _(z,q){var mt=z.site,et=q.left,st=q.right;return mt===st&&(st=et,et=mt),st?Math.atan2(st[1]-et[1],st[0]-et[0]):(mt===et?(et=q[1],st=q[0]):(et=q[0],st=q[1]),Math.atan2(et[0]-st[0],st[1]-et[1]))}function M(z,q){return q[+(q.left!==z.site)]}function x(z,q){return q[+(q.left===z.site)]}function m(){for(var z=0,q=Nt.length,mt,et,st,bt;z<q;++z)if((mt=Nt[z])&&(bt=(et=mt.halfedges).length)){var Y=new Array(bt),rt=new Array(bt);for(st=0;st<bt;++st)Y[st]=st,rt[st]=_(mt,St[et[st]]);for(Y.sort(function(ot,$){return rt[$]-rt[ot]}),st=0;st<bt;++st)rt[st]=et[Y[st]];for(st=0;st<bt;++st)et[st]=rt[st]}}function S(z,q,mt,et){var st=Nt.length,bt,Y,rt,ot,$,Pt,yt,Ft,Qt,ne,Wt,$t,De=!0;for(bt=0;bt<st;++bt)if(Y=Nt[bt]){for(rt=Y.site,$=Y.halfedges,ot=$.length;ot--;)St[$[ot]]||$.splice(ot,1);for(ot=0,Pt=$.length;ot<Pt;)ne=x(Y,St[$[ot]]),Wt=ne[0],$t=ne[1],yt=M(Y,St[$[++ot%Pt]]),Ft=yt[0],Qt=yt[1],(Math.abs(Wt-Ft)>gt||Math.abs($t-Qt)>gt)&&($.splice(ot,0,St.push(l(rt,ne,Math.abs(Wt-z)<gt&&et-$t>gt?[z,Math.abs(Ft-z)<gt?Qt:et]:Math.abs($t-et)<gt&&mt-Wt>gt?[Math.abs(Qt-et)<gt?Ft:mt,et]:Math.abs(Wt-mt)<gt&&$t-q>gt?[mt,Math.abs(Ft-mt)<gt?Qt:q]:Math.abs($t-q)<gt&&Wt-z>gt?[Math.abs(Qt-q)<gt?Ft:z,q]:null))-1),++Pt);Pt&&(De=!1)}if(De){var Je,Qe,de,ue=Infinity;for(bt=0,De=null;bt<st;++bt)(Y=Nt[bt])&&(rt=Y.site,Je=rt[0]-z,Qe=rt[1]-q,de=Je*Je+Qe*Qe,de<ue&&(ue=de,De=Y));if(De){var Ne=[z,q],cn=[z,et],Fn=[mt,et],wn=[mt,q];De.halfedges.push(St.push(l(rt=De.site,Ne,cn))-1,St.push(l(rt,cn,Fn))-1,St.push(l(rt,Fn,wn))-1,St.push(l(rt,wn,Ne))-1)}}for(bt=0;bt<st;++bt)(Y=Nt[bt])&&(Y.halfedges.length||delete Nt[bt])}var P=[],A;function O(){c(this),this.x=this.y=this.arc=this.site=this.cy=null}function R(z){var q=z.P,mt=z.N;if(!(!q||!mt)){var et=q.site,st=z.site,bt=mt.site;if(et!==bt){var Y=st[0],rt=st[1],ot=et[0]-Y,$=et[1]-rt,Pt=bt[0]-Y,yt=bt[1]-rt,Ft=2*(ot*yt-$*Pt);if(!(Ft>=-ft)){var Qt=ot*ot+$*$,ne=Pt*Pt+yt*yt,Wt=(yt*Qt-$*ne)/Ft,$t=(ot*ne-Pt*Qt)/Ft,De=P.pop()||new O;De.arc=z,De.site=st,De.x=Wt+Y,De.y=(De.cy=$t+rt)+Math.sqrt(Wt*Wt+$t*$t),z.circle=De;for(var Je=null,Qe=Dt._;Qe;)if(De.y<Qe.y||De.y===Qe.y&&De.x<=Qe.x)if(Qe.L)Qe=Qe.L;else{Je=Qe.P;break}else if(Qe.R)Qe=Qe.R;else{Je=Qe;break}Dt.insert(Je,De),Je||(A=De)}}}}function H(z){var q=z.circle;q&&(q.P||(A=q.N),Dt.remove(q),P.push(q),c(q),z.circle=null)}var N=[];function K(){c(this),this.edge=this.site=this.circle=null}function V(z){var q=N.pop()||new K;return q.site=z,q}function k(z){H(z),Rt.remove(z),N.push(z),c(z)}function Z(z){var q=z.circle,mt=q.x,et=q.cy,st=[mt,et],bt=z.P,Y=z.N,rt=[z];k(z);for(var ot=bt;ot.circle&&Math.abs(mt-ot.circle.x)<gt&&Math.abs(et-ot.circle.cy)<gt;)bt=ot.P,rt.unshift(ot),k(ot),ot=bt;rt.unshift(ot),H(ot);for(var $=Y;$.circle&&Math.abs(mt-$.circle.x)<gt&&Math.abs(et-$.circle.cy)<gt;)Y=$.N,rt.push($),k($),$=Y;rt.push($),H($);var Pt=rt.length,yt;for(yt=1;yt<Pt;++yt)$=rt[yt],ot=rt[yt-1],f($.edge,ot.site,$.site,st);ot=rt[0],$=rt[Pt-1],$.edge=o(ot.site,$.site,null,st),R(ot),R($)}function X(z){for(var q=z[0],mt=z[1],et,st,bt,Y,rt=Rt._;rt;)if(bt=at(rt,mt)-q,bt>gt)rt=rt.L;else if(Y=q-pt(rt,mt),Y>gt){if(!rt.R){et=rt;break}rt=rt.R}else{bt>-gt?(et=rt.P,st=rt):Y>-gt?(et=rt,st=rt.N):et=st=rt;break}y(z);var ot=V(z);if(Rt.insert(et,ot),!(!et&&!st)){if(et===st){H(et),st=V(et.site),Rt.insert(ot,st),ot.edge=st.edge=o(et.site,ot.site),R(et),R(st);return}if(!st){ot.edge=o(et.site,ot.site);return}H(et),H(st);var $=et.site,Pt=$[0],yt=$[1],Ft=z[0]-Pt,Qt=z[1]-yt,ne=st.site,Wt=ne[0]-Pt,$t=ne[1]-yt,De=2*(Ft*$t-Qt*Wt),Je=Ft*Ft+Qt*Qt,Qe=Wt*Wt+$t*$t,de=[($t*Je-Qt*Qe)/De+Pt,(Ft*Qe-Wt*Je)/De+yt];f(st.edge,$,ne,de),ot.edge=o($,z,null,de),st.edge=o(z,ne,null,de),R(et),R(st)}}function at(z,q){var mt=z.site,et=mt[0],st=mt[1],bt=st-q;if(!bt)return et;var Y=z.P;if(!Y)return-Infinity;mt=Y.site;var rt=mt[0],ot=mt[1],$=ot-q;if(!$)return rt;var Pt=rt-et,yt=1/bt-1/$,Ft=Pt/$;return yt?(-Ft+Math.sqrt(Ft*Ft-2*yt*(Pt*Pt/(-2*$)-ot+$/2+st-bt/2)))/yt+et:(et+rt)/2}function pt(z,q){var mt=z.N;if(mt)return at(mt,q);var et=z.site;return et[1]===q?et[0]:Infinity}var gt=1e-6,ft=1e-12,Rt,Nt,Dt,St;function xt(z,q,mt){return(z[0]-mt[0])*(q[1]-z[1])-(z[0]-q[0])*(mt[1]-z[1])}function Ot(z,q){return q[1]-z[1]||q[0]-z[0]}function it(z,q){var mt=z.sort(Ot).pop(),et,st,bt;for(St=[],Nt=new Array(z.length),Rt=new r,Dt=new r;;)if(bt=A,mt&&(!bt||mt[1]<bt.y||mt[1]===bt.y&&mt[0]<bt.x))(mt[0]!==et||mt[1]!==st)&&(X(mt),et=mt[0],st=mt[1]),mt=z.pop();else if(bt)Z(bt.arc);else break;if(m(),q){var Y=+q[0][0],rt=+q[0][1],ot=+q[1][0],$=+q[1][1];g(Y,rt,ot,$),S(Y,rt,ot,$)}this.edges=St,this.cells=Nt,Rt=Dt=St=Nt=null}it.prototype={constructor:it,polygons:function(){var q=this.edges;return this.cells.map(function(mt){var et=mt.halfedges.map(function(st){return M(mt,q[st])});return et.data=mt.site.data,et})},triangles:function(){var q=[],mt=this.edges;return this.cells.forEach(function(et,st){if(!!(ot=(Y=et.halfedges).length))for(var bt=et.site,Y,rt=-1,ot,$,Pt=mt[Y[ot-1]],yt=Pt.left===bt?Pt.right:Pt.left;++rt<ot;)$=yt,Pt=mt[Y[rt]],yt=Pt.left===bt?Pt.right:Pt.left,$&&yt&&st<$.index&&st<yt.index&&xt(bt,$,yt)<0&&q.push([bt.data,$.data,yt.data])}),q},links:function(){return this.edges.filter(function(q){return q.right}).map(function(q){return{source:q.left.data,target:q.right.data}})},find:function(q,mt,et){for(var st=this,bt,Y=st._found||0,rt=st.cells.length,ot;!(ot=st.cells[Y]);)if(++Y>=rt)return null;var $=q-ot.site[0],Pt=mt-ot.site[1],yt=$*$+Pt*Pt;do ot=st.cells[bt=Y],Y=null,ot.halfedges.forEach(function(Ft){var Qt=st.edges[Ft],ne=Qt.left;if(!((ne===ot.site||!ne)&&!(ne=Qt.right))){var Wt=q-ne[0],$t=mt-ne[1],De=Wt*Wt+$t*$t;De<yt&&(yt=De,Y=ne.index)}});while(Y!==null);return st._found=bt,et==null||yt<=et*et?ot.site:null}};function At(){var z=s,q=h,mt=null;function et(st){return new it(st.map(function(bt,Y){var rt=[Math.round(z(bt,Y,st)/gt)*gt,Math.round(q(bt,Y,st)/gt)*gt];return rt.index=Y,rt.data=bt,rt}),mt)}return et.polygons=function(st){return et(st).polygons()},et.links=function(st){return et(st).links()},et.triangles=function(st){return et(st).triangles()},et.x=function(st){return arguments.length?(z=typeof st=="function"?st:u(+st),et):z},et.y=function(st){return arguments.length?(q=typeof st=="function"?st:u(+st),et):q},et.extent=function(st){return arguments.length?(mt=st==null?null:[[+st[0][0],+st[0][1]],[+st[1][0],+st[1][1]]],et):mt&&[[mt[0][0],mt[0][1]],[mt[1][0],mt[1][1]]]},et.size=function(st){return arguments.length?(mt=st==null?null:[[0,0],[+st[0],+st[1]]],et):mt&&[mt[1][0]-mt[0][0],mt[1][1]-mt[0][1]]},et}t.voronoi=At,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_dagre@0.8.5@dagre/index.js":function(E,T,e){E.exports={graphlib:e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js"),layout:e("./node_modules/_dagre@0.8.5@dagre/lib/layout.js"),debug:e("./node_modules/_dagre@0.8.5@dagre/lib/debug.js"),util:{time:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").time,notime:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").notime},version:e("./node_modules/_dagre@0.8.5@dagre/lib/version.js")}},"./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js");E.exports={run:s,undo:r};function s(c){var n=c.graph().acyclicer==="greedy"?u(c,i(c)):h(c);t.forEach(n,function(a){var o=c.edge(a);c.removeEdge(a),o.forwardName=a.name,o.reversed=!0,c.setEdge(a.w,a.v,o,t.uniqueId("rev"))});function i(a){return function(o){return a.edge(o).weight}}}function h(c){var n=[],i={},a={};function o(l){t.has(a,l)||(a[l]=!0,i[l]=!0,t.forEach(c.outEdges(l),function(f){t.has(i,f.w)?n.push(f):o(f.w)}),delete i[l])}return t.forEach(c.nodes(),o),n}function r(c){t.forEach(c.edges(),function(n){var i=c.edge(n);if(i.reversed){c.removeEdge(n);var a=i.forwardName;delete i.reversed,delete i.forwardName,c.setEdge(n.w,n.v,i,a)}})}},"./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(r){function c(n){var i=r.children(n),a=r.node(n);if(i.length&&t.forEach(i,c),t.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,l=a.maxRank+1;o<l;++o)h(r,"borderLeft","_bl",n,a,o),h(r,"borderRight","_br",n,a,o)}}t.forEach(r.children(),c)}function h(r,c,n,i,a,o){var l={width:0,height:0,rank:o,borderType:c},f=a[c][o-1],v=u.addDummyNode(r,"border",l,n);a[c][o]=v,r.setParent(v,i),f&&r.setEdge(f,v,{weight:1})}},"./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={adjust:u,undo:s};function u(o){var l=o.graph().rankdir.toLowerCase();(l==="lr"||l==="rl")&&h(o)}function s(o){var l=o.graph().rankdir.toLowerCase();(l==="bt"||l==="rl")&&c(o),(l==="lr"||l==="rl")&&(i(o),h(o))}function h(o){t.forEach(o.nodes(),function(l){r(o.node(l))}),t.forEach(o.edges(),function(l){r(o.edge(l))})}function r(o){var l=o.width;o.width=o.height,o.height=l}function c(o){t.forEach(o.nodes(),function(l){n(o.node(l))}),t.forEach(o.edges(),function(l){var f=o.edge(l);t.forEach(f.points,n),t.has(f,"y")&&n(f)})}function n(o){o.y=-o.y}function i(o){t.forEach(o.nodes(),function(l){a(o.node(l))}),t.forEach(o.edges(),function(l){var f=o.edge(l);t.forEach(f.points,a),t.has(f,"x")&&a(f)})}function a(o){var l=o.x;o.x=o.y,o.y=l}},"./node_modules/_dagre@0.8.5@dagre/lib/data/list.js":function(E,T){E.exports=e;function e(){var s={};s._next=s._prev=s,this._sentinel=s}e.prototype.dequeue=function(){var s=this._sentinel,h=s._prev;if(h!==s)return t(h),h},e.prototype.enqueue=function(s){var h=this._sentinel;s._prev&&s._next&&t(s),s._next=h._next,h._next._prev=s,h._next=s,s._prev=h},e.prototype.toString=function(){for(var s=[],h=this._sentinel,r=h._prev;r!==h;)s.push(JSON.stringify(r,u)),r=r._prev;return"["+s.join(", ")+"]"};function t(s){s._prev._next=s._next,s._next._prev=s._prev,delete s._next,delete s._prev}function u(s,h){if(s!=="_next"&&s!=="_prev")return h}},"./node_modules/_dagre@0.8.5@dagre/lib/debug.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={debugOrdering:h};function h(r){var c=u.buildLayerMatrix(r),n=new s({compound:!0,multigraph:!0}).setGraph({});return t.forEach(r.nodes(),function(i){n.setNode(i,{label:i}),n.setParent(i,"layer"+r.node(i).rank)}),t.forEach(r.edges(),function(i){n.setEdge(i.v,i.w,{},i.name)}),t.forEach(c,function(i,a){var o="layer"+a;n.setNode(o,{rank:"same"}),t.reduce(i,function(l,f){return n.setEdge(l,f,{style:"invis"}),f})}),n}},"./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js":function(E,T,e){var t;try{t=e("./node_modules/_graphlib@2.1.8@graphlib/index.js")}catch(u){}t||(t=window.graphlib),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/data/list.js");E.exports=r;var h=t.constant(1);function r(o,l){if(o.nodeCount()<=1)return[];var f=i(o,l||h),v=c(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(v,function(b){return o.outEdges(b.v,b.w)}),!0)}function c(o,l,f){for(var v=[],b=l[l.length-1],g=l[0],y;o.nodeCount();){for(;y=g.dequeue();)n(o,l,f,y);for(;y=b.dequeue();)n(o,l,f,y);if(o.nodeCount()){for(var _=l.length-2;_>0;--_)if(y=l[_].dequeue(),y){v=v.concat(n(o,l,f,y,!0));break}}}return v}function n(o,l,f,v,b){var g=b?[]:void 0;return t.forEach(o.inEdges(v.v),function(y){var _=o.edge(y),M=o.node(y.v);b&&g.push({v:y.v,w:y.w}),M.out-=_,a(l,f,M)}),t.forEach(o.outEdges(v.v),function(y){var _=o.edge(y),M=y.w,x=o.node(M);x.in-=_,a(l,f,x)}),o.removeNode(v.v),g}function i(o,l){var f=new u,v=0,b=0;t.forEach(o.nodes(),function(_){f.setNode(_,{v:_,in:0,out:0})}),t.forEach(o.edges(),function(_){var M=f.edge(_.v,_.w)||0,x=l(_),m=M+x;f.setEdge(_.v,_.w,m),b=Math.max(b,f.node(_.v).out+=x),v=Math.max(v,f.node(_.w).in+=x)});var g=t.range(b+v+3).map(function(){return new s}),y=v+1;return t.forEach(f.nodes(),function(_){a(g,y,f.node(_))}),{graph:f,buckets:g,zeroIdx:y}}function a(o,l,f){f.out?f.in?o[f.out-f.in+l].enqueue(f):o[o.length-1].enqueue(f):o[0].enqueue(f)}},"./node_modules/_dagre@0.8.5@dagre/lib/layout.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/normalize.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").normalizeRanks,c=e("./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").removeEmptyRanks,i=e("./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js"),a=e("./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js"),o=e("./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/order/index.js"),f=e("./node_modules/_dagre@0.8.5@dagre/lib/position/index.js"),v=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),b=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=g;function g(xt,Ot){var it=Ot&&Ot.debugTiming?v.time:v.notime;it("layout",function(){var At=it("  buildLayoutGraph",function(){return H(xt)});it("  runLayout",function(){y(At,it)}),it("  updateInputGraph",function(){_(xt,At)})})}function y(xt,Ot){Ot("    makeSpaceForEdgeLabels",function(){N(xt)}),Ot("    removeSelfEdges",function(){ft(xt)}),Ot("    acyclic",function(){u.run(xt)}),Ot("    nestingGraph.run",function(){i.run(xt)}),Ot("    rank",function(){h(v.asNonCompoundGraph(xt))}),Ot("    injectEdgeLabelProxies",function(){K(xt)}),Ot("    removeEmptyRanks",function(){n(xt)}),Ot("    nestingGraph.cleanup",function(){i.cleanup(xt)}),Ot("    normalizeRanks",function(){r(xt)}),Ot("    assignRankMinMax",function(){V(xt)}),Ot("    removeEdgeLabelProxies",function(){k(xt)}),Ot("    normalize.run",function(){s.run(xt)}),Ot("    parentDummyChains",function(){c(xt)}),Ot("    addBorderSegments",function(){a(xt)}),Ot("    order",function(){l(xt)}),Ot("    insertSelfEdges",function(){Rt(xt)}),Ot("    adjustCoordinateSystem",function(){o.adjust(xt)}),Ot("    position",function(){f(xt)}),Ot("    positionSelfEdges",function(){Nt(xt)}),Ot("    removeBorderNodes",function(){gt(xt)}),Ot("    normalize.undo",function(){s.undo(xt)}),Ot("    fixupEdgeLabelCoords",function(){at(xt)}),Ot("    undoCoordinateSystem",function(){o.undo(xt)}),Ot("    translateGraph",function(){Z(xt)}),Ot("    assignNodeIntersects",function(){X(xt)}),Ot("    reversePoints",function(){pt(xt)}),Ot("    acyclic.undo",function(){u.undo(xt)})}function _(xt,Ot){t.forEach(xt.nodes(),function(it){var At=xt.node(it),z=Ot.node(it);At&&(At.x=z.x,At.y=z.y,Ot.children(it).length&&(At.width=z.width,At.height=z.height))}),t.forEach(xt.edges(),function(it){var At=xt.edge(it),z=Ot.edge(it);At.points=z.points,t.has(z,"x")&&(At.x=z.x,At.y=z.y)}),xt.graph().width=Ot.graph().width,xt.graph().height=Ot.graph().height}var M=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],S=["width","height"],P={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function H(xt){var Ot=new b({multigraph:!0,compound:!0}),it=St(xt.graph());return Ot.setGraph(t.merge({},x,Dt(it,M),t.pick(it,m))),t.forEach(xt.nodes(),function(At){var z=St(xt.node(At));Ot.setNode(At,t.defaults(Dt(z,S),P)),Ot.setParent(At,xt.parent(At))}),t.forEach(xt.edges(),function(At){var z=St(xt.edge(At));Ot.setEdge(At,t.merge({},O,Dt(z,A),t.pick(z,R)))}),Ot}function N(xt){var Ot=xt.graph();Ot.ranksep/=2,t.forEach(xt.edges(),function(it){var At=xt.edge(it);At.minlen*=2,At.labelpos.toLowerCase()!=="c"&&(Ot.rankdir==="TB"||Ot.rankdir==="BT"?At.width+=At.labeloffset:At.height+=At.labeloffset)})}function K(xt){t.forEach(xt.edges(),function(Ot){var it=xt.edge(Ot);if(it.width&&it.height){var At=xt.node(Ot.v),z=xt.node(Ot.w),q={rank:(z.rank-At.rank)/2+At.rank,e:Ot};v.addDummyNode(xt,"edge-proxy",q,"_ep")}})}function V(xt){var Ot=0;t.forEach(xt.nodes(),function(it){var At=xt.node(it);At.borderTop&&(At.minRank=xt.node(At.borderTop).rank,At.maxRank=xt.node(At.borderBottom).rank,Ot=t.max(Ot,At.maxRank))}),xt.graph().maxRank=Ot}function k(xt){t.forEach(xt.nodes(),function(Ot){var it=xt.node(Ot);it.dummy==="edge-proxy"&&(xt.edge(it.e).labelRank=it.rank,xt.removeNode(Ot))})}function Z(xt){var Ot=Number.POSITIVE_INFINITY,it=0,At=Number.POSITIVE_INFINITY,z=0,q=xt.graph(),mt=q.marginx||0,et=q.marginy||0;function st(bt){var Y=bt.x,rt=bt.y,ot=bt.width,$=bt.height;Ot=Math.min(Ot,Y-ot/2),it=Math.max(it,Y+ot/2),At=Math.min(At,rt-$/2),z=Math.max(z,rt+$/2)}t.forEach(xt.nodes(),function(bt){st(xt.node(bt))}),t.forEach(xt.edges(),function(bt){var Y=xt.edge(bt);t.has(Y,"x")&&st(Y)}),Ot-=mt,At-=et,t.forEach(xt.nodes(),function(bt){var Y=xt.node(bt);Y.x-=Ot,Y.y-=At}),t.forEach(xt.edges(),function(bt){var Y=xt.edge(bt);t.forEach(Y.points,function(rt){rt.x-=Ot,rt.y-=At}),t.has(Y,"x")&&(Y.x-=Ot),t.has(Y,"y")&&(Y.y-=At)}),q.width=it-Ot+mt,q.height=z-At+et}function X(xt){t.forEach(xt.edges(),function(Ot){var it=xt.edge(Ot),At=xt.node(Ot.v),z=xt.node(Ot.w),q,mt;it.points?(q=it.points[0],mt=it.points[it.points.length-1]):(it.points=[],q=z,mt=At),it.points.unshift(v.intersectRect(At,q)),it.points.push(v.intersectRect(z,mt))})}function at(xt){t.forEach(xt.edges(),function(Ot){var it=xt.edge(Ot);if(t.has(it,"x"))switch((it.labelpos==="l"||it.labelpos==="r")&&(it.width-=it.labeloffset),it.labelpos){case"l":it.x-=it.width/2+it.labeloffset;break;case"r":it.x+=it.width/2+it.labeloffset;break}})}function pt(xt){t.forEach(xt.edges(),function(Ot){var it=xt.edge(Ot);it.reversed&&it.points.reverse()})}function gt(xt){t.forEach(xt.nodes(),function(Ot){if(xt.children(Ot).length){var it=xt.node(Ot),At=xt.node(it.borderTop),z=xt.node(it.borderBottom),q=xt.node(t.last(it.borderLeft)),mt=xt.node(t.last(it.borderRight));it.width=Math.abs(mt.x-q.x),it.height=Math.abs(z.y-At.y),it.x=q.x+it.width/2,it.y=At.y+it.height/2}}),t.forEach(xt.nodes(),function(Ot){xt.node(Ot).dummy==="border"&&xt.removeNode(Ot)})}function ft(xt){t.forEach(xt.edges(),function(Ot){if(Ot.v===Ot.w){var it=xt.node(Ot.v);it.selfEdges||(it.selfEdges=[]),it.selfEdges.push({e:Ot,label:xt.edge(Ot)}),xt.removeEdge(Ot)}})}function Rt(xt){var Ot=v.buildLayerMatrix(xt);t.forEach(Ot,function(it){var At=0;t.forEach(it,function(z,q){var mt=xt.node(z);mt.order=q+At,t.forEach(mt.selfEdges,function(et){v.addDummyNode(xt,"selfedge",{width:et.label.width,height:et.label.height,rank:mt.rank,order:q+ ++At,e:et.e,label:et.label},"_se")}),delete mt.selfEdges})})}function Nt(xt){t.forEach(xt.nodes(),function(Ot){var it=xt.node(Ot);if(it.dummy==="selfedge"){var At=xt.node(it.e.v),z=At.x+At.width/2,q=At.y,mt=it.x-z,et=At.height/2;xt.setEdge(it.e,it.label),xt.removeNode(Ot),it.label.points=[{x:z+2*mt/3,y:q-et},{x:z+5*mt/6,y:q-et},{x:z+mt,y:q},{x:z+5*mt/6,y:q+et},{x:z+2*mt/3,y:q+et}],it.label.x=it.x,it.label.y=it.y}})}function Dt(xt,Ot){return t.mapValues(t.pick(xt,Ot),Number)}function St(xt){var Ot={};return t.forEach(xt,function(it,At){Ot[At.toLowerCase()]=it}),Ot}},"./node_modules/_dagre@0.8.5@dagre/lib/lodash.js":function(E,T,e){var t;try{t={cloneDeep:e("./node_modules/_lodash@4.17.20@lodash/cloneDeep.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),defaults:e("./node_modules/_lodash@4.17.20@lodash/defaults.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),find:e("./node_modules/_lodash@4.17.20@lodash/find.js"),flatten:e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),forEach:e("./node_modules/_lodash@4.17.20@lodash/forEach.js"),forIn:e("./node_modules/_lodash@4.17.20@lodash/forIn.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),last:e("./node_modules/_lodash@4.17.20@lodash/last.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),mapValues:e("./node_modules/_lodash@4.17.20@lodash/mapValues.js"),max:e("./node_modules/_lodash@4.17.20@lodash/max.js"),merge:e("./node_modules/_lodash@4.17.20@lodash/merge.js"),min:e("./node_modules/_lodash@4.17.20@lodash/min.js"),minBy:e("./node_modules/_lodash@4.17.20@lodash/minBy.js"),now:e("./node_modules/_lodash@4.17.20@lodash/now.js"),pick:e("./node_modules/_lodash@4.17.20@lodash/pick.js"),range:e("./node_modules/_lodash@4.17.20@lodash/range.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),sortBy:e("./node_modules/_lodash@4.17.20@lodash/sortBy.js"),uniqueId:e("./node_modules/_lodash@4.17.20@lodash/uniqueId.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js"),zipObject:e("./node_modules/_lodash@4.17.20@lodash/zipObject.js")}}catch(u){}t||(t=window._),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,cleanup:n};function s(i){var a=u.addDummyNode(i,"root",{},"_root"),o=r(i),l=t.max(t.values(o))-1,f=2*l+1;i.graph().nestingRoot=a,t.forEach(i.edges(),function(b){i.edge(b).minlen*=f});var v=c(i)+1;t.forEach(i.children(),function(b){h(i,a,f,v,l,o,b)}),i.graph().nodeRankFactor=f}function h(i,a,o,l,f,v,b){var g=i.children(b);if(!g.length){b!==a&&i.setEdge(a,b,{weight:0,minlen:o});return}var y=u.addBorderNode(i,"_bt"),_=u.addBorderNode(i,"_bb"),M=i.node(b);i.setParent(y,b),M.borderTop=y,i.setParent(_,b),M.borderBottom=_,t.forEach(g,function(x){h(i,a,o,l,f,v,x);var m=i.node(x),S=m.borderTop?m.borderTop:x,P=m.borderBottom?m.borderBottom:x,A=m.borderTop?l:2*l,O=S!==P?1:f-v[b]+1;i.setEdge(y,S,{weight:A,minlen:O,nestingEdge:!0}),i.setEdge(P,_,{weight:A,minlen:O,nestingEdge:!0})}),i.parent(b)||i.setEdge(a,y,{weight:0,minlen:f+v[b]})}function r(i){var a={};function o(l,f){var v=i.children(l);v&&v.length&&t.forEach(v,function(b){o(b,f+1)}),a[l]=f}return t.forEach(i.children(),function(l){o(l,1)}),a}function c(i){return t.reduce(i.edges(),function(a,o){return a+i.edge(o).weight},0)}function n(i){var a=i.graph();i.removeNode(a.nestingRoot),delete a.nestingRoot,t.forEach(i.edges(),function(o){var l=i.edge(o);l.nestingEdge&&i.removeEdge(o)})}},"./node_modules/_dagre@0.8.5@dagre/lib/normalize.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,undo:r};function s(c){c.graph().dummyChains=[],t.forEach(c.edges(),function(n){h(c,n)})}function h(c,n){var i=n.v,a=c.node(i).rank,o=n.w,l=c.node(o).rank,f=n.name,v=c.edge(n),b=v.labelRank;if(l!==a+1){c.removeEdge(n);var g,y,_;for(_=0,++a;a<l;++_,++a)v.points=[],y={width:0,height:0,edgeLabel:v,edgeObj:n,rank:a},g=u.addDummyNode(c,"edge",y,"_d"),a===b&&(y.width=v.width,y.height=v.height,y.dummy="edge-label",y.labelpos=v.labelpos),c.setEdge(i,g,{weight:v.weight},f),_===0&&c.graph().dummyChains.push(g),i=g;c.setEdge(i,o,{weight:v.weight},f)}}function r(c){t.forEach(c.graph().dummyChains,function(n){var i=c.node(n),a=i.edgeLabel,o;for(c.setEdge(i.edgeObj,a);i.dummy;)o=c.successors(n)[0],c.removeNode(n),a.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height),n=o,i=c.node(n)})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s,h,r){var c={},n;t.forEach(r,function(i){for(var a=s.parent(i),o,l;a;){if(o=s.parent(a),o?(l=c[o],c[o]=a):(l=n,n=a),l&&l!==a){h.setEdge(l,a);return}a=o}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s,h){return t.map(h,function(r){var c=s.inEdges(r);if(c.length){var n=t.reduce(c,function(i,a){var o=s.edge(a),l=s.node(a.v);return{sum:i.sum+o.weight*l.order,weight:i.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:n.sum/n.weight,weight:n.weight}}else return{v:r}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=s;function s(r,c,n){var i=h(r),a=new u({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(o){return r.node(o)});return t.forEach(r.nodes(),function(o){var l=r.node(o),f=r.parent(o);(l.rank===c||l.minRank<=c&&c<=l.maxRank)&&(a.setNode(o),a.setParent(o,f||i),t.forEach(r[n](o),function(v){var b=v.v===o?v.w:v.v,g=a.edge(b,o),y=t.isUndefined(g)?0:g.weight;a.setEdge(b,o,{weight:r.edge(v).weight+y})}),t.has(l,"minRank")&&a.setNode(o,{borderLeft:l.borderLeft[c],borderRight:l.borderRight[c]}))}),a}function h(r){for(var c;r.hasNode(c=t.uniqueId("_root")););return c}},"./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(h,r){for(var c=0,n=1;n<r.length;++n)c+=s(h,r[n-1],r[n]);return c}function s(h,r,c){for(var n=t.zipObject(c,t.map(c,function(v,b){return b})),i=t.flatten(t.map(r,function(v){return t.sortBy(t.map(h.outEdges(v),function(b){return{pos:n[b.w],weight:h.edge(b).weight}}),"pos")}),!0),a=1;a<c.length;)a<<=1;var o=2*a-1;a-=1;var l=t.map(new Array(o),function(){return 0}),f=0;return t.forEach(i.forEach(function(v){var b=v.pos+a;l[b]+=v.weight;for(var g=0;b>0;)b%2&&(g+=l[b+1]),b=b-1>>1,l[b]+=v.weight;f+=v.weight*g})),f}},"./node_modules/_dagre@0.8.5@dagre/lib/order/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,i=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=a;function a(v){var b=i.maxRank(v),g=o(v,t.range(1,b+1),"inEdges"),y=o(v,t.range(b-1,-1,-1),"outEdges"),_=u(v);f(v,_);for(var M=Number.POSITIVE_INFINITY,x,m=0,S=0;S<4;++m,++S){l(m%2?g:y,m%4>=2),_=i.buildLayerMatrix(v);var P=s(v,_);P<M&&(S=0,x=t.cloneDeep(_),M=P)}f(v,x)}function o(v,b,g){return t.map(b,function(y){return r(v,y,g)})}function l(v,b){var g=new n;t.forEach(v,function(y){var _=y.graph().root,M=h(y,_,g,b);t.forEach(M.vs,function(x,m){y.node(x).order=m}),c(y,g,M.vs)})}function f(v,b){t.forEach(b,function(g){t.forEach(g,function(y,_){v.node(y).order=_})})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s){var h={},r=t.filter(s.nodes(),function(o){return!s.children(o).length}),c=t.max(t.map(r,function(o){return s.node(o).rank})),n=t.map(t.range(c+1),function(){return[]});function i(o){if(!t.has(h,o)){h[o]=!0;var l=s.node(o);n[l.rank].push(o),t.forEach(s.successors(o),i)}}var a=t.sortBy(r,function(o){return s.node(o).rank});return t.forEach(a,i),n}},"./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(r,c){var n={};t.forEach(r,function(a,o){var l=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};t.isUndefined(a.barycenter)||(l.barycenter=a.barycenter,l.weight=a.weight)}),t.forEach(c.edges(),function(a){var o=n[a.v],l=n[a.w];!t.isUndefined(o)&&!t.isUndefined(l)&&(l.indegree++,o.out.push(n[a.w]))});var i=t.filter(n,function(a){return!a.indegree});return s(i)}function s(r){var c=[];function n(o){return function(l){l.merged||(t.isUndefined(l.barycenter)||t.isUndefined(o.barycenter)||l.barycenter>=o.barycenter)&&h(o,l)}}function i(o){return function(l){l.in.push(o),--l.indegree==0&&r.push(l)}}for(;r.length;){var a=r.pop();c.push(a),t.forEach(a.in.reverse(),n(a)),t.forEach(a.out,i(a))}return t.map(t.filter(c,function(o){return!o.merged}),function(o){return t.pick(o,["vs","i","barycenter","weight"])})}function h(r,c){var n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),c.weight&&(n+=c.barycenter*c.weight,i+=c.weight),r.vs=c.vs.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(c.i,r.i),c.merged=!0}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js");E.exports=r;function r(i,a,o,l){var f=i.children(a),v=i.node(a),b=v?v.borderLeft:void 0,g=v?v.borderRight:void 0,y={};b&&(f=t.filter(f,function(P){return P!==b&&P!==g}));var _=u(i,f);t.forEach(_,function(P){if(i.children(P.v).length){var A=r(i,P.v,o,l);y[P.v]=A,t.has(A,"barycenter")&&n(P,A)}});var M=s(_,o);c(M,y);var x=h(M,l);if(b&&(x.vs=t.flatten([b,x.vs,g],!0),i.predecessors(b).length)){var m=i.node(i.predecessors(b)[0]),S=i.node(i.predecessors(g)[0]);t.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+m.order+S.order)/(x.weight+2),x.weight+=2}return x}function c(i,a){t.forEach(i,function(o){o.vs=t.flatten(o.vs.map(function(l){return a[l]?a[l].vs:l}),!0)})}function n(i,a){t.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight)}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(c,n){var i=u.partition(c,function(y){return t.has(y,"barycenter")}),a=i.lhs,o=t.sortBy(i.rhs,function(y){return-y.i}),l=[],f=0,v=0,b=0;a.sort(r(!!n)),b=h(l,o,b),t.forEach(a,function(y){b+=y.vs.length,l.push(y.vs),f+=y.barycenter*y.weight,v+=y.weight,b=h(l,o,b)});var g={vs:t.flatten(l,!0)};return v&&(g.barycenter=f/v,g.weight=v),g}function h(c,n,i){for(var a;n.length&&(a=t.last(n)).i<=i;)n.pop(),c.push(a.vs),i++;return i}function r(c){return function(n,i){return n.barycenter<i.barycenter?-1:n.barycenter>i.barycenter?1:c?i.i-n.i:n.i-i.i}}},"./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(r){var c=h(r);t.forEach(r.graph().dummyChains,function(n){for(var i=r.node(n),a=i.edgeObj,o=s(r,c,a.v,a.w),l=o.path,f=o.lca,v=0,b=l[v],g=!0;n!==a.w;){if(i=r.node(n),g){for(;(b=l[v])!==f&&r.node(b).maxRank<i.rank;)v++;b===f&&(g=!1)}if(!g){for(;v<l.length-1&&r.node(b=l[v+1]).minRank<=i.rank;)v++;b=l[v]}r.setParent(n,b),n=r.successors(n)[0]}})}function s(r,c,n,i){var a=[],o=[],l=Math.min(c[n].low,c[i].low),f=Math.max(c[n].lim,c[i].lim),v,b;v=n;do v=r.parent(v),a.push(v);while(v&&(c[v].low>l||f>c[v].lim));for(b=v,v=i;(v=r.parent(v))!==b;)o.push(v);return{path:a.concat(o.reverse()),lca:b}}function h(r){var c={},n=0;function i(a){var o=n;t.forEach(r.children(a),i),c[a]={low:o,lim:n++}}return t.forEach(r.children(),i),c}},"./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={positionX:g,findType1Conflicts:h,findType2Conflicts:r,addConflict:n,hasConflict:i,verticalAlignment:a,horizontalCompaction:o,alignCoordinates:v,findSmallestWidthAlignment:f,balance:b};function h(M,x){var m={};function S(P,A){var O=0,R=0,H=P.length,N=t.last(A);return t.forEach(A,function(K,V){var k=c(M,K),Z=k?M.node(k).order:H;(k||K===N)&&(t.forEach(A.slice(R,V+1),function(X){t.forEach(M.predecessors(X),function(at){var pt=M.node(at),gt=pt.order;(gt<O||Z<gt)&&!(pt.dummy&&M.node(X).dummy)&&n(m,at,X)})}),R=V+1,O=Z)}),A}return t.reduce(x,S),m}function r(M,x){var m={};function S(A,O,R,H,N){var K;t.forEach(t.range(O,R),function(V){K=A[V],M.node(K).dummy&&t.forEach(M.predecessors(K),function(k){var Z=M.node(k);Z.dummy&&(Z.order<H||Z.order>N)&&n(m,k,K)})})}function P(A,O){var R=-1,H,N=0;return t.forEach(O,function(K,V){if(M.node(K).dummy==="border"){var k=M.predecessors(K);k.length&&(H=M.node(k[0]).order,S(O,N,V,R,H),N=V,R=H)}S(O,N,O.length,H,A.length)}),O}return t.reduce(x,P),m}function c(M,x){if(M.node(x).dummy)return t.find(M.predecessors(x),function(m){return M.node(m).dummy})}function n(M,x,m){if(x>m){var S=x;x=m,m=S}var P=M[x];P||(M[x]=P={}),P[m]=!0}function i(M,x,m){if(x>m){var S=x;x=m,m=S}return t.has(M[x],m)}function a(M,x,m,S){var P={},A={},O={};return t.forEach(x,function(R){t.forEach(R,function(H,N){P[H]=H,A[H]=H,O[H]=N})}),t.forEach(x,function(R){var H=-1;t.forEach(R,function(N){var K=S(N);if(K.length){K=t.sortBy(K,function(at){return O[at]});for(var V=(K.length-1)/2,k=Math.floor(V),Z=Math.ceil(V);k<=Z;++k){var X=K[k];A[N]===N&&H<O[X]&&!i(m,N,X)&&(A[X]=N,A[N]=P[N]=P[X],H=O[X])}}})}),{root:P,align:A}}function o(M,x,m,S,P){var A={},O=l(M,x,m,P),R=P?"borderLeft":"borderRight";function H(V,k){for(var Z=O.nodes(),X=Z.pop(),at={};X;)at[X]?V(X):(at[X]=!0,Z.push(X),Z=Z.concat(k(X))),X=Z.pop()}function N(V){A[V]=O.inEdges(V).reduce(function(k,Z){return Math.max(k,A[Z.v]+O.edge(Z))},0)}function K(V){var k=O.outEdges(V).reduce(function(X,at){return Math.min(X,A[at.w]-O.edge(at))},Number.POSITIVE_INFINITY),Z=M.node(V);k!==Number.POSITIVE_INFINITY&&Z.borderType!==R&&(A[V]=Math.max(A[V],k))}return H(N,O.predecessors.bind(O)),H(K,O.successors.bind(O)),t.forEach(S,function(V){A[V]=A[m[V]]}),A}function l(M,x,m,S){var P=new u,A=M.graph(),O=y(A.nodesep,A.edgesep,S);return t.forEach(x,function(R){var H;t.forEach(R,function(N){var K=m[N];if(P.setNode(K),H){var V=m[H],k=P.edge(V,K);P.setEdge(V,K,Math.max(O(M,N,H),k||0))}H=N})}),P}function f(M,x){return t.minBy(t.values(x),function(m){var S=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return t.forIn(m,function(A,O){var R=_(M,O)/2;S=Math.max(A+R,S),P=Math.min(A-R,P)}),S-P})}function v(M,x){var m=t.values(x),S=t.min(m),P=t.max(m);t.forEach(["u","d"],function(A){t.forEach(["l","r"],function(O){var R=A+O,H=M[R],N;if(H!==x){var K=t.values(H);N=O==="l"?S-t.min(K):P-t.max(K),N&&(M[R]=t.mapValues(H,function(V){return V+N}))}})})}function b(M,x){return t.mapValues(M.ul,function(m,S){if(x)return M[x.toLowerCase()][S];var P=t.sortBy(t.map(M,S));return(P[1]+P[2])/2})}function g(M){var x=s.buildLayerMatrix(M),m=t.merge(h(M,x),r(M,x)),S={},P;t.forEach(["u","d"],function(O){P=O==="u"?x:t.values(x).reverse(),t.forEach(["l","r"],function(R){R==="r"&&(P=t.map(P,function(V){return t.values(V).reverse()}));var H=(O==="u"?M.predecessors:M.successors).bind(M),N=a(M,P,m,H),K=o(M,P,N.root,N.align,R==="r");R==="r"&&(K=t.mapValues(K,function(V){return-V})),S[O+R]=K})});var A=f(M,S);return v(S,A),b(S,M.graph().align)}function y(M,x,m){return function(S,P,A){var O=S.node(P),R=S.node(A),H=0,N;if(H+=O.width/2,t.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":N=-O.width/2;break;case"r":N=O.width/2;break}if(N&&(H+=m?N:-N),N=0,H+=(O.dummy?x:M)/2,H+=(R.dummy?x:M)/2,H+=R.width/2,t.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":N=R.width/2;break;case"r":N=-R.width/2;break}return N&&(H+=m?N:-N),N=0,H}}function _(M,x){return M.node(x).width}},"./node_modules/_dagre@0.8.5@dagre/lib/position/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js").positionX;E.exports=h;function h(c){c=u.asNonCompoundGraph(c),r(c),t.forEach(s(c),function(n,i){c.node(i).x=n})}function r(c){var n=u.buildLayerMatrix(c),i=c.graph().ranksep,a=0;t.forEach(n,function(o){var l=t.max(t.map(o,function(f){return c.node(f).height}));t.forEach(o,function(f){c.node(f).y=a+l/2}),a+=l+i})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack;E.exports=h;function h(i){var a=new u({directed:!1}),o=i.nodes()[0],l=i.nodeCount();a.setNode(o,{});for(var f,v;r(a,i)<l;)f=c(a,i),v=a.hasNode(f.v)?s(i,f):-s(i,f),n(a,i,v);return a}function r(i,a){function o(l){t.forEach(a.nodeEdges(l),function(f){var v=f.v,b=l===v?f.w:v;!i.hasNode(b)&&!s(a,f)&&(i.setNode(b,{}),i.setEdge(l,b,{}),o(b))})}return t.forEach(i.nodes(),o),i.nodeCount()}function c(i,a){return t.minBy(a.edges(),function(o){if(i.hasNode(o.v)!==i.hasNode(o.w))return s(a,o)})}function n(i,a,o){t.forEach(i.nodes(),function(l){a.node(l).rank+=o})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js"),u=t.longestPath,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js");E.exports=r;function r(a){switch(a.graph().ranker){case"network-simplex":i(a);break;case"tight-tree":n(a);break;case"longest-path":c(a);break;default:i(a)}}var c=u;function n(a){u(a),s(a)}function i(a){h(a)}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack,h=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").longestPath,r=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.preorder,c=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.postorder,n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").simplify;E.exports=i,i.initLowLimValues=f,i.initCutValues=a,i.calcCutValue=l,i.leaveEdge=b,i.enterEdge=g,i.exchangeEdges=y;function i(m){m=n(m),h(m);var S=u(m);f(S),a(S,m);for(var P,A;P=b(S);)A=g(S,m,P),y(S,m,P,A)}function a(m,S){var P=c(m,m.nodes());P=P.slice(0,P.length-1),t.forEach(P,function(A){o(m,S,A)})}function o(m,S,P){var A=m.node(P),O=A.parent;m.edge(P,O).cutvalue=l(m,S,P)}function l(m,S,P){var A=m.node(P),O=A.parent,R=!0,H=S.edge(P,O),N=0;return H||(R=!1,H=S.edge(O,P)),N=H.weight,t.forEach(S.nodeEdges(P),function(K){var V=K.v===P,k=V?K.w:K.v;if(k!==O){var Z=V===R,X=S.edge(K).weight;if(N+=Z?X:-X,M(m,P,k)){var at=m.edge(P,k).cutvalue;N+=Z?-at:at}}}),N}function f(m,S){arguments.length<2&&(S=m.nodes()[0]),v(m,{},1,S)}function v(m,S,P,A,O){var R=P,H=m.node(A);return S[A]=!0,t.forEach(m.neighbors(A),function(N){t.has(S,N)||(P=v(m,S,P,N,A))}),H.low=R,H.lim=P++,O?H.parent=O:delete H.parent,P}function b(m){return t.find(m.edges(),function(S){return m.edge(S).cutvalue<0})}function g(m,S,P){var A=P.v,O=P.w;S.hasEdge(A,O)||(A=P.w,O=P.v);var R=m.node(A),H=m.node(O),N=R,K=!1;R.lim>H.lim&&(N=H,K=!0);var V=t.filter(S.edges(),function(k){return K===x(m,m.node(k.v),N)&&K!==x(m,m.node(k.w),N)});return t.minBy(V,function(k){return s(S,k)})}function y(m,S,P,A){var O=P.v,R=P.w;m.removeEdge(O,R),m.setEdge(A.v,A.w,{}),f(m),a(m,S),_(m,S)}function _(m,S){var P=t.find(m.nodes(),function(O){return!S.node(O).parent}),A=r(m,P);A=A.slice(1),t.forEach(A,function(O){var R=m.node(O).parent,H=S.edge(O,R),N=!1;H||(H=S.edge(R,O),N=!0),S.node(O).rank=S.node(R).rank+(N?H.minlen:-H.minlen)})}function M(m,S,P){return m.hasEdge(S,P)}function x(m,S,P){return P.low<=S.lim&&S.lim<=P.lim}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={longestPath:u,slack:s};function u(h){var r={};function c(n){var i=h.node(n);if(t.has(r,n))return i.rank;r[n]=!0;var a=t.min(t.map(h.outEdges(n),function(o){return c(o.w)-h.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}t.forEach(h.sources(),c)}function s(h,r){return h.node(r.w).rank-h.node(r.v).rank-h.edge(r).minlen}},"./node_modules/_dagre@0.8.5@dagre/lib/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={addDummyNode:s,simplify:h,asNonCompoundGraph:r,successorWeights:c,predecessorWeights:n,intersectRect:i,buildLayerMatrix:a,normalizeRanks:o,removeEmptyRanks:l,addBorderNode:f,maxRank:v,partition:b,time:g,notime:y};function s(_,M,x,m){var S;do S=t.uniqueId(m);while(_.hasNode(S));return x.dummy=M,_.setNode(S,x),S}function h(_){var M=new u().setGraph(_.graph());return t.forEach(_.nodes(),function(x){M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){var m=M.edge(x.v,x.w)||{weight:0,minlen:1},S=_.edge(x);M.setEdge(x.v,x.w,{weight:m.weight+S.weight,minlen:Math.max(m.minlen,S.minlen)})}),M}function r(_){var M=new u({multigraph:_.isMultigraph()}).setGraph(_.graph());return t.forEach(_.nodes(),function(x){_.children(x).length||M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){M.setEdge(x,_.edge(x))}),M}function c(_){var M=t.map(_.nodes(),function(x){var m={};return t.forEach(_.outEdges(x),function(S){m[S.w]=(m[S.w]||0)+_.edge(S).weight}),m});return t.zipObject(_.nodes(),M)}function n(_){var M=t.map(_.nodes(),function(x){var m={};return t.forEach(_.inEdges(x),function(S){m[S.v]=(m[S.v]||0)+_.edge(S).weight}),m});return t.zipObject(_.nodes(),M)}function i(_,M){var x=_.x,m=_.y,S=M.x-x,P=M.y-m,A=_.width/2,O=_.height/2;if(!S&&!P)throw new Error("Not possible to find intersection inside of the rectangle");var R,H;return Math.abs(P)*A>Math.abs(S)*O?(P<0&&(O=-O),R=O*S/P,H=O):(S<0&&(A=-A),R=A,H=A*P/S),{x:x+R,y:m+H}}function a(_){var M=t.map(t.range(v(_)+1),function(){return[]});return t.forEach(_.nodes(),function(x){var m=_.node(x),S=m.rank;t.isUndefined(S)||(M[S][m.order]=x)}),M}function o(_){var M=t.min(t.map(_.nodes(),function(x){return _.node(x).rank}));t.forEach(_.nodes(),function(x){var m=_.node(x);t.has(m,"rank")&&(m.rank-=M)})}function l(_){var M=t.min(t.map(_.nodes(),function(P){return _.node(P).rank})),x=[];t.forEach(_.nodes(),function(P){var A=_.node(P).rank-M;x[A]||(x[A]=[]),x[A].push(P)});var m=0,S=_.graph().nodeRankFactor;t.forEach(x,function(P,A){t.isUndefined(P)&&A%S!=0?--m:m&&t.forEach(P,function(O){_.node(O).rank+=m})})}function f(_,M,x,m){var S={width:0,height:0};return arguments.length>=4&&(S.rank=x,S.order=m),s(_,"border",S,M)}function v(_){return t.max(t.map(_.nodes(),function(M){var x=_.node(M).rank;if(!t.isUndefined(x))return x}))}function b(_,M){var x={lhs:[],rhs:[]};return t.forEach(_,function(m){M(m)?x.lhs.push(m):x.rhs.push(m)}),x}function g(_,M){var x=t.now();try{return M()}finally{console.log(_+" time: "+(t.now()-x)+"ms")}}function y(_,M){return M()}},"./node_modules/_dagre@0.8.5@dagre/lib/version.js":function(E,T){E.exports="0.8.5"},"./node_modules/_graphlib@2.1.8@graphlib/index.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/index.js");E.exports={Graph:t.Graph,json:e("./node_modules/_graphlib@2.1.8@graphlib/lib/json.js"),alg:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js"),version:t.version}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(s){var h={},r=[],c;function n(i){t.has(h,i)||(h[i]=!0,c.push(i),t.each(s.successors(i),n),t.each(s.predecessors(i),n))}return t.each(s.nodes(),function(i){c=[],n(i),c.length&&r.push(c)}),r}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(h,r,c){t.isArray(r)||(r=[r]);var n=(h.isDirected()?h.successors:h.neighbors).bind(h),i=[],a={};return t.each(r,function(o){if(!h.hasNode(o))throw new Error("Graph does not have node: "+o);s(h,o,c==="post",a,n,i)}),i}function s(h,r,c,n,i,a){t.has(n,r)||(n[r]=!0,c||a.push(r),t.each(i(r),function(o){s(h,o,c,n,i,a)}),c&&a.push(r))}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;function s(h,r,c){return u.transform(h.nodes(),function(n,i){n[i]=t(h,i,r,c)},{})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=h;var s=t.constant(1);function h(c,n,i,a){return r(c,String(n),i||s,a||function(o){return c.outEdges(o)})}function r(c,n,i,a){var o={},l=new u,f,v,b=function(y){var _=y.v!==f?y.v:y.w,M=o[_],x=i(y),m=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+x);m<M.distance&&(M.distance=m,M.predecessor=f,l.decrease(_,m))};for(c.nodes().forEach(function(g){var y=g===n?0:Number.POSITIVE_INFINITY;o[g]={distance:y},l.add(g,y)});l.size()>0&&(f=l.removeMin(),v=o[f],v.distance!==Number.POSITIVE_INFINITY);)a(f).forEach(b);return o}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js");E.exports=s;function s(h){return t.filter(u(h),function(r){return r.length>1||r.length===1&&h.hasEdge(r[0],r[0])})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;var u=t.constant(1);function s(r,c,n){return h(r,c||u,n||function(i){return r.outEdges(i)})}function h(r,c,n){var i={},a=r.nodes();return a.forEach(function(o){i[o]={},i[o][o]={distance:0},a.forEach(function(l){o!==l&&(i[o][l]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(l){var f=l.v===o?l.w:l.v,v=c(l);i[o][f]={distance:v,predecessor:o}})}),a.forEach(function(o){var l=i[o];a.forEach(function(f){var v=i[f];a.forEach(function(b){var g=v[o],y=l[b],_=v[b],M=g.distance+y.distance;M<_.distance&&(_.distance=M,_.predecessor=y.predecessor)})})}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js":function(E,T,e){E.exports={components:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js"),dijkstra:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),dijkstraAll:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js"),findCycles:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js"),floydWarshall:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js"),isAcyclic:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js"),postorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js"),preorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js"),prim:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js"),tarjan:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js"),topsort:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js");E.exports=u;function u(s){try{t(s)}catch(h){if(h instanceof t.CycleException)return!1;throw h}return!0}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=u;function u(s,h){return t(s,h,"post")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=u;function u(s,h){return t(s,h,"pre")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),s=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=h;function h(r,c){var n=new u,i={},a=new s,o;function l(v){var b=v.v===o?v.w:v.v,g=a.priority(b);if(g!==void 0){var y=c(v);y<g&&(i[b]=o,a.decrease(b,y))}}if(r.nodeCount()===0)return n;t.each(r.nodes(),function(v){a.add(v,Number.POSITIVE_INFINITY),n.setNode(v)}),a.decrease(r.nodes()[0],0);for(var f=!1;a.size()>0;){if(o=a.removeMin(),t.has(i,o))n.setEdge(o,i[o]);else{if(f)throw new Error("Input graph is not connected: "+r);f=!0}r.nodeEdges(o).forEach(l)}return n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(s){var h=0,r=[],c={},n=[];function i(a){var o=c[a]={onStack:!0,lowlink:h,index:h++};if(r.push(a),s.successors(a).forEach(function(v){t.has(c,v)?c[v].onStack&&(o.lowlink=Math.min(o.lowlink,c[v].index)):(i(v),o.lowlink=Math.min(o.lowlink,c[v].lowlink))}),o.lowlink===o.index){var l=[],f;do f=r.pop(),c[f].onStack=!1,l.push(f);while(a!==f);n.push(l)}}return s.nodes().forEach(function(a){t.has(c,a)||i(a)}),n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u,u.CycleException=s;function u(h){var r={},c={},n=[];function i(a){if(t.has(c,a))throw new s;t.has(r,a)||(c[a]=!0,r[a]=!0,t.each(h.predecessors(a),i),delete c[a],n.push(a))}if(t.each(h.sinks(),i),t.size(r)!==h.nodeCount())throw new s;return n}function s(){}s.prototype=new Error},"./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(){this._arr=[],this._keyIndices={}}u.prototype.size=function(){return this._arr.length},u.prototype.keys=function(){return this._arr.map(function(s){return s.key})},u.prototype.has=function(s){return t.has(this._keyIndices,s)},u.prototype.priority=function(s){var h=this._keyIndices[s];if(h!==void 0)return this._arr[h].priority},u.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},u.prototype.add=function(s,h){var r=this._keyIndices;if(s=String(s),!t.has(r,s)){var c=this._arr,n=c.length;return r[s]=n,c.push({key:s,priority:h}),this._decrease(n),!0}return!1},u.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var s=this._arr.pop();return delete this._keyIndices[s.key],this._heapify(0),s.key},u.prototype.decrease=function(s,h){var r=this._keyIndices[s];if(h>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+s+" Old: "+this._arr[r].priority+" New: "+h);this._arr[r].priority=h,this._decrease(r)},u.prototype._heapify=function(s){var h=this._arr,r=2*s,c=r+1,n=s;r<h.length&&(n=h[r].priority<h[n].priority?r:n,c<h.length&&(n=h[c].priority<h[n].priority?c:n),n!==s&&(this._swap(s,n),this._heapify(n)))},u.prototype._decrease=function(s){for(var h=this._arr,r=h[s].priority,c;s!==0&&(c=s>>1,!(h[c].priority<r));)this._swap(s,c),s=c},u.prototype._swap=function(s,h){var r=this._arr,c=this._keyIndices,n=r[s],i=r[h];r[s]=i,r[h]=n,c[i.key]=s,c[n.key]=h}},"./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js":function(E,T,e){"use strict";var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=r;var u="\0",s="\0",h="";function r(l){this._isDirected=t.has(l,"directed")?l.directed:!0,this._isMultigraph=t.has(l,"multigraph")?l.multigraph:!1,this._isCompound=t.has(l,"compound")?l.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[s]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(l){return this._label=l,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(l){return t.isFunction(l)||(l=t.constant(l)),this._defaultNodeLabelFn=l,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return t.keys(this._nodes)},r.prototype.sources=function(){var l=this;return t.filter(this.nodes(),function(f){return t.isEmpty(l._in[f])})},r.prototype.sinks=function(){var l=this;return t.filter(this.nodes(),function(f){return t.isEmpty(l._out[f])})},r.prototype.setNodes=function(l,f){var v=arguments,b=this;return t.each(l,function(g){v.length>1?b.setNode(g,f):b.setNode(g)}),this},r.prototype.setNode=function(l,f){return t.has(this._nodes,l)?(arguments.length>1&&(this._nodes[l]=f),this):(this._nodes[l]=arguments.length>1?f:this._defaultNodeLabelFn(l),this._isCompound&&(this._parent[l]=s,this._children[l]={},this._children[s][l]=!0),this._in[l]={},this._preds[l]={},this._out[l]={},this._sucs[l]={},++this._nodeCount,this)},r.prototype.node=function(l){return this._nodes[l]},r.prototype.hasNode=function(l){return t.has(this._nodes,l)},r.prototype.removeNode=function(l){var f=this;if(t.has(this._nodes,l)){var v=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[l],this._isCompound&&(this._removeFromParentsChildList(l),delete this._parent[l],t.each(this.children(l),function(b){f.setParent(b)}),delete this._children[l]),t.each(t.keys(this._in[l]),v),delete this._in[l],delete this._preds[l],t.each(t.keys(this._out[l]),v),delete this._out[l],delete this._sucs[l],--this._nodeCount}return this},r.prototype.setParent=function(l,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=s;else{f+="";for(var v=f;!t.isUndefined(v);v=this.parent(v))if(v===l)throw new Error("Setting "+f+" as parent of "+l+" would create a cycle");this.setNode(f)}return this.setNode(l),this._removeFromParentsChildList(l),this._parent[l]=f,this._children[f][l]=!0,this},r.prototype._removeFromParentsChildList=function(l){delete this._children[this._parent[l]][l]},r.prototype.parent=function(l){if(this._isCompound){var f=this._parent[l];if(f!==s)return f}},r.prototype.children=function(l){if(t.isUndefined(l)&&(l=s),this._isCompound){var f=this._children[l];if(f)return t.keys(f)}else{if(l===s)return this.nodes();if(this.hasNode(l))return[]}},r.prototype.predecessors=function(l){var f=this._preds[l];if(f)return t.keys(f)},r.prototype.successors=function(l){var f=this._sucs[l];if(f)return t.keys(f)},r.prototype.neighbors=function(l){var f=this.predecessors(l);if(f)return t.union(f,this.successors(l))},r.prototype.isLeaf=function(l){var f;return this.isDirected()?f=this.successors(l):f=this.neighbors(l),f.length===0},r.prototype.filterNodes=function(l){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var v=this;t.each(this._nodes,function(y,_){l(_)&&f.setNode(_,y)}),t.each(this._edgeObjs,function(y){f.hasNode(y.v)&&f.hasNode(y.w)&&f.setEdge(y,v.edge(y))});var b={};function g(y){var _=v.parent(y);return _===void 0||f.hasNode(_)?(b[y]=_,_):_ in b?b[_]:g(_)}return this._isCompound&&t.each(f.nodes(),function(y){f.setParent(y,g(y))}),f},r.prototype.setDefaultEdgeLabel=function(l){return t.isFunction(l)||(l=t.constant(l)),this._defaultEdgeLabelFn=l,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return t.values(this._edgeObjs)},r.prototype.setPath=function(l,f){var v=this,b=arguments;return t.reduce(l,function(g,y){return b.length>1?v.setEdge(g,y,f):v.setEdge(g,y),y}),this},r.prototype.setEdge=function(){var l,f,v,b,g=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(l=y.v,f=y.w,v=y.name,arguments.length===2&&(b=arguments[1],g=!0)):(l=y,f=arguments[1],v=arguments[3],arguments.length>2&&(b=arguments[2],g=!0)),l=""+l,f=""+f,t.isUndefined(v)||(v=""+v);var _=i(this._isDirected,l,f,v);if(t.has(this._edgeLabels,_))return g&&(this._edgeLabels[_]=b),this;if(!t.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(f),this._edgeLabels[_]=g?b:this._defaultEdgeLabelFn(l,f,v);var M=a(this._isDirected,l,f,v);return l=M.v,f=M.w,Object.freeze(M),this._edgeObjs[_]=M,c(this._preds[f],l),c(this._sucs[l],f),this._in[f][_]=M,this._out[l][_]=M,this._edgeCount++,this},r.prototype.edge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v);return this._edgeLabels[b]},r.prototype.hasEdge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v);return t.has(this._edgeLabels,b)},r.prototype.removeEdge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v),g=this._edgeObjs[b];return g&&(l=g.v,f=g.w,delete this._edgeLabels[b],delete this._edgeObjs[b],n(this._preds[f],l),n(this._sucs[l],f),delete this._in[f][b],delete this._out[l][b],this._edgeCount--),this},r.prototype.inEdges=function(l,f){var v=this._in[l];if(v){var b=t.values(v);return f?t.filter(b,function(g){return g.v===f}):b}},r.prototype.outEdges=function(l,f){var v=this._out[l];if(v){var b=t.values(v);return f?t.filter(b,function(g){return g.w===f}):b}},r.prototype.nodeEdges=function(l,f){var v=this.inEdges(l,f);if(v)return v.concat(this.outEdges(l,f))};function c(l,f){l[f]?l[f]++:l[f]=1}function n(l,f){--l[f]||delete l[f]}function i(l,f,v,b){var g=""+f,y=""+v;if(!l&&g>y){var _=g;g=y,y=_}return g+h+y+h+(t.isUndefined(b)?u:b)}function a(l,f,v,b){var g=""+f,y=""+v;if(!l&&g>y){var _=g;g=y,y=_}var M={v:g,w:y};return b&&(M.name=b),M}function o(l,f){return i(l,f.v,f.w,f.name)}},"./node_modules/_graphlib@2.1.8@graphlib/lib/index.js":function(E,T,e){E.exports={Graph:e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),version:e("./node_modules/_graphlib@2.1.8@graphlib/lib/version.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/json.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js");E.exports={write:s,read:c};function s(n){var i={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:h(n),edges:r(n)};return t.isUndefined(n.graph())||(i.value=t.clone(n.graph())),i}function h(n){return t.map(n.nodes(),function(i){var a=n.node(i),o=n.parent(i),l={v:i};return t.isUndefined(a)||(l.value=a),t.isUndefined(o)||(l.parent=o),l})}function r(n){return t.map(n.edges(),function(i){var a=n.edge(i),o={v:i.v,w:i.w};return t.isUndefined(i.name)||(o.name=i.name),t.isUndefined(a)||(o.value=a),o})}function c(n){var i=new u(n.options).setGraph(n.value);return t.each(n.nodes,function(a){i.setNode(a.v,a.value),a.parent&&i.setParent(a.v,a.parent)}),t.each(n.edges,function(a){i.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js":function(E,T,e){var t;try{t={clone:e("./node_modules/_lodash@4.17.20@lodash/clone.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isArray:e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),isEmpty:e("./node_modules/_lodash@4.17.20@lodash/isEmpty.js"),isFunction:e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),keys:e("./node_modules/_lodash@4.17.20@lodash/keys.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),size:e("./node_modules/_lodash@4.17.20@lodash/size.js"),transform:e("./node_modules/_lodash@4.17.20@lodash/transform.js"),union:e("./node_modules/_lodash@4.17.20@lodash/union.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js")}}catch(u){}t||(t=window._),E.exports=t},"./node_modules/_graphlib@2.1.8@graphlib/lib/version.js":function(E,T){E.exports="2.1.8"},"./node_modules/_isarray@0.0.1@isarray/index.js":function(E,T){E.exports=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"}},"./node_modules/_lodash@4.17.20@lodash/_DataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"DataView");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Hash.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_hashClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hashDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_hashGet.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_hashHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_hashSet.js");function c(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}c.prototype.clear=t,c.prototype.delete=u,c.prototype.get=s,c.prototype.has=h,c.prototype.set=r,E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_ListCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js");function c(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}c.prototype.clear=t,c.prototype.delete=u,c.prototype.get=s,c.prototype.has=h,c.prototype.set=r,E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_Map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Map");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_MapCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js");function c(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}c.prototype.clear=t,c.prototype.delete=u,c.prototype.get=s,c.prototype.has=h,c.prototype.set=r,E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_Promise.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Promise");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Set.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Set");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_SetCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js");function h(r){var c=-1,n=r==null?0:r.length;for(this.__data__=new t;++c<n;)this.add(r[c])}h.prototype.add=h.prototype.push=u,h.prototype.has=s,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Stack.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_stackClear.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stackDelete.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_stackGet.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stackHas.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_stackSet.js");function n(i){var a=this.__data__=new t(i);this.size=a.size}n.prototype.clear=u,n.prototype.delete=s,n.prototype.get=h,n.prototype.has=r,n.prototype.set=c,E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_Symbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t.Symbol;E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t.Uint8Array;E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_WeakMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"WeakMap");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_apply.js":function(E,T){function e(t,u,s){switch(s.length){case 0:return t.call(u);case 1:return t.call(u,s[0]);case 2:return t.call(u,s[0],s[1]);case 3:return t.call(u,s[0],s[1],s[2])}return t.apply(u,s)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayEach.js":function(E,T){function e(t,u){for(var s=-1,h=t==null?0:t.length;++s<h&&u(t[s],s,t)!==!1;);return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js":function(E,T){function e(t,u){for(var s=-1,h=t==null?0:t.length,r=0,c=[];++s<h;){var n=t[s];u(n,s,t)&&(c[r++]=n)}return c}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js");function u(s,h){var r=s==null?0:s.length;return!!r&&t(s,h,0)>-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js":function(E,T){function e(t,u,s){for(var h=-1,r=t==null?0:t.length;++h<r;)if(s(u,t[h]))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseTimes.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),n=Object.prototype,i=n.hasOwnProperty;function a(o,l){var f=s(o),v=!f&&u(o),b=!f&&!v&&h(o),g=!f&&!v&&!b&&c(o),y=f||v||b||g,_=y?t(o.length,String):[],M=_.length;for(var x in o)(l||i.call(o,x))&&!(y&&(x=="length"||b&&(x=="offset"||x=="parent")||g&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||r(x,M)))&&_.push(x);return _}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/_arrayMap.js":function(E,T){function e(t,u){for(var s=-1,h=t==null?0:t.length,r=Array(h);++s<h;)r[s]=u(t[s],s,t);return r}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayPush.js":function(E,T){function e(t,u){for(var s=-1,h=u.length,r=t.length;++s<h;)t[r+s]=u[s];return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js":function(E,T){function e(t,u,s,h){var r=-1,c=t==null?0:t.length;for(h&&c&&(s=t[++r]);++r<c;)s=u(s,t[r],r,t);return s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arraySome.js":function(E,T){function e(t,u){for(var s=-1,h=t==null?0:t.length;++s<h;)if(u(t[s],s,t))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_asciiSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),u=t("length");E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function s(h,r,c){(c!==void 0&&!u(h[r],c)||c===void 0&&!(r in h))&&t(h,r,c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_assignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=Object.prototype,h=s.hasOwnProperty;function r(c,n,i){var a=c[n];(!(h.call(c,n)&&u(a,i))||i===void 0&&!(n in c))&&t(c,n,i)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function u(s,h){for(var r=s.length;r--;)if(t(s[r][0],h))return r;return-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseAssign.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(h,r){return h&&t(r,u(r),h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(h,r){return h&&t(r,u(r),h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js");function u(s,h,r){h=="__proto__"&&t?t(s,h,{configurable:!0,enumerable:!0,value:r,writable:!0}):s[h]=r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseClone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseAssign.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/_copySymbols.js"),a=e("./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js"),o=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js"),f=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),v=e("./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js"),g=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),y=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),_=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),M=e("./node_modules/_lodash@4.17.20@lodash/isMap.js"),x=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),m=e("./node_modules/_lodash@4.17.20@lodash/isSet.js"),S=e("./node_modules/_lodash@4.17.20@lodash/keys.js"),P=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),A=1,O=2,R=4,H="[object Arguments]",N="[object Array]",K="[object Boolean]",V="[object Date]",k="[object Error]",Z="[object Function]",X="[object GeneratorFunction]",at="[object Map]",pt="[object Number]",gt="[object Object]",ft="[object RegExp]",Rt="[object Set]",Nt="[object String]",Dt="[object Symbol]",St="[object WeakMap]",xt="[object ArrayBuffer]",Ot="[object DataView]",it="[object Float32Array]",At="[object Float64Array]",z="[object Int8Array]",q="[object Int16Array]",mt="[object Int32Array]",et="[object Uint8Array]",st="[object Uint8ClampedArray]",bt="[object Uint16Array]",Y="[object Uint32Array]",rt={};rt[H]=rt[N]=rt[xt]=rt[Ot]=rt[K]=rt[V]=rt[it]=rt[At]=rt[z]=rt[q]=rt[mt]=rt[at]=rt[pt]=rt[gt]=rt[ft]=rt[Rt]=rt[Nt]=rt[Dt]=rt[et]=rt[st]=rt[bt]=rt[Y]=!0,rt[k]=rt[Z]=rt[St]=!1;function ot($,Pt,yt,Ft,Qt,ne){var Wt,$t=Pt&A,De=Pt&O,Je=Pt&R;if(yt&&(Wt=Qt?yt($,Ft,Qt,ne):yt($)),Wt!==void 0)return Wt;if(!x($))return $;var Qe=y($);if(Qe){if(Wt=v($),!$t)return n($,Wt)}else{var de=f($),ue=de==Z||de==X;if(_($))return c($,$t);if(de==gt||de==H||ue&&!Qt){if(Wt=De||ue?{}:g($),!$t)return De?a($,r(Wt,$)):i($,h(Wt,$))}else{if(!rt[de])return Qt?$:{};Wt=b($,de,$t)}}ne||(ne=new t);var Ne=ne.get($);if(Ne)return Ne;ne.set($,Wt),m($)?$.forEach(function(wn){Wt.add(ot(wn,Pt,yt,wn,$,ne))}):M($)&&$.forEach(function(wn,en){Wt.set(en,ot(wn,Pt,yt,en,$,ne))});var cn=Je?De?l:o:De?P:S,Fn=Qe?void 0:cn($);return u(Fn||$,function(wn,en){Fn&&(en=wn,wn=$[en]),s(Wt,en,ot(wn,Pt,yt,en,$,ne))}),Wt}E.exports=ot},"./node_modules/_lodash@4.17.20@lodash/_baseCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=Object.create,s=function(){function h(){}return function(r){if(!t(r))return{};if(u)return u(r);h.prototype=r;var c=new h;return h.prototype=void 0,c}}();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js"),s=u(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function u(s,h,r){for(var c=-1,n=s.length;++c<n;){var i=s[c],a=h(i);if(a!=null&&(o===void 0?a===a&&!t(a):r(a,o)))var o=a,l=i}return l}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseFilter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js");function u(s,h){var r=[];return t(s,function(c,n,i){h(c,n,i)&&r.push(c)}),r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js":function(E,T){function e(t,u,s,h){for(var r=t.length,c=s+(h?1:-1);h?c--:++c<r;)if(u(t[c],c,t))return c;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js");function s(h,r,c,n,i){var a=-1,o=h.length;for(c||(c=u),i||(i=[]);++a<o;){var l=h[a];r>0&&c(l)?r>1?s(l,r-1,c,n,i):t(i,l):n||(i[i.length]=l)}return i}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseFor.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js"),u=t();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(h,r){return h&&t(h,r,u)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function s(h,r){r=t(r,h);for(var c=0,n=r.length;h!=null&&c<n;)h=h[u(r[c++])];return c&&c==n?h:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function s(h,r,c){var n=r(h);return u(h)?n:t(n,c(h))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getRawTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_objectToString.js"),h="[object Null]",r="[object Undefined]",c=t?t.toStringTag:void 0;function n(i){return i==null?i===void 0?r:h:c&&c in Object(i)?u(i):s(i)}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_baseGt.js":function(E,T){function e(t,u){return t>u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseHas.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function u(s,h){return s!=null&&t.call(s,h)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js":function(E,T){function e(t,u){return t!=null&&u in Object(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js");function h(r,c,n){return c===c?s(r,c,n):t(r,u,n)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Arguments]";function h(r){return u(r)&&t(r)==s}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(h,r,c,n,i){return h===r?!0:h==null||r==null||!u(h)&&!u(r)?h!==h&&r!==r:t(h,r,c,n,s,i)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_equalByTag.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_equalObjects.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a=1,o="[object Arguments]",l="[object Array]",f="[object Object]",v=Object.prototype,b=v.hasOwnProperty;function g(y,_,M,x,m,S){var P=c(y),A=c(_),O=P?l:r(y),R=A?l:r(_);O=O==o?f:O,R=R==o?f:R;var H=O==f,N=R==f,K=O==R;if(K&&n(y)){if(!n(_))return!1;P=!0,H=!1}if(K&&!H)return S||(S=new t),P||i(y)?u(y,_,M,x,m,S):s(y,_,O,M,x,m,S);if(!(M&a)){var V=H&&b.call(y,"__wrapped__"),k=N&&b.call(_,"__wrapped__");if(V||k){var Z=V?y.value():y,X=k?_.value():_;return S||(S=new t),m(Z,X,M,x,S)}}return K?(S||(S=new t),h(y,_,M,x,m,S)):!1}E.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Map]";function h(r){return u(r)&&t(r)==s}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),s=1,h=2;function r(c,n,i,a){var o=i.length,l=o,f=!a;if(c==null)return!l;for(c=Object(c);o--;){var v=i[o];if(f&&v[2]?v[1]!==c[v[0]]:!(v[0]in c))return!1}for(;++o<l;){v=i[o];var b=v[0],g=c[b],y=v[1];if(f&&v[2]){if(g===void 0&&!(b in c))return!1}else{var _=new t;if(a)var M=a(g,y,b,c,n,_);if(!(M===void 0?u(y,g,s|h,a,_):M))return!1}}return!0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js":function(E,T){function e(t){return t!==t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isMasked.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),r=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,n=Function.prototype,i=Object.prototype,a=n.toString,o=i.hasOwnProperty,l=RegExp("^"+a.call(o).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!s(v)||u(v))return!1;var b=t(v)?l:c;return b.test(h(v))}E.exports=f},"./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Set]";function h(r){return u(r)&&t(r)==s}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),h="[object Arguments]",r="[object Array]",c="[object Boolean]",n="[object Date]",i="[object Error]",a="[object Function]",o="[object Map]",l="[object Number]",f="[object Object]",v="[object RegExp]",b="[object Set]",g="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",M="[object DataView]",x="[object Float32Array]",m="[object Float64Array]",S="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",R="[object Uint8ClampedArray]",H="[object Uint16Array]",N="[object Uint32Array]",K={};K[x]=K[m]=K[S]=K[P]=K[A]=K[O]=K[R]=K[H]=K[N]=!0,K[h]=K[r]=K[_]=K[c]=K[M]=K[n]=K[i]=K[a]=K[o]=K[l]=K[f]=K[v]=K[b]=K[g]=K[y]=!1;function V(k){return s(k)&&u(k.length)&&!!K[t(k)]}E.exports=V},"./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMatches.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/property.js");function c(n){return typeof n=="function"?n:n==null?s:typeof n=="object"?h(n)?u(n[0],n[1]):t(n):r(n)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js"),s=Object.prototype,h=s.hasOwnProperty;function r(c){if(!t(c))return u(c);var n=[];for(var i in Object(c))h.call(c,i)&&i!="constructor"&&n.push(i);return n}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js"),h=Object.prototype,r=h.hasOwnProperty;function c(n){if(!t(n))return s(n);var i=u(n),a=[];for(var o in n)o=="constructor"&&(i||!r.call(n,o))||a.push(o);return a}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseLt.js":function(E,T){function e(t,u){return t<u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function s(h,r){var c=-1,n=u(h)?Array(h.length):[];return t(h,function(i,a,o){n[++c]=r(i,a,o)}),n}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseMatches.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getMatchData.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js");function h(r){var c=u(r);return c.length==1&&c[0][2]?s(c[0][0],c[0][1]):function(n){return n===r||t(n,r,c)}}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),u=e("./node_modules/_lodash@4.17.20@lodash/get.js"),s=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js"),i=1,a=2;function o(l,f){return h(l)&&r(f)?c(n(l),f):function(v){var b=u(v,l);return b===void 0&&b===f?s(v,l):t(f,b,i|a)}}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseMerge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),c=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js");function i(a,o,l,f,v){a!==o&&s(o,function(b,g){if(v||(v=new t),r(b))h(a,o,g,l,i,f,v);else{var y=f?f(n(a,g),b,g+"",a,o,v):void 0;y===void 0&&(y=b),u(a,g,y)}},c)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),f=e("./node_modules/_lodash@4.17.20@lodash/isPlainObject.js"),v=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js"),g=e("./node_modules/_lodash@4.17.20@lodash/toPlainObject.js");function y(_,M,x,m,S,P,A){var O=b(_,x),R=b(M,x),H=A.get(R);if(H){t(_,x,H);return}var N=P?P(O,R,x+"",_,M,A):void 0,K=N===void 0;if(K){var V=n(R),k=!V&&a(R),Z=!V&&!k&&v(R);N=R,V||k||Z?n(O)?N=O:i(O)?N=h(O):k?(K=!1,N=u(R,!0)):Z?(K=!1,N=s(R,!0)):N=[]:f(R)||c(R)?(N=O,c(O)?N=g(O):(!l(O)||o(O))&&(N=r(R))):K=!1}K&&(A.set(R,N),S(N,R,m,P,A),A.delete(R)),t(_,x,N)}E.exports=y},"./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js"),i=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function o(l,f,v){f.length?f=t(f,function(y){return a(y)?function(_){return u(_,y.length===1?y[0]:y)}:y}):f=[i];var b=-1;f=t(f,c(s));var g=h(l,function(y,_,M){var x=t(f,function(m){return m(y)});return{criteria:x,index:++b,value:y}});return r(g,function(y,_){return n(y,_,v)})}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_basePick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePickBy.js"),u=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js");function s(h,r){return t(h,r,function(c,n){return u(h,n)})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_basePickBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseSet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js");function h(r,c,n){for(var i=-1,a=c.length,o={};++i<a;){var l=c[i],f=t(r,l);n(f,l)&&u(o,s(l,r),f)}return o}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseProperty.js":function(E,T){function e(t){return function(u){return u==null?void 0:u[t]}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function u(s){return function(h){return t(h,s)}}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseRange.js":function(E,T){var e=Math.ceil,t=Math.max;function u(s,h,r,c){for(var n=-1,i=t(e((h-s)/(r||1)),0),a=Array(i);i--;)a[c?i:++n]=s,s+=r;return a}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseReduce.js":function(E,T){function e(t,u,s,h,r){return r(t,function(c,n,i){s=h?(h=!1,c):u(s,c,n,i)}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function h(r,c){return s(u(r,c,t),r+"")}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function c(n,i,a,o){if(!h(n))return n;i=u(i,n);for(var l=-1,f=i.length,v=f-1,b=n;b!=null&&++l<f;){var g=r(i[l]),y=a;if(g==="__proto__"||g==="constructor"||g==="prototype")return n;if(l!=v){var _=b[g];y=o?o(_,g,b):void 0,y===void 0&&(y=h(_)?_:s(i[l+1])?[]:{})}t(b,g,y),b=b[g]}return n}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/constant.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),h=u?function(r,c){return u(r,"toString",{configurable:!0,enumerable:!1,value:t(c),writable:!0})}:s;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js":function(E,T){function e(t,u){var s=t.length;for(t.sort(u);s--;)t[s]=t[s].value;return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseTimes.js":function(E,T){function e(t,u){for(var s=-1,h=Array(t);++s<t;)h[s]=u(s);return h}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),r=1/0,c=t?t.prototype:void 0,n=c?c.toString:void 0;function i(a){if(typeof a=="string")return a;if(s(a))return u(a,i)+"";if(h(a))return n?n.call(a):"";var o=a+"";return o=="0"&&1/a==-r?"-0":o}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseUnary.js":function(E,T){function e(t){return function(u){return t(u)}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseUniq.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_createSet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=200;function i(a,o,l){var f=-1,v=u,b=a.length,g=!0,y=[],_=y;if(l)g=!1,v=s;else if(b>=n){var M=o?null:r(a);if(M)return c(M);g=!1,v=h,_=new t}else _=o?[]:y;t:for(;++f<b;){var x=a[f],m=o?o(x):x;if(x=l||x!==0?x:0,g&&m===m){for(var S=_.length;S--;)if(_[S]===m)continue t;o&&_.push(m),y.push(x)}else v(_,m,l)||(_!==y&&_.push(m),y.push(x))}return y}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js");function u(s,h){return t(h,function(r){return s[r]})}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js":function(E,T){function e(t,u,s){for(var h=-1,r=t.length,c=u.length,n={};++h<r;){var i=h<c?u[h]:void 0;s(n,t[h],i)}return n}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_cacheHas.js":function(E,T){function e(t,u){return t.has(u)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_castFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function u(s){return typeof s=="function"?s:t}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_castPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stringToPath.js"),h=e("./node_modules/_lodash@4.17.20@lodash/toString.js");function r(c,n){return t(c)?c:u(c,n)?[c]:s(h(c))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js");function u(s){var h=new s.constructor(s.byteLength);return new t(h).set(new t(s)),h}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=T&&!T.nodeType&&T,h=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=h&&h.exports===s,c=r?u.Buffer:void 0,n=c?c.allocUnsafe:void 0;function i(a,o){if(o)return a.slice();var l=a.length,f=n?n(l):new a.constructor(l);return a.copy(f),f}t.exports=i}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function u(s,h){var r=h?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.byteLength)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js":function(E,T){var e=/\w*$/;function t(u){var s=new u.constructor(u.source,e.exec(u));return s.lastIndex=u.lastIndex,s}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=t?t.prototype:void 0,s=u?u.valueOf:void 0;function h(r){return s?Object(s.call(r)):{}}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function u(s,h){var r=h?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.length)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_compareAscending.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function u(s,h){if(s!==h){var r=s!==void 0,c=s===null,n=s===s,i=t(s),a=h!==void 0,o=h===null,l=h===h,f=t(h);if(!o&&!f&&!i&&s>h||i&&a&&l&&!o&&!f||c&&a&&l||!r&&l||!n)return 1;if(!c&&!i&&!f&&s<h||f&&r&&n&&!c&&!i||o&&r&&n||!a&&n||!l)return-1}return 0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_compareAscending.js");function u(s,h,r){for(var c=-1,n=s.criteria,i=h.criteria,a=n.length,o=r.length;++c<a;){var l=t(n[c],i[c]);if(l){if(c>=o)return l;var f=r[c];return l*(f=="desc"?-1:1)}}return s.index-h.index}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_copyArray.js":function(E,T){function e(t,u){var s=-1,h=t.length;for(u||(u=Array(h));++s<h;)u[s]=t[s];return u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_copyObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js");function s(h,r,c,n){var i=!c;c||(c={});for(var a=-1,o=r.length;++a<o;){var l=r[a],f=n?n(c[l],h[l],l,c,h):void 0;f===void 0&&(f=h[l]),i?u(c,l,f):t(c,l,f)}return c}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js");function s(h,r){return t(h,u(h),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js");function s(h,r){return t(h,u(h),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_coreJsData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t["__core-js_shared__"];E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_createAssigner.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js");function s(h){return t(function(r,c){var n=-1,i=c.length,a=i>1?c[i-1]:void 0,o=i>2?c[2]:void 0;for(a=h.length>3&&typeof a=="function"?(i--,a):void 0,o&&u(c[0],c[1],o)&&(a=i<3?void 0:a,i=1),r=Object(r);++n<i;){var l=c[n];l&&h(r,l,n,a)}return r})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function u(s,h){return function(r,c){if(r==null)return r;if(!t(r))return s(r,c);for(var n=r.length,i=h?n:-1,a=Object(r);(h?i--:++i<n)&&c(a[i],i,a)!==!1;);return r}}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js":function(E,T){function e(t){return function(u,s,h){for(var r=-1,c=Object(u),n=h(u),i=n.length;i--;){var a=n[t?i:++r];if(s(c[a],a,c)===!1)break}return u}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_createFind.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function h(r){return function(c,n,i){var a=Object(c);if(!u(c)){var o=t(n,3);c=s(c),n=function(v){return o(a[v],v,a)}}var l=r(c,n,i);return l>-1?a[o?c[l]:l]:void 0}}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_createRange.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRange.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function h(r){return function(c,n,i){return i&&typeof i!="number"&&u(c,n,i)&&(n=i=void 0),c=s(c),n===void 0?(n=c,c=0):n=s(n),i=i===void 0?c<n?1:-1:s(i),t(c,n,i,r)}}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_createSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),u=e("./node_modules/_lodash@4.17.20@lodash/noop.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),h=1/0,r=t&&1/s(new t([,-0]))[1]==h?function(c){return new t(c)}:u;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_defineProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=function(){try{var s=t(Object,"defineProperty");return s({},"",{}),s}catch(h){}}();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_equalArrays.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arraySome.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),h=1,r=2;function c(n,i,a,o,l,f){var v=a&h,b=n.length,g=i.length;if(b!=g&&!(v&&g>b))return!1;var y=f.get(n),_=f.get(i);if(y&&_)return y==i&&_==n;var M=-1,x=!0,m=a&r?new t:void 0;for(f.set(n,i),f.set(i,n);++M<b;){var S=n[M],P=i[M];if(o)var A=v?o(P,S,M,i,n,f):o(S,P,M,n,i,f);if(A!==void 0){if(A)continue;x=!1;break}if(m){if(!u(i,function(O,R){if(!s(m,R)&&(S===O||l(S,O,a,o,f)))return m.push(R)})){x=!1;break}}else if(!(S===P||l(S,P,a,o,f))){x=!1;break}}return f.delete(n),f.delete(i),x}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_equalByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js"),s=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapToArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=1,i=2,a="[object Boolean]",o="[object Date]",l="[object Error]",f="[object Map]",v="[object Number]",b="[object RegExp]",g="[object Set]",y="[object String]",_="[object Symbol]",M="[object ArrayBuffer]",x="[object DataView]",m=t?t.prototype:void 0,S=m?m.valueOf:void 0;function P(A,O,R,H,N,K,V){switch(R){case x:if(A.byteLength!=O.byteLength||A.byteOffset!=O.byteOffset)return!1;A=A.buffer,O=O.buffer;case M:return!(A.byteLength!=O.byteLength||!K(new u(A),new u(O)));case a:case o:case v:return s(+A,+O);case l:return A.name==O.name&&A.message==O.message;case b:case y:return A==O+"";case f:var k=r;case g:var Z=H&n;if(k||(k=c),A.size!=O.size&&!Z)return!1;var X=V.get(A);if(X)return X==O;H|=i,V.set(A,O);var at=h(k(A),k(O),H,N,K,V);return V.delete(A),at;case _:if(S)return S.call(A)==S.call(O)}return!1}E.exports=P},"./node_modules/_lodash@4.17.20@lodash/_equalObjects.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),u=1,s=Object.prototype,h=s.hasOwnProperty;function r(c,n,i,a,o,l){var f=i&u,v=t(c),b=v.length,g=t(n),y=g.length;if(b!=y&&!f)return!1;for(var _=b;_--;){var M=v[_];if(!(f?M in n:h.call(n,M)))return!1}var x=l.get(c),m=l.get(n);if(x&&m)return x==n&&m==c;var S=!0;l.set(c,n),l.set(n,c);for(var P=f;++_<b;){M=v[_];var A=c[M],O=n[M];if(a)var R=f?a(O,A,M,n,c,l):a(A,O,M,c,n,l);if(!(R===void 0?A===O||o(A,O,i,a,l):R)){S=!1;break}P||(P=M=="constructor")}if(S&&!P){var H=c.constructor,N=n.constructor;H!=N&&"constructor"in c&&"constructor"in n&&!(typeof H=="function"&&H instanceof H&&typeof N=="function"&&N instanceof N)&&(S=!1)}return l.delete(c),l.delete(n),S}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_flatRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function h(r){return s(u(r,void 0,t),r+"")}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js":function(E,T,e){(function(t){var u=typeof t=="object"&&t&&t.Object===Object&&t;E.exports=u}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function h(r){return t(r,s,u)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function h(r){return t(r,s,u)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getMapData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isKeyable.js");function u(s,h){var r=s.__data__;return t(h)?r[typeof h=="string"?"string":"hash"]:r.map}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_getMatchData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(h){for(var r=u(h),c=r.length;c--;){var n=r[c],i=h[n];r[c]=[n,i,t(i)]}return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getValue.js");function s(h,r){var c=u(h,r);return t(c)?c:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getPrototype.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),u=t(Object.getPrototypeOf,Object);E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_getRawTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=Object.prototype,s=u.hasOwnProperty,h=u.toString,r=t?t.toStringTag:void 0;function c(n){var i=s.call(n,r),a=n[r];try{n[r]=void 0;var o=!0}catch(f){}var l=h.call(n);return o&&(i?n[r]=a:delete n[r]),l}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getSymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),u=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),s=Object.prototype,h=s.propertyIsEnumerable,r=Object.getOwnPropertySymbols,c=r?function(n){return n==null?[]:(n=Object(n),t(r(n),function(i){return h.call(n,i)}))}:u;E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),h=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),r=Object.getOwnPropertySymbols,c=r?function(n){for(var i=[];n;)t(i,s(n)),n=u(n);return i}:h;E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_DataView.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Promise.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_WeakMap.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),i="[object Map]",a="[object Object]",o="[object Promise]",l="[object Set]",f="[object WeakMap]",v="[object DataView]",b=n(t),g=n(u),y=n(s),_=n(h),M=n(r),x=c;(t&&x(new t(new ArrayBuffer(1)))!=v||u&&x(new u)!=i||s&&x(s.resolve())!=o||h&&x(new h)!=l||r&&x(new r)!=f)&&(x=function(S){var P=c(S),A=P==a?S.constructor:void 0,O=A?n(A):"";if(O)switch(O){case b:return v;case g:return i;case y:return o;case _:return l;case M:return f}return P}),E.exports=x},"./node_modules/_lodash@4.17.20@lodash/_getValue.js":function(E,T){function e(t,u){return t==null?void 0:t[u]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hasPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function n(i,a,o){a=t(a,i);for(var l=-1,f=a.length,v=!1;++l<f;){var b=c(a[l]);if(!(v=i!=null&&o(i,b)))break;i=i[b]}return v||++l!=f?v:(f=i==null?0:i.length,!!f&&r(f)&&h(b,f)&&(s(i)||u(i)))}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",h=t+u+s,r="\\ufe0e\\ufe0f",c="\\u200d",n=RegExp("["+c+e+h+r+"]");function i(a){return n.test(a)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_hashClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js");function u(){this.__data__=t?t(null):{},this.size=0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_hashDelete.js":function(E,T){function e(t){var u=this.has(t)&&delete this.__data__[t];return this.size-=u?1:0,u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hashGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u="__lodash_hash_undefined__",s=Object.prototype,h=s.hasOwnProperty;function r(c){var n=this.__data__;if(t){var i=n[c];return i===u?void 0:i}return h.call(n,c)?n[c]:void 0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_hashHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u=Object.prototype,s=u.hasOwnProperty;function h(r){var c=this.__data__;return t?c[r]!==void 0:s.call(c,r)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_hashSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u="__lodash_hash_undefined__";function s(h,r){var c=this.__data__;return this.size+=this.has(h)?0:1,c[h]=t&&r===void 0?u:r,this}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function u(s){var h=s.length,r=new s.constructor(h);return h&&typeof s[0]=="string"&&t.call(s,"index")&&(r.index=s.index,r.input=s.input),r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),c="[object Boolean]",n="[object Date]",i="[object Map]",a="[object Number]",o="[object RegExp]",l="[object Set]",f="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",_="[object Float64Array]",M="[object Int8Array]",x="[object Int16Array]",m="[object Int32Array]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",A="[object Uint16Array]",O="[object Uint32Array]";function R(H,N,K){var V=H.constructor;switch(N){case b:return t(H);case c:case n:return new V(+H);case g:return u(H,K);case y:case _:case M:case x:case m:case S:case P:case A:case O:return r(H,K);case i:return new V;case a:case f:return new V(H);case o:return s(H);case l:return new V;case v:return h(H)}}E.exports=R},"./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js");function h(r){return typeof r.constructor=="function"&&!s(r)?t(u(r)):{}}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),h=t?t.isConcatSpreadable:void 0;function r(c){return s(c)||u(c)||!!(h&&c&&c[h])}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isIndex.js":function(E,T){var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function u(s,h){var r=typeof s;return h=h==null?e:h,!!h&&(r=="number"||r!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<h}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function r(c,n,i){if(!h(i))return!1;var a=typeof n;return(a=="number"?u(i)&&s(n,i.length):a=="string"&&n in i)?t(i[n],c):!1}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/;function r(c,n){if(t(c))return!1;var i=typeof c;return i=="number"||i=="symbol"||i=="boolean"||c==null||u(c)?!0:h.test(c)||!s.test(c)||n!=null&&c in Object(n)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKeyable.js":function(E,T){function e(t){var u=typeof t;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?t!=="__proto__":t===null}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_isMasked.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_coreJsData.js"),u=function(){var h=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}();function s(h){return!!u&&u in h}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_isPrototype.js":function(E,T){var e=Object.prototype;function t(u){var s=u&&u.constructor,h=typeof s=="function"&&s.prototype||e;return u===h}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function u(s){return s===s&&!t(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js":function(E,T){function e(){this.__data__=[],this.size=0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js"),u=Array.prototype,s=u.splice;function h(r){var c=this.__data__,n=t(c,r);if(n<0)return!1;var i=c.length-1;return n==i?c.pop():s.call(c,n,1),--this.size,!0}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s){var h=this.__data__,r=t(h,s);return r<0?void 0:h[r][1]}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s){return t(this.__data__,s)>-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s,h){var r=this.__data__,c=t(r,s);return c<0?(++this.size,r.push([s,h])):r[c][1]=h,this}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Hash.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Map.js");function h(){this.size=0,this.__data__={hash:new t,map:new(s||u),string:new t}}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){var h=t(this,s).delete(s);return this.size-=h?1:0,h}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){return t(this,s).get(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){return t(this,s).has(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s,h){var r=t(this,s),c=r.size;return r.set(s,h),this.size+=r.size==c?0:1,this}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapToArray.js":function(E,T){function e(t){var u=-1,s=Array(t.size);return t.forEach(function(h,r){s[++u]=[r,h]}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js":function(E,T){function e(t,u){return function(s){return s==null?!1:s[t]===u&&(u!==void 0||t in Object(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/memoize.js"),u=500;function s(h){var r=t(h,function(n){return c.size===u&&c.clear(),n}),c=r.cache;return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=t(Object,"create");E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),u=t(Object.keys,Object);E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js":function(E,T){function e(t){var u=[];if(t!=null)for(var s in Object(t))u.push(s);return u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),s=T&&!T.nodeType&&T,h=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=h&&h.exports===s,c=r&&u.process,n=function(){try{var i=h&&h.require&&h.require("util").types;return i||c&&c.binding&&c.binding("util")}catch(a){}}();t.exports=n}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_objectToString.js":function(E,T){var e=Object.prototype,t=e.toString;function u(s){return t.call(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_overArg.js":function(E,T){function e(t,u){return function(s){return t(u(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_overRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_apply.js"),u=Math.max;function s(h,r,c){return r=u(r===void 0?h.length-1:r,0),function(){for(var n=arguments,i=-1,a=u(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var l=Array(r+1);++i<r;)l[i]=n[i];return l[r]=c(o),t(h,this,l)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_root.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),u=typeof self=="object"&&self&&self.Object===Object&&self,s=t||u||Function("return this")();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_safeGet.js":function(E,T){function e(t,u){if(!(u==="constructor"&&typeof t[u]=="function")&&u!="__proto__")return t[u]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js":function(E,T){var e="__lodash_hash_undefined__";function t(u){return this.__data__.set(u,e),this}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToArray.js":function(E,T){function e(t){var u=-1,s=Array(t.size);return t.forEach(function(h){s[++u]=h}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_shortOut.js"),s=u(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_shortOut.js":function(E,T){var e=800,t=16,u=Date.now;function s(h){var r=0,c=0;return function(){var n=u(),i=t-(n-c);if(c=n,i>0){if(++r>=e)return arguments[0]}else r=0;return h.apply(void 0,arguments)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_stackClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js");function u(){this.__data__=new t,this.size=0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_stackDelete.js":function(E,T){function e(t){var u=this.__data__,s=u.delete(t);return this.size=u.size,s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackGet.js":function(E,T){function e(t){return this.__data__.get(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),h=200;function r(c,n){var i=this.__data__;if(i instanceof t){var a=i.__data__;if(!u||a.length<h-1)return a.push([c,n]),this.size=++i.size,this;i=this.__data__=new s(a)}return i.set(c,n),this.size=i.size,this}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js":function(E,T){function e(t,u,s){for(var h=s-1,r=t.length;++h<r;)if(t[h]===u)return h;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stringSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_asciiSize.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js");function h(r){return u(r)?s(r):t(r)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_stringToPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js"),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,h=t(function(r){var c=[];return r.charCodeAt(0)===46&&c.push(""),r.replace(u,function(n,i,a,o){c.push(a?o.replace(s,"$1"):i||n)}),c});E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_toKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),u=1/0;function s(h){if(typeof h=="string"||t(h))return h;var r=h+"";return r=="0"&&1/h==-u?"-0":r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_toSource.js":function(E,T){var e=Function.prototype,t=e.toString;function u(s){if(s!=null){try{return t.call(s)}catch(h){}try{return s+""}catch(h){}}return""}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",h=t+u+s,r="\\ufe0e\\ufe0f",c="["+e+"]",n="["+h+"]",i="\\ud83c[\\udffb-\\udfff]",a="(?:"+n+"|"+i+")",o="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",b=a+"?",g="["+r+"]?",y="(?:"+v+"(?:"+[o,l,f].join("|")+")"+g+b+")*",_=g+b+y,M="(?:"+[o+n+"?",n,l,f,c].join("|")+")",x=RegExp(i+"(?="+i+")|"+M+_,"g");function m(S){for(var P=x.lastIndex=0;x.test(S);)++P;return P}E.exports=m},"./node_modules/_lodash@4.17.20@lodash/clone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),u=4;function s(h){return t(h,u)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/cloneDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),u=1,s=4;function h(r){return t(r,u|s)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/constant.js":function(E,T){function e(t){return function(){return t}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/defaults.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),h=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),r=Object.prototype,c=r.hasOwnProperty,n=t(function(i,a){i=Object(i);var o=-1,l=a.length,f=l>2?a[2]:void 0;for(f&&s(a[0],a[1],f)&&(l=1);++o<l;)for(var v=a[o],b=h(v),g=-1,y=b.length;++g<y;){var _=b[g],M=i[_];(M===void 0||u(M,r[_])&&!c.call(i,_))&&(i[_]=v[_])}return i});E.exports=n},"./node_modules/_lodash@4.17.20@lodash/each.js":function(E,T,e){E.exports=e("./node_modules/_lodash@4.17.20@lodash/forEach.js")},"./node_modules/_lodash@4.17.20@lodash/eq.js":function(E,T){function e(t,u){return t===u||t!==t&&u!==u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/filter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseFilter.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(c,n){var i=h(c)?t:u;return i(c,s(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/find.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createFind.js"),u=e("./node_modules/_lodash@4.17.20@lodash/findIndex.js"),s=t(u);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/findIndex.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toInteger.js"),h=Math.max;function r(c,n,i){var a=c==null?0:c.length;if(!a)return-1;var o=i==null?0:s(i);return o<0&&(o=h(a+o,0)),t(c,u(n,3),o)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/flatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js");function u(s){var h=s==null?0:s.length;return h?t(s,1):[]}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/forEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(c,n){var i=h(c)?t:u;return i(c,s(n))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/forIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function h(r,c){return r==null?r:t(r,u(c),s)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/get.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function u(s,h,r){var c=s==null?void 0:t(s,h);return c===void 0?r:c}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/has.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHas.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(h,r){return h!=null&&u(h,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/hasIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(h,r){return h!=null&&u(h,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/identity.js":function(E,T){function e(t){return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s=Object.prototype,h=s.hasOwnProperty,r=s.propertyIsEnumerable,c=t(function(){return arguments}())?t:function(n){return u(n)&&h.call(n,"callee")&&!r.call(n,"callee")};E.exports=c},"./node_modules/_lodash@4.17.20@lodash/isArray.js":function(E,T){var e=Array.isArray;E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArrayLike.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isLength.js");function s(h){return h!=null&&u(h.length)&&!t(h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(h){return u(h)&&t(h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isBuffer.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=e("./node_modules/_lodash@4.17.20@lodash/stubFalse.js"),h=T&&!T.nodeType&&T,r=h&&typeof t=="object"&&t&&!t.nodeType&&t,c=r&&r.exports===h,n=c?u.Buffer:void 0,i=n?n.isBuffer:void 0,a=i||s;t.exports=a}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/isEmpty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a="[object Map]",o="[object Set]",l=Object.prototype,f=l.hasOwnProperty;function v(b){if(b==null)return!0;if(r(b)&&(h(b)||typeof b=="string"||typeof b.splice=="function"||c(b)||i(b)||s(b)))return!b.length;var g=u(b);if(g==a||g==o)return!b.size;if(n(b))return!t(b).length;for(var y in b)if(f.call(b,y))return!1;return!0}E.exports=v},"./node_modules/_lodash@4.17.20@lodash/isFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),s="[object AsyncFunction]",h="[object Function]",r="[object GeneratorFunction]",c="[object Proxy]";function n(i){if(!u(i))return!1;var a=t(i);return a==h||a==r||a==s||a==c}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/isLength.js":function(E,T){var e=9007199254740991;function t(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=e}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/isMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),h=s&&s.isMap,r=h?u(h):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isObject.js":function(E,T){function e(t){var u=typeof t;return t!=null&&(u=="object"||u=="function")}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isObjectLike.js":function(E,T){function e(t){return t!=null&&typeof t=="object"}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),h="[object Object]",r=Function.prototype,c=Object.prototype,n=r.toString,i=c.hasOwnProperty,a=n.call(Object);function o(l){if(!s(l)||t(l)!=h)return!1;var f=u(l);if(f===null)return!0;var v=i.call(f,"constructor")&&f.constructor;return typeof v=="function"&&v instanceof v&&n.call(v)==a}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/isSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),h=s&&s.isSet,r=h?u(h):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),h="[object String]";function r(c){return typeof c=="string"||!u(c)&&s(c)&&t(c)==h}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Symbol]";function h(r){return typeof r=="symbol"||u(r)&&t(r)==s}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/isTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),h=s&&s.isTypedArray,r=h?u(h):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isUndefined.js":function(E,T){function e(t){return t===void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/keys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function h(r){return s(r)?t(r):u(r)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/keysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function h(r){return s(r)?t(r,!0):u(r)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/last.js":function(E,T){function e(t){var u=t==null?0:t.length;return u?t[u-1]:void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(c,n){var i=h(c)?t:s;return i(c,u(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/mapValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js");function h(r,c){var n={};return c=s(c,3),u(r,function(i,a,o){t(n,a,c(i,a,o))}),n}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/max.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseGt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function h(r){return r&&r.length?t(r,s,u):void 0}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/memoize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),u="Expected a function";function s(h,r){if(typeof h!="function"||r!=null&&typeof r!="function")throw new TypeError(u);var c=function n(){var i=arguments,a=r?r.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var l=h.apply(this,i);return n.cache=o.set(a,l)||o,l};return c.cache=new(s.Cache||t),c}s.Cache=t,E.exports=s},"./node_modules/_lodash@4.17.20@lodash/merge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMerge.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_createAssigner.js"),s=u(function(h,r,c){t(h,r,c)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/min.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function h(r){return r&&r.length?t(r,s,u):void 0}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/minBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js");function h(r,c){return r&&r.length?t(r,u(c,2),s):void 0}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/noop.js":function(E,T){function e(){}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/now.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=function(){return t.Date.now()};E.exports=u},"./node_modules/_lodash@4.17.20@lodash/pick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePick.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_flatRest.js"),s=u(function(h,r){return h==null?{}:t(h,r)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/property.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function r(c){return s(c)?t(h(c)):u(c)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/range.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createRange.js"),u=t();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/reduce.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseReduce.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function c(n,i,a){var o=r(n)?t:h,l=arguments.length<3;return o(n,s(i,4),a,l,u)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/size.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isString.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stringSize.js"),c="[object Map]",n="[object Set]";function i(a){if(a==null)return 0;if(s(a))return h(a)?r(a):a.length;var o=u(a);return o==c||o==n?a.size:t(a).length}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/sortBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),r=s(function(c,n){if(c==null)return[];var i=n.length;return i>1&&h(c,n[0],n[1])?n=[]:i>2&&h(n[0],n[1],n[2])&&(n=[n[0]]),u(c,t(n,1),[])});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/stubArray.js":function(E,T){function e(){return[]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/stubFalse.js":function(E,T){function e(){return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/toFinite.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toNumber.js"),u=1/0,s=17976931348623157e292;function h(r){if(!r)return r===0?r:0;if(r=t(r),r===u||r===-u){var c=r<0?-1:1;return c*s}return r===r?r:0}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/toInteger.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function u(s){var h=t(s),r=h%1;return h===h?r?h-r:h:0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/toNumber.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=0/0,h=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,n=/^0o[0-7]+$/i,i=parseInt;function a(o){if(typeof o=="number")return o;if(u(o))return s;if(t(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=t(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=o.replace(h,"");var f=c.test(o);return f||n.test(o)?i(o.slice(2),f?2:8):r.test(o)?s:+o}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/toPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(h){return t(h,u(h))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/toString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseToString.js");function u(s){return s==null?"":t(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/transform.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js");function l(f,v,b){var g=c(f),y=g||n(f)||o(f);if(v=h(v,4),b==null){var _=f&&f.constructor;y?b=g?new _:[]:a(f)?b=i(_)?u(r(f)):{}:b={}}return(y?t:s)(f,function(M,x,m){return v(b,M,x,m)}),b}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/union.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseUniq.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),r=u(function(c){return s(t(c,1,h,!0))});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/uniqueId.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toString.js"),u=0;function s(h){var r=++u;return t(h)+r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/values.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseValues.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(h){return h==null?[]:t(h,u(h))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/zipObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js");function s(h,r){return u(h||[],r||[],t)}E.exports=s},"./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js":function(E,T){E.exports=u;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function u(r){var c=[];return r.replace(t,function(n,i,a){var o=i.toLowerCase();for(a=h(a),o=="m"&&a.length>2&&(c.push([i].concat(a.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(a.length==e[o])return a.unshift(i),c.push(a);if(a.length<e[o])throw new Error("malformed path data");c.push([i].concat(a.splice(0,e[o])))}}),c}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function h(r){var c=r.match(s);return c?c.map(Number):[]}},"./node_modules/_point-at-length@1.1.0@point-at-length/index.js":function(E,T,e){var t=e("./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js"),u=e("./node_modules/_isarray@0.0.1@isarray/index.js"),s=e("./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js");E.exports=h;function h(i){if(!(this instanceof h))return new h(i);this._path=u(i)?i:t(i),this._path=s(this._path),this._path=n(this._path),this._path=c(this._path)}h.prototype.at=function(i,a){return this._walk(i,a).pos},h.prototype.length=function(){return this._walk(null).length},h.prototype._walk=function(i,a){for(var o=[0,0],l=[0,0,0],f=[0,0],v=0,b=0;b<this._path.length;b++){var g=this._path[b];if(g[0]==="M"){if(o[0]=g[1],o[1]=g[2],i===0)return{length:v,pos:o}}else if(g[0]==="C"){l[0]=f[0]=o[0],l[1]=f[1]=o[1],l[2]=v;for(var y=100,_=0;_<=y;_++){var M=_/y,x=A(g,M),m=O(g,M);if(v+=r(o[0],o[1],x,m),o[0]=x,o[1]=m,typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}else if(g[0]==="Q"){l[0]=f[0]=o[0],l[1]=f[1]=o[1],l[2]=v;for(var y=100,_=0;_<=y;_++){var M=_/y,x=R(g,M),m=H(g,M);if(v+=r(o[0],o[1],x,m),o[0]=x,o[1]=m,typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}else if(g[0]==="L"){if(l[0]=o[0],l[1]=o[1],l[2]=v,v+=r(o[0],o[1],g[1],g[2]),o[0]=g[1],o[1]=g[2],typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}return{length:v,pos:o};function A(N,K){return Math.pow(1-K,3)*f[0]+3*Math.pow(1-K,2)*K*N[1]+3*(1-K)*Math.pow(K,2)*N[3]+Math.pow(K,3)*N[5]}function O(N,K){return Math.pow(1-K,3)*f[1]+3*Math.pow(1-K,2)*K*N[2]+3*(1-K)*Math.pow(K,2)*N[4]+Math.pow(K,3)*N[6]}function R(N,K){return Math.pow(1-K,2)*f[0]+2*(1-K)*K*N[1]+Math.pow(K,2)*N[3]}function H(N,K){return Math.pow(1-K,2)*f[1]+2*(1-K)*K*N[2]+Math.pow(K,2)*N[4]}};function r(i,a,o,l){var f=i-o,v=a-l;return Math.sqrt(f*f+v*v)}function c(i){for(var a,o=0,l=0,f={S:{to:"C",x:3},T:{to:"Q",x:1}},v=0,b=i.length;v<b;v++){var g=i[v],y=f[g[0]];y&&(g[0]=y.to,a&&(a[0]===y.to?(o=2*a[y.x+2]-a[y.x],l=2*a[y.x+3]-a[y.x+1]):(o=a[a.length-2],l=a[a.length-1])),g.splice(1,0,o,l)),a=g}return i}function n(i){for(var a=[],o=["L",0,0],l,f=0,v=i.length;f<v;f++){var b=i[f];switch(b[0]){case"M":o=["L",b[1],b[2]],a.push(b);break;case"Z":a.push(o);break;case"H":l=a[a.length-1]||["L",0,0],a.push(["L",b[1],l[l.length-1]]);break;case"V":l=a[a.length-1]||["L",0,0],a.push(["L",l[l.length-2],b[1]]);break;default:a.push(b)}}return a}},"./node_modules/_regression@2.0.1@regression/dist/regression.js":function(E,T,e){var t,u,s;(function(h,r){if(!0)u=[E],t=r,s=typeof t=="function"?t.apply(T,u):t,s!==void 0&&(E.exports=s);else var c})(this,function(h){"use strict";function r(b,g,y){return g in b?Object.defineProperty(b,g,{value:y,enumerable:!0,configurable:!0,writable:!0}):b[g]=y,b}var c=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(b[_]=y[_])}return b};function n(b){if(Array.isArray(b)){for(var g=0,y=Array(b.length);g<b.length;g++)y[g]=b[g];return y}else return Array.from(b)}var i={order:2,precision:2,period:null};function a(b,g){var y=[],_=[];b.forEach(function(P,A){P[1]!==null&&(_.push(P),y.push(g[A]))});var M=_.reduce(function(P,A){return P+A[1]},0),x=M/_.length,m=_.reduce(function(P,A){var O=A[1]-x;return P+O*O},0),S=_.reduce(function(P,A,O){var R=y[O],H=A[1]-R[1];return P+H*H},0);return 1-S/m}function o(b,g){for(var y=b,_=b.length-1,M=[g],x=0;x<_;x++){for(var m=x,S=x+1;S<_;S++)Math.abs(y[x][S])>Math.abs(y[x][m])&&(m=S);for(var P=x;P<_+1;P++){var A=y[P][x];y[P][x]=y[P][m],y[P][m]=A}for(var O=x+1;O<_;O++)for(var R=_;R>=x;R--)y[R][O]-=y[R][x]*y[x][O]/y[x][x]}for(var H=_-1;H>=0;H--){for(var N=0,K=H+1;K<_;K++)N+=y[K][H]*M[K];M[H]=(y[_][H]-N)/y[H][H]}return M}function l(b,g){var y=Math.pow(10,g);return Math.round(b*y)/y}var f={linear:function(g,y){for(var _=[0,0,0,0,0],M=0,x=0;x<g.length;x++)g[x][1]!==null&&(M++,_[0]+=g[x][0],_[1]+=g[x][1],_[2]+=g[x][0]*g[x][0],_[3]+=g[x][0]*g[x][1],_[4]+=g[x][1]*g[x][1]);var m=M*_[2]-_[0]*_[0],S=M*_[3]-_[0]*_[1],P=m===0?0:l(S/m,y.precision),A=l(_[1]/M-P*_[0]/M,y.precision),O=function(N){return[l(N,y.precision),l(P*N+A,y.precision)]},R=g.map(function(H){return O(H[0])});return{points:R,predict:O,equation:[P,A],r2:l(a(g,R),y.precision),string:A===0?"y = "+P+"x":"y = "+P+"x + "+A}},exponential:function(g,y){for(var _=[0,0,0,0,0,0],M=0;M<g.length;M++)g[M][1]!==null&&(_[0]+=g[M][0],_[1]+=g[M][1],_[2]+=g[M][0]*g[M][0]*g[M][1],_[3]+=g[M][1]*Math.log(g[M][1]),_[4]+=g[M][0]*g[M][1]*Math.log(g[M][1]),_[5]+=g[M][0]*g[M][1]);var x=_[1]*_[2]-_[5]*_[5],m=Math.exp((_[2]*_[3]-_[5]*_[4])/x),S=(_[1]*_[4]-_[5]*_[3])/x,P=l(m,y.precision),A=l(S,y.precision),O=function(N){return[l(N,y.precision),l(P*Math.exp(A*N),y.precision)]},R=g.map(function(H){return O(H[0])});return{points:R,predict:O,equation:[P,A],string:"y = "+P+"e^("+A+"x)",r2:l(a(g,R),y.precision)}},logarithmic:function(g,y){for(var _=[0,0,0,0],M=g.length,x=0;x<M;x++)g[x][1]!==null&&(_[0]+=Math.log(g[x][0]),_[1]+=g[x][1]*Math.log(g[x][0]),_[2]+=g[x][1],_[3]+=Math.pow(Math.log(g[x][0]),2));var m=(M*_[1]-_[2]*_[0])/(M*_[3]-_[0]*_[0]),S=l(m,y.precision),P=l((_[2]-S*_[0])/M,y.precision),A=function(H){return[l(H,y.precision),l(l(P+S*Math.log(H),y.precision),y.precision)]},O=g.map(function(R){return A(R[0])});return{points:O,predict:A,equation:[P,S],string:"y = "+P+" + "+S+" ln(x)",r2:l(a(g,O),y.precision)}},power:function(g,y){for(var _=[0,0,0,0,0],M=g.length,x=0;x<M;x++)g[x][1]!==null&&(_[0]+=Math.log(g[x][0]),_[1]+=Math.log(g[x][1])*Math.log(g[x][0]),_[2]+=Math.log(g[x][1]),_[3]+=Math.pow(Math.log(g[x][0]),2));var m=(M*_[1]-_[0]*_[2])/(M*_[3]-Math.pow(_[0],2)),S=(_[2]-m*_[0])/M,P=l(Math.exp(S),y.precision),A=l(m,y.precision),O=function(N){return[l(N,y.precision),l(l(P*Math.pow(N,A),y.precision),y.precision)]},R=g.map(function(H){return O(H[0])});return{points:R,predict:O,equation:[P,A],string:"y = "+P+"x^"+A,r2:l(a(g,R),y.precision)}},polynomial:function(g,y){for(var _=[],M=[],x=0,m=0,S=g.length,P=y.order+1,A=0;A<P;A++){for(var O=0;O<S;O++)g[O][1]!==null&&(x+=Math.pow(g[O][0],A)*g[O][1]);_.push(x),x=0;for(var R=[],H=0;H<P;H++){for(var N=0;N<S;N++)g[N][1]!==null&&(m+=Math.pow(g[N][0],A+H));R.push(m),m=0}M.push(R)}M.push(_);for(var K=o(M,P).map(function(at){return l(at,y.precision)}),V=function(pt){return[l(pt,y.precision),l(K.reduce(function(gt,ft,Rt){return gt+ft*Math.pow(pt,Rt)},0),y.precision)]},k=g.map(function(at){return V(at[0])}),Z="y = ",X=K.length-1;X>=0;X--)X>1?Z+=K[X]+"x^"+X+" + ":X===1?Z+=K[X]+"x + ":Z+=K[X];return{string:Z,points:k,predict:V,equation:[].concat(n(K)).reverse(),r2:l(a(g,k),y.precision)}}};function v(){var b=function(y,_){return c({_round:l},y,r({},_,function(M,x){return f[_](M,c({},i,x))}))};return Object.keys(f).reduce(b,{})}h.exports=v()})},"./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(Y){if(Y.length===0)return 0;for(var rt,ot=Y[0],$=0,Pt=1;Pt<Y.length;Pt++)rt=ot+Y[Pt],Math.abs(ot)>=Math.abs(Y[Pt])?$+=ot-rt+Y[Pt]:$+=Y[Pt]-rt+ot,ot=rt;return ot+$}function s(Y){if(Y.length===0)throw new Error("mean requires at least one data point");return u(Y)/Y.length}function h(Y,rt){var ot,$,Pt=s(Y),yt=0;if(rt===2)for($=0;$<Y.length;$++)yt+=(ot=Y[$]-Pt)*ot;else for($=0;$<Y.length;$++)yt+=Math.pow(Y[$]-Pt,rt);return yt}function r(Y){if(Y.length===0)throw new Error("variance requires at least one data point");return h(Y,2)/Y.length}function c(Y){if(Y.length===1)return 0;var rt=r(Y);return Math.sqrt(rt)}function n(Y){if(Y.length===0)throw new Error("mode requires at least one data point");if(Y.length===1)return Y[0];for(var rt=Y[0],ot=NaN,$=0,Pt=1,yt=1;yt<Y.length+1;yt++)Y[yt]!==rt?($<Pt&&($=Pt,ot=rt),Pt=1,rt=Y[yt]):Pt++;return ot}function i(Y){return Y.slice().sort(function(rt,ot){return rt-ot})}function a(Y){if(Y.length===0)throw new Error("min requires at least one data point");for(var rt=Y[0],ot=1;ot<Y.length;ot++)Y[ot]<rt&&(rt=Y[ot]);return rt}function o(Y){if(Y.length===0)throw new Error("max requires at least one data point");for(var rt=Y[0],ot=1;ot<Y.length;ot++)Y[ot]>rt&&(rt=Y[ot]);return rt}function l(Y,rt){var ot=Y.length*rt;if(Y.length===0)throw new Error("quantile requires at least one data point.");if(rt<0||1<rt)throw new Error("quantiles must be between 0 and 1");return rt===1?Y[Y.length-1]:rt===0?Y[0]:ot%1!=0?Y[Math.ceil(ot)-1]:Y.length%2==0?(Y[ot-1]+Y[ot])/2:Y[ot]}function f(Y,rt,ot,$){for(ot=ot||0,$=$||Y.length-1;ot<$;){if(600<$-ot){var Pt=$-ot+1,yt=rt-ot+1,Ft=Math.log(Pt),Qt=.5*Math.exp(2*Ft/3),ne=.5*Math.sqrt(Ft*Qt*(Pt-Qt)/Pt);yt-Pt/2<0&&(ne*=-1),f(Y,rt,Math.max(ot,Math.floor(rt-yt*Qt/Pt+ne)),Math.min($,Math.floor(rt+(Pt-yt)*Qt/Pt+ne)))}var Wt=Y[rt],$t=ot,De=$;for(v(Y,ot,rt),Y[$]>Wt&&v(Y,ot,$);$t<De;){for(v(Y,$t,De),$t++,De--;Y[$t]<Wt;)$t++;for(;Y[De]>Wt;)De--}Y[ot]===Wt?v(Y,ot,De):v(Y,++De,$),De<=rt&&(ot=De+1),rt<=De&&($=De-1)}}function v(Y,rt,ot){var $=Y[rt];Y[rt]=Y[ot],Y[ot]=$}function b(Y,rt){var ot=Y.slice();if(Array.isArray(rt)){(function(yt,Ft){for(var Qt=[0],ne=0;ne<Ft.length;ne++)Qt.push(_(yt.length,Ft[ne]));Qt.push(yt.length-1),Qt.sort(y);for(var Wt=[0,Qt.length-1];Wt.length;){var $t=Math.ceil(Wt.pop()),De=Math.floor(Wt.pop());if(!($t-De<=1)){var Je=Math.floor((De+$t)/2);g(yt,Qt[Je],Qt[De],Qt[$t]),Wt.push(De,Je,Je,$t)}}})(ot,rt);for(var $=[],Pt=0;Pt<rt.length;Pt++)$[Pt]=l(ot,rt[Pt]);return $}return g(ot,_(ot.length,rt),0,ot.length-1),l(ot,rt)}function g(Y,rt,ot,$){rt%1==0?f(Y,rt,ot,$):(f(Y,rt=Math.floor(rt),ot,$),f(Y,rt+1,rt+1,$))}function y(Y,rt){return Y-rt}function _(Y,rt){var ot=Y*rt;return rt===1?Y-1:rt===0?0:ot%1!=0?Math.ceil(ot)-1:Y%2==0?ot-.5:ot}function M(Y,rt){if(rt<Y[0])return 0;if(rt>Y[Y.length-1])return 1;var ot=function(yt,Ft){for(var Qt=0,ne=0,Wt=yt.length;ne<Wt;)Ft<=yt[Qt=ne+Wt>>>1]?Wt=Qt:ne=-~Qt;return ne}(Y,rt);if(Y[ot]!==rt)return ot/Y.length;ot++;var $=function(yt,Ft){for(var Qt=0,ne=0,Wt=yt.length;ne<Wt;)Ft>=yt[Qt=ne+Wt>>>1]?ne=-~Qt:Wt=Qt;return ne}(Y,rt);if($===ot)return ot/Y.length;var Pt=$-ot+1;return Pt*($+ot)/2/Pt/Y.length}function x(Y){var rt=b(Y,.75),ot=b(Y,.25);if(typeof rt=="number"&&typeof ot=="number")return rt-ot}function m(Y){return+b(Y,.5)}function S(Y){for(var rt=m(Y),ot=[],$=0;$<Y.length;$++)ot.push(Math.abs(Y[$]-rt));return m(ot)}function P(Y,rt){rt=rt||Math.random;for(var ot,$,Pt=Y.length;0<Pt;)$=Math.floor(rt()*Pt--),ot=Y[Pt],Y[Pt]=Y[$],Y[$]=ot;return Y}function A(Y,rt){return P(Y.slice().slice(),rt)}function O(Y){for(var rt,ot=0,$=0;$<Y.length;$++)$!==0&&Y[$]===rt||(rt=Y[$],ot++);return ot}function R(Y,rt){for(var ot=[],$=0;$<Y;$++){for(var Pt=[],yt=0;yt<rt;yt++)Pt.push(0);ot.push(Pt)}return ot}function H(Y,rt,ot,$){var Pt;if(0<Y){var yt=(ot[rt]-ot[Y-1])/(rt-Y+1);Pt=$[rt]-$[Y-1]-(rt-Y+1)*yt*yt}else Pt=$[rt]-ot[rt]*ot[rt]/(rt+1);return Pt<0?0:Pt}function N(Y,rt,ot,$,Pt,yt,Ft){if(!(rt<Y)){var Qt=Math.floor((Y+rt)/2);$[ot][Qt]=$[ot-1][Qt-1],Pt[ot][Qt]=Qt;var ne=ot;ot<Y&&(ne=Math.max(ne,Pt[ot][Y-1]||0)),ne=Math.max(ne,Pt[ot-1][Qt]||0);var Wt,$t,De,Je=Qt-1;rt<$.length-1&&(Je=Math.min(Je,Pt[ot][rt+1]||0));for(var Qe=Je;ne<=Qe&&!((Wt=H(Qe,Qt,yt,Ft))+$[ot-1][ne-1]>=$[ot][Qt]);--Qe)($t=H(ne,Qt,yt,Ft)+$[ot-1][ne-1])<$[ot][Qt]&&($[ot][Qt]=$t,Pt[ot][Qt]=ne),ne++,(De=Wt+$[ot-1][Qe-1])<$[ot][Qt]&&($[ot][Qt]=De,Pt[ot][Qt]=Qe);N(Y,Qt-1,ot,$,Pt,yt,Ft),N(Qt+1,rt,ot,$,Pt,yt,Ft)}}function K(Y,rt){if(Y.length!==rt.length)throw new Error("sampleCovariance requires samples with equal lengths");if(Y.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var ot=s(Y),$=s(rt),Pt=0,yt=0;yt<Y.length;yt++)Pt+=(Y[yt]-ot)*(rt[yt]-$);return Pt/(Y.length-1)}function V(Y){if(Y.length<2)throw new Error("sampleVariance requires at least two data points");return h(Y,2)/(Y.length-1)}function k(Y){var rt=V(Y);return Math.sqrt(rt)}function Z(Y,rt,ot,$){return(Y*rt+ot*$)/(rt+$)}function X(Y){if(Y.length===0)throw new Error("rootMeanSquare requires at least one data point");for(var rt=0,ot=0;ot<Y.length;ot++)rt+=Math.pow(Y[ot],2);return Math.sqrt(rt/Y.length)}function at(){this.totalCount=0,this.data={}}function pt(){this.weights=[],this.bias=0}at.prototype.train=function(Y,rt){for(var ot in this.data[rt]||(this.data[rt]={}),Y){var $=Y[ot];this.data[rt][ot]===void 0&&(this.data[rt][ot]={}),this.data[rt][ot][$]===void 0&&(this.data[rt][ot][$]=0),this.data[rt][ot][$]++}this.totalCount++},at.prototype.score=function(Y){var rt,ot={};for(var $ in Y){var Pt=Y[$];for(rt in this.data)ot[rt]={},this.data[rt][$]?ot[rt][$+"_"+Pt]=(this.data[rt][$][Pt]||0)/this.totalCount:ot[rt][$+"_"+Pt]=0}var yt={};for(rt in ot)for(var Ft in yt[rt]=0,ot[rt])yt[rt]+=ot[rt][Ft];return yt},pt.prototype.predict=function(Y){if(Y.length!==this.weights.length)return null;for(var rt=0,ot=0;ot<this.weights.length;ot++)rt+=this.weights[ot]*Y[ot];return 0<(rt+=this.bias)?1:0},pt.prototype.train=function(Y,rt){if(rt!==0&&rt!==1)return null;Y.length!==this.weights.length&&(this.weights=Y,this.bias=1);var ot=this.predict(Y);if(ot!==rt){for(var $=rt-ot,Pt=0;Pt<this.weights.length;Pt++)this.weights[Pt]+=$*Y[Pt];this.bias+=$}return this};var gt=1e-4;function ft(Y){if(Y<0)throw new Error("factorial requires a non-negative value");if(Math.floor(Y)!==Y)throw new Error("factorial requires an integer input");for(var rt=1,ot=2;ot<=Y;ot++)rt*=ot;return rt}var Rt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Nt=Math.log(Math.sqrt(2*Math.PI)),Dt={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},St=Math.sqrt(2*Math.PI),xt={gaussian:function(rt){return Math.exp(-.5*rt*rt)/St}},Ot={nrd:function(rt){var ot=k(rt),$=x(rt);return typeof $=="number"&&(ot=Math.min(ot,$/1.34)),1.06*ot*Math.pow(rt.length,-.2)}};function it(Y,rt,ot){var $,Pt;if(rt===void 0)$=xt.gaussian;else if(typeof rt=="string"){if(!xt[rt])throw new Error('Unknown kernel "'+rt+'"');$=xt[rt]}else $=rt;if(ot===void 0)Pt=Ot.nrd(Y);else if(typeof ot=="string"){if(!Ot[ot])throw new Error('Unknown bandwidth method "'+ot+'"');Pt=Ot[ot](Y)}else Pt=ot;return function(yt){var Ft=0,Qt=0;for(Ft=0;Ft<Y.length;Ft++)Qt+=$((yt-Y[Ft])/Pt);return Qt/Pt/Y.length}}var At=Math.sqrt(2*Math.PI);function z(Y){for(var rt=Y,ot=Y,$=1;$<15;$++)rt+=ot*=Y*Y/(2*$+1);return Math.round(1e4*(.5+rt/At*Math.exp(-Y*Y/2)))/1e4}for(var q=[],mt=0;mt<=3.09;mt+=.01)q.push(z(mt));function et(Y){var rt=1/(1+.5*Math.abs(Y)),ot=rt*Math.exp(-Math.pow(Y,2)-1.26551223+1.00002368*rt+.37409196*Math.pow(rt,2)+.09678418*Math.pow(rt,3)-.18628806*Math.pow(rt,4)+.27886807*Math.pow(rt,5)-1.13520398*Math.pow(rt,6)+1.48851587*Math.pow(rt,7)-.82215223*Math.pow(rt,8)+.17087277*Math.pow(rt,9));return 0<=Y?1-ot:ot-1}function st(Y){var rt=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),ot=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*rt)+Math.log(1-Y*Y)/2,2)-Math.log(1-Y*Y)/rt)-(2/(Math.PI*rt)+Math.log(1-Y*Y)/2));return 0<=Y?ot:-ot}function bt(Y){if(typeof Y=="number")return Y<0?-1:Y===0?0:1;throw new TypeError("not a number")}t.linearRegression=function(Y){var rt,ot,$=Y.length;if($===1)ot=Y[rt=0][1];else{for(var Pt,yt,Ft,Qt=0,ne=0,Wt=0,$t=0,De=0;De<$;De++)Qt+=yt=(Pt=Y[De])[0],ne+=Ft=Pt[1],Wt+=yt*yt,$t+=yt*Ft;ot=ne/$-(rt=($*$t-Qt*ne)/($*Wt-Qt*Qt))*Qt/$}return{m:rt,b:ot}},t.linearRegressionLine=function(Y){return function(rt){return Y.b+Y.m*rt}},t.standardDeviation=c,t.rSquared=function(Y,rt){if(Y.length<2)return 1;for(var ot,$=0,Pt=0;Pt<Y.length;Pt++)$+=Y[Pt][1];ot=$/Y.length;for(var yt=0,Ft=0;Ft<Y.length;Ft++)yt+=Math.pow(ot-Y[Ft][1],2);for(var Qt=0,ne=0;ne<Y.length;ne++)Qt+=Math.pow(Y[ne][1]-rt(Y[ne][0]),2);return 1-Qt/yt},t.mode=function(Y){return n(i(Y))},t.modeFast=function(Y){for(var rt,ot=new Map,$=0,Pt=0;Pt<Y.length;Pt++){var yt=ot.get(Y[Pt]);yt===void 0?yt=1:yt++,$<yt&&(rt=Y[Pt],$=yt),ot.set(Y[Pt],yt)}if($===0)throw new Error("mode requires at last one data point");return rt},t.modeSorted=n,t.min=a,t.max=o,t.extent=function(Y){if(Y.length===0)throw new Error("extent requires at least one data point");for(var rt=Y[0],ot=Y[0],$=1;$<Y.length;$++)Y[$]>ot&&(ot=Y[$]),Y[$]<rt&&(rt=Y[$]);return[rt,ot]},t.minSorted=function(Y){return Y[0]},t.maxSorted=function(Y){return Y[Y.length-1]},t.extentSorted=function(Y){return[Y[0],Y[Y.length-1]]},t.sum=u,t.sumSimple=function(Y){for(var rt=0,ot=0;ot<Y.length;ot++)rt+=Y[ot];return rt},t.product=function(Y){for(var rt=1,ot=0;ot<Y.length;ot++)rt*=Y[ot];return rt},t.quantile=b,t.quantileSorted=l,t.quantileRank=function(Y,rt){return M(i(Y),rt)},t.quantileRankSorted=M,t.interquartileRange=x,t.iqr=x,t.medianAbsoluteDeviation=S,t.mad=S,t.chunk=function(Y,rt){var ot=[];if(rt<1)throw new Error("chunk size must be a positive number");if(Math.floor(rt)!==rt)throw new Error("chunk size must be an integer");for(var $=0;$<Y.length;$+=rt)ot.push(Y.slice($,$+rt));return ot},t.sampleWithReplacement=function(Y,rt,ot){if(Y.length===0)return[];ot=ot||Math.random;for(var $=Y.length,Pt=[],yt=0;yt<rt;yt++){var Ft=Math.floor(ot()*$);Pt.push(Y[Ft])}return Pt},t.shuffle=A,t.shuffleInPlace=P,t.sample=function(Y,rt,ot){return A(Y,ot).slice(0,rt)},t.ckmeans=function(Y,rt){if(rt>Y.length)throw new Error("cannot generate more classes than there are data values");var ot=i(Y);if(O(ot)===1)return[ot];var $=R(rt,ot.length),Pt=R(rt,ot.length);(function(Wt,$t,De){for(var Je,Qe=$t[0].length,de=Wt[Math.floor(Qe/2)],ue=[],Ne=[],cn=0;cn<Qe;++cn)Je=Wt[cn]-de,cn===0?(ue.push(Je),Ne.push(Je*Je)):(ue.push(ue[cn-1]+Je),Ne.push(Ne[cn-1]+Je*Je)),$t[0][cn]=H(0,cn,ue,Ne),De[0][cn]=0;for(var Fn=1;Fn<$t.length;++Fn)N(Fn<$t.length-1?Fn:Qe-1,Qe-1,Fn,$t,De,ue,Ne)})(ot,$,Pt);for(var yt=[],Ft=Pt[0].length-1,Qt=Pt.length-1;0<=Qt;Qt--){var ne=Pt[Qt][Ft];yt[Qt]=ot.slice(ne,Ft+1),0<Qt&&(Ft=ne-1)}return yt},t.uniqueCountSorted=O,t.sumNthPowerDeviations=h,t.equalIntervalBreaks=function(Y,rt){if(Y.length<2)return Y;for(var ot=a(Y),$=o(Y),Pt=[ot],yt=($-ot)/rt,Ft=1;Ft<rt;Ft++)Pt.push(Pt[0]+yt*Ft);return Pt.push($),Pt},t.sampleCovariance=K,t.sampleCorrelation=function(Y,rt){return K(Y,rt)/k(Y)/k(rt)},t.sampleVariance=V,t.sampleStandardDeviation=k,t.sampleSkewness=function(Y){if(Y.length<3)throw new Error("sampleSkewness requires at least three data points");for(var rt,ot=s(Y),$=0,Pt=0,yt=0;yt<Y.length;yt++)$+=(rt=Y[yt]-ot)*rt,Pt+=rt*rt*rt;var Ft=Y.length-1,Qt=Math.sqrt($/Ft),ne=Y.length;return ne*Pt/((ne-1)*(ne-2)*Math.pow(Qt,3))},t.sampleKurtosis=function(Y){var rt=Y.length;if(rt<4)throw new Error("sampleKurtosis requires at least four data points");for(var ot,$=s(Y),Pt=0,yt=0,Ft=0;Ft<rt;Ft++)Pt+=(ot=Y[Ft]-$)*ot,yt+=ot*ot*ot*ot;return(rt-1)/((rt-2)*(rt-3))*(rt*(rt+1)*yt/(Pt*Pt)-3*(rt-1))},t.permutationsHeap=function(Y){for(var rt=new Array(Y.length),ot=[Y.slice()],$=0;$<Y.length;$++)rt[$]=0;for($=0;$<Y.length;)if(rt[$]<$){var Pt=0;$%2!=0&&(Pt=rt[$]);var yt=Y[Pt];Y[Pt]=Y[$],Y[$]=yt,ot.push(Y.slice()),rt[$]++,$=0}else rt[$]=0,$++;return ot},t.combinations=function Y(rt,ot){var $,Pt,yt,Ft,Qt=[];for($=0;$<rt.length;$++)if(ot===1)Qt.push([rt[$]]);else for(yt=Y(rt.slice($+1,rt.length),ot-1),Pt=0;Pt<yt.length;Pt++)(Ft=yt[Pt]).unshift(rt[$]),Qt.push(Ft);return Qt},t.combinationsReplacement=function Y(rt,ot){for(var $=[],Pt=0;Pt<rt.length;Pt++)if(ot===1)$.push([rt[Pt]]);else for(var yt=Y(rt.slice(Pt,rt.length),ot-1),Ft=0;Ft<yt.length;Ft++)$.push([rt[Pt]].concat(yt[Ft]));return $},t.addToMean=function(Y,rt,ot){return Y+(ot-Y)/(rt+1)},t.combineMeans=Z,t.combineVariances=function(Y,rt,ot,$,Pt,yt){var Ft=Z(rt,ot,Pt,yt);return(ot*(Y+Math.pow(rt-Ft,2))+yt*($+Math.pow(Pt-Ft,2)))/(ot+yt)},t.geometricMean=function(Y){if(Y.length===0)throw new Error("geometricMean requires at least one data point");for(var rt=1,ot=0;ot<Y.length;ot++){if(Y[ot]<=0)throw new Error("geometricMean requires only positive numbers as input");rt*=Y[ot]}return Math.pow(rt,1/Y.length)},t.harmonicMean=function(Y){if(Y.length===0)throw new Error("harmonicMean requires at least one data point");for(var rt=0,ot=0;ot<Y.length;ot++){if(Y[ot]<=0)throw new Error("harmonicMean requires only positive numbers as input");rt+=1/Y[ot]}return Y.length/rt},t.average=s,t.mean=s,t.median=m,t.medianSorted=function(Y){return l(Y,.5)},t.subtractFromMean=function(Y,rt,ot){return(Y*rt-ot)/(rt-1)},t.rootMeanSquare=X,t.rms=X,t.variance=r,t.tTest=function(Y,rt){return(s(Y)-rt)/(c(Y)/Math.sqrt(Y.length))},t.tTestTwoSample=function(Y,rt,ot){var $=Y.length,Pt=rt.length;if(!$||!Pt)return null;ot||(ot=0);var yt=s(Y),Ft=s(rt),Qt=V(Y),ne=V(rt);if(typeof yt=="number"&&typeof Ft=="number"&&typeof Qt=="number"&&typeof ne=="number"){var Wt=(($-1)*Qt+(Pt-1)*ne)/($+Pt-2);return(yt-Ft-ot)/Math.sqrt(Wt*(1/$+1/Pt))}},t.BayesianClassifier=at,t.bayesian=at,t.PerceptronModel=pt,t.perceptron=pt,t.epsilon=gt,t.factorial=ft,t.gamma=function Y(rt){if(typeof(ot=rt)=="number"&&isFinite(ot)&&Math.floor(ot)===ot)return rt<=0?NaN:ft(rt-1);var ot;if(--rt<0)return Math.PI/(Math.sin(Math.PI*-rt)*Y(-rt));var $=rt+.25;return Math.pow(rt/Math.E,rt)*Math.sqrt(2*Math.PI*(rt+1/6))*(1+1/144/Math.pow($,2)-1/12960/Math.pow($,3)-257/207360/Math.pow($,4)-52/2612736/Math.pow($,5)+5741173/9405849600/Math.pow($,6)+37529/18811699200/Math.pow($,7))},t.gammaln=function(Y){if(Y<=0)return 1/0;Y--;for(var rt=Rt[0],ot=1;ot<15;ot++)rt+=Rt[ot]/(Y+ot);var $=5.2421875+Y;return Nt+Math.log(rt)-$+(Y+.5)*Math.log($)},t.bernoulliDistribution=function(Y){if(Y<0||1<Y)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-Y,Y]},t.binomialDistribution=function(Y,rt){if(!(rt<0||1<rt||Y<=0||Y%1!=0)){for(var ot=0,$=0,Pt=[],yt=1;Pt[ot]=yt*Math.pow(rt,ot)*Math.pow(1-rt,Y-ot),$+=Pt[ot],yt=yt*(Y-++ot+1)/ot,$<1-gt;);return Pt}},t.poissonDistribution=function(Y){if(!(Y<=0)){for(var rt=0,ot=0,$=[],Pt=1;$[rt]=Math.exp(-Y)*Math.pow(Y,rt)/Pt,ot+=$[rt],Pt*=++rt,ot<1-gt;);return $}},t.chiSquaredDistributionTable=Dt,t.chiSquaredGoodnessOfFit=function(Y,rt,ot){for(var $,Pt,yt=0,Ft=rt(s(Y)),Qt=[],ne=[],Wt=0;Wt<Y.length;Wt++)Qt[Y[Wt]]===void 0&&(Qt[Y[Wt]]=0),Qt[Y[Wt]]++;for(Wt=0;Wt<Qt.length;Wt++)Qt[Wt]===void 0&&(Qt[Wt]=0);for(Pt in Ft)Pt in Qt&&(ne[+Pt]=Ft[Pt]*Y.length);for(Pt=ne.length-1;0<=Pt;Pt--)ne[Pt]<3&&(ne[Pt-1]+=ne[Pt],ne.pop(),Qt[Pt-1]+=Qt[Pt],Qt.pop());for(Pt=0;Pt<Qt.length;Pt++)yt+=Math.pow(Qt[Pt]-ne[Pt],2)/ne[Pt];return $=Qt.length-1-1,Dt[$][ot]<yt},t.kernelDensityEstimation=it,t.kde=it,t.zScore=function(Y,rt,ot){return(Y-rt)/ot},t.cumulativeStdNormalProbability=function(Y){var rt=Math.abs(Y),ot=Math.min(Math.round(100*rt),q.length-1);return 0<=Y?q[ot]:+(1-q[ot]).toFixed(4)},t.standardNormalTable=q,t.errorFunction=et,t.erf=et,t.inverseErrorFunction=st,t.probit=function(Y){return Y===0?Y=gt:1<=Y&&(Y=1-gt),Math.sqrt(2)*st(2*Y-1)},t.permutationTest=function(Y,rt,ot,$){if($===void 0&&($=1e4),ot===void 0&&(ot="two_side"),ot!=="two_side"&&ot!=="greater"&&ot!=="less")throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var Pt=s(Y)-s(rt),yt=new Array($),Ft=Y.concat(rt),Qt=Math.floor(Ft.length/2),ne=0;ne<$;ne++){P(Ft);var Wt=Ft.slice(0,Qt),$t=Ft.slice(Qt,Ft.length),De=s(Wt)-s($t);yt[ne]=De}var Je=0;if(ot==="two_side")for(ne=0;ne<=$;ne++)Math.abs(yt[ne])>=Math.abs(Pt)&&(Je+=1);else if(ot==="greater")for(ne=0;ne<=$;ne++)yt[ne]>=Pt&&(Je+=1);else for(ne=0;ne<=$;ne++)yt[ne]<=Pt&&(Je+=1);return Je/$},t.bisect=function(Y,rt,ot,$,Pt){if(typeof Y!="function")throw new TypeError("func must be a function");for(var yt=0;yt<$;yt++){var Ft=(rt+ot)/2;if(Y(Ft)===0||Math.abs((ot-rt)/2)<Pt)return Ft;bt(Y(Ft))===bt(Y(rt))?rt=Ft:ot=Ft}throw new Error("maximum number of iterations exceeded")},t.quickselect=f,t.sign=bt,t.numericSort=i,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(m){return m}function s(m){if(m==null)return u;var S,P,A=m.scale[0],O=m.scale[1],R=m.translate[0],H=m.translate[1];return function(N,K){K||(S=P=0);var V=2,k=N.length,Z=new Array(k);for(Z[0]=(S+=N[0])*A+R,Z[1]=(P+=N[1])*O+H;V<k;)Z[V]=N[V],++V;return Z}}function h(m){var S=s(m.transform),P,A=Infinity,O=A,R=-A,H=-A;function N(V){V=S(V),V[0]<A&&(A=V[0]),V[0]>R&&(R=V[0]),V[1]<O&&(O=V[1]),V[1]>H&&(H=V[1])}function K(V){switch(V.type){case"GeometryCollection":V.geometries.forEach(K);break;case"Point":N(V.coordinates);break;case"MultiPoint":V.coordinates.forEach(N);break}}m.arcs.forEach(function(V){for(var k=-1,Z=V.length,X;++k<Z;)X=S(V[k],k),X[0]<A&&(A=X[0]),X[0]>R&&(R=X[0]),X[1]<O&&(O=X[1]),X[1]>H&&(H=X[1])});for(P in m.objects)K(m.objects[P]);return[A,O,R,H]}function r(m,S){for(var P,A=m.length,O=A-S;O<--A;)P=m[O],m[O++]=m[A],m[A]=P}function c(m,S){return typeof S=="string"&&(S=m.objects[S]),S.type==="GeometryCollection"?{type:"FeatureCollection",features:S.geometries.map(function(P){return n(m,P)})}:n(m,S)}function n(m,S){var P=S.id,A=S.bbox,O=S.properties==null?{}:S.properties,R=i(m,S);return P==null&&A==null?{type:"Feature",properties:O,geometry:R}:A==null?{type:"Feature",id:P,properties:O,geometry:R}:{type:"Feature",id:P,bbox:A,properties:O,geometry:R}}function i(m,S){var P=s(m.transform),A=m.arcs;function O(k,Z){Z.length&&Z.pop();for(var X=A[k<0?~k:k],at=0,pt=X.length;at<pt;++at)Z.push(P(X[at],at));k<0&&r(Z,pt)}function R(k){return P(k)}function H(k){for(var Z=[],X=0,at=k.length;X<at;++X)O(k[X],Z);return Z.length<2&&Z.push(Z[0]),Z}function N(k){for(var Z=H(k);Z.length<4;)Z.push(Z[0]);return Z}function K(k){return k.map(N)}function V(k){var Z=k.type,X;switch(Z){case"GeometryCollection":return{type:Z,geometries:k.geometries.map(V)};case"Point":X=R(k.coordinates);break;case"MultiPoint":X=k.coordinates.map(R);break;case"LineString":X=H(k.arcs);break;case"MultiLineString":X=k.arcs.map(H);break;case"Polygon":X=K(k.arcs);break;case"MultiPolygon":X=k.arcs.map(K);break;default:return null}return{type:Z,coordinates:X}}return V(S)}function a(m,S){var P={},A={},O={},R=[],H=-1;S.forEach(function(V,k){var Z=m.arcs[V<0?~V:V],X;Z.length<3&&!Z[1][0]&&!Z[1][1]&&(X=S[++H],S[H]=V,S[k]=X)}),S.forEach(function(V){var k=N(V),Z=k[0],X=k[1],at,pt;if(at=O[Z])if(delete O[at.end],at.push(V),at.end=X,pt=A[X]){delete A[pt.start];var gt=pt===at?at:at.concat(pt);A[gt.start=at.start]=O[gt.end=pt.end]=gt}else A[at.start]=O[at.end]=at;else if(at=A[X])if(delete A[at.start],at.unshift(V),at.start=Z,pt=O[Z]){delete O[pt.end];var ft=pt===at?at:pt.concat(at);A[ft.start=pt.start]=O[ft.end=at.end]=ft}else A[at.start]=O[at.end]=at;else at=[V],A[at.start=Z]=O[at.end=X]=at});function N(V){var k=m.arcs[V<0?~V:V],Z=k[0],X;return m.transform?(X=[0,0],k.forEach(function(at){X[0]+=at[0],X[1]+=at[1]})):X=k[k.length-1],V<0?[X,Z]:[Z,X]}function K(V,k){for(var Z in V){var X=V[Z];delete k[X.start],delete X.start,delete X.end,X.forEach(function(at){P[at<0?~at:at]=1}),R.push(X)}}return K(O,A),K(A,O),S.forEach(function(V){P[V<0?~V:V]||R.push([V])}),R}function o(m){return i(m,l.apply(this,arguments))}function l(m,S,P){var A,O,R;if(arguments.length>1)A=f(m,S,P);else for(O=0,A=new Array(R=m.arcs.length);O<R;++O)A[O]=O;return{type:"MultiLineString",arcs:a(m,A)}}function f(m,S,P){var A=[],O=[],R;function H(Z){var X=Z<0?~Z:Z;(O[X]||(O[X]=[])).push({i:Z,g:R})}function N(Z){Z.forEach(H)}function K(Z){Z.forEach(N)}function V(Z){Z.forEach(K)}function k(Z){switch(R=Z,Z.type){case"GeometryCollection":Z.geometries.forEach(k);break;case"LineString":N(Z.arcs);break;case"MultiLineString":case"Polygon":K(Z.arcs);break;case"MultiPolygon":V(Z.arcs);break}}return k(S),O.forEach(P==null?function(Z){A.push(Z[0].i)}:function(Z){P(Z[0].g,Z[Z.length-1].g)&&A.push(Z[0].i)}),A}function v(m){for(var S=-1,P=m.length,A,O=m[P-1],R=0;++S<P;)A=O,O=m[S],R+=A[0]*O[1]-A[1]*O[0];return Math.abs(R)}function b(m){return i(m,g.apply(this,arguments))}function g(m,S){var P={},A=[],O=[];S.forEach(R);function R(K){switch(K.type){case"GeometryCollection":K.geometries.forEach(R);break;case"Polygon":H(K.arcs);break;case"MultiPolygon":K.arcs.forEach(H);break}}function H(K){K.forEach(function(V){V.forEach(function(k){(P[k=k<0?~k:k]||(P[k]=[])).push(K)})}),A.push(K)}function N(K){return v(i(m,{type:"Polygon",arcs:[K]}).coordinates[0])}return A.forEach(function(K){if(!K._){var V=[],k=[K];for(K._=1,O.push(V);K=k.pop();)V.push(K),K.forEach(function(Z){Z.forEach(function(X){P[X<0?~X:X].forEach(function(at){at._||(at._=1,k.push(at))})})})}}),A.forEach(function(K){delete K._}),{type:"MultiPolygon",arcs:O.map(function(K){var V=[],k;if(K.forEach(function(gt){gt.forEach(function(ft){ft.forEach(function(Rt){P[Rt<0?~Rt:Rt].length<2&&V.push(Rt)})})}),V=a(m,V),(k=V.length)>1)for(var Z=1,X=N(V[0]),at,pt;Z<k;++Z)(at=N(V[Z]))>X&&(pt=V[0],V[0]=V[Z],V[Z]=pt,X=at);return V}).filter(function(K){return K.length>0})}}function y(m,S){for(var P=0,A=m.length;P<A;){var O=P+A>>>1;m[O]<S?P=O+1:A=O}return P}function _(m){var S={},P=m.map(function(){return[]});function A(gt,ft){gt.forEach(function(Rt){Rt<0&&(Rt=~Rt);var Nt=S[Rt];Nt?Nt.push(ft):S[Rt]=[ft]})}function O(gt,ft){gt.forEach(function(Rt){A(Rt,ft)})}function R(gt,ft){gt.type==="GeometryCollection"?gt.geometries.forEach(function(Rt){R(Rt,ft)}):gt.type in H&&H[gt.type](gt.arcs,ft)}var H={LineString:A,MultiLineString:O,Polygon:O,MultiPolygon:function(ft,Rt){ft.forEach(function(Nt){O(Nt,Rt)})}};m.forEach(R);for(var N in S)for(var K=S[N],V=K.length,k=0;k<V;++k)for(var Z=k+1;Z<V;++Z){var X=K[k],at=K[Z],pt;(pt=P[X])[N=y(pt,at)]!==at&&pt.splice(N,0,at),(pt=P[at])[N=y(pt,X)]!==X&&pt.splice(N,0,X)}return P}function M(m){if(m==null)return u;var S,P,A=m.scale[0],O=m.scale[1],R=m.translate[0],H=m.translate[1];return function(N,K){K||(S=P=0);var V=2,k=N.length,Z=new Array(k),X=Math.round((N[0]-R)/A),at=Math.round((N[1]-H)/O);for(Z[0]=X-S,S=X,Z[1]=at-P,P=at;V<k;)Z[V]=N[V],++V;return Z}}function x(m,S){if(m.transform)throw new Error("already quantized");if(!S||!S.scale){if(!((H=Math.floor(S))>=2))throw new Error("n must be \u22652");K=m.bbox||h(m);var P=K[0],A=K[1],O=K[2],R=K[3],H;S={scale:[O-P?(O-P)/(H-1):1,R-A?(R-A)/(H-1):1],translate:[P,A]}}else K=m.bbox;var N=M(S),K,V,k=m.objects,Z={};function X(gt){return N(gt)}function at(gt){var ft;switch(gt.type){case"GeometryCollection":ft={type:"GeometryCollection",geometries:gt.geometries.map(at)};break;case"Point":ft={type:"Point",coordinates:X(gt.coordinates)};break;case"MultiPoint":ft={type:"MultiPoint",coordinates:gt.coordinates.map(X)};break;default:return gt}return gt.id!=null&&(ft.id=gt.id),gt.bbox!=null&&(ft.bbox=gt.bbox),gt.properties!=null&&(ft.properties=gt.properties),ft}function pt(gt){var ft=0,Rt=1,Nt=gt.length,Dt,St=new Array(Nt);for(St[0]=N(gt[0],0);++ft<Nt;)((Dt=N(gt[ft],ft))[0]||Dt[1])&&(St[Rt++]=Dt);return Rt===1&&(St[Rt++]=[0,0]),St.length=Rt,St}for(V in k)Z[V]=at(k[V]);return{type:"Topology",bbox:K,transform:S,objects:Z,arcs:m.arcs.map(pt)}}t.bbox=h,t.feature=c,t.merge=b,t.mergeArcs=g,t.mesh=o,t.meshArcs=l,t.neighbors=_,t.quantize=x,t.transform=s,t.untransform=M,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_tslib@2.1.0@tslib/tslib.js":function(E,T,e){(function(t){var u,s;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var h,r,c,n,i,a,o,l,f,v,b,g,y,_,M,x,m,S,P,A,O,R,H,N;(function(K){var V=typeof t=="object"?t:typeof self=="object"?self:typeof this=="object"?this:{};u=[T],s=function(Z){K(k(V,k(Z)))}.apply(T,u),s!==void 0&&(E.exports=s);function k(Z,X){return Z!==V&&(typeof Object.create=="function"?Object.defineProperty(Z,"__esModule",{value:!0}):Z.__esModule=!0),function(at,pt){return Z[at]=X?X(at,pt):pt}}})(function(K){var V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,X){Z.__proto__=X}||function(Z,X){for(var at in X)Object.prototype.hasOwnProperty.call(X,at)&&(Z[at]=X[at])};h=function(X,at){if(typeof at!="function"&&at!==null)throw new TypeError("Class extends value "+String(at)+" is not a constructor or null");V(X,at);function pt(){this.constructor=X}X.prototype=at===null?Object.create(at):(pt.prototype=at.prototype,new pt)},r=Object.assign||function(Z){for(var X,at=1,pt=arguments.length;at<pt;at++){X=arguments[at];for(var gt in X)Object.prototype.hasOwnProperty.call(X,gt)&&(Z[gt]=X[gt])}return Z},c=function(X,at){var pt={};for(var gt in X)Object.prototype.hasOwnProperty.call(X,gt)&&at.indexOf(gt)<0&&(pt[gt]=X[gt]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,gt=Object.getOwnPropertySymbols(X);ft<gt.length;ft++)at.indexOf(gt[ft])<0&&Object.prototype.propertyIsEnumerable.call(X,gt[ft])&&(pt[gt[ft]]=X[gt[ft]]);return pt},n=function(X,at,pt,gt){var ft=arguments.length,Rt=ft<3?at:gt===null?gt=Object.getOwnPropertyDescriptor(at,pt):gt,Nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Rt=Reflect.decorate(X,at,pt,gt);else for(var Dt=X.length-1;Dt>=0;Dt--)(Nt=X[Dt])&&(Rt=(ft<3?Nt(Rt):ft>3?Nt(at,pt,Rt):Nt(at,pt))||Rt);return ft>3&&Rt&&Object.defineProperty(at,pt,Rt),Rt},i=function(X,at){return function(pt,gt){at(pt,gt,X)}},a=function(X,at){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(X,at)},o=function(X,at,pt,gt){function ft(Rt){return Rt instanceof pt?Rt:new pt(function(Nt){Nt(Rt)})}return new(pt||(pt=Promise))(function(Rt,Nt){function Dt(Ot){try{xt(gt.next(Ot))}catch(it){Nt(it)}}function St(Ot){try{xt(gt.throw(Ot))}catch(it){Nt(it)}}function xt(Ot){Ot.done?Rt(Ot.value):ft(Ot.value).then(Dt,St)}xt((gt=gt.apply(X,at||[])).next())})},l=function(X,at){var pt={label:0,sent:function(){if(Rt[0]&1)throw Rt[1];return Rt[1]},trys:[],ops:[]},gt,ft,Rt,Nt;return Nt={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function Dt(xt){return function(Ot){return St([xt,Ot])}}function St(xt){if(gt)throw new TypeError("Generator is already executing.");for(;pt;)try{if(gt=1,ft&&(Rt=xt[0]&2?ft.return:xt[0]?ft.throw||((Rt=ft.return)&&Rt.call(ft),0):ft.next)&&!(Rt=Rt.call(ft,xt[1])).done)return Rt;switch(ft=0,Rt&&(xt=[xt[0]&2,Rt.value]),xt[0]){case 0:case 1:Rt=xt;break;case 4:return pt.label++,{value:xt[1],done:!1};case 5:pt.label++,ft=xt[1],xt=[0];continue;case 7:xt=pt.ops.pop(),pt.trys.pop();continue;default:if(Rt=pt.trys,!(Rt=Rt.length>0&&Rt[Rt.length-1])&&(xt[0]===6||xt[0]===2)){pt=0;continue}if(xt[0]===3&&(!Rt||xt[1]>Rt[0]&&xt[1]<Rt[3])){pt.label=xt[1];break}if(xt[0]===6&&pt.label<Rt[1]){pt.label=Rt[1],Rt=xt;break}if(Rt&&pt.label<Rt[2]){pt.label=Rt[2],pt.ops.push(xt);break}Rt[2]&&pt.ops.pop(),pt.trys.pop();continue}xt=at.call(X,pt)}catch(Ot){xt=[6,Ot],ft=0}finally{gt=Rt=0}if(xt[0]&5)throw xt[1];return{value:xt[0]?xt[1]:void 0,done:!0}}},f=function(X,at){for(var pt in X)pt!=="default"&&!Object.prototype.hasOwnProperty.call(at,pt)&&N(at,X,pt)},N=Object.create?function(Z,X,at,pt){pt===void 0&&(pt=at),Object.defineProperty(Z,pt,{enumerable:!0,get:function(){return X[at]}})}:function(Z,X,at,pt){pt===void 0&&(pt=at),Z[pt]=X[at]},v=function(X){var at=typeof Symbol=="function"&&Symbol.iterator,pt=at&&X[at],gt=0;if(pt)return pt.call(X);if(X&&typeof X.length=="number")return{next:function(){return X&&gt>=X.length&&(X=void 0),{value:X&&X[gt++],done:!X}}};throw new TypeError(at?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(X,at){var pt=typeof Symbol=="function"&&X[Symbol.iterator];if(!pt)return X;var gt=pt.call(X),ft,Rt=[],Nt;try{for(;(at===void 0||at-- >0)&&!(ft=gt.next()).done;)Rt.push(ft.value)}catch(Dt){Nt={error:Dt}}finally{try{ft&&!ft.done&&(pt=gt.return)&&pt.call(gt)}finally{if(Nt)throw Nt.error}}return Rt},g=function(){for(var X=[],at=0;at<arguments.length;at++)X=X.concat(b(arguments[at]));return X},y=function(){for(var X=0,at=0,pt=arguments.length;at<pt;at++)X+=arguments[at].length;for(var gt=Array(X),ft=0,at=0;at<pt;at++)for(var Rt=arguments[at],Nt=0,Dt=Rt.length;Nt<Dt;Nt++,ft++)gt[ft]=Rt[Nt];return gt},_=function(X,at){for(var pt=0,gt=at.length,ft=X.length;pt<gt;pt++,ft++)X[ft]=at[pt];return X},M=function(X){return this instanceof M?(this.v=X,this):new M(X)},x=function(X,at,pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt=pt.apply(X,at||[]),ft,Rt=[];return ft={},Nt("next"),Nt("throw"),Nt("return"),ft[Symbol.asyncIterator]=function(){return this},ft;function Nt(At){gt[At]&&(ft[At]=function(z){return new Promise(function(q,mt){Rt.push([At,z,q,mt])>1||Dt(At,z)})})}function Dt(At,z){try{St(gt[At](z))}catch(q){it(Rt[0][3],q)}}function St(At){At.value instanceof M?Promise.resolve(At.value.v).then(xt,Ot):it(Rt[0][2],At)}function xt(At){Dt("next",At)}function Ot(At){Dt("throw",At)}function it(At,z){At(z),Rt.shift(),Rt.length&&Dt(Rt[0][0],Rt[0][1])}},m=function(X){var at,pt;return at={},gt("next"),gt("throw",function(ft){throw ft}),gt("return"),at[Symbol.iterator]=function(){return this},at;function gt(ft,Rt){at[ft]=X[ft]?function(Nt){return(pt=!pt)?{value:M(X[ft](Nt)),done:ft==="return"}:Rt?Rt(Nt):Nt}:Rt}},S=function(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at=X[Symbol.asyncIterator],pt;return at?at.call(X):(X=typeof v=="function"?v(X):X[Symbol.iterator](),pt={},gt("next"),gt("throw"),gt("return"),pt[Symbol.asyncIterator]=function(){return this},pt);function gt(Rt){pt[Rt]=X[Rt]&&function(Nt){return new Promise(function(Dt,St){Nt=X[Rt](Nt),ft(Dt,St,Nt.done,Nt.value)})}}function ft(Rt,Nt,Dt,St){Promise.resolve(St).then(function(xt){Rt({value:xt,done:Dt})},Nt)}},P=function(X,at){return Object.defineProperty?Object.defineProperty(X,"raw",{value:at}):X.raw=at,X};var k=Object.create?function(Z,X){Object.defineProperty(Z,"default",{enumerable:!0,value:X})}:function(Z,X){Z.default=X};A=function(X){if(X&&X.__esModule)return X;var at={};if(X!=null)for(var pt in X)pt!=="default"&&Object.prototype.hasOwnProperty.call(X,pt)&&N(at,X,pt);return k(at,X),at},O=function(X){return X&&X.__esModule?X:{default:X}},R=function(X,at){if(!at.has(X))throw new TypeError("attempted to get private field on non-instance");return at.get(X)},H=function(X,at,pt){if(!at.has(X))throw new TypeError("attempted to set private field on non-instance");return at.set(X,pt),pt},K("__extends",h),K("__assign",r),K("__rest",c),K("__decorate",n),K("__param",i),K("__metadata",a),K("__awaiter",o),K("__generator",l),K("__exportStar",f),K("__createBinding",N),K("__values",v),K("__read",b),K("__spread",g),K("__spreadArrays",y),K("__spreadArray",_),K("__await",M),K("__asyncGenerator",x),K("__asyncDelegator",m),K("__asyncValues",S),K("__makeTemplateObject",P),K("__importStar",A),K("__importDefault",O),K("__classPrivateFieldGet",R),K("__classPrivateFieldSet",H)})}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_webpack@4.46.0@webpack/buildin/global.js":function(E,T){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){typeof window=="object"&&(e=window)}E.exports=e},"./node_modules/_webpack@4.46.0@webpack/buildin/module.js":function(E,T){E.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js":function(E,T,e){var t;/*!
* EventEmitter v5.2.9 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - https://oli.me.uk/
* @preserve
*/(function(u){"use strict";function s(){}var h=s.prototype,r=u.EventEmitter;function c(a,o){for(var l=a.length;l--;)if(a[l].listener===o)return l;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}h.getListeners=function(o){var l=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in l)l.hasOwnProperty(v)&&o.test(v)&&(f[v]=l[v])}else f=l[o]||(l[o]=[]);return f},h.flattenListeners=function(o){var l=[],f;for(f=0;f<o.length;f+=1)l.push(o[f].listener);return l},h.getListenersAsObject=function(o){var l=this.getListeners(o),f;return l instanceof Array&&(f={},f[o]=l),f||l};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}h.addListener=function(o,l){if(!i(l))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof l=="object",b;for(b in f)f.hasOwnProperty(b)&&c(f[b],l)===-1&&f[b].push(v?l:{listener:l,once:!1});return this},h.on=n("addListener"),h.addOnceListener=function(o,l){return this.addListener(o,{listener:l,once:!0})},h.once=n("addOnceListener"),h.defineEvent=function(o){return this.getListeners(o),this},h.defineEvents=function(o){for(var l=0;l<o.length;l+=1)this.defineEvent(o[l]);return this},h.removeListener=function(o,l){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=c(f[b],l),v!==-1&&f[b].splice(v,1));return this},h.off=n("removeListener"),h.addListeners=function(o,l){return this.manipulateListeners(!1,o,l)},h.removeListeners=function(o,l){return this.manipulateListeners(!0,o,l)},h.manipulateListeners=function(o,l,f){var v,b,g=o?this.removeListener:this.addListener,y=o?this.removeListeners:this.addListeners;if(typeof l=="object"&&!(l instanceof RegExp))for(v in l)l.hasOwnProperty(v)&&(b=l[v])&&(typeof b=="function"?g.call(this,v,b):y.call(this,v,b));else for(v=f.length;v--;)g.call(this,l,f[v]);return this},h.removeEvent=function(o){var l=typeof o,f=this._getEvents(),v;if(l==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},h.removeAllListeners=n("removeEvent"),h.emitEvent=function(o,l){var f=this.getListenersAsObject(o),v,b,g,y,_;for(y in f)if(f.hasOwnProperty(y))for(v=f[y].slice(0),g=0;g<v.length;g++)b=v[g],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,l||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},h.trigger=n("emitEvent"),h.emit=function(o){var l=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,l)},h.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},h._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},h._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return u.EventEmitter=r,s},t=function(){return s}.call(u,e,u,E),t!==void 0&&(E.exports=t)})(typeof window!="undefined"?window:this||{})},"./src/api/geo.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),h=e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js"),r=e("./src/view.ts"),c=t.__importDefault(e("./src/util/get-geo-projection.ts")),n={geoArea:function(a){return s.geoArea(a)},geoAreaByName:function(a){return s.geoArea(this.geoFeatureByName(a))},geoCentroid:function(a){return s.geoCentroid(a)},geoCentroidByName:function(a){return s.geoCentroid(this.geoFeatureByName(a))},geoDistance:function(a,o){return s.geoDistance(a,o)},geoLength:function(a){return s.geoLength(a)},geoLengthByName:function(a){return s.geoLength(this.geoFeatureByName(a))},geoContains:function(a,o){return s.geoContains(a,o)},geoFeatureByName:function(a){var o=this.rows,l;return o.some(function(f){return f.name===a?(l=f,!0):!1}),l},geoFeatureByPosition:function(a){var o=this.rows,l;return o.some(function(f){return s.geoContains(f,a)?(l=f,!0):!1}),l},geoNameByPosition:function(a){var o=this.geoFeatureByPosition(a);if(o)return o.name},getGeoProjection:c.default,geoProject:function(a,o,l){return o=c.default(o,l),h.geoProject(a,o)},geoProjectByName:function(a,o,l){return o=c.default(o,l),h.geoProject(this.geoFeatureByName(a),o)},geoProjectPosition:function(a,o,l){var f=c.default(o,l);return f(a)},geoProjectInvert:function(a,o,l){var f=c.default(o,l);return f.invert(a)}};u.assign(r.View.prototype,n)},"./src/api/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/view.ts");t.assign(u.View.prototype,{getAllNodes:function(){var h=[],r=this.root;return r&&r.each?r.each(function(c){h.push(c)}):r&&r.eachNode&&r.eachNode(function(c){h.push(c)}),h},getAllLinks:function(){for(var h=[],r=[this.root],c;c=r.pop();){var n=c.children;n&&n.forEach(function(i){h.push({source:c,target:i}),r.push(i)})}return h}}),t.assign(u.View.prototype,{getAllEdges:u.View.prototype.getAllLinks})},"./src/api/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),h=e("./src/view.ts");u.assign(h.View.prototype,{partition:function(c,n){return n===void 0&&(n=[]),s.default(this.rows,c,n)},group:function(c,n){n===void 0&&(n=[]);var i=this.partition(c,n);return u.values(i)},groups:function(c,n){return n===void 0&&(n=[]),this.group(c,n)}})},"./src/api/statistics.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=e("./src/view.ts"),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),c=t.__importDefault(e("./src/constants.ts")),n=c.default.STATISTICS_METHODS;function i(o,l){var f=o.getColumn(l);return s.isArray(f)&&s.isArray(f[0])&&(f=s.flattenDeep(f)),f}n.forEach(function(o){h.View.prototype[o]=function(l){return u[o](i(this,l))}});var a=u.quantile;s.assign(h.View.prototype,{average:h.View.prototype.mean,quantile:function(l,f){return a(i(this,l),f)},quantiles:function(l,f){var v=i(this,l);return f.map(function(b){return a(v,b)})},quantilesByFraction:function(l,f){return this.quantiles(l,r.default(f))},range:function(l){return[this.min(l),this.max(l)]},extent:function(l){return this.range(l)}})},"./src/connector/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts");u.DataSet.registerConnector("default",function(s,h){var r;if(t.isString(s)?r=h.getView(s):r=s,!r)throw new TypeError("Invalid dataView");return t.deepMix([],r.rows)})},"./src/connector/dsv.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js"),s=e("./src/data-set.ts");s.DataSet.registerConnector("dsv",function(h,r){r===void 0&&(r={});var c=r.delimiter||",";if(!t.isString(c))throw new TypeError("Invalid delimiter: must be a string!");return u.dsvFormat(c).parse(h)}),s.DataSet.registerConnector("csv",function(h){return u.csvParse(h)}),s.DataSet.registerConnector("tsv",function(h){return u.tsvParse(h)})},"./src/connector/geo-graticule.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),u=e("./src/data-set.ts");function s(h,r){r.dataType="geo-graticule";var c=t.geoGraticule().lines();return c.map(function(n,i){return n.index=""+i,n}),r.rows=c,c}T.default=s,u.DataSet.registerConnector("geo-graticule",s)},"./src/connector/geojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),r=e("./src/data-set.ts"),c=h.geoPath();function n(i,a,o){o.dataType=r.DataSet.CONSTANTS.GEO;var l=s.deepMix([],i.features);return l.forEach(function(f){f.name=f.properties.name,f.longitude=[],f.latitude=[];var v=f.pathData=c(f),b=u.default(v);b._path.forEach(function(y){f.longitude.push(y[1]),f.latitude.push(y[2])});var g=c.centroid(f);f.centroidX=g[0],f.centroidY=g[1]}),l}r.DataSet.registerConnector("geo",n),r.DataSet.registerConnector("geojson",n),r.DataSet.registerConnector("GeoJSON",n),T.default=n},"./src/connector/graph.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s={nodes:function(c){return c.nodes},edges:function(c){return c.edges}};function h(r,c,n){c=t.assign({},s,c),n.dataType=u.DataSet.CONSTANTS.GRAPH;var i=c.nodes,a=c.edges;if(i&&!t.isFunction(i))throw new TypeError("Invalid nodes: must be a function!");if(a&&!t.isFunction(a))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:i(r),edges:a(r)},t.assign(n,n.graph),n.rows}u.DataSet.registerConnector("graph",h),u.DataSet.registerConnector("diagram",h)},"./src/connector/hexjson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js"),s=e("./src/data-set.ts"),h={width:1,height:1};function r(n){return n.cx=n.x,n.cy=n.y,n.x=[],n.y=[],n.vertices.forEach(function(i){n.x.push(i.x+n.cx),n.y.push(i.y+n.cy)}),n}function c(n,i,a){a.dataType=s.DataSet.CONSTANTS.HEX,i=t.assign({},h,i);var o=i.width,l=i.height,f=t.deepMix([],n);a._HexJSON=f;var v=a._GridHexJSON=u.getGridForHexJSON(f),b=a.rows=u.renderHexJSON(f,o,l).map(r);return a._gridRows=u.renderHexJSON(v,o,l).map(r),b}s.DataSet.registerConnector("hex",c),s.DataSet.registerConnector("hexjson",c),s.DataSet.registerConnector("hex-json",c),s.DataSet.registerConnector("HexJSON",c),T.default=c},"./src/connector/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js"),s=e("./src/data-set.ts");function h(r,c,n){n.dataType=s.DataSet.CONSTANTS.HIERARCHY;var i=c&&c.children?c.children:null;if(i&&!t.isFunction(i))throw new TypeError("Invalid children: must be a function!");return c.pureData?n.rows=n.root=r:n.rows=n.root=u.hierarchy(r,i),r}s.DataSet.registerConnector("hierarchy",h),s.DataSet.registerConnector("tree",h)},"./src/connector/topojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js"),h=t.__importDefault(e("./src/connector/geojson.ts")),r=e("./src/data-set.ts");function c(n,i,a){var o=i.object;if(!u.isString(o))throw new TypeError("Invalid object: must be a string!");var l=s.feature(n,n.objects[o]);return h.default(l,void 0,a)}r.DataSet.registerConnector("topojson",c),r.DataSet.registerConnector("TopoJSON",c)},"./src/constants.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},"./src/data-set.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DataSet=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),h=e("./src/view.ts"),r=t.__importDefault(e("./src/constants.ts")),c=function(n){t.__extends(i,n);function i(a){a===void 0&&(a={state:{}});var o=n.call(this)||this;return o.isDataSet=!0,o._onChangeTimer=null,o.views={},o.state={},o.state=a.state,o}return i.registerConnector=function(a,o){i.connectors[a]=o},i.getConnector=function(a){return i.connectors[a]||i.connectors.default},i.registerTransform=function(a,o){i.transforms[a]=o},i.getTransform=function(a){return i.transforms[a]||i.transforms.default},i.prototype._getUniqueViewName=function(){for(var a=u.uniqueId("view_");this.views[a];)a=u.uniqueId("view_");return a},i.prototype.createView=function(a,o){if(u.isNil(a)&&(a=this._getUniqueViewName()),u.isObject(a)&&(o=a,a=this._getUniqueViewName()),this.views[a])throw new Error("data view exists: "+a);var l=new h.View(this,o);return this.views[a]=l,l},i.prototype.getView=function(a){return this.views[a]},i.prototype.setView=function(a,o){this.views[a]=o},i.prototype.setState=function(a,o){var l=this;this.state[a]=o,this._onChangeTimer&&(window.clearTimeout(this._onChangeTimer),this._onChangeTimer=null),this._onChangeTimer=window.setTimeout(function(){l.emit("statechange",a,o)},16)},i.CONSTANTS=r.default,i.connectors={},i.transforms={},i.DataSet=i,i.DataView=h.View,i.View=h.View,i.version="____DATASET_VERSION____",i}(s.default);T.DataSet=c,u.assign(c,r.default),u.assign(c.prototype,{view:c.prototype.createView}),h.View.DataSet=c},"./src/index.ts":function(E,T,e){"use strict";e("./src/api/geo.ts"),e("./src/api/hierarchy.ts"),e("./src/api/partition.ts"),e("./src/api/statistics.ts"),e("./src/connector/default.ts"),e("./src/connector/dsv.ts"),e("./src/connector/geo-graticule.ts"),e("./src/connector/geojson.ts"),e("./src/connector/graph.ts"),e("./src/connector/hexjson.ts"),e("./src/connector/hierarchy.ts"),e("./src/connector/topojson.ts"),e("./src/transform/default.ts"),e("./src/transform/filter.ts"),e("./src/transform/fold.ts"),e("./src/transform/map.ts"),e("./src/transform/partition.ts"),e("./src/transform/percent.ts"),e("./src/transform/pick.ts"),e("./src/transform/proportion.ts"),e("./src/transform/rename.ts"),e("./src/transform/reverse.ts"),e("./src/transform/sort.ts"),e("./src/transform/sort-by.ts"),e("./src/transform/subset.ts"),e("./src/transform/fill-rows.ts"),e("./src/transform/impute.ts"),e("./src/transform/aggregate.ts"),e("./src/transform/regression.ts"),e("./src/transform/kde.ts"),e("./src/transform/bin/hexagon.ts"),e("./src/transform/bin/histogram.ts"),e("./src/transform/bin/quantile.ts"),e("./src/transform/bin/rectangle.ts"),e("./src/transform/geo/centroid.ts"),e("./src/transform/geo/projection.ts"),e("./src/transform/geo/region.ts"),e("./src/transform/diagram/arc.ts"),e("./src/transform/diagram/dagre.ts"),e("./src/transform/diagram/sankey.ts"),e("./src/transform/diagram/voronoi.ts"),e("./src/transform/hierarchy/cluster.ts"),e("./src/transform/hierarchy/compact-box.ts"),e("./src/transform/hierarchy/dendrogram.ts"),e("./src/transform/hierarchy/indented.ts"),e("./src/transform/hierarchy/pack.ts"),e("./src/transform/hierarchy/partition.ts"),e("./src/transform/hierarchy/tree.ts"),e("./src/transform/hierarchy/treemap.ts"),e("./src/transform/tag-cloud.ts"),e("./src/transform/waffle.ts"),e("./src/transform/kernel-smooth/density.ts"),e("./src/transform/kernel-smooth/regression.ts");var t=e("./src/data-set.ts");E.exports=t.DataSet},"./src/transform/aggregate.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),h=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),c=r.DataSet.registerTransform,n=e("./src/util/option-parser.ts"),i={as:[],fields:[],groupBy:[],operations:[]},a="count",o={count:function(v){return v.length},distinct:function(v,b){var g=u.uniq(v.map(function(y){return y[b]}));return g.length}};r.DataSet.CONSTANTS.STATISTICS_METHODS.forEach(function(f){o[f]=function(v,b){var g=v.map(function(y){return y[b]});return u.isArray(g)&&u.isArray(g[0])&&(g=u.flattenDeep(g)),s[f](g)}}),o.average=o.mean;function l(f,v){v=u.assign({},i,v);var b=n.getFields(v);if(!u.isArray(b))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var g=v.as||[];u.isString(g)&&(g=[g]);var y=v.operations;u.isString(y)&&(y=[y]);var _=[a];if((!u.isArray(y)||!y.length)&&(console.warn('operations is not defined, will use [ "count" ] directly.'),y=_,g=y),!(y.length===1&&y[0]===a)){if(y.length!==b.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(g.length!==b.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var M=h.default(f.rows,v.groupBy),x=[];u.forIn(M,function(m){var S=m[0];y.forEach(function(P,A){var O=g[A],R=b[A];S[O]=o[P](m,R)}),x.push(S)}),f.rows=x}c("aggregate",l),c("summary",l),T.default={VALID_AGGREGATES:u.keys(o)}},"./src/transform/bin/hexagon.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),r={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},c=Math.sqrt(3),n=Math.PI/3,i=[0,n,2*n,3*n,4*n,5*n];function a(v,b,g,y){return Math.sqrt((v-g)*(v-g)+(b-y)*(b-y))}function o(v,b,g){var y=v-g;b=b/2;var _=Math.floor(y/b),M=b*(_+(Math.abs(_%2)===1?1:0)),x=b*(_+(Math.abs(_%2)===1?0:1));return[M+g,x+g]}function l(v,b,g){b===void 0&&(b=[1,1]),g===void 0&&(g=[0,0]);var y={},_=t.__read(b,2),M=_[0],x=_[1],m=t.__read(g,2),S=m[0],P=m[1];return v.forEach(function(A){var O,R,H=t.__read(A,2),N=H[0],K=H[1],V=t.__read(o(N,M,S),2),k=V[0],Z=V[1],X=t.__read(o(K,x,P),2),at=X[0],pt=X[1],gt=a(N,K,k,at),ft=a(N,K,Z,pt),Rt,Nt,Dt;gt<ft?(Rt="x"+k+"y"+at,O=t.__read([k,at],2),Nt=O[0],Dt=O[1]):(Rt="x"+Z+"y"+pt,R=t.__read([Z,pt],2),Nt=R[0],Dt=R[1]),y[Rt]=y[Rt]||{x:Nt,y:Dt,count:0},y[Rt].count++}),y}function f(v,b){b=u.assign({},r,b);var g=h.getFields(b);if(!u.isArray(g)||g.length!==2)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var y=t.__read(g,2),_=y[0],M=y[1],x=v.range(_),m=v.range(M),S=x[1]-x[0],P=m[1]-m[0],A=b.binWidth||[];if(A.length!==2){var O=t.__read(b.bins,2),R=O[0],H=O[1];if(R<=0||H<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");A=[S/R,P/H]}var N=t.__read(b.offset,2),K=N[0],V=N[1],k=3*A[0]/(c*A[1]),Z=v.rows.map(function(xt){return[xt[_],k*xt[M]]}),X=l(Z,[A[0],k*A[1]],[K,k*V]),at=t.__read(b.as,3),pt=at[0],gt=at[1],ft=at[2];if(!pt||!gt||!ft)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var Rt=A[0]/c,Nt=i.map(function(xt){return[Math.sin(xt)*Rt,-Math.cos(xt)*Rt]}),Dt=[],St=0;b.sizeByCount&&u.forIn(X,function(xt){xt.count>St&&(St=xt.count)}),u.forIn(X,function(xt){var Ot=xt.x,it=xt.y,At=xt.count,z={};z[ft]=At,b.sizeByCount?(z[pt]=Nt.map(function(q){return Ot+xt.count/St*q[0]}),z[gt]=Nt.map(function(q){return(it+xt.count/St*q[1])/k})):(z[pt]=Nt.map(function(q){return Ot+q[0]}),z[gt]=Nt.map(function(q){return(it+q[1])/k})),Dt.push(z)}),v.rows=Dt}s.DataSet.registerTransform("bin.hexagon",f),s.DataSet.registerTransform("bin.hex",f),s.DataSet.registerTransform("hexbin",f)},"./src/transform/bin/histogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),h=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),c={as:["x","count"],bins:void 0,offset:0,groupBy:[]};function n(o,l,f){var v=o-f,b=Math.floor(v/l);return[b*l+f,(b+1)*l+f]}function i(o){return Math.ceil(Math.log(o)/Math.LN2)+1}function a(o,l){l=u.assign({},c,l);var f=r.getField(l);if(o.rows.length!==0){var v=o.range(f),b=v[1]-v[0],g=l.binWidth,y=l.bins;if(!g&&y){if(y<=0)throw new TypeError("Invalid bins: it must be a positive number!");g=b/y}if(!g&&!y){var _=i(o.rows.length);g=b/_}var M=l.offset%g,x=[],m=l.groupBy,S=s.default(o.rows,m);u.forIn(S,function(P){var A={},O=P.map(function(V){return V[f]});O.forEach(function(V){var k=t.__read(n(V,g,M),2),Z=k[0],X=k[1],at=Z+"-"+X;A[at]=A[at]||{x0:Z,x1:X,count:0},A[at].count++});var R=t.__read(l.as,2),H=R[0],N=R[1];if(!H||!N)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var K=u.pick(P[0],m);u.forIn(A,function(V){var k=u.assign({},K);k[H]=[V.x0,V.x1],k[N]=V.count,x.push(k)})}),o.rows=x}}h.DataSet.registerTransform("bin.histogram",a),h.DataSet.registerTransform("bin.dot",a)},"./src/transform/bin/quantile.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),h=t.__importDefault(e("./src/util/partition.ts")),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),c=e("./src/data-set.ts"),n=c.DataSet.registerTransform,i=e("./src/util/option-parser.ts"),a={as:"_bin",groupBy:[],fraction:4};function o(l,f){f=u.assign({},a,f);var v=i.getField(f),b=f.as;if(!u.isString(b))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var g=f.p,y=f.fraction;(!u.isArray(g)||g.length===0)&&(g=r.default(y));var _=l.rows,M=f.groupBy,x=h.default(_,M),m=[];u.forIn(x,function(S){var P=S[0],A=S.map(function(R){return R[v]}),O=g.map(function(R){return s.quantile(A,R)});P[b]=O,m.push(P)}),l.rows=m}n("bin.quantile",o)},"./src/transform/bin/rectangle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),h=s.DataSet.registerTransform,r=e("./src/util/option-parser.ts"),c={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};function n(a,o,l){var f=a-l,v=Math.floor(f/o);return[v*o+l,(v+1)*o+l]}function i(a,o){o=u.assign({},c,o);var l=t.__read(r.getFields(o),2),f=l[0],v=l[1];if(!f||!v)throw new TypeError("Invalid fields: must be an array with 2 strings!");var b=a.range(f),g=a.range(v),y=b[1]-b[0],_=g[1]-g[0],M=o.binWidth||[];if(M.length!==2){var x=t.__read(o.bins,2),m=x[0],S=x[1];if(m<=0||S<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");M=[y/m,_/S]}var P=a.rows.map(function(at){return[at[f],at[v]]}),A={},O=t.__read(o.offset,2),R=O[0],H=O[1];P.forEach(function(at){var pt=t.__read(n(at[0],M[0],R),2),gt=pt[0],ft=pt[1],Rt=t.__read(n(at[1],M[1],H),2),Nt=Rt[0],Dt=Rt[1],St=gt+"-"+ft+"-"+Nt+"-"+Dt;A[St]=A[St]||{x0:gt,x1:ft,y0:Nt,y1:Dt,count:0},A[St].count++});var N=[],K=t.__read(o.as,3),V=K[0],k=K[1],Z=K[2];if(!V||!k||!Z)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(!o.sizeByCount)u.forIn(A,function(at){var pt={};pt[V]=[at.x0,at.x1,at.x1,at.x0],pt[k]=[at.y0,at.y0,at.y1,at.y1],pt[Z]=at.count,N.push(pt)});else{var X=0;u.forIn(A,function(at){at.count>X&&(X=at.count)}),u.forIn(A,function(at){var pt=at.x0,gt=at.x1,ft=at.y0,Rt=at.y1,Nt=at.count,Dt=Nt/X,St=t.__read([(pt+gt)/2,(ft+Rt)/2],2),xt=St[0],Ot=St[1],it=(gt-pt)*Dt/2,At=(Rt-ft)*Dt/2,z=xt-it,q=xt+it,mt=Ot-At,et=Ot+At,st={};st[V]=[z,q,q,z],st[k]=[mt,mt,et,et],st[Z]=Nt,N.push(st)})}a.rows=N}h("bin.rectangle",i),h("bin.rect",i)},"./src/transform/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("default",function(u){return u})},"./src/transform/diagram/arc.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(l){return l.id},source:function(l){return l.source},target:function(l){return l.target},sourceWeight:function(l){return l.value||1},targetWeight:function(l){return l.value||1},sortBy:null};function h(o,l,f){return f===void 0&&(f={}),o.forEach(function(v){var b=l.edgeSource(v),g=l.edgeTarget(v);f[b]||(f[b]={id:b}),f[g]||(f[g]={id:g})}),t.values(f)}function r(o,l,f){t.forIn(o,function(v,b){v.inEdges=l.filter(function(g){return""+f.target(g)==""+b}),v.outEdges=l.filter(function(g){return""+f.source(g)==""+b}),v.edges=v.outEdges.concat(v.inEdges),v.frequency=v.edges.length,v.value=0,v.inEdges.forEach(function(g){v.value+=f.targetWeight(g)}),v.outEdges.forEach(function(g){v.value+=f.sourceWeight(g)})})}function c(o,l){var f={weight:function(g,y){return y.value-g.value},frequency:function(g,y){return y.frequency-g.frequency},id:function(g,y){return(""+l.id(g)).localeCompare(""+l.id(y))}},v=f[l.sortBy];!v&&t.isFunction(l.sortBy)&&(v=l.sortBy),v&&o.sort(v)}function n(o,l){var f=o.length;if(!f)throw new TypeError("Invalid nodes: it's empty!");if(l.weight){var v=l.marginRatio;if(v<0||v>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var b=v/(2*f),g=l.thickness;if(g<=0||g>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var y=0;o.forEach(function(M){y+=M.value}),o.forEach(function(M){M.weight=M.value/y,M.width=M.weight*(1-v),M.height=g}),o.forEach(function(M,x){for(var m=0,S=x-1;S>=0;S--)m+=o[S].width+2*b;var P=M.minX=b+m,A=M.maxX=M.minX+M.width,O=M.minY=l.y-g/2,R=M.maxY=O+g;M.x=[P,A,A,P],M.y=[O,O,R,R]})}else{var _=1/f;o.forEach(function(M,x){M.x=(x+.5)*_,M.y=l.y})}}function i(o,l,f){if(f.weight){var v={};t.forIn(o,function(b,g){v[g]=b.value}),l.forEach(function(b){var g=f.source(b),y=f.target(b),_=o[g],M=o[y];if(_&&M){var x=v[g],m=f.sourceWeight(b),S=_.minX+(_.value-x)/_.value*_.width,P=S+m/_.value*_.width;v[g]-=m;var A=v[y],O=f.targetWeight(b),R=M.minX+(M.value-A)/M.value*M.width,H=R+O/M.value*M.width;v[y]-=O;var N=f.y;b.x=[S,P,R,H],b.y=[N,N,N,N]}})}else l.forEach(function(b){var g=o[f.source(b)],y=o[f.target(b)];g&&y&&(b.x=[g.x,y.x],b.y=[g.y,y.y])})}function a(o,l){l=t.assign({},s,l);var f={},v=o.nodes,b=o.edges;(!t.isArray(v)||v.length===0)&&(v=h(b,l,f)),v.forEach(function(g){var y=l.id(g);f[y]=g}),r(f,b,l),c(v,l),n(v,l),i(f,b,l),o.nodes=v,o.edges=b}u.DataSet.registerTransform("diagram.arc",a),u.DataSet.registerTransform("arc",a)},"./src/transform/diagram/dagre.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_dagre@0.8.5@dagre/index.js")),h=e("./src/data-set.ts"),r={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(i){return i.source},target:function(i){return i.target}};function c(n,i){i=u.assign({},r,i);var a=new s.default.graphlib.Graph;a.setGraph({}),a.setDefaultEdgeLabel(function(){return{}}),n.nodes.forEach(function(f){var v=i.nodeId?i.nodeId(f):f.id;!f.height&&!f.width&&(f.height=f.width=i.edgesep),a.setNode(v,f)}),n.edges.forEach(function(f){a.setEdge(i.source(f),i.target(f))}),s.default.layout(a);var o=[],l=[];a.nodes().forEach(function(f){var v=a.node(f),b=v.x,g=v.y,y=v.height,_=v.width;v.x=[b-_/2,b+_/2,b+_/2,b-_/2],v.y=[g+y/2,g+y/2,g-y/2,g-y/2],o.push(v)}),a.edges().forEach(function(f){var v=a.edge(f).points,b={};b.x=v.map(function(g){return g.x}),b.y=v.map(function(g){return g.y}),l.push(b)}),n.nodes=o,n.edges=l}h.DataSet.registerTransform("diagram.dagre",c),h.DataSet.registerTransform("dagre",c)},"./src/transform/diagram/sankey.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js"),s=e("./src/data-set.ts"),h={sankeyLeft:u.sankeyLeft,sankeyRight:u.sankeyRight,sankeyCenter:u.sankeyCenter,sankeyJustify:u.sankeyJustify},r={value:function(i){return i.value},source:function(i){return i.source},target:function(i){return i.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02,sort:void 0};function c(n,i){i=t.assign({},r,i);var a=null;t.isString(i.nodeAlign)?a=h[i.nodeAlign]:t.isFunction(i.nodeAlign)&&(a=i.nodeAlign);var o=u.sankey().nodeSort(i.sort).links(function(l){return l.edges}).nodeWidth(i.nodeWidth).nodePadding(i.nodePadding).extent([[0,0],[1,1]]);t.isFunction(i.nodeId)&&o.nodeId(i.nodeId),a&&o.nodeAlign(a),o(n),n.nodes.forEach(function(l){var f=l.x0,v=l.x1,b=l.y0,g=l.y1;l.x=[f,v,v,f],l.y=[b,b,g,g]}),n.edges.forEach(function(l){var f=l.source,v=l.target,b=f.x1,g=v.x0;l.x=[b,b,g,g];var y=l.width/2;l.y=[l.y0+y,l.y0-y,l.y1+y,l.y1-y]})}s.DataSet.registerTransform("diagram.sankey",c),s.DataSet.registerTransform("sankey",c)},"./src/transform/diagram/voronoi.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=e("./src/data-set.ts"),r=h.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),n={as:["_x","_y"]};function i(a,o){o=s.assign({},n,o);var l=o.as;if(!s.isArray(l)||l.length!==2)throw new TypeError("Invalid as: must be an array with two strings!");var f=l[0],v=l[1],b=c.getFields(o);if(!s.isArray(b)||b.length!==2)throw new TypeError("Invalid fields: must be an array with two strings!");var g=b[0],y=b[1],_=a.rows,M=_.map(function(S){return[S[g],S[y]]}),x=u.voronoi();o.extend&&x.extent(o.extend),o.size&&x.size(o.size);var m=x(M).polygons();_.forEach(function(S,P){var A=m[P].filter(function(O){return!!O});S[f]=A.map(function(O){return O[0]}),S[v]=A.map(function(O){return O[1]})})}r("diagram.voronoi",i),r("voronoi",i)},"./src/transform/fill-rows.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),h=e("./src/data-set.ts"),r={fillBy:"group",groupBy:[],orderBy:[]};function c(i,a){var o=i.map(function(l){return l});return a.forEach(function(l){var f=o.indexOf(l);f>-1&&o.splice(f,1)}),o}function n(i,a){a=u.assign({},r,a);var o=i.rows,l=a.groupBy,f=a.orderBy,v=s.default(o,l,f),b=0,g=[];u.forIn(v,function(P){P.length>b&&(b=P.length,g=P)});var y=[],_={};if(g.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");y.push(A),_[A]=P}),a.fillBy==="order"){var M=g[0],x=[],m={};o.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");x.indexOf(A)===-1&&(x.push(A),m[A]=P)});var S=c(x,y);S.forEach(function(P){var A={};l.forEach(function(O){A[O]=M[O]}),f.forEach(function(O){A[O]=m[P][O]}),o.push(A),g.push(A),y.push(P),_[P]=A}),b=g.length}u.forIn(v,function(P){if(P!==g&&P.length<b){var A=P[0],O=[];P.forEach(function(H){O.push(f.map(function(N){return H[N]}).join("-"))});var R=c(y,O);R.some(function(H,N){if(N>=b-P.length)return!0;var K=_[H],V={};return l.forEach(function(k){V[k]=A[k]}),f.forEach(function(k){V[k]=K[k]}),o.push(V),!1})}})}h.DataSet.registerTransform("fill-rows",n),h.DataSet.registerTransform("fillRows",n)},"./src/transform/filter.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function u(s){return!!s}t.DataSet.registerTransform("filter",function(s,h){s.rows=s.rows.filter(h.callback||u)})},"./src/transform/fold.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),h={fields:[],key:"key",retains:[],value:"value"};u.DataSet.registerTransform("fold",function(r,c){var n=r.getColumnNames();c=t.assign({},h,c);var i=s.getFields(c);i.length===0&&(console.warn("warning: option fields is not specified, will fold all columns."),i=n);var a=c.key,o=c.value,l=c.retains;(!l||l.length===0)&&(l=t.difference(n,i));var f=[];r.rows.forEach(function(v){i.forEach(function(b){var g=t.pick(v,l);g[a]=b,g[o]=v[b],f.push(g)})}),r.rows=f})},"./src/transform/geo/centroid.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=u.DataSet.registerTransform,h=e("./src/util/option-parser.ts"),r={as:["_centroid_x","_centroid_y"]};function c(n,i){i=t.assign({},r,i);var a=h.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&n.dataSet&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=i.as;if(!t.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var f=l[0],v=l[1];n.rows.forEach(function(b){var g=o.geoFeatureByName(b[a]);g&&(o._projectedAs?(b[f]=g[o._projectedAs[2]],b[v]=g[o._projectedAs[3]]):(b[f]=g.centroidX,b[v]=g.centroidY))})}s("geo.centroid",c)},"./src/transform/geo/projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),h=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),r=e("./src/data-set.ts"),c=r.DataSet.registerTransform,n=t.__importDefault(e("./src/util/get-geo-projection.ts")),i={as:["_x","_y","_centroid_x","_centroid_y"]};function a(o,l){if(o.dataType!=="geo"&&o.dataType!=="geo-graticule")throw new TypeError("Invalid dataView: this transform is for Geo data only!");l=u.assign({},i,l);var f=l.projection;if(!f)throw new TypeError("Invalid projection!");f=n.default(f);var v=s.geoPath(f),b=l.as;if(!u.isArray(b)||b.length!==4)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');o._projectedAs=b;var g=t.__read(b,4),y=g[0],_=g[1],M=g[2],x=g[3];o.rows.forEach(function(m){m[y]=[],m[_]=[];var S=v(m);if(S){var P=h.default(S);P._path.forEach(function(O){m[y].push(O[1]),m[_].push(O[2])});var A=v.centroid(m);m[M]=A[0],m[x]=A[1]}}),o.rows=o.rows.filter(function(m){return m[y].length!==0})}c("geo.projection",a)},"./src/transform/geo/region.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=u.DataSet.registerTransform,h=e("./src/util/option-parser.ts"),r={as:["_x","_y"]};function c(n,i){i=t.assign({},r,i);var a=h.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=i.as;if(!t.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=l[0],v=l[1];n.rows.forEach(function(b){var g=o.geoFeatureByName(b[a]);g&&(o._projectedAs?(b[f]=g[o._projectedAs[0]],b[v]=g[o._projectedAs[1]]):(b[f]=g.longitude,b[v]=g.latitude))})}s("geo.region",c)},"./src/transform/hierarchy/cluster.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),c={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==h.DataSet.CONSTANTS.HIERARCHY||!i.root)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},c,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=void 0;try{f=r.getField(a)}catch(y){console.warn(y)}f&&o.sum(function(y){return y[f]});var v=u.cluster();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=l[0],g=l[1];o.each(function(y){y[b]=y.x,y[g]=y.y})}h.DataSet.registerTransform("hierarchy.cluster",n),h.DataSet.registerTransform("dendrogram",n)},"./src/transform/hierarchy/compact-box.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),h={};function r(c,n){var i=c.root;if(n=Object.assign({},h,n),c.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");c.root=u.default.compactBox(i,n)}s.DataSet.registerTransform("hierarchy.compact-box",r),s.DataSet.registerTransform("compact-box-tree",r),s.DataSet.registerTransform("non-layered-tidy-tree",r),s.DataSet.registerTransform("mindmap-logical",r)},"./src/transform/hierarchy/dendrogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),h={};function r(c,n){var i=c.root;if(n=Object.assign({},h,n),c.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");c.root=u.default.dendrogram(i,n)}s.DataSet.registerTransform("hierarchy.dendrogram",r),s.DataSet.registerTransform("dendrogram",r)},"./src/transform/hierarchy/indented.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),h={};function r(c,n){var i=c.root;if(n=Object.assign({},h,n),c.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");c.root=u.default.indented(i,n)}s.DataSet.registerTransform("hierarchy.indented",r),s.DataSet.registerTransform("indented-tree",r)},"./src/transform/hierarchy/pack.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),h=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),c={field:"value",size:[1,1],padding:0,as:["x","y","r"]};function n(i,a){if(i.dataType!==h.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=u.assign({},c,a);var l=a.as;if(!u.isArray(l)||l.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var f;try{f=r.getField(a)}catch(_){console.warn(_)}f&&o.sum(function(_){return _[f]}).sort(function(_,M){return M[f]-_[f]});var v=s.pack();v.size(a.size),a.padding&&v.padding(a.padding),v(o);var b=l[0],g=l[1],y=l[2];o.each(function(_){_[b]=_.x,_[g]=_.y,_[y]=_.r})}h.DataSet.registerTransform("hierarchy.pack",n),h.DataSet.registerTransform("hierarchy.circle-packing",n),h.DataSet.registerTransform("circle-packing",n)},"./src/transform/hierarchy/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),c={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function n(i,a){if(i.dataType!==h.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},c,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(y){console.warn(y)}f&&o.sum(function(y){return y[f]});var v=u.partition();v.size(a.size).round(a.round).padding(a.padding),v(o);var b=l[0],g=l[1];o.each(function(y){y[b]=[y.x0,y.x1,y.x1,y.x0],y[g]=[y.y1,y.y1,y.y0,y.y0],["x0","x1","y0","y1"].forEach(function(_){l.indexOf(_)===-1&&delete y[_]})})}h.DataSet.registerTransform("hierarchy.partition",n),h.DataSet.registerTransform("adjacency",n)},"./src/transform/hierarchy/tree.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),c={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==h.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},c,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(y){console.warn(y)}f&&o.sum(function(y){return y[f]});var v=u.tree();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=l[0],g=l[1];o.each(function(y){y[b]=y.x,y[g]=y.y})}h.DataSet.registerTransform("hierarchy.tree",n),h.DataSet.registerTransform("tree",n)},"./src/transform/hierarchy/treemap.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),c={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function n(i,a){if(i.dataType!==h.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},c,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(y){console.warn(y)}f&&o.sum(function(y){return y[f]});var v=u.treemap();v.tile(u[a.tile]).size(a.size).round(a.round).padding(a.padding).paddingInner(a.paddingInner).paddingOuter(a.paddingOuter).paddingTop(a.paddingTop).paddingRight(a.paddingRight).paddingBottom(a.paddingBottom).paddingLeft(a.paddingLeft),v(o);var b=l[0],g=l[1];o.each(function(y){y[b]=[y.x0,y.x1,y.x1,y.x0],y[g]=[y.y1,y.y1,y.y0,y.y0],["x0","x1","y0","y1"].forEach(function(_){l.indexOf(_)===-1&&delete y[_]})})}h.DataSet.registerTransform("hierarchy.treemap",n),h.DataSet.registerTransform("treemap",n)},"./src/transform/impute.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),h=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),n={groupBy:[]};function i(f){return f.filter(function(v){return!u.isUndefined(v)})}var a=["mean","median","max","min"],o={};a.forEach(function(f){o[f]=function(v,b){return s[f](b)}}),o.value=function(f,v,b){return b};function l(f,v){v=u.assign({},n,v);var b=c.getField(v),g=v.method;if(!g)throw new TypeError("Invalid method!");if(g==="value"&&!u.has(v,"value"))throw new TypeError("Invalid value: it is nil.");var y=i(f.getColumn(b)),_=h.default(f.rows,v.groupBy);u.forIn(_,function(M){var x=i(M.map(function(m){return m[b]}));x.length===0&&(x=y),M.forEach(function(m){if(u.isUndefined(m[b]))if(u.isFunction(g))m[b]=g(m,x,v.value,M);else if(u.isString(g))m[b]=o[g](m,x,v.value);else throw new TypeError("Invalid method: must be a function or one of "+a.join(", "))})})}r.DataSet.registerTransform("impute",l)},"./src/transform/kde.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),h=t.__importDefault(e("./src/util/kernel.ts")),r=t.__importStar(e("./src/util/bandwidth.ts")),c=t.__importDefault(e("./src/util/partition.ts")),n=e("./src/data-set.ts"),i=e("./src/util/option-parser.ts"),a=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),o={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},l=u.keys(h.default),f=u.keys(r);function v(b,g){g=u.assign({},o,g);var y=i.getFields(g);if(!u.isArray(y)||y.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var _=g.as;if(!u.isArray(_)||_.length!==3)throw new TypeError("invalid as: must be an array of 3 strings!");var M=g.method;if(u.isString(M)){if(l.indexOf(M)===-1)throw new TypeError("invalid method: "+M+". Must be one of "+l.join(", "));M=h.default[M]}if(!u.isFunction(M))throw new TypeError("invalid method: kernel method must be a function!");var x=g.extent;if(!u.isArray(x)||x.length===0){var m=[];u.each(y,function(H){var N=b.range(H);m=m.concat(N)}),x=[Math.min.apply(Math,t.__spread(m)),Math.max.apply(Math,t.__spread(m))]}var S=g.bandwidth;u.isString(S)&&r[S]?S=r[S](b.getColumn(y[0])):u.isFunction(S)?S=S(b.getColumn(y[0])):(!u.isNumber(S)||S<=0)&&(S=r.nrd(b.getColumn(y[0])));var P=s.default(x,g.step?g.step:S),A=[],O=g.groupBy,R=c.default(b.rows,O);u.forIn(R,function(H){var N={};u.each(y,function(K){var V=u.pick(H[0],O);N[K]=a.kernelDensityEstimation(H.map(function(pt){return pt[K]}),M,S);var k=t.__read(_,3),Z=k[0],X=k[1],at=k[2];V[Z]=K,V[X]=[],V[at]=[],u.each(P,function(pt){var gt=N[K](pt);gt>=g.minSize&&(V[X].push(pt),V[at].push(gt))}),A.push(V)})}),b.rows=A}n.DataSet.registerTransform("kernel-density-estimation",v),n.DataSet.registerTransform("kde",v),n.DataSet.registerTransform("KDE",v),T.default={KERNEL_METHODS:l,BANDWIDTH_METHODS:f}},"./src/transform/kernel-smooth/density.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),h=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y","z"],method:"gaussian"},a=u.keys(h.default);function o(l,f){var v,b;f=u.assign({},i,f);var g=c.getFields(f);if(!u.isArray(g)||g.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings!");var y=t.__read(f.as,3),_=y[0],M=y[1],x=y[2];if(!u.isString(_)||!u.isString(M)||!u.isString(x))throw new TypeError("invalid as: must be an array of 3 strings!");var m;if(u.isString(f.method)){if(a.indexOf(f.method)===-1)throw new TypeError("invalid method: "+f.method+". Must be one of "+a.join(", "));m=h.default[f.method]}var S=t.__read(g,2),P=S[0],A=S[1],O=f.extent,R=f.bandwidth,H,N;O&&Array.isArray(O)&&Array.isArray(O[0])&&Array.isArray(O[1])?(v=t.__read(O,2),H=v[0],N=v[1]):(H=l.range(P),N=l.range(A));var K,V;R&&Array.isArray(R)&&R.slice(0,2).every(u.isNumber)&&R.slice(0,2).every(function(Ot){return Ot>0})?(b=t.__read(R,2),K=b[0],V=b[1]):(K=n.silverman(l.getColumn(P)),V=n.silverman(l.getColumn(A)));for(var k=s.default(H,K),Z=s.default(N,V),X=l.rows.length,at=[],pt=0;pt<k.length;pt++)for(var gt=0;gt<Z.length;gt++){for(var ft=0,Rt=k[pt],Nt=Z[gt],Dt=0;Dt<X;Dt++)ft+=m((Rt-l.rows[Dt][P])/K)*m((Nt-l.rows[Dt][A])/V);var St=1/(X*K*V)*ft,xt={};xt[_]=Rt,xt[M]=Nt,xt[x]=St,at.push(xt)}l.rows=at}r.DataSet.registerTransform("kernel-smooth.density",o),r.DataSet.registerTransform("kernel.density",o),T.default={KERNEL_METHODS:a}},"./src/transform/kernel-smooth/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),h=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),c=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),n=e("./src/util/option-parser.ts"),i=e("./src/util/bandwidth.ts"),a={as:["x","y"],method:"gaussian"},o=u.keys(h.default);function l(b,g,y,_){var M=(_-y)/g;return b(M)}function f(b){return function(g){return u.isArray(g)?g.map(function(y){return b(y)}):b(g)}}function v(b,g){g=u.assign({},a,g);var y=n.getFields(g);if(!u.isArray(y)||!(y.length===1||y.length===2))throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var _=t.__read(g.as,2),M=_[0],x=_[1];if(!u.isString(M)||!u.isString(x))throw new TypeError("invalid as: must be an array of 2 strings!");var m,S=g.method;if(u.isString(S)){if(o.indexOf(S)===-1)throw new TypeError("invalid method: "+S+". Must be one of "+o.join(", "));m=h.default[S]}var P=t.__read(y,2),A=P[0],O=P[1],R=b.getColumn(A),H=g.extent;(H||!u.isArray(H))&&(H=b.range(A));var N=g.bandwidth;(!N||!u.isNumber(N)||N<=0)&&(N=i.silverman(R));var K=s.default(H,N),V=R.length,k=l.bind(null,m,N),Z;if(u.isNil(O))Z=f(function(pt){var gt=R.map(function(Nt){return k(pt,Nt)}),ft=c.sum(gt),Rt=V*N;return!ft||!Rt?0:ft/Rt});else{var X=b.getColumn(O);Z=f(function(pt){var gt=R.map(function(Nt){return k(pt,Nt)}),ft=c.sum(gt.map(function(Nt,Dt){return Nt*X[Dt]})),Rt=c.sum(gt);return!ft||!Rt?0:ft/Rt})}var at=K.map(function(pt){var gt={};return gt[M]=pt,gt[x]=Z(pt),gt});b.rows=at}r.DataSet.registerTransform("kernel-smooth.regression",v),r.DataSet.registerTransform("kernel.regression",v),T.default={KERNEL_METHODS:o}},"./src/transform/map.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function u(s){return s}t.DataSet.registerTransform("map",function(s,h){s.rows=s.rows.map(h.callback||u)})},"./src/transform/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),h=e("./src/data-set.ts"),r={groupBy:[],orderBy:[]};h.DataSet.registerTransform("partition",function(n,i){i=u.assign({},r,i),n.rows=s.default(n.rows,i.groupBy,i.orderBy)});function c(n,i){i=u.assign({},r,i),n.rows=u.values(s.default(n.rows,i.groupBy,i.orderBy))}h.DataSet.registerTransform("group",c),h.DataSet.registerTransform("groups",c)},"./src/transform/percent.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),h=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),n={groupBy:[],as:"_percent"};function i(a,o){o=u.assign({},n,o);var l=c.getField(o),f=o.dimension,v=o.groupBy,b=o.as;if(!u.isString(f))throw new TypeError("Invalid dimension: must be a string!");if(u.isArray(b)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),b=b[0]),!u.isString(b))throw new TypeError("Invalid as: must be a string!");var g=a.rows,y=[],_=h.default(g,v);u.forIn(_,function(M){var x=s.sum(M.map(function(S){return S[l]})),m=h.default(M,[f]);u.forIn(m,function(S){var P=s.sum(S.map(function(R){return R[l]})),A=S[0],O=A[f];A[l]=P,A[f]=O,x===0?A[b]=0:A[b]=P/x,y.push(A)})}),a.rows=y}r.DataSet.registerTransform("percent",i)},"./src/transform/pick.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts");u.DataSet.registerTransform("pick",function(h,r){var c=s.getFields(r,h.getColumnNames());h.rows=h.rows.map(function(n){return t.pick(n,c)})})},"./src/transform/proportion.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),h=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),c={groupBy:[],as:"_proportion"};function n(i,a){a=u.assign({},c,a);var o=r.getField(a),l=a.dimension,f=a.groupBy,v=a.as;if(!u.isString(l))throw new TypeError("Invalid dimension: must be a string!");if(u.isArray(v)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),v=v[0]),!u.isString(v))throw new TypeError("Invalid as: must be a string!");var b=i.rows,g=[],y=s.default(b,f);u.forIn(y,function(_){var M=_.length,x=s.default(_,[l]);u.forIn(x,function(m){var S=m.length,P=m[0],A=P[l];P[o]=S,P[l]=A,P[v]=S/M,g.push(P)})}),i.rows=g}h.DataSet.registerTransform("proportion",n)},"./src/transform/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_regression@2.0.1@regression/dist/regression.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),h=t.__importDefault(e("./src/util/get-series-values.ts")),r=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y"],method:"linear",order:2,precision:2},a=["linear","exponential","logarithmic","power","polynomial"];function o(l,f){f=s.assign({},i,f);var v=c.getFields(f);if(!s.isArray(v)||v.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings.");var b=t.__read(v,2),g=b[0],y=b[1],_=f.method;if(a.indexOf(_)===-1)throw new TypeError("invalid method: "+_+". Must be one of "+a.join(", "));var M=l.rows.map(function(N){return[N[g],N[y]]}),x=u.default[_](M,f),m=f.extent;(!s.isArray(m)||m.length!==2)&&(m=l.range(g));var S=f.bandwidth;(!s.isNumber(S)||S<=0)&&(S=n.silverman(l.getColumn(g)));var P=h.default(m,S),A=[],O=t.__read(f.as,2),R=O[0],H=O[1];P.forEach(function(N){var K={},V=t.__read(x.predict(N),2),k=V[0],Z=V[1];K[R]=k,K[H]=Z,isFinite(Z)&&A.push(K)}),l.rows=A}r.DataSet.registerTransform("regression",o),T.default={REGRESSION_METHODS:a}},"./src/transform/rename.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts");function s(h,r){var c=r.map||{},n={};t.isPlainObject(c)&&t.forIn(c,function(i,a){t.isString(i)&&t.isString(a)&&(n[a]=i)}),h.rows.forEach(function(i){t.forIn(n,function(a,o){var l=i[o];delete i[o],i[a]=l})})}u.DataSet.registerTransform("rename",s),u.DataSet.registerTransform("rename-fields",s)},"./src/transform/reverse.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("reverse",function(u){u.rows.reverse()})},"./src/transform/sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),h=["ASC","DESC"];function r(c,n){var i=s.getFields(n,[c.getColumnName(0)]);if(!t.isArray(i))throw new TypeError("Invalid fields: must be an array with strings!");c.rows=t.sortBy(c.rows,i);var a=n.order;if(a&&h.indexOf(a)===-1)throw new TypeError("Invalid order: "+a+" must be one of "+h.join(", "));a==="DESC"&&c.rows.reverse()}u.DataSet.registerTransform("sort-by",r),u.DataSet.registerTransform("sortBy",r)},"./src/transform/sort.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("sort",function(u,s){var h=u.getColumnName(0);u.rows.sort(s.callback||function(r,c){return r[h]-c[h]})})},"./src/transform/subset.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts"),u=e("./src/util/option-parser.ts");t.DataSet.registerTransform("subset",function(s,h){var r=h.startRowIndex||0,c=h.endRowIndex||s.rows.length-1,n=u.getFields(h,s.getColumnNames());s.rows=s.getSubset(r,c,n)})},"./src/transform/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),h=t.__importDefault(e("./src/util/tag-cloud.ts")),r=e("./src/util/option-parser.ts"),c={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};function n(i,a){a=u.assign({},c,a);var o=h.default();if(!a.size[0]||!a.size[1]){i.rows=[],i._tagCloud=o;return}["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval"].forEach(function(A){a[A]&&o[A](a[A])});var l=r.getFields(a),f=t.__read(l,2),v=f[0],b=f[1];if(!u.isString(v)||!u.isString(b))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var g=i.rows.map(function(A){return A.text=A[v],A.value=A[b],A});o.words(g),a.imageMask&&o.createMask(a.imageMask);var y=o.start(),_=y._tags,M=y._bounds||[{x:0,y:0},{x:a.size[0],y:a.size[1]}];_.forEach(function(A){A.x+=a.size[0]/2,A.y+=a.size[1]/2});var x=t.__read(a.size,2),m=x[0],S=x[1],P=y.hasImage;_.push({text:"",value:0,x:P?0:M[0].x,y:P?0:M[0].y,opacity:0}),_.push({text:"",value:0,x:P?m:M[1].x,y:P?S:M[1].y,opacity:0}),i.rows=_,i._tagCloud=y}s.DataSet.registerTransform("tag-cloud",n),s.DataSet.registerTransform("word-cloud",n)},"./src/transform/waffle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),h=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),n={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};function i(a,o){o=u.assign({},n,o);var l=c.getFields(o),f=t.__read(l,2),v=f[0],b=f[1],g=t.__read(o.as,2),y=g[0],_=g[1],M=o.groupBy,x=h.default(a.rows,M),m=u.keys(x),S=t.__read(o.size,2),P=S[0],A=S[1],O=o.maxCount,R=m.length,H=A/R,N=o.rows,K=o.gapRatio,V=[],k=o.scale,Z=0,X=0;u.forIn(x,function(at){var pt=s.sum(u.map(at,function(ft){return ft[b]})),gt=Math.ceil(pt*k/N);pt*k>O&&(k=O/pt,gt=Math.ceil(pt*k/N)),X=P/gt}),u.forIn(x,function(at){var pt=[Z*H,(Z+1)*H],gt=pt[1]-pt[0],ft=gt*(1-K)/N,Rt=0,Nt=0;u.each(at,function(Dt){for(var St=Dt[b],xt=Math.round(St*k),Ot=0;Ot<xt;Ot++){Nt===N&&(Nt=0,Rt++);var it=u.pick(Dt,[v,b].concat(M));it[y]=Rt*X+X/2,it[_]=Nt*ft+ft/2+pt[0],it._wStep=X,it._hStep=ft,Nt++,V.push(it)}}),Z+=1}),a.rows=V}r.DataSet.registerTransform("waffle",i)},"./src/util/bandwidth.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.nrd=T.silverman=void 0;var t=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js");function u(h){var r=t.standardDeviation(h),c=4*Math.pow(r,5),n=3*h.length;return Math.pow(c/n,.2)}T.silverman=u;function s(h){var r=t.standardDeviation(h),c=t.interquartileRange(h);return typeof c=="number"&&(r=Math.min(r,c/1.34)),1.06*r*Math.pow(h.length,-.2)}T.nrd=s},"./src/util/get-geo-projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js")),h=t.__importStar(e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js")),r=t.__importStar(e("./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js"));T.default=function(c,n){if(n===void 0&&(n=!1),u.isFunction(c))return n?c:c();if(u.isString(c)){if(s[c])return n?s[c]:s[c]();if(h[c])return n?h[c]:h[c]();if(r[c])return n?r[c]:r[c]()}return null}},"./src/util/get-series-values.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");T.default=function(u,s){for(var h=s||1,r=t.__read(u,2),c=r[0],n=r[1],i=[],a=c;a<n;)i.push(a),a+=h;return i.push(n),i}},"./src/util/kernel.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s){return Math.abs(s)<=1?.5:0}function u(s){var h=1-Math.pow(Math.abs(s),3);return Math.pow(h,3)}T.default={boxcar:t,cosine:function(h){return Math.abs(h)<=1?Math.PI/4*Math.cos(Math.PI/2*h):0},epanechnikov:function(h){return Math.abs(h)<1?.75*(1-h*h):0},gaussian:function(h){return .3989422804*Math.exp(-.5*h*h)},quartic:function(h){if(Math.abs(h)<1){var r=1-h*h;return 15/16*r*r}return 0},triangular:function(h){var r=Math.abs(h);return r<1?1-r:0},tricube:function(h){return Math.abs(h)<1?70/81*u(h):0},triweight:function(h){if(Math.abs(h)<1){var r=1-h*h;return 35/32*r*r*r}return 0},uniform:t}},"./src/util/option-parser.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getFields=T.getField=void 0;var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u="Invalid field: it must be a string!",s="Invalid fields: it must be an array!";function h(c,n){var i=c.field,a=c.fields;if(t.isString(i))return i;if(t.isArray(i))return console.warn(u),i[0];if(console.warn(u+" will try to get fields instead."),t.isString(a))return a;if(t.isArray(a)&&a.length)return a[0];if(n)return n;throw new TypeError(u)}T.getField=h;function r(c,n){var i=c.field,a=c.fields;if(t.isArray(a))return a;if(t.isString(a))return console.warn(s),[a];if(console.warn(s+" will try to get field instead."),t.isString(i))return console.warn(s),[i];if(t.isArray(i)&&i.length)return console.warn(s),i;if(n)return n;throw new TypeError(s)}T.getFields=r},"./src/util/p-by-fraction.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){for(var u=1/t,s=[],h=0;h<=1;h=h+u)s.push(h);return s}},"./src/util/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/simple-sort-by.ts"));T.default=function(h,r,c){c===void 0&&(c=[]);var n=h;c&&c.length&&(n=s.default(h,c));var i;u.isFunction(r)?i=r:u.isArray(r)?i=function(l){return"_"+r.map(function(f){return l[f]}).join("-")}:u.isString(r)&&(i=function(l){return"_"+l[r]});var a=u.groupBy(n,i);return a}},"./src/util/simple-sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function u(s,h){h===void 0&&(h=[]);var r=void 0;return t.isFunction(h)?r=h:t.isArray(h)?r=function(n,i){for(var a=0;a<h.length;a++){var o=h[a];if(n[o]<i[o])return-1;if(n[o]>i[o])return 1}return 0}:t.isString(h)&&(r=function(n,i){return n[h]<i[h]?-1:n[h]>i[h]?1:0}),s.sort(r)}T.default=u},"./src/util/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=Math.PI/180,s=1<<11>>5,h=1<<11;function r(P){return P.text}function c(){return"serif"}function n(){return"normal"}function i(P){return P.value}function a(){return~~(Math.random()*2)*90}function o(){return 1}function l(P,A,O,R){if(!A.sprite){var H=P.context,N=P.ratio;H.clearRect(0,0,(s<<5)/N,h/N);var K=0,V=0,k=0,Z=O.length;for(--R;++R<Z;){A=O[R],H.save(),H.font=A.style+" "+A.weight+" "+~~((A.size+1)/N)+"px "+A.font;var X=H.measureText(A.text+"m").width*N,at=A.size<<1;if(A.rotate){var pt=Math.sin(A.rotate*u),gt=Math.cos(A.rotate*u),ft=X*gt,Rt=X*pt,Nt=at*gt,Dt=at*pt;X=Math.max(Math.abs(ft+Dt),Math.abs(ft-Dt))+31>>5<<5,at=~~Math.max(Math.abs(Rt+Nt),Math.abs(Rt-Nt))}else X=X+31>>5<<5;if(at>k&&(k=at),K+X>=s<<5&&(K=0,V+=k,k=0),V+at>=h)break;H.translate((K+(X>>1))/N,(V+(at>>1))/N),A.rotate&&H.rotate(A.rotate*u),H.fillText(A.text,0,0),A.padding&&(H.lineWidth=2*A.padding,H.strokeText(A.text,0,0)),H.restore(),A.width=X,A.height=at,A.xoff=K,A.yoff=V,A.x1=X>>1,A.y1=at>>1,A.x0=-A.x1,A.y0=-A.y1,A.hasText=!0,K+=X}for(var St=H.getImageData(0,0,(s<<5)/N,h/N).data,xt=[];--R>=0;)if(A=O[R],!!A.hasText){for(var X=A.width,Ot=X>>5,at=A.y1-A.y0,it=0;it<at*Ot;it++)xt[it]=0;if(K=A.xoff,K==null)return;V=A.yoff;for(var At=0,z=-1,q=0;q<at;q++){for(var it=0;it<X;it++){var mt=Ot*q+(it>>5),et=St[(V+q)*(s<<5)+(K+it)<<2]?1<<31-it%32:0;xt[mt]|=et,At|=et}At?z=q:(A.y0++,at--,q--,V++)}A.y1=A.y0+z,A.sprite=xt.slice(0,(A.y1-A.y0)*Ot)}}}function f(P,A,O){O>>=5;for(var R=P.sprite,H=P.width>>5,N=P.x-(H<<4),K=N&127,V=32-K,k=P.y1-P.y0,Z=(P.y+P.y0)*O+(N>>5),X,at=0;at<k;at++){X=0;for(var pt=0;pt<=H;pt++)if((X<<V|(pt<H?(X=R[at*H+pt])>>>K:0))&A[Z+pt])return!0;Z+=O}return!1}function v(P,A){var O=P[0],R=P[1];A.x+A.x0<O.x&&(O.x=A.x+A.x0),A.y+A.y0<O.y&&(O.y=A.y+A.y0),A.x+A.x1>R.x&&(R.x=A.x+A.x1),A.y+A.y1>R.y&&(R.y=A.y+A.y1)}function b(P,A){return P.x+P.x1>A[0].x&&P.x+P.x0<A[1].x&&P.y+P.y1>A[0].y&&P.y+P.y0<A[1].y}function g(P){var A=P[0]/P[1];return function(O){return[A*(O*=.1)*Math.cos(O),O*Math.sin(O)]}}function y(P){var A=4,O=A*P[0]/P[1],R=0,H=0;return function(N){var K=N<0?-1:1;switch(Math.sqrt(1+4*K*N)-K&3){case 0:R+=O;break;case 1:H+=A;break;case 2:R-=O;break;default:H-=A;break}return[R,H]}}function _(P){for(var A=[],O=-1;++O<P;)A[O]=0;return A}function M(){return document.createElement("canvas")}function x(P){return typeof P=="function"?P:function(){return P}}var m={archimedean:g,rectangular:y};function S(){var P=[256,256],A=r,O=c,R=i,H=n,N=n,K=a,V=o,k=g,Z=[],X=Infinity,at=Math.random,pt=M,gt={};gt.canvas=function(Nt){return arguments.length?(pt=x(Nt),gt):pt},gt.start=function(){var Nt=t.__read(P,2),Dt=Nt[0],St=Nt[1],xt=ft(pt()),Ot=gt.board?gt.board:_((P[0]>>5)*P[1]),it=Z.length,At=[],z=Z.map(function(st,bt){return st.text=A.call(this,st,bt),st.font=O.call(this,st,bt),st.style=H.call(this,st,bt),st.weight=N.call(this,st,bt),st.rotate=K.call(this,st,bt),st.size=~~R.call(this,st,bt),st.padding=V.call(this,st,bt),st}).sort(function(st,bt){return bt.size-st.size}),q=-1,mt=gt.board?[{x:0,y:0},{x:Dt,y:St}]:null;et();function et(){for(var st=Date.now();Date.now()-st<X&&++q<it;){var bt=z[q];bt.x=Dt*(at()+.5)>>1,bt.y=St*(at()+.5)>>1,l(xt,bt,z,q),bt.hasText&&Rt(Ot,bt,mt)&&(At.push(bt),mt?gt.hasImage||v(mt,bt):mt=[{x:bt.x+bt.x0,y:bt.y+bt.y0},{x:bt.x+bt.x1,y:bt.y+bt.y1}],bt.x-=P[0]>>1,bt.y-=P[1]>>1)}gt._tags=At,gt._bounds=mt}return gt};function ft(Nt){Nt.width=Nt.height=1;var Dt=Math.sqrt(Nt.getContext("2d").getImageData(0,0,1,1).data.length>>2);Nt.width=(s<<5)/Dt,Nt.height=h/Dt;var St=Nt.getContext("2d");return St.fillStyle=St.strokeStyle="red",St.textAlign="center",{context:St,ratio:Dt}}function Rt(Nt,Dt,St){for(var xt=Dt.x,Ot=Dt.y,it=Math.sqrt(P[0]*P[0]+P[1]*P[1]),At=k(P),z=at()<.5?1:-1,q,mt=-z,et,st;(q=At(mt+=z))&&(et=~~q[0],st=~~q[1],!(Math.min(Math.abs(et),Math.abs(st))>=it));)if(Dt.x=xt+et,Dt.y=Ot+st,!(Dt.x+Dt.x0<0||Dt.y+Dt.y0<0||Dt.x+Dt.x1>P[0]||Dt.y+Dt.y1>P[1])&&(!St||!f(Dt,Nt,P[0]))&&(!St||b(Dt,St))){for(var bt=Dt.sprite,Y=Dt.width>>5,rt=P[0]>>5,ot=Dt.x-(Y<<4),$=ot&127,Pt=32-$,yt=Dt.y1-Dt.y0,Ft=void 0,Qt=(Dt.y+Dt.y0)*rt+(ot>>5),ne=0;ne<yt;ne++){Ft=0;for(var Wt=0;Wt<=Y;Wt++)Nt[Qt+Wt]|=Ft<<Pt|(Wt<Y?(Ft=bt[ne*Y+Wt])>>>$:0);Qt+=rt}return delete Dt.sprite,!0}return!1}return gt.createMask=function(Nt){var Dt=document.createElement("canvas"),St=t.__read(P,2),xt=St[0],Ot=St[1];if(!(!xt||!Ot)){var it=xt>>5,At=_((xt>>5)*Ot);Dt.width=xt,Dt.height=Ot;var z=Dt.getContext("2d");z.drawImage(Nt,0,0,Nt.width,Nt.height,0,0,xt,Ot);for(var q=z.getImageData(0,0,xt,Ot).data,mt=0;mt<Ot;mt++)for(var et=0;et<xt;et++){var st=it*mt+(et>>5),bt=mt*xt+et<<2,Y=q[bt]>=250&&q[bt+1]>=250&&q[bt+2]>=250,rt=Y?1<<31-et%32:0;At[st]|=rt}gt.board=At,gt.hasImage=!0}},gt.timeInterval=function(Nt){return arguments.length?(X=Nt==null?Infinity:Nt,gt):X},gt.words=function(Nt){return arguments.length?(Z=Nt,gt):Z},gt.size=function(Nt){return arguments.length?(P=[+Nt[0],+Nt[1]],gt):P},gt.font=function(Nt){return arguments.length?(O=x(Nt),gt):O},gt.fontStyle=function(Nt){return arguments.length?(H=x(Nt),gt):H},gt.fontWeight=function(Nt){return arguments.length?(N=x(Nt),gt):N},gt.rotate=function(Nt){return arguments.length?(K=x(Nt),gt):K},gt.text=function(Nt){return arguments.length?(A=x(Nt),gt):A},gt.spiral=function(Nt){return arguments.length?(k=m[Nt]||Nt,gt):k},gt.fontSize=function(Nt){return arguments.length?(R=x(Nt),gt):R},gt.padding=function(Nt){return arguments.length?(V=x(Nt),gt):V},gt.random=function(Nt){return arguments.length?(at=Nt,gt):at},gt}T.default=S},"./src/view.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.View=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function h(c){var n={};return s.forIn(c,function(i,a){s.isObject(i)&&i.isView?n[a]=i:s.isArray(i)?n[a]=i.concat([]):s.isPlainObject(i)?n[a]=s.clone(i):n[a]=i}),n}var r=function(c){t.__extends(n,c);function n(i,a){var o=c.call(this)||this;if(o.isView=!0,o.isDataView=!0,o.watchingStates=null,o.dataType="table",o.transforms=[],o.origin=[],o.rows=[],i&&i.isDataSet?o.dataSet=i:(o.dataSet=null,a=i),o.loose=!o.dataSet,a&&(o.watchingStates=a.watchingStates),!o.loose){var l=o.watchingStates;i.on("statechange",function(f){s.isArray(l)?l.indexOf(f)>-1&&o._reExecute():o._reExecute()})}return o}return n.prototype._parseStateExpression=function(i){var a=this.dataSet;if(a!==null){var o=/^\$state\.(\w+)/.exec(i);return o?a.state[o[1]]:i}},n.prototype._preparseOptions=function(i){var a=this,o=h(i);return this.loose||s.forIn(o,function(l,f){s.isString(l)&&/^\$state\./.test(l)&&(o[f]=a._parseStateExpression(l))}),o},n.prototype._prepareSource=function(i,a){if(this._source={source:i,options:a},a){var o=this._preparseOptions(a);this.origin=n.DataSet.getConnector(o.type)(i,o,this)}else if(i instanceof n||s.isString(i))this.origin=n.DataSet.getConnector("default")(i,this.dataSet);else if(s.isArray(i))this.origin=i;else if(s.isObject(i)&&i.type){var o=this._preparseOptions(i);this.origin=n.DataSet.getConnector(o.type)(o,this)}else throw new TypeError("Invalid source");return this.rows=s.deepMix([],this.origin),this},n.prototype.source=function(i,a){return this._prepareSource(i,a)._reExecuteTransforms(),this.trigger("change",[]),this},n.prototype.transform=function(i){return i&&i.type&&(this.transforms.push(i),this._executeTransform(i)),this},n.prototype._executeTransform=function(i){i=this._preparseOptions(i);var a=n.DataSet.getTransform(i.type);a(this,i)},n.prototype._reExecuteTransforms=function(){var i=this;this.transforms.forEach(function(a){i._executeTransform(a)})},n.prototype.addRow=function(i){this.rows.push(i)},n.prototype.removeRow=function(i){this.rows.splice(i,1)},n.prototype.updateRow=function(i,a){s.assign(this.rows[i],a)},n.prototype.findRows=function(i){return this.rows.filter(function(a){return s.isMatch(a,i)})},n.prototype.findRow=function(i){return s.find(this.rows,i)},n.prototype.getColumnNames=function(){var i=this.rows[0];return i?s.keys(i):[]},n.prototype.getColumnName=function(i){return this.getColumnNames()[i]},n.prototype.getColumnIndex=function(i){var a=this.getColumnNames();return a.indexOf(i)},n.prototype.getColumn=function(i){return this.rows.map(function(a){return a[i]})},n.prototype.getColumnData=function(i){return this.getColumn(i)},n.prototype.getSubset=function(i,a,o){for(var l=[],f=i;f<=a;f++)l.push(s.pick(this.rows[f],o));return l},n.prototype.toString=function(i){return i===void 0&&(i=!1),i?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},n.prototype._reExecute=function(){var i=this._source,a=i.source,o=i.options;this._prepareSource(a,o),this._reExecuteTransforms(),this.trigger("change",[])},n}(u.default);T.View=r}})})},cSJO:function(Se,dt,L){"use strict";var U=this&&this.__spreadArray||function(r,c){for(var n=0,i=c.length,a=r.length;n<i;n++,a++)r[a]=c[n];return r};Object.defineProperty(dt,"__esModule",{value:!0}),dt.resolveInstance=void 0;var E=L("MON2"),T=L("FV85"),e=L("xfSm");function t(r,c,n){var i=c.filter(function(o){return o.target!==null&&o.target.type===T.TargetTypeEnum.ClassProperty}),a=i.map(n);return i.forEach(function(o,l){var f="";f=o.target.name.value();var v=a[l];r[f]=v}),r}function u(r,c){return new(r.bind.apply(r,U([void 0],c)))}function s(r,c){if(Reflect.hasMetadata(e.POST_CONSTRUCT,r)){var n=Reflect.getMetadata(e.POST_CONSTRUCT,r);try{c[n.value]()}catch(i){throw new Error(E.POST_CONSTRUCT_ERROR(r.name,i.message))}}}function h(r,c,n){var i=null;if(c.length>0){var a=c.filter(function(l){return l.target!==null&&l.target.type===T.TargetTypeEnum.ConstructorArgument}),o=a.map(n);i=u(r,o),i=t(i,c,n)}else i=new r;return s(r,i),i}dt.resolveInstance=h},cWXX:function(Se,dt,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("oIFs"),e=L.n(T)},cZ5Q:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.injectable=void 0;var U=L("MON2"),E=L("xfSm");function T(){return function(e){if(Reflect.hasOwnMetadata(E.PARAM_TYPES,e))throw new Error(U.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(E.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(E.PARAM_TYPES,t,e),e}}dt.injectable=T},cZlC:function(Se,dt,L){"use strict";L.d(dt,"b",function(){return U}),L.d(dt,"c",function(){return E}),L.d(dt,"a",function(){return T});var U;(function(e){e.LINEAR="linear",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat"})(U||(U={}));var E;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(E||(E={}));var T;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(T||(T={}))},"cq/+":function(Se,dt,L){var U=L("mc0g"),E=U();Se.exports=E},cvCv:function(Se,dt){function L(U){return function(){return U}}Se.exports=L},d9O0:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.id=void 0;var U=0;function E(){return U++}dt.id=E},dQpi:function(Se,dt,L){var U=L("yGk4"),E=L("vN+2"),T=L("rEGp"),e=1/0,t=U&&1/T(new U([,-0]))[1]==e?function(u){return new U(u)}:E;Se.exports=t},dTAl:function(Se,dt,L){var U=L("GoyQ"),E=Object.create,T=function(){function e(){}return function(t){if(!U(t))return{};if(E)return E(t);e.prototype=t;var u=new e;return e.prototype=void 0,u}}();Se.exports=T},dVn5:function(Se,dt){var L=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function U(E){return E.match(L)||[]}Se.exports=U},dX1H:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Target=void 0;var U=L("xfSm"),E=L("d9O0"),T=L("GXnB"),e=L("zxMA"),t=function(){function u(s,h,r,c){this.id=E.id(),this.type=s,this.serviceIdentifier=r,this.name=new e.QueryableString(h||""),this.metadata=new Array;var n=null;typeof c=="string"?n=new T.Metadata(U.NAMED_TAG,c):c instanceof T.Metadata&&(n=c),n!==null&&this.metadata.push(n)}return u.prototype.hasTag=function(s){for(var h=0,r=this.metadata;h<r.length;h++){var c=r[h];if(c.key===s)return!0}return!1},u.prototype.isArray=function(){return this.hasTag(U.MULTI_INJECT_TAG)},u.prototype.matchesArray=function(s){return this.matchesTag(U.MULTI_INJECT_TAG)(s)},u.prototype.isNamed=function(){return this.hasTag(U.NAMED_TAG)},u.prototype.isTagged=function(){return this.metadata.some(function(s){return U.NON_CUSTOM_TAG_KEYS.every(function(h){return s.key!==h})})},u.prototype.isOptional=function(){return this.matchesTag(U.OPTIONAL_TAG)(!0)},u.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(s){return s.key===U.NAMED_TAG})[0]:null},u.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(s){return U.NON_CUSTOM_TAG_KEYS.every(function(h){return s.key!==h})}):null},u.prototype.matchesNamedTag=function(s){return this.matchesTag(U.NAMED_TAG)(s)},u.prototype.matchesTag=function(s){var h=this;return function(r){for(var c=0,n=h.metadata;c<n.length;c++){var i=n[c];if(i.key===s&&i.value===r)return!0}return!1}},u}();dt.Target=t},doU7:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingCount=void 0;var U={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};dt.BindingCount=U},dt0z:function(Se,dt,L){var U=L("zoYe");function E(T){return T==null?"":U(T)}Se.exports=E},dxzI:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.AsyncContainerModule=dt.ContainerModule=void 0;var U=L("d9O0"),E=function(){function e(t){this.id=U.id(),this.registry=t}return e}();dt.ContainerModule=E;var T=function(){function e(t){this.id=U.id(),this.registry=t}return e}();dt.AsyncContainerModule=T},eUgh:function(Se,dt){function L(U,E){for(var T=-1,e=U==null?0:U.length,t=Array(e);++T<e;)t[T]=E(U[T],T,U);return t}Se.exports=L},"eg+a":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},fX6N:function(Se,dt,L){"use strict";L.d(dt,"d",function(){return df}),L.d(dt,"b",function(){return Gc}),L.d(dt,"a",function(){return qc});var U=L("mNvP"),E=L("uhBA"),T=L.n(E),e=L("4cb6"),t=L("APxj"),u=L.n(t),s=L("bB6j"),h=L("lSNA"),r=L.n(h),c=L("lwsE"),n=L.n(c),i=L("W8MJ"),a=L.n(i),o=L("Hel2"),l=L("rxlC"),f=L.n(l);function v(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function b(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?v(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):v(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function g(pe,me){var Vt;if(typeof Symbol=="undefined"||pe[Symbol.iterator]==null){if(Array.isArray(pe)||(Vt=y(pe))||me&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Kt=0,ze=function(){};return{s:ze,n:function(){return Kt>=pe.length?{done:!0}:{done:!1,value:pe[Kt++]}},e:function(Jr){throw Jr},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rn=!0,Un=!1,gr;return{s:function(){Vt=pe[Symbol.iterator]()},n:function(){var Jr=Vt.next();return rn=Jr.done,Jr},e:function(Jr){Un=!0,gr=Jr},f:function(){try{!rn&&Vt.return!=null&&Vt.return()}finally{if(Un)throw gr}}}}function y(pe,me){if(!!pe){if(typeof pe=="string")return _(pe,me);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return _(pe,me)}}function _(pe,me){(me==null||me>pe.length)&&(me=pe.length);for(var Vt=0,Kt=new Array(me);Vt<me;Vt++)Kt[Vt]=pe[Vt];return Kt}var M=30;function x(pe){var me=pe.characterSet,Vt=pe.getFontWidth,Kt=pe.fontHeight,ze=pe.buffer,rn=pe.maxCanvasWidth,Un=pe.mapping,gr=Un===void 0?{}:Un,mr=pe.xOffset,Jr=mr===void 0?0:mr,Mi=pe.yOffset,Hi=Mi===void 0?0:Mi,ra=0,Da=Jr;Array.from(me).forEach(function(Qa,qo){if(!gr[Qa]){var bo=Vt(Qa,qo);Da+M>rn&&(Da=0,ra++),gr[Qa]={x:Da,y:Hi+ra*M,width:M,height:M,advance:bo},Da+=M}});var Ka=Kt+ze*2;return{mapping:gr,xOffset:Da,yOffset:Hi+ra*Ka,canvasHeight:P(Hi+(ra+1)*Ka)}}function m(pe,me,Vt){var Kt=0,ze=0,rn=0,Un=[],gr={},mr=g(pe),Jr;try{for(mr.s();!(Jr=mr.n()).done;){var Mi=Jr.value;if(!gr[Mi.id]){var Hi=Mi.size;Kt+Hi+me>Vt&&(S(gr,Un,ze),Kt=0,ze=rn+ze+me,rn=0,Un=[]),Un.push({icon:Mi,xOffset:Kt}),Kt=Kt+Hi+me,rn=Math.max(rn,Hi)}}}catch(Da){mr.e(Da)}finally{mr.f()}Un.length>0&&S(gr,Un,ze);var ra=P(rn+ze+me);return{mapping:gr,canvasHeight:ra}}function S(pe,me,Vt){var Kt=g(me),ze;try{for(Kt.s();!(ze=Kt.n()).done;){var rn=ze.value,Un=rn.icon,gr=rn.xOffset;pe[Un.id]=b(b({},Un),{},{x:gr,y:Vt,image:Un.image,width:Un.width,height:Un.height})}}catch(mr){Kt.e(mr)}finally{Kt.f()}}function P(pe){return Math.pow(2,Math.ceil(Math.log2(pe)))}var A,O,R;function H(pe,me){var Vt;if(typeof Symbol=="undefined"||pe[Symbol.iterator]==null){if(Array.isArray(pe)||(Vt=N(pe))||me&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Kt=0,ze=function(){};return{s:ze,n:function(){return Kt>=pe.length?{done:!0}:{done:!1,value:pe[Kt++]}},e:function(Jr){throw Jr},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rn=!0,Un=!1,gr;return{s:function(){Vt=pe[Symbol.iterator]()},n:function(){var Jr=Vt.next();return rn=Jr.done,Jr},e:function(Jr){Un=!0,gr=Jr},f:function(){try{!rn&&Vt.return!=null&&Vt.return()}finally{if(Un)throw gr}}}}function N(pe,me){if(!!pe){if(typeof pe=="string")return K(pe,me);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return K(pe,me)}}function K(pe,me){(me==null||me>pe.length)&&(me=pe.length);for(var Vt=0,Kt=new Array(me);Vt<me;Vt++)Kt[Vt]=pe[Vt];return Kt}function V(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function k(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?V(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):V(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}var Z=it(),X="sans-serif",at="normal",pt=24,gt=3,ft=.25,Rt=8,Nt=1024,Dt=1,St=1,xt=3,Ot=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function it(){for(var pe=[],me=32;me<128;me++)pe.push(String.fromCharCode(me));return pe}function At(pe,me,Vt,Kt){pe.font="".concat(Kt," ").concat(Vt,"px ").concat(me),pe.fillStyle="black",pe.textBaseline="middle"}function z(pe,me){for(var Vt=0;Vt<pe.length;Vt++)me.data[4*Vt+3]=pe[Vt]}var q=(A=Object(e.injectable)(),A(O=(R=function(){function pe(){n()(this,pe),this.fontAtlas=void 0,this.iconFontMap=void 0,this.iconFontGlyphs={},this.fontOptions=void 0,this.key=void 0,this.cache=new o.b(xt)}return a()(pe,[{key:"scale",get:function(){return St}},{key:"canvas",get:function(){var Vt=this.cache.get(this.key);return Vt&&Vt.data}},{key:"mapping",get:function(){var Vt=this.cache.get(this.key);return Vt&&Vt.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:X,fontWeight:at,characterSet:Z,fontSize:pt,buffer:gt,sdf:!0,cutoff:ft,radius:Rt,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(Vt){var Kt=this;Vt.forEach(function(ze){Kt.iconFontGlyphs[ze.name]=ze.unicode})}},{key:"addIconFont",value:function(Vt,Kt){this.iconFontMap.set(Vt,Kt)}},{key:"getIconFontKey",value:function(Vt){return this.iconFontMap.get(Vt)||Vt}},{key:"getGlyph",value:function(Vt){return this.iconFontGlyphs[Vt]?String.fromCharCode(parseInt(this.iconFontGlyphs[Vt],16)):""}},{key:"setFontOptions",value:function(Vt){this.fontOptions=k(k({},this.fontOptions),Vt),this.key=this.getKey();var Kt=this.getNewChars(this.key,this.fontOptions.characterSet),ze=this.cache.get(this.key);if(!(ze&&Kt.length===0)){var rn=this.generateFontAtlas(this.key,Kt,ze);this.fontAtlas=rn,this.cache.set(this.key,rn)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(Vt,Kt,ze){var rn=this.fontOptions,Un=rn.fontFamily,gr=rn.fontWeight,mr=rn.fontSize,Jr=rn.buffer,Mi=rn.sdf,Hi=rn.radius,ra=rn.cutoff,Da=rn.iconfont,Ka=ze&&ze.data;Ka||(Ka=document.createElement("canvas"),Ka.width=Nt);var Qa=Ka.getContext("2d");At(Qa,Un,mr,gr);var qo=x(k({getFontWidth:function(tf){return Qa.measureText(tf).width},fontHeight:mr*St,buffer:Jr,characterSet:Kt,maxCanvasWidth:Nt},ze&&{mapping:ze.mapping,xOffset:ze.xOffset,yOffset:ze.yOffset})),bo=qo.mapping,Ts=qo.canvasHeight,Ys=qo.xOffset,xu=qo.yOffset,Zs=Qa.getImageData(0,0,Ka.width,Ka.height);if(Ka.height=Ts,Qa.putImageData(Zs,0,0),At(Qa,Un,mr,gr),Mi){var zs=new f.a(mr,Jr,Hi,ra,Un,gr),Eo=Qa.getImageData(0,0,zs.size,zs.size),Ks=H(Kt),$u;try{for(Ks.s();!($u=Ks.n()).done;){var ys=$u.value;if(Da){var Is=String.fromCharCode(parseInt(ys.replace("&#x","").replace(";",""),16)),$o=zs.draw(Is);z($o,Eo)}else z(zs.draw(ys),Eo);Qa.putImageData(Eo,bo[ys].x,bo[ys].y)}}catch(Kc){Ks.e(Kc)}finally{Ks.f()}}else{var hl=H(Kt),Ic;try{for(hl.s();!(Ic=hl.n()).done;){var jc=Ic.value;Qa.fillText(jc,bo[jc].x,bo[jc].y+mr*Dt)}}catch(Kc){hl.e(Kc)}finally{hl.f()}}return{xOffset:Ys,yOffset:xu,mapping:bo,data:Ka,width:Ka.width,height:Ka.height}}},{key:"getKey",value:function(){return"key";var Vt,Kt,ze,rn,Un,gr,mr,Jr}},{key:"getNewChars",value:function(Vt,Kt){var ze=this.cache.get(Vt);if(!ze)return Kt;var rn=[],Un=ze.mapping,gr=new Set(Object.keys(Un)),mr=new Set(Kt);return mr.forEach(function(Jr){gr.has(Jr)||rn.push(Jr)}),rn}}]),pe}(),R))||O),mt=L("7W2i"),et=L.n(mt),st=L("a1gu"),bt=L.n(st),Y=L("Nsbk"),rt=L.n(Y),ot,$,Pt;function yt(pe){var me=Ft();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function Ft(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Qt=3,ne=1024,Wt=64,$t=(ot=Object(e.injectable)(),ot($=(Pt=function(pe){et()(Vt,pe);var me=yt(Vt);function Vt(){var Kt;n()(this,Vt);for(var ze=arguments.length,rn=new Array(ze),Un=0;Un<ze;Un++)rn[Un]=arguments[Un];return Kt=me.call.apply(me,[this].concat(rn)),Kt.canvasHeight=128,Kt.texture=void 0,Kt.canvas=void 0,Kt.iconData=void 0,Kt.iconMap=void 0,Kt.ctx=void 0,Kt.loadingImageCount=0,Kt}return a()(Vt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(ze,rn){var Un=this,gr=new Image;if(this.loadingImageCount++,this.hasImage(ze))throw new Error("Image Id already exists");this.iconData.push({id:ze,size:Wt}),this.updateIconMap(),this.loadImage(rn).then(function(mr){gr=mr;var Jr=Un.iconData.find(function(Mi){return Mi.id===ze});Jr&&(Jr.image=gr,Jr.width=gr.width,Jr.height=gr.height),Un.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(ze){return this.iconMap.hasOwnProperty(ze)}},{key:"removeImage",value:function(ze){this.hasImage(ze)&&(this.iconData=this.iconData.filter(function(rn){return rn.id!==ze}),delete this.iconMap[ze],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var ze=this;this.canvas.width=ne,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(rn){var Un=ze.iconMap[rn],gr=Un.x,mr=Un.y,Jr=Un.image,Mi=Un.width,Hi=Mi===void 0?64:Mi,ra=Un.height,Da=ra===void 0?64:ra,Ka=Math.max(Hi,Da),Qa=Ka/Wt,qo=Da/Qa,bo=Hi/Qa;Jr&&ze.ctx.drawImage(Jr,gr+(Wt-bo)/2,mr+(Wt-qo)/2,bo,qo)})}},{key:"updateIconMap",value:function(){var ze=m(this.iconData,Qt,ne),rn=ze.mapping,Un=ze.canvasHeight;this.iconMap=rn,this.canvasHeight=Un}},{key:"loadImage",value:function(ze){return new Promise(function(rn,Un){if(ze instanceof HTMLImageElement){rn(ze);return}var gr=new Image;gr.crossOrigin="anonymous",gr.onload=function(){rn(gr)},gr.onerror=function(){Un(new Error("Could not load image at "+ze))},gr.src=ze instanceof File?URL.createObjectURL(ze):ze})}}]),Vt}(E.EventEmitter),Pt))||$),De=L("J4zp"),Je=L.n(De),Qe=L("IOcx"),de,ue,Ne,cn=(de=Object(e.injectable)(),de(ue=(Ne=function(){function pe(){n()(this,pe),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0,this.viewMatrixInverse=void 0,this.cameraPosition=void 0}return a()(pe,[{key:"init",value:function(){}},{key:"update",value:function(Vt){this.viewport=Vt,this.viewMatrixInverse=Qe.b.create(),Qe.b.invert(this.viewMatrixInverse,Vt.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var Vt=this.viewport.getCenter(),Kt=Je()(Vt,2),ze=Kt[0],rn=Kt[1];return[ze,rn]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(Vt,Kt){return this.viewport.projectFlat(Vt,Kt)}},{key:"setViewProjectionMatrix",value:function(Vt){this.overridedViewProjectionMatrix=Vt}},{key:"jitterProjectionMatrix",value:function(Vt,Kt){var ze=Qe.b.fromTranslation(Qe.b.create(),[Vt,Kt,0]);this.jitteredProjectionMatrix=Qe.b.multiply(Qe.b.create(),ze,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Qe.b.multiply(Qe.b.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),pe}(),Ne))||ue),Fn,wn,en;function tn(pe,me){var Vt;if(typeof Symbol=="undefined"||pe[Symbol.iterator]==null){if(Array.isArray(pe)||(Vt=xn(pe))||me&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Kt=0,ze=function(){};return{s:ze,n:function(){return Kt>=pe.length?{done:!0}:{done:!1,value:pe[Kt++]}},e:function(Jr){throw Jr},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rn=!0,Un=!1,gr;return{s:function(){Vt=pe[Symbol.iterator]()},n:function(){var Jr=Vt.next();return rn=Jr.done,Jr},e:function(Jr){Un=!0,gr=Jr},f:function(){try{!rn&&Vt.return!=null&&Vt.return()}finally{if(Un)throw gr}}}}function xn(pe,me){if(!!pe){if(typeof pe=="string")return Bn(pe,me);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return Bn(pe,me)}}function Bn(pe,me){(me==null||me>pe.length)&&(me=pe.length);for(var Vt=0,Kt=new Array(me);Vt<me;Vt++)Kt[Vt]=pe[Vt];return Kt}var vr=(Fn=Object(e.injectable)(),Fn(wn=(en=function(){function pe(){n()(this,pe),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.scene=void 0,this.mapsService=void 0,this.controls=[],this.unAddControls=[]}return a()(pe,[{key:"init",value:function(Vt,Kt){this.container=Vt.container,this.scene=Kt,this.mapsService=Kt.get(s.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(Vt,Kt){var ze=Kt.get(s.a.IMapService);ze.map?(Vt.addTo(this.scene),this.controls.push(Vt)):this.unAddControls.push(Vt)}},{key:"getControlByName",value:function(Vt){return this.controls.find(function(Kt){return Kt.controlOption.name===Vt})}},{key:"removeControl",value:function(Vt){var Kt=this.controls.indexOf(Vt);return Kt>-1&&this.controls.splice(Kt,1),Vt.remove(),this}},{key:"addControls",value:function(){var Vt=this;this.unAddControls.forEach(function(Kt){Kt.addTo(Vt.scene),Vt.controls.push(Kt)}),this.unAddControls=[]}},{key:"destroy",value:function(){var Vt=tn(this.controls),Kt;try{for(Vt.s();!(Kt=Vt.n()).done;){var ze=Kt.value;ze.remove()}}catch(rn){Vt.e(rn)}finally{Vt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var Vt=this.controlCorners={},Kt="l7-",ze=this.controlContainer=o.a.create("div",Kt+"control-container",this.container);function rn(Un,gr){var mr=Kt+Un+" "+Kt+gr;Vt[Un+gr]=o.a.create("div",mr,ze)}rn("top","left"),rn("top","right"),rn("bottom","left"),rn("bottom","right")}},{key:"clearControlPos",value:function(){for(var Vt in this.controlCorners)this.controlCorners[Vt]&&o.a.remove(this.controlCorners[Vt]);this.controlContainer&&o.a.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),pe}(),en))||wn),li,Me,Pe,te=(li=Object(e.injectable)(),li(Me=(Pe=function(){function pe(){n()(this,pe),this.container=void 0,this.scene=void 0,this.mapsService=void 0,this.markers=[],this.markerLayers=[],this.unAddMarkers=[],this.unAddMarkerLayers=[]}return a()(pe,[{key:"addMarkerLayer",value:function(Vt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Vt),Vt.addTo(this.scene)):this.unAddMarkerLayers.push(Vt)}},{key:"removeMarkerLayer",value:function(Vt){Vt.destroy(),this.markerLayers.indexOf(Vt);var Kt=this.markerLayers.indexOf(Vt);Kt>-1&&this.markerLayers.splice(Kt,1)}},{key:"addMarker",value:function(Vt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Vt),Vt.addTo(this.scene)):this.unAddMarkers.push(Vt)}},{key:"addMarkers",value:function(){var Vt=this;this.unAddMarkers.forEach(function(Kt){Kt.addTo(Vt.scene),Vt.markers.push(Kt)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var Vt=this;this.unAddMarkerLayers.forEach(function(Kt){Vt.markerLayers.push(Kt),Kt.addTo(Vt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(Vt){Vt.remove(),this.markers.indexOf(Vt);var Kt=this.markers.indexOf(Vt);Kt>-1&&this.markers.splice(Kt,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(Vt){this.scene=Vt,this.mapsService=Vt.get(s.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(Vt){Vt.remove()}),this.markers=[],this.markerLayers.forEach(function(Vt){Vt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(Vt){Vt.destroy()}}]),pe}(),Pe))||Me),ge,Ht,re,Te=(ge=Object(e.injectable)(),ge(Ht=(re=function(){function pe(){n()(this,pe),this.scene=void 0,this.popup=void 0,this.mapsService=void 0,this.unAddPopup=void 0}return a()(pe,[{key:"removePopup",value:function(Vt){Vt.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(Vt){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(Vt.addTo(this.scene),this.popup=Vt):this.unAddPopup=Vt}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(Vt){this.scene=Vt,this.mapsService=Vt.get(s.a.IMapService)}}]),pe}(),re))||Ht),ae=L("QkVN"),xe=L.n(ae),qe={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},zn=qe,ar,_n,Cn;function Or(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function Ar(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?Or(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Or(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}var hn={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Pr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},yr=(ar=Object(e.injectable)(),ar(_n=(Cn=function(){function pe(){n()(this,pe),this.sceneConfigCache={},this.layerConfigCache={}}return a()(pe,[{key:"getSceneConfig",value:function(Vt){return this.sceneConfigCache[Vt]}},{key:"getSceneWarninfo",value:function(Vt){return zn[Vt]}},{key:"setSceneConfig",value:function(Vt,Kt){this.sceneConfigCache[Vt]=Ar(Ar({},hn),Kt)}},{key:"getLayerConfig",value:function(Vt){return this.layerConfigCache[Vt]}},{key:"setLayerConfig",value:function(Vt,Kt,ze){this.layerConfigCache[Kt]=Ar({},xe()({},this.sceneConfigCache[Vt],Pr,ze))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),pe}(),Cn))||_n),Re=L("yG8O"),We=L.n(Re),Ye=L("U+yc"),dn=L.n(Ye),En=L("1ABj"),Dn=Math.PI/180,Sn=512,Nn=4003e4;function nr(pe){var me=pe.latitude,Vt=me===void 0?0:me,Kt=pe.zoom,ze=Kt===void 0?0:Kt,rn=pe.scale,Un=pe.highPrecision,gr=Un===void 0?!1:Un,mr=pe.flipY,Jr=mr===void 0?!1:mr;rn=rn!==void 0?rn:Math.pow(2,ze);var Mi={},Hi=Sn*rn,ra=Math.cos(Vt*Dn),Da=Hi/360,Ka=Da/ra,Qa=Hi/Nn/ra;if(Mi.pixelsPerMeter=[Qa,-Qa,Qa],Mi.metersPerPixel=[1/Qa,-1/Qa,1/Qa],Mi.pixelsPerDegree=[Da,-Ka,Qa],Mi.degreesPerPixel=[1/Da,-1/Ka,1/Qa],gr){var qo=Dn*Math.tan(Vt*Dn)/ra,bo=Da*qo/2,Ts=Hi/Nn*qo,Ys=Ts/Ka*Qa;Mi.pixelsPerDegree2=[0,-bo,Ts],Mi.pixelsPerMeter2=[Ys,0,Ys],Jr&&(Mi.pixelsPerDegree2[1]=-Mi.pixelsPerDegree2[1],Mi.pixelsPerMeter2[1]=-Mi.pixelsPerMeter2[1])}return Jr&&(Mi.pixelsPerMeter[1]=-Mi.pixelsPerMeter[1],Mi.metersPerPixel[1]=-Mi.metersPerPixel[1],Mi.pixelsPerDegree[1]=-Mi.pixelsPerDegree[1],Mi.degreesPerPixel[1]=-Mi.degreesPerPixel[1]),Mi}var Gn=L("HthE"),Tn,Cr,pr,zr,Ei,Oa,wa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Ja=(Tn=Object(e.injectable)(),Cr=Object(e.inject)(s.a.ICameraService),Tn(pr=(zr=(Oa=function(){function pe(){n()(this,pe),this.needRefresh=!0,We()(this,"cameraService",Ei,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return a()(pe,[{key:"refresh",value:function(){var Vt=this.cameraService.getZoom(),Kt=this.cameraService.getZoomScale(),ze=this.cameraService.getCenter(),rn=nr({latitude:ze[1],zoom:Vt}),Un=rn.pixelsPerMeter,gr=rn.pixelsPerDegree;this.viewportCenter=ze,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Un,this.pixelsPerDegree=gr,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Gn.a.LNGLAT||this.coordinateSystem===Gn.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Gn.a.LNGLAT_OFFSET?this.calculateLnglatOffset(ze,Vt):this.coordinateSystem===Gn.a.P20_OFFSET&&this.calculateLnglatOffset(ze,Vt,Kt,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(Vt){this.coordinateSystem=Vt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(Vt,Kt,ze,rn){var Un=nr({latitude:Vt[1],zoom:Kt,scale:ze,flipY:rn,highPrecision:!0}),gr=Un.pixelsPerMeter,mr=Un.pixelsPerDegree,Jr=Un.pixelsPerDegree2,Mi=this.cameraService.getViewMatrix(),Hi=this.cameraService.getProjectionMatrix(),ra=Qe.b.multiply([],Hi,Mi),Da=this.cameraService.projectFlat([Math.fround(Vt[0]),Math.fround(Vt[1])],Math.pow(2,Kt));this.viewportCenterProjection=Qe.e.transformMat4([],[Da[0],Da[1],0,1],ra),Mi=this.cameraService.getViewMatrixUncentered()||Mi,ra=Qe.b.multiply([],Hi,Mi),ra=Qe.b.multiply([],ra,wa),this.cameraService.setViewProjectionMatrix(ra),this.pixelsPerMeter=gr,this.pixelsPerDegree=mr,this.pixelsPerDegree2=Jr}}]),pe}(),Oa),Ei=dn()(zr.prototype,"cameraService",[Cr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zr))||pr),wo=L("PJYZ"),ha=L.n(wo),ro=L("yLV6"),ko=L.n(ro),$a=L("V1cb"),Mo,ss,Pa,Bo,Ro,Js,Ko,nu;function Rs(pe){var me=je();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function je(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var oe={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancle"},Zt=(Mo=Object(e.injectable)(),ss=Object(e.inject)(s.a.IMapService),Pa=Object(e.inject)(s.a.ILogService),Mo(Bo=(Ro=(nu=function(pe){et()(Vt,pe);var me=Rs(Vt);function Vt(){var Kt;n()(this,Vt);for(var ze=arguments.length,rn=new Array(ze),Un=0;Un<ze;Un++)rn[Un]=arguments[Un];return Kt=me.call.apply(me,[this].concat(rn)),We()(Kt,"mapService",Js,ha()(Kt)),We()(Kt,"logger",Ko,ha()(Kt)),Kt.hammertime=void 0,Kt.lastClickTime=0,Kt.lastClickXY=[-1,-1],Kt.clickTimer=void 0,Kt.$containter=void 0,Kt.onDrag=function(gr){var mr=Kt.interactionEvent(gr);mr.type=oe[mr.type],Kt.emit($a.a.Drag,mr)},Kt.onHammer=function(gr){gr.srcEvent.stopPropagation();var mr=Kt.interactionEvent(gr);Kt.emit($a.a.Hover,mr)},Kt.onTouch=function(gr){var mr=gr.touches[0];Kt.onHover({x:mr.pageX,y:mr.pageY,type:"touch"})},Kt.onHover=function(gr){var mr=gr.clientX,Jr=gr.clientY,Mi=mr,Hi=Jr,ra=gr.type,Da=Kt.mapService.getMapContainer();if(Da){var Ka=Da.getBoundingClientRect(),Qa=Ka.top,qo=Ka.left;Mi=Mi-qo-Da.clientLeft,Hi=Hi-Qa-Da.clientTop}var bo=Kt.mapService.containerToLngLat([Mi,Hi]);if(ra==="click"){if("ontouchstart"in document.documentElement)return;Kt.isDoubleTap(Mi,Hi,bo);return}if(ra==="touch"){Kt.isDoubleTap(Mi,Hi,bo);return}ra!=="click"&&ra!=="dblclick"&&Kt.emit($a.a.Hover,{x:Mi,y:Hi,lngLat:bo,type:ra,target:gr})},Kt}return a()(Vt,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off($a.a.Hover)}},{key:"triggerHover",value:function(ze){var rn=ze.x,Un=ze.y;this.emit($a.a.Hover,{x:rn,y:Un})}},{key:"triggerSelect",value:function(ze){this.emit($a.a.Select,{featureId:ze})}},{key:"triggerActive",value:function(ze){this.emit($a.a.Active,{featureId:ze})}},{key:"addEventListenerOnMap",value:function(){var ze=this.mapService.getMapContainer();if(ze){var rn=new ko.a.Manager(ze);rn.add(new ko.a.Tap({event:"dblclick",taps:2})),rn.add(new ko.a.Tap({event:"click"})),rn.add(new ko.a.Pan({threshold:0,pointers:0})),rn.add(new ko.a.Press({})),rn.on("dblclick click",this.onHammer),rn.on("panstart panmove panend pancancel",this.onDrag),ze.addEventListener("mousemove",this.onHover),ze.addEventListener("mousedown",this.onHover,!0),ze.addEventListener("mouseup",this.onHover),ze.addEventListener("contextmenu",this.onHover),this.hammertime=rn,this.logger.debug("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function(){var ze=this.mapService.getMapContainer();ze&&(ze.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),ze.removeEventListener("mousedown",this.onHover),ze.removeEventListener("mouseup",this.onHover),ze.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(ze){var rn=ze.type,Un=ze.pointerType,gr,mr;Un==="touch"?(mr=Math.floor(ze.pointers[0].clientY),gr=Math.floor(ze.pointers[0].clientX)):(mr=Math.floor(ze.srcEvent.y),gr=Math.floor(ze.srcEvent.x));var Jr=this.mapService.getMapContainer();if(Jr){var Mi=Jr.getBoundingClientRect(),Hi=Mi.top,ra=Mi.left;gr-=ra,mr-=Hi}var Da=this.mapService.containerToLngLat([gr,mr]);return{x:gr,y:mr,lngLat:Da,type:rn,target:ze.srcEvent}}},{key:"isDoubleTap",value:function(ze,rn,Un){var gr=this,mr=new Date().getTime(),Jr="click";mr-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-ze)<10&&Math.abs(this.lastClickXY[1]-rn)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),Jr="dblclick",this.emit($a.a.Hover,{x:ze,y:rn,lngLat:Un,type:Jr})):(this.lastClickTime=mr,this.lastClickXY=[ze,rn],this.clickTimer=setTimeout(function(){Jr="click",gr.emit($a.a.Hover,{x:ze,y:rn,lngLat:Un,type:Jr})},400))}}]),Vt}(T.a),nu),Js=dn()(Ro.prototype,"mapService",[ss],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ko=dn()(Ro.prototype,"logger",[Pa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ro))||Bo),be=L("yXPU"),sn=L.n(be),Vn=L("o0o1"),er=L.n(Vn),kn=L("o+pz"),Xr,vi,Si,ji,Ji,za,va,so,Ia,io,uo,ka;function vo(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function Vo(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?vo(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):vo(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}var Do=(Xr=Object(e.injectable)(),vi=Object(e.inject)(s.a.IRendererService),Si=Object(e.inject)(s.a.IGlobalConfigService),ji=Object(e.inject)(s.a.IInteractionService),Ji=Object(e.inject)(s.a.ILayerService),Xr(za=(va=(ka=function(){function pe(){var me=this;n()(this,pe),We()(this,"rendererService",so,this),We()(this,"configService",Ia,this),We()(this,"interactionService",io,this),We()(this,"layerService",uo,this),this.pickingFBO=void 0,this.width=0,this.height=0,this.alreadyInPicking=!1,this.pickBufferScale=1,this.pickFromPickingFBO=function(Vt,Kt){var ze,rn=Kt.x,Un=Kt.y,gr=Kt.lngLat,mr=Kt.type,Jr=Kt.target,Mi=!1,Hi=me.rendererService,ra=Hi.getViewportSize,Da=Hi.readPixels,Ka=Hi.getContainer,Qa=Ka().getBoundingClientRect(),qo=Qa.width,bo=Qa.height;qo*=o.a.DPR,bo*=o.a.DPR;var Ts=Vt.getLayerConfig(),Ys=Ts.enableHighlight,xu=Ts.enableSelect,Zs=rn*o.a.DPR,zs=Un*o.a.DPR;if(Zs>qo-1*o.a.DPR||Zs<0||zs>bo-1*o.a.DPR||zs<0)return!1;var Eo;if(Eo=Da({x:Math.floor(Zs/me.pickBufferScale),y:Math.floor((bo-(Un+1)*o.a.DPR)/me.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:me.pickingFBO}),Eo[0]!==0||Eo[1]!==0||Eo[2]!==0){var Ks=Object(o.k)(Eo),$u=Vt.getSource().getFeatureById(Ks);Ks!==Vt.getCurrentPickId()&&mr==="mousemove"&&(mr="mouseenter");var ys={x:rn,y:Un,type:mr,lngLat:gr,featureId:Ks,feature:$u,target:Jr};$u&&(Mi=!0,Vt.setCurrentPickId(Ks),me.triggerHoverOnLayer(Vt,ys))}else{var Is={x:rn,y:Un,lngLat:gr,type:Vt.getCurrentPickId()!==null&&mr==="mousemove"?"mouseout":"un"+mr,featureId:null,target:Jr,feature:null};me.triggerHoverOnLayer(Vt,Vo(Vo({},Is),{},{type:"unpick"})),me.triggerHoverOnLayer(Vt,Is),Vt.setCurrentPickId(null)}if(Ys&&me.highlightPickedFeature(Vt,Eo),xu&&mr==="click"&&((ze=Eo)===null||ze===void 0?void 0:ze.toString())!==[0,0,0,0].toString()){var $o=Object(o.k)(Eo);Vt.getCurrentSelectedId()===null||$o!==Vt.getCurrentSelectedId()?(me.selectFeature(Vt,Eo),Vt.setCurrentSelectedId($o)):(me.selectFeature(Vt,new Uint8Array([0,0,0,0])),Vt.setCurrentSelectedId(null))}return Mi}}return a()(pe,[{key:"init",value:function(Vt){var Kt=this.rendererService,ze=Kt.createTexture2D,rn=Kt.createFramebuffer,Un=Kt.getViewportSize,gr=Kt.getContainer,mr=gr().getBoundingClientRect(),Jr=mr.width,Mi=mr.height;Jr*=o.a.DPR,Mi*=o.a.DPR,this.pickBufferScale=this.configService.getSceneConfig(Vt).pickBufferScale||1,this.pickingFBO=rn({color:ze({width:Math.round(Jr/this.pickBufferScale),height:Math.round(Mi/this.pickBufferScale),wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.interactionService.on($a.a.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var me=sn()(er.a.mark(function Kt(ze,rn,Un){var gr=this,mr,Jr,Mi,Hi;return er.a.wrap(function(Da){for(;;)switch(Da.prev=Da.next){case 0:mr=this.rendererService,Jr=mr.useFramebuffer,Mi=mr.clear,Hi=mr.getContainer,this.resizePickingFBO(),Jr(this.pickingFBO,function(){Mi({framebuffer:gr.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ze.hooks.beforePickingEncode.call(),ze.renderModels(),ze.hooks.afterPickingEncode.call();var Ka=gr.pickBox(ze,rn);Un(Ka)});case 3:case"end":return Da.stop()}},Kt,this)}));function Vt(Kt,ze,rn){return me.apply(this,arguments)}return Vt}()},{key:"pickBox",value:function(Vt,Kt){var ze=this,rn=Kt.map(function(Is){var $o=Is<0?0:Is;return Math.floor($o*o.a.DPR/ze.pickBufferScale)}),Un=Je()(rn,4),gr=Un[0],mr=Un[1],Jr=Un[2],Mi=Un[3],Hi=this.rendererService,ra=Hi.getViewportSize,Da=Hi.readPixels,Ka=Hi.getContainer,Qa=Ka().getBoundingClientRect(),qo=Qa.width,bo=Qa.height;if(qo*=o.a.DPR,bo*=o.a.DPR,gr>(qo-1)*o.a.DPR/this.pickBufferScale||Jr<0||mr>(bo-1)*o.a.DPR/this.pickBufferScale||Mi<0)return[];var Ts,Ys=Math.min(qo/this.pickBufferScale,Jr)-gr,xu=Math.min(bo/this.pickBufferScale,Mi)-mr;Ts=Da({x:gr,y:Math.floor(bo/this.pickBufferScale-(Mi+1)),width:Ys,height:xu,data:new Uint8Array(Ys*xu*4),framebuffer:this.pickingFBO});for(var Zs=[],zs={},Eo=0;Eo<Ts.length/4;Eo=Eo+1){var Ks=Ts.slice(Eo*4,Eo*4+4),$u=Object(o.k)(Ks);if($u!==-1&&!zs[$u]){var ys=Vt.getSource().getFeatureById($u);Zs.push(ys),zs[$u]=!0}}return Zs}},{key:"pickingAllLayer",value:function(){var me=sn()(er.a.mark(function Kt(ze){return er.a.wrap(function(Un){for(;;)switch(Un.prev=Un.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering)){Un.next=2;break}return Un.abrupt("return");case 2:return this.alreadyInPicking=!0,Un.next=5,this.pickingLayers(ze);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return Un.stop()}},Kt,this)}));function Vt(Kt){return me.apply(this,arguments)}return Vt}()},{key:"resizePickingFBO",value:function(){var Vt=this.rendererService.getContainer,Kt=Vt().getBoundingClientRect(),ze=Kt.width,rn=Kt.height;ze*=o.a.DPR,rn*=o.a.DPR,(this.width!==ze||this.height!==rn)&&(this.pickingFBO.resize({width:Math.round(ze/this.pickBufferScale),height:Math.round(rn/this.pickBufferScale)}),this.width=ze,this.height=rn)}},{key:"pickingLayers",value:function(){var me=sn()(er.a.mark(function Kt(ze){var rn=this,Un,gr,mr,Jr,Mi;return er.a.wrap(function(ra){for(;;)switch(ra.prev=ra.next){case 0:Un=this.rendererService,gr=Un.getViewportSize,mr=Un.useFramebuffer,Jr=Un.clear,Mi=Un.getContainer,this.resizePickingFBO(),mr(this.pickingFBO,function(){var Da=rn.layerService.getLayers();Da.filter(function(Ka){return Ka.needPick(ze.type)}).reverse().some(function(Ka){Jr({framebuffer:rn.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Ka.hooks.beforePickingEncode.call(),Ka.renderModels(),Ka.hooks.afterPickingEncode.call();var Qa=rn.pickFromPickingFBO(Ka,ze);return Qa&&!Ka.getLayerConfig().enablePropagation})});case 3:case"end":return ra.stop()}},Kt,this)}));function Vt(Kt){return me.apply(this,arguments)}return Vt}()},{key:"triggerHoverOnLayer",value:function(Vt,Kt){Vt.emit(Kt.type,Kt)}},{key:"isEventCrash",value:function(Vt){var Kt=!0;return Vt.target.path.map(function(ze){ze.classList&&ze.classList.forEach(function(rn){(rn==="l7-marker"||rn==="l7-popup")&&(Kt=!1)})}),Kt}},{key:"highlightPickedFeature",value:function(Vt,Kt){var ze=Je()(Kt,3),rn=ze[0],Un=ze[1],gr=ze[2];Vt.hooks.beforeHighlight.call([rn,Un,gr])}},{key:"selectFeature",value:function(Vt,Kt){var ze=Je()(Kt,3),rn=ze[0],Un=ze[1],gr=ze[2];Vt.hooks.beforeSelect.call([rn,Un,gr])}}]),pe}(),ka),so=dn()(va.prototype,"rendererService",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ia=dn()(va.prototype,"configService",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),io=dn()(va.prototype,"interactionService",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo=dn()(va.prototype,"layerService",[Ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),va))||za),fs=function(){function pe(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n()(this,pe),this.autoStart=void 0,this.startTime=0,this.oldTime=0,this.running=!1,this.elapsedTime=0,this.autoStart=me}return a()(pe,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var Vt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Kt=(typeof performance=="undefined"?Date:performance).now();Vt=(Kt-this.oldTime)/1e3,this.oldTime=Kt,this.elapsedTime+=Vt}return Vt}}]),pe}(),mo,Ga,us,Xo,Ta,mn,cr,Wr,Di=(mo=Object(e.injectable)(),Ga=Object(e.inject)(s.a.IRendererService),us=Object(e.inject)(s.a.IGlobalConfigService),mo(Xo=(Ta=(Wr=function(){function pe(){n()(this,pe),this.clock=new fs,this.alreadyInRendering=!1,this.layers=[],this.layerRenderID=void 0,this.sceneInited=!1,this.animateInstanceCount=0,We()(this,"renderService",mn,this),We()(this,"configService",cr,this)}return a()(pe,[{key:"add",value:function(Vt){this.sceneInited&&Vt.init(),this.layers.push(Vt)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(Vt){Vt.inited||Vt.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(Vt){return this.layers.find(function(Kt){return Kt.id===Vt})}},{key:"getLayerByName",value:function(Vt){return this.layers.find(function(Kt){return Kt.name===Vt})}},{key:"remove",value:function(Vt){var Kt=this.layers.indexOf(Vt);Kt>-1&&this.layers.splice(Kt,1),Vt.emit("remove",null),Vt.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter(function(Vt){return Vt.inited}).filter(function(Vt){return Vt.isVisible()}).forEach(function(Vt){Vt.hooks.beforeRenderData.call(),Vt.hooks.beforeRender.call(),Vt.render(),Vt.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(Vt,Kt){return Vt.zIndex-Kt.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(Vt){return Vt.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),pe}(),Wr),mn=dn()(Ta.prototype,"renderService",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cr=dn()(Ta.prototype,"configService",[us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ta))||Xo),Ua=L("QILm"),yo=L.n(Ua),lo=L("RIqP"),La=L.n(lo),Va=L("J2iB"),ts=L.n(Va),ls=function(){function pe(me){var Vt=this;n()(this,pe),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:Infinity},this.vertexAttribute=void 0,this.defaultCallback=function(Kt){if(Kt.length===0){var ze;return((ze=Vt.scale)===null||ze===void 0?void 0:ze.defaultValues)||[]}return Kt.map(function(rn,Un){var gr,mr=(gr=Vt.scale)===null||gr===void 0?void 0:gr.scalers[Un].func,Jr=mr(rn);return Jr})},this.setProps(me)}return a()(pe,[{key:"setProps",value:function(Vt){Object.assign(this,Vt)}},{key:"mapping",value:function(Vt){var Kt;if((Kt=this.scale)!==null&&Kt!==void 0&&Kt.callback){var ze,rn=(ze=this.scale)===null||ze===void 0?void 0:ze.callback.apply(ze,La()(Vt));if(!ts()(rn))return[rn]}return this.defaultCallback(Vt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),pe}(),Ki,_u,Fo,hs,$s,ds,vs;function Qs(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function Mu(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?Qs(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Qs(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function ps(pe){return new Promise(function(me){return setTimeout(me,pe)})}var wu=(Ki={},r()(Ki,kn.a.FLOAT,4),r()(Ki,kn.a.UNSIGNED_BYTE,1),r()(Ki,kn.a.UNSIGNED_SHORT,2),Ki),Ds=(_u=Object(e.injectable)(),Fo=Object(e.inject)(s.a.IRendererService),_u(hs=($s=(vs=function(){function pe(){n()(this,pe),this.attributesAndIndices=void 0,We()(this,"rendererService",ds,this),this.attributes=[],this.triangulation=void 0,this.featureLayout={sizePerElement:0,elements:[]}}return a()(pe,[{key:"registerStyleAttribute",value:function(Vt){var Kt=this.getLayerStyleAttribute(Vt.name||"");return Kt?Kt.setProps(Vt):(Kt=new ls(Vt),this.attributes.push(Kt)),Kt}},{key:"updateStyleAttribute",value:function(Vt,Kt,ze){var rn=this.getLayerStyleAttribute(Vt);rn||(rn=this.registerStyleAttribute(Mu(Mu({},Kt),{},{name:Vt})));var Un=Kt.scale;Un&&rn&&(rn.scale=Un,rn.needRescale=!0,rn.needRemapping=!0,rn.needRegenerateVertices=!0,ze&&ze.featureRange&&(rn.featureRange=ze.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(Vt){return this.attributes.find(function(Kt){return Kt.name===Vt})}},{key:"getLayerAttributeScale",value:function(Vt){var Kt,ze=this.getLayerStyleAttribute(Vt),rn=ze==null||(Kt=ze.scale)===null||Kt===void 0?void 0:Kt.scalers;return rn&&rn[0]?rn[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(Vt,Kt){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,rn=arguments.length>3?arguments[3]:void 0,Un=this.attributes.find(function(xu){return xu.name===Vt});if(Un&&Un.descriptor){var gr=Un.descriptor,mr=gr.update,Jr=gr.buffer,Mi=gr.size,Hi=Mi===void 0?0:Mi,ra=wu[Jr.type||kn.a.FLOAT];if(mr){var Da=this.featureLayout,Ka=Da.elements,Qa=Da.sizePerElement,qo=Ka.slice(ze,rn);if(!qo.length)return;var bo=qo[0].offset,Ts=bo*Hi*ra,Ys=qo.map(function(xu,Zs){for(var zs=xu.featureIdx,Eo=xu.vertices,Ks=xu.normals,$u=Eo.length/Qa,ys=[],Is=0;Is<$u;Is++){var $o=Ks?Ks.slice(Is*3,Is*3+3):[];ys.push.apply(ys,La()(mr(Kt[zs],zs,Eo.slice(Is*Qa,Is*Qa+Qa),Zs,$o)))}return ys}).reduce(function(xu,Zs){return xu.push.apply(xu,La()(Zs)),xu},[]);Un.vertexAttribute.updateBuffer({data:Ys,offset:Ts})}}}},{key:"createAttributesAndIndices",value:function(Vt,Kt){var ze=this;this.featureLayout={sizePerElement:0,elements:[]},Kt&&(this.triangulation=Kt);var rn=this.attributes.map(function(bo){return bo.resetDescriptor(),bo.descriptor}),Un=0,gr=[],mr=[],Jr=[],Mi=3;Vt.forEach(function(bo,Ts){var Ys=ze.triangulation(bo),xu=Ys.indices,Zs=Ys.vertices,zs=Ys.normals,Eo=Ys.size;xu.forEach(function(Is){mr.push(Is+Un)}),Mi=Eo;var Ks=Zs.length/Eo;ze.featureLayout.sizePerElement=Mi,ze.featureLayout.elements.push({featureIdx:Ts,vertices:Zs,normals:zs,offset:Un}),Un+=Ks;for(var $u=function($o){var hl=(zs==null?void 0:zs.slice($o*3,$o*3+3))||[],Ic=Zs.slice($o*Eo,$o*Eo+Eo);rn.forEach(function(jc,Kc){if(jc&&jc.update){var tf;(tf=jc.buffer.data).push.apply(tf,La()(jc.update(bo,Ts,Ic,$o,hl)))}})},ys=0;ys<Ks;ys++)$u(ys)});var Hi=this.rendererService,ra=Hi.createAttribute,Da=Hi.createBuffer,Ka=Hi.createElements,Qa={};rn.forEach(function(bo,Ts){if(bo){var Ys=bo.buffer,xu=bo.update,Zs=bo.name,zs=yo()(bo,["buffer","update","name"]),Eo=ra(Mu({buffer:Da(Ys)},zs));Qa[bo.name||""]=Eo,ze.attributes[Ts].vertexAttribute=Eo}});var qo=Ka({data:mr,type:kn.a.UNSIGNED_INT,count:mr.length});return this.attributesAndIndices={attributes:Qa,elements:qo},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var Vt;this.attributes.forEach(function(Kt){Kt.vertexAttribute&&Kt.vertexAttribute.destroy()}),(Vt=this.attributesAndIndices)===null||Vt===void 0||Vt.elements.destroy(),this.attributes=[]}}]),pe}(),vs),ds=dn()($s.prototype,"rendererService",[Fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$s))||hs),Aa=L("U8pU"),lu=L("KQm4"),Pu=L("rePB"),Zu=L("1OyB"),vl=L("vuIU"),Tu=L("5ku3"),Ao=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source",es=Object(Tu.a)();function gs(pe){try{var me=window[pe],Vt="__storage_test__";return me.setItem(Vt,Vt),me.removeItem(Vt),me}catch(Kt){return null}}var po=function(){function pe(me,Vt){var Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";Object(Zu.a)(this,pe),this.storage=gs(Kt),this.id=me,this.config={},Object.assign(this.config,Vt),this._loadConfiguration()}return Object(vl.a)(pe,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(Vt){return this.config={},this.updateConfiguration(Vt)}},{key:"updateConfiguration",value:function(Vt){if(Object.assign(this.config,Vt),this.storage){var Kt=JSON.stringify(this.config);this.storage.setItem(this.id,Kt)}return this}},{key:"_loadConfiguration",value:function(){var Vt={};if(this.storage){var Kt=this.storage.getItem(this.id);Vt=Kt?JSON.parse(Kt):{}}return Object.assign(this.config,Vt),this}}]),pe}();function cu(pe){var me;return pe<10?me="".concat(pe.toFixed(2),"ms"):pe<100?me="".concat(pe.toFixed(1),"ms"):pe<1e3?me="".concat(pe.toFixed(0),"ms"):me="".concat((pe/1e3).toFixed(2),"s"),me}function Oo(pe){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Vt=Math.max(me-pe.length,0);return"".concat(" ".repeat(Vt)).concat(pe)}function ba(pe){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Vt=Math.max(me-pe.length,0);return"".concat(pe).concat(" ".repeat(Vt))}function As(pe){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=1e-16,Kt=me.isInteger,ze=Kt===void 0?!1:Kt;if(Array.isArray(pe)||ArrayBuffer.isView(pe))return qs(pe,me);if(!Number.isFinite(pe))return String(pe);if(Math.abs(pe)<Vt)return ze?"0":"0.";if(ze||Math.abs(pe)>100&&Math.abs(pe)<1e4)return pe.toFixed(0);var rn=pe.toPrecision(2),Un=rn.indexOf(".0");return Un===rn.length-2?rn.slice(0,-1):rn}function qs(pe,me){for(var Vt=me.maxElts,Kt=Vt===void 0?16:Vt,ze=me.size,rn=ze===void 0?1:ze,Un="[",gr=0;gr<pe.length&&gr<Kt;++gr)gr>0&&(Un+=",".concat(gr%rn==0?" ":"")),Un+=As(pe[gr],me);var mr=pe.length>Kt?"...":"]";return"".concat(Un).concat(mr)}function js(pe,me,Vt){var Kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,ze=pe.src.replace(/\(/g,"%28").replace(/\)/g,"%29");pe.width>Kt&&(Vt=Math.min(Vt,Kt/pe.width));var rn=pe.width*Vt,Un=pe.height*Vt,gr=["font-size:1px;","padding:".concat(Math.floor(Un/2),"px ").concat(Math.floor(rn/2),"px;"),"line-height:".concat(Un,"px;"),"background:url(".concat(ze,");"),"background-size:".concat(rn,"px ").concat(Un,"px;"),"color:transparent;"].join("");return["".concat(me," %c+"),gr]}var ms={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function Au(pe){return typeof pe=="string"?ms[pe.toUpperCase()]||ms.WHITE:pe}function ks(pe,me,Vt){return!es&&typeof pe=="string"&&(me&&(me=Au(me),pe="[".concat(me,"m").concat(pe,"[39m")),Vt&&(me=Au(Vt),pe="[".concat(Vt+10,"m").concat(pe,"[49m"))),pe}function Ya(pe){if(typeof Symbol=="undefined"||pe[Symbol.iterator]==null){if(Array.isArray(pe)||(pe=nl(pe))){var me=0,Vt=function(){};return{s:Vt,n:function(){return me>=pe.length?{done:!0}:{done:!1,value:pe[me++]}},e:function(mr){throw mr},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kt,ze=!0,rn=!1,Un;return{s:function(){Kt=pe[Symbol.iterator]()},n:function(){var mr=Kt.next();return ze=mr.done,mr},e:function(mr){rn=!0,Un=mr},f:function(){try{!ze&&Kt.return!=null&&Kt.return()}finally{if(rn)throw Un}}}}function nl(pe,me){if(!!pe){if(typeof pe=="string")return Zl(pe,me);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(Vt);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return Zl(pe,me)}}function Zl(pe,me){(me==null||me>pe.length)&&(me=pe.length);for(var Vt=0,Kt=new Array(me);Vt<me;Vt++)Kt[Vt]=pe[Vt];return Kt}function Al(pe){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],Vt=Object.getPrototypeOf(pe),Kt=Object.getOwnPropertyNames(Vt),ze=Ya(Kt),rn;try{var Un=function(){var mr=rn.value;typeof pe[mr]=="function"&&(me.find(function(Jr){return mr===Jr})||(pe[mr]=pe[mr].bind(pe)))};for(ze.s();!(rn=ze.n()).done;)Un()}catch(gr){ze.e(gr)}finally{ze.f()}}function pl(pe,me){if(!pe)throw new Error(me||"Assertion failed")}var Ku=L("K9nA");function Cu(){var pe;if(es&&Ku.b.performance)pe=Ku.b.performance.now();else if(Ku.a.hrtime){var me=Ku.a.hrtime();pe=me[0]*1e3+me[1]/1e6}else pe=Date.now();return pe}var Gs={debug:es&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Cl={enabled:!0,level:0};function ns(){}var Wa={},fu={once:!0};function Xu(pe){for(var me in pe)for(var Vt in pe[me])return Vt||"untitled";return"empty"}var Ll=function(){function pe(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Vt=me.id;Object(Zu.a)(this,pe),this.id=Vt,this.VERSION=Ao,this._startTs=Cu(),this._deltaTs=Cu(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new po("__probe-".concat(this.id,"__"),Cl),this.userData={},this.timeStamp("".concat(this.id," started")),Al(this),Object.seal(this)}return Object(vl.a)(pe,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((Cu()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((Cu()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:Vt}),this}},{key:"setLevel",value:function(Vt){return this._storage.updateConfiguration({level:Vt}),this}},{key:"assert",value:function(Vt,Kt){pl(Vt,Kt)}},{key:"warn",value:function(Vt){return this._getLogFunction(0,Vt,Gs.warn,arguments,fu)}},{key:"error",value:function(Vt){return this._getLogFunction(0,Vt,Gs.error,arguments)}},{key:"deprecated",value:function(Vt,Kt){return this.warn("`".concat(Vt,"` is deprecated and will be removed in a later version. Use `").concat(Kt,"` instead"))}},{key:"removed",value:function(Vt,Kt){return this.error("`".concat(Vt,"` has been removed. Use `").concat(Kt,"` instead"))}},{key:"probe",value:function(Vt,Kt){return this._getLogFunction(Vt,Kt,Gs.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(Vt,Kt){return this._getLogFunction(Vt,Kt,Gs.debug,arguments)}},{key:"info",value:function(Vt,Kt){return this._getLogFunction(Vt,Kt,console.info,arguments)}},{key:"once",value:function(Vt,Kt){return this._getLogFunction(Vt,Kt,Gs.debug||Gs.info,arguments,fu)}},{key:"table",value:function(Vt,Kt,ze){return Kt?this._getLogFunction(Vt,Kt,console.table||ns,ze&&[ze],{tag:Xu(Kt)}):ns}},{key:"image",value:function(Vt){var Kt=Vt.logLevel,ze=Vt.priority,rn=Vt.image,Un=Vt.message,gr=Un===void 0?"":Un,mr=Vt.scale,Jr=mr===void 0?1:mr;return this._shouldLog(Kt||ze)?es?Ss({image:rn,message:gr,scale:Jr}):hu({image:rn,message:gr,scale:Jr}):ns}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(Vt){return this._storage.config[Vt]}},{key:"set",value:function(Vt,Kt){this._storage.updateConfiguration(Object(Pu.a)({},Vt,Kt))}},{key:"time",value:function(Vt,Kt){return this._getLogFunction(Vt,Kt,console.time?console.time:console.info)}},{key:"timeEnd",value:function(Vt,Kt){return this._getLogFunction(Vt,Kt,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(Vt,Kt){return this._getLogFunction(Vt,Kt,console.timeStamp||ns)}},{key:"group",value:function(Vt,Kt){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};ze=Vs({logLevel:Vt,message:Kt,opts:ze});var rn=ze,Un=rn.collapsed;return ze.method=(Un?console.groupCollapsed:console.group)||console.info,this._getLogFunction(ze)}},{key:"groupCollapsed",value:function(Vt,Kt){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(Vt,Kt,Object.assign({},ze,{collapsed:!0}))}},{key:"groupEnd",value:function(Vt){return this._getLogFunction(Vt,"",console.groupEnd||ns)}},{key:"withGroup",value:function(Vt,Kt,ze){this.group(Vt,Kt)();try{ze()}finally{this.groupEnd(Vt)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(Vt){return this.isEnabled()&&this.getLevel()>=Uu(Vt)}},{key:"_getLogFunction",value:function(Vt,Kt,ze){var rn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],Un=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(Vt)){var gr;Un=Vs({logLevel:Vt,message:Kt,args:rn,opts:Un}),ze=ze||Un.method,pl(ze),Un.total=this.getTotal(),Un.delta=this.getDelta(),this._deltaTs=Cu();var mr=Un.tag||Un.message;if(Un.once)if(!Wa[mr])Wa[mr]=Cu();else return ns;return Kt=rl(this.id,Un.message,Un),(gr=ze).bind.apply(gr,[console,Kt].concat(Object(lu.a)(Un.args)))}return ns}},{key:"level",set:function(Vt){this.setLevel(Vt)},get:function(){return this.getLevel()}},{key:"priority",set:function(Vt){this.level=Vt},get:function(){return this.level}}]),pe}();Ll.VERSION=Ao;function Uu(pe){if(!pe)return 0;var me;switch(Object(Aa.a)(pe)){case"number":me=pe;break;case"object":me=pe.logLevel||pe.priority||0;break;default:return 0}return pl(Number.isFinite(me)&&me>=0),me}function Vs(pe){var me=pe.logLevel,Vt=pe.message;pe.logLevel=Uu(me);for(var Kt=pe.args?Array.from(pe.args):[];Kt.length&&Kt.shift()!==Vt;);switch(pe.args=Kt,Object(Aa.a)(me)){case"string":case"function":Vt!==void 0&&Kt.unshift(Vt),pe.message=me;break;case"object":Object.assign(pe,me);break;default:}typeof pe.message=="function"&&(pe.message=pe.message());var ze=Object(Aa.a)(pe.message);return pl(ze==="string"||ze==="object"),Object.assign(pe,pe.opts)}function rl(pe,me,Vt){if(typeof me=="string"){var Kt=Vt.time?Oo(cu(Vt.total)):"";me=Vt.time?"".concat(pe,": ").concat(Kt,"  ").concat(me):"".concat(pe,": ").concat(me),me=ks(me,Vt.color,Vt.background)}return me}function hu(pe){var me=pe.image,Vt=pe.message,Kt=Vt===void 0?"":Vt,ze=pe.scale,rn=ze===void 0?1:ze,Un=null;try{Un=L(3)}catch(gr){}return Un?function(){return Un(me,{fit:"box",width:"".concat(Math.round(80*rn),"%")}).then(function(gr){return console.log(gr)})}:ns}function Ss(pe){var me=pe.image,Vt=pe.message,Kt=Vt===void 0?"":Vt,ze=pe.scale,rn=ze===void 0?1:ze;if(typeof me=="string"){var Un=new Image;return Un.onload=function(){var Mi,Hi=js(Un,Kt,rn);(Mi=console).log.apply(Mi,Object(lu.a)(Hi))},Un.src=me,ns}var gr=me.nodeName||"";if(gr.toLowerCase()==="img"){var mr;return(mr=console).log.apply(mr,Object(lu.a)(js(me,Kt,rn))),ns}if(gr.toLowerCase()==="canvas"){var Jr=new Image;return Jr.onload=function(){var Mi;return(Mi=console).log.apply(Mi,Object(lu.a)(js(Jr,Kt,rn)))},Jr.src=me.toDataURL(),ns}return ns}var Ws,gl,Iu=new Ll({id:"L7"}).enable(!1);Iu.priority=5;var Lu=(Ws=Object(e.injectable)(),Ws(gl=function(){function pe(){n()(this,pe)}return a()(pe,[{key:"error",value:function(Vt){Iu.error(Vt)()}},{key:"warn",value:function(Vt){Iu.probe(1,Vt)()}},{key:"info",value:function(Vt){Iu.info(3,Vt)()}},{key:"debug",value:function(Vt){Iu.probe(4,Vt)()}}]),pe}())||gl),du=L("xp6e"),vu=L("iegG"),pu=L.n(vu),Ol=window.document.documentElement.style,rc=0;function ql(pe){var me=pe;if(typeof pe=="string"&&(me=document.getElementById(pe)),me){var Vt=document.createElement("div");return Vt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Vt.id="l7-scene-".concat(rc++),Vt.classList.add("l7-scene"),me.appendChild(Vt),Vt}return null}var gu,Nl,tc,Ou,ml,wl,Bs,ao,yl,il,Hs,Ra,xo,ru,xl,al,ku,zl,cs,bl,mu,Fs,Wo,_s,iu,Ho,Ni,Ns,El,ol,No,Co,tu,mi,Ru,Du;function ju(pe){var me=Cs();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function Cs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Ae=(gu=Object(e.injectable)(),Nl=Object(e.inject)(s.a.SceneID),tc=Object(e.inject)(s.a.IIconService),Ou=Object(e.inject)(s.a.IFontService),ml=Object(e.inject)(s.a.IControlService),wl=Object(e.inject)(s.a.ILogService),Bs=Object(e.inject)(s.a.IGlobalConfigService),ao=Object(e.inject)(s.a.IMapService),yl=Object(e.inject)(s.a.ICoordinateSystemService),il=Object(e.inject)(s.a.IRendererService),Hs=Object(e.inject)(s.a.ILayerService),Ra=Object(e.inject)(s.a.ICameraService),xo=Object(e.inject)(s.a.IInteractionService),ru=Object(e.inject)(s.a.IPickingService),xl=Object(e.inject)(s.a.IShaderModuleService),al=Object(e.inject)(s.a.IMarkerService),ku=Object(e.inject)(s.a.IPopupService),gu(zl=(cs=(Du=function(pe){et()(Vt,pe);var me=ju(Vt);function Vt(){var Kt;return n()(this,Vt),Kt=me.call(this),Kt.destroyed=!1,Kt.loaded=!1,Kt.loadFont=!1,Kt.fontFamily="",We()(Kt,"id",bl,ha()(Kt)),We()(Kt,"iconService",mu,ha()(Kt)),We()(Kt,"fontService",Fs,ha()(Kt)),We()(Kt,"controlService",Wo,ha()(Kt)),We()(Kt,"logger",_s,ha()(Kt)),We()(Kt,"configService",iu,ha()(Kt)),We()(Kt,"map",Ho,ha()(Kt)),We()(Kt,"coordinateSystemService",Ni,ha()(Kt)),We()(Kt,"rendererService",Ns,ha()(Kt)),We()(Kt,"layerService",El,ha()(Kt)),We()(Kt,"cameraService",ol,ha()(Kt)),We()(Kt,"interactionService",No,ha()(Kt)),We()(Kt,"pickingService",Co,ha()(Kt)),We()(Kt,"shaderModuleService",tu,ha()(Kt)),We()(Kt,"markerService",mi,ha()(Kt)),We()(Kt,"popupService",Ru,ha()(Kt)),Kt.inited=!1,Kt.initPromise=void 0,Kt.rendering=!1,Kt.$container=void 0,Kt.canvas=void 0,Kt.markerContainer=void 0,Kt.hooks=void 0,Kt.handleWindowResized=function(){Kt.emit("resize"),Kt.$container&&(Kt.initContainer(),o.a.triggerResize(),Kt.coordinateSystemService.needRefresh=!0,Kt.render())},Kt.handleMapCameraChanged=function(ze){Kt.cameraService.update(ze),Kt.render()},Kt.hooks={init:new du.a},Kt}return a()(Vt,[{key:"init",value:function(ze){var rn=this;this.configService.setSceneConfig(this.id,ze),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",sn()(er.a.mark(function Un(){return er.a.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:return mr.next=2,new Promise(function(Jr){rn.map.onCameraChanged(function(Mi){rn.cameraService.init(),rn.cameraService.update(Mi),rn.map.version!=="GAODE2.x"&&Jr()}),rn.map.version!=="GAODE2.x"?rn.map.init():Jr()});case 2:if(!(rn.map.version==="GAODE2.x"&&rn.map.initViewPort)){mr.next=6;break}return mr.next=5,rn.map.init();case 5:rn.map.initViewPort();case 6:rn.map.onCameraChanged(rn.handleMapCameraChanged),rn.map.addMarkerContainer(),rn.markerService.addMarkers(),rn.markerService.addMarkerLayers(),rn.popupService.initPopup(),rn.interactionService.init(),rn.interactionService.on($a.a.Drag,rn.addSceneEvent.bind(rn)),rn.logger.debug("map ".concat(rn.id," loaded"));case 14:case"end":return mr.stop()}},Un)}))),this.hooks.init.tapPromise("initRenderer",sn()(er.a.mark(function Un(){var gr;return er.a.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(gr=ql(rn.configService.getSceneConfig(rn.id).id||""),rn.$container=gr,!gr){Jr.next=11;break}return rn.canvas=o.a.create("canvas","",gr),rn.setCanvas(),Jr.next=7,rn.rendererService.init(rn.canvas,rn.configService.getSceneConfig(rn.id));case 7:pu()(rn.$container,rn.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(rn.handleWindowResized),Jr.next=12;break;case 11:rn.logger.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:rn.pickingService.init(rn.id),rn.logger.debug("scene ".concat(rn.id," renderer loaded"));case 14:case"end":return Jr.stop()}},Un)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(ze){this.logger.debug("add layer ".concat(ze.name," to scene ").concat(this.id)),this.layerService.add(ze),this.render()}},{key:"render",value:function(){var Kt=sn()(er.a.mark(function rn(){return er.a.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(!(this.rendering||this.destroyed)){gr.next=2;break}return gr.abrupt("return");case 2:if(this.rendering=!0,this.inited){gr.next=16;break}return gr.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!(this.loadFont&&document.fonts)){gr.next=10;break}return gr.next=10,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 10:this.logger.info(" render inited"),this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 16:this.layerService.renderLayers(),this.logger.debug("scene ".concat(this.id," render")),this.rendering=!1;case 19:case"end":return gr.stop()}},rn,this)}));function ze(){return Kt.apply(this,arguments)}return ze}()},{key:"addFontFace",value:function(ze,rn){this.fontFamily=ze;var Un=document.createElement("style");Un.type="text/css",Un.innerText=`
        @font-face{
            font-family: '`.concat(ze,`';
            src: url('`).concat(rn,`') format('woff2'),
            url('`).concat(rn,`') format('woff'),
            url('`).concat(rn,`') format('truetype');
        }`),document.getElementsByTagName("head")[0].appendChild(Un),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(ze){var rn,Un=(rn=this.$container)===null||rn===void 0?void 0:rn.getElementsByTagName("canvas")[0];this.render();var gr=ze==="jpg"?Un==null?void 0:Un.toDataURL("image/jpeg"):Un==null?void 0:Un.toDataURL("image/png");return gr}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var ze=this.$container.parentElement;ze!==null&&(this.markerContainer=o.a.create("div","l7-marker-container",ze))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){if(!this.inited){this.destroyed=!0;return}this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,Object(vu.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}},{key:"initContainer",value:function(){var ze,rn,Un=o.a.DPR,gr=((ze=this.$container)===null||ze===void 0?void 0:ze.clientWidth)||400,mr=((rn=this.$container)===null||rn===void 0?void 0:rn.clientHeight)||300,Jr=this.canvas;Jr&&(Jr.width=gr*Un,Jr.height=mr*Un,Jr.style.width="".concat(gr,"px"),Jr.style.height="".concat(mr,"px")),this.rendererService.viewport({x:0,y:0,width:Un*gr,height:Un*mr})}},{key:"setCanvas",value:function(){var ze,rn,Un=o.a.DPR,gr=((ze=this.$container)===null||ze===void 0?void 0:ze.clientWidth)||400,mr=((rn=this.$container)===null||rn===void 0?void 0:rn.clientHeight)||300,Jr=this.canvas;Jr.width=gr*Un,Jr.height=mr*Un,Jr.style.width="".concat(gr,"px"),Jr.style.height="".concat(mr,"px")}},{key:"addSceneEvent",value:function(ze){this.emit(ze.type,ze)}}]),Vt}(E.EventEmitter),Du),bl=dn()(cs.prototype,"id",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mu=dn()(cs.prototype,"iconService",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fs=dn()(cs.prototype,"fontService",[Ou],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wo=dn()(cs.prototype,"controlService",[ml],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_s=dn()(cs.prototype,"logger",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iu=dn()(cs.prototype,"configService",[Bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ho=dn()(cs.prototype,"map",[ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ni=dn()(cs.prototype,"coordinateSystemService",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ns=dn()(cs.prototype,"rendererService",[il],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),El=dn()(cs.prototype,"layerService",[Hs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ol=dn()(cs.prototype,"cameraService",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),No=dn()(cs.prototype,"interactionService",[xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Co=dn()(cs.prototype,"pickingService",[ru],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tu=dn()(cs.prototype,"shaderModuleService",[xl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mi=dn()(cs.prototype,"markerService",[al],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ru=dn()(cs.prototype,"popupService",[ku],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cs))||zl),_e=L("7tbW"),pn=L.n(_e);function an(pe){var me=0;switch(pe){case"vec2":case"ivec2":me=2;break;case"vec3":case"ivec3":me=3;break;case"vec4":case"ivec4":case"mat2":me=4;break;case"mat3":me=9;break;case"mat4":me=16;break;default:}return me}var In=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function hr(pe){var me={};return pe=pe.replace(In,function(Vt,Kt,ze){var rn=ze.split(":"),Un=rn[0].trim(),gr="";switch(rn.length>1&&(gr=rn[1].trim()),Kt){case"bool":gr=gr==="true";break;case"float":case"int":gr=Number(gr);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":gr?gr=gr.replace("[","").replace("]","").split(",").reduce(function(mr,Jr){return mr.push(Number(Jr.trim())),mr},[]):gr=new Array(an(Kt)).fill(0);break;default:}return me[Un]=gr,"uniform ".concat(Kt," ").concat(Un,`;
`)}),{content:pe,uniforms:me}}var Lr,Zr,ei;function Ur(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function hi(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?Ur(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Ur(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}var br="#define PI 3.14159265359",Xt=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,ee=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Oe=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,Ee=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,jt=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,zt=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,se=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0
#define COORDINATE_SYSTEM_P20_OFFSET 6.0
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,ie=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,he=/precision\s+(high|low|medium)p\s+float/,Be=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Ze=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,on=(Lr=Object(e.injectable)(),Lr(Zr=(ei=function(){function pe(){n()(this,pe),this.moduleCache={},this.rawContentCache={}}return a()(pe,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:br,fs:br}),this.registerModule("decode",{vs:Xt,fs:""}),this.registerModule("projection",{vs:se,fs:""}),this.registerModule("project",{vs:zt,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:ie}),this.registerModule("lighting",{vs:Oe,fs:""}),this.registerModule("light",{vs:ee,fs:""}),this.registerModule("picking",{vs:jt,fs:Ee})}},{key:"registerModule",value:function(Vt,Kt){if(!this.rawContentCache[Vt]){var ze=Kt.vs,rn=Kt.fs,Un=Kt.uniforms,gr=hr(ze),mr=gr.content,Jr=gr.uniforms,Mi=hr(rn),Hi=Mi.content,ra=Mi.uniforms;this.rawContentCache[Vt]={fs:Hi,uniforms:hi(hi(hi({},Jr),ra),Un),vs:mr}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(Vt){var Kt=this;if(this.moduleCache[Vt])return this.moduleCache[Vt];var ze=this.rawContentCache[Vt].vs,rn=this.rawContentCache[Vt].fs,Un=this.processModule(ze,[],"vs"),gr=Un.content,mr=Un.includeList,Jr=this.processModule(rn,[],"fs"),Mi=Jr.content,Hi=Jr.includeList,ra=Mi,Da=pn()(mr.concat(Hi).concat(Vt)).reduce(function(Ka,Qa){return hi(hi({},Ka),Kt.rawContentCache[Qa].uniforms)},{});return he.test(Mi)||(ra=Be+Mi),this.moduleCache[Vt]={fs:ra.trim(),uniforms:Da,vs:gr.trim()},this.moduleCache[Vt]}},{key:"processModule",value:function(Vt,Kt,ze){var rn=this,Un=Vt.replace(Ze,function(gr,mr){var Jr=mr.split(" "),Mi=Jr[0].replace(/"/g,"");if(Kt.indexOf(Mi)>-1)return"";var Hi=rn.rawContentCache[Mi][ze];Kt.push(Mi);var ra=rn.processModule(Hi,Kt,ze),Da=ra.content;return Da});return{content:Un,includeList:Kt}}}]),pe}(),ei))||Zr),$e=L("iWIM"),gn=L.n($e),vn=L("bPkA"),Xn,Wn,Jn,Hn,fr,xr,Vr=(Xn=Object(e.injectable)(),Wn=Object(e.inject)(s.a.IShaderModuleService),Xn(Jn=(Hn=(xr=function(){function pe(){n()(this,pe),We()(this,"shaderModuleService",fr,this),this.rendererService=void 0,this.cameraService=void 0,this.mapService=void 0,this.interactionService=void 0,this.layerService=void 0,this.config=void 0}return a()(pe,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return vn.a.Normal}},{key:"init",value:function(Vt,Kt){this.config=Kt,this.rendererService=Vt.getContainer().get(s.a.IRendererService),this.cameraService=Vt.getContainer().get(s.a.ICameraService),this.mapService=Vt.getContainer().get(s.a.IMapService),this.interactionService=Vt.getContainer().get(s.a.IInteractionService),this.layerService=Vt.getContainer().get(s.a.ILayerService)}},{key:"render",value:function(Vt){}}]),pe}(),xr),fr=dn()(Hn.prototype,"shaderModuleService",[Wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn))||Jn),gi,Fr;function ai(pe){var me=yi();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function yi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Ui=(gi=Object(e.injectable)(),gi(Fr=function(pe){et()(Vt,pe);var me=ai(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(ze,rn){gn()(rt()(Vt.prototype),"init",this).call(this,ze,rn)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),Vt}(Vr))||Fr),Pi,pa,ta,oa,si,ma;function to(pe,me){var Vt;if(typeof Symbol=="undefined"||pe[Symbol.iterator]==null){if(Array.isArray(pe)||(Vt=Ha(pe))||me&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Kt=0,ze=function(){};return{s:ze,n:function(){return Kt>=pe.length?{done:!0}:{done:!1,value:pe[Kt++]}},e:function(Jr){throw Jr},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rn=!0,Un=!1,gr;return{s:function(){Vt=pe[Symbol.iterator]()},n:function(){var Jr=Vt.next();return rn=Jr.done,Jr},e:function(Jr){Un=!0,gr=Jr},f:function(){try{!rn&&Vt.return!=null&&Vt.return()}finally{if(Un)throw gr}}}}function Ha(pe,me){if(!!pe){if(typeof pe=="string")return _i(pe,me);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return _i(pe,me)}}function _i(pe,me){(me==null||me>pe.length)&&(me=pe.length);for(var Vt=0,Kt=new Array(me);Vt<me;Vt++)Kt[Vt]=pe[Vt];return Kt}var Fa=(Pi=Object(e.injectable)(),pa=Object(e.inject)(s.a.IPostProcessor),Pi(ta=(oa=(ma=function(){function pe(){n()(this,pe),this.passes=[],We()(this,"postProcessor",si,this),this.layer=void 0,this.renderFlag=void 0,this.width=0,this.height=0}return a()(pe,[{key:"setLayer",value:function(Vt){this.layer=Vt}},{key:"setRenderFlag",value:function(Vt){this.renderFlag=Vt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var me=sn()(er.a.mark(function Kt(){var ze,rn,Un;return er.a.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:ze=to(this.passes),mr.prev=1,ze.s();case 3:if((rn=ze.n()).done){mr.next=9;break}return Un=rn.value,mr.next=7,Un.render(this.layer);case 7:mr.next=3;break;case 9:mr.next=14;break;case 11:mr.prev=11,mr.t0=mr.catch(1),ze.e(mr.t0);case 14:return mr.prev=14,ze.f(),mr.finish(14);case 17:this.layer.renderModels();case 18:case"end":return mr.stop()}},Kt,this,[[1,11,14,17]])}));function Vt(){return me.apply(this,arguments)}return Vt}()},{key:"resize",value:function(Vt,Kt){(this.width!==Vt||this.height!==Kt)&&(this.width=Vt,this.height=Kt)}},{key:"add",value:function(Vt,Kt){Vt.getType()===vn.a.PostProcessing?this.postProcessor.add(Vt,this.layer,Kt):(Vt.init(this.layer,Kt),this.passes.push(Vt))}},{key:"insert",value:function(Vt,Kt,ze){Vt.init(this.layer,Kt),this.passes.splice(ze,0,Vt)}},{key:"destroy",value:function(){this.passes.length=0}}]),pe}(),ma),si=dn()(oa.prototype,"postProcessor",[pa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oa))||ta),Za,Os,Ms,ws,au,j;function I(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function w(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?I(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):I(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function B(pe){var me=D();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var G=(Za=Object(e.injectable)(),Os=Object(e.inject)(s.a.ILogService),Za(Ms=(ws=(j=function(pe){et()(Vt,pe);var me=B(Vt);function Vt(){var Kt;n()(this,Vt);for(var ze=arguments.length,rn=new Array(ze),Un=0;Un<ze;Un++)rn[Un]=arguments[Un];return Kt=me.call.apply(me,[this].concat(rn)),We()(Kt,"logger",au,ha()(Kt)),Kt.pickingFBO=void 0,Kt.layer=void 0,Kt.width=0,Kt.height=0,Kt.alreadyInRendering=!1,Kt.pickFromPickingFBO=function(gr){var mr=gr.x,Jr=gr.y,Mi=gr.lngLat,Hi=gr.type;if(!(!Kt.layer.isVisible()||!Kt.layer.needPick(Hi))){var ra=Kt.rendererService,Da=ra.getViewportSize,Ka=ra.readPixels,Qa=ra.useFramebuffer,qo=Da(),bo=qo.width,Ts=qo.height,Ys=Kt.layer.getLayerConfig(),xu=Ys.enableHighlight,Zs=Ys.enableSelect,zs=mr*o.a.DPR,Eo=Jr*o.a.DPR;if(!(zs>bo||zs<0||Eo>Ts||Eo<0)){var Ks;Qa(Kt.pickingFBO,function(){var $u;if(Ks=Ka({x:Math.round(zs),y:Math.round(Ts-(Jr+1)*o.a.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Kt.pickingFBO}),Ks[0]!==0||Ks[1]!==0||Ks[2]!==0){Kt.logger.debug("picked");var ys=Object(o.k)(Ks),Is=Kt.layer.getSource().getFeatureById(ys),$o={x:mr,y:Jr,type:Hi,lngLat:Mi,featureId:ys,feature:Is};Is&&(Kt.layer.setCurrentPickId(ys),Kt.triggerHoverOnLayer($o))}else{var hl={x:mr,y:Jr,lngLat:Mi,type:Kt.layer.getCurrentPickId()===null?"un"+Hi:"mouseout",featureId:null,feature:null};Kt.triggerHoverOnLayer(w(w({},hl),{},{type:"unpick"})),Kt.triggerHoverOnLayer(hl),Kt.layer.setCurrentPickId(null)}xu&&Kt.highlightPickedFeature(Ks),Zs&&Hi==="click"&&(($u=Ks)===null||$u===void 0?void 0:$u.toString())!==[0,0,0,0].toString()&&Kt.selectFeature(Ks)})}}},Kt}return a()(Vt,[{key:"getType",value:function(){return vn.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(ze,rn){gn()(rt()(Vt.prototype),"init",this).call(this,ze,rn),this.layer=ze;var Un=this.rendererService,gr=Un.createTexture2D,mr=Un.createFramebuffer,Jr=Un.getViewportSize,Mi=Jr(),Hi=Mi.width,ra=Mi.height;this.pickingFBO=mr({color:gr({width:Hi,height:ra,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.interactionService.on($a.a.Hover,this.pickFromPickingFBO),this.interactionService.on($a.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on($a.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(ze){var rn=this;if(!this.alreadyInRendering){var Un=this.rendererService,gr=Un.getViewportSize,mr=Un.useFramebuffer,Jr=Un.clear,Mi=gr(),Hi=Mi.width,ra=Mi.height;this.alreadyInRendering=!0,(this.width!==Hi||this.height!==ra)&&(this.pickingFBO.resize({width:Hi,height:ra}),this.width=Hi,this.height=ra),mr(this.pickingFBO,function(){Jr({framebuffer:rn.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Da=rn.layer.multiPassRenderer.getRenderFlag();rn.layer.multiPassRenderer.setRenderFlag(!1),ze.hooks.beforePickingEncode.call(),ze.render(),ze.hooks.afterPickingEncode.call(),rn.layer.multiPassRenderer.setRenderFlag(Da),rn.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(ze){this.layer.emit(ze.type,ze)}},{key:"highlightPickedFeature",value:function(ze){var rn=Je()(ze,3),Un=rn[0],gr=rn[1],mr=rn[2];this.layer.hooks.beforeHighlight.call([Un,gr,mr]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(ze){var rn=Je()(ze,3),Un=rn[0],gr=rn[1],mr=rn[2];this.layer.hooks.beforeSelect.call([Un,gr,mr]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(ze){var rn=ze.featureId,Un=Object(o.l)(rn);this.selectFeature(new Uint8Array(Un))}},{key:"highlightFeatureHandle",value:function(ze){var rn=ze.featureId,Un=Object(o.l)(rn);this.highlightPickedFeature(new Uint8Array(Un))}}]),Vt}(Vr),j),au=dn()(ws.prototype,"logger",[Os],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ws))||Ms),Q=L("+em5"),ut,wt;function It(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function kt(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?It(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):It(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function Yt(pe){var me=qt();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function qt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var ce=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,ye=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Le=(ut=Object(e.injectable)(),ut(wt=function(pe){et()(Vt,pe);var me=Yt(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ye,fs:ce});var ze=this.shaderModuleService.getModule("blur-pass"),rn=ze.vs,Un=ze.fs,gr=ze.uniforms,mr=this.rendererService.getViewportSize(),Jr=mr.width,Mi=mr.height;return{vs:rn,fs:Un,uniforms:kt(kt({},gr),{},{u_ViewportSize:[Jr,Mi]})}}},{key:"convertOptionsToUniforms",value:function(ze){var rn={};return ts()(ze.blurRadius)||(rn.u_BlurDir=[ze.blurRadius,0]),rn}}]),Vt}(Q.a))||wt),Ce,ke;function nn(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function ln(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?nn(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):nn(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function Qn(pe){var me=Yn();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function Yn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var dr=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Mr=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,$r=(Ce=Object(e.injectable)(),Ce(ke=function(pe){et()(Vt,pe);var me=Qn(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Mr,fs:dr});var ze=this.shaderModuleService.getModule("blur-pass"),rn=ze.vs,Un=ze.fs,gr=ze.uniforms,mr=this.rendererService.getViewportSize(),Jr=mr.width,Mi=mr.height;return{vs:rn,fs:Un,uniforms:ln(ln({},gr),{},{u_ViewportSize:[Jr,Mi]})}}},{key:"convertOptionsToUniforms",value:function(ze){var rn={};return ts()(ze.blurRadius)||(rn.u_BlurDir=[0,ze.blurRadius]),rn}}]),Vt}(Q.a))||ke),Kr,bi;function Oi(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function zi(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?Oi(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Oi(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function Vi(pe){var me=_a();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function _a(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var ya=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,wi=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,$i=(Kr=Object(e.injectable)(),Kr(bi=function(pe){et()(Vt,pe);var me=Vi(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:wi,fs:ya});var ze=this.shaderModuleService.getModule("colorhalftone-pass"),rn=ze.vs,Un=ze.fs,gr=ze.uniforms,mr=this.rendererService.getViewportSize(),Jr=mr.width,Mi=mr.height;return{vs:rn,fs:Un,uniforms:zi(zi({},gr),{},{u_ViewportSize:[Jr,Mi]})}}}]),Vt}(Q.a))||bi),sa,Bi;function ca(pe){var me=qi();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function qi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Ca=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Na=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,rs=(sa=Object(e.injectable)(),sa(Bi=function(pe){et()(Vt,pe);var me=ca(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Na,fs:Ca}),this.shaderModuleService.getModule("copy-pass")}}]),Vt}(Q.a))||Bi),Jo,is;function jo(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function Ps(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?jo(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):jo(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function Rl(pe){var me=sl();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function sl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var lc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,xc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Sl=(Jo=Object(e.injectable)(),Jo(is=function(pe){et()(Vt,pe);var me=Rl(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:xc,fs:lc});var ze=this.shaderModuleService.getModule("hexagonalpixelate-pass"),rn=ze.vs,Un=ze.fs,gr=ze.uniforms,mr=this.rendererService.getViewportSize(),Jr=mr.width,Mi=mr.height;return{vs:rn,fs:Un,uniforms:Ps(Ps({},gr),{},{u_ViewportSize:[Jr,Mi]})}}}]),Vt}(Q.a))||is),_l,Ul;function Lc(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function Kl(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?Lc(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Lc(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function Mc(pe){var me=Cc();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function Cc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var fc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,bc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ic=(_l=Object(e.injectable)(),_l(Ul=function(pe){et()(Vt,pe);var me=Mc(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:bc,fs:fc});var ze=this.shaderModuleService.getModule("ink-pass"),rn=ze.vs,Un=ze.fs,gr=ze.uniforms,mr=this.rendererService.getViewportSize(),Jr=mr.width,Mi=mr.height;return{vs:rn,fs:Un,uniforms:Kl(Kl({},gr),{},{u_ViewportSize:[Jr,Mi]})}}}]),Vt}(Q.a))||Ul),yu,Ec;function Sc(pe){var me=Dl();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function Dl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Gu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,ul=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ll=(yu=Object(e.injectable)(),yu(Ec=function(pe){et()(Vt,pe);var me=Sc(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:ul,fs:Gu}),this.shaderModuleService.getModule("noise-pass")}}]),Vt}(Q.a))||Ec),cl,Ju;function ec(pe){var me=Rc();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function Rc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var zc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Uc=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,hc=(cl=Object(e.injectable)(),cl(Ju=function(pe){et()(Vt,pe);var me=ec(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:zc,fs:Uc}),this.shaderModuleService.getModule("sepia-pass")}}]),Vt}(Q.a))||Ju),Xc,Pc,jl,Bu,Jc,sf,$c,kf=(Xc=Object(e.injectable)(),Pc=Object(e.inject)(s.a.IRendererService),jl=Object(e.postConstruct)(),Xc(Bu=(Jc=($c=function(){function pe(){n()(this,pe),We()(this,"rendererService",sf,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0}return a()(pe,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var me=sn()(er.a.mark(function Kt(ze){var rn,Un;return er.a.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:rn=0;case 1:if(!(rn<this.passes.length)){mr.next=10;break}return Un=this.passes[rn],Un.setRenderToScreen(this.isLastEnabledPass(rn)),mr.next=6,Un.render(ze);case 6:rn!==this.passes.length-1&&this.swap();case 7:rn++,mr.next=1;break;case 10:case"end":return mr.stop()}},Kt,this)}));function Vt(Kt){return me.apply(this,arguments)}return Vt}()},{key:"resize",value:function(Vt,Kt){this.readFBO.resize({width:Vt,height:Kt}),this.writeFBO.resize({width:Vt,height:Kt})}},{key:"add",value:function(Vt,Kt,ze){Vt.init(Kt,ze),this.passes.push(Vt)}},{key:"insert",value:function(Vt,Kt,ze,rn){Vt.init(ze,rn),this.passes.splice(Kt,0,Vt)}},{key:"getPostProcessingPassByName",value:function(Vt){return this.passes.find(function(Kt){return Kt.getName()===Vt})}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(Vt){for(var Kt=Vt+1;Kt<this.passes.length;Kt++)if(this.passes[Kt].isEnabled())return!1;return!0}},{key:"swap",value:function(){var Vt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Vt}}]),pe}(),$c),sf=dn()(Jc.prototype,"rendererService",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dn()(Jc.prototype,"init",[jl],Object.getOwnPropertyDescriptor(Jc.prototype,"init"),Jc.prototype),Jc))||Bu),wf,Gf;function Oc(pe){var me=sh();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function sh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var uf=(wf=Object(e.injectable)(),wf(Gf=function(pe){et()(Vt,pe);var me=Oc(Vt);function Vt(){return n()(this,Vt),me.apply(this,arguments)}return a()(Vt,[{key:"getType",value:function(){return vn.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(ze,rn){gn()(rt()(Vt.prototype),"init",this).call(this,ze,rn)}},{key:"render",value:function(ze){var rn=this.rendererService,Un=rn.useFramebuffer,gr=rn.clear;Un(null,function(){gr({color:[0,0,0,0],depth:1,stencil:0}),ze.multiPassRenderer.setRenderFlag(!1),ze.render(),ze.multiPassRenderer.setRenderFlag(!0)})}}]),Vt}(Vr))||Gf),lf,Tc,fl,xf,cf,Vf,Wf,Qc;function ff(pe,me){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(pe);me&&(Kt=Kt.filter(function(ze){return Object.getOwnPropertyDescriptor(pe,ze).enumerable})),Vt.push.apply(Vt,Kt)}return Vt}function If(pe){for(var me=1;me<arguments.length;me++){var Vt=arguments[me]!=null?arguments[me]:{};me%2?ff(Object(Vt),!0).forEach(function(Kt){r()(pe,Kt,Vt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):ff(Object(Vt)).forEach(function(Kt){Object.defineProperty(pe,Kt,Object.getOwnPropertyDescriptor(Vt,Kt))})}return pe}function Lf(pe){var me=bf();return function(){var Kt=rt()(pe),ze;if(me){var rn=rt()(this).constructor;ze=Reflect.construct(Kt,arguments,rn)}else ze=Kt.apply(this,arguments);return bt()(this,ze)}}function bf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var wc=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,hf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,eu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function dc(pe,me){for(var Vt=0,Kt=1/me,ze=pe;ze>0;)Vt=Vt+Kt*(ze%me),ze=Math.floor(ze/me),Kt=Kt/me;return Vt}var Ef=1,Yc=(lf=Object(e.injectable)(),Tc=Object(e.inject)(s.a.IShaderModuleService),fl=Object(e.inject)(s.a.ILogService),lf(xf=(cf=(Qc=function(pe){et()(Vt,pe);var me=Lf(Vt);function Vt(){var Kt;n()(this,Vt);for(var ze=arguments.length,rn=new Array(ze),Un=0;Un<ze;Un++)rn[Un]=arguments[Un];return Kt=me.call.apply(me,[this].concat(rn)),We()(Kt,"shaderModuleService",Vf,ha()(Kt)),We()(Kt,"logger",Wf,ha()(Kt)),Kt.haltonSequence=[],Kt.accumulatingId=0,Kt.frame=0,Kt.timer=void 0,Kt.sampleRenderTarget=void 0,Kt.prevRenderTarget=void 0,Kt.outputRenderTarget=void 0,Kt.copyRenderTarget=void 0,Kt.blendModel=void 0,Kt.outputModel=void 0,Kt.copyModel=void 0,Kt}return a()(Vt,[{key:"getType",value:function(){return vn.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(ze,rn){gn()(rt()(Vt.prototype),"init",this).call(this,ze,rn);var Un=this.rendererService,gr=Un.createFramebuffer,mr=Un.createTexture2D;this.sampleRenderTarget=gr({color:mr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=gr({color:mr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=gr({color:mr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=gr({color:mr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})});for(var Jr=0;Jr<30;Jr++)this.haltonSequence.push([dc(Jr,2),dc(Jr,3)]);this.blendModel=this.createTriangleModel("blend-pass",wc),this.outputModel=this.createTriangleModel("copy-pass",hf,{blend:{enable:!0,func:{srcRGB:kn.a.ONE,dstRGB:kn.a.ONE_MINUS_SRC_ALPHA,srcAlpha:kn.a.ONE,dstAlpha:kn.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:kn.a.FUNC_ADD,alpha:kn.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",hf)}},{key:"render",value:function(ze){var rn=this,Un=this.rendererService,gr=Un.clear,mr=Un.getViewportSize,Jr=Un.useFramebuffer,Mi=mr(),Hi=Mi.width,ra=Mi.height;this.sampleRenderTarget.resize({width:Hi,height:ra}),this.prevRenderTarget.resize({width:Hi,height:ra}),this.outputRenderTarget.resize({width:Hi,height:ra}),this.copyRenderTarget.resize({width:Hi,height:ra}),this.resetFrame(),this.stopAccumulating();var Da=ze.multiPassRenderer.getPostProcessor().getReadFBO();Jr(Da,function(){gr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Da}),ze.multiPassRenderer.setRenderFlag(!1),ze.render(),ze.multiPassRenderer.setRenderFlag(!0)});var Ka=function Qa(qo){!rn.accumulatingId||qo!==rn.accumulatingId||rn.isFinished()||(rn.doRender(ze),requestAnimationFrame(function(){Qa(qo)}))};this.accumulatingId=Ef++,this.timer=window.setTimeout(function(){Ka(rn.accumulatingId)},50)}},{key:"doRender",value:function(ze){var rn=this;this.logger.debug("accumulatingId: ".concat(this.accumulatingId));var Un=this.rendererService,gr=Un.clear,mr=Un.getViewportSize,Jr=Un.useFramebuffer,Mi=mr(),Hi=Mi.width,ra=Mi.height,Da=ze.getLayerConfig(),Ka=Da.jitterScale,Qa=Ka===void 0?1:Ka,qo=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((qo[0]*2-1)/Hi*Qa,(qo[1]*2-1)/ra*Qa),ze.multiPassRenderer.setRenderFlag(!1),ze.hooks.beforeRender.call(),Jr(this.sampleRenderTarget,function(){gr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:rn.sampleRenderTarget}),ze.render()}),ze.hooks.afterRender.call(),ze.multiPassRenderer.setRenderFlag(!0);var bo=ze.getLayerConfig();Jr(this.outputRenderTarget,function(){rn.blendModel.draw({uniforms:{u_opacity:bo.opacity||1,u_MixRatio:rn.frame===0?1:.9,u_Diffuse1:rn.sampleRenderTarget,u_Diffuse2:rn.frame===0?ze.multiPassRenderer.getPostProcessor().getReadFBO():rn.prevRenderTarget}})}),this.frame===0&&gr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(Jr(this.copyRenderTarget,function(){rn.outputModel.draw({uniforms:{u_Texture:rn.outputRenderTarget}})}),Jr(ze.multiPassRenderer.getPostProcessor().getReadFBO(),function(){rn.copyModel.draw({uniforms:{u_Texture:rn.copyRenderTarget}})}),ze.multiPassRenderer.getPostProcessor().render(ze));var Ts=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Ts,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(ze,rn,Un){this.shaderModuleService.registerModule(ze,{vs:eu,fs:rn});var gr=this.shaderModuleService.getModule(ze),mr=gr.vs,Jr=gr.fs,Mi=gr.uniforms,Hi=this.rendererService,ra=Hi.createAttribute,Da=Hi.createBuffer,Ka=Hi.createModel;return Ka(If({vs:mr,fs:Jr,attributes:{a_Position:ra({buffer:Da({data:[-4,-4,4,-4,0,4],type:kn.a.FLOAT}),size:2})},uniforms:If({},Mi),depth:{enable:!1},count:3},Un))}}]),Vt}(Vr),Qc),Vf=dn()(cf.prototype,"shaderModuleService",[Tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wf=dn()(cf.prototype,"logger",[fl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cf))||xf),vc=new e.Container;vc.bind(s.a.IGlobalConfigService).to(yr).inSingletonScope(),vc.bind(s.a.IShaderModuleService).to(on).inSingletonScope(),vc.bind(s.a.ILogService).to(Lu).inSingletonScope(),Object(e.decorate)(Object(e.injectable)(),E.EventEmitter),vc.bind(s.a.IEventEmitter).to(E.EventEmitter);var Dc=u()(vc,!1),df=function(me){var Vt=Dc.lazyInject(me);return function(Kt,ze,rn){Vt.call(this,Kt,ze),rn&&(rn.initializer=function(){return Kt[ze]})}},Sf=function(me){var Vt=Dc.lazyMultiInject(me);return function(Kt,ze,rn){Vt.call(this,Kt,ze),rn&&(rn.initializer=function(){return Kt[ze]})}},kc=dt.c=vc,Zc=0;function Gc(){var pe=new e.Container;return pe.parent=vc,pe.bind(s.a.SceneID).toConstantValue("".concat(Zc++)),pe.bind(s.a.ILayerService).to(Di).inSingletonScope(),pe.bind(s.a.ISceneService).to(Ae).inSingletonScope(),pe.bind(s.a.ICameraService).to(cn).inSingletonScope(),pe.bind(s.a.ICoordinateSystemService).to(Ja).inSingletonScope(),pe.bind(s.a.IInteractionService).to(Zt).inSingletonScope(),pe.bind(s.a.IPickingService).to(Do).inSingletonScope(),pe.bind(s.a.IControlService).to(vr).inSingletonScope(),pe.bind(s.a.IMarkerService).to(te).inSingletonScope(),pe.bind(s.a.IIconService).to($t).inSingletonScope(),pe.bind(s.a.IFontService).to(q).inSingletonScope(),pe.bind(s.a.IPopupService).to(Te).inSingletonScope(),pe.bind(s.a.INormalPass).to(Ui).whenTargetNamed("clear"),pe.bind(s.a.INormalPass).to(G).whenTargetNamed("pixelPicking"),pe.bind(s.a.INormalPass).to(uf).whenTargetNamed("render"),pe.bind(s.a.INormalPass).to(Yc).whenTargetNamed("taa"),pe.bind(s.a.IFactoryNormalPass).toFactory(function(me){return function(Vt){return me.container.getNamed(s.a.INormalPass,Vt)}}),pe.bind(s.a.IPostProcessingPass).to(rs).whenTargetNamed("copy"),pe.bind(s.a.IPostProcessingPass).to(Le).whenTargetNamed("blurH"),pe.bind(s.a.IPostProcessingPass).to($r).whenTargetNamed("blurV"),pe.bind(s.a.IPostProcessingPass).to(ll).whenTargetNamed("noise"),pe.bind(s.a.IPostProcessingPass).to(hc).whenTargetNamed("sepia"),pe.bind(s.a.IPostProcessingPass).to($i).whenTargetNamed("colorHalftone"),pe.bind(s.a.IPostProcessingPass).to(Sl).whenTargetNamed("hexagonalPixelate"),pe.bind(s.a.IPostProcessingPass).to(ic).whenTargetNamed("ink"),pe.bind(s.a.IFactoryPostProcessingPass).toFactory(function(me){return function(Vt){var Kt=me.container.getNamed(s.a.IPostProcessingPass,Vt);return Kt.setName(Vt),Kt}}),pe}function qc(pe){var me=new e.Container;return me.parent=pe,me.bind(s.a.IStyleAttributeService).to(Ds).inSingletonScope(),me.bind(s.a.IMultiPassRenderer).to(Fa).inSingletonScope(),me.bind(s.a.IPostProcessor).to(kf).inSingletonScope(),me}},fbrv:function(Se,dt,L){"use strict";var U=this&&this.__spreadArray||function(l,f){for(var v=0,b=f.length,g=l.length;v<b;v++,g++)l[g]=f[v];return l};Object.defineProperty(dt,"__esModule",{value:!0}),dt.getFunctionName=dt.getBaseClassDependencyCount=dt.getDependencies=void 0;var E=L("Yk9n"),T=L("MON2"),e=L("FV85"),t=L("xfSm"),u=L("ujMp");Object.defineProperty(dt,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var s=L("dX1H");function h(l,f){var v=u.getFunctionName(f),b=r(l,v,f,!1);return b}dt.getDependencies=h;function r(l,f,v,b){var g=l.getConstructorMetadata(v),y=g.compilerGeneratedMetadata;if(y===void 0){var _=T.MISSING_INJECTABLE_ANNOTATION+" "+f+".";throw new Error(_)}var M=g.userGeneratedMetadata,x=Object.keys(M),m=v.length===0&&x.length>0,S=x.length>v.length,P=m||S?x.length:v.length,A=n(b,f,y,M,P),O=i(l,v),R=U(U([],A),O);return R}function c(l,f,v,b,g){var y=g[l.toString()]||[],_=o(y),M=_.unmanaged!==!0,x=b[l],m=_.inject||_.multiInject;if(x=m||x,x instanceof E.LazyServiceIdentifer&&(x=x.unwrap()),M){var S=x===Object,P=x===Function,A=x===void 0,O=S||P||A;if(!f&&O){var R=T.MISSING_INJECT_ANNOTATION+" argument "+l+" in class "+v+".";throw new Error(R)}var H=new s.Target(e.TargetTypeEnum.ConstructorArgument,_.targetName,x);return H.metadata=y,H}return null}function n(l,f,v,b,g){for(var y=[],_=0;_<g;_++){var M=_,x=c(M,l,f,v,b);x!==null&&y.push(x)}return y}function i(l,f){for(var v=l.getPropertiesMetadata(f),b=[],g=Object.keys(v),y=0,_=g;y<_.length;y++){var M=_[y],x=v[M],m=o(v[M]),S=m.targetName||M,P=m.inject||m.multiInject,A=new s.Target(e.TargetTypeEnum.ClassProperty,S,P);A.metadata=x,b.push(A)}var O=Object.getPrototypeOf(f.prototype).constructor;if(O!==Object){var R=i(l,O);b=U(U([],b),R)}return b}function a(l,f){var v=Object.getPrototypeOf(f.prototype).constructor;if(v!==Object){var b=u.getFunctionName(v),g=r(l,b,v,!0),y=g.map(function(x){return x.metadata.filter(function(m){return m.key===t.UNMANAGED_TAG})}),_=[].concat.apply([],y).length,M=g.length-_;return M>0?M:a(l,v)}else return 0}dt.getBaseClassDependencyCount=a;function o(l){var f={};return l.forEach(function(v){f[v.key.toString()]=v.value}),{inject:f[t.INJECT_TAG],multiInject:f[t.MULTI_INJECT_TAG],targetName:f[t.NAME_TAG],unmanaged:f[t.UNMANAGED_TAG]}}},fbvF:function(Se,dt,L){(function(U,E){Se.exports=E()})(this,function(){"use strict";var U=function(lt){return lt instanceof Uint8Array||lt instanceof Uint16Array||lt instanceof Uint32Array||lt instanceof Int8Array||lt instanceof Int16Array||lt instanceof Int32Array||lt instanceof Float32Array||lt instanceof Float64Array||lt instanceof Uint8ClampedArray},E=function(lt,nt){for(var W=Object.keys(nt),ct=0;ct<W.length;++ct)lt[W[ct]]=nt[W[ct]];return lt},T=`
`;function e(Fe){return typeof atob!="undefined"?atob(Fe):"base64:"+Fe}function t(Fe){var lt=new Error("(regl) "+Fe);throw console.error(lt),lt}function u(Fe,lt){Fe||t(lt)}function s(Fe){return Fe?": "+Fe:""}function h(Fe,lt,nt){Fe in lt||t("unknown parameter ("+Fe+")"+s(nt)+". possible values: "+Object.keys(lt).join())}function r(Fe,lt){U(Fe)||t("invalid parameter type"+s(lt)+". must be a typed array")}function c(Fe,lt){switch(lt){case"number":return typeof Fe=="number";case"object":return typeof Fe=="object";case"string":return typeof Fe=="string";case"boolean":return typeof Fe=="boolean";case"function":return typeof Fe=="function";case"undefined":return typeof Fe=="undefined";case"symbol":return typeof Fe=="symbol"}}function n(Fe,lt,nt){c(Fe,lt)||t("invalid parameter type"+s(nt)+". expected "+lt+", got "+typeof Fe)}function i(Fe,lt){Fe>=0&&(Fe|0)===Fe||t("invalid parameter type, ("+Fe+")"+s(lt)+". must be a nonnegative integer")}function a(Fe,lt,nt){lt.indexOf(Fe)<0&&t("invalid value"+s(nt)+". must be one of: "+lt)}var o=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function l(Fe){Object.keys(Fe).forEach(function(lt){o.indexOf(lt)<0&&t('invalid regl constructor argument "'+lt+'". must be one of '+o)})}function f(Fe,lt){for(Fe=Fe+"";Fe.length<lt;)Fe=" "+Fe;return Fe}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(Fe,lt){this.number=Fe,this.line=lt,this.errors=[]}function g(Fe,lt,nt){this.file=Fe,this.line=lt,this.message=nt}function y(){var Fe=new Error,lt=(Fe.stack||Fe).toString(),nt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(lt);if(nt)return nt[1];var W=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(lt);return W?W[1]:"unknown"}function _(){var Fe=new Error,lt=(Fe.stack||Fe).toString(),nt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(lt);if(nt)return nt[1];var W=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(lt);return W?W[1]:"unknown"}function M(Fe,lt){var nt=Fe.split(`
`),W=1,ct=0,Et={unknown:new v,0:new v};Et.unknown.name=Et[0].name=lt||y(),Et.unknown.lines.push(new b(0,""));for(var Ut=0;Ut<nt.length;++Ut){var fe=nt[Ut],Ve=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(fe);if(Ve)switch(Ve[1]){case"line":var Ge=/(\d+)(\s+\d+)?/.exec(Ve[2]);Ge&&(W=Ge[1]|0,Ge[2]&&(ct=Ge[2]|0,ct in Et||(Et[ct]=new v)));break;case"define":var Ke=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ve[2]);Ke&&(Et[ct].name=Ke[1]?e(Ke[2]):Ke[2]);break}Et[ct].lines.push(new b(W++,fe))}return Object.keys(Et).forEach(function(Rn){var ur=Et[Rn];ur.lines.forEach(function(rr){ur.index[rr.number]=rr})}),Et}function x(Fe){var lt=[];return Fe.split(`
`).forEach(function(nt){if(!(nt.length<5)){var W=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(nt);W?lt.push(new g(W[1]|0,W[2]|0,W[3].trim())):nt.length>0&&lt.push(new g("unknown",0,nt))}}),lt}function m(Fe,lt){lt.forEach(function(nt){var W=Fe[nt.file];if(W){var ct=W.index[nt.line];if(ct){ct.errors.push(nt),W.hasErrors=!0;return}}Fe.unknown.hasErrors=!0,Fe.unknown.lines[0].errors.push(nt)})}function S(Fe,lt,nt,W,ct){if(!Fe.getShaderParameter(lt,Fe.COMPILE_STATUS)){var Et=Fe.getShaderInfoLog(lt),Ut=W===Fe.FRAGMENT_SHADER?"fragment":"vertex";K(nt,"string",Ut+" shader source must be a string",ct);var fe=M(nt,ct),Ve=x(Et);m(fe,Ve),Object.keys(fe).forEach(function(Ge){var Ke=fe[Ge];if(!Ke.hasErrors)return;var Rn=[""],ur=[""];function rr(lr,Zn){Rn.push(lr),ur.push(Zn||"")}rr("file number "+Ge+": "+Ke.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ke.lines.forEach(function(lr){if(lr.errors.length>0){rr(f(lr.number,4)+"|  ","background-color:yellow; font-weight:bold"),rr(lr.line+T,"color:red; background-color:yellow; font-weight:bold");var Zn=0;lr.errors.forEach(function(qn){var kr=qn.message,ti=/^\s*'(.*)'\s*:\s*(.*)$/.exec(kr);if(ti){var Ir=ti[1];switch(kr=ti[2],Ir){case"assign":Ir="=";break}Zn=Math.max(lr.line.indexOf(Ir,Zn),0)}else Zn=0;rr(f("| ",6)),rr(f("^^^",Zn+3)+T,"font-weight:bold"),rr(f("| ",6)),rr(kr+T,"font-weight:bold")}),rr(f("| ",6)+T)}else rr(f(lr.number,4)+"|  "),rr(lr.line+T,"color:red")}),typeof document!="undefined"&&!window.chrome?(ur[0]=Rn.join("%c"),console.log.apply(console,ur)):console.log(Rn.join(""))}),u.raise("Error compiling "+Ut+" shader, "+fe[0].name)}}function P(Fe,lt,nt,W,ct){if(!Fe.getProgramParameter(lt,Fe.LINK_STATUS)){var Et=Fe.getProgramInfoLog(lt),Ut=M(nt,ct),fe=M(W,ct),Ve='Error linking program with vertex shader, "'+fe[0].name+'", and fragment shader "'+Ut[0].name+'"';typeof document!="undefined"?console.log("%c"+Ve+T+"%c"+Et,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ve+T+Et),u.raise(Ve)}}function A(Fe){Fe._commandRef=y()}function O(Fe,lt,nt,W){A(Fe);function ct(Ve){return Ve?W.id(Ve):0}Fe._fragId=ct(Fe.static.frag),Fe._vertId=ct(Fe.static.vert);function Et(Ve,Ge){Object.keys(Ge).forEach(function(Ke){Ve[W.id(Ke)]=!0})}var Ut=Fe._uniformSet={};Et(Ut,lt.static),Et(Ut,lt.dynamic);var fe=Fe._attributeSet={};Et(fe,nt.static),Et(fe,nt.dynamic),Fe._hasCount="count"in Fe.static||"count"in Fe.dynamic||"elements"in Fe.static||"elements"in Fe.dynamic}function R(Fe,lt){var nt=_();t(Fe+" in command "+(lt||y())+(nt==="unknown"?"":" called from "+nt))}function H(Fe,lt,nt){Fe||R(lt,nt||y())}function N(Fe,lt,nt,W){Fe in lt||R("unknown parameter ("+Fe+")"+s(nt)+". possible values: "+Object.keys(lt).join(),W||y())}function K(Fe,lt,nt,W){c(Fe,lt)||R("invalid parameter type"+s(nt)+". expected "+lt+", got "+typeof Fe,W||y())}function V(Fe){Fe()}function k(Fe,lt,nt){Fe.texture?a(Fe.texture._texture.internalformat,lt,"unsupported texture format for attachment"):a(Fe.renderbuffer._renderbuffer.format,nt,"unsupported renderbuffer format for attachment")}var Z=33071,X=9728,at=9984,pt=9985,gt=9986,ft=9987,Rt=5120,Nt=5121,Dt=5122,St=5123,xt=5124,Ot=5125,it=5126,At=32819,z=32820,q=33635,mt=34042,et=36193,st={};st[Rt]=st[Nt]=1,st[Dt]=st[St]=st[et]=st[q]=st[At]=st[z]=2,st[xt]=st[Ot]=st[it]=st[mt]=4;function bt(Fe,lt){return Fe===z||Fe===At||Fe===q?2:Fe===mt?4:st[Fe]*lt}function Y(Fe){return!(Fe&Fe-1)&&!!Fe}function rt(Fe,lt,nt){var W,ct=lt.width,Et=lt.height,Ut=lt.channels;u(ct>0&&ct<=nt.maxTextureSize&&Et>0&&Et<=nt.maxTextureSize,"invalid texture shape"),(Fe.wrapS!==Z||Fe.wrapT!==Z)&&u(Y(ct)&&Y(Et),"incompatible wrap mode for texture, both width and height must be power of 2"),lt.mipmask===1?ct!==1&&Et!==1&&u(Fe.minFilter!==at&&Fe.minFilter!==gt&&Fe.minFilter!==pt&&Fe.minFilter!==ft,"min filter requires mipmap"):(u(Y(ct)&&Y(Et),"texture must be a square power of 2 to support mipmapping"),u(lt.mipmask===(ct<<1)-1,"missing or incomplete mipmap data")),lt.type===it&&(nt.extensions.indexOf("oes_texture_float_linear")<0&&u(Fe.minFilter===X&&Fe.magFilter===X,"filter not supported, must enable oes_texture_float_linear"),u(!Fe.genMipmaps,"mipmap generation not supported with float textures"));var fe=lt.images;for(W=0;W<16;++W)if(fe[W]){var Ve=ct>>W,Ge=Et>>W;u(lt.mipmask&1<<W,"missing mipmap data");var Ke=fe[W];if(u(Ke.width===Ve&&Ke.height===Ge,"invalid shape for mip images"),u(Ke.format===lt.format&&Ke.internalformat===lt.internalformat&&Ke.type===lt.type,"incompatible type for mip image"),!Ke.compressed)if(Ke.data){var Rn=Math.ceil(bt(Ke.type,Ut)*Ve/Ke.unpackAlignment)*Ke.unpackAlignment;u(Ke.data.byteLength===Rn*Ge,"invalid data for image, buffer size is inconsistent with image format")}else Ke.element||Ke.copy}else Fe.genMipmaps||u((lt.mipmask&1<<W)==0,"extra mipmap data");lt.compressed&&u(!Fe.genMipmaps,"mipmap generation for compressed images not supported")}function ot(Fe,lt,nt,W){var ct=Fe.width,Et=Fe.height,Ut=Fe.channels;u(ct>0&&ct<=W.maxTextureSize&&Et>0&&Et<=W.maxTextureSize,"invalid texture shape"),u(ct===Et,"cube map must be square"),u(lt.wrapS===Z&&lt.wrapT===Z,"wrap mode not supported by cube map");for(var fe=0;fe<nt.length;++fe){var Ve=nt[fe];u(Ve.width===ct&&Ve.height===Et,"inconsistent cube map face shape"),lt.genMipmaps&&(u(!Ve.compressed,"can not generate mipmap for compressed textures"),u(Ve.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ge=Ve.images,Ke=0;Ke<16;++Ke){var Rn=Ge[Ke];if(Rn){var ur=ct>>Ke,rr=Et>>Ke;u(Ve.mipmask&1<<Ke,"missing mipmap data"),u(Rn.width===ur&&Rn.height===rr,"invalid shape for mip images"),u(Rn.format===Fe.format&&Rn.internalformat===Fe.internalformat&&Rn.type===Fe.type,"incompatible type for mip image"),Rn.compressed||(Rn.data?u(Rn.data.byteLength===ur*rr*Math.max(bt(Rn.type,Ut),Rn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Rn.element||Rn.copy)}}}}var $=E(u,{optional:V,raise:t,commandRaise:R,command:H,parameter:h,commandParameter:N,constructor:l,type:n,commandType:K,isTypedArray:r,nni:i,oneOf:a,shaderError:S,linkError:P,callSite:_,saveCommandRef:A,saveDrawInfo:O,framebufferFormat:k,guessCommand:y,texture2D:rt,textureCube:ot}),Pt=0,yt=0,Ft=5,Qt=6;function ne(Fe,lt){this.id=Pt++,this.type=Fe,this.data=lt}function Wt(Fe){return Fe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function $t(Fe){if(Fe.length===0)return[];var lt=Fe.charAt(0),nt=Fe.charAt(Fe.length-1);if(Fe.length>1&&lt===nt&&(lt==='"'||lt==="'"))return['"'+Wt(Fe.substr(1,Fe.length-2))+'"'];var W=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Fe);if(W)return $t(Fe.substr(0,W.index)).concat($t(W[1])).concat($t(Fe.substr(W.index+W[0].length)));var ct=Fe.split(".");if(ct.length===1)return['"'+Wt(Fe)+'"'];for(var Et=[],Ut=0;Ut<ct.length;++Ut)Et=Et.concat($t(ct[Ut]));return Et}function De(Fe){return"["+$t(Fe).join("][")+"]"}function Je(Fe,lt){return new ne(Fe,De(lt+""))}function Qe(Fe){return typeof Fe=="function"&&!Fe._reglType||Fe instanceof ne}function de(Fe,lt){if(typeof Fe=="function")return new ne(yt,Fe);if(typeof Fe=="number"||typeof Fe=="boolean")return new ne(Ft,Fe);if(Array.isArray(Fe))return new ne(Qt,Fe.map(function(nt,W){return de(nt,lt+"["+W+"]")}));if(Fe instanceof ne)return Fe;$(!1,"invalid option type in uniform "+lt)}var ue={DynamicVariable:ne,define:Je,isDynamic:Qe,unbox:de,accessor:De},Ne={next:typeof requestAnimationFrame=="function"?function(Fe){return requestAnimationFrame(Fe)}:function(Fe){return setTimeout(Fe,16)},cancel:typeof cancelAnimationFrame=="function"?function(Fe){return cancelAnimationFrame(Fe)}:clearTimeout},cn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Fn(){var Fe={"":0},lt=[""];return{id:function(W){var ct=Fe[W];return ct||(ct=Fe[W]=lt.length,lt.push(W),ct)},str:function(W){return lt[W]}}}function wn(Fe,lt,nt){var W=document.createElement("canvas");E(W.style,{border:0,margin:0,padding:0,top:0,left:0}),Fe.appendChild(W),Fe===document.body&&(W.style.position="absolute",E(Fe.style,{margin:0,padding:0}));function ct(){var fe=window.innerWidth,Ve=window.innerHeight;if(Fe!==document.body){var Ge=Fe.getBoundingClientRect();fe=Ge.right-Ge.left,Ve=Ge.bottom-Ge.top}W.width=nt*fe,W.height=nt*Ve,E(W.style,{width:fe+"px",height:Ve+"px"})}var Et;Fe!==document.body&&typeof ResizeObserver=="function"?(Et=new ResizeObserver(function(){setTimeout(ct)}),Et.observe(Fe)):window.addEventListener("resize",ct,!1);function Ut(){Et?Et.disconnect():window.removeEventListener("resize",ct),Fe.removeChild(W)}return ct(),{canvas:W,onDestroy:Ut}}function en(Fe,lt){function nt(W){try{return Fe.getContext(W,lt)}catch(ct){return null}}return nt("webgl")||nt("experimental-webgl")||nt("webgl-experimental")}function tn(Fe){return typeof Fe.nodeName=="string"&&typeof Fe.appendChild=="function"&&typeof Fe.getBoundingClientRect=="function"}function xn(Fe){return typeof Fe.drawArrays=="function"||typeof Fe.drawElements=="function"}function Bn(Fe){return typeof Fe=="string"?Fe.split():($(Array.isArray(Fe),"invalid extension array"),Fe)}function vr(Fe){return typeof Fe=="string"?($(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Fe)):Fe}function li(Fe){var lt=Fe||{},nt,W,ct,Et,Ut={},fe=[],Ve=[],Ge=typeof window=="undefined"?1:window.devicePixelRatio,Ke=!1,Rn=function(Zn){Zn&&$.raise(Zn)},ur=function(){};if(typeof lt=="string"?($(typeof document!="undefined","selector queries only supported in DOM enviroments"),nt=document.querySelector(lt),$(nt,"invalid query string for element")):typeof lt=="object"?tn(lt)?nt=lt:xn(lt)?(Et=lt,ct=Et.canvas):($.constructor(lt),"gl"in lt?Et=lt.gl:"canvas"in lt?ct=vr(lt.canvas):"container"in lt&&(W=vr(lt.container)),"attributes"in lt&&(Ut=lt.attributes,$.type(Ut,"object","invalid context attributes")),"extensions"in lt&&(fe=Bn(lt.extensions)),"optionalExtensions"in lt&&(Ve=Bn(lt.optionalExtensions)),"onDone"in lt&&($.type(lt.onDone,"function","invalid or missing onDone callback"),Rn=lt.onDone),"profile"in lt&&(Ke=!!lt.profile),"pixelRatio"in lt&&(Ge=+lt.pixelRatio,$(Ge>0,"invalid pixel ratio"))):$.raise("invalid arguments to regl"),nt&&(nt.nodeName.toLowerCase()==="canvas"?ct=nt:W=nt),!Et){if(!ct){$(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var rr=wn(W||document.body,Rn,Ge);if(!rr)return null;ct=rr.canvas,ur=rr.onDestroy}Ut.premultipliedAlpha===void 0&&(Ut.premultipliedAlpha=!0),Et=en(ct,Ut)}return Et?{gl:Et,canvas:ct,container:W,extensions:fe,optionalExtensions:Ve,pixelRatio:Ge,profile:Ke,onDone:Rn,onDestroy:ur}:(ur(),Rn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Me(Fe,lt){var nt={};function W(Ut){$.type(Ut,"string","extension name must be string");var fe=Ut.toLowerCase(),Ve;try{Ve=nt[fe]=Fe.getExtension(fe)}catch(Ge){}return!!Ve}for(var ct=0;ct<lt.extensions.length;++ct){var Et=lt.extensions[ct];if(!W(Et))return lt.onDestroy(),lt.onDone('"'+Et+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return lt.optionalExtensions.forEach(W),{extensions:nt,restore:function(){Object.keys(nt).forEach(function(fe){if(nt[fe]&&!W(fe))throw new Error("(regl): error restoring extension "+fe)})}}}function Pe(Fe,lt){for(var nt=Array(Fe),W=0;W<Fe;++W)nt[W]=lt(W);return nt}var te=5120,ge=5121,Ht=5122,re=5123,Te=5124,ae=5125,xe=5126;function qe(Fe){for(var lt=16;lt<=1<<28;lt*=16)if(Fe<=lt)return lt;return 0}function zn(Fe){var lt,nt;return lt=(Fe>65535)<<4,Fe>>>=lt,nt=(Fe>255)<<3,Fe>>>=nt,lt|=nt,nt=(Fe>15)<<2,Fe>>>=nt,lt|=nt,nt=(Fe>3)<<1,Fe>>>=nt,lt|=nt,lt|Fe>>1}function ar(){var Fe=Pe(8,function(){return[]});function lt(Et){var Ut=qe(Et),fe=Fe[zn(Ut)>>2];return fe.length>0?fe.pop():new ArrayBuffer(Ut)}function nt(Et){Fe[zn(Et.byteLength)>>2].push(Et)}function W(Et,Ut){var fe=null;switch(Et){case te:fe=new Int8Array(lt(Ut),0,Ut);break;case ge:fe=new Uint8Array(lt(Ut),0,Ut);break;case Ht:fe=new Int16Array(lt(2*Ut),0,Ut);break;case re:fe=new Uint16Array(lt(2*Ut),0,Ut);break;case Te:fe=new Int32Array(lt(4*Ut),0,Ut);break;case ae:fe=new Uint32Array(lt(4*Ut),0,Ut);break;case xe:fe=new Float32Array(lt(4*Ut),0,Ut);break;default:return null}return fe.length!==Ut?fe.subarray(0,Ut):fe}function ct(Et){nt(Et.buffer)}return{alloc:lt,free:nt,allocType:W,freeType:ct}}var _n=ar();_n.zero=ar();var Cn=3408,Or=3410,Ar=3411,hn=3412,Pr=3413,yr=3414,Re=3415,We=33901,Ye=33902,dn=3379,En=3386,Dn=34921,Sn=36347,Nn=36348,nr=35661,Gn=35660,Tn=34930,Cr=36349,pr=34076,zr=34024,Ei=7936,Oa=7937,wa=7938,Ja=35724,wo=34047,ha=36063,ro=34852,ko=3553,$a=34067,Mo=34069,ss=33984,Pa=6408,Bo=5126,Ro=5121,Js=36160,Ko=36053,nu=36064,Rs=16384,je=function(lt,nt){var W=1;nt.ext_texture_filter_anisotropic&&(W=lt.getParameter(wo));var ct=1,Et=1;nt.webgl_draw_buffers&&(ct=lt.getParameter(ro),Et=lt.getParameter(ha));var Ut=!!nt.oes_texture_float;if(Ut){var fe=lt.createTexture();lt.bindTexture(ko,fe),lt.texImage2D(ko,0,Pa,1,1,0,Pa,Bo,null);var Ve=lt.createFramebuffer();if(lt.bindFramebuffer(Js,Ve),lt.framebufferTexture2D(Js,nu,ko,fe,0),lt.bindTexture(ko,null),lt.checkFramebufferStatus(Js)!==Ko)Ut=!1;else{lt.viewport(0,0,1,1),lt.clearColor(1,0,0,1),lt.clear(Rs);var Ge=_n.allocType(Bo,4);lt.readPixels(0,0,1,1,Pa,Bo,Ge),lt.getError()?Ut=!1:(lt.deleteFramebuffer(Ve),lt.deleteTexture(fe),Ut=Ge[0]===1),_n.freeType(Ge)}}var Ke=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Rn=!0;if(!Ke){var ur=lt.createTexture(),rr=_n.allocType(Ro,36);lt.activeTexture(ss),lt.bindTexture($a,ur),lt.texImage2D(Mo,0,Pa,3,3,0,Pa,Ro,rr),_n.freeType(rr),lt.bindTexture($a,null),lt.deleteTexture(ur),Rn=!lt.getError()}return{colorBits:[lt.getParameter(Or),lt.getParameter(Ar),lt.getParameter(hn),lt.getParameter(Pr)],depthBits:lt.getParameter(yr),stencilBits:lt.getParameter(Re),subpixelBits:lt.getParameter(Cn),extensions:Object.keys(nt).filter(function(lr){return!!nt[lr]}),maxAnisotropic:W,maxDrawbuffers:ct,maxColorAttachments:Et,pointSizeDims:lt.getParameter(We),lineWidthDims:lt.getParameter(Ye),maxViewportDims:lt.getParameter(En),maxCombinedTextureUnits:lt.getParameter(nr),maxCubeMapSize:lt.getParameter(pr),maxRenderbufferSize:lt.getParameter(zr),maxTextureUnits:lt.getParameter(Tn),maxTextureSize:lt.getParameter(dn),maxAttributes:lt.getParameter(Dn),maxVertexUniforms:lt.getParameter(Sn),maxVertexTextureUnits:lt.getParameter(Gn),maxVaryingVectors:lt.getParameter(Nn),maxFragmentUniforms:lt.getParameter(Cr),glsl:lt.getParameter(Ja),renderer:lt.getParameter(Oa),vendor:lt.getParameter(Ei),version:lt.getParameter(wa),readFloat:Ut,npotTextureCube:Rn}};function oe(Fe){return!!Fe&&typeof Fe=="object"&&Array.isArray(Fe.shape)&&Array.isArray(Fe.stride)&&typeof Fe.offset=="number"&&Fe.shape.length===Fe.stride.length&&(Array.isArray(Fe.data)||U(Fe.data))}var Zt=function(lt){return Object.keys(lt).map(function(nt){return lt[nt]})},be={shape:vi,flatten:Xr};function sn(Fe,lt,nt){for(var W=0;W<lt;++W)nt[W]=Fe[W]}function Vn(Fe,lt,nt,W){for(var ct=0,Et=0;Et<lt;++Et)for(var Ut=Fe[Et],fe=0;fe<nt;++fe)W[ct++]=Ut[fe]}function er(Fe,lt,nt,W,ct,Et){for(var Ut=Et,fe=0;fe<lt;++fe)for(var Ve=Fe[fe],Ge=0;Ge<nt;++Ge)for(var Ke=Ve[Ge],Rn=0;Rn<W;++Rn)ct[Ut++]=Ke[Rn]}function kn(Fe,lt,nt,W,ct){for(var Et=1,Ut=nt+1;Ut<lt.length;++Ut)Et*=lt[Ut];var fe=lt[nt];if(lt.length-nt==4){var Ve=lt[nt+1],Ge=lt[nt+2],Ke=lt[nt+3];for(Ut=0;Ut<fe;++Ut)er(Fe[Ut],Ve,Ge,Ke,W,ct),ct+=Et}else for(Ut=0;Ut<fe;++Ut)kn(Fe[Ut],lt,nt+1,W,ct),ct+=Et}function Xr(Fe,lt,nt,W){var ct=1;if(lt.length)for(var Et=0;Et<lt.length;++Et)ct*=lt[Et];else ct=0;var Ut=W||_n.allocType(nt,ct);switch(lt.length){case 0:break;case 1:sn(Fe,lt[0],Ut);break;case 2:Vn(Fe,lt[0],lt[1],Ut);break;case 3:er(Fe,lt[0],lt[1],lt[2],Ut,0);break;default:kn(Fe,lt,0,Ut,0)}return Ut}function vi(Fe){for(var lt=[],nt=Fe;nt.length;nt=nt[0])lt.push(nt.length);return lt}var Si={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ji=5120,Ji=5122,za=5124,va=5121,so=5123,Ia=5125,io=5126,uo=5126,ka={int8:ji,int16:Ji,int32:za,uint8:va,uint16:so,uint32:Ia,float:io,float32:uo},vo=35048,Vo=35040,Do={dynamic:vo,stream:Vo,static:35044},fs=be.flatten,mo=be.shape,Ga=35044,us=35040,Xo=5121,Ta=5126,mn=[];mn[5120]=1,mn[5122]=2,mn[5124]=4,mn[5121]=1,mn[5123]=2,mn[5125]=4,mn[5126]=4;function cr(Fe){return Si[Object.prototype.toString.call(Fe)]|0}function Wr(Fe,lt){for(var nt=0;nt<lt.length;++nt)Fe[nt]=lt[nt]}function Di(Fe,lt,nt,W,ct,Et,Ut){for(var fe=0,Ve=0;Ve<nt;++Ve)for(var Ge=0;Ge<W;++Ge)Fe[fe++]=lt[ct*Ve+Et*Ge+Ut]}function Ua(Fe,lt,nt,W){var ct=0,Et={};function Ut(Zn){this.id=ct++,this.buffer=Fe.createBuffer(),this.type=Zn,this.usage=Ga,this.byteLength=0,this.dimension=1,this.dtype=Xo,this.persistentData=null,nt.profile&&(this.stats={size:0})}Ut.prototype.bind=function(){Fe.bindBuffer(this.type,this.buffer)},Ut.prototype.destroy=function(){ur(this)};var fe=[];function Ve(Zn,qn){var kr=fe.pop();return kr||(kr=new Ut(Zn)),kr.bind(),Rn(kr,qn,us,0,1,!1),kr}function Ge(Zn){fe.push(Zn)}function Ke(Zn,qn,kr){Zn.byteLength=qn.byteLength,Fe.bufferData(Zn.type,qn,kr)}function Rn(Zn,qn,kr,ti,Ir,Ci){var ni;if(Zn.usage=kr,Array.isArray(qn)){if(Zn.dtype=ti||Ta,qn.length>0){var qr;if(Array.isArray(qn[0])){ni=mo(qn);for(var Qr=1,oi=1;oi<ni.length;++oi)Qr*=ni[oi];Zn.dimension=Qr,qr=fs(qn,ni,Zn.dtype),Ke(Zn,qr,kr),Ci?Zn.persistentData=qr:_n.freeType(qr)}else if(typeof qn[0]=="number"){Zn.dimension=Ir;var Ii=_n.allocType(Zn.dtype,qn.length);Wr(Ii,qn),Ke(Zn,Ii,kr),Ci?Zn.persistentData=Ii:_n.freeType(Ii)}else U(qn[0])?(Zn.dimension=qn[0].length,Zn.dtype=ti||cr(qn[0])||Ta,qr=fs(qn,[qn.length,qn[0].length],Zn.dtype),Ke(Zn,qr,kr),Ci?Zn.persistentData=qr:_n.freeType(qr)):$.raise("invalid buffer data")}}else if(U(qn))Zn.dtype=ti||cr(qn),Zn.dimension=Ir,Ke(Zn,qn,kr),Ci&&(Zn.persistentData=new Uint8Array(new Uint8Array(qn.buffer)));else if(oe(qn)){ni=qn.shape;var ki=qn.stride,xi=qn.offset,di=0,ui=0,da=0,aa=0;ni.length===1?(di=ni[0],ui=1,da=ki[0],aa=0):ni.length===2?(di=ni[0],ui=ni[1],da=ki[0],aa=ki[1]):$.raise("invalid shape"),Zn.dtype=ti||cr(qn.data)||Ta,Zn.dimension=ui;var Gi=_n.allocType(Zn.dtype,di*ui);Di(Gi,qn.data,di,ui,da,aa,xi),Ke(Zn,Gi,kr),Ci?Zn.persistentData=Gi:_n.freeType(Gi)}else qn instanceof ArrayBuffer?(Zn.dtype=Xo,Zn.dimension=Ir,Ke(Zn,qn,kr),Ci&&(Zn.persistentData=new Uint8Array(new Uint8Array(qn)))):$.raise("invalid buffer data")}function ur(Zn){lt.bufferCount--,W(Zn);var qn=Zn.buffer;$(qn,"buffer must not be deleted already"),Fe.deleteBuffer(qn),Zn.buffer=null,delete Et[Zn.id]}function rr(Zn,qn,kr,ti){lt.bufferCount++;var Ir=new Ut(qn);Et[Ir.id]=Ir;function Ci(Qr){var oi=Ga,Ii=null,ki=0,xi=0,di=1;return Array.isArray(Qr)||U(Qr)||oe(Qr)||Qr instanceof ArrayBuffer?Ii=Qr:typeof Qr=="number"?ki=Qr|0:Qr&&($.type(Qr,"object","buffer arguments must be an object, a number or an array"),"data"in Qr&&($(Ii===null||Array.isArray(Ii)||U(Ii)||oe(Ii),"invalid data for buffer"),Ii=Qr.data),"usage"in Qr&&($.parameter(Qr.usage,Do,"invalid buffer usage"),oi=Do[Qr.usage]),"type"in Qr&&($.parameter(Qr.type,ka,"invalid buffer type"),xi=ka[Qr.type]),"dimension"in Qr&&($.type(Qr.dimension,"number","invalid dimension"),di=Qr.dimension|0),"length"in Qr&&($.nni(ki,"buffer length must be a nonnegative integer"),ki=Qr.length|0)),Ir.bind(),Ii?Rn(Ir,Ii,oi,xi,di,ti):(ki&&Fe.bufferData(Ir.type,ki,oi),Ir.dtype=xi||Xo,Ir.usage=oi,Ir.dimension=di,Ir.byteLength=ki),nt.profile&&(Ir.stats.size=Ir.byteLength*mn[Ir.dtype]),Ci}function ni(Qr,oi){$(oi+Qr.byteLength<=Ir.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Qr.byteLength+" starting from offset "+oi+" to a buffer of size "+Ir.byteLength),Fe.bufferSubData(Ir.type,oi,Qr)}function qr(Qr,oi){var Ii=(oi||0)|0,ki;if(Ir.bind(),U(Qr)||Qr instanceof ArrayBuffer)ni(Qr,Ii);else if(Array.isArray(Qr)){if(Qr.length>0)if(typeof Qr[0]=="number"){var xi=_n.allocType(Ir.dtype,Qr.length);Wr(xi,Qr),ni(xi,Ii),_n.freeType(xi)}else if(Array.isArray(Qr[0])||U(Qr[0])){ki=mo(Qr);var di=fs(Qr,ki,Ir.dtype);ni(di,Ii),_n.freeType(di)}else $.raise("invalid buffer data")}else if(oe(Qr)){ki=Qr.shape;var ui=Qr.stride,da=0,aa=0,Gi=0,oo=0;ki.length===1?(da=ki[0],aa=1,Gi=ui[0],oo=0):ki.length===2?(da=ki[0],aa=ki[1],Gi=ui[0],oo=ui[1]):$.raise("invalid shape");var ja=Array.isArray(Qr.data)?Ir.dtype:cr(Qr.data),So=_n.allocType(ja,da*aa);Di(So,Qr.data,da,aa,Gi,oo,Qr.offset),ni(So,Ii),_n.freeType(So)}else $.raise("invalid data for buffer subdata");return Ci}return kr||Ci(Zn),Ci._reglType="buffer",Ci._buffer=Ir,Ci.subdata=qr,nt.profile&&(Ci.stats=Ir.stats),Ci.destroy=function(){ur(Ir)},Ci}function lr(){Zt(Et).forEach(function(Zn){Zn.buffer=Fe.createBuffer(),Fe.bindBuffer(Zn.type,Zn.buffer),Fe.bufferData(Zn.type,Zn.persistentData||Zn.byteLength,Zn.usage)})}return nt.profile&&(lt.getTotalBufferSize=function(){var Zn=0;return Object.keys(Et).forEach(function(qn){Zn+=Et[qn].stats.size}),Zn}),{create:rr,createStream:Ve,destroyStream:Ge,clear:function(){Zt(Et).forEach(ur),fe.forEach(ur)},getBuffer:function(qn){return qn&&qn._buffer instanceof Ut?qn._buffer:null},restore:lr,_initBuffer:Rn}}var yo=0,lo=0,La=1,Va=1,ts=4,ls=4,Ki={points:yo,point:lo,lines:La,line:Va,triangles:ts,triangle:ls,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},_u=0,Fo=1,hs=4,$s=5120,ds=5121,vs=5122,Qs=5123,Mu=5124,ps=5125,wu=34963,Ds=35040,Aa=35044;function lu(Fe,lt,nt,W){var ct={},Et=0,Ut={uint8:ds,uint16:Qs};lt.oes_element_index_uint&&(Ut.uint32=ps);function fe(lr){this.id=Et++,ct[this.id]=this,this.buffer=lr,this.primType=hs,this.vertCount=0,this.type=0}fe.prototype.bind=function(){this.buffer.bind()};var Ve=[];function Ge(lr){var Zn=Ve.pop();return Zn||(Zn=new fe(nt.create(null,wu,!0,!1)._buffer)),Rn(Zn,lr,Ds,-1,-1,0,0),Zn}function Ke(lr){Ve.push(lr)}function Rn(lr,Zn,qn,kr,ti,Ir,Ci){lr.buffer.bind();var ni;if(Zn){var qr=Ci;!Ci&&(!U(Zn)||oe(Zn)&&!U(Zn.data))&&(qr=lt.oes_element_index_uint?ps:Qs),nt._initBuffer(lr.buffer,Zn,qn,qr,3)}else Fe.bufferData(wu,Ir,qn),lr.buffer.dtype=ni||ds,lr.buffer.usage=qn,lr.buffer.dimension=3,lr.buffer.byteLength=Ir;if(ni=Ci,!Ci){switch(lr.buffer.dtype){case ds:case $s:ni=ds;break;case Qs:case vs:ni=Qs;break;case ps:case Mu:ni=ps;break;default:$.raise("unsupported type for element array")}lr.buffer.dtype=ni}lr.type=ni,$(ni!==ps||!!lt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Qr=ti;Qr<0&&(Qr=lr.buffer.byteLength,ni===Qs?Qr>>=1:ni===ps&&(Qr>>=2)),lr.vertCount=Qr;var oi=kr;if(kr<0){oi=hs;var Ii=lr.buffer.dimension;Ii===1&&(oi=_u),Ii===2&&(oi=Fo),Ii===3&&(oi=hs)}lr.primType=oi}function ur(lr){W.elementsCount--,$(lr.buffer!==null,"must not double destroy elements"),delete ct[lr.id],lr.buffer.destroy(),lr.buffer=null}function rr(lr,Zn){var qn=nt.create(null,wu,!0),kr=new fe(qn._buffer);W.elementsCount++;function ti(Ir){if(!Ir)qn(),kr.primType=hs,kr.vertCount=0,kr.type=ds;else if(typeof Ir=="number")qn(Ir),kr.primType=hs,kr.vertCount=Ir|0,kr.type=ds;else{var Ci=null,ni=Aa,qr=-1,Qr=-1,oi=0,Ii=0;Array.isArray(Ir)||U(Ir)||oe(Ir)?Ci=Ir:($.type(Ir,"object","invalid arguments for elements"),"data"in Ir&&(Ci=Ir.data,$(Array.isArray(Ci)||U(Ci)||oe(Ci),"invalid data for element buffer")),"usage"in Ir&&($.parameter(Ir.usage,Do,"invalid element buffer usage"),ni=Do[Ir.usage]),"primitive"in Ir&&($.parameter(Ir.primitive,Ki,"invalid element buffer primitive"),qr=Ki[Ir.primitive]),"count"in Ir&&($(typeof Ir.count=="number"&&Ir.count>=0,"invalid vertex count for elements"),Qr=Ir.count|0),"type"in Ir&&($.parameter(Ir.type,Ut,"invalid buffer type"),Ii=Ut[Ir.type]),"length"in Ir?oi=Ir.length|0:(oi=Qr,Ii===Qs||Ii===vs?oi*=2:(Ii===ps||Ii===Mu)&&(oi*=4))),Rn(kr,Ci,ni,qr,Qr,oi,Ii)}return ti}return ti(lr),ti._reglType="elements",ti._elements=kr,ti.subdata=function(Ir,Ci){return qn.subdata(Ir,Ci),ti},ti.destroy=function(){ur(kr)},ti}return{create:rr,createStream:Ge,destroyStream:Ke,getElements:function(Zn){return typeof Zn=="function"&&Zn._elements instanceof fe?Zn._elements:null},clear:function(){Zt(ct).forEach(ur)}}}var Pu=new Float32Array(1),Zu=new Uint32Array(Pu.buffer),vl=5123;function Tu(Fe){for(var lt=_n.allocType(vl,Fe.length),nt=0;nt<Fe.length;++nt)if(isNaN(Fe[nt]))lt[nt]=65535;else if(Fe[nt]===Infinity)lt[nt]=31744;else if(Fe[nt]===-Infinity)lt[nt]=64512;else{Pu[0]=Fe[nt];var W=Zu[0],ct=W>>>31<<15,Et=(W<<1>>>24)-127,Ut=W>>13&(1<<10)-1;if(Et<-24)lt[nt]=ct;else if(Et<-14){var fe=-14-Et;lt[nt]=ct+(Ut+(1<<10)>>fe)}else Et>15?lt[nt]=ct+31744:lt[nt]=ct+(Et+15<<10)+Ut}return lt}function Ao(Fe){return Array.isArray(Fe)||U(Fe)}var es=function(lt){return!(lt&lt-1)&&!!lt},gs=34467,po=3553,cu=34067,Oo=34069,ba=6408,As=6406,qs=6407,js=6409,ms=6410,Au=32854,ks=32855,Ya=36194,nl=32819,Zl=32820,Al=33635,pl=34042,Ku=6402,Cu=34041,Gs=35904,Cl=35906,ns=36193,Wa=33776,fu=33777,Xu=33778,Ll=33779,Uu=35986,Vs=35987,rl=34798,hu=35840,Ss=35841,Ws=35842,gl=35843,Iu=36196,Lu=5121,du=5123,vu=5125,pu=5126,Ol=10242,rc=10243,ql=10497,gu=33071,Nl=33648,tc=10240,Ou=10241,ml=9728,wl=9729,Bs=9984,ao=9985,yl=9986,il=9987,Hs=33170,Ra=4352,xo=4353,ru=4354,xl=34046,al=3317,ku=37440,zl=37441,cs=37443,bl=37444,mu=33984,Fs=[Bs,yl,ao,il],Wo=[0,js,ms,qs,ba],_s={};_s[js]=_s[As]=_s[Ku]=1,_s[Cu]=_s[ms]=2,_s[qs]=_s[Gs]=3,_s[ba]=_s[Cl]=4;function iu(Fe){return"[object "+Fe+"]"}var Ho=iu("HTMLCanvasElement"),Ni=iu("OffscreenCanvas"),Ns=iu("CanvasRenderingContext2D"),El=iu("ImageBitmap"),ol=iu("HTMLImageElement"),No=iu("HTMLVideoElement"),Co=Object.keys(Si).concat([Ho,Ni,Ns,El,ol,No]),tu=[];tu[Lu]=1,tu[pu]=4,tu[ns]=2,tu[du]=2,tu[vu]=4;var mi=[];mi[Au]=2,mi[ks]=2,mi[Ya]=2,mi[Cu]=4,mi[Wa]=.5,mi[fu]=.5,mi[Xu]=1,mi[Ll]=1,mi[Uu]=.5,mi[Vs]=1,mi[rl]=1,mi[hu]=.5,mi[Ss]=.25,mi[Ws]=.5,mi[gl]=.25,mi[Iu]=.5;function Ru(Fe){return Array.isArray(Fe)&&(Fe.length===0||typeof Fe[0]=="number")}function Du(Fe){if(!Array.isArray(Fe))return!1;var lt=Fe.length;return!(lt===0||!Ao(Fe[0]))}function ju(Fe){return Object.prototype.toString.call(Fe)}function Cs(Fe){return ju(Fe)===Ho}function Ae(Fe){return ju(Fe)===Ni}function _e(Fe){return ju(Fe)===Ns}function pn(Fe){return ju(Fe)===El}function an(Fe){return ju(Fe)===ol}function In(Fe){return ju(Fe)===No}function hr(Fe){if(!Fe)return!1;var lt=ju(Fe);return Co.indexOf(lt)>=0?!0:Ru(Fe)||Du(Fe)||oe(Fe)}function Lr(Fe){return Si[Object.prototype.toString.call(Fe)]|0}function Zr(Fe,lt){var nt=lt.length;switch(Fe.type){case Lu:case du:case vu:case pu:var W=_n.allocType(Fe.type,nt);W.set(lt),Fe.data=W;break;case ns:Fe.data=Tu(lt);break;default:$.raise("unsupported texture type, must specify a typed array")}}function ei(Fe,lt){return _n.allocType(Fe.type===ns?pu:Fe.type,lt)}function Ur(Fe,lt){Fe.type===ns?(Fe.data=Tu(lt),_n.freeType(lt)):Fe.data=lt}function hi(Fe,lt,nt,W,ct,Et){for(var Ut=Fe.width,fe=Fe.height,Ve=Fe.channels,Ge=Ut*fe*Ve,Ke=ei(Fe,Ge),Rn=0,ur=0;ur<fe;++ur)for(var rr=0;rr<Ut;++rr)for(var lr=0;lr<Ve;++lr)Ke[Rn++]=lt[nt*rr+W*ur+ct*lr+Et];Ur(Fe,Ke)}function br(Fe,lt,nt,W,ct,Et){var Ut;if(typeof mi[Fe]!="undefined"?Ut=mi[Fe]:Ut=_s[Fe]*tu[lt],Et&&(Ut*=6),ct){for(var fe=0,Ve=nt;Ve>=1;)fe+=Ut*Ve*Ve,Ve/=2;return fe}else return Ut*nt*W}function Xt(Fe,lt,nt,W,ct,Et,Ut){var fe={"don't care":Ra,"dont care":Ra,nice:ru,fast:xo},Ve={repeat:ql,clamp:gu,mirror:Nl},Ge={nearest:ml,linear:wl},Ke=E({mipmap:il,"nearest mipmap nearest":Bs,"linear mipmap nearest":ao,"nearest mipmap linear":yl,"linear mipmap linear":il},Ge),Rn={none:0,browser:bl},ur={uint8:Lu,rgba4:nl,rgb565:Al,"rgb5 a1":Zl},rr={alpha:As,luminance:js,"luminance alpha":ms,rgb:qs,rgba:ba,rgba4:Au,"rgb5 a1":ks,rgb565:Ya},lr={};lt.ext_srgb&&(rr.srgb=Gs,rr.srgba=Cl),lt.oes_texture_float&&(ur.float32=ur.float=pu),lt.oes_texture_half_float&&(ur.float16=ur["half float"]=ns),lt.webgl_depth_texture&&(E(rr,{depth:Ku,"depth stencil":Cu}),E(ur,{uint16:du,uint32:vu,"depth stencil":pl})),lt.webgl_compressed_texture_s3tc&&E(lr,{"rgb s3tc dxt1":Wa,"rgba s3tc dxt1":fu,"rgba s3tc dxt3":Xu,"rgba s3tc dxt5":Ll}),lt.webgl_compressed_texture_atc&&E(lr,{"rgb atc":Uu,"rgba atc explicit alpha":Vs,"rgba atc interpolated alpha":rl}),lt.webgl_compressed_texture_pvrtc&&E(lr,{"rgb pvrtc 4bppv1":hu,"rgb pvrtc 2bppv1":Ss,"rgba pvrtc 4bppv1":Ws,"rgba pvrtc 2bppv1":gl}),lt.webgl_compressed_texture_etc1&&(lr["rgb etc1"]=Iu);var Zn=Array.prototype.slice.call(Fe.getParameter(gs));Object.keys(lr).forEach(function(jn){var Nr=lr[jn];Zn.indexOf(Nr)>=0&&(rr[jn]=Nr)});var qn=Object.keys(rr);nt.textureFormats=qn;var kr=[];Object.keys(rr).forEach(function(jn){var Nr=rr[jn];kr[Nr]=jn});var ti=[];Object.keys(ur).forEach(function(jn){var Nr=ur[jn];ti[Nr]=jn});var Ir=[];Object.keys(Ge).forEach(function(jn){var Nr=Ge[jn];Ir[Nr]=jn});var Ci=[];Object.keys(Ke).forEach(function(jn){var Nr=Ke[jn];Ci[Nr]=jn});var ni=[];Object.keys(Ve).forEach(function(jn){var Nr=Ve[jn];ni[Nr]=jn});var qr=qn.reduce(function(jn,Nr){var Gr=rr[Nr];return Gr===js||Gr===As||Gr===js||Gr===ms||Gr===Ku||Gr===Cu||lt.ext_srgb&&(Gr===Gs||Gr===Cl)?jn[Gr]=Gr:Gr===ks||Nr.indexOf("rgba")>=0?jn[Gr]=ba:jn[Gr]=qs,jn},{});function Qr(){this.internalformat=ba,this.format=ba,this.type=Lu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=bl,this.width=0,this.height=0,this.channels=0}function oi(jn,Nr){jn.internalformat=Nr.internalformat,jn.format=Nr.format,jn.type=Nr.type,jn.compressed=Nr.compressed,jn.premultiplyAlpha=Nr.premultiplyAlpha,jn.flipY=Nr.flipY,jn.unpackAlignment=Nr.unpackAlignment,jn.colorSpace=Nr.colorSpace,jn.width=Nr.width,jn.height=Nr.height,jn.channels=Nr.channels}function Ii(jn,Nr){if(!(typeof Nr!="object"||!Nr)){if("premultiplyAlpha"in Nr&&($.type(Nr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),jn.premultiplyAlpha=Nr.premultiplyAlpha),"flipY"in Nr&&($.type(Nr.flipY,"boolean","invalid texture flip"),jn.flipY=Nr.flipY),"alignment"in Nr&&($.oneOf(Nr.alignment,[1,2,4,8],"invalid texture unpack alignment"),jn.unpackAlignment=Nr.alignment),"colorSpace"in Nr&&($.parameter(Nr.colorSpace,Rn,"invalid colorSpace"),jn.colorSpace=Rn[Nr.colorSpace]),"type"in Nr){var Gr=Nr.type;$(lt.oes_texture_float||!(Gr==="float"||Gr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),$(lt.oes_texture_half_float||!(Gr==="half float"||Gr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),$(lt.webgl_depth_texture||!(Gr==="uint16"||Gr==="uint32"||Gr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),$.parameter(Gr,ur,"invalid texture type"),jn.type=ur[Gr]}var Yi=jn.width,Qi=jn.height,Mn=jn.channels,un=!1;"shape"in Nr?($(Array.isArray(Nr.shape)&&Nr.shape.length>=2,"shape must be an array"),Yi=Nr.shape[0],Qi=Nr.shape[1],Nr.shape.length===3&&(Mn=Nr.shape[2],$(Mn>0&&Mn<=4,"invalid number of channels"),un=!0),$(Yi>=0&&Yi<=nt.maxTextureSize,"invalid width"),$(Qi>=0&&Qi<=nt.maxTextureSize,"invalid height")):("radius"in Nr&&(Yi=Qi=Nr.radius,$(Yi>=0&&Yi<=nt.maxTextureSize,"invalid radius")),"width"in Nr&&(Yi=Nr.width,$(Yi>=0&&Yi<=nt.maxTextureSize,"invalid width")),"height"in Nr&&(Qi=Nr.height,$(Qi>=0&&Qi<=nt.maxTextureSize,"invalid height")),"channels"in Nr&&(Mn=Nr.channels,$(Mn>0&&Mn<=4,"invalid number of channels"),un=!0)),jn.width=Yi|0,jn.height=Qi|0,jn.channels=Mn|0;var ir=!1;if("format"in Nr){var wr=Nr.format;$(lt.webgl_depth_texture||!(wr==="depth"||wr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),$.parameter(wr,rr,"invalid texture format");var Rr=jn.internalformat=rr[wr];jn.format=qr[Rr],wr in ur&&("type"in Nr||(jn.type=ur[wr])),wr in lr&&(jn.compressed=!0),ir=!0}!un&&ir?jn.channels=_s[jn.format]:un&&!ir?jn.channels!==Wo[jn.format]&&(jn.format=jn.internalformat=Wo[jn.channels]):ir&&un&&$(jn.channels===_s[jn.format],"number of channels inconsistent with specified format")}}function ki(jn){Fe.pixelStorei(ku,jn.flipY),Fe.pixelStorei(zl,jn.premultiplyAlpha),Fe.pixelStorei(cs,jn.colorSpace),Fe.pixelStorei(al,jn.unpackAlignment)}function xi(){Qr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function di(jn,Nr){var Gr=null;if(hr(Nr)?Gr=Nr:Nr&&($.type(Nr,"object","invalid pixel data type"),Ii(jn,Nr),"x"in Nr&&(jn.xOffset=Nr.x|0),"y"in Nr&&(jn.yOffset=Nr.y|0),hr(Nr.data)&&(Gr=Nr.data)),$(!jn.compressed||Gr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Nr.copy){$(!Gr,"can not specify copy and data field for the same texture");var Yi=ct.viewportWidth,Qi=ct.viewportHeight;jn.width=jn.width||Yi-jn.xOffset,jn.height=jn.height||Qi-jn.yOffset,jn.needsCopy=!0,$(jn.xOffset>=0&&jn.xOffset<Yi&&jn.yOffset>=0&&jn.yOffset<Qi&&jn.width>0&&jn.width<=Yi&&jn.height>0&&jn.height<=Qi,"copy texture read out of bounds")}else if(!Gr)jn.width=jn.width||1,jn.height=jn.height||1,jn.channels=jn.channels||4;else if(U(Gr))jn.channels=jn.channels||4,jn.data=Gr,!("type"in Nr)&&jn.type===Lu&&(jn.type=Lr(Gr));else if(Ru(Gr))jn.channels=jn.channels||4,Zr(jn,Gr),jn.alignment=1,jn.needsFree=!0;else if(oe(Gr)){var Mn=Gr.data;!Array.isArray(Mn)&&jn.type===Lu&&(jn.type=Lr(Mn));var un=Gr.shape,ir=Gr.stride,wr,Rr,sr,or,Sr,An;un.length===3?(sr=un[2],An=ir[2]):($(un.length===2,"invalid ndarray pixel data, must be 2 or 3D"),sr=1,An=1),wr=un[0],Rr=un[1],or=ir[0],Sr=ir[1],jn.alignment=1,jn.width=wr,jn.height=Rr,jn.channels=sr,jn.format=jn.internalformat=Wo[sr],jn.needsFree=!0,hi(jn,Mn,or,Sr,An,Gr.offset)}else if(Cs(Gr)||Ae(Gr)||_e(Gr))Cs(Gr)||Ae(Gr)?jn.element=Gr:jn.element=Gr.canvas,jn.width=jn.element.width,jn.height=jn.element.height,jn.channels=4;else if(pn(Gr))jn.element=Gr,jn.width=Gr.width,jn.height=Gr.height,jn.channels=4;else if(an(Gr))jn.element=Gr,jn.width=Gr.naturalWidth,jn.height=Gr.naturalHeight,jn.channels=4;else if(In(Gr))jn.element=Gr,jn.width=Gr.videoWidth,jn.height=Gr.videoHeight,jn.channels=4;else if(Du(Gr)){var tr=jn.width||Gr[0].length,bn=jn.height||Gr.length,Tr=jn.channels;Ao(Gr[0][0])?Tr=Tr||Gr[0][0].length:Tr=Tr||1;for(var jr=be.shape(Gr),ci=1,Yr=0;Yr<jr.length;++Yr)ci*=jr[Yr];var ri=ei(jn,ci);be.flatten(Gr,jr,"",ri),Ur(jn,ri),jn.alignment=1,jn.width=tr,jn.height=bn,jn.channels=Tr,jn.format=jn.internalformat=Wo[Tr],jn.needsFree=!0}jn.type===pu?$(nt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):jn.type===ns&&$(nt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ui(jn,Nr,Gr){var Yi=jn.element,Qi=jn.data,Mn=jn.internalformat,un=jn.format,ir=jn.type,wr=jn.width,Rr=jn.height;ki(jn),Yi?Fe.texImage2D(Nr,Gr,un,un,ir,Yi):jn.compressed?Fe.compressedTexImage2D(Nr,Gr,Mn,wr,Rr,0,Qi):jn.needsCopy?(W(),Fe.copyTexImage2D(Nr,Gr,un,jn.xOffset,jn.yOffset,wr,Rr,0)):Fe.texImage2D(Nr,Gr,un,wr,Rr,0,un,ir,Qi||null)}function da(jn,Nr,Gr,Yi,Qi){var Mn=jn.element,un=jn.data,ir=jn.internalformat,wr=jn.format,Rr=jn.type,sr=jn.width,or=jn.height;ki(jn),Mn?Fe.texSubImage2D(Nr,Qi,Gr,Yi,wr,Rr,Mn):jn.compressed?Fe.compressedTexSubImage2D(Nr,Qi,Gr,Yi,ir,sr,or,un):jn.needsCopy?(W(),Fe.copyTexSubImage2D(Nr,Qi,Gr,Yi,jn.xOffset,jn.yOffset,sr,or)):Fe.texSubImage2D(Nr,Qi,Gr,Yi,sr,or,wr,Rr,un)}var aa=[];function Gi(){return aa.pop()||new xi}function oo(jn){jn.needsFree&&_n.freeType(jn.data),xi.call(jn),aa.push(jn)}function ja(){Qr.call(this),this.genMipmaps=!1,this.mipmapHint=Ra,this.mipmask=0,this.images=Array(16)}function So(jn,Nr,Gr){var Yi=jn.images[0]=Gi();jn.mipmask=1,Yi.width=jn.width=Nr,Yi.height=jn.height=Gr,Yi.channels=jn.channels=4}function Io(jn,Nr){var Gr=null;if(hr(Nr))Gr=jn.images[0]=Gi(),oi(Gr,jn),di(Gr,Nr),jn.mipmask=1;else if(Ii(jn,Nr),Array.isArray(Nr.mipmap))for(var Yi=Nr.mipmap,Qi=0;Qi<Yi.length;++Qi)Gr=jn.images[Qi]=Gi(),oi(Gr,jn),Gr.width>>=Qi,Gr.height>>=Qi,di(Gr,Yi[Qi]),jn.mipmask|=1<<Qi;else Gr=jn.images[0]=Gi(),oi(Gr,jn),di(Gr,Nr),jn.mipmask=1;oi(jn,jn.images[0]),jn.compressed&&(jn.internalformat===Wa||jn.internalformat===fu||jn.internalformat===Xu||jn.internalformat===Ll)&&$(jn.width%4==0&&jn.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ou(jn,Nr){for(var Gr=jn.images,Yi=0;Yi<Gr.length;++Yi){if(!Gr[Yi])return;ui(Gr[Yi],Nr,Yi)}}var Bl=[];function Po(){var jn=Bl.pop()||new ja;Qr.call(jn),jn.mipmask=0;for(var Nr=0;Nr<16;++Nr)jn.images[Nr]=null;return jn}function Qu(jn){for(var Nr=jn.images,Gr=0;Gr<Nr.length;++Gr)Nr[Gr]&&oo(Nr[Gr]),Nr[Gr]=null;Bl.push(jn)}function bu(){this.minFilter=ml,this.magFilter=ml,this.wrapS=gu,this.wrapT=gu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ra}function zo(jn,Nr){if("min"in Nr){var Gr=Nr.min;$.parameter(Gr,Ke),jn.minFilter=Ke[Gr],Fs.indexOf(jn.minFilter)>=0&&!("faces"in Nr)&&(jn.genMipmaps=!0)}if("mag"in Nr){var Yi=Nr.mag;$.parameter(Yi,Ge),jn.magFilter=Ge[Yi]}var Qi=jn.wrapS,Mn=jn.wrapT;if("wrap"in Nr){var un=Nr.wrap;typeof un=="string"?($.parameter(un,Ve),Qi=Mn=Ve[un]):Array.isArray(un)&&($.parameter(un[0],Ve),$.parameter(un[1],Ve),Qi=Ve[un[0]],Mn=Ve[un[1]])}else{if("wrapS"in Nr){var ir=Nr.wrapS;$.parameter(ir,Ve),Qi=Ve[ir]}if("wrapT"in Nr){var wr=Nr.wrapT;$.parameter(wr,Ve),Mn=Ve[wr]}}if(jn.wrapS=Qi,jn.wrapT=Mn,"anisotropic"in Nr){var Rr=Nr.anisotropic;$(typeof Rr=="number"&&Rr>=1&&Rr<=nt.maxAnisotropic,"aniso samples must be between 1 and "),jn.anisotropic=Nr.anisotropic}if("mipmap"in Nr){var sr=!1;switch(typeof Nr.mipmap){case"string":$.parameter(Nr.mipmap,fe,"invalid mipmap hint"),jn.mipmapHint=fe[Nr.mipmap],jn.genMipmaps=!0,sr=!0;break;case"boolean":sr=jn.genMipmaps=Nr.mipmap;break;case"object":$(Array.isArray(Nr.mipmap),"invalid mipmap type"),jn.genMipmaps=!1,sr=!0;break;default:$.raise("invalid mipmap type")}sr&&!("min"in Nr)&&(jn.minFilter=Bs)}}function Xs(jn,Nr){Fe.texParameteri(Nr,Ou,jn.minFilter),Fe.texParameteri(Nr,tc,jn.magFilter),Fe.texParameteri(Nr,Ol,jn.wrapS),Fe.texParameteri(Nr,rc,jn.wrapT),lt.ext_texture_filter_anisotropic&&Fe.texParameteri(Nr,xl,jn.anisotropic),jn.genMipmaps&&(Fe.hint(Hs,jn.mipmapHint),Fe.generateMipmap(Nr))}var Fl=0,kl={},cc=nt.maxTextureUnits,Ml=Array(cc).map(function(){return null});function co(jn){Qr.call(this),this.mipmask=0,this.internalformat=ba,this.id=Fl++,this.refCount=1,this.target=jn,this.texture=Fe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new bu,Ut.profile&&(this.stats={size:0})}function pc(jn){Fe.activeTexture(mu),Fe.bindTexture(jn.target,jn.texture)}function xs(){var jn=Ml[0];jn?Fe.bindTexture(jn.target,jn.texture):Fe.bindTexture(po,null)}function Ma(jn){var Nr=jn.texture;$(Nr,"must not double destroy texture");var Gr=jn.unit,Yi=jn.target;Gr>=0&&(Fe.activeTexture(mu+Gr),Fe.bindTexture(Yi,null),Ml[Gr]=null),Fe.deleteTexture(Nr),jn.texture=null,jn.params=null,jn.pixels=null,jn.refCount=0,delete kl[jn.id],Et.textureCount--}E(co.prototype,{bind:function(){var Nr=this;Nr.bindCount+=1;var Gr=Nr.unit;if(Gr<0){for(var Yi=0;Yi<cc;++Yi){var Qi=Ml[Yi];if(Qi){if(Qi.bindCount>0)continue;Qi.unit=-1}Ml[Yi]=Nr,Gr=Yi;break}Gr>=cc&&$.raise("insufficient number of texture units"),Ut.profile&&Et.maxTextureUnits<Gr+1&&(Et.maxTextureUnits=Gr+1),Nr.unit=Gr,Fe.activeTexture(mu+Gr),Fe.bindTexture(Nr.target,Nr.texture)}return Gr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ma(this)}});function _o(jn,Nr){var Gr=new co(po);kl[Gr.id]=Gr,Et.textureCount++;function Yi(un,ir){var wr=Gr.texInfo;bu.call(wr);var Rr=Po();return typeof un=="number"?typeof ir=="number"?So(Rr,un|0,ir|0):So(Rr,un|0,un|0):un?($.type(un,"object","invalid arguments to regl.texture"),zo(wr,un),Io(Rr,un)):So(Rr,1,1),wr.genMipmaps&&(Rr.mipmask=(Rr.width<<1)-1),Gr.mipmask=Rr.mipmask,oi(Gr,Rr),$.texture2D(wr,Rr,nt),Gr.internalformat=Rr.internalformat,Yi.width=Rr.width,Yi.height=Rr.height,pc(Gr),ou(Rr,po),Xs(wr,po),xs(),Qu(Rr),Ut.profile&&(Gr.stats.size=br(Gr.internalformat,Gr.type,Rr.width,Rr.height,wr.genMipmaps,!1)),Yi.format=kr[Gr.internalformat],Yi.type=ti[Gr.type],Yi.mag=Ir[wr.magFilter],Yi.min=Ci[wr.minFilter],Yi.wrapS=ni[wr.wrapS],Yi.wrapT=ni[wr.wrapT],Yi}function Qi(un,ir,wr,Rr){$(!!un,"must specify image data");var sr=ir|0,or=wr|0,Sr=Rr|0,An=Gi();return oi(An,Gr),An.width=0,An.height=0,di(An,un),An.width=An.width||(Gr.width>>Sr)-sr,An.height=An.height||(Gr.height>>Sr)-or,$(Gr.type===An.type&&Gr.format===An.format&&Gr.internalformat===An.internalformat,"incompatible format for texture.subimage"),$(sr>=0&&or>=0&&sr+An.width<=Gr.width&&or+An.height<=Gr.height,"texture.subimage write out of bounds"),$(Gr.mipmask&1<<Sr,"missing mipmap data"),$(An.data||An.element||An.needsCopy,"missing image data"),pc(Gr),da(An,po,sr,or,Sr),xs(),oo(An),Yi}function Mn(un,ir){var wr=un|0,Rr=ir|0||wr;if(wr===Gr.width&&Rr===Gr.height)return Yi;Yi.width=Gr.width=wr,Yi.height=Gr.height=Rr,pc(Gr);for(var sr=0;Gr.mipmask>>sr;++sr){var or=wr>>sr,Sr=Rr>>sr;if(!or||!Sr)break;Fe.texImage2D(po,sr,Gr.format,or,Sr,0,Gr.format,Gr.type,null)}return xs(),Ut.profile&&(Gr.stats.size=br(Gr.internalformat,Gr.type,wr,Rr,!1,!1)),Yi}return Yi(jn,Nr),Yi.subimage=Qi,Yi.resize=Mn,Yi._reglType="texture2d",Yi._texture=Gr,Ut.profile&&(Yi.stats=Gr.stats),Yi.destroy=function(){Gr.decRef()},Yi}function Uo(jn,Nr,Gr,Yi,Qi,Mn){var un=new co(cu);kl[un.id]=un,Et.cubeCount++;var ir=new Array(6);function wr(or,Sr,An,tr,bn,Tr){var jr,ci=un.texInfo;for(bu.call(ci),jr=0;jr<6;++jr)ir[jr]=Po();if(typeof or=="number"||!or){var Yr=or|0||1;for(jr=0;jr<6;++jr)So(ir[jr],Yr,Yr)}else if(typeof or=="object")if(Sr)Io(ir[0],or),Io(ir[1],Sr),Io(ir[2],An),Io(ir[3],tr),Io(ir[4],bn),Io(ir[5],Tr);else if(zo(ci,or),Ii(un,or),"faces"in or){var ri=or.faces;for($(Array.isArray(ri)&&ri.length===6,"cube faces must be a length 6 array"),jr=0;jr<6;++jr)$(typeof ri[jr]=="object"&&!!ri[jr],"invalid input for cube map face"),oi(ir[jr],un),Io(ir[jr],ri[jr])}else for(jr=0;jr<6;++jr)Io(ir[jr],or);else $.raise("invalid arguments to cube map");for(oi(un,ir[0]),nt.npotTextureCube||$(es(un.width)&&es(un.height),"your browser does not support non power or two texture dimensions"),ci.genMipmaps?un.mipmask=(ir[0].width<<1)-1:un.mipmask=ir[0].mipmask,$.textureCube(un,ci,ir,nt),un.internalformat=ir[0].internalformat,wr.width=ir[0].width,wr.height=ir[0].height,pc(un),jr=0;jr<6;++jr)ou(ir[jr],Oo+jr);for(Xs(ci,cu),xs(),Ut.profile&&(un.stats.size=br(un.internalformat,un.type,wr.width,wr.height,ci.genMipmaps,!0)),wr.format=kr[un.internalformat],wr.type=ti[un.type],wr.mag=Ir[ci.magFilter],wr.min=Ci[ci.minFilter],wr.wrapS=ni[ci.wrapS],wr.wrapT=ni[ci.wrapT],jr=0;jr<6;++jr)Qu(ir[jr]);return wr}function Rr(or,Sr,An,tr,bn){$(!!Sr,"must specify image data"),$(typeof or=="number"&&or===(or|0)&&or>=0&&or<6,"invalid face");var Tr=An|0,jr=tr|0,ci=bn|0,Yr=Gi();return oi(Yr,un),Yr.width=0,Yr.height=0,di(Yr,Sr),Yr.width=Yr.width||(un.width>>ci)-Tr,Yr.height=Yr.height||(un.height>>ci)-jr,$(un.type===Yr.type&&un.format===Yr.format&&un.internalformat===Yr.internalformat,"incompatible format for texture.subimage"),$(Tr>=0&&jr>=0&&Tr+Yr.width<=un.width&&jr+Yr.height<=un.height,"texture.subimage write out of bounds"),$(un.mipmask&1<<ci,"missing mipmap data"),$(Yr.data||Yr.element||Yr.needsCopy,"missing image data"),pc(un),da(Yr,Oo+or,Tr,jr,ci),xs(),oo(Yr),wr}function sr(or){var Sr=or|0;if(Sr!==un.width){wr.width=un.width=Sr,wr.height=un.height=Sr,pc(un);for(var An=0;An<6;++An)for(var tr=0;un.mipmask>>tr;++tr)Fe.texImage2D(Oo+An,tr,un.format,Sr>>tr,Sr>>tr,0,un.format,un.type,null);return xs(),Ut.profile&&(un.stats.size=br(un.internalformat,un.type,wr.width,wr.height,!1,!0)),wr}}return wr(jn,Nr,Gr,Yi,Qi,Mn),wr.subimage=Rr,wr.resize=sr,wr._reglType="textureCube",wr._texture=un,Ut.profile&&(wr.stats=un.stats),wr.destroy=function(){un.decRef()},wr}function Gl(){for(var jn=0;jn<cc;++jn)Fe.activeTexture(mu+jn),Fe.bindTexture(po,null),Ml[jn]=null;Zt(kl).forEach(Ma),Et.cubeCount=0,Et.textureCount=0}Ut.profile&&(Et.getTotalTextureSize=function(){var jn=0;return Object.keys(kl).forEach(function(Nr){jn+=kl[Nr].stats.size}),jn});function Vl(){for(var jn=0;jn<cc;++jn){var Nr=Ml[jn];Nr&&(Nr.bindCount=0,Nr.unit=-1,Ml[jn]=null)}Zt(kl).forEach(function(Gr){Gr.texture=Fe.createTexture(),Fe.bindTexture(Gr.target,Gr.texture);for(var Yi=0;Yi<32;++Yi)if((Gr.mipmask&1<<Yi)!=0)if(Gr.target===po)Fe.texImage2D(po,Yi,Gr.internalformat,Gr.width>>Yi,Gr.height>>Yi,0,Gr.internalformat,Gr.type,null);else for(var Qi=0;Qi<6;++Qi)Fe.texImage2D(Oo+Qi,Yi,Gr.internalformat,Gr.width>>Yi,Gr.height>>Yi,0,Gr.internalformat,Gr.type,null);Xs(Gr.texInfo,Gr.target)})}function ef(){for(var jn=0;jn<cc;++jn){var Nr=Ml[jn];Nr&&(Nr.bindCount=0,Nr.unit=-1,Ml[jn]=null),Fe.activeTexture(mu+jn),Fe.bindTexture(po,null),Fe.bindTexture(cu,null)}}return{create2D:_o,createCube:Uo,clear:Gl,getTexture:function(Nr){return null},restore:Vl,refresh:ef}}var ee=36161,Oe=32854,Ee=32855,jt=36194,zt=33189,se=36168,ie=34041,he=35907,Be=34836,Ze=34842,on=34843,$e=[];$e[Oe]=2,$e[Ee]=2,$e[jt]=2,$e[zt]=2,$e[se]=1,$e[ie]=4,$e[he]=4,$e[Be]=16,$e[Ze]=8,$e[on]=6;function gn(Fe,lt,nt){return $e[Fe]*lt*nt}var vn=function(lt,nt,W,ct,Et){var Ut={rgba4:Oe,rgb565:jt,"rgb5 a1":Ee,depth:zt,stencil:se,"depth stencil":ie};nt.ext_srgb&&(Ut.srgba=he),nt.ext_color_buffer_half_float&&(Ut.rgba16f=Ze,Ut.rgb16f=on),nt.webgl_color_buffer_float&&(Ut.rgba32f=Be);var fe=[];Object.keys(Ut).forEach(function(lr){var Zn=Ut[lr];fe[Zn]=lr});var Ve=0,Ge={};function Ke(lr){this.id=Ve++,this.refCount=1,this.renderbuffer=lr,this.format=Oe,this.width=0,this.height=0,Et.profile&&(this.stats={size:0})}Ke.prototype.decRef=function(){--this.refCount<=0&&Rn(this)};function Rn(lr){var Zn=lr.renderbuffer;$(Zn,"must not double destroy renderbuffer"),lt.bindRenderbuffer(ee,null),lt.deleteRenderbuffer(Zn),lr.renderbuffer=null,lr.refCount=0,delete Ge[lr.id],ct.renderbufferCount--}function ur(lr,Zn){var qn=new Ke(lt.createRenderbuffer());Ge[qn.id]=qn,ct.renderbufferCount++;function kr(Ir,Ci){var ni=0,qr=0,Qr=Oe;if(typeof Ir=="object"&&Ir){var oi=Ir;if("shape"in oi){var Ii=oi.shape;$(Array.isArray(Ii)&&Ii.length>=2,"invalid renderbuffer shape"),ni=Ii[0]|0,qr=Ii[1]|0}else"radius"in oi&&(ni=qr=oi.radius|0),"width"in oi&&(ni=oi.width|0),"height"in oi&&(qr=oi.height|0);"format"in oi&&($.parameter(oi.format,Ut,"invalid renderbuffer format"),Qr=Ut[oi.format])}else typeof Ir=="number"?(ni=Ir|0,typeof Ci=="number"?qr=Ci|0:qr=ni):Ir?$.raise("invalid arguments to renderbuffer constructor"):ni=qr=1;if($(ni>0&&qr>0&&ni<=W.maxRenderbufferSize&&qr<=W.maxRenderbufferSize,"invalid renderbuffer size"),!(ni===qn.width&&qr===qn.height&&Qr===qn.format))return kr.width=qn.width=ni,kr.height=qn.height=qr,qn.format=Qr,lt.bindRenderbuffer(ee,qn.renderbuffer),lt.renderbufferStorage(ee,Qr,ni,qr),$(lt.getError()===0,"invalid render buffer format"),Et.profile&&(qn.stats.size=gn(qn.format,qn.width,qn.height)),kr.format=fe[qn.format],kr}function ti(Ir,Ci){var ni=Ir|0,qr=Ci|0||ni;return ni===qn.width&&qr===qn.height||($(ni>0&&qr>0&&ni<=W.maxRenderbufferSize&&qr<=W.maxRenderbufferSize,"invalid renderbuffer size"),kr.width=qn.width=ni,kr.height=qn.height=qr,lt.bindRenderbuffer(ee,qn.renderbuffer),lt.renderbufferStorage(ee,qn.format,ni,qr),$(lt.getError()===0,"invalid render buffer format"),Et.profile&&(qn.stats.size=gn(qn.format,qn.width,qn.height))),kr}return kr(lr,Zn),kr.resize=ti,kr._reglType="renderbuffer",kr._renderbuffer=qn,Et.profile&&(kr.stats=qn.stats),kr.destroy=function(){qn.decRef()},kr}Et.profile&&(ct.getTotalRenderbufferSize=function(){var lr=0;return Object.keys(Ge).forEach(function(Zn){lr+=Ge[Zn].stats.size}),lr});function rr(){Zt(Ge).forEach(function(lr){lr.renderbuffer=lt.createRenderbuffer(),lt.bindRenderbuffer(ee,lr.renderbuffer),lt.renderbufferStorage(ee,lr.format,lr.width,lr.height)}),lt.bindRenderbuffer(ee,null)}return{create:ur,clear:function(){Zt(Ge).forEach(Rn)},restore:rr}},Xn=36160,Wn=36161,Jn=3553,Hn=34069,fr=36064,xr=36096,Vr=36128,gi=33306,Fr=36053,ai=36054,yi=36055,Ui=36057,Pi=36061,pa=36193,ta=5121,oa=5126,si=6407,ma=6408,to=6402,Ha=[si,ma],_i=[];_i[ma]=4,_i[si]=3;var Fa=[];Fa[ta]=1,Fa[oa]=4,Fa[pa]=2;var Za=32854,Os=32855,Ms=36194,ws=33189,au=36168,j=34041,I=35907,w=34836,B=34842,D=34843,G=[Za,Os,Ms,I,B,D,w],Q={};Q[Fr]="complete",Q[ai]="incomplete attachment",Q[Ui]="incomplete dimensions",Q[yi]="incomplete, missing attachment",Q[Pi]="unsupported";function ut(Fe,lt,nt,W,ct,Et){var Ut={cur:null,next:null,dirty:!1,setFBO:null},fe=["rgba"],Ve=["rgba4","rgb565","rgb5 a1"];lt.ext_srgb&&Ve.push("srgba"),lt.ext_color_buffer_half_float&&Ve.push("rgba16f","rgb16f"),lt.webgl_color_buffer_float&&Ve.push("rgba32f");var Ge=["uint8"];lt.oes_texture_half_float&&Ge.push("half float","float16"),lt.oes_texture_float&&Ge.push("float","float32");function Ke(xi,di,ui){this.target=xi,this.texture=di,this.renderbuffer=ui;var da=0,aa=0;di?(da=di.width,aa=di.height):ui&&(da=ui.width,aa=ui.height),this.width=da,this.height=aa}function Rn(xi){xi&&(xi.texture&&xi.texture._texture.decRef(),xi.renderbuffer&&xi.renderbuffer._renderbuffer.decRef())}function ur(xi,di,ui){if(!!xi)if(xi.texture){var da=xi.texture._texture,aa=Math.max(1,da.width),Gi=Math.max(1,da.height);$(aa===di&&Gi===ui,"inconsistent width/height for supplied texture"),da.refCount+=1}else{var oo=xi.renderbuffer._renderbuffer;$(oo.width===di&&oo.height===ui,"inconsistent width/height for renderbuffer"),oo.refCount+=1}}function rr(xi,di){di&&(di.texture?Fe.framebufferTexture2D(Xn,xi,di.target,di.texture._texture.texture,0):Fe.framebufferRenderbuffer(Xn,xi,Wn,di.renderbuffer._renderbuffer.renderbuffer))}function lr(xi){var di=Jn,ui=null,da=null,aa=xi;typeof xi=="object"&&(aa=xi.data,"target"in xi&&(di=xi.target|0)),$.type(aa,"function","invalid attachment data");var Gi=aa._reglType;return Gi==="texture2d"?(ui=aa,$(di===Jn)):Gi==="textureCube"?(ui=aa,$(di>=Hn&&di<Hn+6,"invalid cube map target")):Gi==="renderbuffer"?(da=aa,di=Wn):$.raise("invalid regl object for attachment"),new Ke(di,ui,da)}function Zn(xi,di,ui,da,aa){if(ui){var Gi=W.create2D({width:xi,height:di,format:da,type:aa});return Gi._texture.refCount=0,new Ke(Jn,Gi,null)}else{var oo=ct.create({width:xi,height:di,format:da});return oo._renderbuffer.refCount=0,new Ke(Wn,null,oo)}}function qn(xi){return xi&&(xi.texture||xi.renderbuffer)}function kr(xi,di,ui){xi&&(xi.texture?xi.texture.resize(di,ui):xi.renderbuffer&&xi.renderbuffer.resize(di,ui),xi.width=di,xi.height=ui)}var ti=0,Ir={};function Ci(){this.id=ti++,Ir[this.id]=this,this.framebuffer=Fe.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ni(xi){xi.colorAttachments.forEach(Rn),Rn(xi.depthAttachment),Rn(xi.stencilAttachment),Rn(xi.depthStencilAttachment)}function qr(xi){var di=xi.framebuffer;$(di,"must not double destroy framebuffer"),Fe.deleteFramebuffer(di),xi.framebuffer=null,Et.framebufferCount--,delete Ir[xi.id]}function Qr(xi){var di;Fe.bindFramebuffer(Xn,xi.framebuffer);var ui=xi.colorAttachments;for(di=0;di<ui.length;++di)rr(fr+di,ui[di]);for(di=ui.length;di<nt.maxColorAttachments;++di)Fe.framebufferTexture2D(Xn,fr+di,Jn,null,0);Fe.framebufferTexture2D(Xn,gi,Jn,null,0),Fe.framebufferTexture2D(Xn,xr,Jn,null,0),Fe.framebufferTexture2D(Xn,Vr,Jn,null,0),rr(xr,xi.depthAttachment),rr(Vr,xi.stencilAttachment),rr(gi,xi.depthStencilAttachment);var da=Fe.checkFramebufferStatus(Xn);!Fe.isContextLost()&&da!==Fr&&$.raise("framebuffer configuration not supported, status = "+Q[da]),Fe.bindFramebuffer(Xn,Ut.next?Ut.next.framebuffer:null),Ut.cur=Ut.next,Fe.getError()}function oi(xi,di){var ui=new Ci;Et.framebufferCount++;function da(Gi,oo){var ja;$(Ut.next!==ui,"can not update framebuffer which is currently in use");var So=0,Io=0,ou=!0,Bl=!0,Po=null,Qu=!0,bu="rgba",zo="uint8",Xs=1,Fl=null,kl=null,cc=null,Ml=!1;if(typeof Gi=="number")So=Gi|0,Io=oo|0||So;else if(!Gi)So=Io=1;else{$.type(Gi,"object","invalid arguments for framebuffer");var co=Gi;if("shape"in co){var pc=co.shape;$(Array.isArray(pc)&&pc.length>=2,"invalid shape for framebuffer"),So=pc[0],Io=pc[1]}else"radius"in co&&(So=Io=co.radius),"width"in co&&(So=co.width),"height"in co&&(Io=co.height);("color"in co||"colors"in co)&&(Po=co.color||co.colors,Array.isArray(Po)&&$(Po.length===1||lt.webgl_draw_buffers,"multiple render targets not supported")),Po||("colorCount"in co&&(Xs=co.colorCount|0,$(Xs>0,"invalid color buffer count")),"colorTexture"in co&&(Qu=!!co.colorTexture,bu="rgba4"),"colorType"in co&&(zo=co.colorType,Qu?($(lt.oes_texture_float||!(zo==="float"||zo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),$(lt.oes_texture_half_float||!(zo==="half float"||zo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):zo==="half float"||zo==="float16"?($(lt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),bu="rgba16f"):(zo==="float"||zo==="float32")&&($(lt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),bu="rgba32f"),$.oneOf(zo,Ge,"invalid color type")),"colorFormat"in co&&(bu=co.colorFormat,fe.indexOf(bu)>=0?Qu=!0:Ve.indexOf(bu)>=0?Qu=!1:Qu?$.oneOf(co.colorFormat,fe,"invalid color format for texture"):$.oneOf(co.colorFormat,Ve,"invalid color format for renderbuffer"))),("depthTexture"in co||"depthStencilTexture"in co)&&(Ml=!!(co.depthTexture||co.depthStencilTexture),$(!Ml||lt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in co&&(typeof co.depth=="boolean"?ou=co.depth:(Fl=co.depth,Bl=!1)),"stencil"in co&&(typeof co.stencil=="boolean"?Bl=co.stencil:(kl=co.stencil,ou=!1)),"depthStencil"in co&&(typeof co.depthStencil=="boolean"?ou=Bl=co.depthStencil:(cc=co.depthStencil,ou=!1,Bl=!1))}var xs=null,Ma=null,_o=null,Uo=null;if(Array.isArray(Po))xs=Po.map(lr);else if(Po)xs=[lr(Po)];else for(xs=new Array(Xs),ja=0;ja<Xs;++ja)xs[ja]=Zn(So,Io,Qu,bu,zo);$(lt.webgl_draw_buffers||xs.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),$(xs.length<=nt.maxColorAttachments,"too many color attachments, not supported"),So=So||xs[0].width,Io=Io||xs[0].height,Fl?Ma=lr(Fl):ou&&!Bl&&(Ma=Zn(So,Io,Ml,"depth","uint32")),kl?_o=lr(kl):Bl&&!ou&&(_o=Zn(So,Io,!1,"stencil","uint8")),cc?Uo=lr(cc):!Fl&&!kl&&Bl&&ou&&(Uo=Zn(So,Io,Ml,"depth stencil","depth stencil")),$(!!Fl+!!kl+!!cc<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Gl=null;for(ja=0;ja<xs.length;++ja)if(ur(xs[ja],So,Io),$(!xs[ja]||xs[ja].texture&&Ha.indexOf(xs[ja].texture._texture.format)>=0||xs[ja].renderbuffer&&G.indexOf(xs[ja].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ja+" is invalid"),xs[ja]&&xs[ja].texture){var Vl=_i[xs[ja].texture._texture.format]*Fa[xs[ja].texture._texture.type];Gl===null?Gl=Vl:$(Gl===Vl,"all color attachments much have the same number of bits per pixel.")}return ur(Ma,So,Io),$(!Ma||Ma.texture&&Ma.texture._texture.format===to||Ma.renderbuffer&&Ma.renderbuffer._renderbuffer.format===ws,"invalid depth attachment for framebuffer object"),ur(_o,So,Io),$(!_o||_o.renderbuffer&&_o.renderbuffer._renderbuffer.format===au,"invalid stencil attachment for framebuffer object"),ur(Uo,So,Io),$(!Uo||Uo.texture&&Uo.texture._texture.format===j||Uo.renderbuffer&&Uo.renderbuffer._renderbuffer.format===j,"invalid depth-stencil attachment for framebuffer object"),ni(ui),ui.width=So,ui.height=Io,ui.colorAttachments=xs,ui.depthAttachment=Ma,ui.stencilAttachment=_o,ui.depthStencilAttachment=Uo,da.color=xs.map(qn),da.depth=qn(Ma),da.stencil=qn(_o),da.depthStencil=qn(Uo),da.width=ui.width,da.height=ui.height,Qr(ui),da}function aa(Gi,oo){$(Ut.next!==ui,"can not resize a framebuffer which is currently in use");var ja=Math.max(Gi|0,1),So=Math.max(oo|0||ja,1);if(ja===ui.width&&So===ui.height)return da;for(var Io=ui.colorAttachments,ou=0;ou<Io.length;++ou)kr(Io[ou],ja,So);return kr(ui.depthAttachment,ja,So),kr(ui.stencilAttachment,ja,So),kr(ui.depthStencilAttachment,ja,So),ui.width=da.width=ja,ui.height=da.height=So,Qr(ui),da}return da(xi,di),E(da,{resize:aa,_reglType:"framebuffer",_framebuffer:ui,destroy:function(){qr(ui),ni(ui)},use:function(oo){Ut.setFBO({framebuffer:da},oo)}})}function Ii(xi){var di=Array(6);function ui(aa){var Gi;$(di.indexOf(Ut.next)<0,"can not update framebuffer which is currently in use");var oo={color:null},ja=0,So=null,Io="rgba",ou="uint8",Bl=1;if(typeof aa=="number")ja=aa|0;else if(!aa)ja=1;else{$.type(aa,"object","invalid arguments for framebuffer");var Po=aa;if("shape"in Po){var Qu=Po.shape;$(Array.isArray(Qu)&&Qu.length>=2,"invalid shape for framebuffer"),$(Qu[0]===Qu[1],"cube framebuffer must be square"),ja=Qu[0]}else"radius"in Po&&(ja=Po.radius|0),"width"in Po?(ja=Po.width|0,"height"in Po&&$(Po.height===ja,"must be square")):"height"in Po&&(ja=Po.height|0);("color"in Po||"colors"in Po)&&(So=Po.color||Po.colors,Array.isArray(So)&&$(So.length===1||lt.webgl_draw_buffers,"multiple render targets not supported")),So||("colorCount"in Po&&(Bl=Po.colorCount|0,$(Bl>0,"invalid color buffer count")),"colorType"in Po&&($.oneOf(Po.colorType,Ge,"invalid color type"),ou=Po.colorType),"colorFormat"in Po&&(Io=Po.colorFormat,$.oneOf(Po.colorFormat,fe,"invalid color format for texture"))),"depth"in Po&&(oo.depth=Po.depth),"stencil"in Po&&(oo.stencil=Po.stencil),"depthStencil"in Po&&(oo.depthStencil=Po.depthStencil)}var bu;if(So)if(Array.isArray(So))for(bu=[],Gi=0;Gi<So.length;++Gi)bu[Gi]=So[Gi];else bu=[So];else{bu=Array(Bl);var zo={radius:ja,format:Io,type:ou};for(Gi=0;Gi<Bl;++Gi)bu[Gi]=W.createCube(zo)}for(oo.color=Array(bu.length),Gi=0;Gi<bu.length;++Gi){var Xs=bu[Gi];$(typeof Xs=="function"&&Xs._reglType==="textureCube","invalid cube map"),ja=ja||Xs.width,$(Xs.width===ja&&Xs.height===ja,"invalid cube map shape"),oo.color[Gi]={target:Hn,data:bu[Gi]}}for(Gi=0;Gi<6;++Gi){for(var Fl=0;Fl<bu.length;++Fl)oo.color[Fl].target=Hn+Gi;Gi>0&&(oo.depth=di[0].depth,oo.stencil=di[0].stencil,oo.depthStencil=di[0].depthStencil),di[Gi]?di[Gi](oo):di[Gi]=oi(oo)}return E(ui,{width:ja,height:ja,color:bu})}function da(aa){var Gi,oo=aa|0;if($(oo>0&&oo<=nt.maxCubeMapSize,"invalid radius for cube fbo"),oo===ui.width)return ui;var ja=ui.color;for(Gi=0;Gi<ja.length;++Gi)ja[Gi].resize(oo);for(Gi=0;Gi<6;++Gi)di[Gi].resize(oo);return ui.width=ui.height=oo,ui}return ui(xi),E(ui,{faces:di,resize:da,_reglType:"framebufferCube",destroy:function(){di.forEach(function(Gi){Gi.destroy()})}})}function ki(){Ut.cur=null,Ut.next=null,Ut.dirty=!0,Zt(Ir).forEach(function(xi){xi.framebuffer=Fe.createFramebuffer(),Qr(xi)})}return E(Ut,{getFramebuffer:function(di){if(typeof di=="function"&&di._reglType==="framebuffer"){var ui=di._framebuffer;if(ui instanceof Ci)return ui}return null},create:oi,createCube:Ii,clear:function(){Zt(Ir).forEach(qr)},restore:ki})}var wt=5126,It=34962;function kt(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=wt,this.offset=0,this.stride=0,this.divisor=0}function Yt(Fe,lt,nt,W,ct){for(var Et=nt.maxAttributes,Ut=new Array(Et),fe=0;fe<Et;++fe)Ut[fe]=new kt;var Ve=0,Ge={},Ke={Record:kt,scope:{},state:Ut,currentVAO:null,targetVAO:null,restore:ur()?Ir:function(){},createVAO:Ci,getVAO:lr,destroyBuffer:Rn,setVAO:ur()?Zn:qn,clear:ur()?kr:function(){}};function Rn(ni){for(var qr=0;qr<Ut.length;++qr){var Qr=Ut[qr];Qr.buffer===ni&&(Fe.disableVertexAttribArray(qr),Qr.buffer=null)}}function ur(){return lt.oes_vertex_array_object}function rr(){return lt.angle_instanced_arrays}function lr(ni){return typeof ni=="function"&&ni._vao?ni._vao:null}function Zn(ni){if(ni!==Ke.currentVAO){var qr=ur();ni?qr.bindVertexArrayOES(ni.vao):qr.bindVertexArrayOES(null),Ke.currentVAO=ni}}function qn(ni){if(ni!==Ke.currentVAO){if(ni)ni.bindAttrs();else for(var qr=rr(),Qr=0;Qr<Ut.length;++Qr){var oi=Ut[Qr];oi.buffer?(Fe.enableVertexAttribArray(Qr),Fe.vertexAttribPointer(Qr,oi.size,oi.type,oi.normalized,oi.stride,oi.offfset),qr&&oi.divisor&&qr.vertexAttribDivisorANGLE(Qr,oi.divisor)):(Fe.disableVertexAttribArray(Qr),Fe.vertexAttrib4f(Qr,oi.x,oi.y,oi.z,oi.w))}Ke.currentVAO=ni}}function kr(){Zt(Ge).forEach(function(ni){ni.destroy()})}function ti(){this.id=++Ve,this.attributes=[];var ni=ur();ni?this.vao=ni.createVertexArrayOES():this.vao=null,Ge[this.id]=this,this.buffers=[]}ti.prototype.bindAttrs=function(){for(var ni=rr(),qr=this.attributes,Qr=0;Qr<qr.length;++Qr){var oi=qr[Qr];oi.buffer?(Fe.enableVertexAttribArray(Qr),Fe.bindBuffer(It,oi.buffer.buffer),Fe.vertexAttribPointer(Qr,oi.size,oi.type,oi.normalized,oi.stride,oi.offset),ni&&oi.divisor&&ni.vertexAttribDivisorANGLE(Qr,oi.divisor)):(Fe.disableVertexAttribArray(Qr),Fe.vertexAttrib4f(Qr,oi.x,oi.y,oi.z,oi.w))}for(var Ii=qr.length;Ii<Et;++Ii)Fe.disableVertexAttribArray(Ii)},ti.prototype.refresh=function(){var ni=ur();ni&&(ni.bindVertexArrayOES(this.vao),this.bindAttrs(),Ke.currentVAO=this)},ti.prototype.destroy=function(){if(this.vao){var ni=ur();this===Ke.currentVAO&&(Ke.currentVAO=null,ni.bindVertexArrayOES(null)),ni.deleteVertexArrayOES(this.vao),this.vao=null}Ge[this.id]&&(delete Ge[this.id],W.vaoCount-=1)};function Ir(){var ni=ur();ni&&Zt(Ge).forEach(function(qr){qr.refresh()})}function Ci(ni){var qr=new ti;W.vaoCount+=1;function Qr(oi){$(Array.isArray(oi),"arguments to vertex array constructor must be an array"),$(oi.length<Et,"too many attributes"),$(oi.length>0,"must specify at least one attribute");var Ii={},ki=qr.attributes;ki.length=oi.length;for(var xi=0;xi<oi.length;++xi){var di=oi[xi],ui=ki[xi]=new kt,da=di.data||di;if(Array.isArray(da)||U(da)||oe(da)){var aa;qr.buffers[xi]&&(aa=qr.buffers[xi],U(da)&&aa._buffer.byteLength>=da.byteLength?aa.subdata(da):(aa.destroy(),qr.buffers[xi]=null)),qr.buffers[xi]||(aa=qr.buffers[xi]=ct.create(di,It,!1,!0)),ui.buffer=ct.getBuffer(aa),ui.size=ui.buffer.dimension|0,ui.normalized=!1,ui.type=ui.buffer.dtype,ui.offset=0,ui.stride=0,ui.divisor=0,ui.state=1,Ii[xi]=1}else ct.getBuffer(di)?(ui.buffer=ct.getBuffer(di),ui.size=ui.buffer.dimension|0,ui.normalized=!1,ui.type=ui.buffer.dtype,ui.offset=0,ui.stride=0,ui.divisor=0,ui.state=1):ct.getBuffer(di.buffer)?(ui.buffer=ct.getBuffer(di.buffer),ui.size=(+di.size||ui.buffer.dimension)|0,ui.normalized=!!di.normalized||!1,"type"in di?($.parameter(di.type,ka,"invalid buffer type"),ui.type=ka[di.type]):ui.type=ui.buffer.dtype,ui.offset=(di.offset||0)|0,ui.stride=(di.stride||0)|0,ui.divisor=(di.divisor||0)|0,ui.state=1,$(ui.size>=1&&ui.size<=4,"size must be between 1 and 4"),$(ui.offset>=0,"invalid offset"),$(ui.stride>=0&&ui.stride<=255,"stride must be between 0 and 255"),$(ui.divisor>=0,"divisor must be positive"),$(!ui.divisor||!!lt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in di?($(xi>0,"first attribute must not be a constant"),ui.x=+di.x||0,ui.y=+di.y||0,ui.z=+di.z||0,ui.w=+di.w||0,ui.state=2):$(!1,"invalid attribute spec for location "+xi)}for(var Gi=0;Gi<qr.buffers.length;++Gi)!Ii[Gi]&&qr.buffers[Gi]&&(qr.buffers[Gi].destroy(),qr.buffers[Gi]=null);return qr.refresh(),Qr}return Qr.destroy=function(){for(var oi=0;oi<qr.buffers.length;++oi)qr.buffers[oi]&&qr.buffers[oi].destroy();qr.buffers.length=0,qr.destroy()},Qr._vao=qr,Qr._reglType="vao",Qr(ni)}return Ke}var qt=35632,ce=35633,ye=35718,Le=35721;function Ce(Fe,lt,nt,W){var ct={},Et={};function Ut(Zn,qn,kr,ti){this.name=Zn,this.id=qn,this.location=kr,this.info=ti}function fe(Zn,qn){for(var kr=0;kr<Zn.length;++kr)if(Zn[kr].id===qn.id){Zn[kr].location=qn.location;return}Zn.push(qn)}function Ve(Zn,qn,kr){var ti=Zn===qt?ct:Et,Ir=ti[qn];if(!Ir){var Ci=lt.str(qn);Ir=Fe.createShader(Zn),Fe.shaderSource(Ir,Ci),Fe.compileShader(Ir),$.shaderError(Fe,Ir,Ci,Zn,kr),ti[qn]=Ir}return Ir}var Ge={},Ke=[],Rn=0;function ur(Zn,qn){this.id=Rn++,this.fragId=Zn,this.vertId=qn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,W.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function rr(Zn,qn,kr){var ti,Ir,Ci=Ve(qt,Zn.fragId),ni=Ve(ce,Zn.vertId),qr=Zn.program=Fe.createProgram();if(Fe.attachShader(qr,Ci),Fe.attachShader(qr,ni),kr)for(ti=0;ti<kr.length;++ti){var Qr=kr[ti];Fe.bindAttribLocation(qr,Qr[0],Qr[1])}Fe.linkProgram(qr),$.linkError(Fe,qr,lt.str(Zn.fragId),lt.str(Zn.vertId),qn);var oi=Fe.getProgramParameter(qr,ye);W.profile&&(Zn.stats.uniformsCount=oi);var Ii=Zn.uniforms;for(ti=0;ti<oi;++ti)if(Ir=Fe.getActiveUniform(qr,ti),Ir)if(Ir.size>1)for(var ki=0;ki<Ir.size;++ki){var xi=Ir.name.replace("[0]","["+ki+"]");fe(Ii,new Ut(xi,lt.id(xi),Fe.getUniformLocation(qr,xi),Ir))}else fe(Ii,new Ut(Ir.name,lt.id(Ir.name),Fe.getUniformLocation(qr,Ir.name),Ir));var di=Fe.getProgramParameter(qr,Le);W.profile&&(Zn.stats.attributesCount=di);var ui=Zn.attributes;for(ti=0;ti<di;++ti)Ir=Fe.getActiveAttrib(qr,ti),Ir&&fe(ui,new Ut(Ir.name,lt.id(Ir.name),Fe.getAttribLocation(qr,Ir.name),Ir))}W.profile&&(nt.getMaxUniformsCount=function(){var Zn=0;return Ke.forEach(function(qn){qn.stats.uniformsCount>Zn&&(Zn=qn.stats.uniformsCount)}),Zn},nt.getMaxAttributesCount=function(){var Zn=0;return Ke.forEach(function(qn){qn.stats.attributesCount>Zn&&(Zn=qn.stats.attributesCount)}),Zn});function lr(){ct={},Et={};for(var Zn=0;Zn<Ke.length;++Zn)rr(Ke[Zn],null,Ke[Zn].attributes.map(function(qn){return[qn.location,qn.name]}))}return{clear:function(){var qn=Fe.deleteShader.bind(Fe);Zt(ct).forEach(qn),ct={},Zt(Et).forEach(qn),Et={},Ke.forEach(function(kr){Fe.deleteProgram(kr.program)}),Ke.length=0,Ge={},nt.shaderCount=0},program:function(qn,kr,ti,Ir){$.command(qn>=0,"missing vertex shader",ti),$.command(kr>=0,"missing fragment shader",ti);var Ci=Ge[kr];Ci||(Ci=Ge[kr]={});var ni=Ci[qn];if(ni&&(ni.refCount++,!Ir))return ni;var qr=new ur(kr,qn);return nt.shaderCount++,rr(qr,ti,Ir),ni||(Ci[qn]=qr),Ke.push(qr),E(qr,{destroy:function(){if(qr.refCount--,qr.refCount<=0){Fe.deleteProgram(qr.program);var oi=Ke.indexOf(qr);Ke.splice(oi,1),nt.shaderCount--}Ci[qr.vertId].refCount<=0&&(Fe.deleteShader(Et[qr.vertId]),delete Et[qr.vertId],delete Ge[qr.fragId][qr.vertId]),Object.keys(Ge[qr.fragId]).length||(Fe.deleteShader(ct[qr.fragId]),delete ct[qr.fragId],delete Ge[qr.fragId])}})},restore:lr,shader:Ve,frag:-1,vert:-1}}var ke=6408,nn=5121,ln=3333,Qn=5126;function Yn(Fe,lt,nt,W,ct,Et,Ut){function fe(Ke){var Rn;lt.next===null?($(ct.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Rn=nn):($(lt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Rn=lt.next.colorAttachments[0].texture._texture.type,Et.oes_texture_float?($(Rn===nn||Rn===Qn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Rn===Qn&&$(Ut.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):$(Rn===nn,"Reading from a framebuffer is only allowed for the type 'uint8'"));var ur=0,rr=0,lr=W.framebufferWidth,Zn=W.framebufferHeight,qn=null;U(Ke)?qn=Ke:Ke&&($.type(Ke,"object","invalid arguments to regl.read()"),ur=Ke.x|0,rr=Ke.y|0,$(ur>=0&&ur<W.framebufferWidth,"invalid x offset for regl.read"),$(rr>=0&&rr<W.framebufferHeight,"invalid y offset for regl.read"),lr=(Ke.width||W.framebufferWidth-ur)|0,Zn=(Ke.height||W.framebufferHeight-rr)|0,qn=Ke.data||null),qn&&(Rn===nn?$(qn instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Rn===Qn&&$(qn instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),$(lr>0&&lr+ur<=W.framebufferWidth,"invalid width for read pixels"),$(Zn>0&&Zn+rr<=W.framebufferHeight,"invalid height for read pixels"),nt();var kr=lr*Zn*4;return qn||(Rn===nn?qn=new Uint8Array(kr):Rn===Qn&&(qn=qn||new Float32Array(kr))),$.isTypedArray(qn,"data buffer for regl.read() must be a typedarray"),$(qn.byteLength>=kr,"data buffer for regl.read() too small"),Fe.pixelStorei(ln,4),Fe.readPixels(ur,rr,lr,Zn,ke,Rn,qn),qn}function Ve(Ke){var Rn;return lt.setFBO({framebuffer:Ke.framebuffer},function(){Rn=fe(Ke)}),Rn}function Ge(Ke){return!Ke||!("framebuffer"in Ke)?fe(Ke):Ve(Ke)}return Ge}function dr(Fe){return Array.prototype.slice.call(Fe)}function Mr(Fe){return dr(Fe).join("")}function $r(){var Fe=0,lt=[],nt=[];function W(Rn){for(var ur=0;ur<nt.length;++ur)if(nt[ur]===Rn)return lt[ur];var rr="g"+Fe++;return lt.push(rr),nt.push(Rn),rr}function ct(){var Rn=[];function ur(){Rn.push.apply(Rn,dr(arguments))}var rr=[];function lr(){var Zn="v"+Fe++;return rr.push(Zn),arguments.length>0&&(Rn.push(Zn,"="),Rn.push.apply(Rn,dr(arguments)),Rn.push(";")),Zn}return E(ur,{def:lr,toString:function(){return Mr([rr.length>0?"var "+rr.join(",")+";":"",Mr(Rn)])}})}function Et(){var Rn=ct(),ur=ct(),rr=Rn.toString,lr=ur.toString;function Zn(qn,kr){ur(qn,kr,"=",Rn.def(qn,kr),";")}return E(function(){Rn.apply(Rn,dr(arguments))},{def:Rn.def,entry:Rn,exit:ur,save:Zn,set:function(kr,ti,Ir){Zn(kr,ti),Rn(kr,ti,"=",Ir,";")},toString:function(){return rr()+lr()}})}function Ut(){var Rn=Mr(arguments),ur=Et(),rr=Et(),lr=ur.toString,Zn=rr.toString;return E(ur,{then:function(){return ur.apply(ur,dr(arguments)),this},else:function(){return rr.apply(rr,dr(arguments)),this},toString:function(){var kr=Zn();return kr&&(kr="else{"+kr+"}"),Mr(["if(",Rn,"){",lr(),"}",kr])}})}var fe=ct(),Ve={};function Ge(Rn,ur){var rr=[];function lr(){var Ir="a"+rr.length;return rr.push(Ir),Ir}ur=ur||0;for(var Zn=0;Zn<ur;++Zn)lr();var qn=Et(),kr=qn.toString,ti=Ve[Rn]=E(qn,{arg:lr,toString:function(){return Mr(["function(",rr.join(),"){",kr(),"}"])}});return ti}function Ke(){var Rn=['"use strict";',fe,"return {"];Object.keys(Ve).forEach(function(lr){Rn.push('"',lr,'":',Ve[lr].toString(),",")}),Rn.push("}");var ur=Mr(Rn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),rr=Function.apply(null,lt.concat(ur));return rr.apply(null,nt)}return{global:fe,link:W,block:ct,proc:Ge,scope:Et,cond:Ut,compile:Ke}}var Kr="xyzw".split(""),bi=5121,Oi=1,zi=2,Vi=0,_a=1,ya=2,wi=3,$i=4,sa=5,Bi=6,ca="dither",qi="blend.enable",Ca="blend.color",Na="blend.equation",rs="blend.func",Jo="depth.enable",is="depth.func",jo="depth.range",Ps="depth.mask",Rl="colorMask",sl="cull.enable",lc="cull.face",xc="frontFace",Sl="lineWidth",_l="polygonOffset.enable",Ul="polygonOffset.offset",Lc="sample.alpha",Kl="sample.enable",Mc="sample.coverage",Cc="stencil.enable",fc="stencil.mask",bc="stencil.func",ic="stencil.opFront",yu="stencil.opBack",Ec="scissor.enable",Sc="scissor.box",Dl="viewport",Gu="profile",ul="framebuffer",ll="vert",cl="frag",Ju="elements",ec="primitive",Rc="count",zc="offset",Uc="instances",hc="vao",Xc="Width",Pc="Height",jl=ul+Xc,Bu=ul+Pc,Jc=Dl+Xc,sf=Dl+Pc,$c="drawingBuffer",kf=$c+Xc,wf=$c+Pc,Gf=[rs,Na,bc,ic,yu,Mc,Dl,Sc,Ul],Oc=34962,sh=34963,uf=35632,lf=35633,Tc=3553,fl=34067,xf=2884,cf=3042,Vf=3024,Wf=2960,Qc=2929,ff=3089,If=32823,Lf=32926,bf=32928,wc=5126,hf=35664,eu=35665,dc=35666,Ef=5124,Yc=35667,vc=35668,Dc=35669,df=35670,Sf=35671,kc=35672,Zc=35673,Gc=35674,qc=35675,pe=35676,me=35678,Vt=35680,Kt=4,ze=1028,rn=1029,Un=2304,gr=2305,mr=32775,Jr=32776,Mi=519,Hi=7680,ra=0,Da=1,Ka=32774,Qa=513,qo=36160,bo=36064,Ts={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ys=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Zs={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},zs={frag:uf,vert:lf},Eo={cw:Un,ccw:gr};function Ks(Fe){return Array.isArray(Fe)||U(Fe)||oe(Fe)}function $u(Fe){return Fe.sort(function(lt,nt){return lt===Dl?-1:nt===Dl?1:lt<nt?-1:1})}function ys(Fe,lt,nt,W){this.thisDep=Fe,this.contextDep=lt,this.propDep=nt,this.append=W}function Is(Fe){return Fe&&!(Fe.thisDep||Fe.contextDep||Fe.propDep)}function $o(Fe){return new ys(!1,!1,!1,Fe)}function hl(Fe,lt){var nt=Fe.type;if(nt===Vi){var W=Fe.data.length;return new ys(!0,W>=1,W>=2,lt)}else if(nt===$i){var ct=Fe.data;return new ys(ct.thisDep,ct.contextDep,ct.propDep,lt)}else{if(nt===sa)return new ys(!1,!1,!1,lt);if(nt===Bi){for(var Et=!1,Ut=!1,fe=!1,Ve=0;Ve<Fe.data.length;++Ve){var Ge=Fe.data[Ve];if(Ge.type===_a)fe=!0;else if(Ge.type===ya)Ut=!0;else if(Ge.type===wi)Et=!0;else if(Ge.type===Vi){Et=!0;var Ke=Ge.data;Ke>=1&&(Ut=!0),Ke>=2&&(fe=!0)}else Ge.type===$i&&(Et=Et||Ge.data.thisDep,Ut=Ut||Ge.data.contextDep,fe=fe||Ge.data.propDep)}return new ys(Et,Ut,fe,lt)}else return new ys(nt===wi,nt===ya,nt===_a,lt)}}var Ic=new ys(!1,!1,!1,function(){});function jc(Fe,lt,nt,W,ct,Et,Ut,fe,Ve,Ge,Ke,Rn,ur,rr,lr){var Zn=Ge.Record,qn={add:32774,subtract:32778,"reverse subtract":32779};nt.ext_blend_minmax&&(qn.min=mr,qn.max=Jr);var kr=nt.angle_instanced_arrays,ti=nt.webgl_draw_buffers,Ir={dirty:!0,profile:lr.profile},Ci={},ni=[],qr={},Qr={};function oi(Mn){return Mn.replace(".","_")}function Ii(Mn,un,ir){var wr=oi(Mn);ni.push(Mn),Ci[wr]=Ir[wr]=!!ir,qr[wr]=un}function ki(Mn,un,ir){var wr=oi(Mn);ni.push(Mn),Array.isArray(ir)?(Ir[wr]=ir.slice(),Ci[wr]=ir.slice()):Ir[wr]=Ci[wr]=ir,Qr[wr]=un}Ii(ca,Vf),Ii(qi,cf),ki(Ca,"blendColor",[0,0,0,0]),ki(Na,"blendEquationSeparate",[Ka,Ka]),ki(rs,"blendFuncSeparate",[Da,ra,Da,ra]),Ii(Jo,Qc,!0),ki(is,"depthFunc",Qa),ki(jo,"depthRange",[0,1]),ki(Ps,"depthMask",!0),ki(Rl,Rl,[!0,!0,!0,!0]),Ii(sl,xf),ki(lc,"cullFace",rn),ki(xc,xc,gr),ki(Sl,Sl,1),Ii(_l,If),ki(Ul,"polygonOffset",[0,0]),Ii(Lc,Lf),Ii(Kl,bf),ki(Mc,"sampleCoverage",[1,!1]),Ii(Cc,Wf),ki(fc,"stencilMask",-1),ki(bc,"stencilFunc",[Mi,0,-1]),ki(ic,"stencilOpSeparate",[ze,Hi,Hi,Hi]),ki(yu,"stencilOpSeparate",[rn,Hi,Hi,Hi]),Ii(Ec,ff),ki(Sc,"scissor",[0,0,Fe.drawingBufferWidth,Fe.drawingBufferHeight]),ki(Dl,Dl,[0,0,Fe.drawingBufferWidth,Fe.drawingBufferHeight]);var xi={gl:Fe,context:ur,strings:lt,next:Ci,current:Ir,draw:Rn,elements:Et,buffer:ct,shader:Ke,attributes:Ge.state,vao:Ge,uniforms:Ve,framebuffer:fe,extensions:nt,timer:rr,isBufferArgs:Ks},di={primTypes:Ki,compareFuncs:xu,blendFuncs:Ts,blendEquations:qn,stencilOps:Zs,glTypes:ka,orientationType:Eo};$.optional(function(){xi.isArrayLike=Ao}),ti&&(di.backBuffer=[rn],di.drawBuffer=Pe(W.maxDrawbuffers,function(Mn){return Mn===0?[0]:Pe(Mn,function(un){return bo+un})}));var ui=0;function da(){var Mn=$r(),un=Mn.link,ir=Mn.global;Mn.id=ui++,Mn.batchId="0";var wr=un(xi),Rr=Mn.shared={props:"a0"};Object.keys(xi).forEach(function(tr){Rr[tr]=ir.def(wr,".",tr)}),$.optional(function(){Mn.CHECK=un($),Mn.commandStr=$.guessCommand(),Mn.command=un(Mn.commandStr),Mn.assert=function(tr,bn,Tr){tr("if(!(",bn,"))",this.CHECK,".commandRaise(",un(Tr),",",this.command,");")},di.invalidBlendCombinations=Ys});var sr=Mn.next={},or=Mn.current={};Object.keys(Qr).forEach(function(tr){Array.isArray(Ir[tr])&&(sr[tr]=ir.def(Rr.next,".",tr),or[tr]=ir.def(Rr.current,".",tr))});var Sr=Mn.constants={};Object.keys(di).forEach(function(tr){Sr[tr]=ir.def(JSON.stringify(di[tr]))}),Mn.invoke=function(tr,bn){switch(bn.type){case Vi:var Tr=["this",Rr.context,Rr.props,Mn.batchId];return tr.def(un(bn.data),".call(",Tr.slice(0,Math.max(bn.data.length+1,4)),")");case _a:return tr.def(Rr.props,bn.data);case ya:return tr.def(Rr.context,bn.data);case wi:return tr.def("this",bn.data);case $i:return bn.data.append(Mn,tr),bn.data.ref;case sa:return bn.data.toString();case Bi:return bn.data.map(function(jr){return Mn.invoke(tr,jr)})}},Mn.attribCache={};var An={};return Mn.scopeAttrib=function(tr){var bn=lt.id(tr);if(bn in An)return An[bn];var Tr=Ge.scope[bn];Tr||(Tr=Ge.scope[bn]=new Zn);var jr=An[bn]=un(Tr);return jr},Mn}function aa(Mn){var un=Mn.static,ir=Mn.dynamic,wr;if(Gu in un){var Rr=!!un[Gu];wr=$o(function(or,Sr){return Rr}),wr.enable=Rr}else if(Gu in ir){var sr=ir[Gu];wr=hl(sr,function(or,Sr){return or.invoke(Sr,sr)})}return wr}function Gi(Mn,un){var ir=Mn.static,wr=Mn.dynamic;if(ul in ir){var Rr=ir[ul];return Rr?(Rr=fe.getFramebuffer(Rr),$.command(Rr,"invalid framebuffer object"),$o(function(or,Sr){var An=or.link(Rr),tr=or.shared;Sr.set(tr.framebuffer,".next",An);var bn=tr.context;return Sr.set(bn,"."+jl,An+".width"),Sr.set(bn,"."+Bu,An+".height"),An})):$o(function(or,Sr){var An=or.shared;Sr.set(An.framebuffer,".next","null");var tr=An.context;return Sr.set(tr,"."+jl,tr+"."+kf),Sr.set(tr,"."+Bu,tr+"."+wf),"null"})}else if(ul in wr){var sr=wr[ul];return hl(sr,function(or,Sr){var An=or.invoke(Sr,sr),tr=or.shared,bn=tr.framebuffer,Tr=Sr.def(bn,".getFramebuffer(",An,")");$.optional(function(){or.assert(Sr,"!"+An+"||"+Tr,"invalid framebuffer object")}),Sr.set(bn,".next",Tr);var jr=tr.context;return Sr.set(jr,"."+jl,Tr+"?"+Tr+".width:"+jr+"."+kf),Sr.set(jr,"."+Bu,Tr+"?"+Tr+".height:"+jr+"."+wf),Tr})}else return null}function oo(Mn,un,ir){var wr=Mn.static,Rr=Mn.dynamic;function sr(An){if(An in wr){var tr=wr[An];$.commandType(tr,"object","invalid "+An,ir.commandStr);var bn=!0,Tr=tr.x|0,jr=tr.y|0,ci,Yr;return"width"in tr?(ci=tr.width|0,$.command(ci>=0,"invalid "+An,ir.commandStr)):bn=!1,"height"in tr?(Yr=tr.height|0,$.command(Yr>=0,"invalid "+An,ir.commandStr)):bn=!1,new ys(!bn&&un&&un.thisDep,!bn&&un&&un.contextDep,!bn&&un&&un.propDep,function(ia,To){var ea=ia.shared.context,Ba=ci;"width"in tr||(Ba=To.def(ea,".",jl,"-",Tr));var fo=Yr;return"height"in tr||(fo=To.def(ea,".",Bu,"-",jr)),[Tr,jr,Ba,fo]})}else if(An in Rr){var ri=Rr[An],Ti=hl(ri,function(ia,To){var ea=ia.invoke(To,ri);$.optional(function(){ia.assert(To,ea+"&&typeof "+ea+'==="object"',"invalid "+An)});var Ba=ia.shared.context,fo=To.def(ea,".x|0"),bs=To.def(ea,".y|0"),Pl=To.def('"width" in ',ea,"?",ea,".width|0:","(",Ba,".",jl,"-",fo,")"),Ac=To.def('"height" in ',ea,"?",ea,".height|0:","(",Ba,".",Bu,"-",bs,")");return $.optional(function(){ia.assert(To,Pl+">=0&&"+Ac+">=0","invalid "+An)}),[fo,bs,Pl,Ac]});return un&&(Ti.thisDep=Ti.thisDep||un.thisDep,Ti.contextDep=Ti.contextDep||un.contextDep,Ti.propDep=Ti.propDep||un.propDep),Ti}else return un?new ys(un.thisDep,un.contextDep,un.propDep,function(ia,To){var ea=ia.shared.context;return[0,0,To.def(ea,".",jl),To.def(ea,".",Bu)]}):null}var or=sr(Dl);if(or){var Sr=or;or=new ys(or.thisDep,or.contextDep,or.propDep,function(An,tr){var bn=Sr.append(An,tr),Tr=An.shared.context;return tr.set(Tr,"."+Jc,bn[2]),tr.set(Tr,"."+sf,bn[3]),bn})}return{viewport:or,scissor_box:sr(Sc)}}function ja(Mn,un){var ir=Mn.static,wr=typeof ir[cl]=="string"&&typeof ir[ll]=="string";if(wr){if(Object.keys(un.dynamic).length>0)return null;var Rr=un.static,sr=Object.keys(Rr);if(sr.length>0&&typeof Rr[sr[0]]=="number"){for(var or=[],Sr=0;Sr<sr.length;++Sr)$(typeof Rr[sr[Sr]]=="number","must specify all vertex attribute locations when using vaos"),or.push([Rr[sr[Sr]]|0,sr[Sr]]);return or}}return null}function So(Mn,un,ir){var wr=Mn.static,Rr=Mn.dynamic;function sr(bn){if(bn in wr){var Tr=lt.id(wr[bn]);$.optional(function(){Ke.shader(zs[bn],Tr,$.guessCommand())});var jr=$o(function(){return Tr});return jr.id=Tr,jr}else if(bn in Rr){var ci=Rr[bn];return hl(ci,function(Yr,ri){var Ti=Yr.invoke(ri,ci),ia=ri.def(Yr.shared.strings,".id(",Ti,")");return $.optional(function(){ri(Yr.shared.shader,".shader(",zs[bn],",",ia,",",Yr.command,");")}),ia})}return null}var or=sr(cl),Sr=sr(ll),An=null,tr;return Is(or)&&Is(Sr)?(An=Ke.program(Sr.id,or.id,null,ir),tr=$o(function(bn,Tr){return bn.link(An)})):tr=new ys(or&&or.thisDep||Sr&&Sr.thisDep,or&&or.contextDep||Sr&&Sr.contextDep,or&&or.propDep||Sr&&Sr.propDep,function(bn,Tr){var jr=bn.shared.shader,ci;or?ci=or.append(bn,Tr):ci=Tr.def(jr,".",cl);var Yr;Sr?Yr=Sr.append(bn,Tr):Yr=Tr.def(jr,".",ll);var ri=jr+".program("+Yr+","+ci;return $.optional(function(){ri+=","+bn.command}),Tr.def(ri+")")}),{frag:or,vert:Sr,progVar:tr,program:An}}function Io(Mn,un){var ir=Mn.static,wr=Mn.dynamic;function Rr(){if(Ju in ir){var bn=ir[Ju];Ks(bn)?bn=Et.getElements(Et.create(bn,!0)):bn&&(bn=Et.getElements(bn),$.command(bn,"invalid elements",un.commandStr));var Tr=$o(function(ci,Yr){if(bn){var ri=ci.link(bn);return ci.ELEMENTS=ri,ri}return ci.ELEMENTS=null,null});return Tr.value=bn,Tr}else if(Ju in wr){var jr=wr[Ju];return hl(jr,function(ci,Yr){var ri=ci.shared,Ti=ri.isBufferArgs,ia=ri.elements,To=ci.invoke(Yr,jr),ea=Yr.def("null"),Ba=Yr.def(Ti,"(",To,")"),fo=ci.cond(Ba).then(ea,"=",ia,".createStream(",To,");").else(ea,"=",ia,".getElements(",To,");");return $.optional(function(){ci.assert(fo.else,"!"+To+"||"+ea,"invalid elements")}),Yr.entry(fo),Yr.exit(ci.cond(Ba).then(ia,".destroyStream(",ea,");")),ci.ELEMENTS=ea,ea})}return null}var sr=Rr();function or(){if(ec in ir){var bn=ir[ec];return $.commandParameter(bn,Ki,"invalid primitve",un.commandStr),$o(function(jr,ci){return Ki[bn]})}else if(ec in wr){var Tr=wr[ec];return hl(Tr,function(jr,ci){var Yr=jr.constants.primTypes,ri=jr.invoke(ci,Tr);return $.optional(function(){jr.assert(ci,ri+" in "+Yr,"invalid primitive, must be one of "+Object.keys(Ki))}),ci.def(Yr,"[",ri,"]")})}else if(sr)return Is(sr)?sr.value?$o(function(jr,ci){return ci.def(jr.ELEMENTS,".primType")}):$o(function(){return Kt}):new ys(sr.thisDep,sr.contextDep,sr.propDep,function(jr,ci){var Yr=jr.ELEMENTS;return ci.def(Yr,"?",Yr,".primType:",Kt)});return null}function Sr(bn,Tr){if(bn in ir){var jr=ir[bn]|0;return $.command(!Tr||jr>=0,"invalid "+bn,un.commandStr),$o(function(Yr,ri){return Tr&&(Yr.OFFSET=jr),jr})}else if(bn in wr){var ci=wr[bn];return hl(ci,function(Yr,ri){var Ti=Yr.invoke(ri,ci);return Tr&&(Yr.OFFSET=Ti,$.optional(function(){Yr.assert(ri,Ti+">=0","invalid "+bn)})),Ti})}else if(Tr&&sr)return $o(function(Yr,ri){return Yr.OFFSET="0",0});return null}var An=Sr(zc,!0);function tr(){if(Rc in ir){var bn=ir[Rc]|0;return $.command(typeof bn=="number"&&bn>=0,"invalid vertex count",un.commandStr),$o(function(){return bn})}else if(Rc in wr){var Tr=wr[Rc];return hl(Tr,function(Yr,ri){var Ti=Yr.invoke(ri,Tr);return $.optional(function(){Yr.assert(ri,"typeof "+Ti+'==="number"&&'+Ti+">=0&&"+Ti+"===("+Ti+"|0)","invalid vertex count")}),Ti})}else if(sr)if(Is(sr)){if(sr)return An?new ys(An.thisDep,An.contextDep,An.propDep,function(Yr,ri){var Ti=ri.def(Yr.ELEMENTS,".vertCount-",Yr.OFFSET);return $.optional(function(){Yr.assert(ri,Ti+">=0","invalid vertex offset/element buffer too small")}),Ti}):$o(function(Yr,ri){return ri.def(Yr.ELEMENTS,".vertCount")});var jr=$o(function(){return-1});return $.optional(function(){jr.MISSING=!0}),jr}else{var ci=new ys(sr.thisDep||An.thisDep,sr.contextDep||An.contextDep,sr.propDep||An.propDep,function(Yr,ri){var Ti=Yr.ELEMENTS;return Yr.OFFSET?ri.def(Ti,"?",Ti,".vertCount-",Yr.OFFSET,":-1"):ri.def(Ti,"?",Ti,".vertCount:-1")});return $.optional(function(){ci.DYNAMIC=!0}),ci}return null}return{elements:sr,primitive:or(),count:tr(),instances:Sr(Uc,!1),offset:An}}function ou(Mn,un){var ir=Mn.static,wr=Mn.dynamic,Rr={};return ni.forEach(function(sr){var or=oi(sr);function Sr(An,tr){if(sr in ir){var bn=An(ir[sr]);Rr[or]=$o(function(){return bn})}else if(sr in wr){var Tr=wr[sr];Rr[or]=hl(Tr,function(jr,ci){return tr(jr,ci,jr.invoke(ci,Tr))})}}switch(sr){case sl:case qi:case ca:case Cc:case Jo:case Ec:case _l:case Lc:case Kl:case Ps:return Sr(function(An){return $.commandType(An,"boolean",sr,un.commandStr),An},function(An,tr,bn){return $.optional(function(){An.assert(tr,"typeof "+bn+'==="boolean"',"invalid flag "+sr,An.commandStr)}),bn});case is:return Sr(function(An){return $.commandParameter(An,xu,"invalid "+sr,un.commandStr),xu[An]},function(An,tr,bn){var Tr=An.constants.compareFuncs;return $.optional(function(){An.assert(tr,bn+" in "+Tr,"invalid "+sr+", must be one of "+Object.keys(xu))}),tr.def(Tr,"[",bn,"]")});case jo:return Sr(function(An){return $.command(Ao(An)&&An.length===2&&typeof An[0]=="number"&&typeof An[1]=="number"&&An[0]<=An[1],"depth range is 2d array",un.commandStr),An},function(An,tr,bn){$.optional(function(){An.assert(tr,An.shared.isArrayLike+"("+bn+")&&"+bn+".length===2&&typeof "+bn+'[0]==="number"&&typeof '+bn+'[1]==="number"&&'+bn+"[0]<="+bn+"[1]","depth range must be a 2d array")});var Tr=tr.def("+",bn,"[0]"),jr=tr.def("+",bn,"[1]");return[Tr,jr]});case rs:return Sr(function(An){$.commandType(An,"object","blend.func",un.commandStr);var tr="srcRGB"in An?An.srcRGB:An.src,bn="srcAlpha"in An?An.srcAlpha:An.src,Tr="dstRGB"in An?An.dstRGB:An.dst,jr="dstAlpha"in An?An.dstAlpha:An.dst;return $.commandParameter(tr,Ts,or+".srcRGB",un.commandStr),$.commandParameter(bn,Ts,or+".srcAlpha",un.commandStr),$.commandParameter(Tr,Ts,or+".dstRGB",un.commandStr),$.commandParameter(jr,Ts,or+".dstAlpha",un.commandStr),$.command(Ys.indexOf(tr+", "+Tr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+tr+", "+Tr+")",un.commandStr),[Ts[tr],Ts[Tr],Ts[bn],Ts[jr]]},function(An,tr,bn){var Tr=An.constants.blendFuncs;$.optional(function(){An.assert(tr,bn+"&&typeof "+bn+'==="object"',"invalid blend func, must be an object")});function jr(ea,Ba){var fo=tr.def('"',ea,Ba,'" in ',bn,"?",bn,".",ea,Ba,":",bn,".",ea);return $.optional(function(){An.assert(tr,fo+" in "+Tr,"invalid "+sr+"."+ea+Ba+", must be one of "+Object.keys(Ts))}),fo}var ci=jr("src","RGB"),Yr=jr("dst","RGB");$.optional(function(){var ea=An.constants.invalidBlendCombinations;An.assert(tr,ea+".indexOf("+ci+'+", "+'+Yr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ri=tr.def(Tr,"[",ci,"]"),Ti=tr.def(Tr,"[",jr("src","Alpha"),"]"),ia=tr.def(Tr,"[",Yr,"]"),To=tr.def(Tr,"[",jr("dst","Alpha"),"]");return[ri,ia,Ti,To]});case Na:return Sr(function(An){if(typeof An=="string")return $.commandParameter(An,qn,"invalid "+sr,un.commandStr),[qn[An],qn[An]];if(typeof An=="object")return $.commandParameter(An.rgb,qn,sr+".rgb",un.commandStr),$.commandParameter(An.alpha,qn,sr+".alpha",un.commandStr),[qn[An.rgb],qn[An.alpha]];$.commandRaise("invalid blend.equation",un.commandStr)},function(An,tr,bn){var Tr=An.constants.blendEquations,jr=tr.def(),ci=tr.def(),Yr=An.cond("typeof ",bn,'==="string"');return $.optional(function(){function ri(Ti,ia,To){An.assert(Ti,To+" in "+Tr,"invalid "+ia+", must be one of "+Object.keys(qn))}ri(Yr.then,sr,bn),An.assert(Yr.else,bn+"&&typeof "+bn+'==="object"',"invalid "+sr),ri(Yr.else,sr+".rgb",bn+".rgb"),ri(Yr.else,sr+".alpha",bn+".alpha")}),Yr.then(jr,"=",ci,"=",Tr,"[",bn,"];"),Yr.else(jr,"=",Tr,"[",bn,".rgb];",ci,"=",Tr,"[",bn,".alpha];"),tr(Yr),[jr,ci]});case Ca:return Sr(function(An){return $.command(Ao(An)&&An.length===4,"blend.color must be a 4d array",un.commandStr),Pe(4,function(tr){return+An[tr]})},function(An,tr,bn){return $.optional(function(){An.assert(tr,An.shared.isArrayLike+"("+bn+")&&"+bn+".length===4","blend.color must be a 4d array")}),Pe(4,function(Tr){return tr.def("+",bn,"[",Tr,"]")})});case fc:return Sr(function(An){return $.commandType(An,"number",or,un.commandStr),An|0},function(An,tr,bn){return $.optional(function(){An.assert(tr,"typeof "+bn+'==="number"',"invalid stencil.mask")}),tr.def(bn,"|0")});case bc:return Sr(function(An){$.commandType(An,"object",or,un.commandStr);var tr=An.cmp||"keep",bn=An.ref||0,Tr="mask"in An?An.mask:-1;return $.commandParameter(tr,xu,sr+".cmp",un.commandStr),$.commandType(bn,"number",sr+".ref",un.commandStr),$.commandType(Tr,"number",sr+".mask",un.commandStr),[xu[tr],bn,Tr]},function(An,tr,bn){var Tr=An.constants.compareFuncs;$.optional(function(){function ri(){An.assert(tr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ri(bn+"&&typeof ",bn,'==="object"'),ri('!("cmp" in ',bn,")||(",bn,".cmp in ",Tr,")")});var jr=tr.def('"cmp" in ',bn,"?",Tr,"[",bn,".cmp]",":",Hi),ci=tr.def(bn,".ref|0"),Yr=tr.def('"mask" in ',bn,"?",bn,".mask|0:-1");return[jr,ci,Yr]});case ic:case yu:return Sr(function(An){$.commandType(An,"object",or,un.commandStr);var tr=An.fail||"keep",bn=An.zfail||"keep",Tr=An.zpass||"keep";return $.commandParameter(tr,Zs,sr+".fail",un.commandStr),$.commandParameter(bn,Zs,sr+".zfail",un.commandStr),$.commandParameter(Tr,Zs,sr+".zpass",un.commandStr),[sr===yu?rn:ze,Zs[tr],Zs[bn],Zs[Tr]]},function(An,tr,bn){var Tr=An.constants.stencilOps;$.optional(function(){An.assert(tr,bn+"&&typeof "+bn+'==="object"',"invalid "+sr)});function jr(ci){return $.optional(function(){An.assert(tr,'!("'+ci+'" in '+bn+")||("+bn+"."+ci+" in "+Tr+")","invalid "+sr+"."+ci+", must be one of "+Object.keys(Zs))}),tr.def('"',ci,'" in ',bn,"?",Tr,"[",bn,".",ci,"]:",Hi)}return[sr===yu?rn:ze,jr("fail"),jr("zfail"),jr("zpass")]});case Ul:return Sr(function(An){$.commandType(An,"object",or,un.commandStr);var tr=An.factor|0,bn=An.units|0;return $.commandType(tr,"number",or+".factor",un.commandStr),$.commandType(bn,"number",or+".units",un.commandStr),[tr,bn]},function(An,tr,bn){$.optional(function(){An.assert(tr,bn+"&&typeof "+bn+'==="object"',"invalid "+sr)});var Tr=tr.def(bn,".factor|0"),jr=tr.def(bn,".units|0");return[Tr,jr]});case lc:return Sr(function(An){var tr=0;return An==="front"?tr=ze:An==="back"&&(tr=rn),$.command(!!tr,or,un.commandStr),tr},function(An,tr,bn){return $.optional(function(){An.assert(tr,bn+'==="front"||'+bn+'==="back"',"invalid cull.face")}),tr.def(bn,'==="front"?',ze,":",rn)});case Sl:return Sr(function(An){return $.command(typeof An=="number"&&An>=W.lineWidthDims[0]&&An<=W.lineWidthDims[1],"invalid line width, must be a positive number between "+W.lineWidthDims[0]+" and "+W.lineWidthDims[1],un.commandStr),An},function(An,tr,bn){return $.optional(function(){An.assert(tr,"typeof "+bn+'==="number"&&'+bn+">="+W.lineWidthDims[0]+"&&"+bn+"<="+W.lineWidthDims[1],"invalid line width")}),bn});case xc:return Sr(function(An){return $.commandParameter(An,Eo,or,un.commandStr),Eo[An]},function(An,tr,bn){return $.optional(function(){An.assert(tr,bn+'==="cw"||'+bn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),tr.def(bn+'==="cw"?'+Un+":"+gr)});case Rl:return Sr(function(An){return $.command(Ao(An)&&An.length===4,"color.mask must be length 4 array",un.commandStr),An.map(function(tr){return!!tr})},function(An,tr,bn){return $.optional(function(){An.assert(tr,An.shared.isArrayLike+"("+bn+")&&"+bn+".length===4","invalid color.mask")}),Pe(4,function(Tr){return"!!"+bn+"["+Tr+"]"})});case Mc:return Sr(function(An){$.command(typeof An=="object"&&An,or,un.commandStr);var tr="value"in An?An.value:1,bn=!!An.invert;return $.command(typeof tr=="number"&&tr>=0&&tr<=1,"sample.coverage.value must be a number between 0 and 1",un.commandStr),[tr,bn]},function(An,tr,bn){$.optional(function(){An.assert(tr,bn+"&&typeof "+bn+'==="object"',"invalid sample.coverage")});var Tr=tr.def('"value" in ',bn,"?+",bn,".value:1"),jr=tr.def("!!",bn,".invert");return[Tr,jr]})}}),Rr}function Bl(Mn,un){var ir=Mn.static,wr=Mn.dynamic,Rr={};return Object.keys(ir).forEach(function(sr){var or=ir[sr],Sr;if(typeof or=="number"||typeof or=="boolean")Sr=$o(function(){return or});else if(typeof or=="function"){var An=or._reglType;An==="texture2d"||An==="textureCube"?Sr=$o(function(tr){return tr.link(or)}):An==="framebuffer"||An==="framebufferCube"?($.command(or.color.length>0,'missing color attachment for framebuffer sent to uniform "'+sr+'"',un.commandStr),Sr=$o(function(tr){return tr.link(or.color[0])})):$.commandRaise('invalid data for uniform "'+sr+'"',un.commandStr)}else Ao(or)?Sr=$o(function(tr){var bn=tr.global.def("[",Pe(or.length,function(Tr){return $.command(typeof or[Tr]=="number"||typeof or[Tr]=="boolean","invalid uniform "+sr,tr.commandStr),or[Tr]}),"]");return bn}):$.commandRaise('invalid or missing data for uniform "'+sr+'"',un.commandStr);Sr.value=or,Rr[sr]=Sr}),Object.keys(wr).forEach(function(sr){var or=wr[sr];Rr[sr]=hl(or,function(Sr,An){return Sr.invoke(An,or)})}),Rr}function Po(Mn,un){var ir=Mn.static,wr=Mn.dynamic,Rr={};return Object.keys(ir).forEach(function(sr){var or=ir[sr],Sr=lt.id(sr),An=new Zn;if(Ks(or))An.state=Oi,An.buffer=ct.getBuffer(ct.create(or,Oc,!1,!0)),An.type=0;else{var tr=ct.getBuffer(or);if(tr)An.state=Oi,An.buffer=tr,An.type=0;else if($.command(typeof or=="object"&&or,"invalid data for attribute "+sr,un.commandStr),"constant"in or){var bn=or.constant;An.buffer="null",An.state=zi,typeof bn=="number"?An.x=bn:($.command(Ao(bn)&&bn.length>0&&bn.length<=4,"invalid constant for attribute "+sr,un.commandStr),Kr.forEach(function(ia,To){To<bn.length&&(An[ia]=bn[To])}))}else{Ks(or.buffer)?tr=ct.getBuffer(ct.create(or.buffer,Oc,!1,!0)):tr=ct.getBuffer(or.buffer),$.command(!!tr,'missing buffer for attribute "'+sr+'"',un.commandStr);var Tr=or.offset|0;$.command(Tr>=0,'invalid offset for attribute "'+sr+'"',un.commandStr);var jr=or.stride|0;$.command(jr>=0&&jr<256,'invalid stride for attribute "'+sr+'", must be integer betweeen [0, 255]',un.commandStr);var ci=or.size|0;$.command(!("size"in or)||ci>0&&ci<=4,'invalid size for attribute "'+sr+'", must be 1,2,3,4',un.commandStr);var Yr=!!or.normalized,ri=0;"type"in or&&($.commandParameter(or.type,ka,"invalid type for attribute "+sr,un.commandStr),ri=ka[or.type]);var Ti=or.divisor|0;"divisor"in or&&($.command(Ti===0||kr,'cannot specify divisor for attribute "'+sr+'", instancing not supported',un.commandStr),$.command(Ti>=0,'invalid divisor for attribute "'+sr+'"',un.commandStr)),$.optional(function(){var ia=un.commandStr,To=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(or).forEach(function(ea){$.command(To.indexOf(ea)>=0,'unknown parameter "'+ea+'" for attribute pointer "'+sr+'" (valid parameters are '+To+")",ia)})}),An.buffer=tr,An.state=Oi,An.size=ci,An.normalized=Yr,An.type=ri||tr.dtype,An.offset=Tr,An.stride=jr,An.divisor=Ti}}Rr[sr]=$o(function(ia,To){var ea=ia.attribCache;if(Sr in ea)return ea[Sr];var Ba={isStream:!1};return Object.keys(An).forEach(function(fo){Ba[fo]=An[fo]}),An.buffer&&(Ba.buffer=ia.link(An.buffer),Ba.type=Ba.type||Ba.buffer+".dtype"),ea[Sr]=Ba,Ba})}),Object.keys(wr).forEach(function(sr){var or=wr[sr];function Sr(An,tr){var bn=An.invoke(tr,or),Tr=An.shared,jr=An.constants,ci=Tr.isBufferArgs,Yr=Tr.buffer;$.optional(function(){An.assert(tr,bn+"&&(typeof "+bn+'==="object"||typeof '+bn+'==="function")&&('+ci+"("+bn+")||"+Yr+".getBuffer("+bn+")||"+Yr+".getBuffer("+bn+".buffer)||"+ci+"("+bn+'.buffer)||("constant" in '+bn+"&&(typeof "+bn+'.constant==="number"||'+Tr.isArrayLike+"("+bn+".constant))))",'invalid dynamic attribute "'+sr+'"')});var ri={isStream:tr.def(!1)},Ti=new Zn;Ti.state=Oi,Object.keys(Ti).forEach(function(Ba){ri[Ba]=tr.def(""+Ti[Ba])});var ia=ri.buffer,To=ri.type;tr("if(",ci,"(",bn,")){",ri.isStream,"=true;",ia,"=",Yr,".createStream(",Oc,",",bn,");",To,"=",ia,".dtype;","}else{",ia,"=",Yr,".getBuffer(",bn,");","if(",ia,"){",To,"=",ia,".dtype;",'}else if("constant" in ',bn,"){",ri.state,"=",zi,";","if(typeof "+bn+'.constant === "number"){',ri[Kr[0]],"=",bn,".constant;",Kr.slice(1).map(function(Ba){return ri[Ba]}).join("="),"=0;","}else{",Kr.map(function(Ba,fo){return ri[Ba]+"="+bn+".constant.length>"+fo+"?"+bn+".constant["+fo+"]:0;"}).join(""),"}}else{","if(",ci,"(",bn,".buffer)){",ia,"=",Yr,".createStream(",Oc,",",bn,".buffer);","}else{",ia,"=",Yr,".getBuffer(",bn,".buffer);","}",To,'="type" in ',bn,"?",jr.glTypes,"[",bn,".type]:",ia,".dtype;",ri.normalized,"=!!",bn,".normalized;");function ea(Ba){tr(ri[Ba],"=",bn,".",Ba,"|0;")}return ea("size"),ea("offset"),ea("stride"),ea("divisor"),tr("}}"),tr.exit("if(",ri.isStream,"){",Yr,".destroyStream(",ia,");","}"),ri}Rr[sr]=hl(or,Sr)}),Rr}function Qu(Mn,un){var ir=Mn.static,wr=Mn.dynamic;if(hc in ir){var Rr=ir[hc];return Rr!==null&&Ge.getVAO(Rr)===null&&(Rr=Ge.createVAO(Rr)),$o(function(or){return or.link(Ge.getVAO(Rr))})}else if(hc in wr){var sr=wr[hc];return hl(sr,function(or,Sr){var An=or.invoke(Sr,sr);return Sr.def(or.shared.vao+".getVAO("+An+")")})}return null}function bu(Mn){var un=Mn.static,ir=Mn.dynamic,wr={};return Object.keys(un).forEach(function(Rr){var sr=un[Rr];wr[Rr]=$o(function(or,Sr){return typeof sr=="number"||typeof sr=="boolean"?""+sr:or.link(sr)})}),Object.keys(ir).forEach(function(Rr){var sr=ir[Rr];wr[Rr]=hl(sr,function(or,Sr){return or.invoke(Sr,sr)})}),wr}function zo(Mn,un,ir,wr,Rr){var sr=Mn.static,or=Mn.dynamic;$.optional(function(){var ea=[ul,ll,cl,Ju,ec,zc,Rc,Uc,Gu,hc].concat(ni);function Ba(fo){Object.keys(fo).forEach(function(bs){$.command(ea.indexOf(bs)>=0,'unknown parameter "'+bs+'"',Rr.commandStr)})}Ba(sr),Ba(or)});var Sr=ja(Mn,un),An=Gi(Mn,Rr),tr=oo(Mn,An,Rr),bn=Io(Mn,Rr),Tr=ou(Mn,Rr),jr=So(Mn,Rr,Sr);function ci(ea){var Ba=tr[ea];Ba&&(Tr[ea]=Ba)}ci(Dl),ci(oi(Sc));var Yr=Object.keys(Tr).length>0,ri={framebuffer:An,draw:bn,shader:jr,state:Tr,dirty:Yr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ri.profile=aa(Mn,Rr),ri.uniforms=Bl(ir,Rr),ri.drawVAO=ri.scopeVAO=Qu(Mn,Rr),!ri.drawVAO&&jr.program&&!Sr&&nt.angle_instanced_arrays){var Ti=!0,ia=jr.program.attributes.map(function(ea){var Ba=un.static[ea];return Ti=Ti&&!!Ba,Ba});if(Ti&&ia.length>0){var To=Ge.getVAO(Ge.createVAO(ia));ri.drawVAO=new ys(null,null,null,function(ea,Ba){return ea.link(To)}),ri.useVAO=!0}}return Sr?ri.useVAO=!0:ri.attributes=Po(un,Rr),ri.context=bu(wr,Rr),ri}function Xs(Mn,un,ir){var wr=Mn.shared,Rr=wr.context,sr=Mn.scope();Object.keys(ir).forEach(function(or){un.save(Rr,"."+or);var Sr=ir[or],An=Sr.append(Mn,un);Array.isArray(An)?sr(Rr,".",or,"=[",An.join(),"];"):sr(Rr,".",or,"=",An,";")}),un(sr)}function Fl(Mn,un,ir,wr){var Rr=Mn.shared,sr=Rr.gl,or=Rr.framebuffer,Sr;ti&&(Sr=un.def(Rr.extensions,".webgl_draw_buffers"));var An=Mn.constants,tr=An.drawBuffer,bn=An.backBuffer,Tr;ir?Tr=ir.append(Mn,un):Tr=un.def(or,".next"),wr||un("if(",Tr,"!==",or,".cur){"),un("if(",Tr,"){",sr,".bindFramebuffer(",qo,",",Tr,".framebuffer);"),ti&&un(Sr,".drawBuffersWEBGL(",tr,"[",Tr,".colorAttachments.length]);"),un("}else{",sr,".bindFramebuffer(",qo,",null);"),ti&&un(Sr,".drawBuffersWEBGL(",bn,");"),un("}",or,".cur=",Tr,";"),wr||un("}")}function kl(Mn,un,ir){var wr=Mn.shared,Rr=wr.gl,sr=Mn.current,or=Mn.next,Sr=wr.current,An=wr.next,tr=Mn.cond(Sr,".dirty");ni.forEach(function(bn){var Tr=oi(bn);if(!(Tr in ir.state)){var jr,ci;if(Tr in or){jr=or[Tr],ci=sr[Tr];var Yr=Pe(Ir[Tr].length,function(Ti){return tr.def(jr,"[",Ti,"]")});tr(Mn.cond(Yr.map(function(Ti,ia){return Ti+"!=="+ci+"["+ia+"]"}).join("||")).then(Rr,".",Qr[Tr],"(",Yr,");",Yr.map(function(Ti,ia){return ci+"["+ia+"]="+Ti}).join(";"),";"))}else{jr=tr.def(An,".",Tr);var ri=Mn.cond(jr,"!==",Sr,".",Tr);tr(ri),Tr in qr?ri(Mn.cond(jr).then(Rr,".enable(",qr[Tr],");").else(Rr,".disable(",qr[Tr],");"),Sr,".",Tr,"=",jr,";"):ri(Rr,".",Qr[Tr],"(",jr,");",Sr,".",Tr,"=",jr,";")}}}),Object.keys(ir.state).length===0&&tr(Sr,".dirty=false;"),un(tr)}function cc(Mn,un,ir,wr){var Rr=Mn.shared,sr=Mn.current,or=Rr.current,Sr=Rr.gl;$u(Object.keys(ir)).forEach(function(An){var tr=ir[An];if(!(wr&&!wr(tr))){var bn=tr.append(Mn,un);if(qr[An]){var Tr=qr[An];Is(tr)?bn?un(Sr,".enable(",Tr,");"):un(Sr,".disable(",Tr,");"):un(Mn.cond(bn).then(Sr,".enable(",Tr,");").else(Sr,".disable(",Tr,");")),un(or,".",An,"=",bn,";")}else if(Ao(bn)){var jr=sr[An];un(Sr,".",Qr[An],"(",bn,");",bn.map(function(ci,Yr){return jr+"["+Yr+"]="+ci}).join(";"),";")}else un(Sr,".",Qr[An],"(",bn,");",or,".",An,"=",bn,";")}})}function Ml(Mn,un){kr&&(Mn.instancing=un.def(Mn.shared.extensions,".angle_instanced_arrays"))}function co(Mn,un,ir,wr,Rr){var sr=Mn.shared,or=Mn.stats,Sr=sr.current,An=sr.timer,tr=ir.profile;function bn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Tr,jr;function ci(ea){Tr=un.def(),ea(Tr,"=",bn(),";"),typeof Rr=="string"?ea(or,".count+=",Rr,";"):ea(or,".count++;"),rr&&(wr?(jr=un.def(),ea(jr,"=",An,".getNumPendingQueries();")):ea(An,".beginQuery(",or,");"))}function Yr(ea){ea(or,".cpuTime+=",bn(),"-",Tr,";"),rr&&(wr?ea(An,".pushScopeStats(",jr,",",An,".getNumPendingQueries(),",or,");"):ea(An,".endQuery();"))}function ri(ea){var Ba=un.def(Sr,".profile");un(Sr,".profile=",ea,";"),un.exit(Sr,".profile=",Ba,";")}var Ti;if(tr){if(Is(tr)){tr.enable?(ci(un),Yr(un.exit),ri("true")):ri("false");return}Ti=tr.append(Mn,un),ri(Ti)}else Ti=un.def(Sr,".profile");var ia=Mn.block();ci(ia),un("if(",Ti,"){",ia,"}");var To=Mn.block();Yr(To),un.exit("if(",Ti,"){",To,"}")}function pc(Mn,un,ir,wr,Rr){var sr=Mn.shared;function or(An){switch(An){case hf:case Yc:case Sf:return 2;case eu:case vc:case kc:return 3;case dc:case Dc:case Zc:return 4;default:return 1}}function Sr(An,tr,bn){var Tr=sr.gl,jr=un.def(An,".location"),ci=un.def(sr.attributes,"[",jr,"]"),Yr=bn.state,ri=bn.buffer,Ti=[bn.x,bn.y,bn.z,bn.w],ia=["buffer","normalized","offset","stride"];function To(){un("if(!",ci,".buffer){",Tr,".enableVertexAttribArray(",jr,");}");var Ba=bn.type,fo;if(bn.size?fo=un.def(bn.size,"||",tr):fo=tr,un("if(",ci,".type!==",Ba,"||",ci,".size!==",fo,"||",ia.map(function(Pl){return ci+"."+Pl+"!=="+bn[Pl]}).join("||"),"){",Tr,".bindBuffer(",Oc,",",ri,".buffer);",Tr,".vertexAttribPointer(",[jr,fo,Ba,bn.normalized,bn.stride,bn.offset],");",ci,".type=",Ba,";",ci,".size=",fo,";",ia.map(function(Pl){return ci+"."+Pl+"="+bn[Pl]+";"}).join(""),"}"),kr){var bs=bn.divisor;un("if(",ci,".divisor!==",bs,"){",Mn.instancing,".vertexAttribDivisorANGLE(",[jr,bs],");",ci,".divisor=",bs,";}")}}function ea(){un("if(",ci,".buffer){",Tr,".disableVertexAttribArray(",jr,");",ci,".buffer=null;","}if(",Kr.map(function(Ba,fo){return ci+"."+Ba+"!=="+Ti[fo]}).join("||"),"){",Tr,".vertexAttrib4f(",jr,",",Ti,");",Kr.map(function(Ba,fo){return ci+"."+Ba+"="+Ti[fo]+";"}).join(""),"}")}Yr===Oi?To():Yr===zi?ea():(un("if(",Yr,"===",Oi,"){"),To(),un("}else{"),ea(),un("}"))}wr.forEach(function(An){var tr=An.name,bn=ir.attributes[tr],Tr;if(bn){if(!Rr(bn))return;Tr=bn.append(Mn,un)}else{if(!Rr(Ic))return;var jr=Mn.scopeAttrib(tr);$.optional(function(){Mn.assert(un,jr+".state","missing attribute "+tr)}),Tr={},Object.keys(new Zn).forEach(function(ci){Tr[ci]=un.def(jr,".",ci)})}Sr(Mn.link(An),or(An.info.type),Tr)})}function xs(Mn,un,ir,wr,Rr){for(var sr=Mn.shared,or=sr.gl,Sr,An=0;An<wr.length;++An){var tr=wr[An],bn=tr.name,Tr=tr.info.type,jr=ir.uniforms[bn],ci=Mn.link(tr),Yr=ci+".location",ri;if(jr){if(!Rr(jr))continue;if(Is(jr)){var Ti=jr.value;if($.command(Ti!==null&&typeof Ti!="undefined",'missing uniform "'+bn+'"',Mn.commandStr),Tr===me||Tr===Vt){$.command(typeof Ti=="function"&&(Tr===me&&(Ti._reglType==="texture2d"||Ti._reglType==="framebuffer")||Tr===Vt&&(Ti._reglType==="textureCube"||Ti._reglType==="framebufferCube")),"invalid texture for uniform "+bn,Mn.commandStr);var ia=Mn.link(Ti._texture||Ti.color[0]._texture);un(or,".uniform1i(",Yr,",",ia+".bind());"),un.exit(ia,".unbind();")}else if(Tr===Gc||Tr===qc||Tr===pe){$.optional(function(){$.command(Ao(Ti),"invalid matrix for uniform "+bn,Mn.commandStr),$.command(Tr===Gc&&Ti.length===4||Tr===qc&&Ti.length===9||Tr===pe&&Ti.length===16,"invalid length for matrix uniform "+bn,Mn.commandStr)});var To=Mn.global.def("new Float32Array(["+Array.prototype.slice.call(Ti)+"])"),ea=2;Tr===qc?ea=3:Tr===pe&&(ea=4),un(or,".uniformMatrix",ea,"fv(",Yr,",false,",To,");")}else{switch(Tr){case wc:$.commandType(Ti,"number","uniform "+bn,Mn.commandStr),Sr="1f";break;case hf:$.command(Ao(Ti)&&Ti.length===2,"uniform "+bn,Mn.commandStr),Sr="2f";break;case eu:$.command(Ao(Ti)&&Ti.length===3,"uniform "+bn,Mn.commandStr),Sr="3f";break;case dc:$.command(Ao(Ti)&&Ti.length===4,"uniform "+bn,Mn.commandStr),Sr="4f";break;case df:$.commandType(Ti,"boolean","uniform "+bn,Mn.commandStr),Sr="1i";break;case Ef:$.commandType(Ti,"number","uniform "+bn,Mn.commandStr),Sr="1i";break;case Sf:$.command(Ao(Ti)&&Ti.length===2,"uniform "+bn,Mn.commandStr),Sr="2i";break;case Yc:$.command(Ao(Ti)&&Ti.length===2,"uniform "+bn,Mn.commandStr),Sr="2i";break;case kc:$.command(Ao(Ti)&&Ti.length===3,"uniform "+bn,Mn.commandStr),Sr="3i";break;case vc:$.command(Ao(Ti)&&Ti.length===3,"uniform "+bn,Mn.commandStr),Sr="3i";break;case Zc:$.command(Ao(Ti)&&Ti.length===4,"uniform "+bn,Mn.commandStr),Sr="4i";break;case Dc:$.command(Ao(Ti)&&Ti.length===4,"uniform "+bn,Mn.commandStr),Sr="4i";break}un(or,".uniform",Sr,"(",Yr,",",Ao(Ti)?Array.prototype.slice.call(Ti):Ti,");")}continue}else ri=jr.append(Mn,un)}else{if(!Rr(Ic))continue;ri=un.def(sr.uniforms,"[",lt.id(bn),"]")}Tr===me?($(!Array.isArray(ri),"must specify a scalar prop for textures"),un("if(",ri,"&&",ri,'._reglType==="framebuffer"){',ri,"=",ri,".color[0];","}")):Tr===Vt&&($(!Array.isArray(ri),"must specify a scalar prop for cube maps"),un("if(",ri,"&&",ri,'._reglType==="framebufferCube"){',ri,"=",ri,".color[0];","}")),$.optional(function(){function Ac(Vc,Qf){Mn.assert(un,Vc,'bad data or missing for uniform "'+bn+'".  '+Qf)}function lh(Vc){$(!Array.isArray(ri),"must not specify an array type for uniform"),Ac("typeof "+ri+'==="'+Vc+'"',"invalid type, expected "+Vc)}function Fc(Vc,Qf){Array.isArray(ri)?$(ri.length===Vc,"must have length "+Vc):Ac(sr.isArrayLike+"("+ri+")&&"+ri+".length==="+Vc,"invalid vector, should have length "+Vc,Mn.commandStr)}function ch(Vc){$(!Array.isArray(ri),"must not specify a value type"),Ac("typeof "+ri+'==="function"&&'+ri+'._reglType==="texture'+(Vc===Tc?"2d":"Cube")+'"',"invalid texture type",Mn.commandStr)}switch(Tr){case Ef:lh("number");break;case Yc:Fc(2,"number");break;case vc:Fc(3,"number");break;case Dc:Fc(4,"number");break;case wc:lh("number");break;case hf:Fc(2,"number");break;case eu:Fc(3,"number");break;case dc:Fc(4,"number");break;case df:lh("boolean");break;case Sf:Fc(2,"boolean");break;case kc:Fc(3,"boolean");break;case Zc:Fc(4,"boolean");break;case Gc:Fc(4,"number");break;case qc:Fc(9,"number");break;case pe:Fc(16,"number");break;case me:ch(Tc);break;case Vt:ch(fl);break}});var Ba=1;switch(Tr){case me:case Vt:var fo=un.def(ri,"._texture");un(or,".uniform1i(",Yr,",",fo,".bind());"),un.exit(fo,".unbind();");continue;case Ef:case df:Sr="1i";break;case Yc:case Sf:Sr="2i",Ba=2;break;case vc:case kc:Sr="3i",Ba=3;break;case Dc:case Zc:Sr="4i",Ba=4;break;case wc:Sr="1f";break;case hf:Sr="2f",Ba=2;break;case eu:Sr="3f",Ba=3;break;case dc:Sr="4f",Ba=4;break;case Gc:Sr="Matrix2fv";break;case qc:Sr="Matrix3fv";break;case pe:Sr="Matrix4fv";break}if(un(or,".uniform",Sr,"(",Yr,","),Sr.charAt(0)==="M"){var bs=Math.pow(Tr-Gc+2,2),Pl=Mn.global.def("new Float32Array(",bs,")");Array.isArray(ri)?un("false,(",Pe(bs,function(Ac){return Pl+"["+Ac+"]="+ri[Ac]}),",",Pl,")"):un("false,(Array.isArray(",ri,")||",ri," instanceof Float32Array)?",ri,":(",Pe(bs,function(Ac){return Pl+"["+Ac+"]="+ri+"["+Ac+"]"}),",",Pl,")")}else Ba>1?un(Pe(Ba,function(Ac){return Array.isArray(ri)?ri[Ac]:ri+"["+Ac+"]"})):($(!Array.isArray(ri),"uniform value must not be an array"),un(ri));un(");")}}function Ma(Mn,un,ir,wr){var Rr=Mn.shared,sr=Rr.gl,or=Rr.draw,Sr=wr.draw;function An(){var fo=Sr.elements,bs,Pl=un;return fo?((fo.contextDep&&wr.contextDynamic||fo.propDep)&&(Pl=ir),bs=fo.append(Mn,Pl)):bs=Pl.def(or,".",Ju),bs&&Pl("if("+bs+")"+sr+".bindBuffer("+sh+","+bs+".buffer.buffer);"),bs}function tr(){var fo=Sr.count,bs,Pl=un;return fo?((fo.contextDep&&wr.contextDynamic||fo.propDep)&&(Pl=ir),bs=fo.append(Mn,Pl),$.optional(function(){fo.MISSING&&Mn.assert(un,"false","missing vertex count"),fo.DYNAMIC&&Mn.assert(Pl,bs+">=0","missing vertex count")})):(bs=Pl.def(or,".",Rc),$.optional(function(){Mn.assert(Pl,bs+">=0","missing vertex count")})),bs}var bn=An();function Tr(fo){var bs=Sr[fo];return bs?bs.contextDep&&wr.contextDynamic||bs.propDep?bs.append(Mn,ir):bs.append(Mn,un):un.def(or,".",fo)}var jr=Tr(ec),ci=Tr(zc),Yr=tr();if(typeof Yr=="number"){if(Yr===0)return}else ir("if(",Yr,"){"),ir.exit("}");var ri,Ti;kr&&(ri=Tr(Uc),Ti=Mn.instancing);var ia=bn+".type",To=Sr.elements&&Is(Sr.elements);function ea(){function fo(){ir(Ti,".drawElementsInstancedANGLE(",[jr,Yr,ia,ci+"<<(("+ia+"-"+bi+")>>1)",ri],");")}function bs(){ir(Ti,".drawArraysInstancedANGLE(",[jr,ci,Yr,ri],");")}bn?To?fo():(ir("if(",bn,"){"),fo(),ir("}else{"),bs(),ir("}")):bs()}function Ba(){function fo(){ir(sr+".drawElements("+[jr,Yr,ia,ci+"<<(("+ia+"-"+bi+")>>1)"]+");")}function bs(){ir(sr+".drawArrays("+[jr,ci,Yr]+");")}bn?To?fo():(ir("if(",bn,"){"),fo(),ir("}else{"),bs(),ir("}")):bs()}kr&&(typeof ri!="number"||ri>=0)?typeof ri=="string"?(ir("if(",ri,">0){"),ea(),ir("}else if(",ri,"<0){"),Ba(),ir("}")):ea():Ba()}function _o(Mn,un,ir,wr,Rr){var sr=da(),or=sr.proc("body",Rr);return $.optional(function(){sr.commandStr=un.commandStr,sr.command=sr.link(un.commandStr)}),kr&&(sr.instancing=or.def(sr.shared.extensions,".angle_instanced_arrays")),Mn(sr,or,ir,wr),sr.compile().body}function Uo(Mn,un,ir,wr){Ml(Mn,un),ir.useVAO?ir.drawVAO?un(Mn.shared.vao,".setVAO(",ir.drawVAO.append(Mn,un),");"):un(Mn.shared.vao,".setVAO(",Mn.shared.vao,".targetVAO);"):(un(Mn.shared.vao,".setVAO(null);"),pc(Mn,un,ir,wr.attributes,function(){return!0})),xs(Mn,un,ir,wr.uniforms,function(){return!0}),Ma(Mn,un,un,ir)}function Gl(Mn,un){var ir=Mn.proc("draw",1);Ml(Mn,ir),Xs(Mn,ir,un.context),Fl(Mn,ir,un.framebuffer),kl(Mn,ir,un),cc(Mn,ir,un.state),co(Mn,ir,un,!1,!0);var wr=un.shader.progVar.append(Mn,ir);if(ir(Mn.shared.gl,".useProgram(",wr,".program);"),un.shader.program)Uo(Mn,ir,un,un.shader.program);else{ir(Mn.shared.vao,".setVAO(null);");var Rr=Mn.global.def("{}"),sr=ir.def(wr,".id"),or=ir.def(Rr,"[",sr,"]");ir(Mn.cond(or).then(or,".call(this,a0);").else(or,"=",Rr,"[",sr,"]=",Mn.link(function(Sr){return _o(Uo,Mn,un,Sr,1)}),"(",wr,");",or,".call(this,a0);"))}Object.keys(un.state).length>0&&ir(Mn.shared.current,".dirty=true;")}function Vl(Mn,un,ir,wr){Mn.batchId="a1",Ml(Mn,un);function Rr(){return!0}pc(Mn,un,ir,wr.attributes,Rr),xs(Mn,un,ir,wr.uniforms,Rr),Ma(Mn,un,un,ir)}function ef(Mn,un,ir,wr){Ml(Mn,un);var Rr=ir.contextDep,sr=un.def(),or="a0",Sr="a1",An=un.def();Mn.shared.props=An,Mn.batchId=sr;var tr=Mn.scope(),bn=Mn.scope();un(tr.entry,"for(",sr,"=0;",sr,"<",Sr,";++",sr,"){",An,"=",or,"[",sr,"];",bn,"}",tr.exit);function Tr(ia){return ia.contextDep&&Rr||ia.propDep}function jr(ia){return!Tr(ia)}if(ir.needsContext&&Xs(Mn,bn,ir.context),ir.needsFramebuffer&&Fl(Mn,bn,ir.framebuffer),cc(Mn,bn,ir.state,Tr),ir.profile&&Tr(ir.profile)&&co(Mn,bn,ir,!1,!0),wr)ir.useVAO?ir.drawVAO?Tr(ir.drawVAO)?bn(Mn.shared.vao,".setVAO(",ir.drawVAO.append(Mn,bn),");"):tr(Mn.shared.vao,".setVAO(",ir.drawVAO.append(Mn,tr),");"):tr(Mn.shared.vao,".setVAO(",Mn.shared.vao,".targetVAO);"):(tr(Mn.shared.vao,".setVAO(null);"),pc(Mn,tr,ir,wr.attributes,jr),pc(Mn,bn,ir,wr.attributes,Tr)),xs(Mn,tr,ir,wr.uniforms,jr),xs(Mn,bn,ir,wr.uniforms,Tr),Ma(Mn,tr,bn,ir);else{var ci=Mn.global.def("{}"),Yr=ir.shader.progVar.append(Mn,bn),ri=bn.def(Yr,".id"),Ti=bn.def(ci,"[",ri,"]");bn(Mn.shared.gl,".useProgram(",Yr,".program);","if(!",Ti,"){",Ti,"=",ci,"[",ri,"]=",Mn.link(function(ia){return _o(Vl,Mn,ir,ia,2)}),"(",Yr,");}",Ti,".call(this,a0[",sr,"],",sr,");")}}function jn(Mn,un){var ir=Mn.proc("batch",2);Mn.batchId="0",Ml(Mn,ir);var wr=!1,Rr=!0;Object.keys(un.context).forEach(function(ci){wr=wr||un.context[ci].propDep}),wr||(Xs(Mn,ir,un.context),Rr=!1);var sr=un.framebuffer,or=!1;sr?(sr.propDep?wr=or=!0:sr.contextDep&&wr&&(or=!0),or||Fl(Mn,ir,sr)):Fl(Mn,ir,null),un.state.viewport&&un.state.viewport.propDep&&(wr=!0);function Sr(ci){return ci.contextDep&&wr||ci.propDep}kl(Mn,ir,un),cc(Mn,ir,un.state,function(ci){return!Sr(ci)}),(!un.profile||!Sr(un.profile))&&co(Mn,ir,un,!1,"a1"),un.contextDep=wr,un.needsContext=Rr,un.needsFramebuffer=or;var An=un.shader.progVar;if(An.contextDep&&wr||An.propDep)ef(Mn,ir,un,null);else{var tr=An.append(Mn,ir);if(ir(Mn.shared.gl,".useProgram(",tr,".program);"),un.shader.program)ef(Mn,ir,un,un.shader.program);else{ir(Mn.shared.vao,".setVAO(null);");var bn=Mn.global.def("{}"),Tr=ir.def(tr,".id"),jr=ir.def(bn,"[",Tr,"]");ir(Mn.cond(jr).then(jr,".call(this,a0,a1);").else(jr,"=",bn,"[",Tr,"]=",Mn.link(function(ci){return _o(ef,Mn,un,ci,2)}),"(",tr,");",jr,".call(this,a0,a1);"))}}Object.keys(un.state).length>0&&ir(Mn.shared.current,".dirty=true;")}function Nr(Mn,un){var ir=Mn.proc("scope",3);Mn.batchId="a2";var wr=Mn.shared,Rr=wr.current;Xs(Mn,ir,un.context),un.framebuffer&&un.framebuffer.append(Mn,ir),$u(Object.keys(un.state)).forEach(function(or){var Sr=un.state[or],An=Sr.append(Mn,ir);Ao(An)?An.forEach(function(tr,bn){ir.set(Mn.next[or],"["+bn+"]",tr)}):ir.set(wr.next,"."+or,An)}),co(Mn,ir,un,!0,!0),[Ju,zc,Rc,Uc,ec].forEach(function(or){var Sr=un.draw[or];!Sr||ir.set(wr.draw,"."+or,""+Sr.append(Mn,ir))}),Object.keys(un.uniforms).forEach(function(or){var Sr=un.uniforms[or].append(Mn,ir);Array.isArray(Sr)&&(Sr="["+Sr.join()+"]"),ir.set(wr.uniforms,"["+lt.id(or)+"]",Sr)}),Object.keys(un.attributes).forEach(function(or){var Sr=un.attributes[or].append(Mn,ir),An=Mn.scopeAttrib(or);Object.keys(new Zn).forEach(function(tr){ir.set(An,"."+tr,Sr[tr])})}),un.scopeVAO&&ir.set(wr.vao,".targetVAO",un.scopeVAO.append(Mn,ir));function sr(or){var Sr=un.shader[or];Sr&&ir.set(wr.shader,"."+or,Sr.append(Mn,ir))}sr(ll),sr(cl),Object.keys(un.state).length>0&&(ir(Rr,".dirty=true;"),ir.exit(Rr,".dirty=true;")),ir("a1(",Mn.shared.context,",a0,",Mn.batchId,");")}function Gr(Mn){if(!(typeof Mn!="object"||Ao(Mn))){for(var un=Object.keys(Mn),ir=0;ir<un.length;++ir)if(ue.isDynamic(Mn[un[ir]]))return!0;return!1}}function Yi(Mn,un,ir){var wr=un.static[ir];if(!wr||!Gr(wr))return;var Rr=Mn.global,sr=Object.keys(wr),or=!1,Sr=!1,An=!1,tr=Mn.global.def("{}");sr.forEach(function(Tr){var jr=wr[Tr];if(ue.isDynamic(jr)){typeof jr=="function"&&(jr=wr[Tr]=ue.unbox(jr));var ci=hl(jr,null);or=or||ci.thisDep,An=An||ci.propDep,Sr=Sr||ci.contextDep}else{switch(Rr(tr,".",Tr,"="),typeof jr){case"number":Rr(jr);break;case"string":Rr('"',jr,'"');break;case"object":Array.isArray(jr)&&Rr("[",jr.join(),"]");break;default:Rr(Mn.link(jr));break}Rr(";")}});function bn(Tr,jr){sr.forEach(function(ci){var Yr=wr[ci];if(!!ue.isDynamic(Yr)){var ri=Tr.invoke(jr,Yr);jr(tr,".",ci,"=",ri,";")}})}un.dynamic[ir]=new ue.DynamicVariable($i,{thisDep:or,contextDep:Sr,propDep:An,ref:tr,append:bn}),delete un.static[ir]}function Qi(Mn,un,ir,wr,Rr){var sr=da();sr.stats=sr.link(Rr),Object.keys(un.static).forEach(function(Sr){Yi(sr,un,Sr)}),Gf.forEach(function(Sr){Yi(sr,Mn,Sr)});var or=zo(Mn,un,ir,wr,sr);return Gl(sr,or),Nr(sr,or),jn(sr,or),E(sr.compile(),{destroy:function(){or.shader.program.destroy()}})}return{next:Ci,current:Ir,procs:function(){var Mn=da(),un=Mn.proc("poll"),ir=Mn.proc("refresh"),wr=Mn.block();un(wr),ir(wr);var Rr=Mn.shared,sr=Rr.gl,or=Rr.next,Sr=Rr.current;wr(Sr,".dirty=false;"),Fl(Mn,un),Fl(Mn,ir,null,!0);var An;kr&&(An=Mn.link(kr)),nt.oes_vertex_array_object&&ir(Mn.link(nt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var tr=0;tr<W.maxAttributes;++tr){var bn=ir.def(Rr.attributes,"[",tr,"]"),Tr=Mn.cond(bn,".buffer");Tr.then(sr,".enableVertexAttribArray(",tr,");",sr,".bindBuffer(",Oc,",",bn,".buffer.buffer);",sr,".vertexAttribPointer(",tr,",",bn,".size,",bn,".type,",bn,".normalized,",bn,".stride,",bn,".offset);").else(sr,".disableVertexAttribArray(",tr,");",sr,".vertexAttrib4f(",tr,",",bn,".x,",bn,".y,",bn,".z,",bn,".w);",bn,".buffer=null;"),ir(Tr),kr&&ir(An,".vertexAttribDivisorANGLE(",tr,",",bn,".divisor);")}return ir(Mn.shared.vao,".currentVAO=null;",Mn.shared.vao,".setVAO(",Mn.shared.vao,".targetVAO);"),Object.keys(qr).forEach(function(jr){var ci=qr[jr],Yr=wr.def(or,".",jr),ri=Mn.block();ri("if(",Yr,"){",sr,".enable(",ci,")}else{",sr,".disable(",ci,")}",Sr,".",jr,"=",Yr,";"),ir(ri),un("if(",Yr,"!==",Sr,".",jr,"){",ri,"}")}),Object.keys(Qr).forEach(function(jr){var ci=Qr[jr],Yr=Ir[jr],ri,Ti,ia=Mn.block();if(ia(sr,".",ci,"("),Ao(Yr)){var To=Yr.length;ri=Mn.global.def(or,".",jr),Ti=Mn.global.def(Sr,".",jr),ia(Pe(To,function(ea){return ri+"["+ea+"]"}),");",Pe(To,function(ea){return Ti+"["+ea+"]="+ri+"["+ea+"];"}).join("")),un("if(",Pe(To,function(ea){return ri+"["+ea+"]!=="+Ti+"["+ea+"]"}).join("||"),"){",ia,"}")}else ri=wr.def(or,".",jr),Ti=wr.def(Sr,".",jr),ia(ri,");",Sr,".",jr,"=",ri,";"),un("if(",ri,"!==",Ti,"){",ia,"}");ir(ia)}),Mn.compile()}(),compile:Qi}}function Kc(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var tf=34918,Xl=34919,$f=35007,Hf=function(lt,nt){if(!nt.ext_disjoint_timer_query)return null;var W=[];function ct(){return W.pop()||nt.ext_disjoint_timer_query.createQueryEXT()}function Et(ti){W.push(ti)}var Ut=[];function fe(ti){var Ir=ct();nt.ext_disjoint_timer_query.beginQueryEXT($f,Ir),Ut.push(Ir),lr(Ut.length-1,Ut.length,ti)}function Ve(){nt.ext_disjoint_timer_query.endQueryEXT($f)}function Ge(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ke=[];function Rn(){return Ke.pop()||new Ge}function ur(ti){Ke.push(ti)}var rr=[];function lr(ti,Ir,Ci){var ni=Rn();ni.startQueryIndex=ti,ni.endQueryIndex=Ir,ni.sum=0,ni.stats=Ci,rr.push(ni)}var Zn=[],qn=[];function kr(){var ti,Ir,Ci=Ut.length;if(Ci!==0){qn.length=Math.max(qn.length,Ci+1),Zn.length=Math.max(Zn.length,Ci+1),Zn[0]=0,qn[0]=0;var ni=0;for(ti=0,Ir=0;Ir<Ut.length;++Ir){var qr=Ut[Ir];nt.ext_disjoint_timer_query.getQueryObjectEXT(qr,Xl)?(ni+=nt.ext_disjoint_timer_query.getQueryObjectEXT(qr,tf),Et(qr)):Ut[ti++]=qr,Zn[Ir+1]=ni,qn[Ir+1]=ti}for(Ut.length=ti,ti=0,Ir=0;Ir<rr.length;++Ir){var Qr=rr[Ir],oi=Qr.startQueryIndex,Ii=Qr.endQueryIndex;Qr.sum+=Zn[Ii]-Zn[oi];var ki=qn[oi],xi=qn[Ii];xi===ki?(Qr.stats.gpuTime+=Qr.sum/1e6,ur(Qr)):(Qr.startQueryIndex=ki,Qr.endQueryIndex=xi,rr[ti++]=Qr)}rr.length=ti}}return{beginQuery:fe,endQuery:Ve,pushScopeStats:lr,update:kr,getNumPendingQueries:function(){return Ut.length},clear:function(){W.push.apply(W,Ut);for(var Ir=0;Ir<W.length;Ir++)nt.ext_disjoint_timer_query.deleteQueryEXT(W[Ir]);Ut.length=0,W.length=0},restore:function(){Ut.length=0,W.length=0}}},_f=16384,nc=256,Yf=1024,Mf=34962,Mh="webglcontextlost",Pf="webglcontextrestored",uh=1,zh=2,Zf=3;function Bc(Fe,lt){for(var nt=0;nt<Fe.length;++nt)if(Fe[nt]===lt)return nt;return-1}function Rf(Fe){var lt=li(Fe);if(!lt)return null;var nt=lt.gl,W=nt.getContextAttributes(),ct=nt.isContextLost(),Et=Me(nt,lt);if(!Et)return null;var Ut=Fn(),fe=Kc(),Ve=Et.extensions,Ge=Hf(nt,Ve),Ke=cn(),Rn=nt.drawingBufferWidth,ur=nt.drawingBufferHeight,rr={tick:0,time:0,viewportWidth:Rn,viewportHeight:ur,framebufferWidth:Rn,framebufferHeight:ur,drawingBufferWidth:Rn,drawingBufferHeight:ur,pixelRatio:lt.pixelRatio},lr={},Zn={elements:null,primitive:4,count:-1,offset:0,instances:-1},qn=je(nt,Ve),kr=Ua(nt,fe,lt,Ir),ti=Yt(nt,Ve,qn,fe,kr);function Ir(Ma){return ti.destroyBuffer(Ma)}var Ci=lu(nt,Ve,kr,fe),ni=Ce(nt,Ut,fe,lt),qr=Xt(nt,Ve,qn,function(){Ii.procs.poll()},rr,fe,lt),Qr=vn(nt,Ve,qn,fe,lt),oi=ut(nt,Ve,qn,qr,Qr,fe),Ii=jc(nt,Ut,Ve,qn,kr,Ci,qr,oi,lr,ti,ni,Zn,rr,Ge,lt),ki=Yn(nt,oi,Ii.procs.poll,rr,W,Ve,qn),xi=Ii.next,di=nt.canvas,ui=[],da=[],aa=[],Gi=[lt.onDestroy],oo=null;function ja(){if(ui.length===0){Ge&&Ge.update(),oo=null;return}oo=Ne.next(ja),cc();for(var Ma=ui.length-1;Ma>=0;--Ma){var _o=ui[Ma];_o&&_o(rr,null,0)}nt.flush(),Ge&&Ge.update()}function So(){!oo&&ui.length>0&&(oo=Ne.next(ja))}function Io(){oo&&(Ne.cancel(ja),oo=null)}function ou(Ma){Ma.preventDefault(),ct=!0,Io(),da.forEach(function(_o){_o()})}function Bl(Ma){nt.getError(),ct=!1,Et.restore(),ni.restore(),kr.restore(),qr.restore(),Qr.restore(),oi.restore(),ti.restore(),Ge&&Ge.restore(),Ii.procs.refresh(),So(),aa.forEach(function(_o){_o()})}di&&(di.addEventListener(Mh,ou,!1),di.addEventListener(Pf,Bl,!1));function Po(){ui.length=0,Io(),di&&(di.removeEventListener(Mh,ou),di.removeEventListener(Pf,Bl)),ni.clear(),oi.clear(),Qr.clear(),qr.clear(),Ci.clear(),kr.clear(),ti.clear(),Ge&&Ge.clear(),Gi.forEach(function(Ma){Ma()})}function Qu(Ma){$(!!Ma,"invalid args to regl({...})"),$.type(Ma,"object","invalid args to regl({...})");function _o(Rr){var sr=E({},Rr);delete sr.uniforms,delete sr.attributes,delete sr.context,delete sr.vao,"stencil"in sr&&sr.stencil.op&&(sr.stencil.opBack=sr.stencil.opFront=sr.stencil.op,delete sr.stencil.op);function or(Sr){if(Sr in sr){var An=sr[Sr];delete sr[Sr],Object.keys(An).forEach(function(tr){sr[Sr+"."+tr]=An[tr]})}}return or("blend"),or("depth"),or("cull"),or("stencil"),or("polygonOffset"),or("scissor"),or("sample"),"vao"in Rr&&(sr.vao=Rr.vao),sr}function Uo(Rr,sr){var or={},Sr={};return Object.keys(Rr).forEach(function(An){var tr=Rr[An];if(ue.isDynamic(tr)){Sr[An]=ue.unbox(tr,An);return}else if(sr&&Array.isArray(tr)){for(var bn=0;bn<tr.length;++bn)if(ue.isDynamic(tr[bn])){Sr[An]=ue.unbox(tr,An);return}}or[An]=tr}),{dynamic:Sr,static:or}}var Gl=Uo(Ma.context||{},!0),Vl=Uo(Ma.uniforms||{},!0),ef=Uo(Ma.attributes||{},!1),jn=Uo(_o(Ma),!1),Nr={gpuTime:0,cpuTime:0,count:0},Gr=Ii.compile(jn,ef,Vl,Gl,Nr),Yi=Gr.draw,Qi=Gr.batch,Mn=Gr.scope,un=[];function ir(Rr){for(;un.length<Rr;)un.push(null);return un}function wr(Rr,sr){var or;if(ct&&$.raise("context lost"),typeof Rr=="function")return Mn.call(this,null,Rr,0);if(typeof sr=="function")if(typeof Rr=="number")for(or=0;or<Rr;++or)Mn.call(this,null,sr,or);else if(Array.isArray(Rr))for(or=0;or<Rr.length;++or)Mn.call(this,Rr[or],sr,or);else return Mn.call(this,Rr,sr,0);else if(typeof Rr=="number"){if(Rr>0)return Qi.call(this,ir(Rr|0),Rr|0)}else if(Array.isArray(Rr)){if(Rr.length)return Qi.call(this,Rr,Rr.length)}else return Yi.call(this,Rr)}return E(wr,{stats:Nr,destroy:function(){Gr.destroy()}})}var bu=oi.setFBO=Qu({framebuffer:ue.define.call(null,uh,"framebuffer")});function zo(Ma,_o){var Uo=0;Ii.procs.poll();var Gl=_o.color;Gl&&(nt.clearColor(+Gl[0]||0,+Gl[1]||0,+Gl[2]||0,+Gl[3]||0),Uo|=_f),"depth"in _o&&(nt.clearDepth(+_o.depth),Uo|=nc),"stencil"in _o&&(nt.clearStencil(_o.stencil|0),Uo|=Yf),$(!!Uo,"called regl.clear with no buffer specified"),nt.clear(Uo)}function Xs(Ma){if($(typeof Ma=="object"&&Ma,"regl.clear() takes an object as input"),"framebuffer"in Ma)if(Ma.framebuffer&&Ma.framebuffer_reglType==="framebufferCube")for(var _o=0;_o<6;++_o)bu(E({framebuffer:Ma.framebuffer.faces[_o]},Ma),zo);else bu(Ma,zo);else zo(null,Ma)}function Fl(Ma){$.type(Ma,"function","regl.frame() callback must be a function"),ui.push(Ma);function _o(){var Uo=Bc(ui,Ma);$(Uo>=0,"cannot cancel a frame twice");function Gl(){var Vl=Bc(ui,Gl);ui[Vl]=ui[ui.length-1],ui.length-=1,ui.length<=0&&Io()}ui[Uo]=Gl}return So(),{cancel:_o}}function kl(){var Ma=xi.viewport,_o=xi.scissor_box;Ma[0]=Ma[1]=_o[0]=_o[1]=0,rr.viewportWidth=rr.framebufferWidth=rr.drawingBufferWidth=Ma[2]=_o[2]=nt.drawingBufferWidth,rr.viewportHeight=rr.framebufferHeight=rr.drawingBufferHeight=Ma[3]=_o[3]=nt.drawingBufferHeight}function cc(){rr.tick+=1,rr.time=co(),kl(),Ii.procs.poll()}function Ml(){qr.refresh(),kl(),Ii.procs.refresh(),Ge&&Ge.update()}function co(){return(cn()-Ke)/1e3}Ml();function pc(Ma,_o){$.type(_o,"function","listener callback must be a function");var Uo;switch(Ma){case"frame":return Fl(_o);case"lost":Uo=da;break;case"restore":Uo=aa;break;case"destroy":Uo=Gi;break;default:$.raise("invalid event, must be one of frame,lost,restore,destroy")}return Uo.push(_o),{cancel:function(){for(var Vl=0;Vl<Uo.length;++Vl)if(Uo[Vl]===_o){Uo[Vl]=Uo[Uo.length-1],Uo.pop();return}}}}var xs=E(Qu,{clear:Xs,prop:ue.define.bind(null,uh),context:ue.define.bind(null,zh),this:ue.define.bind(null,Zf),draw:Qu({}),buffer:function(_o){return kr.create(_o,Mf,!1,!1)},elements:function(_o){return Ci.create(_o,!1)},texture:qr.create2D,cube:qr.createCube,renderbuffer:Qr.create,framebuffer:oi.create,framebufferCube:oi.createCube,vao:ti.createVAO,attributes:W,frame:Fl,on:pc,limits:qn,hasExtension:function(_o){return qn.extensions.indexOf(_o.toLowerCase())>=0},read:ki,destroy:Po,_gl:nt,_refresh:Ml,poll:function(){cc(),Ge&&Ge.update()},now:co,stats:fe});return lt.onDone(null,xs),xs}return Rf})},fdMe:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});function U(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.map(e)),E}},fhzG:function(Se,dt,L){"use strict";var U=L("q1tI"),E=L("lT4e");if(typeof U=="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var T=new U.Component().updater;Se.exports=E(U.Component,U.isValidElement,T)},fo6e:function(Se,dt){var L=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function U(E){return L.test(E)}Se.exports=U},g4R6:function(Se,dt){function L(U,E,T){return U===U&&(T!==void 0&&(U=U<=T?U:T),E!==void 0&&(U=U>=E?U:E)),U}Se.exports=L},gFfm:function(Se,dt){function L(U,E){for(var T=-1,e=U==null?0:U.length;++T<e&&E(U[T],T,U)!==!1;);return U}Se.exports=L},gMG2:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return M});var U={},E={},T=34,e=10,t=13;function u(x){return new Function("d","return {"+x.map(function(m,S){return JSON.stringify(m)+": d["+S+'] || ""'}).join(",")+"}")}function s(x,m){var S=u(x);return function(P,A){return m(S(P),A,x)}}function h(x){var m=Object.create(null),S=[];return x.forEach(function(P){for(var A in P)A in m||S.push(m[A]=A)}),S}function r(x,m){var S=x+"",P=S.length;return P<m?new Array(m-P+1).join(0)+S:S}function c(x){return x<0?"-"+r(-x,6):x>9999?"+"+r(x,6):r(x,4)}function n(x){var m=x.getUTCHours(),S=x.getUTCMinutes(),P=x.getUTCSeconds(),A=x.getUTCMilliseconds();return isNaN(x)?"Invalid Date":c(x.getUTCFullYear(),4)+"-"+r(x.getUTCMonth()+1,2)+"-"+r(x.getUTCDate(),2)+(A?"T"+r(m,2)+":"+r(S,2)+":"+r(P,2)+"."+r(A,3)+"Z":P?"T"+r(m,2)+":"+r(S,2)+":"+r(P,2)+"Z":S||m?"T"+r(m,2)+":"+r(S,2)+"Z":"")}var i=function(x){var m=new RegExp('["'+x+`
\r]`),S=x.charCodeAt(0);function P(k,Z){var X,at,pt=A(k,function(gt,ft){if(X)return X(gt,ft-1);at=gt,X=Z?s(gt,Z):u(gt)});return pt.columns=at||[],pt}function A(k,Z){var X=[],at=k.length,pt=0,gt=0,ft,Rt=at<=0,Nt=!1;k.charCodeAt(at-1)===e&&--at,k.charCodeAt(at-1)===t&&--at;function Dt(){if(Rt)return E;if(Nt)return Nt=!1,U;var xt,Ot=pt,it;if(k.charCodeAt(Ot)===T){for(;pt++<at&&k.charCodeAt(pt)!==T||k.charCodeAt(++pt)===T;);return(xt=pt)>=at?Rt=!0:(it=k.charCodeAt(pt++))===e?Nt=!0:it===t&&(Nt=!0,k.charCodeAt(pt)===e&&++pt),k.slice(Ot+1,xt-1).replace(/""/g,'"')}for(;pt<at;){if((it=k.charCodeAt(xt=pt++))===e)Nt=!0;else if(it===t)Nt=!0,k.charCodeAt(pt)===e&&++pt;else if(it!==S)continue;return k.slice(Ot,xt)}return Rt=!0,k.slice(Ot,at)}for(;(ft=Dt())!==E;){for(var St=[];ft!==U&&ft!==E;)St.push(ft),ft=Dt();Z&&(St=Z(St,gt++))==null||X.push(St)}return X}function O(k,Z){return k.map(function(X){return Z.map(function(at){return V(X[at])}).join(x)})}function R(k,Z){return Z==null&&(Z=h(k)),[Z.map(V).join(x)].concat(O(k,Z)).join(`
`)}function H(k,Z){return Z==null&&(Z=h(k)),O(k,Z).join(`
`)}function N(k){return k.map(K).join(`
`)}function K(k){return k.map(V).join(x)}function V(k){return k==null?"":k instanceof Date?n(k):m.test(k+="")?'"'+k.replace(/"/g,'""')+'"':k}return{parse:P,parseRows:A,format:R,formatBody:H,formatRows:N,formatRow:K,formatValue:V}},a=i(","),o=a.parse,l=a.parseRows,f=a.format,v=a.formatBody,b=a.formatRows,g=a.formatRow,y=a.formatValue,_=L("5zYK");function M(x,m){var S=o(x);return Object(_.a)(S,m)}},gQMU:function(Se,dt,L){var U=L("0ZTe"),E=U("toUpperCase");Se.exports=E},gzZq:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingToSyntax=void 0;var U=L("MON2"),E=L("FV85"),T=L("D9lx"),e=L("LKzl"),t=function(){function u(s){this._binding=s}return u.prototype.to=function(s){return this._binding.type=E.BindingTypeEnum.Instance,this._binding.implementationType=s,new T.BindingInWhenOnSyntax(this._binding)},u.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+U.INVALID_TO_SELF_VALUE);var s=this._binding.serviceIdentifier;return this.to(s)},u.prototype.toConstantValue=function(s){return this._binding.type=E.BindingTypeEnum.ConstantValue,this._binding.cache=s,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toDynamicValue=function(s){return this._binding.type=E.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=s,this._binding.implementationType=null,new T.BindingInWhenOnSyntax(this._binding)},u.prototype.toConstructor=function(s){return this._binding.type=E.BindingTypeEnum.Constructor,this._binding.implementationType=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toFunction=function(s){if(typeof s!="function")throw new Error(U.INVALID_FUNCTION_BINDING);var h=this.toConstantValue(s);return this._binding.type=E.BindingTypeEnum.Function,this._binding.scope=E.BindingScopeEnum.Singleton,h},u.prototype.toAutoFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=function(h){var r=function(){return h.container.get(s)};return r},this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toProvider=function(s){return this._binding.type=E.BindingTypeEnum.Provider,this._binding.provider=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toService=function(s){this.toDynamicValue(function(h){return h.container.get(s)})},u}();dt.BindingToSyntax=t},h1nZ:function(Se,dt,L){"use strict";var U=L("fX6N");L.d(dt,"container",function(){return U.c}),L.d(dt,"createSceneContainer",function(){return U.b}),L.d(dt,"createLayerContainer",function(){return U.a}),L.d(dt,"lazyInject",function(){return U.d});var E=L("+em5"),T=L("bB6j");L.d(dt,"TYPES",function(){return T.a});var e=L("8/Fi"),t=L("PUg6");L.d(dt,"BlendType",function(){return t.a});var u=L("cZlC");L.d(dt,"AttributeType",function(){return u.a}),L.d(dt,"ScaleTypes",function(){return u.b}),L.d(dt,"StyleScaleType",function(){return u.c});var s=L("O1je"),h=L.n(s);L.o(s,"CameraUniform")&&L.d(dt,"CameraUniform",function(){return s.CameraUniform}),L.o(s,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return s.CityBuildingLayer}),L.o(s,"Control")&&L.d(dt,"Control",function(){return s.Control}),L.o(s,"CoordinateSystem")&&L.d(dt,"CoordinateSystem",function(){return s.CoordinateSystem}),L.o(s,"CoordinateUniform")&&L.d(dt,"CoordinateUniform",function(){return s.CoordinateUniform}),L.o(s,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return s.HeatmapLayer}),L.o(s,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return s.ImageLayer}),L.o(s,"Layers")&&L.d(dt,"Layers",function(){return s.Layers}),L.o(s,"LineLayer")&&L.d(dt,"LineLayer",function(){return s.LineLayer}),L.o(s,"Logo")&&L.d(dt,"Logo",function(){return s.Logo}),L.o(s,"MapServiceEvent")&&L.d(dt,"MapServiceEvent",function(){return s.MapServiceEvent}),L.o(s,"Marker")&&L.d(dt,"Marker",function(){return s.Marker}),L.o(s,"PointLayer")&&L.d(dt,"PointLayer",function(){return s.PointLayer}),L.o(s,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return s.PolygonLayer}),L.o(s,"Popup")&&L.d(dt,"Popup",function(){return s.Popup}),L.o(s,"PositionType")&&L.d(dt,"PositionType",function(){return s.PositionType}),L.o(s,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return s.RasterLayer}),L.o(s,"Scale")&&L.d(dt,"Scale",function(){return s.Scale}),L.o(s,"Scene")&&L.d(dt,"Scene",function(){return s.Scene}),L.o(s,"SceneEventList")&&L.d(dt,"SceneEventList",function(){return s.SceneEventList}),L.o(s,"Zoom")&&L.d(dt,"Zoom",function(){return s.Zoom}),L.o(s,"gl")&&L.d(dt,"gl",function(){return s.gl});var r=L("L56e");L.d(dt,"MapServiceEvent",function(){return r.a});var c=L("HthE");L.d(dt,"CoordinateSystem",function(){return c.a}),L.d(dt,"CoordinateUniform",function(){return c.b});var n=L("/33/"),i=L.n(n);L.o(n,"CameraUniform")&&L.d(dt,"CameraUniform",function(){return n.CameraUniform}),L.o(n,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return n.CityBuildingLayer}),L.o(n,"Control")&&L.d(dt,"Control",function(){return n.Control}),L.o(n,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return n.HeatmapLayer}),L.o(n,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return n.ImageLayer}),L.o(n,"Layers")&&L.d(dt,"Layers",function(){return n.Layers}),L.o(n,"LineLayer")&&L.d(dt,"LineLayer",function(){return n.LineLayer}),L.o(n,"Logo")&&L.d(dt,"Logo",function(){return n.Logo}),L.o(n,"Marker")&&L.d(dt,"Marker",function(){return n.Marker}),L.o(n,"PointLayer")&&L.d(dt,"PointLayer",function(){return n.PointLayer}),L.o(n,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return n.PolygonLayer}),L.o(n,"Popup")&&L.d(dt,"Popup",function(){return n.Popup}),L.o(n,"PositionType")&&L.d(dt,"PositionType",function(){return n.PositionType}),L.o(n,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return n.RasterLayer}),L.o(n,"Scale")&&L.d(dt,"Scale",function(){return n.Scale}),L.o(n,"Scene")&&L.d(dt,"Scene",function(){return n.Scene}),L.o(n,"SceneEventList")&&L.d(dt,"SceneEventList",function(){return n.SceneEventList}),L.o(n,"Zoom")&&L.d(dt,"Zoom",function(){return n.Zoom}),L.o(n,"gl")&&L.d(dt,"gl",function(){return n.gl});var a=L("EfZ0");L.d(dt,"CameraUniform",function(){return a.a});var o=L("riiI"),l=L.n(o);L.o(o,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return o.CityBuildingLayer}),L.o(o,"Control")&&L.d(dt,"Control",function(){return o.Control}),L.o(o,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return o.HeatmapLayer}),L.o(o,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return o.ImageLayer}),L.o(o,"Layers")&&L.d(dt,"Layers",function(){return o.Layers}),L.o(o,"LineLayer")&&L.d(dt,"LineLayer",function(){return o.LineLayer}),L.o(o,"Logo")&&L.d(dt,"Logo",function(){return o.Logo}),L.o(o,"Marker")&&L.d(dt,"Marker",function(){return o.Marker}),L.o(o,"PointLayer")&&L.d(dt,"PointLayer",function(){return o.PointLayer}),L.o(o,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return o.PolygonLayer}),L.o(o,"Popup")&&L.d(dt,"Popup",function(){return o.Popup}),L.o(o,"PositionType")&&L.d(dt,"PositionType",function(){return o.PositionType}),L.o(o,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return o.RasterLayer}),L.o(o,"Scale")&&L.d(dt,"Scale",function(){return o.Scale}),L.o(o,"Scene")&&L.d(dt,"Scene",function(){return o.Scene}),L.o(o,"SceneEventList")&&L.d(dt,"SceneEventList",function(){return o.SceneEventList}),L.o(o,"Zoom")&&L.d(dt,"Zoom",function(){return o.Zoom}),L.o(o,"gl")&&L.d(dt,"gl",function(){return o.gl});var f=L("eg+a");L.d(dt,"SceneEventList",function(){return f.a});var v=L("bYl4"),b=L.n(v);L.o(v,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return v.CityBuildingLayer}),L.o(v,"Control")&&L.d(dt,"Control",function(){return v.Control}),L.o(v,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return v.HeatmapLayer}),L.o(v,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return v.ImageLayer}),L.o(v,"Layers")&&L.d(dt,"Layers",function(){return v.Layers}),L.o(v,"LineLayer")&&L.d(dt,"LineLayer",function(){return v.LineLayer}),L.o(v,"Logo")&&L.d(dt,"Logo",function(){return v.Logo}),L.o(v,"Marker")&&L.d(dt,"Marker",function(){return v.Marker}),L.o(v,"PointLayer")&&L.d(dt,"PointLayer",function(){return v.PointLayer}),L.o(v,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return v.PolygonLayer}),L.o(v,"Popup")&&L.d(dt,"Popup",function(){return v.Popup}),L.o(v,"PositionType")&&L.d(dt,"PositionType",function(){return v.PositionType}),L.o(v,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return v.RasterLayer}),L.o(v,"Scale")&&L.d(dt,"Scale",function(){return v.Scale}),L.o(v,"Scene")&&L.d(dt,"Scene",function(){return v.Scene}),L.o(v,"Zoom")&&L.d(dt,"Zoom",function(){return v.Zoom}),L.o(v,"gl")&&L.d(dt,"gl",function(){return v.gl});var g=L("FI6e"),y=L.n(g);L.o(g,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return g.CityBuildingLayer}),L.o(g,"Control")&&L.d(dt,"Control",function(){return g.Control}),L.o(g,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return g.HeatmapLayer}),L.o(g,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return g.ImageLayer}),L.o(g,"Layers")&&L.d(dt,"Layers",function(){return g.Layers}),L.o(g,"LineLayer")&&L.d(dt,"LineLayer",function(){return g.LineLayer}),L.o(g,"Logo")&&L.d(dt,"Logo",function(){return g.Logo}),L.o(g,"Marker")&&L.d(dt,"Marker",function(){return g.Marker}),L.o(g,"PointLayer")&&L.d(dt,"PointLayer",function(){return g.PointLayer}),L.o(g,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return g.PolygonLayer}),L.o(g,"Popup")&&L.d(dt,"Popup",function(){return g.Popup}),L.o(g,"PositionType")&&L.d(dt,"PositionType",function(){return g.PositionType}),L.o(g,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return g.RasterLayer}),L.o(g,"Scale")&&L.d(dt,"Scale",function(){return g.Scale}),L.o(g,"Scene")&&L.d(dt,"Scene",function(){return g.Scene}),L.o(g,"Zoom")&&L.d(dt,"Zoom",function(){return g.Zoom}),L.o(g,"gl")&&L.d(dt,"gl",function(){return g.gl});var _=L("D+ow"),M=L.n(_);L.o(_,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return _.CityBuildingLayer}),L.o(_,"Control")&&L.d(dt,"Control",function(){return _.Control}),L.o(_,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return _.HeatmapLayer}),L.o(_,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return _.ImageLayer}),L.o(_,"Layers")&&L.d(dt,"Layers",function(){return _.Layers}),L.o(_,"LineLayer")&&L.d(dt,"LineLayer",function(){return _.LineLayer}),L.o(_,"Logo")&&L.d(dt,"Logo",function(){return _.Logo}),L.o(_,"Marker")&&L.d(dt,"Marker",function(){return _.Marker}),L.o(_,"PointLayer")&&L.d(dt,"PointLayer",function(){return _.PointLayer}),L.o(_,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return _.PolygonLayer}),L.o(_,"Popup")&&L.d(dt,"Popup",function(){return _.Popup}),L.o(_,"PositionType")&&L.d(dt,"PositionType",function(){return _.PositionType}),L.o(_,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return _.RasterLayer}),L.o(_,"Scale")&&L.d(dt,"Scale",function(){return _.Scale}),L.o(_,"Scene")&&L.d(dt,"Scene",function(){return _.Scene}),L.o(_,"Zoom")&&L.d(dt,"Zoom",function(){return _.Zoom}),L.o(_,"gl")&&L.d(dt,"gl",function(){return _.gl});var x=L("AFH1");L.d(dt,"PositionType",function(){return x.a});var m=L("8uyu"),S=L.n(m);L.o(m,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return m.CityBuildingLayer}),L.o(m,"Control")&&L.d(dt,"Control",function(){return m.Control}),L.o(m,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return m.HeatmapLayer}),L.o(m,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return m.ImageLayer}),L.o(m,"Layers")&&L.d(dt,"Layers",function(){return m.Layers}),L.o(m,"LineLayer")&&L.d(dt,"LineLayer",function(){return m.LineLayer}),L.o(m,"Logo")&&L.d(dt,"Logo",function(){return m.Logo}),L.o(m,"Marker")&&L.d(dt,"Marker",function(){return m.Marker}),L.o(m,"PointLayer")&&L.d(dt,"PointLayer",function(){return m.PointLayer}),L.o(m,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return m.PolygonLayer}),L.o(m,"Popup")&&L.d(dt,"Popup",function(){return m.Popup}),L.o(m,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return m.RasterLayer}),L.o(m,"Scale")&&L.d(dt,"Scale",function(){return m.Scale}),L.o(m,"Scene")&&L.d(dt,"Scene",function(){return m.Scene}),L.o(m,"Zoom")&&L.d(dt,"Zoom",function(){return m.Zoom}),L.o(m,"gl")&&L.d(dt,"gl",function(){return m.gl});var P=L("J7lC"),A=L.n(P);L.o(P,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return P.CityBuildingLayer}),L.o(P,"Control")&&L.d(dt,"Control",function(){return P.Control}),L.o(P,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return P.HeatmapLayer}),L.o(P,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return P.ImageLayer}),L.o(P,"Layers")&&L.d(dt,"Layers",function(){return P.Layers}),L.o(P,"LineLayer")&&L.d(dt,"LineLayer",function(){return P.LineLayer}),L.o(P,"Logo")&&L.d(dt,"Logo",function(){return P.Logo}),L.o(P,"Marker")&&L.d(dt,"Marker",function(){return P.Marker}),L.o(P,"PointLayer")&&L.d(dt,"PointLayer",function(){return P.PointLayer}),L.o(P,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return P.PolygonLayer}),L.o(P,"Popup")&&L.d(dt,"Popup",function(){return P.Popup}),L.o(P,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return P.RasterLayer}),L.o(P,"Scale")&&L.d(dt,"Scale",function(){return P.Scale}),L.o(P,"Scene")&&L.d(dt,"Scene",function(){return P.Scene}),L.o(P,"Zoom")&&L.d(dt,"Zoom",function(){return P.Zoom}),L.o(P,"gl")&&L.d(dt,"gl",function(){return P.gl});var O=L("QGbF"),R=L.n(O);L.o(O,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return O.CityBuildingLayer}),L.o(O,"Control")&&L.d(dt,"Control",function(){return O.Control}),L.o(O,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return O.HeatmapLayer}),L.o(O,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return O.ImageLayer}),L.o(O,"Layers")&&L.d(dt,"Layers",function(){return O.Layers}),L.o(O,"LineLayer")&&L.d(dt,"LineLayer",function(){return O.LineLayer}),L.o(O,"Logo")&&L.d(dt,"Logo",function(){return O.Logo}),L.o(O,"Marker")&&L.d(dt,"Marker",function(){return O.Marker}),L.o(O,"PointLayer")&&L.d(dt,"PointLayer",function(){return O.PointLayer}),L.o(O,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return O.PolygonLayer}),L.o(O,"Popup")&&L.d(dt,"Popup",function(){return O.Popup}),L.o(O,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return O.RasterLayer}),L.o(O,"Scale")&&L.d(dt,"Scale",function(){return O.Scale}),L.o(O,"Scene")&&L.d(dt,"Scene",function(){return O.Scene}),L.o(O,"Zoom")&&L.d(dt,"Zoom",function(){return O.Zoom}),L.o(O,"gl")&&L.d(dt,"gl",function(){return O.gl});var H=L("V1cb"),N=L("4kj+"),K=L.n(N);L.o(N,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return N.CityBuildingLayer}),L.o(N,"Control")&&L.d(dt,"Control",function(){return N.Control}),L.o(N,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return N.HeatmapLayer}),L.o(N,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return N.ImageLayer}),L.o(N,"Layers")&&L.d(dt,"Layers",function(){return N.Layers}),L.o(N,"LineLayer")&&L.d(dt,"LineLayer",function(){return N.LineLayer}),L.o(N,"Logo")&&L.d(dt,"Logo",function(){return N.Logo}),L.o(N,"Marker")&&L.d(dt,"Marker",function(){return N.Marker}),L.o(N,"PointLayer")&&L.d(dt,"PointLayer",function(){return N.PointLayer}),L.o(N,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return N.PolygonLayer}),L.o(N,"Popup")&&L.d(dt,"Popup",function(){return N.Popup}),L.o(N,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return N.RasterLayer}),L.o(N,"Scale")&&L.d(dt,"Scale",function(){return N.Scale}),L.o(N,"Scene")&&L.d(dt,"Scene",function(){return N.Scene}),L.o(N,"Zoom")&&L.d(dt,"Zoom",function(){return N.Zoom}),L.o(N,"gl")&&L.d(dt,"gl",function(){return N.gl});var V=L("bzyH"),k=L.n(V);L.o(V,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return V.CityBuildingLayer}),L.o(V,"Control")&&L.d(dt,"Control",function(){return V.Control}),L.o(V,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return V.HeatmapLayer}),L.o(V,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return V.ImageLayer}),L.o(V,"Layers")&&L.d(dt,"Layers",function(){return V.Layers}),L.o(V,"LineLayer")&&L.d(dt,"LineLayer",function(){return V.LineLayer}),L.o(V,"Logo")&&L.d(dt,"Logo",function(){return V.Logo}),L.o(V,"Marker")&&L.d(dt,"Marker",function(){return V.Marker}),L.o(V,"PointLayer")&&L.d(dt,"PointLayer",function(){return V.PointLayer}),L.o(V,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return V.PolygonLayer}),L.o(V,"Popup")&&L.d(dt,"Popup",function(){return V.Popup}),L.o(V,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return V.RasterLayer}),L.o(V,"Scale")&&L.d(dt,"Scale",function(){return V.Scale}),L.o(V,"Scene")&&L.d(dt,"Scene",function(){return V.Scene}),L.o(V,"Zoom")&&L.d(dt,"Zoom",function(){return V.Zoom}),L.o(V,"gl")&&L.d(dt,"gl",function(){return V.gl});var Z=L("0eqD"),X=L.n(Z);L.o(Z,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return Z.CityBuildingLayer}),L.o(Z,"Control")&&L.d(dt,"Control",function(){return Z.Control}),L.o(Z,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return Z.HeatmapLayer}),L.o(Z,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return Z.ImageLayer}),L.o(Z,"Layers")&&L.d(dt,"Layers",function(){return Z.Layers}),L.o(Z,"LineLayer")&&L.d(dt,"LineLayer",function(){return Z.LineLayer}),L.o(Z,"Logo")&&L.d(dt,"Logo",function(){return Z.Logo}),L.o(Z,"Marker")&&L.d(dt,"Marker",function(){return Z.Marker}),L.o(Z,"PointLayer")&&L.d(dt,"PointLayer",function(){return Z.PointLayer}),L.o(Z,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return Z.PolygonLayer}),L.o(Z,"Popup")&&L.d(dt,"Popup",function(){return Z.Popup}),L.o(Z,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return Z.RasterLayer}),L.o(Z,"Scale")&&L.d(dt,"Scale",function(){return Z.Scale}),L.o(Z,"Scene")&&L.d(dt,"Scene",function(){return Z.Scene}),L.o(Z,"Zoom")&&L.d(dt,"Zoom",function(){return Z.Zoom}),L.o(Z,"gl")&&L.d(dt,"gl",function(){return Z.gl});var at=L("/Uc5"),pt=L.n(at);L.o(at,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return at.CityBuildingLayer}),L.o(at,"Control")&&L.d(dt,"Control",function(){return at.Control}),L.o(at,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return at.HeatmapLayer}),L.o(at,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return at.ImageLayer}),L.o(at,"Layers")&&L.d(dt,"Layers",function(){return at.Layers}),L.o(at,"LineLayer")&&L.d(dt,"LineLayer",function(){return at.LineLayer}),L.o(at,"Logo")&&L.d(dt,"Logo",function(){return at.Logo}),L.o(at,"Marker")&&L.d(dt,"Marker",function(){return at.Marker}),L.o(at,"PointLayer")&&L.d(dt,"PointLayer",function(){return at.PointLayer}),L.o(at,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return at.PolygonLayer}),L.o(at,"Popup")&&L.d(dt,"Popup",function(){return at.Popup}),L.o(at,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return at.RasterLayer}),L.o(at,"Scale")&&L.d(dt,"Scale",function(){return at.Scale}),L.o(at,"Scene")&&L.d(dt,"Scene",function(){return at.Scene}),L.o(at,"Zoom")&&L.d(dt,"Zoom",function(){return at.Zoom}),L.o(at,"gl")&&L.d(dt,"gl",function(){return at.gl});var gt=L("RMtq"),ft=L.n(gt);L.o(gt,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return gt.CityBuildingLayer}),L.o(gt,"Control")&&L.d(dt,"Control",function(){return gt.Control}),L.o(gt,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return gt.HeatmapLayer}),L.o(gt,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return gt.ImageLayer}),L.o(gt,"Layers")&&L.d(dt,"Layers",function(){return gt.Layers}),L.o(gt,"LineLayer")&&L.d(dt,"LineLayer",function(){return gt.LineLayer}),L.o(gt,"Logo")&&L.d(dt,"Logo",function(){return gt.Logo}),L.o(gt,"Marker")&&L.d(dt,"Marker",function(){return gt.Marker}),L.o(gt,"PointLayer")&&L.d(dt,"PointLayer",function(){return gt.PointLayer}),L.o(gt,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return gt.PolygonLayer}),L.o(gt,"Popup")&&L.d(dt,"Popup",function(){return gt.Popup}),L.o(gt,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return gt.RasterLayer}),L.o(gt,"Scale")&&L.d(dt,"Scale",function(){return gt.Scale}),L.o(gt,"Scene")&&L.d(dt,"Scene",function(){return gt.Scene}),L.o(gt,"Zoom")&&L.d(dt,"Zoom",function(){return gt.Zoom}),L.o(gt,"gl")&&L.d(dt,"gl",function(){return gt.gl});var Rt=L("1jvM"),Nt=L.n(Rt);L.o(Rt,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return Rt.CityBuildingLayer}),L.o(Rt,"Control")&&L.d(dt,"Control",function(){return Rt.Control}),L.o(Rt,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return Rt.HeatmapLayer}),L.o(Rt,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return Rt.ImageLayer}),L.o(Rt,"Layers")&&L.d(dt,"Layers",function(){return Rt.Layers}),L.o(Rt,"LineLayer")&&L.d(dt,"LineLayer",function(){return Rt.LineLayer}),L.o(Rt,"Logo")&&L.d(dt,"Logo",function(){return Rt.Logo}),L.o(Rt,"Marker")&&L.d(dt,"Marker",function(){return Rt.Marker}),L.o(Rt,"PointLayer")&&L.d(dt,"PointLayer",function(){return Rt.PointLayer}),L.o(Rt,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return Rt.PolygonLayer}),L.o(Rt,"Popup")&&L.d(dt,"Popup",function(){return Rt.Popup}),L.o(Rt,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return Rt.RasterLayer}),L.o(Rt,"Scale")&&L.d(dt,"Scale",function(){return Rt.Scale}),L.o(Rt,"Scene")&&L.d(dt,"Scene",function(){return Rt.Scene}),L.o(Rt,"Zoom")&&L.d(dt,"Zoom",function(){return Rt.Zoom}),L.o(Rt,"gl")&&L.d(dt,"gl",function(){return Rt.gl});var Dt=L("bPkA"),St=L("PSsN"),xt=L.n(St);L.o(St,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return St.CityBuildingLayer}),L.o(St,"Control")&&L.d(dt,"Control",function(){return St.Control}),L.o(St,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return St.HeatmapLayer}),L.o(St,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return St.ImageLayer}),L.o(St,"Layers")&&L.d(dt,"Layers",function(){return St.Layers}),L.o(St,"LineLayer")&&L.d(dt,"LineLayer",function(){return St.LineLayer}),L.o(St,"Logo")&&L.d(dt,"Logo",function(){return St.Logo}),L.o(St,"Marker")&&L.d(dt,"Marker",function(){return St.Marker}),L.o(St,"PointLayer")&&L.d(dt,"PointLayer",function(){return St.PointLayer}),L.o(St,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return St.PolygonLayer}),L.o(St,"Popup")&&L.d(dt,"Popup",function(){return St.Popup}),L.o(St,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return St.RasterLayer}),L.o(St,"Scale")&&L.d(dt,"Scale",function(){return St.Scale}),L.o(St,"Scene")&&L.d(dt,"Scene",function(){return St.Scene}),L.o(St,"Zoom")&&L.d(dt,"Zoom",function(){return St.Zoom}),L.o(St,"gl")&&L.d(dt,"gl",function(){return St.gl});var Ot=L("6NqC"),it=L.n(Ot);L.o(Ot,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return Ot.CityBuildingLayer}),L.o(Ot,"Control")&&L.d(dt,"Control",function(){return Ot.Control}),L.o(Ot,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return Ot.HeatmapLayer}),L.o(Ot,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return Ot.ImageLayer}),L.o(Ot,"Layers")&&L.d(dt,"Layers",function(){return Ot.Layers}),L.o(Ot,"LineLayer")&&L.d(dt,"LineLayer",function(){return Ot.LineLayer}),L.o(Ot,"Logo")&&L.d(dt,"Logo",function(){return Ot.Logo}),L.o(Ot,"Marker")&&L.d(dt,"Marker",function(){return Ot.Marker}),L.o(Ot,"PointLayer")&&L.d(dt,"PointLayer",function(){return Ot.PointLayer}),L.o(Ot,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return Ot.PolygonLayer}),L.o(Ot,"Popup")&&L.d(dt,"Popup",function(){return Ot.Popup}),L.o(Ot,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return Ot.RasterLayer}),L.o(Ot,"Scale")&&L.d(dt,"Scale",function(){return Ot.Scale}),L.o(Ot,"Scene")&&L.d(dt,"Scene",function(){return Ot.Scene}),L.o(Ot,"Zoom")&&L.d(dt,"Zoom",function(){return Ot.Zoom}),L.o(Ot,"gl")&&L.d(dt,"gl",function(){return Ot.gl});var At=L("bTtR"),z=L.n(At);L.o(At,"CityBuildingLayer")&&L.d(dt,"CityBuildingLayer",function(){return At.CityBuildingLayer}),L.o(At,"Control")&&L.d(dt,"Control",function(){return At.Control}),L.o(At,"HeatmapLayer")&&L.d(dt,"HeatmapLayer",function(){return At.HeatmapLayer}),L.o(At,"ImageLayer")&&L.d(dt,"ImageLayer",function(){return At.ImageLayer}),L.o(At,"Layers")&&L.d(dt,"Layers",function(){return At.Layers}),L.o(At,"LineLayer")&&L.d(dt,"LineLayer",function(){return At.LineLayer}),L.o(At,"Logo")&&L.d(dt,"Logo",function(){return At.Logo}),L.o(At,"Marker")&&L.d(dt,"Marker",function(){return At.Marker}),L.o(At,"PointLayer")&&L.d(dt,"PointLayer",function(){return At.PointLayer}),L.o(At,"PolygonLayer")&&L.d(dt,"PolygonLayer",function(){return At.PolygonLayer}),L.o(At,"Popup")&&L.d(dt,"Popup",function(){return At.Popup}),L.o(At,"RasterLayer")&&L.d(dt,"RasterLayer",function(){return At.RasterLayer}),L.o(At,"Scale")&&L.d(dt,"Scale",function(){return At.Scale}),L.o(At,"Scene")&&L.d(dt,"Scene",function(){return At.Scene}),L.o(At,"Zoom")&&L.d(dt,"Zoom",function(){return At.Zoom}),L.o(At,"gl")&&L.d(dt,"gl",function(){return At.gl});var q=L("o+pz");L.d(dt,"gl",function(){return q.a})},h7MG:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.getBindingDictionary=dt.createMockRequest=dt.plan=void 0;var U=L("doU7"),E=L("MON2"),T=L("FV85"),e=L("xfSm"),t=L("qK8v"),u=L("ujMp"),s=L("oy+k"),h=L("GXnB"),r=L("yMAV"),c=L("fbrv"),n=L("xiII"),i=L("dX1H");function a(_){return _._bindingDictionary}dt.getBindingDictionary=a;function o(_,M,x,m,S,P){var A=_?e.MULTI_INJECT_TAG:e.INJECT_TAG,O=new h.Metadata(A,x),R=new i.Target(M,m,x,O);if(S!==void 0){var H=new h.Metadata(S,P);R.metadata.push(H)}return R}function l(_,M,x,m,S){var P=b(x.container,S.serviceIdentifier),A=[];return P.length===U.BindingCount.NoBindingsAvailable&&x.container.options.autoBindInjectable&&typeof S.serviceIdentifier=="function"&&_.getConstructorMetadata(S.serviceIdentifier).compilerGeneratedMetadata&&(x.container.bind(S.serviceIdentifier).toSelf(),P=b(x.container,S.serviceIdentifier)),M?A=P:A=P.filter(function(O){var R=new n.Request(O.serviceIdentifier,x,m,O,S);return O.constraint(R)}),f(S.serviceIdentifier,A,S,x.container),A}function f(_,M,x,m){switch(M.length){case U.BindingCount.NoBindingsAvailable:if(x.isOptional())return M;var S=u.getServiceIdentifierAsString(_),P=E.NOT_REGISTERED;throw P+=u.listMetadataForTarget(S,x),P+=u.listRegisteredBindingsForServiceIdentifier(m,S,b),new Error(P);case U.BindingCount.OnlyOneBindingAvailable:if(!x.isArray())return M;case U.BindingCount.MultipleBindingsAvailable:default:if(x.isArray())return M;var S=u.getServiceIdentifierAsString(_),P=E.AMBIGUOUS_MATCH+" "+S;throw P+=u.listRegisteredBindingsForServiceIdentifier(m,S,b),new Error(P)}}function v(_,M,x,m,S,P){var A,O;if(S===null){A=l(_,M,m,null,P),O=new n.Request(x,m,null,A,P);var R=new r.Plan(m,O);m.addPlan(R)}else A=l(_,M,m,S,P),O=S.addChildRequest(P.serviceIdentifier,A,P);A.forEach(function(H){var N=null;if(P.isArray())N=O.addChildRequest(H.serviceIdentifier,H,P);else{if(H.cache)return;N=O}if(H.type===T.BindingTypeEnum.Instance&&H.implementationType!==null){var K=c.getDependencies(_,H.implementationType);if(!m.container.options.skipBaseClassChecks){var V=c.getBaseClassDependencyCount(_,H.implementationType);if(K.length<V){var k=E.ARGUMENTS_LENGTH_MISMATCH(c.getFunctionName(H.implementationType));throw new Error(k)}}K.forEach(function(Z){v(_,!1,Z.serviceIdentifier,m,N,Z)})}})}function b(_,M){var x=[],m=a(_);return m.hasKey(M)?x=m.get(M):_.parent!==null&&(x=b(_.parent,M)),x}function g(_,M,x,m,S,P,A,O){O===void 0&&(O=!1);var R=new s.Context(M),H=o(x,m,S,"",P,A);try{return v(_,O,S,R,null,H),R}catch(N){throw t.isStackOverflowExeption(N)&&R.plan&&u.circularDependencyToException(R.plan.rootRequest),N}}dt.plan=g;function y(_,M,x,m){var S=new i.Target(T.TargetTypeEnum.Variable,"",M,new h.Metadata(x,m)),P=new s.Context(_),A=new n.Request(M,P,null,[],S);return A}dt.createMockRequest=y},heNW:function(Se,dt){function L(U,E,T){switch(T.length){case 0:return U.call(E);case 1:return U.call(E,T[0]);case 2:return U.call(E,T[0],T[1]);case 3:return U.call(E,T[0],T[1],T[2])}return U.apply(E,T)}Se.exports=L},hi0z:function(Se,dt,L){"use strict";(function(U,E){Se.exports=E()})(this,function(){function U(c){var n=[];return c.AMapUI&&n.push(E(c.AMapUI)),c.Loca&&n.push(T(c.Loca)),Promise.all(n)}function E(c){return new Promise(function(n,i){var a=[];if(c.plugins)for(var o=0;o<c.plugins.length;o+=1)t.AMapUI.plugins.indexOf(c.plugins[o])==-1&&a.push(c.plugins[o]);if(u.AMapUI===e.failed)i("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(u.AMapUI===e.notload){u.AMapUI=e.loading,t.AMapUI.version=c.version||t.AMapUI.version,o=t.AMapUI.version;var l=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/ui/"+o+"/main.js",f.onerror=function(v){u.AMapUI=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){if(u.AMapUI=e.loaded,a.length)window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var g=a[v].split("/").slice(-1)[0];window.AMapUI[g]=arguments[v]}for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()});else for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},l.appendChild(f)}else u.AMapUI===e.loaded?c.version&&c.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):a.length?window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var g=a[v].split("/").slice(-1)[0];window.AMapUI[g]=arguments[v]}n()}):n():c.version&&c.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):s.AMapUI.push(function(v){v?i(v):a.length?window.AMapUI.loadUI(a,function(){for(var b=0,g=a.length;b<g;b++){var y=a[b].split("/").slice(-1)[0];window.AMapUI[y]=arguments[b]}n()}):n()})})}function T(c){return new Promise(function(n,i){if(t.AMap.version.startsWith("2.0"))i("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(u.Loca===e.failed)i("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(u.Loca===e.notload){u.Loca=e.loading,t.Loca.version=c.version||t.Loca.version;var a=t.Loca.version,o=t.key,l=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/loca?v="+a+"&key="+o,f.onerror=function(v){u.Loca=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){for(u.Loca=e.loaded,n();s.Loca.length;)s.Loca.splice(0,1)[0]()},l.appendChild(f)}else u.Loca===e.loaded?c.version&&c.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):n():c.version&&c.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):s.Loca.push(function(v){v?i(v):i()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var e;(function(c){c.notload="notload",c.loading="loading",c.loaded="loaded",c.failed="failed"})(e||(e={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]},h=[],r=function(n){typeof n=="function"&&(u.AMap===e.loaded?n(window.AMap):h.push(n))};return{load:function(n){return new Promise(function(i,a){if(u.AMap==e.failed)a("");else if(u.AMap==e.notload){var o=n.key,l=n.version,f=n.plugins;o?(window.AMap&&location.host!=="lbs.amap.com"&&a("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),t.key=o,t.AMap.version=l||t.AMap.version,t.AMap.plugins=f||t.AMap.plugins,u.AMap=e.loading,l=document.body||document.head,window.___onAPILoaded=function(b){if(delete window.___onAPILoaded,b)u.AMap=e.failed,a(b);else for(u.AMap=e.loaded,U(n).then(function(){i(window.AMap)}).catch(a);h.length;)h.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+o+"&plugin="+t.AMap.plugins.join(","),f.onerror=function(b){u.AMap=e.failed,a(b)},l.appendChild(f)):a("\u8BF7\u586B\u5199key")}else if(u.AMap==e.loaded)if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(o=[],n.plugins)for(l=0;l<n.plugins.length;l+=1)t.AMap.plugins.indexOf(n.plugins[l])==-1&&o.push(n.plugins[l]);o.length?window.AMap.plugin(o,function(){U(n).then(function(){i(window.AMap)}).catch(a)}):U(n).then(function(){i(window.AMap)}).catch(a)}else if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var v=[];if(n.plugins)for(l=0;l<n.plugins.length;l+=1)t.AMap.plugins.indexOf(n.plugins[l])==-1&&v.push(n.plugins[l]);r(function(){v.length?window.AMap.plugin(v,function(){U(n).then(function(){i(window.AMap)}).catch(a)}):U(n).then(function(){i(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]}}}})},hypo:function(Se,dt,L){var U=L("O0oS");function E(T,e,t){e=="__proto__"&&U?U(T,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):T[e]=t}Se.exports=E},iWIM:function(Se,dt,L){var U=L("n3AX");function E(T,e,t){return typeof Reflect!="undefined"&&Reflect.get?(Se.exports=E=Reflect.get,Se.exports.default=Se.exports,Se.exports.__esModule=!0):(Se.exports=E=function(s,h,r){var c=U(s,h);if(!!c){var n=Object.getOwnPropertyDescriptor(c,h);return n.get?n.get.call(r):n.value}},Se.exports.default=Se.exports,Se.exports.__esModule=!0),E(T,e,t||T)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},iegG:function(Se,dt){function L(E){var T=E.target||E.srcElement;T.__resizeRAF__&&cancelAnimationFrame(T.__resizeRAF__),T.__resizeRAF__=requestAnimationFrame(function(){var e=T.__resizeTrigger__,t=e&&e.__resizeListeners__;t&&t.forEach(function(u){u.call(e,E)})})}var U=function(T,e){var t=this,u=t.document,s,h=u.attachEvent;typeof navigator!="undefined"&&(s=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function r(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",L)}if(!T.__resizeListeners__)if(T.__resizeListeners__=[],h)T.__resizeTrigger__=T,T.attachEvent("onresize",L);else{getComputedStyle(T).position==="static"&&(T.style.position="relative");var c=T.__resizeTrigger__=u.createElement("object");c.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),c.setAttribute("class","resize-sensor"),c.setAttribute("tabindex","-1"),c.setAttribute("title",""),c.__resizeElement__=T,c.onload=r,c.type="text/html",s&&T.appendChild(c),c.data="about:blank",s||T.appendChild(c)}T.__resizeListeners__.push(e)};Se.exports=typeof window=="undefined"?U:U.bind(window),Se.exports.unbind=function(E,T){var e=document.attachEvent,t=E.__resizeListeners__||[];if(T){var u=t.indexOf(T);u!==-1&&t.splice(u,1)}else t=E.__resizeListeners__=[];if(!t.length){if(e)E.detachEvent("onresize",L);else if(E.__resizeTrigger__){var s=E.__resizeTrigger__.contentDocument,h=s&&s.defaultView;h&&(h.removeEventListener("resize",L),delete h.__resizeTrigger__),E.__resizeTrigger__=!E.removeChild(E.__resizeTrigger__)}delete E.__resizeListeners__}}},itsj:function(Se,dt){function L(U,E){if(!(E==="constructor"&&typeof U[E]=="function")&&E!="__proto__")return U[E]}Se.exports=L},jCWc:function(Se,dt,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("1GLa")},"jIg/":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.multiInject=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(t){return function(u,s,h){var r=new E.Metadata(U.MULTI_INJECT_TAG,t);typeof h=="number"?T.tagParameter(u,s,h,r):T.tagProperty(u,s,r)}}dt.multiInject=e},jYQm:function(Se,dt,L){"use strict";var U=L("q1tI"),E=L.n(U),T=Object(U.createContext)({});dt.a=T},jYx5:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.optional=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(){return function(t,u,s){var h=new E.Metadata(U.OPTIONAL_TAG,!0);typeof s=="number"?T.tagParameter(t,u,s,h):T.tagProperty(t,u,h)}}dt.optional=e},"jbM+":function(Se,dt,L){var U=L("R/W3");function E(T,e){var t=T==null?0:T.length;return!!t&&U(T,e,0)>-1}Se.exports=E},jeLo:function(Se,dt,L){var U=L("juv8"),E=L("mTTR");function T(e){return U(e,E(e))}Se.exports=T},juv8:function(Se,dt,L){var U=L("MrPd"),E=L("hypo");function T(e,t,u,s){var h=!u;u||(u={});for(var r=-1,c=t.length;++r<c;){var n=t[r],i=s?s(u[n],e[n],n,u,e):void 0;i===void 0&&(i=e[n]),h?E(u,n,i):U(u,n,i)}return u}Se.exports=T},"k5/I":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return M}),L.d(dt,"c",function(){return H}),L.d(dt,"f",function(){return V}),L.d(dt,"g",function(){return X}),L.d(dt,"b",function(){return A}),L.d(dt,"d",function(){return Rt}),L.d(dt,"e",function(){return Y});var U=L("lSNA"),E=L.n(U),T=L("lwsE"),e=L.n(T),t=L("W8MJ"),u=L.n(t),s=L("7W2i"),h=L.n(s),r=L("a1gu"),c=L.n(r),n=L("Nsbk"),i=L.n(n),a=L("h1nZ"),o=L("Hel2"),l=L("uhBA");function f(rt,ot){var $=Object.keys(rt);if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(rt);ot&&(Pt=Pt.filter(function(yt){return Object.getOwnPropertyDescriptor(rt,yt).enumerable})),$.push.apply($,Pt)}return $}function v(rt){for(var ot=1;ot<arguments.length;ot++){var $=arguments[ot]!=null?arguments[ot]:{};ot%2?f(Object($),!0).forEach(function(Pt){E()(rt,Pt,$[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors($)):f(Object($)).forEach(function(Pt){Object.defineProperty(rt,Pt,Object.getOwnPropertyDescriptor($,Pt))})}return rt}function b(rt){var ot=g();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var y;(function(rt){rt.TOPRIGHT="topright",rt.TOPLEFT="topleft",rt.BOTTOMRIGHT="bottomright",rt.BOTTOMLEFT="bottomleft"})(y||(y={}));var _=0,M=function(rt){h()($,rt);var ot=b($);function $(Pt){var yt;return e()(this,$),yt=ot.call(this),yt.controlOption=void 0,yt.container=void 0,yt.sceneContainer=void 0,yt.mapsService=void 0,yt.renderService=void 0,yt.layerService=void 0,yt.controlService=void 0,yt.isShow=void 0,yt.controlOption=v(v({},yt.getDefault()),Pt||{}),yt}return u()($,[{key:"getDefault",value:function(){return{position:y.TOPRIGHT,name:"".concat(_++)}}},{key:"setPosition",value:function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"bottomright",Ft=this.controlService;return Ft&&Ft.removeControl(this),this.controlOption.position=yt,Ft&&Ft.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(yt){this.mapsService=yt.get(a.TYPES.IMapService),this.renderService=yt.get(a.TYPES.IRendererService),this.layerService=yt.get(a.TYPES.ILayerService),this.controlService=yt.get(a.TYPES.IControlService),this.sceneContainer=yt,this.isShow=!0,this.container=this.onAdd();var Ft=this.container,Qt=this.controlOption.position,ne=this.controlService.controlCorners[Qt];return o.a.addClass(Ft,"l7-control"),Qt.indexOf("bottom")!==-1?ne.insertBefore(Ft,ne.firstChild):ne.appendChild(Ft),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var yt=this.container;o.a.addClass(yt,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var yt=this.container;o.a.removeClass(yt,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;o.a.remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(yt){if(this.mapsService&&yt&&yt.screenX>0&&yt.screenY>0){var Ft=this.mapsService.getContainer();Ft!==null&&Ft.focus()}}}]),$}(l.EventEmitter),x=L("PJYZ"),m=L.n(x);function S(rt){var ot=P();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var A=function(rt){h()($,rt);var ot=S($);function $(Pt){var yt;return e()(this,$),yt=ot.call(this,Pt),yt.layerControlInputs=void 0,yt.layers=void 0,yt.lastZIndex=void 0,yt.handlingClick=void 0,yt.layersLink=void 0,yt.baseLayersList=void 0,yt.separator=void 0,yt.overlaysList=void 0,yt.form=void 0,yt.layerControlInputs=[],yt.layers=[],yt.lastZIndex=0,yt.handlingClick=!1,yt.initLayers(),Object(o.i)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],m()(yt)),yt}return u()($,[{key:"getDefault",value:function(){return{collapsed:!0,position:a.PositionType.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var yt=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(Ft){Ft.layer.on("remove",yt.onLayerChange),Ft.layer.on("add",yt.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(yt,Ft){return this.addLayer(yt,Ft,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var yt=this.renderService.getViewportSize(),Ft=yt.height;o.a.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var Qt=Ft-(this.container.offsetTop+50);return Qt<this.form.clientHeight?(o.a.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=Qt+"px"):o.a.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return o.a.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var yt=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(Ft){Ft.layer.off("remove",yt.onLayerChange),Ft.layer.off("add",yt.onLayerChange)}))}},{key:"initLayout",value:function(){var yt="l7-control-layers",Ft=this.container=o.a.create("div",yt),Qt=this.controlOption.collapsed;Ft.setAttribute("aria-haspopup","true");var ne=this.form=o.a.create("form",yt+"-list");Qt&&(this.mapsService.on("click",this.collapse),Ft.addEventListener("mouseenter",this.expand),Ft.addEventListener("mouseleave",this.collapse)),this.layersLink=o.a.create("a",yt+"-toggle",Ft);var Wt=this.layersLink;Wt.title="Layers",Qt||this.expand(),this.baseLayersList=o.a.create("div",yt+"-base",ne),this.separator=o.a.create("div",yt+"-separator",ne),this.overlaysList=o.a.create("div",yt+"-overlays",ne),Ft.appendChild(ne)}},{key:"initLayers",value:function(){var yt=this,Ft=this.controlOption,Qt=Ft.baseLayers,ne=Qt===void 0?{}:Qt,Wt=Ft.overlayers,$t=Wt===void 0?{}:Wt;Object.keys(ne).forEach(function(De,Je){yt.addLayer(ne[De],De,!1)}),Object.keys($t).forEach(function(De,Je){yt.addLayer($t[De],De,!0)})}},{key:"update",value:function(){if(!this.container)return this;o.a.empty(this.baseLayersList),o.a.empty(this.overlaysList),this.layerControlInputs=[];var yt,Ft,Qt,ne,Wt=0;for(Qt=0;Qt<this.layers.length;Qt++)ne=this.layers[Qt],this.addItem(ne),Ft=Ft||ne.overlay,yt=yt||!ne.overlay,Wt+=ne.overlay?0:1;return this.controlOption.hideSingleBase&&(yt=yt&&Wt>1,this.baseLayersList.style.display=yt?"":"none"),this.separator.style.display=Ft&&yt?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var yt=this.layerControlInputs,Ft,Qt,ne=this.mapsService.getZoom(),Wt=yt.length-1;Wt>=0;Wt--)if(Ft=yt[Wt],Qt=this.layerService.getLayer(Ft.layerId),Qt&&Qt.inited){var $t=Qt.getMinZoom(),De=Qt.getMaxZoom();Ft.disabled=ne<$t||ne>De}}},{key:"addLayer",value:function(yt,Ft,Qt){this.mapsService&&(yt.on("add",this.onLayerChange),yt.on("remove",this.onLayerChange)),this.layers.push({layer:yt,name:Ft,overlay:Qt});var ne=this.controlOption,Wt=ne.sortLayers,$t=ne.sortFunction,De=ne.autoZIndex;Wt&&this.layers.sort(function(Je,Qe){return $t(Je.layer,Qe.layer,Je.name,Qe.name)}),De&&yt.setZIndex&&(this.lastZIndex++,yt.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(yt){this.handlingClick||this.update();var Ft=this.layerService.getLayer(yt.target.layerId),Qt=Ft!=null&&Ft.overlay?yt.type==="add"?"overlayadd":"overlayremove":yt.type==="add"?"baselayerchange":null;Qt&&this.emit(Qt,Ft)}},{key:"createRadioElement",value:function(yt,Ft){var Qt='<input type="radio" class="l7-control-layers-selector" name="'+yt+'"'+(Ft?' checked="checked"':"")+"/>",ne=document.createElement("div");return ne.innerHTML=Qt,ne.firstChild}},{key:"addItem",value:function(yt){var Ft=document.createElement("label"),Qt=this.layerService.getLayer(yt.layer.id),ne=Qt&&Qt.inited&&yt.layer.isVisible(),Wt;yt.overlay?(Wt=document.createElement("input"),Wt.type="checkbox",Wt.className="l7-control-layers-selector",Wt.defaultChecked=ne):Wt=this.createRadioElement("l7-base-layers",ne),this.layerControlInputs.push(Wt),Wt.layerId=yt.layer.id,Wt.addEventListener("click",this.onInputClick);var $t=document.createElement("span");$t.innerHTML=" "+yt.name;var De=document.createElement("div");Ft.appendChild(De),De.appendChild(Wt),De.appendChild($t);var Je=yt.overlay?this.overlaysList:this.baseLayersList;return Je.appendChild(Ft),this.checkDisabledLayers(),Ft}},{key:"onInputClick",value:function(){var yt=this.layerControlInputs,Ft,Qt,ne=[],Wt=[];this.handlingClick=!0;for(var $t=yt.length-1;$t>=0;$t--)Ft=yt[$t],Qt=this.layerService.getLayer(Ft.layerId),Ft.checked?ne.push(Qt):Ft.checked||Wt.push(Qt);Wt.forEach(function(De){De.hide()}),ne.forEach(function(De){De.show()}),this.handlingClick=!1}}]),$}(M);function O(rt){var ot=R();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var H=function(rt){h()($,rt);var ot=O($);function $(){return e()(this,$),ot.apply(this,arguments)}return u()($,[{key:"getDefault",value:function(){return{position:y.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var yt="l7-control-logo",Ft=o.a.create("div",yt),Qt=o.a.create("a","l7-ctrl-logo");return Qt.target="_blank",Qt.rel="noopener nofollow",Qt.href="https://antv.alipay.com/l7",Qt.setAttribute("aria-label","AntV logo"),Qt.setAttribute("rel","noopener nofollow"),Ft.appendChild(Qt),Ft}},{key:"onRemove",value:function(){return null}}]),$}(M);function N(rt){var ot=K();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function K(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var V=function(rt){h()($,rt);var ot=N($);function $(Pt){var yt;return e()(this,$),yt=ot.call(this,Pt),yt.mScale=void 0,yt.iScale=void 0,Object(o.i)(["update"],m()(yt)),yt}return u()($,[{key:"getDefault",value:function(){return{position:y.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var yt="l7-control-scale",Ft=o.a.create("div",yt);this.addScales(yt+"-line",Ft);var Qt=this.controlOption.updateWhenIdle;return this.mapsService.on(Qt?"moveend":"mapmove",this.update),this.mapsService.on(Qt?"zoomend":"zoomchange",this.update),this.update(),Ft}},{key:"onRemove",value:function(){var yt=this.controlOption.updateWhenIdle;this.mapsService.off(yt?"zoomend":"zoomchange",this.update),this.mapsService.off(yt?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var yt=this.mapsService,Ft=this.controlOption.maxWidth,Qt=yt.getSize()[1]/2,ne=yt.containerToLngLat([0,Qt]),Wt=yt.containerToLngLat([Ft,Qt]),$t=Object(o.q)([ne.lng,ne.lat],[Wt.lng,Wt.lat]);this.updateScales($t)}},{key:"updateScales",value:function(yt){var Ft=this.controlOption,Qt=Ft.metric,ne=Ft.imperial;Qt&&yt&&this.updateMetric(yt),ne&&yt&&this.updateImperial(yt)}},{key:"updateMetric",value:function(yt){var Ft=this.getRoundNum(yt),Qt=Ft<1e3?Ft+" m":Ft/1e3+" km";this.updateScale(this.mScale,Qt,Ft/yt)}},{key:"updateImperial",value:function(yt){var Ft=yt*3.2808399,Qt,ne,Wt;Ft>5280?(Qt=Ft/5280,ne=this.getRoundNum(Qt),this.updateScale(this.iScale,ne+" mi",ne/Qt)):(Wt=this.getRoundNum(Ft),this.updateScale(this.iScale,Wt+" ft",Wt/Ft))}},{key:"updateScale",value:function(yt,Ft,Qt){var ne=this.controlOption.maxWidth;yt.style.width=Math.round(ne*Qt)+"px",yt.innerHTML=Ft}},{key:"getRoundNum",value:function(yt){var Ft=Math.pow(10,(Math.floor(yt)+"").length-1),Qt=yt/Ft;return Qt=Qt>=10?10:Qt>=5?5:Qt>=3?3:Qt>=2?2:1,Ft*Qt}},{key:"addScales",value:function(yt,Ft){var Qt=this.controlOption,ne=Qt.metric,Wt=Qt.imperial;ne&&(this.mScale=o.a.create("div",yt,Ft)),Wt&&(this.iScale=o.a.create("div",yt,Ft))}}]),$}(M);function k(rt){var ot=Z();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var X=function(rt){h()($,rt);var ot=k($);function $(Pt){var yt;return e()(this,$),yt=ot.call(this,Pt),yt.disabled=void 0,yt.zoomInButton=void 0,yt.zoomOutButton=void 0,Object(o.i)(["updateDisabled","zoomIn","zoomOut"],m()(yt)),yt}return u()($,[{key:"getDefault",value:function(){return{position:y.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var yt="l7-control-zoom",Ft=o.a.create("div",yt+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,yt+"-in",Ft,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,yt+"-out",Ft,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),Ft}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(yt,Ft,Qt,ne,Wt){var $t=o.a.create("a",Qt,ne);return $t.innerHTML=yt,$t.title=Ft,$t.href="javascript:void(0)",$t.addEventListener("click",Wt),$t}},{key:"updateDisabled",value:function(){var yt=this.mapsService,Ft="l7-disabled";o.a.removeClass(this.zoomInButton,Ft),o.a.removeClass(this.zoomOutButton,Ft),(this.disabled||yt.getZoom()<=yt.getMinZoom())&&o.a.addClass(this.zoomOutButton,Ft),(this.disabled||yt.getZoom()>=yt.getMaxZoom())&&o.a.addClass(this.zoomInButton,Ft)}}]),$}(M);function at(rt,ot){var $=Object.keys(rt);if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(rt);ot&&(Pt=Pt.filter(function(yt){return Object.getOwnPropertyDescriptor(rt,yt).enumerable})),$.push.apply($,Pt)}return $}function pt(rt){for(var ot=1;ot<arguments.length;ot++){var $=arguments[ot]!=null?arguments[ot]:{};ot%2?at(Object($),!0).forEach(function(Pt){E()(rt,Pt,$[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors($)):at(Object($)).forEach(function(Pt){Object.defineProperty(rt,Pt,Object.getOwnPropertyDescriptor($,Pt))})}return rt}function gt(rt){var ot=ft();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function ft(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var Rt=function(rt){h()($,rt);var ot=gt($);function $(Pt){var yt;return e()(this,$),yt=ot.call(this),yt.markerOption=void 0,yt.defaultMarker=void 0,yt.popup=void 0,yt.mapsService=void 0,yt.sceneSerive=void 0,yt.lngLat=void 0,yt.scene=void 0,yt.added=!1,yt.eventHandle=function(Ft){yt.emit(Ft.type,{target:Ft,data:yt.markerOption.extData,lngLat:yt.lngLat})},yt.markerOption=pt(pt({},yt.getDefault()),Pt),Object(o.i)(["update","onMove","onUp","addDragHandler","onMapClick"],m()(yt)),yt.init(),yt}return u()($,[{key:"getDefault",value:function(){return{element:void 0,anchor:o.f.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(yt){this.scene=yt,this.mapsService=yt.get(a.TYPES.IMapService),this.sceneSerive=yt.get(a.TYPES.ISceneService);var Ft=this.markerOption,Qt=Ft.element,ne=Ft.draggable;return this.mapsService.getMarkerContainer().appendChild(Qt),this.registerMarkerEvent(Qt),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var yt=this.markerOption.element;return yt&&o.a.remove(yt),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(yt){return this.lngLat=yt,Array.isArray(yt)&&(this.lngLat={lng:yt[0],lat:yt[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(yt){var Ft=this;if(!this.added)return this.once("added",function(){Ft.setElement(yt)}),this;var Qt=this.markerOption.element;return Qt&&o.a.remove(Qt),this.markerOption.element=yt,this.init(),this.mapsService.getMarkerContainer().appendChild(yt),this.registerMarkerEvent(yt),this.update(),this}},{key:"openPopup",value:function(){var yt=this;if(!this.added)return this.once("added",function(){yt.openPopup()}),this;var Ft=this.popup;return Ft?(Ft.isOpen()||Ft.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var yt=this;this.added||this.once("added",function(){yt.closePopup()});var Ft=this.popup;return Ft&&Ft.remove(),this}},{key:"setPopup",value:function(yt){return this.popup=yt,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var yt=this.popup;if(yt)yt.isOpen()?yt.remove():yt.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(yt){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(yt){this.markerOption.extData=yt}},{key:"update",value:function(){if(!!this.mapsService){var yt=this.markerOption,Ft=yt.element,Qt=yt.anchor;this.updatePosition(),o.a.setTransform(Ft,"".concat(o.e[Qt]))}}},{key:"onMapClick",value:function(yt){var Ft=this.markerOption.element;this.popup&&Ft&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var yt=this.markerOption,Ft=yt.element,Qt=yt.offsets,ne=this.lngLat,Wt=ne.lng,$t=ne.lat,De=this.mapsService.getBounds(),Je=this.mapsService.lngLatToContainer([Wt,$t]);if(Ft){Ft.style.display="block";var Qe=this.mapsService.getContainer(),de=0,ue=0;if(Qe&&(de=Qe.scrollWidth,ue=Qe.scrollHeight),Math.abs(De[0][0])>180||Math.abs(De[1][0])>180){if(Je.x>de){var Ne=this.mapsService.lngLatToContainer([Wt-360,$t]);Je.x=Ne.x}if(Je.x<0){var cn=this.mapsService.lngLatToContainer([Wt+360,$t]);Je.x=cn.x}}(Je.x>de||Je.x<0||Je.y>ue||Je.y<0)&&(Ft.style.display="none"),Ft.style.left=Je.x+Qt[0]+"px",Ft.style.top=Je.y-Qt[1]+"px"}}}},{key:"init",value:function(){var yt=this,Ft=this.markerOption.element,Qt=this.markerOption,ne=Qt.color,Wt=Qt.anchor;if(!Ft){this.defaultMarker=!0,Ft=o.a.create("div"),this.markerOption.element=Ft;var $t=document.createElementNS("http://www.w3.org/2000/svg","svg");$t.setAttributeNS(null,"display","block"),$t.setAttributeNS(null,"height","48px"),$t.setAttributeNS(null,"width","48px"),$t.setAttributeNS(null,"viewBox","0 0 1024 1024");var De=document.createElementNS("http://www.w3.org/2000/svg","path");De.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),De.setAttributeNS(null,"fill",ne),$t.appendChild(De),Ft.appendChild($t)}o.a.addClass(Ft,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(Je){var Qe,de,ue=((Qe=yt.markerOption)===null||Qe===void 0?void 0:Qe.style)&&((de=yt.markerOption)===null||de===void 0?void 0:de.style[Je]);Ft&&(Ft.style[Je]=ue)}),Ft.addEventListener("click",function(Je){yt.onMapClick(Je)}),Ft.addEventListener("click",this.eventHandle),Object(o.g)(Ft,Wt,"marker")}},{key:"registerMarkerEvent",value:function(yt){yt.addEventListener("mousemove",this.eventHandle),yt.addEventListener("click",this.eventHandle),yt.addEventListener("mousedown",this.eventHandle),yt.addEventListener("mouseup",this.eventHandle),yt.addEventListener("dblclick",this.eventHandle),yt.addEventListener("contextmenu",this.eventHandle),yt.addEventListener("mouseover",this.eventHandle),yt.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var yt=this.getElement();yt.removeEventListener("mousemove",this.eventHandle),yt.removeEventListener("click",this.eventHandle),yt.removeEventListener("mousedown",this.eventHandle),yt.removeEventListener("mouseup",this.eventHandle),yt.removeEventListener("dblclick",this.eventHandle),yt.removeEventListener("contextmenu",this.eventHandle),yt.removeEventListener("mouseover",this.eventHandle),yt.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(yt){throw new Error("Method not implemented.")}},{key:"onUp",value:function(yt){throw new Error("Method not implemented.")}}]),$}(l.EventEmitter),Nt=L("QkVN"),Dt=L.n(Nt),St=L("mpbz"),xt=L.n(St);function Ot(rt,ot){var $=Object.keys(rt);if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(rt);ot&&(Pt=Pt.filter(function(yt){return Object.getOwnPropertyDescriptor(rt,yt).enumerable})),$.push.apply($,Pt)}return $}function it(rt){for(var ot=1;ot<arguments.length;ot++){var $=arguments[ot]!=null?arguments[ot]:{};ot%2?Ot(Object($),!0).forEach(function(Pt){E()(rt,Pt,$[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors($)):Ot(Object($)).forEach(function(Pt){Object.defineProperty(rt,Pt,Object.getOwnPropertyDescriptor($,Pt))})}return rt}function At(rt){var ot=z();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var q=function(rt){h()($,rt);var ot=At($);function $(Pt){var yt,Ft;return e()(this,$),Ft=ot.call(this),Ft.markers=[],Ft.markerLayerOption=void 0,Ft.clusterIndex=void 0,Ft.points=[],Ft.clusterMarkers=[],Ft.mapsService=void 0,Ft.scene=void 0,Ft.zoom=void 0,Ft.bbox=void 0,Ft.markerLayerOption=Dt()(Ft.getDefault(),Pt),Object(o.i)(["update"],m()(Ft)),Ft.zoom=((yt=Ft.markerLayerOption.clusterOption)===null||yt===void 0?void 0:yt.zoom)||-99,Ft}return u()($,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(yt){return this.scene=yt,this.mapsService=yt.get(a.TYPES.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(yt){var Ft=this.markerLayerOption.cluster;Ft&&this.addPoint(yt,this.markers.length),this.markers.push(yt)}},{key:"removeMarker",value:function(yt){this.markers.indexOf(yt);var Ft=this.markers.indexOf(yt);Ft>-1&&this.markers.splice(Ft,1)}},{key:"hide",value:function(){this.markers.map(function(yt){yt.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(yt){yt.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var yt=this.markerLayerOption.cluster;return yt?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var yt=this;this.getMarkers().forEach(function(Ft){Ft.addTo(yt.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(yt){yt.remove()}),this.clusterMarkers.forEach(function(yt){yt.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(yt,Ft){var Qt=yt.getLnglat(),ne=Qt.lng,Wt=Qt.lat,$t={geometry:{type:"Point",coordinates:[ne,Wt]},properties:it(it({},yt.getExtData()),{},{marker_id:Ft})};this.points.push($t)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var yt=this.markerLayerOption.clusterOption,Ft=yt.radius,Qt=yt.minZoom,ne=Qt===void 0?0:Qt,Wt=yt.maxZoom;this.clusterIndex=new xt.a({radius:Ft,minZoom:ne,maxZoom:Wt}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(yt,Ft){var Qt=this,ne=yt[0].concat(yt[1]),Wt=this.clusterIndex.getClusters(ne,Ft);this.clusterMarkers.forEach(function($t){$t.remove()}),this.clusterMarkers=[],Wt.forEach(function($t){var De,Je=Qt.markerLayerOption.clusterOption,Qe=Je.field,de=Je.method;if($t.properties&&(De=$t.properties)!==null&&De!==void 0&&De.cluster_id){var ue,Ne=Qt.getLeaves((ue=$t.properties)===null||ue===void 0?void 0:ue.cluster_id);if($t.properties.clusterData=Ne,Qe&&de){var cn=Ne==null?void 0:Ne.map(function(xn){var Bn=E()({},Qe,xn.properties[Qe]);return Bn}),Fn=o.c.getColumn(cn,Qe),wn=o.c.getSatByColumn(de,Fn),en="point_"+de;$t.properties[en]=wn.toFixed(2)}}var tn=Qt.clusterMarker($t);Qt.clusterMarkers.push(tn),tn.addTo(Qt.scene)})}},{key:"getLeaves",value:function(yt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return yt?this.clusterIndex.getLeaves(yt,Ft,Qt):null}},{key:"clusterMarker",value:function(yt){var Ft=this.markerLayerOption.clusterOption,Qt=Ft,ne=Qt.element,Wt=ne===void 0?this.generateElement.bind(this):ne,$t=new Rt({element:Wt(yt)}).setLnglat({lng:yt.geometry.coordinates[0],lat:yt.geometry.coordinates[1]});return $t}},{key:"normalMarker",value:function(yt){var Ft=yt.properties.marker_id;return this.markers[Ft]}},{key:"update",value:function(){var yt=this.mapsService.getZoom(),Ft=this.mapsService.getBounds();(!this.bbox||Math.abs(yt-this.zoom)>=1||!Object(o.j)(this.bbox,Ft))&&(this.bbox=Object(o.r)(Ft,.5),this.zoom=Math.floor(yt),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(yt){var Ft=o.a.create("div","l7-marker-cluster"),Qt=o.a.create("div","",Ft),ne=o.a.create("span","",Qt),Wt=this.markerLayerOption.clusterOption,$t=Wt.field,De=Wt.method;yt.properties.point_count=yt.properties.point_count||1;var Je=$t&&De?yt.properties["point_"+De]||yt.properties[$t]:yt.properties.point_count;return ne.textContent=Je,Ft}}]),$}(l.EventEmitter);function mt(rt,ot){var $=Object.keys(rt);if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(rt);ot&&(Pt=Pt.filter(function(yt){return Object.getOwnPropertyDescriptor(rt,yt).enumerable})),$.push.apply($,Pt)}return $}function et(rt){for(var ot=1;ot<arguments.length;ot++){var $=arguments[ot]!=null?arguments[ot]:{};ot%2?mt(Object($),!0).forEach(function(Pt){E()(rt,Pt,$[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors($)):mt(Object($)).forEach(function(Pt){Object.defineProperty(rt,Pt,Object.getOwnPropertyDescriptor($,Pt))})}return rt}function st(rt){var ot=bt();return function(){var Pt=i()(rt),yt;if(ot){var Ft=i()(this).constructor;yt=Reflect.construct(Pt,arguments,Ft)}else yt=Pt.apply(this,arguments);return c()(this,yt)}}function bt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(rt){return!1}}var Y=function(rt){h()($,rt);var ot=st($);function $(Pt){var yt;return e()(this,$),yt=ot.call(this),yt.popupOption=void 0,yt.mapsService=void 0,yt.sceneSerive=void 0,yt.lngLat=void 0,yt.content=void 0,yt.closeButton=void 0,yt.timeoutInstance=void 0,yt.container=void 0,yt.tip=void 0,yt.scene=void 0,yt.popupOption=et(et({},yt.getdefault()),Pt),Object(o.i)(["update","onClickClose","remove"],m()(yt)),yt}return u()($,[{key:"addTo",value:function(yt){var Ft=this;return this.mapsService=yt.get(a.TYPES.IMapService),this.sceneSerive=yt.get(a.TYPES.ISceneService),this.mapsService.on("camerachange",this.update),this.scene=yt,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){Ft.mapsService.on("click",Ft.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(yt){var Ft=window.document.createDocumentFragment(),Qt=window.document.createElement("body"),ne;for(Qt.innerHTML=yt;ne=Qt.firstChild,!!ne;)Ft.appendChild(ne);return this.setDOMContent(Ft)}},{key:"setLnglat",value:function(yt){return this.lngLat=yt,Array.isArray(yt)&&(this.lngLat={lng:yt[0],lat:yt[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(yt){return this.setDOMContent(window.document.createTextNode(yt))}},{key:"setMaxWidth",value:function(yt){return this.popupOption.maxWidth=yt,this.update(),this}},{key:"setDOMContent",value:function(yt){return this.createContent(),this.content.appendChild(yt),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&o.a.remove(this.content),this.content=o.a.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=o.a.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(yt,Ft,Qt){var ne=window.document.createElement(yt);return Ft!==void 0&&(ne.className=Ft),Qt&&Qt.appendChild(ne),ne}},{key:"removeDom",value:function(yt){yt.parentNode&&yt.parentNode.removeChild(yt)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:o.f.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(yt){yt.stopPropagation&&yt.stopPropagation(),this.remove()}},{key:"update",value:function(){var yt=this,Ft=this.lngLat,Qt=this.popupOption,ne=Qt.className,Wt=Qt.maxWidth,$t=Qt.anchor;if(!(!this.mapsService||!Ft||!this.content)){var De=this.mapsService.getMarkerContainer();if(!this.container&&De){this.container=this.creatDom("div","l7-popup",De),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),ne&&ne.split(" ").forEach(function(Qe){return yt.container.classList.add(Qe)});var Je=this.popupOption.stopPropagation;Je&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(Qe){yt.container.addEventListener(Qe,function(de){de.stopPropagation()})})}Wt&&this.container.style.maxWidth!==Wt&&(this.container.style.maxWidth=Wt),this.updatePosition(),o.a.setTransform(this.container,"".concat(o.e[$t])),Object(o.g)(this.container,$t,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var yt=this.lngLat,Ft=yt.lng,Qt=yt.lat,ne=this.popupOption.offsets,Wt=this.mapsService.lngLatToContainer([Ft,Qt]);this.container.style.left=Wt.x+ne[0]+"px",this.container.style.top=Wt.y-ne[1]+"px"}}}]),$}(l.EventEmitter);L("BGjm")(`/* @antv/l7-component */
.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
 }

.l7-marker {
	position: absolute !important;
	top: 0;
	left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
    -webkit-flex-direction: column-reverse;
    -webkit-box-orient: vertical;
    -webkit-box-direction: reverse;
        -ms-flex-direction: column-reverse;
            flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 5px;
	}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
    -webkit-flex-direction: column;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}


.l7-popup-anchor-left {
    -webkit-flex-direction: row;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
}

.l7-popup-anchor-right {
    -webkit-flex-direction: row-reverse;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: reverse;
        -ms-flex-direction: row-reverse;
            flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-flex;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-top: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-top: none;
	border-left: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-top: none;
	border-right: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-bottom: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-bottom: none;
	border-left: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-bottom: none;
	border-right: none;
	border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-left: none;
	border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-right: none;
	border-left-color: #fff;
}

.l7-popup-close-button {
	position: absolute;
	right: 0;
	top: 0;
	border: 0;
	padding: 0;
	font-size: 25px;
	line-height: 20px;
	border-radius: 0 3px 0 0;
	cursor: pointer;
	background-color: transparent;
}

.l7-popup-close-button:hover {
	background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
	position: relative;
	background: #fff;
	border-radius: 3px;
	-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	padding: 10px 10px 15px;
	pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
	border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
	border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
	border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
	border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
	display: none;
}

.l7-popup-track-pointer * {
	pointer-events: none;
	-webkit-user-select: none;
	   -moz-user-select: none;
	    -ms-user-select: none;
	        user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
	display: -webkit-box;
	display: -webkit-flex;
	display: -ms-flexbox;
	display: flex;
}

.l7-map:active .l7-popup-track-pointer {
	display: none;
}


.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	border-radius: 4px;
	}
.l7-bar a,
.l7-bar a:hover {
	background-color: #fff;
	width: 30px;
	height: 30px;
  font-size: 20px;
	display: block;
	text-align: center;
	text-decoration: none;
	color: #8E9DAB;
	}
.l7-bar a,
.l7-control-layers-toggle {
	background-position: 50% 50%;
	background-repeat: no-repeat;
	display: block;
	}
.l7-bar a:hover {
	background-color: #f4f4f4;
	}
.l7-bar a:first-child {
	border-top-left-radius: 2px;
	border-top-right-radius: 2px;
	}
.l7-bar a:last-child {
	border-bottom-left-radius: 2px;
	border-bottom-right-radius: 2px;
	border-bottom: none;
	}
.l7-bar a.l7-disabled {
	cursor: default;
	background-color: #f4f4f4;
	color: #bbb;
	}


/* control positioning */

.l7-control-container {
	font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
}
.l7-control-hide {
	display: none;
}
.l7-control {
	position: relative;
	z-index: 800;
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
	pointer-events: auto;
	}
.l7-control {
	float: left;
	clear: both;
	}.l7-top,
  .l7-bottom {
    position: absolute;
    z-index: 1000;
    pointer-events: none;
    }
  .l7-top {
    top: 0;
    }
  .l7-right {
    right: 0;
    }
  .l7-bottom {
    bottom: 0;
    }
  .l7-left {
    left: 0;
    }

  .l7-control {
    float: left;
    clear: both;
    }
  .l7-right .l7-control {
    float: right;
    }
  .l7-top .l7-control {
    margin-top: 10px;
    }
  .l7-bottom .l7-control {
    margin-bottom: 10px;
    }
  .l7-left .l7-control {
    margin-left: 10px;
    }
  .l7-right .l7-control {
    margin-right: 10px;
    }

  /* attribution and scale controls */

.l7-control-container .l7-control-attribution {
	background: #fff;
	background: rgba(255, 255, 255, 0.7);
	margin: 0;
	}
.l7-control-attribution,
.l7-control-scale-line {
	padding: 0 5px;
  color: #333;
	}
.l7-control-attribution a {
	text-decoration: none;
	}
.l7-control-attribution a:hover {
	text-decoration: underline;
	}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
	}
.l7-left .l7-control-scale {
	margin-left: 5px;
	}
.l7-bottom .l7-control-scale {
	margin-bottom: 5px;
	}
.l7-control-scale-line {
	border: 2px solid #000;
  border-top: none;
  color: #000;
	line-height: 1.1;
	padding: 2px 5px 1px;
	font-size: 11px;
	white-space: nowrap;
	overflow: hidden;
	-webkit-box-sizing: border-box;
	        box-sizing: border-box;

	background: #fff;
	}
.l7-control-scale-line:not(:first-child) {
	border-top: 2px solid #777;
	border-bottom: none;
	margin-top: -2px;
	}
.l7-control-scale-line:not(:first-child):not(:last-child) {
	border-bottom: 2px solid #777;
	}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	-webkit-box-shadow: none;
	        box-shadow: none;
	}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	border: 2px solid rgba(0,0,0,0.2);
	background-clip: padding-box;
  }
  /*logo */

  .l7-ctrl-logo {
    background-size: 100% 100%;
    width: 89px;
    height: 16px;
    margin: 0 0 -3px -3px;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    background-repeat: no-repeat;
    cursor: pointer;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}


	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 2px;
	}
.l7-control-layers-toggle {
	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
	width: 30px;
  height: 30px;
  background-size: 20px 20px;
	}

.l7-touch .l7-control-layers-toggle {
	width: 44px;
	height: 44px;
	}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
	display: none;
	}
.l7-control-layers-expanded .l7-control-layers-list {
	display: block;
	position: relative;
	}
.l7-control-layers-expanded {
	padding: 6px 10px 6px 6px;
	color: #59626B;
	background: #fff;
	}
.l7-control-layers-scrollbar {
	overflow-y: scroll;
	overflow-x: hidden;
	padding-right: 5px;
	}
.l7-control-layers-selector {
	margin-top: 2px;
	position: relative;
	top: 1px;
	}
.l7-control-layers label {
  display: block;
  padding: 8px;
  }
  .l7-control-layers label input[type="radio"],
  .l7-control-layers label input[type="checkbox"] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
	height: 0;
	border-top: 1px solid #D8D8D8;
	margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
 }
 .amap-logo{
  display: none !important;
 }
`)},kPKH:function(Se,dt,L){"use strict";var U=L("/kpp");dt.a=U.a},"kQ+U":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return Je});var U=L("lSNA"),E=L.n(U),T=L("J4zp"),e=L.n(T),t=L("lwsE"),u=L.n(t),s=L("W8MJ"),h=L.n(s),r=L("k5/I"),c=L("h1nZ"),n=L("yXPU"),i=L.n(n),a=L("o0o1"),o=L.n(a),l=L("4cb6"),f=L("fbvF"),v=L.n(f),b=function(){function Qe(de,ue){u()(this,Qe),this.attribute=void 0,this.buffer=void 0;var Ne=ue.buffer,cn=ue.offset,Fn=ue.stride,wn=ue.normalized,en=ue.size,tn=ue.divisor;this.buffer=Ne,this.attribute={buffer:Ne.get(),offset:cn||0,stride:Fn||0,normalized:wn||!1,divisor:tn||0},en&&(this.attribute.size=en)}return h()(Qe,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(ue){this.buffer.subData(ue)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Qe}(),g,y,_,M,x,m,S,P,A,O,R,H,N,K,V=(g={},E()(g,c.gl.POINTS,"points"),E()(g,c.gl.LINES,"lines"),E()(g,c.gl.LINE_LOOP,"line loop"),E()(g,c.gl.LINE_STRIP,"line strip"),E()(g,c.gl.TRIANGLES,"triangles"),E()(g,c.gl.TRIANGLE_FAN,"triangle fan"),E()(g,c.gl.TRIANGLE_STRIP,"triangle strip"),g),k=(y={},E()(y,c.gl.STATIC_DRAW,"static"),E()(y,c.gl.DYNAMIC_DRAW,"dynamic"),E()(y,c.gl.STREAM_DRAW,"stream"),y),Z=(_={},E()(_,c.gl.BYTE,"int8"),E()(_,c.gl.UNSIGNED_INT,"int16"),E()(_,c.gl.INT,"int32"),E()(_,c.gl.UNSIGNED_BYTE,"uint8"),E()(_,c.gl.UNSIGNED_SHORT,"uint16"),E()(_,c.gl.UNSIGNED_INT,"uint32"),E()(_,c.gl.FLOAT,"float"),_),X=(M={},E()(M,c.gl.ALPHA,"alpha"),E()(M,c.gl.LUMINANCE,"luminance"),E()(M,c.gl.LUMINANCE_ALPHA,"luminance alpha"),E()(M,c.gl.RGB,"rgb"),E()(M,c.gl.RGBA,"rgba"),E()(M,c.gl.RGBA4,"rgba4"),E()(M,c.gl.RGB5_A1,"rgb5 a1"),E()(M,c.gl.RGB565,"rgb565"),E()(M,c.gl.DEPTH_COMPONENT,"depth"),E()(M,c.gl.DEPTH_STENCIL,"depth stencil"),M),at=(x={},E()(x,c.gl.DONT_CARE,"dont care"),E()(x,c.gl.NICEST,"nice"),E()(x,c.gl.FASTEST,"fast"),x),pt=(m={},E()(m,c.gl.NEAREST,"nearest"),E()(m,c.gl.LINEAR,"linear"),E()(m,c.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),E()(m,c.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),E()(m,c.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),E()(m,c.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),m),gt=(S={},E()(S,c.gl.REPEAT,"repeat"),E()(S,c.gl.CLAMP_TO_EDGE,"clamp"),E()(S,c.gl.MIRRORED_REPEAT,"mirror"),S),ft=(P={},E()(P,c.gl.NONE,"none"),E()(P,c.gl.BROWSER_DEFAULT_WEBGL,"browser"),P),Rt=(A={},E()(A,c.gl.NEVER,"never"),E()(A,c.gl.ALWAYS,"always"),E()(A,c.gl.LESS,"less"),E()(A,c.gl.LEQUAL,"lequal"),E()(A,c.gl.GREATER,"greater"),E()(A,c.gl.GEQUAL,"gequal"),E()(A,c.gl.EQUAL,"equal"),E()(A,c.gl.NOTEQUAL,"notequal"),A),Nt=(O={},E()(O,c.gl.FUNC_ADD,"add"),E()(O,c.gl.MIN_EXT,"min"),E()(O,c.gl.MAX_EXT,"max"),E()(O,c.gl.FUNC_SUBTRACT,"subtract"),E()(O,c.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),O),Dt=(R={},E()(R,c.gl.ZERO,"zero"),E()(R,c.gl.ONE,"one"),E()(R,c.gl.SRC_COLOR,"src color"),E()(R,c.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),E()(R,c.gl.SRC_ALPHA,"src alpha"),E()(R,c.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),E()(R,c.gl.DST_COLOR,"dst color"),E()(R,c.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),E()(R,c.gl.DST_ALPHA,"dst alpha"),E()(R,c.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),E()(R,c.gl.CONSTANT_COLOR,"constant color"),E()(R,c.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),E()(R,c.gl.CONSTANT_ALPHA,"constant alpha"),E()(R,c.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),E()(R,c.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),R),St=(H={},E()(H,c.gl.NEVER,"never"),E()(H,c.gl.ALWAYS,"always"),E()(H,c.gl.LESS,"less"),E()(H,c.gl.LEQUAL,"lequal"),E()(H,c.gl.GREATER,"greater"),E()(H,c.gl.GEQUAL,"gequal"),E()(H,c.gl.EQUAL,"equal"),E()(H,c.gl.NOTEQUAL,"notequal"),H),xt=(N={},E()(N,c.gl.ZERO,"zero"),E()(N,c.gl.KEEP,"keep"),E()(N,c.gl.REPLACE,"replace"),E()(N,c.gl.INVERT,"invert"),E()(N,c.gl.INCR,"increment"),E()(N,c.gl.DECR,"decrement"),E()(N,c.gl.INCR_WRAP,"increment wrap"),E()(N,c.gl.DECR_WRAP,"decrement wrap"),N),Ot=(K={},E()(K,c.gl.FRONT,"front"),E()(K,c.gl.BACK,"back"),K),it=function(){function Qe(de,ue){u()(this,Qe),this.buffer=void 0;var Ne=ue.data,cn=ue.usage,Fn=ue.type;this.buffer=de.buffer({data:Ne,usage:k[cn||c.gl.STATIC_DRAW],type:Z[Fn||c.gl.UNSIGNED_BYTE]})}return h()(Qe,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(ue){var Ne=ue.data,cn=ue.offset;this.buffer.subdata(Ne,cn)}}]),Qe}(),At=function(){function Qe(de,ue){u()(this,Qe),this.elements=void 0;var Ne=ue.data,cn=ue.usage,Fn=ue.type,wn=ue.count;this.elements=de.elements({data:Ne,usage:k[cn||c.gl.STATIC_DRAW],type:Z[Fn||c.gl.UNSIGNED_BYTE],count:wn})}return h()(Qe,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(ue){var Ne=ue.data;this.elements.subdata(Ne)}},{key:"destroy",value:function(){}}]),Qe}(),z=function(){function Qe(de,ue){u()(this,Qe),this.framebuffer=void 0;var Ne=ue.width,cn=ue.height,Fn=ue.color,wn=ue.colors,en=ue.depth,tn=ue.stencil,xn={width:Ne,height:cn};Array.isArray(wn)&&(xn.colors=wn.map(function(Bn){return Bn.get()})),Fn&&typeof Fn!="boolean"&&(xn.color=Fn.get()),this.framebuffer=de.framebuffer(xn)}return h()(Qe,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(ue){var Ne=ue.width,cn=ue.height;this.framebuffer.resize(Ne,cn)}}]),Qe}(),q=L("cDf5"),mt=L.n(q),et=L("c6wG"),st=L.n(et),bt=L("YO3V"),Y=L.n(bt);function rt(Qe,de){var ue=Object.keys(Qe);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(Qe);de&&(Ne=Ne.filter(function(cn){return Object.getOwnPropertyDescriptor(Qe,cn).enumerable})),ue.push.apply(ue,Ne)}return ue}function ot(Qe){for(var de=1;de<arguments.length;de++){var ue=arguments[de]!=null?arguments[de]:{};de%2?rt(Object(ue),!0).forEach(function(Ne){E()(Qe,Ne,ue[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(ue)):rt(Object(ue)).forEach(function(Ne){Object.defineProperty(Qe,Ne,Object.getOwnPropertyDescriptor(ue,Ne))})}return Qe}var $=function(){function Qe(de,ue){u()(this,Qe),this.reGl=void 0,this.destroyed=!1,this.drawCommand=void 0,this.drawParams=void 0,this.options=void 0,this.uniforms={},this.reGl=de;var Ne=ue.vs,cn=ue.fs,Fn=ue.attributes,wn=ue.uniforms,en=ue.primitive,tn=ue.count,xn=ue.elements,Bn=ue.depth,vr=ue.blend,li=ue.stencil,Me=ue.cull,Pe=ue.instances,te={};this.options=ue,wn&&(this.uniforms=this.extractUniforms(wn),Object.keys(wn).forEach(function(re){te[re]=de.prop(re)}));var ge={};Object.keys(Fn).forEach(function(re){ge[re]=Fn[re].get()});var Ht={attributes:ge,frag:cn,uniforms:te,vert:Ne,primitive:V[en===void 0?c.gl.TRIANGLES:en]};Pe&&(Ht.instances=Pe),tn&&(Ht.count=tn),xn&&(Ht.elements=xn.get()),this.initDepthDrawParams({depth:Bn},Ht),this.initBlendDrawParams({blend:vr},Ht),this.initStencilDrawParams({stencil:li},Ht),this.initCullDrawParams({cull:Me},Ht),this.drawCommand=de(Ht),this.drawParams=Ht}return h()(Qe,[{key:"addUniforms",value:function(ue){this.uniforms=ot(ot({},this.uniforms),this.extractUniforms(ue))}},{key:"draw",value:function(ue){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var Ne=ot(ot({},this.uniforms),this.extractUniforms(ue.uniforms||{})),cn={};Object.keys(Ne).forEach(function(Fn){var wn=mt()(Ne[Fn]);wn==="boolean"||wn==="number"||Array.isArray(Ne[Fn])||Ne[Fn].BYTES_PER_ELEMENT?cn[Fn]=Ne[Fn]:cn[Fn]=Ne[Fn].get()}),this.drawCommand(cn)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(ue){ue.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(ue,Ne){var cn=ue.depth;cn&&(Ne.depth={enable:cn.enable===void 0?!0:!!cn.enable,mask:cn.mask===void 0?!0:!!cn.mask,func:Rt[cn.func||c.gl.LESS],range:cn.range||[0,1]})}},{key:"initBlendDrawParams",value:function(ue,Ne){var cn=ue.blend;if(cn){var Fn=cn.enable,wn=cn.func,en=cn.equation,tn=cn.color,xn=tn===void 0?[0,0,0,0]:tn;Ne.blend={enable:!!Fn,func:{srcRGB:Dt[wn&&wn.srcRGB||c.gl.SRC_ALPHA],srcAlpha:Dt[wn&&wn.srcAlpha||c.gl.SRC_ALPHA],dstRGB:Dt[wn&&wn.dstRGB||c.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Dt[wn&&wn.dstAlpha||c.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Nt[en&&en.rgb||c.gl.FUNC_ADD],alpha:Nt[en&&en.alpha||c.gl.FUNC_ADD]},color:xn}}}},{key:"initStencilDrawParams",value:function(ue,Ne){var cn=ue.stencil;if(cn){var Fn=cn.enable,wn=cn.mask,en=wn===void 0?-1:wn,tn=cn.func,xn=tn===void 0?{cmp:c.gl.ALWAYS,ref:0,mask:-1}:tn,Bn=cn.opFront,vr=Bn===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:Bn,li=cn.opBack,Me=li===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:li;Ne.stencil={enable:!!Fn,mask:en,func:ot(ot({},xn),{},{cmp:St[xn.cmp]}),opFront:{fail:xt[vr.fail],zfail:xt[vr.zfail],zpass:xt[vr.zpass]},opBack:{fail:xt[Me.fail],zfail:xt[Me.zfail],zpass:xt[Me.zpass]}}}}},{key:"initCullDrawParams",value:function(ue,Ne){var cn=ue.cull;if(cn){var Fn=cn.enable,wn=cn.face,en=wn===void 0?c.gl.BACK:wn;Ne.cull={enable:!!Fn,face:Ot[en]}}}},{key:"extractUniforms",value:function(ue){var Ne=this,cn={};return Object.keys(ue).forEach(function(Fn){Ne.extractUniformsRecursively(Fn,ue[Fn],cn,"")}),cn}},{key:"extractUniformsRecursively",value:function(ue,Ne,cn,Fn){var wn=this;if(Ne===null||typeof Ne=="number"||typeof Ne=="boolean"||Array.isArray(Ne)&&typeof Ne[0]=="number"||st()(Ne)||Ne===""||"resize"in Ne){cn["".concat(Fn&&Fn+".").concat(ue)]=Ne;return}Y()(Ne)&&Object.keys(Ne).forEach(function(en){wn.extractUniformsRecursively(en,Ne[en],cn,"".concat(Fn&&Fn+".").concat(ue))}),Array.isArray(Ne)&&Ne.forEach(function(en,tn){Object.keys(en).forEach(function(xn){wn.extractUniformsRecursively(xn,en[xn],cn,"".concat(Fn&&Fn+".").concat(ue,"[").concat(tn,"]"))})})}}]),Qe}(),Pt=function(){function Qe(de,ue){u()(this,Qe),this.texture=void 0,this.width=void 0,this.height=void 0;var Ne=ue.data,cn=ue.type,Fn=cn===void 0?c.gl.UNSIGNED_BYTE:cn,wn=ue.width,en=ue.height,tn=ue.flipY,xn=tn===void 0?!1:tn,Bn=ue.format,vr=Bn===void 0?c.gl.RGBA:Bn,li=ue.mipmap,Me=li===void 0?!1:li,Pe=ue.wrapS,te=Pe===void 0?c.gl.CLAMP_TO_EDGE:Pe,ge=ue.wrapT,Ht=ge===void 0?c.gl.CLAMP_TO_EDGE:ge,re=ue.aniso,Te=re===void 0?0:re,ae=ue.alignment,xe=ae===void 0?1:ae,qe=ue.premultiplyAlpha,zn=qe===void 0?!1:qe,ar=ue.mag,_n=ar===void 0?c.gl.NEAREST:ar,Cn=ue.min,Or=Cn===void 0?c.gl.NEAREST:Cn,Ar=ue.colorSpace,hn=Ar===void 0?c.gl.BROWSER_DEFAULT_WEBGL:Ar;this.width=wn,this.height=en;var Pr={width:wn,height:en,type:Z[Fn],format:X[vr],wrapS:gt[te],wrapT:gt[Ht],mag:pt[_n],min:pt[Or],alignment:xe,flipY:xn,colorSpace:ft[hn],premultiplyAlpha:zn,aniso:Te};Ne&&(Pr.data=Ne),typeof Me=="number"?Pr.mipmap=at[Me]:typeof Me=="boolean"&&(Pr.mipmap=Me),this.texture=de.texture(Pr)}return h()(Qe,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(ue)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(ue){var Ne=ue.width,cn=ue.height;this.texture.resize(Ne,cn),this.width=Ne,this.height=cn}},{key:"destroy",value:function(){this.texture.destroy()}}]),Qe}(),yt,Ft,Qt,ne=(yt=Object(l.injectable)(),yt(Ft=(Qt=function(){function Qe(){var de=this;u()(this,Qe),this.gl=void 0,this.$container=void 0,this.canvas=void 0,this.width=void 0,this.height=void 0,this.isDirty=void 0,this.createModel=function(ue){return new $(de.gl,ue)},this.createAttribute=function(ue){return new b(de.gl,ue)},this.createBuffer=function(ue){return new it(de.gl,ue)},this.createElements=function(ue){return new At(de.gl,ue)},this.createTexture2D=function(ue){return new Pt(de.gl,ue)},this.createFramebuffer=function(ue){return new z(de.gl,ue)},this.useFramebuffer=function(ue,Ne){de.gl({framebuffer:ue?ue.get():null})(Ne)},this.clear=function(ue){var Ne=ue.color,cn=ue.depth,Fn=ue.stencil,wn=ue.framebuffer,en=wn===void 0?null:wn,tn={color:Ne,depth:cn,stencil:Fn};tn.framebuffer=en===null?en:en.get(),de.gl.clear(tn)},this.viewport=function(ue){var Ne=ue.x,cn=ue.y,Fn=ue.width,wn=ue.height;de.gl._gl.viewport(Ne,cn,Fn,wn),de.width=Fn,de.height=wn,de.gl._refresh()},this.readPixels=function(ue){var Ne=ue.framebuffer,cn=ue.x,Fn=ue.y,wn=ue.width,en=ue.height,tn={x:cn,y:Fn,width:wn,height:en};return Ne&&(tn.framebuffer=Ne.get()),de.gl.read(tn)},this.getViewportSize=function(){return{width:de.gl._gl.drawingBufferWidth,height:de.gl._gl.drawingBufferHeight}},this.getContainer=function(){var ue;return(ue=de.canvas)===null||ue===void 0?void 0:ue.parentElement},this.getCanvas=function(){return de.canvas},this.getGLContext=function(){return de.gl._gl},this.destroy=function(){de.gl.destroy()}}return h()(Qe,[{key:"init",value:function(){var de=i()(o.a.mark(function Ne(cn,Fn){var wn=this;return o.a.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return this.canvas=cn,tn.next=3,new Promise(function(xn,Bn){v()({canvas:wn.canvas,attributes:{alpha:!0,antialias:Fn.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:Fn.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(li,Me){(li||!Me)&&Bn(li),xn(Me)}})});case 3:this.gl=tn.sent;case 4:case"end":return tn.stop()}},Ne,this)}));function ue(Ne,cn){return de.apply(this,arguments)}return ue}()},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var ue=this.getGLContext();ue.disable(ue.CULL_FACE)}},{key:"setDirty",value:function(ue){this.isDirty=ue}},{key:"getDirty",value:function(){return this.isDirty}}]),Qe}(),Qt))||Ft),Wt=L("Hel2");function $t(Qe,de){var ue=Object.keys(Qe);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(Qe);de&&(Ne=Ne.filter(function(cn){return Object.getOwnPropertyDescriptor(Qe,cn).enumerable})),ue.push.apply(ue,Ne)}return ue}function De(Qe){for(var de=1;de<arguments.length;de++){var ue=arguments[de]!=null?arguments[de]:{};de%2?$t(Object(ue),!0).forEach(function(Ne){E()(Qe,Ne,ue[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(ue)):$t(Object(ue)).forEach(function(Ne){Object.defineProperty(Qe,Ne,Object.getOwnPropertyDescriptor(ue,Ne))})}return Qe}var Je=function(){function Qe(de){u()(this,Qe),this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.layerService=void 0,this.iconService=void 0,this.markerService=void 0,this.popupService=void 0,this.fontService=void 0,this.interactionService=void 0,this.container=void 0;var ue=de.id,Ne=de.map,cn=Object(c.createSceneContainer)();this.container=cn,Ne.setContainer(cn,ue),cn.bind(c.TYPES.IRendererService).to(ne).inSingletonScope(),this.sceneService=cn.get(c.TYPES.ISceneService),this.mapService=cn.get(c.TYPES.IMapService),this.iconService=cn.get(c.TYPES.IIconService),this.fontService=cn.get(c.TYPES.IFontService),this.controlService=cn.get(c.TYPES.IControlService),this.layerService=cn.get(c.TYPES.ILayerService),this.markerService=cn.get(c.TYPES.IMarkerService),this.interactionService=cn.get(c.TYPES.IInteractionService),this.popupService=cn.get(c.TYPES.IPopupService),this.initComponent(ue),this.sceneService.init(de),this.initControl()}return h()(Qe,[{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(ue){return this.sceneService.exportPng(ue)}},{key:"exportMap",value:function(ue){return this.sceneService.exportPng(ue)}},{key:"registerRenderService",value:function(ue){var Ne=this;if(this.sceneService.loaded){var cn=new ue(this);cn.init()}else this.on("loaded",function(){var Fn=new ue(Ne);Fn.init()})}},{key:"map",get:function(){return this.mapService.map}},{key:"addLayer",value:function(ue){var Ne=Object(c.createLayerContainer)(this.container);ue.setContainer(Ne),this.sceneService.addLayer(ue)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(ue){return this.layerService.getLayer(ue)}},{key:"getLayerByName",value:function(ue){return this.layerService.getLayerByName(ue)}},{key:"removeLayer",value:function(ue){this.layerService.remove(ue)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addIconFont",value:function(ue,Ne){this.fontService.addIconFont(ue,Ne)}},{key:"addIconFonts",value:function(ue){var Ne=this;ue.forEach(function(cn){var Fn=e()(cn,2),wn=Fn[0],en=Fn[1];Ne.fontService.addIconFont(wn,en)})}},{key:"addFontFace",value:function(ue,Ne){this.sceneService.addFontFace(ue,Ne)}},{key:"addImage",value:function(ue,Ne){this.iconService.addImage(ue,Ne)}},{key:"hasImage",value:function(ue){return this.iconService.hasImage(ue)}},{key:"removeImage",value:function(ue){this.iconService.removeImage(ue)}},{key:"addIconFontGlyphs",value:function(ue,Ne){this.fontService.addIconGlyphs(Ne)}},{key:"addControl",value:function(ue){this.controlService.addControl(ue,this.container)}},{key:"removeControl",value:function(ue){this.controlService.removeControl(ue)}},{key:"getControlByName",value:function(ue){return this.controlService.getControlByName(ue)}},{key:"addMarker",value:function(ue){this.markerService.addMarker(ue)}},{key:"addMarkerLayer",value:function(ue){this.markerService.addMarkerLayer(ue)}},{key:"removeMarkerLayer",value:function(ue){this.markerService.removeMarkerLayer(ue)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(ue){this.popupService.addPopup(ue)}},{key:"on",value:function(ue,Ne){c.SceneEventList.indexOf(ue)===-1?this.mapService.on(ue,Ne):this.sceneService.on(ue,Ne)}},{key:"off",value:function(ue,Ne){c.SceneEventList.indexOf(ue)===-1?this.mapService.off(ue,Ne):this.sceneService.off(ue,Ne)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(ue){return this.mapService.getCenter(ue)}},{key:"setCenter",value:function(ue,Ne){return this.mapService.setCenter(ue,Ne)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(ue){return this.mapService.setPitch(ue)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(ue){this.mapService.setRotation(ue)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(ue){this.mapService.panTo(ue)}},{key:"panBy",value:function(ue){this.mapService.panBy(ue)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(ue){this.mapService.setZoom(ue)}},{key:"fitBounds",value:function(ue,Ne){var cn=this.sceneService.getSceneConfig(),Fn=cn.fitBoundsOptions,wn=cn.animate;this.mapService.fitBounds(ue,Ne||De(De({},Fn),{},{animate:wn}))}},{key:"setZoomAndCenter",value:function(ue,Ne){this.mapService.setZoomAndCenter(ue,Ne)}},{key:"setMapStyle",value:function(ue){this.mapService.setMapStyle(ue)}},{key:"setMapStatus",value:function(ue){this.mapService.setMapStatus(ue)}},{key:"pixelToLngLat",value:function(ue){return this.mapService.pixelToLngLat(ue)}},{key:"lngLatToPixel",value:function(ue){return this.mapService.lngLatToPixel(ue)}},{key:"containerToLngLat",value:function(ue){return this.mapService.containerToLngLat(ue)}},{key:"lngLatToContainer",value:function(ue){return this.mapService.lngLatToContainer(ue)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(ue,Ne){this.container.bind(c.TYPES.IPostProcessingPass).to(ue).whenTargetNamed(Ne)}},{key:"initComponent",value:function(ue){this.controlService.init({container:Wt.a.getContainer(ue)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var ue=this.sceneService.getSceneConfig(),Ne=ue.logoVisible,cn=ue.logoPosition;Ne&&this.addControl(new r.c({position:cn}))}}]),Qe}()},l94r:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return at});var U=L("lSNA"),E=L.n(U),T=L("lwsE"),e=L.n(T),t=L("W8MJ"),u=L.n(t),s=L("7W2i"),h=L.n(s),r=L("a1gu"),c=L.n(r),n=L("Nsbk"),i=L.n(n),a=L("JBE3"),o=L.n(a),l=L("4qC0"),f=L.n(l),v=L("lSCD"),b=L.n(v),g=L("BkRI"),y=L.n(g),_=L("xp6e"),M=L("Hel2"),x=L("uhBA"),m=L("rlAn"),S=L("qxNg");function P(pt){if(pt.length===0)throw new Error("max requires at least one data point");for(var gt=pt[0],ft=1;ft<pt.length;ft++)pt[ft]>gt&&(gt=pt[ft]);return gt}function A(pt){if(pt.length===0)throw new Error("min requires at least one data point");for(var gt=pt[0],ft=1;ft<pt.length;ft++)pt[ft]<gt&&(gt=pt[ft]);return gt}function O(pt){if(pt.length===0)return 0;for(var gt=pt[0],ft=0,Rt,Nt=1;Nt<pt.length;Nt++)Rt=gt+pt[Nt]*1,Math.abs(gt)>=Math.abs(pt[Nt])?ft+=gt-Rt+pt[Nt]:ft+=pt[Nt]-Rt+gt,gt=Rt;return gt+ft*1}function R(pt){if(pt.length===0)throw new Error("mean requires at least one data point");return O(pt)/pt.length}var H={min:A,max:P,mean:R,sum:O};function N(pt,gt){return pt.map(function(ft){return ft[gt]*1})}function K(pt,gt){var ft=Object.keys(pt);if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(pt);gt&&(Rt=Rt.filter(function(Nt){return Object.getOwnPropertyDescriptor(pt,Nt).enumerable})),ft.push.apply(ft,Rt)}return ft}function V(pt){for(var gt=1;gt<arguments.length;gt++){var ft=arguments[gt]!=null?arguments[gt]:{};gt%2?K(Object(ft),!0).forEach(function(Rt){E()(pt,Rt,ft[Rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pt,Object.getOwnPropertyDescriptors(ft)):K(Object(ft)).forEach(function(Rt){Object.defineProperty(pt,Rt,Object.getOwnPropertyDescriptor(ft,Rt))})}return pt}function k(pt){var gt=Z();return function(){var Rt=i()(pt),Nt;if(gt){var Dt=i()(this).constructor;Nt=Reflect.construct(Rt,arguments,Dt)}else Nt=Rt.apply(this,arguments);return c()(this,Nt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pt){return!1}}function X(pt,gt){if(Array.isArray(gt))return gt}var at=function(pt){h()(ft,pt);var gt=k(ft);function ft(Rt,Nt){var Dt;return e()(this,ft),Dt=gt.call(this),Dt.data=void 0,Dt.extent=void 0,Dt.hooks={init:new _.c},Dt.parser={type:"geojson"},Dt.transforms=[],Dt.cluster=!1,Dt.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},Dt.mapService=void 0,Dt.invalidExtent=!1,Dt.originData=void 0,Dt.rawData=void 0,Dt.cfg={},Dt.clusterIndex=void 0,Dt.originData=Rt,Dt.initCfg(Nt),Dt.hooks.init.tap("parser",function(){Dt.excuteParser()}),Dt.hooks.init.tap("cluster",function(){Dt.initCluster()}),Dt.hooks.init.tap("transform",function(){Dt.executeTrans()}),Dt.init(),Dt}return u()(ft,[{key:"setData",value:function(Nt,Dt){this.rawData=Nt,this.originData=Nt,this.initCfg(Dt),this.init(),this.emit("update")}},{key:"getClusters",value:function(Nt){return this.clusterIndex.getClusters(this.caculClusterExtent(2),Nt)}},{key:"getClustersLeaves",value:function(Nt){return this.clusterIndex.getLeaves(Nt,Infinity)}},{key:"updateClusterData",value:function(Nt){var Dt=this,St=this.clusterOptions,xt=St.method,Ot=xt===void 0?"sum":xt,it=St.field,At=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(Nt));this.clusterOptions.zoom=Nt,At.forEach(function(z){z.id||(z.properties.point_count=1)}),(it||b()(Ot))&&(At=At.map(function(z){var q=z.id;if(q){var mt=Dt.clusterIndex.getLeaves(q,Infinity),et=mt.map(function(Y){return Y.properties}),st;if(f()(Ot)&&it){var bt=N(et,it);st=H[Ot](bt)}b()(Ot)&&(st=Ot(et)),z.properties.stat=st}else z.properties.point_count=1;return z})),this.data=Object(m.getParser)("geojson")({type:"FeatureCollection",features:At}),this.executeTrans()}},{key:"getFeatureById",value:function(Nt){var Dt=this.parser.type,St=Dt===void 0?"geojson":Dt;if(St==="geojson"&&!this.cluster){var xt=Nt<this.originData.features.length?this.originData.features[Nt]:"null",Ot=y()(xt);if(this.transforms.length!==0){var it=this.data.dataArray.find(function(At){return At._id===Nt});Ot.properties=it}return Ot}else return Nt<this.data.dataArray.length?this.data.dataArray[Nt]:"null"}},{key:"getFeatureId",value:function(Nt,Dt){var St=this.data.dataArray.find(function(xt){return xt[Nt]===name});return St==null?void 0:St._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"caculClusterExtent",value:function(Nt){var Dt=[[-Infinity,-Infinity],[Infinity,Infinity]];return this.invalidExtent||(Dt=Object(M.r)(Object(M.h)(this.extent),Nt)),Dt[0].concat(Dt[1])}},{key:"initCfg",value:function(Nt){this.cfg=o()(this.cfg,Nt,X);var Dt=this.cfg;Dt&&(Dt.parser&&(this.parser=Dt.parser),Dt.transforms&&(this.transforms=Dt.transforms),this.cluster=Dt.cluster||!1,Dt.clusterOptions&&(this.cluster=!0,this.clusterOptions=V(V({},this.clusterOptions),Dt.clusterOptions)))}},{key:"excuteParser",value:function(){var Nt=this.parser,Dt=Nt.type||"geojson",St=Object(m.getParser)(Dt);this.data=St(this.originData,Nt),this.extent=Object(M.m)(this.data.dataArray),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]}},{key:"executeTrans",value:function(){var Nt=this,Dt=this.transforms;Dt.forEach(function(St){var xt=St.type,Ot=Object(m.getTransform)(xt)(Nt.data,St);Object.assign(Nt.data,Ot)})}},{key:"initCluster",value:function(){if(!!this.cluster){var Nt=this.clusterOptions||{};this.clusterIndex=Object(S.a)(this.data,Nt)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),ft}(x.EventEmitter)},lJbI:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});function U(E,T){var e=T.extent,t=T.width,u=T.height,s=T.min,h=T.max,r={_id:1,dataArray:[{_id:1,data:Array.from(E),width:t,height:u,min:s,max:h,coordinates:[[e[0],e[1]],[e[2],e[3]]]}]};return r}},lT4e:function(Se,dt,L){"use strict";var U=L("MgzW"),E={},T=function(i){};function e(n,i,a,o,l,f,v,b){if(T(i),!n){var g;if(i===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[a,o,l,f,v,b],_=0;g=new Error(i.replace(/%s/g,function(){return y[_++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}}var t=function(){};if(!1)var u;var s="mixins";function h(n){return n}var r;r={};function c(n,i,a){var o=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},f={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},v={displayName:function(V,k){V.displayName=k},mixins:function(V,k){if(k)for(var Z=0;Z<k.length;Z++)y(V,k[Z])},childContextTypes:function(V,k){V.childContextTypes=U({},V.childContextTypes,k)},contextTypes:function(V,k){V.contextTypes=U({},V.contextTypes,k)},getDefaultProps:function(V,k){V.getDefaultProps?V.getDefaultProps=x(V.getDefaultProps,k):V.getDefaultProps=k},propTypes:function(V,k){V.propTypes=U({},V.propTypes,k)},statics:function(V,k){_(V,k)},autobind:function(){}};function b(K,V,k){for(var Z in V)V.hasOwnProperty(Z)}function g(K,V){var k=l.hasOwnProperty(V)?l[V]:null;R.hasOwnProperty(V)&&e(k==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",V),K&&e(k==="DEFINE_MANY"||k==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",V)}function y(K,V){if(!V){if(!1)var k,Z;return}e(typeof V!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),e(!i(V),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var X=K.prototype,at=X.__reactAutoBindPairs;V.hasOwnProperty(s)&&v.mixins(K,V.mixins);for(var pt in V)if(!!V.hasOwnProperty(pt)&&pt!==s){var gt=V[pt],ft=X.hasOwnProperty(pt);if(g(ft,pt),v.hasOwnProperty(pt))v[pt](K,gt);else{var Rt=l.hasOwnProperty(pt),Nt=typeof gt=="function",Dt=Nt&&!Rt&&!ft&&V.autobind!==!1;if(Dt)at.push(pt,gt),X[pt]=gt;else if(ft){var St=l[pt];e(Rt&&(St==="DEFINE_MANY_MERGED"||St==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",St,pt),St==="DEFINE_MANY_MERGED"?X[pt]=x(X[pt],gt):St==="DEFINE_MANY"&&(X[pt]=m(X[pt],gt))}else X[pt]=gt}}}function _(K,V){if(!!V)for(var k in V){var Z=V[k];if(!!V.hasOwnProperty(k)){var X=k in v;e(!X,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',k);var at=k in K;if(at){var pt=f.hasOwnProperty(k)?f[k]:null;e(pt==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",k),K[k]=x(K[k],Z);return}K[k]=Z}}}function M(K,V){e(K&&V&&typeof K=="object"&&typeof V=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var k in V)V.hasOwnProperty(k)&&(e(K[k]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",k),K[k]=V[k]);return K}function x(K,V){return function(){var Z=K.apply(this,arguments),X=V.apply(this,arguments);if(Z==null)return X;if(X==null)return Z;var at={};return M(at,Z),M(at,X),at}}function m(K,V){return function(){K.apply(this,arguments),V.apply(this,arguments)}}function S(K,V){var k=V.bind(K);if(!1)var Z,X;return k}function P(K){for(var V=K.__reactAutoBindPairs,k=0;k<V.length;k+=2){var Z=V[k],X=V[k+1];K[Z]=S(K,X)}}var A={componentDidMount:function(){this.__isMounted=!0}},O={componentWillUnmount:function(){this.__isMounted=!1}},R={replaceState:function(V,k){this.updater.enqueueReplaceState(this,V,k)},isMounted:function(){return!!this.__isMounted}},H=function(){};U(H.prototype,n.prototype,R);function N(K){var V=h(function(Z,X,at){this.__reactAutoBindPairs.length&&P(this),this.props=Z,this.context=X,this.refs=E,this.updater=at||a,this.state=null;var pt=this.getInitialState?this.getInitialState():null;e(typeof pt=="object"&&!Array.isArray(pt),"%s.getInitialState(): must return an object or null",V.displayName||"ReactCompositeComponent"),this.state=pt});V.prototype=new H,V.prototype.constructor=V,V.prototype.__reactAutoBindPairs=[],o.forEach(y.bind(null,V)),y(V,A),y(V,K),y(V,O),V.getDefaultProps&&(V.defaultProps=V.getDefaultProps()),e(V.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var k in l)V.prototype[k]||(V.prototype[k]=null);return V}return N}Se.exports=c},lnY3:function(Se,dt,L){},lwsE:function(Se,dt){function L(U,E){if(!(U instanceof E))throw new TypeError("Cannot call a class as a function")}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},mNvP:function(Se,dt,L){(function(U,E){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T;(function(e){(function(t){var u=typeof E=="object"?E:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=h(e);typeof u.Reflect=="undefined"?u.Reflect=e:s=h(u.Reflect,s),t(s);function h(r,c){return function(n,i){typeof r[n]!="function"&&Object.defineProperty(r,n,{configurable:!0,writable:!0,value:i}),c&&c(n,i)}}})(function(t){var u=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",h=s&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",r=s&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",n={__proto__:[]}instanceof Array,i=!c&&!n,a={create:c?function(){return ne(Object.create(null))}:n?function(){return ne({__proto__:null})}:function(){return ne({})},has:i?function(Wt,$t){return u.call(Wt,$t)}:function(Wt,$t){return $t in Wt},get:i?function(Wt,$t){return u.call(Wt,$t)?Wt[$t]:void 0}:function(Wt,$t){return Wt[$t]}},o=Object.getPrototypeOf(Function),l=typeof U=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!l&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:yt(),v=!l&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ft(),b=!l&&typeof WeakMap=="function"?WeakMap:Qt(),g=new b;function y(Wt,$t,De,Je){if(Rt(De)){if(!q(Wt))throw new TypeError;if(!et($t))throw new TypeError;return H(Wt,$t)}else{if(!q(Wt))throw new TypeError;if(!St($t))throw new TypeError;if(!St(Je)&&!Rt(Je)&&!Nt(Je))throw new TypeError;return Nt(Je)&&(Je=void 0),De=z(De),N(Wt,$t,De,Je)}}t("decorate",y);function _(Wt,$t){function De(Je,Qe){if(!St(Je))throw new TypeError;if(!Rt(Qe)&&!st(Qe))throw new TypeError;at(Wt,$t,Je,Qe)}return De}t("metadata",_);function M(Wt,$t,De,Je){if(!St(De))throw new TypeError;return Rt(Je)||(Je=z(Je)),at(Wt,$t,De,Je)}t("defineMetadata",M);function x(Wt,$t,De){if(!St($t))throw new TypeError;return Rt(De)||(De=z(De)),V(Wt,$t,De)}t("hasMetadata",x);function m(Wt,$t,De){if(!St($t))throw new TypeError;return Rt(De)||(De=z(De)),k(Wt,$t,De)}t("hasOwnMetadata",m);function S(Wt,$t,De){if(!St($t))throw new TypeError;return Rt(De)||(De=z(De)),Z(Wt,$t,De)}t("getMetadata",S);function P(Wt,$t,De){if(!St($t))throw new TypeError;return Rt(De)||(De=z(De)),X(Wt,$t,De)}t("getOwnMetadata",P);function A(Wt,$t){if(!St(Wt))throw new TypeError;return Rt($t)||($t=z($t)),pt(Wt,$t)}t("getMetadataKeys",A);function O(Wt,$t){if(!St(Wt))throw new TypeError;return Rt($t)||($t=z($t)),gt(Wt,$t)}t("getOwnMetadataKeys",O);function R(Wt,$t,De){if(!St($t))throw new TypeError;Rt(De)||(De=z(De));var Je=K($t,De,!1);if(Rt(Je)||!Je.delete(Wt))return!1;if(Je.size>0)return!0;var Qe=g.get($t);return Qe.delete(De),Qe.size>0||g.delete($t),!0}t("deleteMetadata",R);function H(Wt,$t){for(var De=Wt.length-1;De>=0;--De){var Je=Wt[De],Qe=Je($t);if(!Rt(Qe)&&!Nt(Qe)){if(!et(Qe))throw new TypeError;$t=Qe}}return $t}function N(Wt,$t,De,Je){for(var Qe=Wt.length-1;Qe>=0;--Qe){var de=Wt[Qe],ue=de($t,De,Je);if(!Rt(ue)&&!Nt(ue)){if(!St(ue))throw new TypeError;Je=ue}}return Je}function K(Wt,$t,De){var Je=g.get(Wt);if(Rt(Je)){if(!De)return;Je=new f,g.set(Wt,Je)}var Qe=Je.get($t);if(Rt(Qe)){if(!De)return;Qe=new f,Je.set($t,Qe)}return Qe}function V(Wt,$t,De){var Je=k(Wt,$t,De);if(Je)return!0;var Qe=Pt($t);return Nt(Qe)?!1:V(Wt,Qe,De)}function k(Wt,$t,De){var Je=K($t,De,!1);return Rt(Je)?!1:it(Je.has(Wt))}function Z(Wt,$t,De){var Je=k(Wt,$t,De);if(Je)return X(Wt,$t,De);var Qe=Pt($t);if(!Nt(Qe))return Z(Wt,Qe,De)}function X(Wt,$t,De){var Je=K($t,De,!1);if(!Rt(Je))return Je.get(Wt)}function at(Wt,$t,De,Je){var Qe=K(De,Je,!0);Qe.set(Wt,$t)}function pt(Wt,$t){var De=gt(Wt,$t),Je=Pt(Wt);if(Je===null)return De;var Qe=pt(Je,$t);if(Qe.length<=0)return De;if(De.length<=0)return Qe;for(var de=new v,ue=[],Ne=0,cn=De;Ne<cn.length;Ne++){var Fn=cn[Ne],wn=de.has(Fn);wn||(de.add(Fn),ue.push(Fn))}for(var en=0,tn=Qe;en<tn.length;en++){var Fn=tn[en],wn=de.has(Fn);wn||(de.add(Fn),ue.push(Fn))}return ue}function gt(Wt,$t){var De=[],Je=K(Wt,$t,!1);if(Rt(Je))return De;for(var Qe=Je.keys(),de=Y(Qe),ue=0;;){var Ne=ot(de);if(!Ne)return De.length=ue,De;var cn=rt(Ne);try{De[ue]=cn}catch(Fn){try{$(de)}finally{throw Fn}}ue++}}function ft(Wt){if(Wt===null)return 1;switch(typeof Wt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Wt===null?1:6;default:return 6}}function Rt(Wt){return Wt===void 0}function Nt(Wt){return Wt===null}function Dt(Wt){return typeof Wt=="symbol"}function St(Wt){return typeof Wt=="object"?Wt!==null:typeof Wt=="function"}function xt(Wt,$t){switch(ft(Wt)){case 0:return Wt;case 1:return Wt;case 2:return Wt;case 3:return Wt;case 4:return Wt;case 5:return Wt}var De=$t===3?"string":$t===5?"number":"default",Je=bt(Wt,h);if(Je!==void 0){var Qe=Je.call(Wt,De);if(St(Qe))throw new TypeError;return Qe}return Ot(Wt,De==="default"?"number":De)}function Ot(Wt,$t){if($t==="string"){var De=Wt.toString;if(mt(De)){var Je=De.call(Wt);if(!St(Je))return Je}var Qe=Wt.valueOf;if(mt(Qe)){var Je=Qe.call(Wt);if(!St(Je))return Je}}else{var Qe=Wt.valueOf;if(mt(Qe)){var Je=Qe.call(Wt);if(!St(Je))return Je}var de=Wt.toString;if(mt(de)){var Je=de.call(Wt);if(!St(Je))return Je}}throw new TypeError}function it(Wt){return!!Wt}function At(Wt){return""+Wt}function z(Wt){var $t=xt(Wt,3);return Dt($t)?$t:At($t)}function q(Wt){return Array.isArray?Array.isArray(Wt):Wt instanceof Object?Wt instanceof Array:Object.prototype.toString.call(Wt)==="[object Array]"}function mt(Wt){return typeof Wt=="function"}function et(Wt){return typeof Wt=="function"}function st(Wt){switch(ft(Wt)){case 3:return!0;case 4:return!0;default:return!1}}function bt(Wt,$t){var De=Wt[$t];if(De!=null){if(!mt(De))throw new TypeError;return De}}function Y(Wt){var $t=bt(Wt,r);if(!mt($t))throw new TypeError;var De=$t.call(Wt);if(!St(De))throw new TypeError;return De}function rt(Wt){return Wt.value}function ot(Wt){var $t=Wt.next();return $t.done?!1:$t}function $(Wt){var $t=Wt.return;$t&&$t.call(Wt)}function Pt(Wt){var $t=Object.getPrototypeOf(Wt);if(typeof Wt!="function"||Wt===o||$t!==o)return $t;var De=Wt.prototype,Je=De&&Object.getPrototypeOf(De);if(Je==null||Je===Object.prototype)return $t;var Qe=Je.constructor;return typeof Qe!="function"||Qe===Wt?$t:Qe}function yt(){var Wt={},$t=[],De=function(){function ue(Ne,cn,Fn){this._index=0,this._keys=Ne,this._values=cn,this._selector=Fn}return ue.prototype["@@iterator"]=function(){return this},ue.prototype[r]=function(){return this},ue.prototype.next=function(){var Ne=this._index;if(Ne>=0&&Ne<this._keys.length){var cn=this._selector(this._keys[Ne],this._values[Ne]);return Ne+1>=this._keys.length?(this._index=-1,this._keys=$t,this._values=$t):this._index++,{value:cn,done:!1}}return{value:void 0,done:!0}},ue.prototype.throw=function(Ne){throw this._index>=0&&(this._index=-1,this._keys=$t,this._values=$t),Ne},ue.prototype.return=function(Ne){return this._index>=0&&(this._index=-1,this._keys=$t,this._values=$t),{value:Ne,done:!0}},ue}();return function(){function ue(){this._keys=[],this._values=[],this._cacheKey=Wt,this._cacheIndex=-2}return Object.defineProperty(ue.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ue.prototype.has=function(Ne){return this._find(Ne,!1)>=0},ue.prototype.get=function(Ne){var cn=this._find(Ne,!1);return cn>=0?this._values[cn]:void 0},ue.prototype.set=function(Ne,cn){var Fn=this._find(Ne,!0);return this._values[Fn]=cn,this},ue.prototype.delete=function(Ne){var cn=this._find(Ne,!1);if(cn>=0){for(var Fn=this._keys.length,wn=cn+1;wn<Fn;wn++)this._keys[wn-1]=this._keys[wn],this._values[wn-1]=this._values[wn];return this._keys.length--,this._values.length--,Ne===this._cacheKey&&(this._cacheKey=Wt,this._cacheIndex=-2),!0}return!1},ue.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Wt,this._cacheIndex=-2},ue.prototype.keys=function(){return new De(this._keys,this._values,Je)},ue.prototype.values=function(){return new De(this._keys,this._values,Qe)},ue.prototype.entries=function(){return new De(this._keys,this._values,de)},ue.prototype["@@iterator"]=function(){return this.entries()},ue.prototype[r]=function(){return this.entries()},ue.prototype._find=function(Ne,cn){return this._cacheKey!==Ne&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Ne)),this._cacheIndex<0&&cn&&(this._cacheIndex=this._keys.length,this._keys.push(Ne),this._values.push(void 0)),this._cacheIndex},ue}();function Je(ue,Ne){return ue}function Qe(ue,Ne){return Ne}function de(ue,Ne){return[ue,Ne]}}function Ft(){return function(){function Wt(){this._map=new f}return Object.defineProperty(Wt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Wt.prototype.has=function($t){return this._map.has($t)},Wt.prototype.add=function($t){return this._map.set($t,$t),this},Wt.prototype.delete=function($t){return this._map.delete($t)},Wt.prototype.clear=function(){this._map.clear()},Wt.prototype.keys=function(){return this._map.keys()},Wt.prototype.values=function(){return this._map.values()},Wt.prototype.entries=function(){return this._map.entries()},Wt.prototype["@@iterator"]=function(){return this.keys()},Wt.prototype[r]=function(){return this.keys()},Wt}()}function Qt(){var Wt=16,$t=a.create(),De=Je();return function(){function cn(){this._key=Je()}return cn.prototype.has=function(Fn){var wn=Qe(Fn,!1);return wn!==void 0?a.has(wn,this._key):!1},cn.prototype.get=function(Fn){var wn=Qe(Fn,!1);return wn!==void 0?a.get(wn,this._key):void 0},cn.prototype.set=function(Fn,wn){var en=Qe(Fn,!0);return en[this._key]=wn,this},cn.prototype.delete=function(Fn){var wn=Qe(Fn,!1);return wn!==void 0?delete wn[this._key]:!1},cn.prototype.clear=function(){this._key=Je()},cn}();function Je(){var cn;do cn="@@WeakMap@@"+Ne();while(a.has($t,cn));return $t[cn]=!0,cn}function Qe(cn,Fn){if(!u.call(cn,De)){if(!Fn)return;Object.defineProperty(cn,De,{value:a.create()})}return cn[De]}function de(cn,Fn){for(var wn=0;wn<Fn;++wn)cn[wn]=Math.random()*255|0;return cn}function ue(cn){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(cn)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(cn)):de(new Uint8Array(cn),cn):de(new Array(cn),cn)}function Ne(){var cn=ue(Wt);cn[6]=cn[6]&79|64,cn[8]=cn[8]&191|128;for(var Fn="",wn=0;wn<Wt;++wn){var en=cn[wn];(wn===4||wn===6||wn===8)&&(Fn+="-"),en<16&&(Fn+="0"),Fn+=en.toString(16).toLowerCase()}return Fn}}function ne(Wt){return Wt.__=void 0,delete Wt.__,Wt}})})(T||(T={}))}).call(this,L("Q2Ig"),L("IyRk"))},mTTR:function(Se,dt,L){var U=L("b80T"),E=L("QcOe"),T=L("MMmD");function e(t){return T(t)?U(t,!0):E(t)}Se.exports=e},mc0g:function(Se,dt){function L(U){return function(E,T,e){for(var t=-1,u=Object(E),s=e(E),h=s.length;h--;){var r=s[U?h:++t];if(T(u[r],r,u)===!1)break}return E}}Se.exports=L},mhV4:function(Se,dt,L){var U=L("ZK94");Se.exports.geometry=E,Se.exports.ring=e;function E(u){var s=0,h;switch(u.type){case"Polygon":return T(u.coordinates);case"MultiPolygon":for(h=0;h<u.coordinates.length;h++)s+=T(u.coordinates[h]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(h=0;h<u.geometries.length;h++)s+=E(u.geometries[h]);return s}}function T(u){var s=0;if(u&&u.length>0){s+=Math.abs(e(u[0]));for(var h=1;h<u.length;h++)s-=Math.abs(e(u[h]))}return s}function e(u){var s,h,r,c,n,i,a,o=0,l=u.length;if(l>2){for(a=0;a<l;a++)a===l-2?(c=l-2,n=l-1,i=0):a===l-1?(c=l-1,n=0,i=1):(c=a,n=a+1,i=a+2),s=u[c],h=u[n],r=u[i],o+=(t(r[0])-t(s[0]))*Math.sin(t(h[1]));o=o*U.RADIUS*U.RADIUS/2}return o}function t(u){return u*Math.PI/180}},mpbz:function(Se,dt,L){(function(U,E){Se.exports=E()})(this,function(){"use strict";function U(S,P,A,O,R,H){if(!(R-O<=A)){var N=O+R>>1;E(S,P,N,O,R,H%2),U(S,P,A,O,N-1,H+1),U(S,P,A,N+1,R,H+1)}}function E(S,P,A,O,R,H){for(;R>O;){if(R-O>600){var N=R-O+1,K=A-O+1,V=Math.log(N),k=.5*Math.exp(2*V/3),Z=.5*Math.sqrt(V*k*(N-k)/N)*(K-N/2<0?-1:1),X=Math.max(O,Math.floor(A-K*k/N+Z)),at=Math.min(R,Math.floor(A+(N-K)*k/N+Z));E(S,P,A,X,at,H)}var pt=P[2*A+H],gt=O,ft=R;for(T(S,P,O,A),P[2*R+H]>pt&&T(S,P,O,R);gt<ft;){for(T(S,P,gt,ft),gt++,ft--;P[2*gt+H]<pt;)gt++;for(;P[2*ft+H]>pt;)ft--}P[2*O+H]===pt?T(S,P,O,ft):(ft++,T(S,P,ft,R)),ft<=A&&(O=ft+1),A<=ft&&(R=ft-1)}}function T(S,P,A,O){e(S,A,O),e(P,2*A,2*O),e(P,2*A+1,2*O+1)}function e(S,P,A){var O=S[P];S[P]=S[A],S[A]=O}function t(S,P,A,O,R,H,N){for(var K=[0,S.length-1,0],V=[],k,Z;K.length;){var X=K.pop(),at=K.pop(),pt=K.pop();if(at-pt<=N){for(var gt=pt;gt<=at;gt++)k=P[2*gt],Z=P[2*gt+1],k>=A&&k<=R&&Z>=O&&Z<=H&&V.push(S[gt]);continue}var ft=Math.floor((pt+at)/2);k=P[2*ft],Z=P[2*ft+1],k>=A&&k<=R&&Z>=O&&Z<=H&&V.push(S[ft]);var Rt=(X+1)%2;(X===0?A<=k:O<=Z)&&(K.push(pt),K.push(ft-1),K.push(Rt)),(X===0?R>=k:H>=Z)&&(K.push(ft+1),K.push(at),K.push(Rt))}return V}function u(S,P,A,O,R,H){for(var N=[0,S.length-1,0],K=[],V=R*R;N.length;){var k=N.pop(),Z=N.pop(),X=N.pop();if(Z-X<=H){for(var at=X;at<=Z;at++)s(P[2*at],P[2*at+1],A,O)<=V&&K.push(S[at]);continue}var pt=Math.floor((X+Z)/2),gt=P[2*pt],ft=P[2*pt+1];s(gt,ft,A,O)<=V&&K.push(S[pt]);var Rt=(k+1)%2;(k===0?A-R<=gt:O-R<=ft)&&(N.push(X),N.push(pt-1),N.push(Rt)),(k===0?A+R>=gt:O+R>=ft)&&(N.push(pt+1),N.push(Z),N.push(Rt))}return K}function s(S,P,A,O){var R=S-A,H=P-O;return R*R+H*H}var h=function(P){return P[0]},r=function(P){return P[1]},c=function(P,A,O,R,H){A===void 0&&(A=h),O===void 0&&(O=r),R===void 0&&(R=64),H===void 0&&(H=Float64Array),this.nodeSize=R,this.points=P;for(var N=P.length<65536?Uint16Array:Uint32Array,K=this.ids=new N(P.length),V=this.coords=new H(P.length*2),k=0;k<P.length;k++)K[k]=k,V[2*k]=A(P[k]),V[2*k+1]=O(P[k]);U(K,V,R,0,K.length-1,0)};c.prototype.range=function(P,A,O,R){return t(this.ids,this.coords,P,A,O,R,this.nodeSize)},c.prototype.within=function(P,A,O){return u(this.ids,this.coords,P,A,O,this.nodeSize)};var n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(P){return P}},i=Math.fround||function(S){return function(P){return S[0]=+P,S[0]}}(new Float32Array(1)),a=function(P){this.options=M(Object.create(n),P),this.trees=new Array(this.options.maxZoom+1)};a.prototype.load=function(P){var A=this.options,O=A.log,R=A.minZoom,H=A.maxZoom,N=A.nodeSize;O&&console.time("total time");var K="prepare "+P.length+" points";O&&console.time(K),this.points=P;for(var V=[],k=0;k<P.length;k++)!P[k].geometry||V.push(l(P[k],k));this.trees[H+1]=new c(V,x,m,N,Float32Array),O&&console.timeEnd(K);for(var Z=H;Z>=R;Z--){var X=+Date.now();V=this._cluster(V,Z),this.trees[Z]=new c(V,x,m,N,Float32Array),O&&console.log("z%d: %d clusters in %dms",Z,V.length,+Date.now()-X)}return O&&console.timeEnd("total time"),this},a.prototype.getClusters=function(P,A){var O=((P[0]+180)%360+360)%360-180,R=Math.max(-90,Math.min(90,P[1])),H=P[2]===180?180:((P[2]+180)%360+360)%360-180,N=Math.max(-90,Math.min(90,P[3]));if(P[2]-P[0]>=360)O=-180,H=180;else if(O>H){var K=this.getClusters([O,R,180,N],A),V=this.getClusters([-180,R,H,N],A);return K.concat(V)}for(var k=this.trees[this._limitZoom(A)],Z=k.range(b(O),g(N),b(H),g(R)),X=[],at=0,pt=Z;at<pt.length;at+=1){var gt=pt[at],ft=k.points[gt];X.push(ft.numPoints?f(ft):this.points[ft.index])}return X},a.prototype.getChildren=function(P){var A=this._getOriginId(P),O=this._getOriginZoom(P),R="No cluster with the specified id.",H=this.trees[O];if(!H)throw new Error(R);var N=H.points[A];if(!N)throw new Error(R);for(var K=this.options.radius/(this.options.extent*Math.pow(2,O-1)),V=H.within(N.x,N.y,K),k=[],Z=0,X=V;Z<X.length;Z+=1){var at=X[Z],pt=H.points[at];pt.parentId===P&&k.push(pt.numPoints?f(pt):this.points[pt.index])}if(k.length===0)throw new Error(R);return k},a.prototype.getLeaves=function(P,A,O){A=A||10,O=O||0;var R=[];return this._appendLeaves(R,P,A,O,0),R},a.prototype.getTile=function(P,A,O){var R=this.trees[this._limitZoom(P)],H=Math.pow(2,P),N=this.options,K=N.extent,V=N.radius,k=V/K,Z=(O-k)/H,X=(O+1+k)/H,at={features:[]};return this._addTileFeatures(R.range((A-k)/H,Z,(A+1+k)/H,X),R.points,A,O,H,at),A===0&&this._addTileFeatures(R.range(1-k/H,Z,1,X),R.points,H,O,H,at),A===H-1&&this._addTileFeatures(R.range(0,Z,k/H,X),R.points,-1,O,H,at),at.features.length?at:null},a.prototype.getClusterExpansionZoom=function(P){for(var A=this._getOriginZoom(P)-1;A<=this.options.maxZoom;){var O=this.getChildren(P);if(A++,O.length!==1)break;P=O[0].properties.cluster_id}return A},a.prototype._appendLeaves=function(P,A,O,R,H){for(var N=this.getChildren(A),K=0,V=N;K<V.length;K+=1){var k=V[K],Z=k.properties;if(Z&&Z.cluster?H+Z.point_count<=R?H+=Z.point_count:H=this._appendLeaves(P,Z.cluster_id,O,R,H):H<R?H++:P.push(k),P.length===O)break}return H},a.prototype._addTileFeatures=function(P,A,O,R,H,N){for(var K=0,V=P;K<V.length;K+=1){var k=V[K],Z=A[k],X=Z.numPoints,at=void 0,pt=void 0,gt=void 0;if(X)at=v(Z),pt=Z.x,gt=Z.y;else{var ft=this.points[Z.index];at=ft.properties,pt=b(ft.geometry.coordinates[0]),gt=g(ft.geometry.coordinates[1])}var Rt={type:1,geometry:[[Math.round(this.options.extent*(pt*H-O)),Math.round(this.options.extent*(gt*H-R))]],tags:at},Nt=void 0;X?Nt=Z.id:this.options.generateId?Nt=Z.index:this.points[Z.index].id&&(Nt=this.points[Z.index].id),Nt!==void 0&&(Rt.id=Nt),N.features.push(Rt)}},a.prototype._limitZoom=function(P){return Math.max(this.options.minZoom,Math.min(+P,this.options.maxZoom+1))},a.prototype._cluster=function(P,A){for(var O=[],R=this.options,H=R.radius,N=R.extent,K=R.reduce,V=R.minPoints,k=H/(N*Math.pow(2,A)),Z=0;Z<P.length;Z++){var X=P[Z];if(!(X.zoom<=A)){X.zoom=A;for(var at=this.trees[A+1],pt=at.within(X.x,X.y,k),gt=X.numPoints||1,ft=gt,Rt=0,Nt=pt;Rt<Nt.length;Rt+=1){var Dt=Nt[Rt],St=at.points[Dt];St.zoom>A&&(ft+=St.numPoints||1)}if(ft>=V){for(var xt=X.x*gt,Ot=X.y*gt,it=K&&gt>1?this._map(X,!0):null,At=(Z<<5)+(A+1)+this.points.length,z=0,q=pt;z<q.length;z+=1){var mt=q[z],et=at.points[mt];if(!(et.zoom<=A)){et.zoom=A;var st=et.numPoints||1;xt+=et.x*st,Ot+=et.y*st,et.parentId=At,K&&(it||(it=this._map(X,!0)),K(it,this._map(et)))}}X.parentId=At,O.push(o(xt/ft,Ot/ft,At,ft,it))}else if(O.push(X),ft>1)for(var bt=0,Y=pt;bt<Y.length;bt+=1){var rt=Y[bt],ot=at.points[rt];ot.zoom<=A||(ot.zoom=A,O.push(ot))}}}return O},a.prototype._getOriginId=function(P){return P-this.points.length>>5},a.prototype._getOriginZoom=function(P){return(P-this.points.length)%32},a.prototype._map=function(P,A){if(P.numPoints)return A?M({},P.properties):P.properties;var O=this.points[P.index].properties,R=this.options.map(O);return A&&R===O?M({},R):R};function o(S,P,A,O,R){return{x:i(S),y:i(P),zoom:Infinity,id:A,parentId:-1,numPoints:O,properties:R}}function l(S,P){var A=S.geometry.coordinates,O=A[0],R=A[1];return{x:i(b(O)),y:i(g(R)),zoom:Infinity,index:P,parentId:-1}}function f(S){return{type:"Feature",id:S.id,properties:v(S),geometry:{type:"Point",coordinates:[y(S.x),_(S.y)]}}}function v(S){var P=S.numPoints,A=P>=1e4?Math.round(P/1e3)+"k":P>=1e3?Math.round(P/100)/10+"k":P;return M(M({},S.properties),{cluster:!0,cluster_id:S.id,point_count:P,point_count_abbreviated:A})}function b(S){return S/360+.5}function g(S){var P=Math.sin(S*Math.PI/180),A=.5-.25*Math.log((1+P)/(1-P))/Math.PI;return A<0?0:A>1?1:A}function y(S){return(S-.5)*360}function _(S){var P=(180-S*360)*Math.PI/180;return 360*Math.atan(Math.exp(P))/Math.PI-90}function M(S,P){for(var A in P)S[A]=P[A];return S}function x(S){return S.x}function m(S){return S.y}return a})},"mv/X":function(Se,dt,L){var U=L("ljhN"),E=L("MMmD"),T=L("wJg7"),e=L("GoyQ");function t(u,s,h){if(!e(h))return!1;var r=typeof s;return(r=="number"?E(h)&&T(s,h.length):r=="string"&&s in h)?U(h[s],u):!1}Se.exports=t},"n+fv":function(Se,dt,L){"use strict";L.r(dt),L.d(dt,"create",function(){return E}),L.d(dt,"clone",function(){return T}),L.d(dt,"length",function(){return e}),L.d(dt,"fromValues",function(){return t}),L.d(dt,"copy",function(){return u}),L.d(dt,"set",function(){return s}),L.d(dt,"add",function(){return h}),L.d(dt,"subtract",function(){return r}),L.d(dt,"multiply",function(){return c}),L.d(dt,"divide",function(){return n}),L.d(dt,"ceil",function(){return i}),L.d(dt,"floor",function(){return a}),L.d(dt,"min",function(){return o}),L.d(dt,"max",function(){return l}),L.d(dt,"round",function(){return f}),L.d(dt,"scale",function(){return v}),L.d(dt,"scaleAndAdd",function(){return b}),L.d(dt,"distance",function(){return g}),L.d(dt,"squaredDistance",function(){return y}),L.d(dt,"squaredLength",function(){return _}),L.d(dt,"negate",function(){return M}),L.d(dt,"inverse",function(){return x}),L.d(dt,"normalize",function(){return m}),L.d(dt,"dot",function(){return S}),L.d(dt,"cross",function(){return P}),L.d(dt,"lerp",function(){return A}),L.d(dt,"hermite",function(){return O}),L.d(dt,"bezier",function(){return R}),L.d(dt,"random",function(){return H}),L.d(dt,"transformMat4",function(){return N}),L.d(dt,"transformMat3",function(){return K}),L.d(dt,"transformQuat",function(){return V}),L.d(dt,"rotateX",function(){return k}),L.d(dt,"rotateY",function(){return Z}),L.d(dt,"rotateZ",function(){return X}),L.d(dt,"angle",function(){return at}),L.d(dt,"zero",function(){return pt}),L.d(dt,"str",function(){return gt}),L.d(dt,"exactEquals",function(){return ft}),L.d(dt,"equals",function(){return Rt}),L.d(dt,"sub",function(){return Nt}),L.d(dt,"mul",function(){return Dt}),L.d(dt,"div",function(){return St}),L.d(dt,"dist",function(){return xt}),L.d(dt,"sqrDist",function(){return Ot}),L.d(dt,"len",function(){return it}),L.d(dt,"sqrLen",function(){return At}),L.d(dt,"forEach",function(){return z});var U=L("yU0y");function E(){var q=new U.a(3);return U.a!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0),q}function T(q){var mt=new U.a(3);return mt[0]=q[0],mt[1]=q[1],mt[2]=q[2],mt}function e(q){var mt=q[0],et=q[1],st=q[2];return Math.hypot(mt,et,st)}function t(q,mt,et){var st=new U.a(3);return st[0]=q,st[1]=mt,st[2]=et,st}function u(q,mt){return q[0]=mt[0],q[1]=mt[1],q[2]=mt[2],q}function s(q,mt,et,st){return q[0]=mt,q[1]=et,q[2]=st,q}function h(q,mt,et){return q[0]=mt[0]+et[0],q[1]=mt[1]+et[1],q[2]=mt[2]+et[2],q}function r(q,mt,et){return q[0]=mt[0]-et[0],q[1]=mt[1]-et[1],q[2]=mt[2]-et[2],q}function c(q,mt,et){return q[0]=mt[0]*et[0],q[1]=mt[1]*et[1],q[2]=mt[2]*et[2],q}function n(q,mt,et){return q[0]=mt[0]/et[0],q[1]=mt[1]/et[1],q[2]=mt[2]/et[2],q}function i(q,mt){return q[0]=Math.ceil(mt[0]),q[1]=Math.ceil(mt[1]),q[2]=Math.ceil(mt[2]),q}function a(q,mt){return q[0]=Math.floor(mt[0]),q[1]=Math.floor(mt[1]),q[2]=Math.floor(mt[2]),q}function o(q,mt,et){return q[0]=Math.min(mt[0],et[0]),q[1]=Math.min(mt[1],et[1]),q[2]=Math.min(mt[2],et[2]),q}function l(q,mt,et){return q[0]=Math.max(mt[0],et[0]),q[1]=Math.max(mt[1],et[1]),q[2]=Math.max(mt[2],et[2]),q}function f(q,mt){return q[0]=Math.round(mt[0]),q[1]=Math.round(mt[1]),q[2]=Math.round(mt[2]),q}function v(q,mt,et){return q[0]=mt[0]*et,q[1]=mt[1]*et,q[2]=mt[2]*et,q}function b(q,mt,et,st){return q[0]=mt[0]+et[0]*st,q[1]=mt[1]+et[1]*st,q[2]=mt[2]+et[2]*st,q}function g(q,mt){var et=mt[0]-q[0],st=mt[1]-q[1],bt=mt[2]-q[2];return Math.hypot(et,st,bt)}function y(q,mt){var et=mt[0]-q[0],st=mt[1]-q[1],bt=mt[2]-q[2];return et*et+st*st+bt*bt}function _(q){var mt=q[0],et=q[1],st=q[2];return mt*mt+et*et+st*st}function M(q,mt){return q[0]=-mt[0],q[1]=-mt[1],q[2]=-mt[2],q}function x(q,mt){return q[0]=1/mt[0],q[1]=1/mt[1],q[2]=1/mt[2],q}function m(q,mt){var et=mt[0],st=mt[1],bt=mt[2],Y=et*et+st*st+bt*bt;return Y>0&&(Y=1/Math.sqrt(Y)),q[0]=mt[0]*Y,q[1]=mt[1]*Y,q[2]=mt[2]*Y,q}function S(q,mt){return q[0]*mt[0]+q[1]*mt[1]+q[2]*mt[2]}function P(q,mt,et){var st=mt[0],bt=mt[1],Y=mt[2],rt=et[0],ot=et[1],$=et[2];return q[0]=bt*$-Y*ot,q[1]=Y*rt-st*$,q[2]=st*ot-bt*rt,q}function A(q,mt,et,st){var bt=mt[0],Y=mt[1],rt=mt[2];return q[0]=bt+st*(et[0]-bt),q[1]=Y+st*(et[1]-Y),q[2]=rt+st*(et[2]-rt),q}function O(q,mt,et,st,bt,Y){var rt=Y*Y,ot=rt*(2*Y-3)+1,$=rt*(Y-2)+Y,Pt=rt*(Y-1),yt=rt*(3-2*Y);return q[0]=mt[0]*ot+et[0]*$+st[0]*Pt+bt[0]*yt,q[1]=mt[1]*ot+et[1]*$+st[1]*Pt+bt[1]*yt,q[2]=mt[2]*ot+et[2]*$+st[2]*Pt+bt[2]*yt,q}function R(q,mt,et,st,bt,Y){var rt=1-Y,ot=rt*rt,$=Y*Y,Pt=ot*rt,yt=3*Y*ot,Ft=3*$*rt,Qt=$*Y;return q[0]=mt[0]*Pt+et[0]*yt+st[0]*Ft+bt[0]*Qt,q[1]=mt[1]*Pt+et[1]*yt+st[1]*Ft+bt[1]*Qt,q[2]=mt[2]*Pt+et[2]*yt+st[2]*Ft+bt[2]*Qt,q}function H(q,mt){mt=mt||1;var et=U.c()*2*Math.PI,st=U.c()*2-1,bt=Math.sqrt(1-st*st)*mt;return q[0]=Math.cos(et)*bt,q[1]=Math.sin(et)*bt,q[2]=st*mt,q}function N(q,mt,et){var st=mt[0],bt=mt[1],Y=mt[2],rt=et[3]*st+et[7]*bt+et[11]*Y+et[15];return rt=rt||1,q[0]=(et[0]*st+et[4]*bt+et[8]*Y+et[12])/rt,q[1]=(et[1]*st+et[5]*bt+et[9]*Y+et[13])/rt,q[2]=(et[2]*st+et[6]*bt+et[10]*Y+et[14])/rt,q}function K(q,mt,et){var st=mt[0],bt=mt[1],Y=mt[2];return q[0]=st*et[0]+bt*et[3]+Y*et[6],q[1]=st*et[1]+bt*et[4]+Y*et[7],q[2]=st*et[2]+bt*et[5]+Y*et[8],q}function V(q,mt,et){var st=et[0],bt=et[1],Y=et[2],rt=et[3],ot=mt[0],$=mt[1],Pt=mt[2],yt=bt*Pt-Y*$,Ft=Y*ot-st*Pt,Qt=st*$-bt*ot,ne=bt*Qt-Y*Ft,Wt=Y*yt-st*Qt,$t=st*Ft-bt*yt,De=rt*2;return yt*=De,Ft*=De,Qt*=De,ne*=2,Wt*=2,$t*=2,q[0]=ot+yt+ne,q[1]=$+Ft+Wt,q[2]=Pt+Qt+$t,q}function k(q,mt,et,st){var bt=[],Y=[];return bt[0]=mt[0]-et[0],bt[1]=mt[1]-et[1],bt[2]=mt[2]-et[2],Y[0]=bt[0],Y[1]=bt[1]*Math.cos(st)-bt[2]*Math.sin(st),Y[2]=bt[1]*Math.sin(st)+bt[2]*Math.cos(st),q[0]=Y[0]+et[0],q[1]=Y[1]+et[1],q[2]=Y[2]+et[2],q}function Z(q,mt,et,st){var bt=[],Y=[];return bt[0]=mt[0]-et[0],bt[1]=mt[1]-et[1],bt[2]=mt[2]-et[2],Y[0]=bt[2]*Math.sin(st)+bt[0]*Math.cos(st),Y[1]=bt[1],Y[2]=bt[2]*Math.cos(st)-bt[0]*Math.sin(st),q[0]=Y[0]+et[0],q[1]=Y[1]+et[1],q[2]=Y[2]+et[2],q}function X(q,mt,et,st){var bt=[],Y=[];return bt[0]=mt[0]-et[0],bt[1]=mt[1]-et[1],bt[2]=mt[2]-et[2],Y[0]=bt[0]*Math.cos(st)-bt[1]*Math.sin(st),Y[1]=bt[0]*Math.sin(st)+bt[1]*Math.cos(st),Y[2]=bt[2],q[0]=Y[0]+et[0],q[1]=Y[1]+et[1],q[2]=Y[2]+et[2],q}function at(q,mt){var et=q[0],st=q[1],bt=q[2],Y=mt[0],rt=mt[1],ot=mt[2],$=Math.sqrt(et*et+st*st+bt*bt),Pt=Math.sqrt(Y*Y+rt*rt+ot*ot),yt=$*Pt,Ft=yt&&S(q,mt)/yt;return Math.acos(Math.min(Math.max(Ft,-1),1))}function pt(q){return q[0]=0,q[1]=0,q[2]=0,q}function gt(q){return"vec3("+q[0]+", "+q[1]+", "+q[2]+")"}function ft(q,mt){return q[0]===mt[0]&&q[1]===mt[1]&&q[2]===mt[2]}function Rt(q,mt){var et=q[0],st=q[1],bt=q[2],Y=mt[0],rt=mt[1],ot=mt[2];return Math.abs(et-Y)<=U.b*Math.max(1,Math.abs(et),Math.abs(Y))&&Math.abs(st-rt)<=U.b*Math.max(1,Math.abs(st),Math.abs(rt))&&Math.abs(bt-ot)<=U.b*Math.max(1,Math.abs(bt),Math.abs(ot))}var Nt=r,Dt=c,St=n,xt=g,Ot=y,it=e,At=_,z=function(){var q=E();return function(mt,et,st,bt,Y,rt){var ot,$;for(et||(et=3),st||(st=0),bt?$=Math.min(bt*et+st,mt.length):$=mt.length,ot=st;ot<$;ot+=et)q[0]=mt[ot],q[1]=mt[ot+1],q[2]=mt[ot+2],Y(q,q,rt),mt[ot]=q[0],mt[ot+1]=q[1],mt[ot+2]=q[2];return mt}}()},n2J3:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.unmanaged=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(){return function(t,u,s){var h=new E.Metadata(U.UNMANAGED_TAG,!0);T.tagParameter(t,u,s,h)}}dt.unmanaged=e},n3AX:function(Se,dt,L){var U=L("Nsbk");function E(T,e){for(;!Object.prototype.hasOwnProperty.call(T,e)&&(T=U(T),T!==null););return T}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"o+pz":function(Se,dt,L){"use strict";L.d(dt,"a",function(){return U});var U;(function(E){E[E.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",E[E.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",E[E.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",E[E.POINTS=0]="POINTS",E[E.LINES=1]="LINES",E[E.LINE_LOOP=2]="LINE_LOOP",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.TRIANGLES=4]="TRIANGLES",E[E.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",E[E.TRIANGLE_FAN=6]="TRIANGLE_FAN",E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.SRC_COLOR=768]="SRC_COLOR",E[E.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",E[E.SRC_ALPHA=770]="SRC_ALPHA",E[E.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",E[E.DST_ALPHA=772]="DST_ALPHA",E[E.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",E[E.DST_COLOR=774]="DST_COLOR",E[E.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",E[E.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",E[E.FUNC_ADD=32774]="FUNC_ADD",E[E.BLEND_EQUATION=32777]="BLEND_EQUATION",E[E.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",E[E.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",E[E.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",E[E.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",E[E.MAX_EXT=32776]="MAX_EXT",E[E.MIN_EXT=32775]="MIN_EXT",E[E.BLEND_DST_RGB=32968]="BLEND_DST_RGB",E[E.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",E[E.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",E[E.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",E[E.CONSTANT_COLOR=32769]="CONSTANT_COLOR",E[E.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",E[E.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",E[E.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",E[E.BLEND_COLOR=32773]="BLEND_COLOR",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",E[E.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",E[E.STREAM_DRAW=35040]="STREAM_DRAW",E[E.STATIC_DRAW=35044]="STATIC_DRAW",E[E.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",E[E.BUFFER_SIZE=34660]="BUFFER_SIZE",E[E.BUFFER_USAGE=34661]="BUFFER_USAGE",E[E.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",E[E.FRONT=1028]="FRONT",E[E.BACK=1029]="BACK",E[E.FRONT_AND_BACK=1032]="FRONT_AND_BACK",E[E.CULL_FACE=2884]="CULL_FACE",E[E.BLEND=3042]="BLEND",E[E.DITHER=3024]="DITHER",E[E.STENCIL_TEST=2960]="STENCIL_TEST",E[E.DEPTH_TEST=2929]="DEPTH_TEST",E[E.SCISSOR_TEST=3089]="SCISSOR_TEST",E[E.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",E[E.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",E[E.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",E[E.NO_ERROR=0]="NO_ERROR",E[E.INVALID_ENUM=1280]="INVALID_ENUM",E[E.INVALID_VALUE=1281]="INVALID_VALUE",E[E.INVALID_OPERATION=1282]="INVALID_OPERATION",E[E.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",E[E.CW=2304]="CW",E[E.CCW=2305]="CCW",E[E.LINE_WIDTH=2849]="LINE_WIDTH",E[E.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",E[E.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",E[E.CULL_FACE_MODE=2885]="CULL_FACE_MODE",E[E.FRONT_FACE=2886]="FRONT_FACE",E[E.DEPTH_RANGE=2928]="DEPTH_RANGE",E[E.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",E[E.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",E[E.DEPTH_FUNC=2932]="DEPTH_FUNC",E[E.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",E[E.STENCIL_FUNC=2962]="STENCIL_FUNC",E[E.STENCIL_FAIL=2964]="STENCIL_FAIL",E[E.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",E[E.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",E[E.STENCIL_REF=2967]="STENCIL_REF",E[E.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",E[E.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",E[E.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",E[E.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",E[E.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",E[E.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",E[E.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",E[E.VIEWPORT=2978]="VIEWPORT",E[E.SCISSOR_BOX=3088]="SCISSOR_BOX",E[E.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",E[E.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",E[E.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",E[E.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",E[E.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",E[E.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",E[E.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",E[E.RED_BITS=3410]="RED_BITS",E[E.GREEN_BITS=3411]="GREEN_BITS",E[E.BLUE_BITS=3412]="BLUE_BITS",E[E.ALPHA_BITS=3413]="ALPHA_BITS",E[E.DEPTH_BITS=3414]="DEPTH_BITS",E[E.STENCIL_BITS=3415]="STENCIL_BITS",E[E.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",E[E.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",E[E.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",E[E.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",E[E.SAMPLES=32937]="SAMPLES",E[E.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",E[E.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",E[E.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",E[E.DONT_CARE=4352]="DONT_CARE",E[E.FASTEST=4353]="FASTEST",E[E.NICEST=4354]="NICEST",E[E.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",E[E.BYTE=5120]="BYTE",E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.SHORT=5122]="SHORT",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.INT=5124]="INT",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.FLOAT=5126]="FLOAT",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.ALPHA=6406]="ALPHA",E[E.RGB=6407]="RGB",E[E.RGBA=6408]="RGBA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",E[E.VERTEX_SHADER=35633]="VERTEX_SHADER",E[E.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",E[E.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",E[E.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",E[E.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",E[E.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",E[E.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",E[E.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",E[E.SHADER_TYPE=35663]="SHADER_TYPE",E[E.DELETE_STATUS=35712]="DELETE_STATUS",E[E.LINK_STATUS=35714]="LINK_STATUS",E[E.VALIDATE_STATUS=35715]="VALIDATE_STATUS",E[E.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",E[E.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",E[E.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",E[E.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",E[E.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",E[E.NEVER=512]="NEVER",E[E.LESS=513]="LESS",E[E.EQUAL=514]="EQUAL",E[E.LEQUAL=515]="LEQUAL",E[E.GREATER=516]="GREATER",E[E.NOTEQUAL=517]="NOTEQUAL",E[E.GEQUAL=518]="GEQUAL",E[E.ALWAYS=519]="ALWAYS",E[E.KEEP=7680]="KEEP",E[E.REPLACE=7681]="REPLACE",E[E.INCR=7682]="INCR",E[E.DECR=7683]="DECR",E[E.INVERT=5386]="INVERT",E[E.INCR_WRAP=34055]="INCR_WRAP",E[E.DECR_WRAP=34056]="DECR_WRAP",E[E.VENDOR=7936]="VENDOR",E[E.RENDERER=7937]="RENDERER",E[E.VERSION=7938]="VERSION",E[E.NEAREST=9728]="NEAREST",E[E.LINEAR=9729]="LINEAR",E[E.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",E[E.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",E[E.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",E[E.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",E[E.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",E[E.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",E[E.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",E[E.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE=5890]="TEXTURE",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E[E.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",E[E.TEXTURE0=33984]="TEXTURE0",E[E.TEXTURE1=33985]="TEXTURE1",E[E.TEXTURE2=33986]="TEXTURE2",E[E.TEXTURE3=33987]="TEXTURE3",E[E.TEXTURE4=33988]="TEXTURE4",E[E.TEXTURE5=33989]="TEXTURE5",E[E.TEXTURE6=33990]="TEXTURE6",E[E.TEXTURE7=33991]="TEXTURE7",E[E.TEXTURE8=33992]="TEXTURE8",E[E.TEXTURE9=33993]="TEXTURE9",E[E.TEXTURE10=33994]="TEXTURE10",E[E.TEXTURE11=33995]="TEXTURE11",E[E.TEXTURE12=33996]="TEXTURE12",E[E.TEXTURE13=33997]="TEXTURE13",E[E.TEXTURE14=33998]="TEXTURE14",E[E.TEXTURE15=33999]="TEXTURE15",E[E.TEXTURE16=34e3]="TEXTURE16",E[E.TEXTURE17=34001]="TEXTURE17",E[E.TEXTURE18=34002]="TEXTURE18",E[E.TEXTURE19=34003]="TEXTURE19",E[E.TEXTURE20=34004]="TEXTURE20",E[E.TEXTURE21=34005]="TEXTURE21",E[E.TEXTURE22=34006]="TEXTURE22",E[E.TEXTURE23=34007]="TEXTURE23",E[E.TEXTURE24=34008]="TEXTURE24",E[E.TEXTURE25=34009]="TEXTURE25",E[E.TEXTURE26=34010]="TEXTURE26",E[E.TEXTURE27=34011]="TEXTURE27",E[E.TEXTURE28=34012]="TEXTURE28",E[E.TEXTURE29=34013]="TEXTURE29",E[E.TEXTURE30=34014]="TEXTURE30",E[E.TEXTURE31=34015]="TEXTURE31",E[E.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",E[E.REPEAT=10497]="REPEAT",E[E.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E[E.FLOAT_VEC2=35664]="FLOAT_VEC2",E[E.FLOAT_VEC3=35665]="FLOAT_VEC3",E[E.FLOAT_VEC4=35666]="FLOAT_VEC4",E[E.INT_VEC2=35667]="INT_VEC2",E[E.INT_VEC3=35668]="INT_VEC3",E[E.INT_VEC4=35669]="INT_VEC4",E[E.BOOL=35670]="BOOL",E[E.BOOL_VEC2=35671]="BOOL_VEC2",E[E.BOOL_VEC3=35672]="BOOL_VEC3",E[E.BOOL_VEC4=35673]="BOOL_VEC4",E[E.FLOAT_MAT2=35674]="FLOAT_MAT2",E[E.FLOAT_MAT3=35675]="FLOAT_MAT3",E[E.FLOAT_MAT4=35676]="FLOAT_MAT4",E[E.SAMPLER_2D=35678]="SAMPLER_2D",E[E.SAMPLER_CUBE=35680]="SAMPLER_CUBE",E[E.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",E[E.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",E[E.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",E[E.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",E[E.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",E[E.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",E[E.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",E[E.COMPILE_STATUS=35713]="COMPILE_STATUS",E[E.LOW_FLOAT=36336]="LOW_FLOAT",E[E.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",E[E.HIGH_FLOAT=36338]="HIGH_FLOAT",E[E.LOW_INT=36339]="LOW_INT",E[E.MEDIUM_INT=36340]="MEDIUM_INT",E[E.HIGH_INT=36341]="HIGH_INT",E[E.FRAMEBUFFER=36160]="FRAMEBUFFER",E[E.RENDERBUFFER=36161]="RENDERBUFFER",E[E.RGBA4=32854]="RGBA4",E[E.RGB5_A1=32855]="RGB5_A1",E[E.RGB565=36194]="RGB565",E[E.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",E[E.STENCIL_INDEX=6401]="STENCIL_INDEX",E[E.STENCIL_INDEX8=36168]="STENCIL_INDEX8",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E[E.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",E[E.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",E[E.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",E[E.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",E[E.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",E[E.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",E[E.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",E[E.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",E[E.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",E[E.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",E[E.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",E[E.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",E[E.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",E[E.NONE=0]="NONE",E[E.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",E[E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",E[E.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",E[E.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",E[E.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",E[E.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",E[E.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",E[E.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",E[E.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",E[E.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",E[E.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",E[E.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(U||(U={}))},"oCl/":function(Se,dt,L){var U=L("CH3K"),E=L("LcsW"),T=L("MvSz"),e=L("0ycA"),t=Object.getOwnPropertySymbols,u=t?function(s){for(var h=[];s;)U(h,T(s)),s=E(s);return h}:e;Se.exports=u},oIFs:function(Se,dt,L){},oShl:function(Se,dt,L){var U=L("Nsbk"),E=L("SksO"),T=L("xfeJ"),e=L("sXyB");function t(u){var s=typeof Map=="function"?new Map:void 0;return Se.exports=t=function(r){if(r===null||!T(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s!="undefined"){if(s.has(r))return s.get(r);s.set(r,c)}function c(){return e(r,arguments,U(this).constructor)}return c.prototype=Object.create(r.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),E(c,r)},Se.exports.default=Se.exports,Se.exports.__esModule=!0,t(u)}Se.exports=t,Se.exports.default=Se.exports,Se.exports.__esModule=!0},oaX6:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.targetName=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(t){return function(u,s,h){var r=new E.Metadata(U.NAME_TAG,t);T.tagParameter(u,s,h,r)}}dt.targetName=e},"otv/":function(Se,dt,L){var U=L("nmnc"),E=U?U.prototype:void 0,T=E?E.valueOf:void 0;function e(t){return T?Object(T.call(t)):{}}Se.exports=e},"oy+k":function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Context=void 0;var U=L("d9O0"),E=function(){function T(e){this.id=U.id(),this.container=e}return T.prototype.addPlan=function(e){this.plan=e},T.prototype.setCurrentRequest=function(e){this.currentRequest=e},T}();dt.Context=E},pFRH:function(Se,dt,L){var U=L("cvCv"),E=L("O0oS"),T=L("zZ0H"),e=E?function(t,u){return E(t,"toString",{configurable:!0,enumerable:!1,value:U(u),writable:!0})}:T;Se.exports=e},q4HE:function(Se,dt){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",u="["+L+"]",s="["+e+"]",h="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+h+")",c="[^"+L+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",l="["+t+"]?",f="(?:"+a+"(?:"+[c,n,i].join("|")+")"+l+o+")*",v=l+o+f,b="(?:"+[c+s+"?",s,n,i,u].join("|")+")",g=RegExp(h+"(?="+h+")|"+b+v,"g");function y(_){for(var M=g.lastIndex=0;g.test(_);)++M;return M}Se.exports=y},qK8v:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.isStackOverflowExeption=void 0;var U=L("MON2");function E(T){return T instanceof RangeError||T.message===U.STACK_OVERFLOW}dt.isStackOverflowExeption=E},qRkn:function(Se,dt,L){var U=L("3cYt"),E={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},T=U(E);Se.exports=T},qd8s:function(Se,dt,L){(function(U,E){var T=200,e="__lodash_hash_undefined__",t=800,u=16,s=9007199254740991,h="[object Arguments]",r="[object Array]",c="[object AsyncFunction]",n="[object Boolean]",i="[object Date]",a="[object Error]",o="[object Function]",l="[object GeneratorFunction]",f="[object Map]",v="[object Number]",b="[object Null]",g="[object Object]",y="[object Proxy]",_="[object RegExp]",M="[object Set]",x="[object String]",m="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",R="[object Float64Array]",H="[object Int8Array]",N="[object Int16Array]",K="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",Z="[object Uint16Array]",X="[object Uint32Array]",at=/[\\^$.*+?()[\]{}|]/g,pt=/^\[object .+?Constructor\]$/,gt=/^(?:0|[1-9]\d*)$/,ft={};ft[O]=ft[R]=ft[H]=ft[N]=ft[K]=ft[V]=ft[k]=ft[Z]=ft[X]=!0,ft[h]=ft[r]=ft[P]=ft[n]=ft[A]=ft[i]=ft[a]=ft[o]=ft[f]=ft[v]=ft[g]=ft[_]=ft[M]=ft[x]=ft[S]=!1;var Rt=typeof U=="object"&&U&&U.Object===Object&&U,Nt=typeof self=="object"&&self&&self.Object===Object&&self,Dt=Rt||Nt||Function("return this")(),St=dt&&!dt.nodeType&&dt,xt=St&&typeof E=="object"&&E&&!E.nodeType&&E,Ot=xt&&xt.exports===St,it=Ot&&Rt.process,At=function(){try{var mn=xt&&xt.require&&xt.require("util").types;return mn||it&&it.binding&&it.binding("util")}catch(cr){}}(),z=At&&At.isTypedArray;function q(mn,cr,Wr){switch(Wr.length){case 0:return mn.call(cr);case 1:return mn.call(cr,Wr[0]);case 2:return mn.call(cr,Wr[0],Wr[1]);case 3:return mn.call(cr,Wr[0],Wr[1],Wr[2])}return mn.apply(cr,Wr)}function mt(mn,cr){for(var Wr=-1,Di=Array(mn);++Wr<mn;)Di[Wr]=cr(Wr);return Di}function et(mn){return function(cr){return mn(cr)}}function st(mn,cr){return mn==null?void 0:mn[cr]}function bt(mn,cr){return function(Wr){return mn(cr(Wr))}}var Y=Array.prototype,rt=Function.prototype,ot=Object.prototype,$=Dt["__core-js_shared__"],Pt=rt.toString,yt=ot.hasOwnProperty,Ft=function(){var mn=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||"");return mn?"Symbol(src)_1."+mn:""}(),Qt=ot.toString,ne=Pt.call(Object),Wt=RegExp("^"+Pt.call(yt).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=Ot?Dt.Buffer:void 0,De=Dt.Symbol,Je=Dt.Uint8Array,Qe=$t?$t.allocUnsafe:void 0,de=bt(Object.getPrototypeOf,Object),ue=Object.create,Ne=ot.propertyIsEnumerable,cn=Y.splice,Fn=De?De.toStringTag:void 0,wn=function(){try{var mn=Js(Object,"defineProperty");return mn({},"",{}),mn}catch(cr){}}(),en=$t?$t.isBuffer:void 0,tn=Math.max,xn=Date.now,Bn=Js(Dt,"Map"),vr=Js(Object,"create"),li=function(){function mn(){}return function(cr){if(!ka(cr))return{};if(ue)return ue(cr);mn.prototype=cr;var Wr=new mn;return mn.prototype=void 0,Wr}}();function Me(mn){var cr=-1,Wr=mn==null?0:mn.length;for(this.clear();++cr<Wr;){var Di=mn[cr];this.set(Di[0],Di[1])}}function Pe(){this.__data__=vr?vr(null):{},this.size=0}function te(mn){var cr=this.has(mn)&&delete this.__data__[mn];return this.size-=cr?1:0,cr}function ge(mn){var cr=this.__data__;if(vr){var Wr=cr[mn];return Wr===e?void 0:Wr}return yt.call(cr,mn)?cr[mn]:void 0}function Ht(mn){var cr=this.__data__;return vr?cr[mn]!==void 0:yt.call(cr,mn)}function re(mn,cr){var Wr=this.__data__;return this.size+=this.has(mn)?0:1,Wr[mn]=vr&&cr===void 0?e:cr,this}Me.prototype.clear=Pe,Me.prototype.delete=te,Me.prototype.get=ge,Me.prototype.has=Ht,Me.prototype.set=re;function Te(mn){var cr=-1,Wr=mn==null?0:mn.length;for(this.clear();++cr<Wr;){var Di=mn[cr];this.set(Di[0],Di[1])}}function ae(){this.__data__=[],this.size=0}function xe(mn){var cr=this.__data__,Wr=nr(cr,mn);if(Wr<0)return!1;var Di=cr.length-1;return Wr==Di?cr.pop():cn.call(cr,Wr,1),--this.size,!0}function qe(mn){var cr=this.__data__,Wr=nr(cr,mn);return Wr<0?void 0:cr[Wr][1]}function zn(mn){return nr(this.__data__,mn)>-1}function ar(mn,cr){var Wr=this.__data__,Di=nr(Wr,mn);return Di<0?(++this.size,Wr.push([mn,cr])):Wr[Di][1]=cr,this}Te.prototype.clear=ae,Te.prototype.delete=xe,Te.prototype.get=qe,Te.prototype.has=zn,Te.prototype.set=ar;function _n(mn){var cr=-1,Wr=mn==null?0:mn.length;for(this.clear();++cr<Wr;){var Di=mn[cr];this.set(Di[0],Di[1])}}function Cn(){this.size=0,this.__data__={hash:new Me,map:new(Bn||Te),string:new Me}}function Or(mn){var cr=Ro(this,mn).delete(mn);return this.size-=cr?1:0,cr}function Ar(mn){return Ro(this,mn).get(mn)}function hn(mn){return Ro(this,mn).has(mn)}function Pr(mn,cr){var Wr=Ro(this,mn),Di=Wr.size;return Wr.set(mn,cr),this.size+=Wr.size==Di?0:1,this}_n.prototype.clear=Cn,_n.prototype.delete=Or,_n.prototype.get=Ar,_n.prototype.has=hn,_n.prototype.set=Pr;function yr(mn){var cr=this.__data__=new Te(mn);this.size=cr.size}function Re(){this.__data__=new Te,this.size=0}function We(mn){var cr=this.__data__,Wr=cr.delete(mn);return this.size=cr.size,Wr}function Ye(mn){return this.__data__.get(mn)}function dn(mn){return this.__data__.has(mn)}function En(mn,cr){var Wr=this.__data__;if(Wr instanceof Te){var Di=Wr.__data__;if(!Bn||Di.length<T-1)return Di.push([mn,cr]),this.size=++Wr.size,this;Wr=this.__data__=new _n(Di)}return Wr.set(mn,cr),this.size=Wr.size,this}yr.prototype.clear=Re,yr.prototype.delete=We,yr.prototype.get=Ye,yr.prototype.has=dn,yr.prototype.set=En;function Dn(mn,cr){var Wr=za(mn),Di=!Wr&&Ji(mn),Ua=!Wr&&!Di&&Ia(mn),yo=!Wr&&!Di&&!Ua&&Do(mn),lo=Wr||Di||Ua||yo,La=lo?mt(mn.length,String):[],Va=La.length;for(var ts in mn)(cr||yt.call(mn,ts))&&!(lo&&(ts=="length"||Ua&&(ts=="offset"||ts=="parent")||yo&&(ts=="buffer"||ts=="byteLength"||ts=="byteOffset")||Rs(ts,Va)))&&La.push(ts);return La}function Sn(mn,cr,Wr){(Wr!==void 0&&!ji(mn[cr],Wr)||Wr===void 0&&!(cr in mn))&&Gn(mn,cr,Wr)}function Nn(mn,cr,Wr){var Di=mn[cr];(!(yt.call(mn,cr)&&ji(Di,Wr))||Wr===void 0&&!(cr in mn))&&Gn(mn,cr,Wr)}function nr(mn,cr){for(var Wr=mn.length;Wr--;)if(ji(mn[Wr][0],cr))return Wr;return-1}function Gn(mn,cr,Wr){cr=="__proto__"&&wn?wn(mn,cr,{configurable:!0,enumerable:!0,value:Wr,writable:!0}):mn[cr]=Wr}var Tn=Bo();function Cr(mn){return mn==null?mn===void 0?m:b:Fn&&Fn in Object(mn)?Ko(mn):Vn(mn)}function pr(mn){return vo(mn)&&Cr(mn)==h}function zr(mn){if(!ka(mn)||Zt(mn))return!1;var cr=io(mn)?Wt:pt;return cr.test(Si(mn))}function Ei(mn){return vo(mn)&&uo(mn.length)&&!!ft[Cr(mn)]}function Oa(mn){if(!ka(mn))return sn(mn);var cr=be(mn),Wr=[];for(var Di in mn)Di=="constructor"&&(cr||!yt.call(mn,Di))||Wr.push(Di);return Wr}function wa(mn,cr,Wr,Di,Ua){mn!==cr&&Tn(cr,function(yo,lo){if(Ua||(Ua=new yr),ka(yo))Ja(mn,cr,lo,Wr,wa,Di,Ua);else{var La=Di?Di(kn(mn,lo),yo,lo+"",mn,cr,Ua):void 0;La===void 0&&(La=yo),Sn(mn,lo,La)}},mo)}function Ja(mn,cr,Wr,Di,Ua,yo,lo){var La=kn(mn,Wr),Va=kn(cr,Wr),ts=lo.get(Va);if(ts){Sn(mn,Wr,ts);return}var ls=yo?yo(La,Va,Wr+"",mn,cr,lo):void 0,Ki=ls===void 0;if(Ki){var _u=za(Va),Fo=!_u&&Ia(Va),hs=!_u&&!Fo&&Do(Va);ls=Va,_u||Fo||hs?za(La)?ls=La:so(La)?ls=Mo(La):Fo?(Ki=!1,ls=ro(Va,!0)):hs?(Ki=!1,ls=$a(Va,!0)):ls=[]:Vo(Va)||Ji(Va)?(ls=La,Ji(La)?ls=fs(La):(!ka(La)||io(La))&&(ls=nu(Va))):Ki=!1}Ki&&(lo.set(Va,ls),Ua(ls,Va,Di,yo,lo),lo.delete(Va)),Sn(mn,Wr,ls)}function wo(mn,cr){return Xr(er(mn,cr,Xo),mn+"")}var ha=wn?function(mn,cr){return wn(mn,"toString",{configurable:!0,enumerable:!1,value:us(cr),writable:!0})}:Xo;function ro(mn,cr){if(cr)return mn.slice();var Wr=mn.length,Di=Qe?Qe(Wr):new mn.constructor(Wr);return mn.copy(Di),Di}function ko(mn){var cr=new mn.constructor(mn.byteLength);return new Je(cr).set(new Je(mn)),cr}function $a(mn,cr){var Wr=cr?ko(mn.buffer):mn.buffer;return new mn.constructor(Wr,mn.byteOffset,mn.length)}function Mo(mn,cr){var Wr=-1,Di=mn.length;for(cr||(cr=Array(Di));++Wr<Di;)cr[Wr]=mn[Wr];return cr}function ss(mn,cr,Wr,Di){var Ua=!Wr;Wr||(Wr={});for(var yo=-1,lo=cr.length;++yo<lo;){var La=cr[yo],Va=Di?Di(Wr[La],mn[La],La,Wr,mn):void 0;Va===void 0&&(Va=mn[La]),Ua?Gn(Wr,La,Va):Nn(Wr,La,Va)}return Wr}function Pa(mn){return wo(function(cr,Wr){var Di=-1,Ua=Wr.length,yo=Ua>1?Wr[Ua-1]:void 0,lo=Ua>2?Wr[2]:void 0;for(yo=mn.length>3&&typeof yo=="function"?(Ua--,yo):void 0,lo&&je(Wr[0],Wr[1],lo)&&(yo=Ua<3?void 0:yo,Ua=1),cr=Object(cr);++Di<Ua;){var La=Wr[Di];La&&mn(cr,La,Di,yo)}return cr})}function Bo(mn){return function(cr,Wr,Di){for(var Ua=-1,yo=Object(cr),lo=Di(cr),La=lo.length;La--;){var Va=lo[mn?La:++Ua];if(Wr(yo[Va],Va,yo)===!1)break}return cr}}function Ro(mn,cr){var Wr=mn.__data__;return oe(cr)?Wr[typeof cr=="string"?"string":"hash"]:Wr.map}function Js(mn,cr){var Wr=st(mn,cr);return zr(Wr)?Wr:void 0}function Ko(mn){var cr=yt.call(mn,Fn),Wr=mn[Fn];try{mn[Fn]=void 0;var Di=!0}catch(yo){}var Ua=Qt.call(mn);return Di&&(cr?mn[Fn]=Wr:delete mn[Fn]),Ua}function nu(mn){return typeof mn.constructor=="function"&&!be(mn)?li(de(mn)):{}}function Rs(mn,cr){var Wr=typeof mn;return cr=cr==null?s:cr,!!cr&&(Wr=="number"||Wr!="symbol"&&gt.test(mn))&&mn>-1&&mn%1==0&&mn<cr}function je(mn,cr,Wr){if(!ka(Wr))return!1;var Di=typeof cr;return(Di=="number"?va(Wr)&&Rs(cr,Wr.length):Di=="string"&&cr in Wr)?ji(Wr[cr],mn):!1}function oe(mn){var cr=typeof mn;return cr=="string"||cr=="number"||cr=="symbol"||cr=="boolean"?mn!=="__proto__":mn===null}function Zt(mn){return!!Ft&&Ft in mn}function be(mn){var cr=mn&&mn.constructor,Wr=typeof cr=="function"&&cr.prototype||ot;return mn===Wr}function sn(mn){var cr=[];if(mn!=null)for(var Wr in Object(mn))cr.push(Wr);return cr}function Vn(mn){return Qt.call(mn)}function er(mn,cr,Wr){return cr=tn(cr===void 0?mn.length-1:cr,0),function(){for(var Di=arguments,Ua=-1,yo=tn(Di.length-cr,0),lo=Array(yo);++Ua<yo;)lo[Ua]=Di[cr+Ua];Ua=-1;for(var La=Array(cr+1);++Ua<cr;)La[Ua]=Di[Ua];return La[cr]=Wr(lo),q(mn,this,La)}}function kn(mn,cr){if(!(cr==="constructor"&&typeof mn[cr]=="function")&&cr!="__proto__")return mn[cr]}var Xr=vi(ha);function vi(mn){var cr=0,Wr=0;return function(){var Di=xn(),Ua=u-(Di-Wr);if(Wr=Di,Ua>0){if(++cr>=t)return arguments[0]}else cr=0;return mn.apply(void 0,arguments)}}function Si(mn){if(mn!=null){try{return Pt.call(mn)}catch(cr){}try{return mn+""}catch(cr){}}return""}function ji(mn,cr){return mn===cr||mn!==mn&&cr!==cr}var Ji=pr(function(){return arguments}())?pr:function(mn){return vo(mn)&&yt.call(mn,"callee")&&!Ne.call(mn,"callee")},za=Array.isArray;function va(mn){return mn!=null&&uo(mn.length)&&!io(mn)}function so(mn){return vo(mn)&&va(mn)}var Ia=en||Ta;function io(mn){if(!ka(mn))return!1;var cr=Cr(mn);return cr==o||cr==l||cr==c||cr==y}function uo(mn){return typeof mn=="number"&&mn>-1&&mn%1==0&&mn<=s}function ka(mn){var cr=typeof mn;return mn!=null&&(cr=="object"||cr=="function")}function vo(mn){return mn!=null&&typeof mn=="object"}function Vo(mn){if(!vo(mn)||Cr(mn)!=g)return!1;var cr=de(mn);if(cr===null)return!0;var Wr=yt.call(cr,"constructor")&&cr.constructor;return typeof Wr=="function"&&Wr instanceof Wr&&Pt.call(Wr)==ne}var Do=z?et(z):Ei;function fs(mn){return ss(mn,mo(mn))}function mo(mn){return va(mn)?Dn(mn,!0):Oa(mn)}var Ga=Pa(function(mn,cr,Wr,Di){wa(mn,cr,Wr,Di)});function us(mn){return function(){return mn}}function Xo(mn){return mn}function Ta(){return!1}E.exports=Ga}).call(this,L("IyRk"),L("hOG+")(Se))},quyA:function(Se,dt){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",u="\\u200d",s=RegExp("["+u+L+e+t+"]");function h(r){return s.test(r)}Se.exports=h},qxNg:function(Se,dt,L){"use strict";L.d(dt,"a",function(){return s});var U=L("lSNA"),E=L.n(U),T=L("mpbz"),e=L.n(T);function t(r,c){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);c&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,i)}return n}function u(r){for(var c=1;c<arguments.length;c++){var n=arguments[c]!=null?arguments[c]:{};c%2?t(Object(n),!0).forEach(function(i){E()(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function s(r,c){var n=c.radius,i=n===void 0?40:n,a=c.maxZoom,o=a===void 0?18:a,l=c.minZoom,f=l===void 0?0:l,v=c.zoom,b=v===void 0?2:v;if(r.pointIndex){var g=r.pointIndex.getClusters(r.extent,Math.floor(b));return r.dataArray=h(g),r}var y=new e.a({radius:i,minZoom:f,maxZoom:o}),_={type:"FeatureCollection",features:[]};return _.features=r.dataArray.map(function(M){return{type:"Feature",geometry:{type:"Point",coordinates:M.coordinates},properties:u({},M)}}),y.load(_.features),y}function h(r){return r.map(function(c,n){return u({coordinates:c.geometry.coordinates,_id:n+1},c.properties)})}},riiI:function(Se,dt){},rlAn:function(Se,dt,L){"use strict";var U=L("ISu3"),E=L("gMG2"),T=L("5gLl"),e=L("BpBL"),t=L("5zYK"),u=L("lJbI"),s=L("l94r"),h=L("qxNg"),r=L("Y8BV"),c=L("VIsB"),n=L("+VLl"),i=L("aF1E"),a=L("fdMe");L.d(dt,"getTransform",function(){return U.b}),L.d(dt,"getParser",function(){return U.a});var o=L("U1ZX"),l=L.n(o);dt.default=s.a,Object(U.c)("geojson",T.a),Object(U.c)("image",e.a),Object(U.c)("csv",E.a),Object(U.c)("json",t.a),Object(U.c)("raster",u.a),Object(U.d)("cluster",h.a),Object(U.d)("filter",r.a),Object(U.d)("join",i.a),Object(U.d)("map",a.a),Object(U.d)("grid",c.a),Object(U.d)("hexagon",n.a)},rxlC:function(Se,dt,L){"use strict";Se.exports=E,Se.exports.default=E;var U=1e20;function E(s,h,r,c,n,i){this.fontSize=s||24,this.buffer=h===void 0?3:h,this.cutoff=c||.25,this.fontFamily=n||"sans-serif",this.fontWeight=i||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,o=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function T(s,h,r,c,n,i,a){i.fill(U,0,h*r),a.fill(0,0,h*r);for(var o=(h-c)/2,l=0;l<n;l++)for(var f=0;f<c;f++){var v=(l+o)*h+f+o,b=s.data[4*(l*c+f)+3]/255;if(b===1)i[v]=0,a[v]=U;else if(b===0)i[v]=U,a[v]=0;else{var g=Math.max(0,.5-b),y=Math.max(0,b-.5);i[v]=g*g,a[v]=y*y}}}function e(s,h,r,c,n,i,a){for(var o=0;o<h*r;o++){var l=Math.sqrt(c[o])-Math.sqrt(n[o]);s[o]=Math.round(255-255*(l/i+a))}}E.prototype._draw=function(s,h){var r=this.ctx.measureText(s),c=r.width,n=2*this.buffer,i,a,o,l,f,v,b,g;h&&this.useMetrics?(f=Math.floor(r.actualBoundingBoxAscent),g=this.buffer+Math.ceil(r.actualBoundingBoxAscent),v=this.buffer,b=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-v,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),i=a+n,o=l+n,this.ctx.textBaseline="alphabetic"):(i=a=this.size,o=l=this.size,f=19*this.fontSize/24,v=b=0,g=this.middle,this.ctx.textBaseline="middle");var y;a&&l&&(this.ctx.clearRect(b,v,a,l),this.ctx.fillText(s,this.buffer,g),y=this.ctx.getImageData(b,v,a,l));var _=new Uint8ClampedArray(i*o);return T(y,i,o,a,l,this.gridOuter,this.gridInner),t(this.gridOuter,i,o,this.f,this.v,this.z),t(this.gridInner,i,o,this.f,this.v,this.z),e(_,i,o,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:_,metrics:{width:a,height:l,sdfWidth:i,sdfHeight:o,top:f,left:0,advance:c}}},E.prototype.draw=function(s){return this._draw(s,!1).data},E.prototype.drawWithMetrics=function(s){return this._draw(s,!0)};function t(s,h,r,c,n,i){for(var a=0;a<h;a++)u(s,a,h,r,c,n,i);for(var o=0;o<r;o++)u(s,o*h,1,h,c,n,i)}function u(s,h,r,c,n,i,a){var o,l,f,v;for(i[0]=0,a[0]=-U,a[1]=U,o=0;o<c;o++)n[o]=s[h+o*r];for(o=1,l=0,f=0;o<c;o++){do v=i[l],f=(n[o]-n[v]+o*o-v*v)/(o-v)/2;while(f<=a[l]&&--l>-1);l++,i[l]=o,a[l]=f,a[l+1]=U}for(o=0,l=0;o<c;o++){for(;a[l+1]<o;)l++;v=i[l],s[h+o*r]=n[v]+(o-v)*(o-v)}}},sGsY:function(Se,dt,L){"use strict";var U=L("rePB"),E=L("wx14"),T=L("q1tI"),e=L("TSYQ"),t=L.n(e),u=L("H84U"),s=L("/ezw"),h=L("B6l+"),r=L.n(h),c=function(K){var V=K.value,k=K.formatter,Z=K.precision,X=K.decimalSeparator,at=K.groupSeparator,pt=at===void 0?"":at,gt=K.prefixCls,ft;if(typeof k=="function")ft=k(V);else{var Rt=String(V),Nt=Rt.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Nt||Rt==="-")ft=Rt;else{var Dt=Nt[1],St=Nt[2]||"0",xt=Nt[4]||"";St=St.replace(/\B(?=(\d{3})+(?!\d))/g,pt),typeof Z=="number"&&(xt=r()(xt,Z,"0").slice(0,Z)),xt&&(xt="".concat(X).concat(xt)),ft=[T.createElement("span",{key:"int",className:"".concat(gt,"-content-value-int")},Dt,St),xt&&T.createElement("span",{key:"decimal",className:"".concat(gt,"-content-value-decimal")},xt)]}}return T.createElement("span",{className:"".concat(gt,"-content-value")},ft)},n=c,i=function(K){var V=K.prefixCls,k=K.className,Z=K.style,X=K.valueStyle,at=K.value,pt=at===void 0?0:at,gt=K.title,ft=K.valueRender,Rt=K.prefix,Nt=K.suffix,Dt=K.loading,St=K.direction,xt=K.onMouseEnter,Ot=K.onMouseLeave,it=T.createElement(n,Object(E.a)({},K,{value:pt})),At=t()(V,Object(U.a)({},"".concat(V,"-rtl"),St==="rtl"),k);return T.createElement("div",{className:At,style:Z,onMouseEnter:xt,onMouseLeave:Ot},gt&&T.createElement("div",{className:"".concat(V,"-title")},gt),T.createElement(s.a,{paragraph:!1,loading:Dt},T.createElement("div",{style:X,className:"".concat(V,"-content")},Rt&&T.createElement("span",{className:"".concat(V,"-content-prefix")},Rt),ft?ft(it):it,Nt&&T.createElement("span",{className:"".concat(V,"-content-suffix")},Nt))))};i.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var a=Object(u.c)({prefixCls:"statistic"})(i),o=a,l=L("1OyB"),f=L("vuIU"),v=L("Ji7U"),b=L("LK+K"),g=L("ODXe"),y=L("QQZ/"),_=L.n(y),M=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function x(N,K){var V=N,k=/\[[^\]]*]/g,Z=(K.match(k)||[]).map(function(gt){return gt.slice(1,-1)}),X=K.replace(k,"[]"),at=M.reduce(function(gt,ft){var Rt=Object(g.a)(ft,2),Nt=Rt[0],Dt=Rt[1];if(gt.indexOf(Nt)!==-1){var St=Math.floor(V/Dt);return V-=St*Dt,gt.replace(new RegExp("".concat(Nt,"+"),"g"),function(xt){var Ot=xt.length;return _()(St.toString(),Ot,"0")})}return gt},X),pt=0;return at.replace(k,function(){var gt=Z[pt];return pt+=1,gt})}function m(N,K){var V=K.format,k=V===void 0?"":V,Z=new Date(N).getTime(),X=Date.now(),at=Math.max(Z-X,0);return x(at,k)}var S=L("0n0R"),P=1e3/30;function A(N){return new Date(N).getTime()}var O=function(N){Object(v.a)(V,N);var K=Object(b.a)(V);function V(){var k;return Object(l.a)(this,V),k=K.apply(this,arguments),k.syncTimer=function(){var Z=k.props.value,X=A(Z);X>=Date.now()?k.startTimer():k.stopTimer()},k.startTimer=function(){if(!k.countdownId){var Z=k.props,X=Z.onChange,at=Z.value,pt=A(at);k.countdownId=window.setInterval(function(){k.forceUpdate(),X&&pt>Date.now()&&X(pt-Date.now())},P)}},k.stopTimer=function(){var Z=k.props,X=Z.onFinish,at=Z.value;if(k.countdownId){clearInterval(k.countdownId),k.countdownId=void 0;var pt=A(at);X&&pt<Date.now()&&X()}},k.formatCountdown=function(Z,X){var at=k.props.format;return m(Z,Object(E.a)(Object(E.a)({},X),{format:at}))},k.valueRender=function(Z){return Object(S.a)(Z,{title:void 0})},k}return Object(f.a)(V,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return T.createElement(o,Object(E.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),V}(T.Component);O.defaultProps={format:"HH:mm:ss"};var R=O;o.Countdown=R;var H=dt.a=o},sKgW:function(Se,dt){var L=9007199254740991,U=Math.floor;function E(T,e){var t="";if(!T||e<1||e>L)return t;do e%2&&(t+=T),e=U(e/2),e&&(T+=T);while(e);return t}Se.exports=E},sXyB:function(Se,dt,L){var U=L("SksO"),E=L("b48C");function T(e,t,u){return E()?(Se.exports=T=Reflect.construct,Se.exports.default=Se.exports,Se.exports.__esModule=!0):(Se.exports=T=function(h,r,c){var n=[null];n.push.apply(n,r);var i=Function.bind.apply(h,n),a=new i;return c&&U(a,c.prototype),a},Se.exports.default=Se.exports,Se.exports.__esModule=!0),T.apply(null,arguments)}Se.exports=T,Se.exports.default=Se.exports,Se.exports.__esModule=!0},sgoq:function(Se,dt,L){var U=L("asDA"),E=L("TKrE"),T=L("6nK8"),e="['\u2019]",t=RegExp(e,"g");function u(s){return function(h){return U(T(E(h).replace(t,"")),s,"")}}Se.exports=u},sxDa:function(Se,dt,L){"use strict";L.d(dt,"e",function(){return Ho}),L.d(dt,"f",function(){return pn}),L.d(dt,"d",function(){return Au}),L.d(dt,"a",function(){return Ro}),L.d(dt,"c",function(){return Ki}),L.d(dt,"g",function(){return Xt}),L.d(dt,"b",function(){return cr});var U=L("h1nZ"),E=L("lwsE"),T=L.n(E),e=L("W8MJ"),t=L.n(e),u=L("7W2i"),s=L.n(u),h=L("a1gu"),r=L.n(h),c=L("Nsbk"),n=L.n(c),i=L("QILm"),a=L.n(i),o=L("lSNA"),l=L.n(o),f=L("yG8O"),v=L.n(f),b=L("PJYZ"),g=L.n(b),y=L("U+yc"),_=L.n(y),M=L("1ABj"),x=L("GoyQ"),m=L.n(x),S=L("lSCD"),P=L.n(S),A=L("xp6e"),O=L("Hel2"),R=L("uhBA"),H=L("4U9+"),N=L.n(H),K=L("4cb6"),V,k,Z,X,at,pt;function gt(tt){return tt.map(function(Tt){return typeof Tt=="string"&&(Tt=[Tt,{}]),Tt})}var ft=(V=Object(K.injectable)(),k=Object(K.inject)(U.TYPES.IGlobalConfigService),V(Z=(X=(pt=function(){function tt(){T()(this,tt),v()(this,"configService",at,this),this.enabled=void 0}return t()(tt,[{key:"apply",value:function(Mt,ht){var _t=this,Lt=ht.rendererService,Gt=ht.postProcessingPassFactory,le=ht.normalPassFactory;Mt.hooks.init.tap("MultiPassRendererPlugin",function(){var we=Mt.getLayerConfig(),Xe=we.enableMultiPassRenderer,yn=we.passes,Pn=yn===void 0?[]:yn;_t.enabled=!!Xe&&Mt.getLayerConfig().enableMultiPassRenderer!==!1,_t.enabled&&(Mt.multiPassRenderer=_t.createMultiPassRenderer(Mt,Pn,Gt,le),Mt.multiPassRenderer.setRenderFlag(!0))}),Mt.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){})}},{key:"createMultiPassRenderer",value:function(Mt,ht,_t,Lt){var Gt=Mt.multiPassRenderer,le=Mt.getLayerConfig(),we=le.enablePicking,Xe=le.enableTAA;return we&&Gt.add(Lt("pixelPicking")),Gt}}]),tt}(),pt),at=_()(X.prototype,"configService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X))||Z),Rt,Nt=(Rt={},l()(Rt,U.BlendType.additive,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE,srcAlpha:1,dstAlpha:1}}),l()(Rt,U.BlendType.none,{enable:!1}),l()(Rt,U.BlendType.normal,{enable:!0,func:{srcRGB:U.gl.SRC_ALPHA,dstRGB:U.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),l()(Rt,U.BlendType.subtractive,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE,srcAlpha:U.gl.ZERO,dstAlpha:U.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:U.gl.FUNC_SUBTRACT,alpha:U.gl.FUNC_SUBTRACT}}),l()(Rt,U.BlendType.max,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE},equation:{rgb:U.gl.MAX_EXT}}),l()(Rt,U.BlendType.min,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE},equation:{rgb:U.gl.MIN_EXT}}),Rt),Dt={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}},St,xt,Ot,it,At,z,q,mt;function et(tt,Tt){var Mt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(Mt=st(tt))||Tt&&tt&&typeof tt.length=="number"){Mt&&(tt=Mt);var ht=0,_t=function(){};return{s:_t,n:function(){return ht>=tt.length?{done:!0}:{done:!1,value:tt[ht++]}},e:function(Xe){throw Xe},f:_t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt=!0,Gt=!1,le;return{s:function(){Mt=tt[Symbol.iterator]()},n:function(){var Xe=Mt.next();return Lt=Xe.done,Xe},e:function(Xe){Gt=!0,le=Xe},f:function(){try{!Lt&&Mt.return!=null&&Mt.return()}finally{if(Gt)throw le}}}}function st(tt,Tt){if(!!tt){if(typeof tt=="string")return bt(tt,Tt);var Mt=Object.prototype.toString.call(tt).slice(8,-1);if(Mt==="Object"&&tt.constructor&&(Mt=tt.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(tt);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return bt(tt,Tt)}}function bt(tt,Tt){(Tt==null||Tt>tt.length)&&(Tt=tt.length);for(var Mt=0,ht=new Array(Tt);Mt<Tt;Mt++)ht[Mt]=tt[Mt];return ht}function Y(tt,Tt){var Mt=Object.keys(tt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(tt);Tt&&(ht=ht.filter(function(_t){return Object.getOwnPropertyDescriptor(tt,_t).enumerable})),Mt.push.apply(Mt,ht)}return Mt}function rt(tt){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?Y(Object(Mt),!0).forEach(function(ht){l()(tt,ht,Mt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Mt)):Y(Object(Mt)).forEach(function(ht){Object.defineProperty(tt,ht,Object.getOwnPropertyDescriptor(Mt,ht))})}return tt}function ot(tt){var Tt=$();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function $(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Pt=0,yt=(St=Object(U.lazyInject)(U.TYPES.ILogService),xt=Object(U.lazyInject)(U.TYPES.IGlobalConfigService),Ot=Object(U.lazyInject)(U.TYPES.IShaderModuleService),it=(mt=function(tt){s()(Mt,tt);var Tt=ot(Mt);function Mt(){var ht,_t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return T()(this,Mt),ht=Tt.call(this),ht.id="".concat(Pt++),ht.name="".concat(Pt),ht.type=void 0,ht.visible=!0,ht.zIndex=0,ht.minZoom=void 0,ht.maxZoom=void 0,ht.inited=!1,ht.layerModelNeedUpdate=!1,ht.pickedFeatureID=null,ht.selectedFeatureID=null,ht.styleNeedUpdate=!1,ht.dataState={dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1},ht.hooks={init:new A.b,afterInit:new A.b,beforeRender:new A.b,beforeRenderData:new A.d,afterRender:new A.c,beforePickingEncode:new A.c,afterPickingEncode:new A.c,beforeHighlight:new A.c(["pickedColor"]),afterHighlight:new A.c,beforeSelect:new A.c(["pickedColor"]),afterSelect:new A.c,beforeDestroy:new A.c,afterDestroy:new A.c},ht.models=[],ht.multiPassRenderer=void 0,ht.plugins=void 0,ht.sourceOption=void 0,ht.layerModel=void 0,v()(ht,"logger",At,g()(ht)),v()(ht,"configService",z,g()(ht)),v()(ht,"shaderModuleService",q,g()(ht)),ht.cameraService=void 0,ht.coordinateService=void 0,ht.iconService=void 0,ht.fontService=void 0,ht.pickingService=void 0,ht.rendererService=void 0,ht.layerService=void 0,ht.interactionService=void 0,ht.mapService=void 0,ht.styleAttributeService=void 0,ht.layerSource=void 0,ht.postProcessingPassFactory=void 0,ht.normalPassFactory=void 0,ht.animateOptions={enable:!1},ht.container=void 0,ht.encodedData=void 0,ht.configSchema=void 0,ht.currentPickId=null,ht.rawConfig=void 0,ht.needUpdateConfig=void 0,ht.pendingStyleAttributes=[],ht.scaleOptions={},ht.animateStartTime=void 0,ht.aniamateStatus=!1,ht.sourceEvent=function(){ht.dataState.dataSourceNeedUpdate=!0;var Lt=ht.getLayerConfig(),Gt=Lt.autoFit,le=Lt.fitBoundsOptions;Gt&&ht.fitBounds(le),ht.emit("dataUpdate"),ht.reRender()},ht.name=_t.name||ht.id,ht.zIndex=_t.zIndex||0,ht.rawConfig=_t,ht}return t()(Mt,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(_t){if(!this.inited)this.needUpdateConfig=rt(rt({},this.needUpdateConfig),_t);else{var Lt=this.container.get(U.TYPES.SceneID);this.configService.setLayerConfig(Lt,this.id,rt(rt(rt({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),_t)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(_t){this.container=_t}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(_t){return this.plugins.push(_t),this}},{key:"init",value:function(){var _t=this,Lt=this.container.get(U.TYPES.SceneID),Gt=this.rawConfig.enableMultiPassRenderer,le=Gt===void 0?!1:Gt;this.configService.setLayerConfig(Lt,this.id,{enableMultiPassRenderer:le}),this.iconService=this.container.get(U.TYPES.IIconService),this.fontService=this.container.get(U.TYPES.IFontService),this.rendererService=this.container.get(U.TYPES.IRendererService),this.layerService=this.container.get(U.TYPES.ILayerService),this.interactionService=this.container.get(U.TYPES.IInteractionService),this.pickingService=this.container.get(U.TYPES.IPickingService),this.mapService=this.container.get(U.TYPES.IMapService),this.cameraService=this.container.get(U.TYPES.ICameraService),this.coordinateService=this.container.get(U.TYPES.ICoordinateSystemService),this.postProcessingPassFactory=this.container.get(U.TYPES.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(U.TYPES.IFactoryNormalPass),this.styleAttributeService=this.container.get(U.TYPES.IStyleAttributeService),this.multiPassRenderer=this.container.get(U.TYPES.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(Pn){var Er=Pn.attributeName,Dr=Pn.attributeField,fi=Pn.attributeValues,Ai=Pn.updateOptions;_t.styleAttributeService.updateStyleAttribute(Er,{scale:rt({field:Dr},_t.splitValuesAndCallbackInAttribute(fi,_t.getLayerConfig()[Er]))},Ai)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(U.TYPES.ILayerPlugin);var we=et(this.plugins),Xe;try{for(we.s();!(Xe=we.n()).done;){var yn=Xe.value;yn.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(Pn){we.e(Pn)}finally{we.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(rt(rt({},this.getDefaultConfig()),this.rawConfig));var _t=this.getLayerConfig(),Lt=_t.animateOption;Lt!=null&&Lt.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(_t,Lt,Gt){return this.updateStyleAttribute("color",_t,Lt,Gt),this}},{key:"texture",value:function(_t,Lt,Gt){return this.updateStyleAttribute("texture",_t,Lt,Gt),this}},{key:"rotate",value:function(_t,Lt,Gt){return this.updateStyleAttribute("rotate",_t,Lt,Gt),this}},{key:"size",value:function(_t,Lt,Gt){return this.updateStyleAttribute("size",_t,Lt,Gt),this}},{key:"filter",value:function(_t,Lt,Gt){return this.updateStyleAttribute("filter",_t,Lt,Gt),this}},{key:"shape",value:function(_t,Lt,Gt){return this.updateStyleAttribute("shape",_t,Lt,Gt),this}},{key:"label",value:function(_t,Lt,Gt){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:_t,attributeValues:Lt,updateOptions:Gt}),this}},{key:"animate",value:function(_t){var Lt={};return m()(_t)?(Lt.enable=!0,Lt=rt(rt({},Lt),_t)):Lt.enable=_t,this.updateLayerConfig({animateOption:Lt}),this}},{key:"source",value:function(_t,Lt){return this.sourceOption={data:_t,options:Lt},this}},{key:"setData",value:function(_t,Lt){var Gt=this;return this.inited?this.layerSource.setData(_t,Lt):this.on("inited",function(){Gt.layerSource.setData(_t,Lt)}),this}},{key:"style",value:function(_t){var Lt=this,Gt=_t.passes,le=a()(_t,["passes"]);return Gt&&gt(Gt).forEach(function(we){var Xe=Lt.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(we[0]);Xe&&Xe.updateOptions(we[1])}),this.rawConfig=rt(rt({},this.rawConfig),le),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(_t,Lt){return m()(_t)?this.scaleOptions=rt(rt({},this.scaleOptions),_t):this.scaleOptions[_t]=Lt,this}},{key:"render",value:function(){return this.renderModels(),this}},{key:"active",value:function(_t){var Lt={};return Lt.enableHighlight=m()(_t)?!0:_t,m()(_t)?(Lt.enableHighlight=!0,_t.color&&(Lt.highlightColor=_t.color)):Lt.enableHighlight=!!_t,this.updateLayerConfig(Lt),this}},{key:"setActive",value:function(_t,Lt){var Gt=this;if(m()(_t)){var le=_t.x,we=le===void 0?0:le,Xe=_t.y,yn=Xe===void 0?0:Xe;this.updateLayerConfig({highlightColor:m()(Lt)?Lt.color:this.getLayerConfig().highlightColor}),this.pick({x:we,y:yn})}else this.updateLayerConfig({pickedFeatureID:_t,highlightColor:m()(Lt)?Lt.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.call(Object(O.l)(_t)).then(function(){setTimeout(function(){Gt.reRender()},1)})}},{key:"select",value:function(_t){var Lt={};return Lt.enableSelect=m()(_t)?!0:_t,m()(_t)?(Lt.enableSelect=!0,_t.color&&(Lt.selectColor=_t.color)):Lt.enableSelect=!!_t,this.updateLayerConfig(Lt),this}},{key:"setSelect",value:function(_t,Lt){var Gt=this;if(m()(_t)){var le=_t.x,we=le===void 0?0:le,Xe=_t.y,yn=Xe===void 0?0:Xe;this.updateLayerConfig({selectColor:m()(Lt)?Lt.color:this.getLayerConfig().selectColor}),this.pick({x:we,y:yn})}else this.updateLayerConfig({pickedFeatureID:_t,selectColor:m()(Lt)?Lt.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.call(Object(O.l)(_t)).then(function(){setTimeout(function(){Gt.reRender()},1)})}},{key:"setBlend",value:function(_t){this.updateLayerConfig({blend:_t}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(_t){return this.zIndex=_t,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(_t){this.currentPickId=_t}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(_t){this.selectedFeatureID=_t}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var _t=this.mapService.getZoom(),Lt=this.getLayerConfig(),Gt=Lt.visible,le=Lt.minZoom,we=le===void 0?-Infinity:le,Xe=Lt.maxZoom,yn=Xe===void 0?Infinity:Xe;return!!Gt&&_t>=we&&_t<=yn}},{key:"setMinZoom",value:function(_t){return this.updateLayerConfig({minZoom:_t}),this}},{key:"getMinZoom",value:function(){var _t=this.getLayerConfig(),Lt=_t.minZoom;return Lt}},{key:"getMaxZoom",value:function(){var _t=this.getLayerConfig(),Lt=_t.maxZoom;return Lt}},{key:"get",value:function(_t){var Lt=this.getLayerConfig();return Lt[_t]}},{key:"setMaxZoom",value:function(_t){return this.updateLayerConfig({maxZoom:_t}),this}},{key:"fitBounds",value:function(_t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var Lt=this.getSource(),Gt=Lt.extent,le=Gt.some(function(we){return Math.abs(we)===Infinity});return le?this:(this.mapService.fitBounds([[Gt[0],Gt[1]],[Gt[2],Gt[3]]],_t),this)}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(_t){return _t.destroy()}),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(_t){return _t.needRescale||_t.needRemapping||_t.needRegenerateVertices}).length}},{key:"setSource",value:function(_t){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=_t,this.inited&&this.layerSource.cluster){var Lt=this.mapService.getZoom();this.layerSource.updateClusterData(Lt)}this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(_t){this.encodedData=_t}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function(){return this.configSchema||(this.configSchema=N()([Dt,this.getConfigSchema()])),this.configSchema}},{key:"getLegendItems",value:function(_t){var Lt=this.styleAttributeService.getLayerAttributeScale(_t);if(Lt){if(Lt.ticks){var Gt=Lt.ticks().map(function(we){return l()({value:we},_t,Lt(we))});return Gt}else if(Lt.invertExtent){var le=Lt.range().map(function(we){return l()({value:Lt.invertExtent(we)},_t,we)});return le}}else return[]}},{key:"pick",value:function(_t){var Lt=_t.x,Gt=_t.y;this.interactionService.triggerHover({x:Lt,y:Gt})}},{key:"boxSelect",value:function(_t,Lt){this.pickingService.boxPickLayer(this,_t,Lt)}},{key:"buildLayerModel",value:function(_t){var Lt=_t.moduleName,Gt=_t.vertexShader,le=_t.fragmentShader,we=_t.triangulation,Xe=a()(_t,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(Lt,{vs:Gt,fs:le});var yn=this.shaderModuleService.getModule(Lt),Pn=yn.vs,Er=yn.fs,Dr=yn.uniforms,fi=this.rendererService.createModel,Ai=this.styleAttributeService.createAttributesAndIndices(this.encodedData,we),Fi=Ai.attributes,fa=Ai.elements;return fi(rt({attributes:Fi,uniforms:Dr,fs:Er,vs:Pn,elements:fa,blend:Nt[U.BlendType.normal]},Xe))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(_t){var Lt=this.getLayerConfig(),Gt=Lt.enableHighlight,le=Gt===void 0?!0:Gt,we=Lt.enableSelect,Xe=we===void 0?!0:we,yn=this.eventNames().indexOf(_t)!==-1||this.eventNames().indexOf("un"+_t)!==-1;return(_t==="click"||_t==="dblclick")&&Xe&&(yn=!0),_t==="mousemove"&&(le||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(yn=!0),this.isVisible()&&yn}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var _t=this;return this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Lt){Lt.draw({uniforms:_t.layerModel.getUninforms()})}),this}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(_t,Lt){return{values:P()(_t)?void 0:_t||Lt,callback:P()(_t)?_t:void 0}}},{key:"updateStyleAttribute",value:function(_t,Lt,Gt,le){this.inited?this.styleAttributeService.updateStyleAttribute(_t,{scale:rt({field:Lt},this.splitValuesAndCallbackInAttribute(Gt,this.getLayerConfig()[Lt]))},le):this.pendingStyleAttributes.push({attributeName:_t,attributeField:Lt,attributeValues:Gt,updateOptions:le})}}]),Mt}(R.EventEmitter),mt),At=_()(it.prototype,"logger",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_()(it.prototype,"configService",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=_()(it.prototype,"shaderModuleService",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it),Ft,Qt,ne,Wt,$t,De,Je=(Ft=Object(U.lazyInject)(U.TYPES.IGlobalConfigService),Qt=Object(U.lazyInject)(U.TYPES.IShaderModuleService),ne=(De=function(){function tt(Tt){T()(this,tt),this.triangulation=void 0,this.layer=void 0,v()(this,"configService",Wt,this),v()(this,"shaderModuleService",$t,this),this.rendererService=void 0,this.iconService=void 0,this.fontService=void 0,this.styleAttributeService=void 0,this.mapService=void 0,this.cameraService=void 0,this.layerService=void 0,this.layer=Tt,this.rendererService=Tt.getContainer().get(U.TYPES.IRendererService),this.styleAttributeService=Tt.getContainer().get(U.TYPES.IStyleAttributeService),this.mapService=Tt.getContainer().get(U.TYPES.IMapService),this.iconService=Tt.getContainer().get(U.TYPES.IIconService),this.fontService=Tt.getContainer().get(U.TYPES.IFontService),this.cameraService=Tt.getContainer().get(U.TYPES.ICameraService),this.layerService=Tt.getContainer().get(U.TYPES.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate()}return t()(tt,[{key:"getBlend",value:function(){var Mt=this.layer.getLayerConfig(),ht=Mt.blend,_t=ht===void 0?"normal":ht;return Nt[U.BlendType[_t]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(Mt){return[Mt.enable?0:1,Mt.duration||4,Mt.interval||.2,Mt.trailLength||.1]}},{key:"startModelAnimate",value:function(){var Mt=this.layer.getLayerConfig(),ht=Mt.animateOption;ht.enable&&this.layer.setAnimateStartTime()}}]),tt}(),De),Wt=_()(ne.prototype,"configService",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=_()(ne.prototype,"shaderModuleService",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne),Qe=L("J4zp"),de=L.n(Qe),ue=L("RIqP"),Ne=L.n(ue),cn=L("VmRL"),Fn=L.n(cn),wn=L("IOcx"),en=wn.c.create(),tn=wn.c.create(),xn=wn.c.create(),Bn=wn.c.create(),vr=wn.c.create();function li(tt,Tt,Mt,ht,_t){wn.c.add(tt,Mt,ht),wn.c.normalize(tt,tt),Tt=wn.c.fromValues(-tt[1],tt[0]);var Lt=wn.c.fromValues(-Mt[1],Mt[0]);return[_t/wn.c.dot(Tt,Lt),Tt]}function Me(tt,Tt){return wn.c.set(tt,-Tt[1],Tt[0])}function Pe(tt,Tt,Mt){return wn.c.sub(tt,Tt,Mt),wn.c.normalize(tt,tt),tt}function te(tt,Tt){return tt[0]===Tt[0]&&tt[1]===Tt[1]}function ge(tt){for(var Tt=new Map,Mt=0;Mt<tt.length;Mt++){var ht=tt[0].toString()+"-"+tt[1].toString();Tt.get(ht)?(tt.splice(Mt,1),Mt++):Tt.set(ht,ht)}return tt}var Ht=function(){function tt(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T()(this,tt),this.complex=void 0,this.join=void 0,this.cap=void 0,this.miterLimit=void 0,this.thickness=void 0,this.normal=void 0,this.lastFlip=-1,this.miter=wn.c.fromValues(0,0),this.started=!1,this.dash=!1,this.totalDistance=0,this.join=Tt.join||"miter",this.cap=Tt.cap||"butt",this.miterLimit=Tt.miterLimit||10,this.thickness=Tt.thickness||1,this.dash=Tt.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return t()(tt,[{key:"extrude_gaode2",value:function(Mt,ht){var _t=this.complex;if(Mt.length<=1)return _t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Lt=Mt.length,Gt=_t.startIndex,le=1;le<Lt;le++){var we=Mt[le-1],Xe=ht[le-1],yn=Mt[le],Pn=ht[le],Er=le<Mt.length-1?Mt[le+1]:null,Dr=le<ht.length-1?ht[le+1]:null,fi=this.segment_gaode2(_t,Gt,we,yn,Er,Xe,Pn,Dr);Gt+=fi}if(this.dash)for(var Ai=0;Ai<_t.positions.length/6;Ai++)_t.positions[Ai*6+5]=this.totalDistance;return _t.startIndex=_t.positions.length/6,_t}},{key:"extrude",value:function(Mt){var ht=this.complex;if(Mt.length<=1)return ht;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var _t=Mt.length,Lt=ht.startIndex,Gt=1;Gt<_t;Gt++){var le=Mt[Gt-1],we=Mt[Gt],Xe=Gt<Mt.length-1?Mt[Gt+1]:null,yn=this.segment(ht,Lt,le,we,Xe);Lt+=yn}if(this.dash)for(var Pn=0;Pn<ht.positions.length/6;Pn++)ht.positions[Pn*6+5]=this.totalDistance;return ht.startIndex=ht.positions.length/6,ht}},{key:"segment_gaode2",value:function(Mt,ht,_t,Lt,Gt,le,we,Xe){var yn=0,Pn=Mt.indices,Er=Mt.positions,Dr=Mt.normals,fi=this.cap==="square",Ai=this.join==="bevel",Fi=Object(O.d)([we[0],we[1]]),fa=Object(O.d)([le[0],le[1]]);Pe(xn,Lt,_t);var ga=0;if(this.dash&&(ga=this.lineSegmentDistance(Fi,fa),this.totalDistance+=ga),this.normal||(this.normal=wn.c.create(),Me(this.normal,xn)),!this.started)if(this.started=!0,fi){var Xa=wn.c.create(),Sa=wn.c.create();wn.c.add(Xa,this.normal,xn),wn.c.add(Sa,this.normal,xn),Dr.push(Sa[0],Sa[1],0),Dr.push(Xa[0],Xa[1],0),Er.push(_t[0],_t[1],0,this.totalDistance-ga,-this.thickness,0),Er.push(_t[0],_t[1],0,this.totalDistance-ga,this.thickness,0)}else this.extrusions(Er,Dr,_t,this.normal,this.thickness,this.totalDistance-ga);if(Pn.push(ht+0,ht+1,ht+2),Gt){te(Lt,Gt)&&wn.c.add(Gt,Lt,wn.c.normalize(Gt,wn.c.subtract(Gt,Lt,_t))),Pe(Bn,Gt,Lt);var eo=li(vr,wn.c.create(),xn,Bn,this.thickness),Su=de()(eo,2),zu=Su[0],dl=Su[1],no=wn.c.dot(vr,this.normal)<0?-1:1,Hu=Ai;if(!Hu&&this.join==="miter"){var Yu=zu;Yu>this.miterLimit&&(Hu=!0)}Hu?(Dr.push(this.normal[0],this.normal[1],0),Dr.push(dl[0],dl[1],0),Er.push(Lt[0],Lt[1],0,this.totalDistance,-this.thickness*no,0),Er.push(Lt[0],Lt[1],0,this.totalDistance,this.thickness*no,0),Pn.push.apply(Pn,Ne()(this.lastFlip!==-no?[ht,ht+2,ht+3]:[ht+2,ht+1,ht+3])),Pn.push(ht+2,ht+3,ht+4),Me(en,Bn),wn.c.copy(this.normal,en),Dr.push(this.normal[0],this.normal[1],0),Er.push(Lt[0],Lt[1],0,this.totalDistance,-this.thickness*no,0),yn+=3):(this.extrusions(Er,Dr,Lt,dl,zu,this.totalDistance),Pn.push.apply(Pn,Ne()(this.lastFlip===1?[ht,ht+2,ht+3]:[ht+2,ht+1,ht+3])),no=-1,wn.c.copy(this.normal,dl),yn+=2),this.lastFlip=no}else{if(Me(this.normal,xn),fi){var Lo=wn.c.create(),Ls=wn.c.create();wn.c.sub(Ls,xn,this.normal),wn.c.add(Lo,xn,this.normal),Dr.push(Ls[0],Ls[1],0),Dr.push(Lo[0],Lo[1],0),Er.push(Lt[0],Lt[1],0,this.totalDistance,this.thickness,0),Er.push(Lt[0],Lt[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(Er,Dr,Lt,this.normal,this.thickness,this.totalDistance);Pn.push.apply(Pn,Ne()(this.lastFlip===1?[ht,ht+2,ht+3]:[ht+2,ht+1,ht+3])),yn+=2}return yn}},{key:"segment",value:function(Mt,ht,_t,Lt,Gt){var le=0,we=Mt.indices,Xe=Mt.positions,yn=Mt.normals,Pn=this.cap==="square",Er=this.join==="bevel",Dr=Object(O.d)([Lt[0],Lt[1]]),fi=Object(O.d)([_t[0],_t[1]]);Pe(xn,Dr,fi);var Ai=0;if(this.dash&&(Ai=this.lineSegmentDistance(Dr,fi),this.totalDistance+=Ai),this.normal||(this.normal=wn.c.create(),Me(this.normal,xn)),!this.started)if(this.started=!0,Pn){var Fi=wn.c.create(),fa=wn.c.create();wn.c.add(Fi,this.normal,xn),wn.c.add(fa,this.normal,xn),yn.push(fa[0],fa[1],0),yn.push(Fi[0],Fi[1],0),Xe.push(_t[0],_t[1],0,this.totalDistance-Ai,-this.thickness,0),Xe.push(_t[0],_t[1],0,this.totalDistance-Ai,this.thickness,0)}else this.extrusions(Xe,yn,_t,this.normal,this.thickness,this.totalDistance-Ai);if(we.push(ht+0,ht+1,ht+2),Gt){var Sa=Object(O.d)([Gt[0],Gt[1]]);te(Dr,Sa)&&wn.c.add(Sa,Dr,wn.c.normalize(Sa,wn.c.subtract(Sa,Dr,fi))),Pe(Bn,Sa,Dr);var Lo=li(vr,wn.c.create(),xn,Bn,this.thickness),Ls=de()(Lo,2),eo=Ls[0],Su=Ls[1],zu=wn.c.dot(vr,this.normal)<0?-1:1,dl=Er;if(!dl&&this.join==="miter"){var no=eo;no>this.miterLimit&&(dl=!0)}dl?(yn.push(this.normal[0],this.normal[1],0),yn.push(Su[0],Su[1],0),Xe.push(Lt[0],Lt[1],0,this.totalDistance,-this.thickness*zu,0),Xe.push(Lt[0],Lt[1],0,this.totalDistance,this.thickness*zu,0),we.push.apply(we,Ne()(this.lastFlip!==-zu?[ht,ht+2,ht+3]:[ht+2,ht+1,ht+3])),we.push(ht+2,ht+3,ht+4),Me(en,Bn),wn.c.copy(this.normal,en),yn.push(this.normal[0],this.normal[1],0),Xe.push(Lt[0],Lt[1],0,this.totalDistance,-this.thickness*zu,0),le+=3):(this.extrusions(Xe,yn,Lt,Su,eo,this.totalDistance),we.push.apply(we,Ne()(this.lastFlip===1?[ht,ht+2,ht+3]:[ht+2,ht+1,ht+3])),zu=-1,wn.c.copy(this.normal,Su),le+=2),this.lastFlip=zu}else{if(Me(this.normal,xn),Pn){var ga=wn.c.create(),Xa=wn.c.create();wn.c.sub(Xa,xn,this.normal),wn.c.add(ga,xn,this.normal),yn.push(Xa[0],Xa[1],0),yn.push(ga[0],ga[1],0),Xe.push(Lt[0],Lt[1],0,this.totalDistance,this.thickness,0),Xe.push(Lt[0],Lt[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(Xe,yn,Lt,this.normal,this.thickness,this.totalDistance);we.push.apply(we,Ne()(this.lastFlip===1?[ht,ht+2,ht+3]:[ht+2,ht+1,ht+3])),le+=2}return le}},{key:"extrusions",value:function(Mt,ht,_t,Lt,Gt,le){ht.push(Lt[0],Lt[1],0),ht.push(Lt[0],Lt[1],0),Mt.push(_t[0],_t[1],0,le,-Gt,0),Mt.push(_t[0],_t[1],0,le,Gt,0)}},{key:"lineSegmentDistance",value:function(Mt,ht){var _t=ht[0]-Mt[0],Lt=ht[1]-Mt[1];return Math.sqrt(_t*_t+Lt*Lt)}}]),tt}(),re=L("UB5X"),Te=L.n(re);function ae(tt){if(Te()(tt[0]))return tt;if(Te()(tt[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Te()(tt[0][0][0])){var Tt=tt,Mt=0,ht=0,_t=0;return Tt.forEach(function(Lt){Lt.forEach(function(Gt){Mt+=Gt[0],ht+=Gt[1],_t++})}),[Mt/_t,ht/_t,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function xe(tt){var Tt=tt[0][0],Mt=tt[0][tt[0].length-1];Tt[0]===Mt[0]&&Tt[1]===Mt[1]&&(tt[0]=tt[0].slice(0,tt[0].length-1));for(var ht=tt[0].length,_t=Fn.a.flatten(tt),Lt=_t.vertices,Gt=_t.dimensions,le=[],we=[],Xe=0;Xe<Lt.length/Gt;Xe++)Gt===2?le.push(Lt[Xe*2],Lt[Xe*2+1],1):le.push(Lt[Xe*3],Lt[Xe*3+1],1);var yn=Fn()(_t.vertices,_t.holes,_t.dimensions);we.push.apply(we,Ne()(yn));for(var Pn=function(fi){var Ai=_t.vertices.slice(fi*Gt,(fi+1)*Gt),Fi=_t.vertices.slice((fi+1)*Gt,(fi+2)*Gt);Fi.length===0&&(Fi=_t.vertices.slice(0,Gt));var fa=le.length/3;le.push(Ai[0],Ai[1],1,Fi[0],Fi[1],1,Ai[0],Ai[1],0,Fi[0],Fi[1],0),we.push.apply(we,Ne()([0,2,1,2,3,1].map(function(ga){return ga+fa})))},Er=0;Er<ht;Er++)Pn(Er);return{positions:le,index:we}}function qe(tt){var Tt=Fn.a.flatten(tt),Mt=Fn()(Tt.vertices,Tt.holes,Tt.dimensions);return{positions:Tt.vertices,index:Mt}}function zn(tt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Mt=tt[0][0],ht=tt[0][tt[0].length-1];Mt[0]===ht[0]&&Mt[1]===ht[1]&&(tt[0]=tt[0].slice(0,tt[0].length-1));for(var _t=tt[0].length,Lt=Fn.a.flatten(tt),Gt=Lt.vertices,le=Lt.dimensions,we=[],Xe=[],yn=[],Pn=0;Pn<Gt.length/le;Pn++)le===2?we.push(Gt[Pn*2],Gt[Pn*2+1],1,-1,-1):we.push(Gt[Pn*3],Gt[Pn*3+1],1,-1,-1),yn.push(0,0,1);var Er=Fn()(Lt.vertices,Lt.holes,Lt.dimensions);Xe.push.apply(Xe,Ne()(Er));for(var Dr=function(Fi){var fa=Lt.vertices.slice(Fi*le,(Fi+1)*le),ga=Lt.vertices.slice((Fi+1)*le,(Fi+2)*le);ga.length===0&&(ga=Lt.vertices.slice(0,le));var Xa=we.length/5;we.push(fa[0],fa[1],1,0,0,ga[0],ga[1],1,.1,0,fa[0],fa[1],0,0,.8,ga[0],ga[1],0,.1,.8);var Sa=ar([ga[0],ga[1],1],[fa[0],fa[1],0],[fa[0],fa[1],1],Tt);yn.push.apply(yn,Ne()(Sa).concat(Ne()(Sa),Ne()(Sa),Ne()(Sa))),Xe.push.apply(Xe,Ne()([1,2,0,3,2,1].map(function(Lo){return Lo+Xa})))},fi=0;fi<_t;fi++)Dr(fi);return{positions:we,index:Xe,normals:yn}}function ar(tt,Tt,Mt){var ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,_t=wn.d.create(),Lt=wn.d.create(),Gt=wn.d.create();ht&&(tt=Object(O.p)(tt),Tt=Object(O.p)(Tt),Mt=Object(O.p)(Mt));var le=wn.d.fromValues.apply(wn.d,Ne()(tt)),we=wn.d.fromValues.apply(wn.d,Ne()(Tt)),Xe=wn.d.fromValues.apply(wn.d,Ne()(Mt));wn.d.sub(_t,Xe,we),wn.d.sub(Lt,le,we),wn.d.cross(Gt,_t,Lt);var yn=wn.d.create();return wn.d.normalize(yn,Gt),yn}var _n,Cn;(function(tt){tt.CYLINDER="cylinder",tt.SQUARECOLUMN="squareColumn",tt.TRIANGLECOLUMN="triangleColumn",tt.HEXAGONCOLUMN="hexagonColumn",tt.PENTAGONCOLUMN="pentagonColumn"})(Cn||(Cn={}));var Or;(function(tt){tt.CIRCLE="circle",tt.SQUARE="square",tt.TRIANGLE="triangle",tt.HEXAGON="hexagon",tt.PENTAGON="pentagon"})(Or||(Or={}));function Ar(tt){for(var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Mt=Math.PI*2/tt,ht=[],_t=0;_t<tt;_t++)ht.push(Mt*_t+Tt*Math.PI/12);var Lt=ht.map(function(Gt){var le=Math.sin(Gt+Math.PI/4),we=Math.cos(Gt+Math.PI/4);return[le,we,0]});return Lt}function hn(){return Ar(30)}function Pr(){return Ar(4)}function yr(){return Ar(3)}function Re(){return Ar(6,1)}function We(){return Ar(5)}var Ye=(_n={},l()(_n,Or.CIRCLE,hn),l()(_n,Or.HEXAGON,Re),l()(_n,Or.TRIANGLE,yr),l()(_n,Or.SQUARE,Pr),l()(_n,Or.PENTAGON,We),l()(_n,Cn.CYLINDER,hn),l()(_n,Cn.HEXAGONCOLUMN,Re),l()(_n,Cn.TRIANGLECOLUMN,yr),l()(_n,Cn.SQUARECOLUMN,Pr),l()(_n,Cn.PENTAGONCOLUMN,We),_n),dn={};function En(tt){var Tt=ae(tt.coordinates);return{vertices:[].concat(Ne()(Tt),Ne()(Tt),Ne()(Tt),Ne()(Tt)),indices:[0,1,2,2,3,0],size:Tt.length}}function Dn(tt){var Tt=tt.shape,Mt=Ei(Tt,!1),ht=Mt.positions,_t=Mt.index,Lt=Mt.normals;return{vertices:ht,indices:_t,normals:Lt,size:5}}function Sn(tt){var Tt=ae(tt.coordinates);return{vertices:Ne()(Tt),indices:[0],size:Tt.length}}function Nn(tt){var Tt=tt.coordinates,Mt=tt.originCoordinates,ht=tt.version,_t=new Ht({dash:!0,join:"bevel"});if(ht==="GAODE2.x"){var Lt=Tt;Array.isArray(Lt[0][0])||(Lt=[Tt]);var Gt=Mt;Array.isArray(Gt[0][0])||(Gt=[Mt]);for(var le=0;le<Lt.length;le++){var we=Lt[le],Xe=Gt[le];_t.extrude_gaode2(we,Xe)}}else{var yn=Tt;Array.isArray(yn[0][0])||(yn=[Tt]),yn.forEach(function(Er){_t.extrude(Er)})}var Pn=_t.complex;return{vertices:Pn.positions,indices:Pn.indices,normals:Pn.normals,size:6}}function nr(tt){var Tt=tt.coordinates,Mt=Fn.a.flatten(Tt),ht=Mt.vertices,_t=Mt.dimensions,Lt=Mt.holes;return{indices:Fn()(ht,Lt,_t),vertices:ht,size:_t}}function Gn(tt){var Tt=tt.coordinates,Mt=zn(Tt,!0),ht=Mt.positions,_t=Mt.index,Lt=Mt.normals;return{vertices:ht,indices:_t,normals:Lt,size:5}}function Tn(tt){var Tt=tt.shape,Mt=wo(Tt),ht=Mt.positions,_t=Mt.index;return{vertices:ht,indices:_t,size:3}}function Cr(tt){var Tt=tt.coordinates,Mt=[].concat(Ne()(Tt[0]),[0,0,1,Tt[1][0],Tt[0][1],0,1,1],Ne()(Tt[1]),[0,1,0],Ne()(Tt[0]),[0,0,1],Ne()(Tt[1]),[0,1,0,Tt[0][0],Tt[1][1],0,0,0]),ht=[0,1,2,3,4,5];return{vertices:Mt,indices:ht,size:5}}function pr(tt){for(var Tt=30,Mt=tt.coordinates,ht=[],_t=[],Lt=function(we){ht.push(we,1,we,Mt[0][0],Mt[0][1],Mt[1][0],Mt[1][1],we,-1,we,Mt[0][0],Mt[0][1],Mt[1][0],Mt[1][1]),we!==Tt-1&&_t.push.apply(_t,Ne()([0,1,2,1,3,2].map(function(Xe){return we*2+Xe})))},Gt=0;Gt<Tt;Gt++)Lt(Gt);return{vertices:ht,indices:_t,size:7}}function zr(tt){var Tt=tt.coordinates;Tt.length===2&&Tt.push(0);var Mt=tt.size,ht=ha(-1,1),_t=ha(1,1),Lt=ha(-1,-1),Gt=ha(1,-1),le=[].concat(Ne()(Tt),Ne()(ht),Ne()(Tt),Ne()(Lt),Ne()(Tt),Ne()(Gt),Ne()(Tt),Ne()(_t)),we=[0,1,2,3,0,2];return{vertices:le,indices:we,size:5}}function Ei(tt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(dn&&dn[tt])return dn[tt];var Mt=Ye[tt]?Ye[tt]():Ye.cylinder(),ht=zn([Mt],Tt);return dn[tt]=ht,ht}function Oa(tt,Tt){for(var Mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,_t=new Float32Array(tt.length/Mt*3),Lt,Gt,le,we=wn.d.create(),Xe=wn.d.create(),yn=wn.d.create(),Pn=0,Er=Tt.length;Pn<Er;Pn+=3){Lt=Tt[Pn+0]*3,Gt=Tt[Pn+1]*3,le=Tt[Pn+2]*3;var Dr=[tt[Lt],tt[Lt+1]],fi=[tt[Gt],tt[Gt+1]],Ai=[tt[le],tt[le+1]];ht&&(Dr=Object(O.p)(Dr),fi=Object(O.p)(fi),Ai=Object(O.p)(Ai));var Fi=Dr,fa=de()(Fi,2),ga=fa[0],Xa=fa[1],Sa=wn.d.fromValues(ga,Xa,tt[Lt+2]),Lo=fi,Ls=de()(Lo,2),eo=Ls[0],Su=Ls[1],zu=wn.d.fromValues(eo,Su,tt[Gt+2]),dl=Ai,no=de()(dl,2),Hu=no[0],Yu=no[1],Hc=wn.d.fromValues(Hu,Yu,tt[le+2]);wn.d.sub(we,Hc,zu),wn.d.sub(Xe,Sa,zu),wn.d.cross(yn,we,Xe),_t[Lt]+=we[0],_t[Lt+1]+=we[1],_t[Lt+2]+=we[2],_t[Gt]+=we[0],_t[Gt+1]+=we[1],_t[Gt+2]+=we[2],_t[le]+=we[0],_t[le+1]+=we[1],_t[le+2]+=we[2]}return wa(_t),_t}function wa(tt){for(var Tt=0,Mt=tt.length;Tt<Mt;Tt+=3){var ht=wn.d.fromValues(tt[Tt],tt[Tt+1],tt[Tt+2]),_t=wn.d.create();wn.d.normalize(_t,ht),tt.set(_t,Tt)}}function Ja(tt){var Tt=tt[0][0],Mt=tt[0][tt[0].length-1];return Tt[0]===Mt[0]&&Tt[1]===Mt[1]}function wo(tt){var Tt=["cylinder","triangleColumn","hexagonColumn","squareColumn"],Mt=Ye[tt]?Ye[tt]():Ye.circle(),ht=Tt.indexOf(tt)===-1?qe([Mt]):xe([Mt]);return ht}function ha(tt,Tt){var Mt=(tt+1)/2,ht=(Tt+1)/2;return[Mt,ht]}function ro(tt){var Tt=ko();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function ko(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var $a=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Mo=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;
uniform mat4 u_Mvp;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);
   v_texCoord = a_Uv;
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,ss=function(tt){s()(Mt,tt);var Tt=ro(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=Lt===void 0?1:Lt,le=_t.baseColor,we=le===void 0?"rgb(16,16,16)":le,Xe=_t.brightColor,yn=Xe===void 0?"rgb(255,176,38)":Xe,Pn=_t.windowColor,Er=Pn===void 0?"rgb(30,60,89)":Pn,Dr=_t.time,fi=Dr===void 0?0:Dr;return{u_opacity:Gt,u_baseColor:Object(O.s)(we),u_brightColor:Object(O.s)(yn),u_windowColor:Object(O.s)(Er),u_time:this.layer.getLayerAnimateTime()||fi}}},{key:"initModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:Mo,fragmentShader:$a,triangulation:Gn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt,le,we,Xe){return Xe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Lt,Gt,le,we){var Xe=Lt.size,yn=Xe===void 0?10:Xe;return Array.isArray(yn)?[yn[0]]:[yn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Lt,Gt,le,we){var Xe=Lt.size;return[le[3],le[4]]}}})}}]),Mt}(Je);function Pa(tt){var Tt=Bo();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Bo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ro=function(tt){s()(Mt,tt);var Tt=Pa(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.type="PolygonLayer",ht}return t()(Mt,[{key:"buildModels",value:function(){this.layerModel=new ss(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(_t){this.updateLayerConfig({time:_t})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),Mt}(yt);function Js(tt){var Tt=Ko();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Ko(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var nu=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
uniform mat4 u_Mvp;\r
varying vec4 v_color;\r
\r
uniform vec2 u_SceneCenterMKT;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  // gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807\r
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r
    gl_Position = u_Mvp * (project_pos);\r
  } else {\r
     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
    gl_Position = project_common_position_to_clipspace(project_pos);\r
  }\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,Rs=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,je=function(tt){s()(Mt,tt);var Tt=Js(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.coverage,le=_t.angle;return{u_opacity:Lt||1,u_coverage:Gt||.9,u_angle:le||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:nu,fragmentShader:Rs,triangulation:Tn,depth:{enable:!1},primitive:U.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt){var le=Lt.version==="GAODE2.x"?Lt.originCoordinates:Lt.coordinates;return[le[0],le[1],0]}}})}}]),Mt}(Je);function oe(tt){var Tt=Zt();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Zt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var be=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"


void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
  // vec2 lnglat = (a_Pos.xy + offset); 
  // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
  // gl_Position = project_common_position_to_clipspace(project_pos);
  // float lightWeight = calc_lighting(project_pos);
  // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // vec2 lnglat = (a_Pos.xy + offset); 
    // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));

    // float lightWeight = calc_lighting(project_pos);
    // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    // gl_Position = u_Mvp * vec4(lnglat , a_Position.z * a_Size, 1.0);
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ECF\u7EAC\u5EA6
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807
    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));

    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);
  } else {
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
    
    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
    
    gl_Position = project_common_position_to_clipspace(project_pos);
  }



  setPickingColor(a_PickingColor);
}
`,sn=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Vn=function(tt){s()(Mt,tt);var Tt=oe(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.coverage,le=_t.angle;return{u_opacity:Lt||1,u_coverage:Gt||1,u_angle:le||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:be,fragmentShader:sn,triangulation:Dn,depth:{enable:!0},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Lt,Gt,le,we){var Xe=Lt.size;return Array.isArray(Xe)?[Xe[0]]:[Xe]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt,le,we,Xe){return Xe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt){var le=Lt.version==="GAODE2.x"?Lt.originCoordinates:Lt.coordinates;return[le[0],le[1],0]}}})}}]),Mt}(Je);function er(tt,Tt){for(var Mt=[],ht=[],_t=[],Lt=tt+1,Gt=Tt+1,le=tt/2,we=Tt/2,Xe=0;Xe<Gt;Xe++)for(var yn=Xe-we,Pn=0;Pn<Lt;Pn++){var Er=Pn-le;ht.push(Er/le,-yn/we,0),_t.push(Pn/tt),_t.push(1-Xe/Tt)}for(var Dr=0;Dr<Tt;Dr++)for(var fi=0;fi<tt;fi++){var Ai=fi+Lt*Dr,Fi=fi+Lt*(Dr+1),fa=fi+1+Lt*(Dr+1),ga=fi+1+Lt*Dr;Mt.push(Ai,Fi,ga),Mt.push(Fi,fa,ga)}return{vertices:ht,indices:Mt,uvs:_t}}var kn,Xr,vi;function Si(tt,Tt){var Mt=Object.keys(tt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(tt);Tt&&(ht=ht.filter(function(_t){return Object.getOwnPropertyDescriptor(tt,_t).enumerable})),Mt.push.apply(Mt,ht)}return Mt}function ji(tt){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?Si(Object(Mt),!0).forEach(function(ht){l()(tt,ht,Mt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Mt)):Si(Object(Mt)).forEach(function(ht){Object.defineProperty(tt,ht,Object.getOwnPropertyDescriptor(Mt,ht))})}return tt}function Ji(tt){var Tt=za();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function za(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var va=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;
}
`,so=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;


vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5C06\u539F\u672C 0 -> 1 \u7684 uv \u8F6C\u6362\u4E3A -1 -> 1 \u7684\u6807\u51C6\u5750\u6807\u7A7A\u95F4\uFF08NDC\uFF09

  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5E73\u9762\u4E0A\u7684\u70B9\uFF08z == 0\uFF09\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E09\u7EF4\u4E0A\u7684\u70B9\u88AB\u6295\u5F71\u5230\u5E73\u9762\u540E\u7684\u70B9
	vec4 p2 = vec4(pos, 1.0, 1.0); // \u5E73\u884C\u4E8Ex/y\u5E73\u9762\u3001z==1 \u7684\u5E73\u9762\u4E0A\u7684\u70B9

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636E\u89C6\u56FE\u6295\u5F71\u77E9\u9635\u7684\u9006\u77E9\u9635\u5E73\u9762\u4E0A\u7684\u53CD\u7B97\u51FA\u4E09\u7EF4\u7A7A\u95F4\u4E2D\u7684\u70B9\uFF08p1\u5E73\u9762\u4E0A\u7684\u70B9\uFF09
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w; // \u5F52\u4E00\u5316\u64CD\u4F5C\uFF08\u5F52\u4E00\u5316\u540E\u4E3A\u4E16\u754C\u5750\u6807\uFF09
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);
 
}
`,Ia=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,io=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,uo=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));
    } else {
        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
    }
}
`,ka=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
varying float v_intensity;
void main() {
  v_texCoord = a_Uv;
  v_intensity = texture2D(u_texture, v_texCoord).r;
  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,vo=(kn=Object(K.injectable)(),kn(Xr=(vi=function(tt){s()(Mt,tt);var Tt=Ji(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht.colorTexture=void 0,ht.heatmapFramerBuffer=void 0,ht.intensityModel=void 0,ht.colorModel=void 0,ht.shapeType=void 0,ht}return t()(Mt,[{key:"render",value:function(){var _t=this,Lt=this.rendererService,Gt=Lt.clear,le=Lt.useFramebuffer;le(this.heatmapFramerBuffer,function(){Gt({color:[0,0,0,0],depth:1,stencil:0,framebuffer:_t.heatmapFramerBuffer}),_t.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var _t,Lt=this.rendererService,Gt=Lt.createFramebuffer,le=Lt.clear,we=Lt.getViewportSize,Xe=Lt.createTexture2D,yn=Lt.useFramebuffer,Pn=this.styleAttributeService.getLayerStyleAttribute("shape"),Er=(Pn==null||(_t=Pn.scale)===null||_t===void 0?void 0:_t.field)||"heatmap";this.shapeType=Er,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel=Er==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap();var Dr=this.layer.getLayerConfig(),fi=Dr.rampColors,Ai=Object(O.n)(fi),Fi=we(),fa=Fi.width,ga=Fi.height;return this.heatmapFramerBuffer=Gt({color:Xe({width:Math.floor(fa/4),height:Math.floor(ga/4),wrapS:U.gl.CLAMP_TO_EDGE,wrapT:U.gl.CLAMP_TO_EDGE,min:U.gl.LINEAR,mag:U.gl.LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:U.AttributeType.Attribute,descriptor:{name:"a_Dir",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Lt,Gt,le,we){return[le[3],le[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Lt,Gt,le,we){var Xe=Lt.size,yn=Xe===void 0?1:Xe;return[yn]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:uo,fragmentShader:io,triangulation:zr,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:U.gl.ONE,srcAlpha:1,dstRGB:U.gl.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:ka,fs:Ia});var _t=this.shaderModuleService.getModule("heatmapColor"),Lt=_t.vs,Gt=_t.fs,le=_t.uniforms,we=this.rendererService,Xe=we.createAttribute,yn=we.createElements,Pn=we.createBuffer,Er=we.createModel;return Er({vs:Lt,fs:Gt,attributes:{a_Position:Xe({buffer:Pn({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:U.gl.FLOAT}),size:3}),a_Uv:Xe({buffer:Pn({data:[0,1,1,1,0,0,1,0],type:U.gl.FLOAT}),size:2})},uniforms:ji({},le),depth:{enable:!1},blend:this.getBlend(),count:6,elements:yn({data:[0,2,1,2,3,1],type:U.gl.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.intensity,le=Gt===void 0?10:Gt,we=_t.radius,Xe=we===void 0?5:we;this.intensityModel.draw({uniforms:{u_opacity:Lt||1,u_radius:Xe,u_intensity:le}})}},{key:"drawColorMode",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity;this.colorModel.draw({uniforms:{u_opacity:Lt||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=wn.b.create();wn.b.invert(Gt,this.cameraService.getViewProjectionMatrixUncentered()),this.colorModel.draw({uniforms:{u_opacity:Lt||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:Ne()(Gt)}})}},{key:"build3dHeatMap",value:function(){var _t=this.rendererService.getViewportSize,Lt=_t(),Gt=Lt.width,le=Lt.height,we=er(Gt/4,le/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:so,fs:va});var Xe=this.shaderModuleService.getModule("heatmap3dColor"),yn=Xe.vs,Pn=Xe.fs,Er=Xe.uniforms,Dr=this.rendererService,fi=Dr.createAttribute,Ai=Dr.createElements,Fi=Dr.createBuffer,fa=Dr.createModel;return fa({vs:yn,fs:Pn,attributes:{a_Position:fi({buffer:Fi({data:we.vertices,type:U.gl.FLOAT}),size:3}),a_Uv:fi({buffer:Fi({data:we.uvs,type:U.gl.FLOAT}),size:2})},primitive:U.gl.TRIANGLES,uniforms:ji({},Er),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:U.gl.SRC_ALPHA,srcAlpha:1,dstRGB:U.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:Ai({data:we.indices,type:U.gl.UNSIGNED_INT,count:we.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var _t=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var Lt=this.layer.getLayerConfig(),Gt=Lt.rampColors,le=Object(O.n)(Gt);this.colorTexture=_t({data:new Uint8Array(le.data),width:le.width,height:le.height,wrapS:U.gl.CLAMP_TO_EDGE,wrapT:U.gl.CLAMP_TO_EDGE,min:U.gl.NEAREST,mag:U.gl.NEAREST,flipY:!1})}}]),Mt}(Je),vi))||Xr);function Vo(tt){var Tt=Do();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Do(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var fs=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,mo=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
 
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));
    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT;
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));
    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,Ga=function(tt){s()(Mt,tt);var Tt=Vo(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.coverage,le=_t.angle;return{u_opacity:Lt||1,u_coverage:Gt||.9,u_angle:le||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:mo,fragmentShader:fs,triangulation:Tn,depth:{enable:!1},primitive:U.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt){var le=Lt.version==="GAODE2.x"?Lt.originCoordinates:Lt.coordinates;return[le[0],le[1],0]}}})}}]),Mt}(Je),us={heatmap:vo,heatmap3d:vo,grid:je,grid3d:Vn,hexagon:Ga},Xo=us;function Ta(tt){var Tt=mn();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function mn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var cr=function(tt){s()(Mt,tt);var Tt=Ta(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.type="HeatMapLayer",ht}return t()(Mt,[{key:"buildModels",value:function(){var _t=this.getModelType();this.layerModel=new Xo[_t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var _t=this,Lt=this.getModelType();return Lt==="heatmap"?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Gt){return Gt.draw({uniforms:_t.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var _t,Lt=this.styleAttributeService.getLayerStyleAttribute("shape"),Gt=this.getLayerConfig(),le=Gt.shape3d,we=this.getSource(),Xe=we.data.type,yn=(Lt==null||(_t=Lt.scale)===null||_t===void 0?void 0:_t.field)||"heatmap";return yn==="heatmap"||yn==="heatmap3d"?"heatmap":Xe==="hexagon"?(le==null?void 0:le.indexOf(yn))===-1?"hexagon":"grid3d":Xe==="grid"?(le==null?void 0:le.indexOf(yn))===-1?"grid":"grid3d":"heatmap"}}]),Mt}(yt);function Wr(tt){var Tt=Di();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Di(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ua=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,yo=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,lo=function(tt){s()(Mt,tt);var Tt=Wr(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity;return{u_opacity:Lt||1,u_texture:this.texture}}},{key:"initModels",value:function(){var _t=this,Lt=this.layer.getSource(),Gt=this.rendererService.createTexture2D;return this.texture=Gt({height:0,width:0}),Lt.data.images.then(function(le){_t.texture=Gt({data:le[0],width:le[0].width,height:le[0].height}),_t.layerService.renderLayers()}),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:yo,fragmentShader:Ua,triangulation:Cr,primitive:U.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Lt,Gt,le,we){return[le[3],le[4]]}}})}}]),Mt}(Je),La={image:lo},Va=La;function ts(tt){var Tt=ls();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function ls(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ki=function(tt){s()(Mt,tt);var Tt=ts(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.type="ImageLayer",ht}return t()(Mt,[{key:"buildModels",value:function(){var _t=this.getModelType();this.layerModel=new Va[_t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var _t=this.getModelType(),Lt={image:{}};return Lt[_t]}},{key:"getModelType",value:function(){return"image"}}]),Mt}(yt);function _u(tt){var Tt=Fo();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Fo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var hs=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying float v_segmentIndex;
varying float v_arcDistrance;
varying float v_pixelLen;
varying float v_a;
varying vec2 v_offset;
varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // gl_FragColor = v_color;
  
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      animateSpeed = u_time / u_aimate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, v_distance_ratio);
    // float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = floor(v_arcDistrance/v_pixelLen);

    float u = 1.0 - fract(arcRadio * count + animateSpeed);

    if(u_aimate.x == Animate) {
      u = gl_FragColor.a/u_opacity;
    }
    float v = length(v_offset)/(v_a); // \u6A2A\u5411
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= u_opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    // gl_FragColor = vec4(1.0 - fract(arcRadio * 20000.0), 0.0, 0.0, 1.0);
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
    // gl_FragColor = filterColor(texture2D(u_texture, uv));
    
  } else {
     gl_FragColor = filterColor(gl_FragColor);
  }
  // gl_FragColor = filterColor(gl_FragColor);

}`,$s=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_lineDir: 1.0;
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;
varying float v_arcDistrance;
varying float v_pixelLen;
varying float v_a;
varying vec2 v_offset;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  

  vec2 source = a_Instance.rg;
  vec2 target =  a_Instance.ba;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  if(u_line_type == LineTypeDash) {
      v_distance_ratio = segmentIndex / segmentNumber;
      vec2 s = source;
      vec2 t = target;
      
      if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
        s = unProjCustomCoord(source);
        t = unProjCustomCoord(target);
      }
      float total_Distance = pixelDistance(s, t) / 2.0 * PI;
      // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        v_distance_ratio = 1.0 - v_distance_ratio;
      }
  }

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));

  v_segmentIndex = a_Position.x + 1.0;
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    v_arcDistrance = length(source - target);
    v_iconMapUV = a_iconMapUV;
    v_pixelLen = project_pixel(u_icon_step);
    v_a = project_pixel(a_Size);
    v_offset = offset + offset * sign(a_Position.y);
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,ds={solid:0,dash:1},vs=function(tt){s()(Mt,tt);var Tt=_u(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht.updateTexture=function(){var le=ht.rendererService.createTexture2D;if(ht.texture){ht.texture.update({data:ht.iconService.getCanvas()}),ht.layer.render();return}ht.texture=le({data:ht.iconService.getCanvas(),mag:U.gl.NEAREST,min:U.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:ht.iconService.canvasHeight||128})},ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.sourceColor,le=_t.targetColor,we=_t.textureBlend,Xe=we===void 0?"normal":we,yn=_t.lineType,Pn=yn===void 0?"solid":yn,Er=_t.dashArray,Dr=Er===void 0?[10,5]:Er,fi=_t.forward,Ai=fi===void 0?!0:fi,Fi=_t.lineTexture,fa=Fi===void 0?!1:Fi,ga=_t.iconStep,Xa=ga===void 0?100:ga;Dr.length===2&&Dr.push(0,0);var Sa=0,Lo=[0,0,0,0],Ls=[0,0,0,0];return Gt&&le&&(Lo=Object(O.s)(Gt),Ls=Object(O.s)(le),Sa=1),this.rendererService.getDirty()&&this.texture.bind(),{u_opacity:Lt===void 0?1:Lt,u_textureBlend:Xe==="normal"?0:1,segmentNumber:30,u_line_type:ds[Pn||"solid"],u_dash_array:Dr,u_blur:.9,u_lineDir:Ai?1:-1,u_texture:this.texture,u_line_texture:fa?1:0,u_icon_step:Xa,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Sa,u_sourceColor:Lo,u_targetColor:Ls}}},{key:"getAnimateUniforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.animateOption;return{u_aimate:this.animateOption2Array(Lt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:$s,fragmentShader:hs,triangulation:pr,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var _t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Gt,le,we,Xe){var yn=Gt.size,Pn=yn===void 0?1:yn;return Array.isArray(Pn)?[Pn[0]]:[Pn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Gt,le,we,Xe){return[we[3],we[4],we[5],we[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Gt,le,we,Xe){var yn=_t.iconService.getIconMap(),Pn=Gt.texture,Er=yn[Pn]||{x:0,y:0},Dr=Er.x,fi=Er.y;return[Dr,fi]}}})}}]),Mt}(Je);function Qs(tt){var Tt=Mu();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ps=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;
varying float v_arcDistrance;
varying float v_pixelLen;
varying float v_a;
varying vec2 v_offset;
varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  // gl_FragColor = v_color;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      animateSpeed = u_time / u_aimate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);

      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = floor(v_arcDistrance/v_pixelLen);

    float u = fract(arcRadio * count - animateSpeed * count);
 
    if(u_aimate.x == Animate) {
      u = gl_FragColor.a/u_opacity;
    }
    float v = length(v_offset)/(v_a); // \u6A2A\u5411

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= u_opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    

    // gl_FragColor = filterColor(gl_FragColor + pattern);

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,wu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;
varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;
varying float v_arcDistrance;
varying float v_pixelLen;
varying float v_a;
varying vec2 v_offset;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

   if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    v_arcDistrance = length(source - target);
    v_pixelLen = project_pixel(u_icon_step);

    vec2 projectOffset = project_pixel(offset);
    v_offset = projectOffset + projectOffset * sign(a_Position.y);
    v_a = project_pixel(a_Size);
    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,Ds={solid:0,dash:1},Aa=function(tt){s()(Mt,tt);var Tt=Qs(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht.updateTexture=function(){var le=ht.rendererService.createTexture2D;if(ht.texture){ht.texture.update({data:ht.iconService.getCanvas()}),ht.layer.render();return}ht.texture=le({data:ht.iconService.getCanvas(),mag:U.gl.NEAREST,min:U.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:ht.iconService.canvasHeight||128})},ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.sourceColor,le=_t.targetColor,we=_t.textureBlend,Xe=we===void 0?"normal":we,yn=_t.lineType,Pn=yn===void 0?"solid":yn,Er=_t.dashArray,Dr=Er===void 0?[10,5]:Er,fi=_t.lineTexture,Ai=fi===void 0?!1:fi,Fi=_t.iconStep,fa=Fi===void 0?100:Fi;Dr.length===2&&Dr.push(0,0);var ga=0,Xa=[0,0,0,0],Sa=[0,0,0,0];return Gt&&le&&(Xa=Object(O.s)(Gt),Sa=Object(O.s)(le),ga=1),this.rendererService.getDirty()&&this.texture.bind(),{u_opacity:Lt===void 0?1:Lt,u_textureBlend:Xe==="normal"?0:1,segmentNumber:30,u_line_type:Ds[Pn]||0,u_dash_array:Dr,u_texture:this.texture,u_line_texture:Ai?1:0,u_icon_step:fa,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ga,u_sourceColor:Xa,u_targetColor:Sa}}},{key:"getAnimateUniforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.animateOption;return{u_aimate:this.animateOption2Array(Lt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:wu,fragmentShader:ps,triangulation:pr,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var _t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Gt,le,we,Xe){var yn=Gt.size,Pn=yn===void 0?1:yn;return Array.isArray(Pn)?[Pn[0]]:[Pn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Gt,le,we,Xe){return[we[3],we[4],we[5],we[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Gt,le,we,Xe){var yn=_t.iconService.getIconMap(),Pn=Gt.texture,Er=yn[Pn]||{x:0,y:0},Dr=Er.x,fi=Er.y;return[Dr,fi]}}})}}]),Mt}(Je);function lu(tt){var Tt=Pu();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Pu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Zu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float segmentNumber;
varying float v_segmentIndex;
varying float v_arcDistrance;
varying float v_pixelLen;
varying vec2 v_offset;
varying float v_a;
varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0;
  // gl_FragColor = v_color;
  
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      animateSpeed = u_time / u_aimate.y;
      // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / (segmentNumber - 1.0)));
      // float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      float alpha =1.0 - fract( mod(1.0- smoothstep(0.0, 1.0, v_distance_ratio), u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      // alpha = clamp(alpha, 0.1, 1.0);
      // if(alpha < 0.01) alpha = 0.0;
      gl_FragColor.a *= alpha;
  }

  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F
    float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = floor(v_arcDistrance/v_pixelLen);
    // float u = fract(arcRadio * count);
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_aimate.x == Animate) {
      u = gl_FragColor.a;
    }

    float v = length(v_offset)/(v_a); // \u6A2A\u5411

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);
    

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= u_opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    // gl_FragColor = filterColor(gl_FragColor + pattern);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,vl=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;
varying float v_arcDistrance;
varying float v_pixelLen;
varying vec2 v_offset;
varying float v_a;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*8.0;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    v_arcDistrance = length(source - target);
    v_pixelLen = project_pixel(u_icon_step)/8.0;

    v_a = project_pixel(a_Size);
    v_offset = offset + offset * sign(a_Position.y);
    v_iconMapUV = a_iconMapUV;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  }
  setPickingColor(a_PickingColor);
}

`,Tu={solid:0,dash:1},Ao=function(tt){s()(Mt,tt);var Tt=lu(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht.updateTexture=function(){var le=ht.rendererService.createTexture2D;if(ht.texture){ht.texture.update({data:ht.iconService.getCanvas()}),ht.layer.render();return}ht.texture=le({data:ht.iconService.getCanvas(),mag:U.gl.NEAREST,min:U.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:ht.iconService.canvasHeight||128})},ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.sourceColor,le=_t.targetColor,we=_t.textureBlend,Xe=we===void 0?"normal":we,yn=_t.lineType,Pn=yn===void 0?"solid":yn,Er=_t.dashArray,Dr=Er===void 0?[10,5]:Er,fi=_t.lineTexture,Ai=fi===void 0?!1:fi,Fi=_t.iconStep,fa=Fi===void 0?100:Fi;Dr.length===2&&Dr.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var ga=0,Xa=[0,0,0,0],Sa=[0,0,0,0];return Gt&&le&&(Xa=Object(O.s)(Gt),Sa=Object(O.s)(le),ga=1),{u_opacity:Lt===void 0?1:Lt,u_textureBlend:Xe==="normal"?0:1,segmentNumber:30,u_line_type:Tu[Pn]||0,u_dash_array:Dr,u_texture:this.texture,u_line_texture:Ai?1:0,u_icon_step:fa,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ga,u_sourceColor:Xa,u_targetColor:Sa}}},{key:"getAnimateUniforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.animateOption;return{u_aimate:this.animateOption2Array(Lt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:vl,fragmentShader:Zu,triangulation:pr,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var _t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Gt,le,we,Xe){var yn=Gt.size,Pn=yn===void 0?1:yn;return Array.isArray(Pn)?[Pn[0]]:[Pn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Gt,le,we,Xe){return[we[3],we[4],we[5],we[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Gt,le,we,Xe){var yn=_t.iconService.getIconMap(),Pn=Gt.texture,Er=yn[Pn]||{x:0,y:0},Dr=Er.x,fi=Er.y;return[Dr,fi]}}})}}]),Mt}(Je);function es(tt){var Tt=gs();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function gs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var po=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
uniform float u_blur : 0.99;
uniform float u_line_type: 0.0;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;
varying vec4 v_color;
varying vec2 v_normal;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

// dash
uniform float u_dash_offset : 0.0;
uniform float u_dash_ratio : 0.1;
varying float v_distance_ratio;
varying vec4 v_dash_array;
varying float v_side;

varying float v_distance;
varying vec2 v_offset;
varying float v_a;
varying float v_pixelLen;
varying vec2 v_iconMapUV;
varying float v_strokeWidth;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8
// [animate, duration, interval, trailLength],
void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  // gl_FragColor = v_color;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= u_opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_aimate.x == Animate) {
      animateSpeed = u_time / u_aimate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + animateSpeed);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
 // dash line
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
    // gl_FragColor.a *=(1.0- step(v_dash_array.x, mod(v_distance_ratio, dashLength)));
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    float u = fract(mod(v_distance, v_pixelLen)/v_pixelLen - animateSpeed);
    float v = length(v_offset)/(v_a*2.0);
    v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= u_opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
  // gl_FragColor = filterColor(vec4(1.0, 0.0, 0.0, 1.0));
 
  // float r = max(smoothstep( 0.95, 1.0, v_strokeWidth/(v_a*2.0)), v_strokeWidth/(v_a*2.0));
  // if(rV < r || rV > 1.0 - r) {
  //   gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
  // } 
  // float v = length(v_offset)/(v_a*2.0);
  // if(v > 0.9) {
  //   gl_FragColor = vec4(0.17647, 0.43921568, 0.2, 1.0);
  // } else if(v < 0.1) {
  //   gl_FragColor = vec4(0.17647, 0.43921568, 0.2, 1.0);
  // }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,cu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;
varying vec2 v_normal;
varying float v_distance_ratio;
varying float v_side;

varying float v_distance;
varying vec2 v_offset;
varying float v_size;
varying float v_a;
varying float v_pixelLen;
varying vec2 v_iconMapUV;
uniform float u_linearColor: 0;
// varying float v_strokeWidth;

void main() {
  
  v_iconMapUV = a_iconMapUV;
  v_distance = a_Distance;
  v_pixelLen = project_pixel(u_icon_step);

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = a_Distance / a_Total_Distance;
    // v_distance_ratio = 0.01;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  }
  if(u_aimate.x == Animate || u_linearColor == 1.0) {
      v_distance_ratio = a_Distance / a_Total_Distance;
  }
  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));


  v_color = a_Color;
  v_a = project_pixel(a_Size.x);

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);

  vec2 offset = project_pixel(size.xy);
  // v_strokeWidth = project_pixel(2.0);

  v_offset = offset + offset * sign(a_Miter);

  v_side = a_Miter * a_Size.x;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xy + offset, a_Size.y, 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, a_Size.y / 10.0, 1.0)); // \u989D\u5916\u9664 10.0 \u662F\u4E3A\u4E86\u548Cgaode1.x\u7684\u9AD8\u5EA6\u517C\u5BB9
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Oo={solid:0,dash:1},ba=function(tt){s()(Mt,tt);var Tt=es(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht.updateTexture=function(){var le=ht.rendererService.createTexture2D;if(ht.texture){ht.texture.update({data:ht.iconService.getCanvas()}),ht.layer.render();return}ht.texture=le({data:ht.iconService.getCanvas(),mag:U.gl.NEAREST,min:U.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:ht.iconService.canvasHeight||128})},ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.sourceColor,le=_t.targetColor,we=_t.textureBlend,Xe=we===void 0?"normal":we,yn=_t.lineType,Pn=yn===void 0?"solid":yn,Er=_t.dashArray,Dr=Er===void 0?[10,5,0,0]:Er,fi=_t.lineTexture,Ai=fi===void 0?!1:fi,Fi=_t.iconStep,fa=Fi===void 0?100:Fi;Dr.length===2&&Dr.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var ga=0,Xa=[0,0,0,0],Sa=[0,0,0,0];return Gt&&le&&(Xa=Object(O.s)(Gt),Sa=Object(O.s)(le),ga=1),{u_opacity:Lt===void 0?1:Lt,u_textureBlend:Xe==="normal"?0:1,u_line_type:Oo[Pn],u_dash_array:Dr,u_texture:this.texture,u_line_texture:Ai?1:0,u_icon_step:fa,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ga,u_sourceColor:Xa,u_targetColor:Sa}}},{key:"getAnimateUniforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.animateOption;return{u_aimate:this.animateOption2Array(Lt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:cu,fragmentShader:po,triangulation:Nn,primitive:U.gl.TRIANGLES,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){var _t=this,Lt=this.layer.getLayerConfig(),Gt=Lt.lineType,le=Gt===void 0?"solid":Gt;this.styleAttributeService.registerStyleAttribute({name:"distance",type:U.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Xe,yn,Pn,Er){return[Pn[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:U.AttributeType.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Xe,yn,Pn,Er){return[Pn[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Xe,yn,Pn,Er){var Dr=Xe.size,fi=Dr===void 0?1:Dr;return Array.isArray(fi)?[fi[0],fi[1]]:[fi,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Xe,yn,Pn,Er,Dr){return Dr}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:U.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Xe,yn,Pn,Er){return[Pn[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Xe,yn,Pn,Er){var Dr=_t.iconService.getIconMap(),fi=Xe.texture,Ai=Dr[fi]||{x:0,y:0},Fi=Ai.x,fa=Ai.y;return[Fi,fa]}}})}},{key:"loadImage",value:function(_t){return new Promise(function(Lt,Gt){if(_t instanceof HTMLImageElement){Lt(_t);return}var le=new Image;le.crossOrigin="anonymous",le.onload=function(){Lt(le)},le.onerror=function(){Gt(new Error("Could not load image at "+_t))},le.src=_t instanceof File?URL.createObjectURL(_t):_t})}}]),Mt}(Je),As={arc:vs,arc3d:Aa,greatcircle:Ao,line:ba},qs=As;function js(tt){var Tt=ms();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function ms(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Au=function(tt){s()(Mt,tt);var Tt=js(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.type="LineLayer",ht}return t()(Mt,[{key:"buildModels",value:function(){var _t=this.getModelType();this.layerModel=new qs[_t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var _t=this.getModelType(),Lt={line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}};return Lt[_t]}},{key:"getModelType",value:function(){var _t,Lt=this.styleAttributeService.getLayerStyleAttribute("shape"),Gt=Lt==null||(_t=Lt.scale)===null||_t===void 0?void 0:_t.field;return Gt||"line"}}]),Mt}(yt);function ks(tt){var Tt=Ya();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Ya(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var nl=`varying vec4 v_color;
uniform float u_opacity: 1.0;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Zl=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec3 size = a_Size * a_Position;

  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);

  float lightWeight = calc_lighting(pos);
  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }
  setPickingColor(a_PickingColor);
}
`,Al=function(tt){s()(Mt,tt);var Tt=ks(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.offsets;return{u_opacity:Lt||1,u_offsets:Gt||[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:Zl,fragmentShader:nl,triangulation:Dn,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt,le,we){var Xe=Lt.size;if(Xe){var yn=[];return Array.isArray(Xe)&&(yn=Xe.length===2?[Xe[0],Xe[0],Xe[1]]:Xe),Array.isArray(Xe)||(yn=[Xe]),yn}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt,le,we,Xe){return Xe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt){var le=ae(Lt.coordinates);return[le[0],le[1],0]}}})}}]),Mt}(Je);function pl(tt){var Tt=Ku();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Ku(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Cu=`#define Animate 0.0

uniform float u_blur : 0;
uniform float u_opacity : 1;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  lowp float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);
  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  // gl_FragColor = v_color * color_t;
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;
  if(u_aimate.x == Animate) {
    float d = length(v_data.xy);
    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
    gl_FragColor = vec4(gl_FragColor.xyz, intensity);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Gs=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec2 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_stroke_width : 2;
uniform vec2 u_offsets;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // TODO: billboard
  // anti-alias
  float antialiasblur = 1.0 / u_DevicePixelRatio / (newSize + u_stroke_width);

  // construct point coords
  v_data = vec4(extrude, antialiasblur,shape_type);

  vec2 offset = project_pixel(extrude * (newSize + u_stroke_width) + u_offsets);
  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Cl=function(tt){s()(Mt,tt);var Tt=pl(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=Lt===void 0?1:Lt,le=_t.stroke,we=le===void 0?"rgb(0,0,0,0)":le,Xe=_t.strokeWidth,yn=Xe===void 0?1:Xe,Pn=_t.strokeOpacity,Er=Pn===void 0?1:Pn,Dr=_t.offsets,fi=Dr===void 0?[0,0]:Dr;return{u_opacity:Gt,u_stroke_width:yn,u_stroke_color:Object(O.s)(we),u_stroke_opacity:Er,u_offsets:[-fi[0],fi[1]]}}},{key:"getAnimateUniforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.animateOption;return{u_aimate:this.animateOption2Array(Lt),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),En)}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:Gs,fragmentShader:Cu,triangulation:En,depth:{enable:!1},blend:this.getBlend()})]}},{key:"animateOption2Array",value:function(_t){return[_t.enable?0:1,_t.speed||1,_t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var _t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:U.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Gt,le,we,Xe){var yn=[1,1,-1,1,-1,-1,1,-1],Pn=Xe%4*2;return[yn[Pn],yn[Pn+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Gt,le,we,Xe){var yn=Gt.size,Pn=yn===void 0?5:yn;return Array.isArray(Pn)?[Pn[0]]:[Pn]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:U.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Gt,le,we,Xe){var yn=Gt.shape,Pn=yn===void 0?2:yn,Er=_t.layer.getLayerConfig().shape2d,Dr=Er.indexOf(Pn);return[Dr]}}})}}]),Mt}(Je);function ns(tt){var Tt=Wa();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Wa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var fu=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
      vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor=texture2D(u_texture,pos);
      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }
      gl_FragColor.a =gl_FragColor.a * u_opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,Xu=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
    } else {
      gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
    }
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,Ll=function(tt){s()(Mt,tt);var Tt=ns(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity;return{u_opacity:Lt||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var _t=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){_t.updateTexture(),_t.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:Xu,fragmentShader:fu,triangulation:Sn,primitive:U.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var _t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Gt,le,we,Xe){var yn=Gt.size;return Array.isArray(yn)?[yn[0]]:[yn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Gt,le,we,Xe){var yn=_t.fontService.mapping,Pn=Gt.shape,Er=_t.fontService.getGlyph(Pn),Dr=yn[Er],fi=Dr.x,Ai=Dr.y;return[fi,Ai]}}})}},{key:"updateTexture",value:function(){var _t=this.rendererService.createTexture2D,Lt=this.fontService.canvas;this.texture=_t({data:Lt,mag:U.gl.LINEAR,min:U.gl.LINEAR,width:Lt.width,height:Lt.height})}},{key:"initIconFontGlyphs",value:function(){var _t=this,Lt=this.layer.getLayerConfig(),Gt=Lt.fontWeight,le=Gt===void 0?"normal":Gt,we=Lt.fontFamily,Xe=we===void 0?"sans-serif":we,yn=this.layer.getEncodedData(),Pn=[];yn.forEach(function(Er){var Dr=Er.shape,fi=Dr===void 0?"":Dr;fi=fi.toString();var Ai=_t.fontService.getGlyph(fi);Pn.indexOf(Ai)===-1&&Pn.push(Ai)}),this.fontService.setFontOptions({characterSet:Pn,fontWeight:le,fontFamily:Xe,fontSize:48})}}]),Mt}(Je);function Uu(tt){var Tt=Vs();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Vs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var rl=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
      vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor=texture2D(u_texture,pos);
      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }
      gl_FragColor.a =gl_FragColor.a * u_opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,hu=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
    } else {
      gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
    }
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,Ss=function(tt){s()(Mt,tt);var Tt=Uu(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht.updateTexture=function(){var le=ht.rendererService.createTexture2D;if(ht.texture){ht.texture.update({data:ht.iconService.getCanvas()}),ht.layer.render();return}ht.texture=le({data:ht.iconService.getCanvas(),mag:U.gl.NEAREST,min:U.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:ht.iconService.canvasHeight||128})},ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=_t.offsets,le=Gt===void 0?[0,0]:Gt;return this.rendererService.getDirty()&&this.texture.bind(),{u_opacity:Lt||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_offsets:[-le[0],le[1]]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:hu,fragmentShader:rl,triangulation:Sn,primitive:U.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var _t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Gt,le,we,Xe){var yn=Gt.size,Pn=yn===void 0?5:yn;return Array.isArray(Pn)?[Pn[0]]:[Pn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Gt,le,we,Xe){var yn=_t.iconService.getIconMap(),Pn=Gt.shape,Er=yn[Pn]||{x:0,y:0},Dr=Er.x,fi=Er.y;return[Dr,fi]}}})}}]),Mt}(Je);function Ws(tt){var Tt=gl();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function gl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Iu=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "picking"
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a =gl_FragColor.a * u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Lu=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform vec2 u_offsets;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  // vec2 offset = project_pixel(u_offsets);
  // vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  // gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\\
  // 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 offset = project_pixel((u_offsets));
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec2 offset = project_pixel(u_offsets);
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function du(tt){var Tt=tt.coordinates;return{vertices:Ne()(Tt),indices:[0],size:Tt.length}}var vu=function(tt){s()(Mt,tt);var Tt=Ws(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=Lt===void 0?1:Lt,le=_t.stroke,we=le===void 0?"rgb(0,0,0,0)":le,Xe=_t.strokeWidth,yn=Xe===void 0?1:Xe,Pn=_t.offsets,Er=Pn===void 0?[0,0]:Pn;return{u_opacity:Gt,u_stroke_width:yn,u_stroke_color:Object(O.s)(we),u_offsets:[-Er[0],Er[1]]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:Lu,fragmentShader:Iu,triangulation:du,depth:{enable:!1},primitive:U.gl.POINTS,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Lt,Gt,le,we){var Xe=Lt.size,yn=Xe===void 0?1:Xe;return Array.isArray(yn)?[yn[0]]:[yn]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:U.BlendType.additive}}}]),Mt}(Je);function pu(tt,Tt){var Mt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(Mt=Ol(tt))||Tt&&tt&&typeof tt.length=="number"){Mt&&(tt=Mt);var ht=0,_t=function(){};return{s:_t,n:function(){return ht>=tt.length?{done:!0}:{done:!1,value:tt[ht++]}},e:function(Xe){throw Xe},f:_t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt=!0,Gt=!1,le;return{s:function(){Mt=tt[Symbol.iterator]()},n:function(){var Xe=Mt.next();return Lt=Xe.done,Xe},e:function(Xe){Gt=!0,le=Xe},f:function(){try{!Lt&&Mt.return!=null&&Mt.return()}finally{if(Gt)throw le}}}}function Ol(tt,Tt){if(!!tt){if(typeof tt=="string")return rc(tt,Tt);var Mt=Object.prototype.toString.call(tt).slice(8,-1);if(Mt==="Object"&&tt.constructor&&(Mt=tt.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(tt);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return rc(tt,Tt)}}function rc(tt,Tt){(Tt==null||Tt>tt.length)&&(Tt=tt.length);for(var Mt=0,ht=new Array(Tt);Mt<Tt;Mt++)ht[Mt]=tt[Mt];return ht}var ql=function(){function tt(Tt,Mt,ht){T()(this,tt),this.boxCells=[],this.xCellCount=void 0,this.yCellCount=void 0,this.boxKeys=void 0,this.bboxes=void 0,this.width=void 0,this.height=void 0,this.xScale=void 0,this.yScale=void 0,this.boxUid=void 0;var _t=this.boxCells;this.xCellCount=Math.ceil(Tt/ht),this.yCellCount=Math.ceil(Mt/ht);for(var Lt=0;Lt<this.xCellCount*this.yCellCount;Lt++)_t.push([]);this.boxKeys=[],this.bboxes=[],this.width=Tt,this.height=Mt,this.xScale=this.xCellCount/Tt,this.yScale=this.yCellCount/Mt,this.boxUid=0}return t()(tt,[{key:"insert",value:function(Mt,ht,_t,Lt,Gt){this.forEachCell(ht,_t,Lt,Gt,this.insertBoxCell,this.boxUid++),this.boxKeys.push(Mt),this.bboxes.push(ht),this.bboxes.push(_t),this.bboxes.push(Lt),this.bboxes.push(Gt)}},{key:"query",value:function(Mt,ht,_t,Lt,Gt){return this.queryHitTest(Mt,ht,_t,Lt,!1,Gt)}},{key:"hitTest",value:function(Mt,ht,_t,Lt,Gt){return this.queryHitTest(Mt,ht,_t,Lt,!0,Gt)}},{key:"insertBoxCell",value:function(Mt,ht,_t,Lt,Gt,le){this.boxCells[Gt].push(le)}},{key:"queryHitTest",value:function(Mt,ht,_t,Lt,Gt,le){if(_t<0||Mt>this.width||Lt<0||ht>this.height)return Gt?!1:[];var we=[];if(Mt<=0&&ht<=0&&this.width<=_t&&this.height<=Lt){if(Gt)return!0;for(var Xe=0;Xe<this.boxKeys.length;Xe++)we.push({key:this.boxKeys[Xe],x1:this.bboxes[Xe*4],y1:this.bboxes[Xe*4+1],x2:this.bboxes[Xe*4+2],y2:this.bboxes[Xe*4+3]});return le?we.filter(le):we}var yn={hitTest:Gt,seenUids:{box:{},circle:{}}};return this.forEachCell(Mt,ht,_t,Lt,this.queryCell,we,yn,le),Gt?we.length>0:we}},{key:"queryCell",value:function(Mt,ht,_t,Lt,Gt,le,we,Xe){var yn=we.seenUids,Pn=this.boxCells[Gt];if(Pn!==null){var Er=this.bboxes,Dr=pu(Pn),fi;try{for(Dr.s();!(fi=Dr.n()).done;){var Ai=fi.value;if(!yn.box[Ai]){yn.box[Ai]=!0;var Fi=Ai*4;if(Mt<=Er[Fi+2]&&ht<=Er[Fi+3]&&_t>=Er[Fi+0]&&Lt>=Er[Fi+1]&&(!Xe||Xe(this.boxKeys[Ai]))){if(we.hitTest)return le.push(!0),!0;le.push({key:this.boxKeys[Ai],x1:Er[Fi],y1:Er[Fi+1],x2:Er[Fi+2],y2:Er[Fi+3]})}}}}catch(fa){Dr.e(fa)}finally{Dr.f()}}return!1}},{key:"forEachCell",value:function(Mt,ht,_t,Lt,Gt,le,we,Xe){for(var yn=this.convertToXCellCoord(Mt),Pn=this.convertToYCellCoord(ht),Er=this.convertToXCellCoord(_t),Dr=this.convertToYCellCoord(Lt),fi=yn;fi<=Er;fi++)for(var Ai=Pn;Ai<=Dr;Ai++){var Fi=this.xCellCount*Ai+fi;if(Gt.call(this,Mt,ht,_t,Lt,Fi,le,we,Xe))return}}},{key:"convertToXCellCoord",value:function(Mt){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Mt*this.xScale)))}},{key:"convertToYCellCoord",value:function(Mt){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Mt*this.yScale)))}}]),tt}(),gu=ql,Nl=function(){function tt(Tt,Mt){T()(this,tt),this.width=void 0,this.height=void 0,this.grid=void 0,this.viewportPadding=100,this.screenRightBoundary=void 0,this.screenBottomBoundary=void 0,this.gridRightBoundary=void 0,this.gridBottomBoundary=void 0,this.width=Tt,this.height=Mt,this.viewportPadding=Math.max(Tt,Mt),this.grid=new gu(Tt+this.viewportPadding,Mt+this.viewportPadding,25),this.screenRightBoundary=Tt+this.viewportPadding,this.screenBottomBoundary=Mt+this.viewportPadding,this.gridRightBoundary=Tt+2*this.viewportPadding,this.gridBottomBoundary=Mt+2*this.viewportPadding}return t()(tt,[{key:"placeCollisionBox",value:function(Mt){var ht=Mt.x1+Mt.anchorPointX+this.viewportPadding,_t=Mt.y1+Mt.anchorPointY+this.viewportPadding,Lt=Mt.x2+Mt.anchorPointX+this.viewportPadding,Gt=Mt.y2+Mt.anchorPointY+this.viewportPadding;return!this.isInsideGrid(ht,_t,Lt,Gt)||this.grid.hitTest(ht,_t,Lt,Gt)?{box:[]}:{box:[ht,_t,Lt,Gt]}}},{key:"insertCollisionBox",value:function(Mt,ht){var _t={featureIndex:ht};this.grid.insert(_t,Mt[0],Mt[1],Mt[2],Mt[3])}},{key:"project",value:function(Mt,ht,_t){var Lt=wn.e.fromValues(ht,_t,0,1),Gt=wn.e.create(),le=wn.b.fromValues.apply(wn.b,Ne()(Mt));return wn.e.transformMat4(Gt,Lt,le),{x:(Gt[0]/Gt[3]+1)/2*this.width+this.viewportPadding,y:(-Gt[1]/Gt[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(Mt,ht,_t,Lt){return _t>=0&&Mt<this.gridRightBoundary&&Lt>=0&&ht<this.gridBottomBoundary}}]),tt}();function tc(tt,Tt){var Mt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(Mt=Ou(tt))||Tt&&tt&&typeof tt.length=="number"){Mt&&(tt=Mt);var ht=0,_t=function(){};return{s:_t,n:function(){return ht>=tt.length?{done:!0}:{done:!1,value:tt[ht++]}},e:function(Xe){throw Xe},f:_t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt=!0,Gt=!1,le;return{s:function(){Mt=tt[Symbol.iterator]()},n:function(){var Xe=Mt.next();return Lt=Xe.done,Xe},e:function(Xe){Gt=!0,le=Xe},f:function(){try{!Lt&&Mt.return!=null&&Mt.return()}finally{if(Gt)throw le}}}}function Ou(tt,Tt){if(!!tt){if(typeof tt=="string")return ml(tt,Tt);var Mt=Object.prototype.toString.call(tt).slice(8,-1);if(Mt==="Object"&&tt.constructor&&(Mt=tt.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(tt);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return ml(tt,Tt)}}function ml(tt,Tt){(Tt==null||Tt>tt.length)&&(Tt=tt.length);for(var Mt=0,ht=new Array(Tt);Mt<Tt;Mt++)ht[Mt]=tt[Mt];return ht}function wl(tt){var Tt=.5,Mt=.5;switch(tt){case"right":case"top-right":case"bottom-right":Tt=1;break;case"left":case"top-left":case"bottom-left":Tt=0;break;default:Tt=.5}switch(tt){case"bottom":case"bottom-right":case"bottom-left":Mt=1;break;case"top":case"top-right":case"top-left":Mt=0;break;default:Mt=.5}return{horizontalAlign:Tt,verticalAlign:Mt}}function Bs(tt,Tt,Mt,ht,_t){if(!!_t){var Lt=tt[ht],Gt=Lt.glyph;if(Gt)for(var le=Tt[Gt].advance*Lt.scale,we=(tt[ht].x+le)*_t,Xe=Mt;Xe<=ht;Xe++)tt[Xe].x-=we}}function ao(tt,Tt,Mt,ht,_t,Lt,Gt){var le=(Tt-Mt)*_t,we=(-ht*Gt+.5)*Lt,Xe=tc(tt),yn;try{for(Xe.s();!(yn=Xe.n()).done;){var Pn=yn.value;Pn.x+=le,Pn.y+=we}}catch(Er){Xe.e(Er)}finally{Xe.f()}}function yl(tt,Tt,Mt,ht,_t,Lt,Gt){var le=-8,we=0,Xe=le,yn=0,Pn=tt.positionedGlyphs,Er=Lt==="right"?1:Lt==="left"?0:.5,Dr=Pn.length;Mt.forEach(function(ga){if(ga.split("").forEach(function(Sa){var Lo=Tt[Sa],Ls=0;Lo&&(Pn.push({glyph:Sa,x:we,y:Xe+Ls,vertical:!1,scale:1,metrics:Lo}),we+=Lo.advance+Gt)}),Pn.length!==Dr){var Xa=we-Gt;yn=Math.max(Xa,yn),Bs(Pn,Tt,Dr,Pn.length-1,Er)}we=0,Xe+=ht});var fi=wl(_t),Ai=fi.horizontalAlign,Fi=fi.verticalAlign;ao(Pn,Er,Ai,Fi,yn,ht,Mt.length);var fa=Xe-le;tt.top+=-Fi*fa,tt.bottom=tt.top+fa,tt.left+=-Ai*yn,tt.right=tt.left+yn}function il(tt,Tt,Mt,ht,_t,Lt,Gt){var le=-8,we=0,Xe=le,yn=0,Pn=tt.positionedGlyphs,Er=Lt==="right"?1:Lt==="left"?0:.5,Dr=Pn.length;Mt.forEach(function(ga){var Xa=Tt[ga],Sa=0;if(Xa&&(Pn.push({glyph:ga,x:we,y:Xe+Sa,vertical:!1,scale:1,metrics:Xa}),we+=Xa.advance+Gt),Pn.length!==Dr){var Lo=we-Gt;yn=Math.max(Lo,yn),Bs(Pn,Tt,Dr,Pn.length-1,Er)}we=0,Xe+=ht});var fi=wl(_t),Ai=fi.horizontalAlign,Fi=fi.verticalAlign;ao(Pn,Er,Ai,Fi,yn,ht,Mt.length);var fa=Xe-le;tt.top+=-Fi*fa,tt.bottom=tt.top+fa,tt.left+=-Ai*yn,tt.right=tt.left+yn}function Hs(tt,Tt,Mt,ht,_t,Lt){var Gt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],le=arguments.length>7?arguments[7]:void 0,we=tt.split(`
`),Xe=[],yn={positionedGlyphs:Xe,top:Gt[1],bottom:Gt[1],left:Gt[0],right:Gt[0],lineCount:we.length,text:tt};return le?il(yn,Tt,we,Mt,ht,_t,Lt):yl(yn,Tt,we,Mt,ht,_t,Lt),Xe.length?yn:!1}function Ra(tt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],Mt=arguments.length>2?arguments[2]:void 0,ht=tt.positionedGlyphs,_t=ht===void 0?[]:ht,Lt=[],Gt=tc(_t),le;try{for(Gt.s();!(le=Gt.n()).done;){var we=le.value,Xe=we.metrics,yn=4,Pn=Xe.advance*we.scale/2,Er=Mt?[we.x+Pn,we.y]:[0,0],Dr=Mt?[0,0]:[we.x+Pn+Tt[0],we.y+Tt[1]],fi=(0-yn)*we.scale-Pn+Dr[0],Ai=(0-yn)*we.scale+Dr[1],Fi=fi+Xe.width*we.scale,fa=Ai+Xe.height*we.scale,ga={x:fi,y:Ai},Xa={x:Fi,y:Ai},Sa={x:fi,y:fa},Lo={x:Fi,y:fa};Lt.push({tl:ga,tr:Xa,bl:Sa,br:Lo,tex:Xe,glyphOffset:Er})}}catch(Ls){Gt.e(Ls)}finally{Gt.f()}return Lt}function xo(tt,Tt){var Mt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(Mt=ru(tt))||Tt&&tt&&typeof tt.length=="number"){Mt&&(tt=Mt);var ht=0,_t=function(){};return{s:_t,n:function(){return ht>=tt.length?{done:!0}:{done:!1,value:tt[ht++]}},e:function(Xe){throw Xe},f:_t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt=!0,Gt=!1,le;return{s:function(){Mt=tt[Symbol.iterator]()},n:function(){var Xe=Mt.next();return Lt=Xe.done,Xe},e:function(Xe){Gt=!0,le=Xe},f:function(){try{!Lt&&Mt.return!=null&&Mt.return()}finally{if(Gt)throw le}}}}function ru(tt,Tt){if(!!tt){if(typeof tt=="string")return xl(tt,Tt);var Mt=Object.prototype.toString.call(tt).slice(8,-1);if(Mt==="Object"&&tt.constructor&&(Mt=tt.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(tt);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return xl(tt,Tt)}}function xl(tt,Tt){(Tt==null||Tt>tt.length)&&(Tt=tt.length);for(var Mt=0,ht=new Array(Tt);Mt<Tt;Mt++)ht[Mt]=tt[Mt];return ht}function al(tt){var Tt=ku();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function ku(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var zl=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform float u_stroke_opacity: 1.0;
uniform vec4 u_stroke : [0, 0, 0, 1];
uniform float u_strokeWidth : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

#pragma include "picking"
void main() {
  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  lowp float buff = (6.0 - u_strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke.rgb, u_stroke.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,cs=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp * (vec4(a_Position.xyz, 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function bl(tt){var Tt=this,Mt=tt.id,ht=[],_t=[];if(!Tt.glyphInfoMap||!Tt.glyphInfoMap[Mt])return{vertices:[],indices:[],size:7};var Lt=Tt.glyphInfoMap[Mt].centroid,Gt=Lt.length===2?[Lt[0],Lt[1],0]:Lt;return Tt.glyphInfoMap[Mt].glyphQuads.forEach(function(le,we){ht.push.apply(ht,Ne()(Gt).concat([le.tex.x,le.tex.y+le.tex.height,le.tl.x,le.tl.y],Ne()(Gt),[le.tex.x+le.tex.width,le.tex.y+le.tex.height,le.tr.x,le.tr.y],Ne()(Gt),[le.tex.x+le.tex.width,le.tex.y,le.br.x,le.br.y],Ne()(Gt),[le.tex.x,le.tex.y,le.bl.x,le.bl.y])),_t.push(0+we*4,1+we*4,2+we*4,2+we*4,3+we*4,0+we*4)}),{vertices:ht,indices:_t,size:7}}var mu=function(tt){s()(Mt,tt);var Tt=al(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.glyphInfo=void 0,ht.glyphInfoMap={},ht.texture=void 0,ht.currentZoom=-1,ht.extent=void 0,ht.textureHeight=0,ht.textCount=0,ht.preTextStyle={},ht.buildModels=function(){return ht.initGlyph(),ht.updateTexture(),ht.filterGlyphs(),[ht.layer.buildLayerModel({moduleName:"pointText",vertexShader:cs,fragmentShader:zl,triangulation:bl.bind(g()(ht)),depth:{enable:!1},blend:ht.getBlend()})]},ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=Lt===void 0?1:Lt,le=_t.stroke,we=le===void 0?"#fff":le,Xe=_t.strokeWidth,yn=Xe===void 0?0:Xe,Pn=_t.strokeOpacity,Er=Pn===void 0?1:Pn,Dr=_t.textAnchor,fi=Dr===void 0?"center":Dr,Ai=_t.textAllowOverlap,Fi=Ai===void 0?!1:Ai,fa=_t.halo,ga=fa===void 0?.5:fa,Xa=_t.gamma,Sa=Xa===void 0?2:Xa,Lo=this.fontService,Ls=Lo.canvas,eo=Lo.mapping;return Object.keys(eo).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(eo).length),this.preTextStyle={textAnchor:fi,textAllowOverlap:Fi},{u_opacity:Gt,u_stroke_opacity:Er,u_sdf_map:this.texture,u_stroke:Object(O.s)(we),u_halo_blur:ga,u_gamma_scale:Sa,u_sdf_map_size:[Ls.width,Ls.height],u_strokeWidth:yn}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var _t=this.layer.getLayerConfig(),Lt=_t.textAnchor,Gt=Lt===void 0?"center":Lt,le=_t.textAllowOverlap,we=le===void 0?!0:le;return this.preTextStyle={textAnchor:Gt,textAllowOverlap:we},this.buildModels()}},{key:"needUpdate",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.textAllowOverlap,Gt=Lt===void 0?!1:Lt,le=this.mapService.getZoom(),we=this.mapService.getBounds(),Xe=Object(O.j)(this.extent,we);return!Gt&&(Math.abs(this.currentZoom-le)>1||!Xe)||Gt!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:U.AttributeType.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Lt,Gt,le,we){var Xe=Lt.rotate,yn=Xe===void 0?0:Xe;return Array.isArray(yn)?[yn[0]]:[yn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:U.AttributeType.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Lt,Gt,le,we){return[le[5],le[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Lt,Gt,le,we){var Xe=Lt.size,yn=Xe===void 0?12:Xe;return Array.isArray(yn)?[yn[0]]:[yn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:U.AttributeType.Attribute,descriptor:{name:"a_tex",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Lt,Gt,le,we){return[le[3],le[4]]}}})}},{key:"textExtent",value:function(){var _t=this.mapService.getBounds();return Object(O.r)(_t,.5)}},{key:"initTextFont",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.fontWeight,Gt=Lt===void 0?"400":Lt,le=_t.fontFamily,we=le===void 0?"sans-serif":le,Xe=this.layer.getEncodedData(),yn=[];Xe.forEach(function(Pn){var Er=Pn.shape,Dr=Er===void 0?"":Er;Dr=Dr.toString();var fi=xo(Dr),Ai;try{for(fi.s();!(Ai=fi.n()).done;){var Fi=Ai.value;yn.indexOf(Fi)===-1&&yn.push(Fi)}}catch(fa){fi.e(fa)}finally{fi.f()}}),this.fontService.setFontOptions({characterSet:yn,fontWeight:Gt,fontFamily:we,iconfont:!1})}},{key:"initIconFontTex",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.fontWeight,Gt=Lt===void 0?"400":Lt,le=_t.fontFamily,we=le===void 0?"sans-serif":le,Xe=this.layer.getEncodedData(),yn=[];Xe.forEach(function(Pn){var Er=Pn.shape,Dr=Er===void 0?"":Er;Dr=Dr.toString(),yn.indexOf(Dr)===-1&&yn.push(Dr)}),this.fontService.setFontOptions({characterSet:yn,fontWeight:Gt,fontFamily:we,iconfont:!0})}},{key:"generateGlyphLayout",value:function(_t){var Lt=this,Gt=this.fontService.mapping,le=this.layer.getLayerConfig(),we=le.spacing,Xe=we===void 0?2:we,yn=le.textAnchor,Pn=yn===void 0?"center":yn,Er=le.textOffset,Dr=this.layer.getEncodedData();this.glyphInfo=Dr.map(function(fi){var Ai=fi.shape,Fi=Ai===void 0?"":Ai,fa=fi.id,ga=fi.size,Xa=ga===void 0?1:ga,Sa=Hs(Fi.toString(),Gt,Xa,Pn,"center",Xe,Er,_t),Lo=Ra(Sa,Er,!1);return fi.shaping=Sa,fi.glyphQuads=Lo,fi.centroid=ae(fi.coordinates),fi.originCentroid=fi.version==="GAODE2.x"?ae(fi.originCoordinates):fi.originCentroid=fi.centroid,Lt.glyphInfoMap[fa]={shaping:Sa,glyphQuads:Lo,centroid:ae(fi.coordinates)},fi})}},{key:"filterGlyphs",value:function(){var _t=this,Lt=this.layer.getLayerConfig(),Gt=Lt.padding,le=Gt===void 0?[4,4]:Gt,we=Lt.textAllowOverlap,Xe=we===void 0?!1:we;if(!Xe){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var yn=this.rendererService.getViewportSize(),Pn=yn.width,Er=yn.height,Dr=new Nl(Pn,Er),fi=this.glyphInfo.filter(function(Ai){var Fi=Ai.shaping,fa=Ai.id,ga=fa===void 0?0:fa,Xa=Ai.version==="GAODE2.x"?Ai.originCentroid:Ai.centroid,Sa=Ai.size,Lo=Sa/24,Ls=_t.mapService.lngLatToContainer(Xa),eo=Dr.placeCollisionBox({x1:Fi.left*Lo-le[0],x2:Fi.right*Lo+le[0],y1:Fi.top*Lo-le[1],y2:Fi.bottom*Lo+le[1],anchorPointX:Ls.x,anchorPointY:Ls.y}),Su=eo.box;return Su&&Su.length?(Dr.insertCollisionBox(Su,ga),!0):!1});fi.forEach(function(Ai){_t.glyphInfoMap[Ai.id]=Ai})}}},{key:"initGlyph",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.iconfont,Gt=Lt===void 0?!1:Lt;Gt?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(Gt)}},{key:"updateTexture",value:function(){var _t=this.rendererService.createTexture2D,Lt=this.fontService.canvas;this.textureHeight=Lt.height,this.texture&&this.texture.destroy(),this.texture=_t({data:Lt,mag:U.gl.LINEAR,min:U.gl.LINEAR,width:Lt.width,height:Lt.height})}},{key:"reBuildModel",value:function(){this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:cs,fragmentShader:zl,triangulation:bl.bind(this),depth:{enable:!1},blend:this.getBlend()})]}}]),Mt}(Je),Fs={fill:Cl,image:Ss,normal:vu,extrude:Al,text:mu,icon:Ll},Wo=Fs;function _s(tt){var Tt=iu();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ho=function(tt){s()(Mt,tt);var Tt=_s(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.type="PointLayer",ht}return t()(Mt,[{key:"buildModels",value:function(){var _t=this.getModelType();this.layerModel=new Wo[_t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var _t=this.getModelType(),Lt={normal:{blend:"additive"},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}};return Lt[_t]}},{key:"getModelType",value:function(){var _t=this.getEncodedData(),Lt=this.getLayerConfig(),Gt=Lt.shape2d,le=Lt.shape3d,we=this.iconService.getIconMap(),Xe=_t.find(function(Pn){return Pn.hasOwnProperty("shape")});if(Xe){var yn=Xe.shape;return yn==="dot"?"normal":(Gt==null?void 0:Gt.indexOf(yn))!==-1?"fill":(le==null?void 0:le.indexOf(yn))!==-1?"extrude":we.hasOwnProperty(yn)?"image":this.fontService.getGlyph(yn)!==""?"icon":"text"}else return"normal"}}]),Mt}(yt);function Ni(tt){var Tt=Ns();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function Ns(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var El=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,ol=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,No=function(tt){s()(Mt,tt);var Tt=Ni(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=Lt===void 0?1:Lt;return{u_opacity:Gt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:ol,fragmentShader:El,triangulation:Gn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Lt,Gt,le,we,Xe){return Xe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Lt,Gt,le,we){var Xe=Lt.size,yn=Xe===void 0?10:Xe;return Array.isArray(yn)?[yn[0]]:[yn]}}})}}]),Mt}(Je);function Co(tt){var Tt=tu();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function tu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var mi=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ru=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}

`,Du=function(tt){s()(Mt,tt);var Tt=Co(Mt);function Mt(){return T()(this,Mt),Tt.apply(this,arguments)}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=Lt===void 0?1:Lt;return{u_opacity:Gt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:Ru,fragmentShader:mi,triangulation:nr,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){}}]),Mt}(Je),ju={fill:Du,line:ba,extrude:No,text:mu,point_fill:Cl,point_image:Ss,point_normal:vu,point_extrude:Al},Cs=ju;function Ae(tt){var Tt=_e();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function _e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var pn=function(tt){s()(Mt,tt);var Tt=Ae(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.type="PolygonLayer",ht}return t()(Mt,[{key:"buildModels",value:function(){var _t=this.getModelType();this.layerModel=new Cs[_t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var _t,Lt=this.styleAttributeService.getLayerStyleAttribute("shape"),Gt=Lt==null||(_t=Lt.scale)===null||_t===void 0?void 0:_t.field;return Gt==="fill"?"fill":Gt==="extrude"?"extrude":Gt==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var _t=this.getEncodedData(),Lt=this.getLayerConfig(),Gt=Lt.shape2d,le=Lt.shape3d,we=this.iconService.getIconMap(),Xe=_t.find(function(Pn){return Pn.hasOwnProperty("shape")});if(Xe){var yn=Xe.shape;return yn==="dot"?"point_normal":(Gt==null?void 0:Gt.indexOf(yn))!==-1?"point_fill":(le==null?void 0:le.indexOf(yn))!==-1?"point_extrude":we.hasOwnProperty(yn)?"point_image":"text"}else return"fill"}}]),Mt}(yt);function an(tt){var Tt=In();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function In(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var hr=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,Lr=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Zr=function(tt){s()(Mt,tt);var Tt=an(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.texture=void 0,ht.colorTexture=void 0,ht}return t()(Mt,[{key:"getUninforms",value:function(){var _t=this.layer.getLayerConfig(),Lt=_t.opacity,Gt=Lt===void 0?1:Lt,le=_t.clampLow,we=le===void 0?!0:le,Xe=_t.clampHigh,yn=Xe===void 0?!0:Xe,Pn=_t.noDataValue,Er=Pn===void 0?-9999999:Pn,Dr=_t.domain,fi=Dr===void 0?[0,1]:Dr;return this.updateColorTexure(),{u_opacity:Gt||1,u_texture:this.texture,u_domain:fi,u_clampLow:we,u_clampHigh:typeof yn!="undefined"?yn:we,u_noDataValue:Er,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var _t=this.layer.getSource(),Lt=this.rendererService.createTexture2D,Gt=_t.data.dataArray[0];this.texture=Lt({data:Gt.data,width:Gt.width,height:Gt.height,format:U.gl.LUMINANCE,type:U.gl.FLOAT});var le=this.layer.getLayerConfig(),we=le.rampColors,Xe=Object(O.n)(we);return this.colorTexture=Lt({data:Xe.data,width:Xe.width,height:Xe.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:Lr,fragmentShader:hr,triangulation:Cr,primitive:U.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Lt,Gt,le,we){return[le[3],le[4]]}}})}},{key:"updateColorTexure",value:function(){var _t=this.rendererService.createTexture2D,Lt=this.layer.getLayerConfig(),Gt=Lt.rampColors,le=Object(O.n)(Gt);this.colorTexture=_t({data:le.data,width:le.width,height:le.height,flipY:!1})}}]),Mt}(Je),ei={raster:Zr,raster3d:Zr},Ur=ei;function hi(tt){var Tt=br();return function(){var ht=n()(tt),_t;if(Tt){var Lt=n()(this).constructor;_t=Reflect.construct(ht,arguments,Lt)}else _t=ht.apply(this,arguments);return r()(this,_t)}}function br(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Xt=function(tt){s()(Mt,tt);var Tt=hi(Mt);function Mt(){var ht;T()(this,Mt);for(var _t=arguments.length,Lt=new Array(_t),Gt=0;Gt<_t;Gt++)Lt[Gt]=arguments[Gt];return ht=Tt.call.apply(Tt,[this].concat(Lt)),ht.type="RasterLayer",ht}return t()(Mt,[{key:"buildModels",value:function(){var _t=this.getModelType();this.layerModel=new Ur[_t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var _t=this.getModelType(),Lt={raster:{},raster3d:{}};return Lt[_t]}},{key:"getModelType",value:function(){return"raster"}}]),Mt}(yt),ee=L("BkRI"),Oe=L.n(ee),Ee,jt,zt,se,ie,he,Be,Ze,on,$e,gn,vn;function Xn(tt,Tt){var Mt=Object.keys(tt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(tt);Tt&&(ht=ht.filter(function(_t){return Object.getOwnPropertyDescriptor(tt,_t).enumerable})),Mt.push.apply(Mt,ht)}return Mt}function Wn(tt){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?Xn(Object(Mt),!0).forEach(function(ht){l()(tt,ht,Mt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Mt)):Xn(Object(Mt)).forEach(function(ht){Object.defineProperty(tt,ht,Object.getOwnPropertyDescriptor(Mt,ht))})}return tt}var Jn=(Ee=Object(K.injectable)(),jt=Object(K.inject)(U.TYPES.IGlobalConfigService),zt=Object(K.inject)(U.TYPES.ILogService),se=Object(K.inject)(U.TYPES.IMapService),ie=Object(K.inject)(U.TYPES.IFontService),Ee(he=(Be=(vn=function(){function tt(){T()(this,tt),v()(this,"configService",Ze,this),v()(this,"logger",on,this),v()(this,"mapService",$e,this),v()(this,"fontService",gn,this)}return t()(tt,[{key:"apply",value:function(Mt,ht){var _t=this,Lt=ht.styleAttributeService;Mt.hooks.init.tap("DataMappingPlugin",function(){_t.generateMaping(Mt,{styleAttributeService:Lt})}),Mt.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return Mt.dataState.dataMappingNeedUpdate=!1,_t.generateMaping(Mt,{styleAttributeService:Lt}),!0}),Mt.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!Mt.layerModelNeedUpdate){var Gt=Lt.getLayerStyleAttributes()||[],le=Lt.getLayerStyleAttribute("filter"),we=Mt.getSource().data.dataArray,Xe=Gt.filter(function(Pn){return Pn.needRemapping}),yn=we;le!=null&&le.needRemapping&&le!==null&&le!==void 0&&le.scale&&(yn=we.filter(function(Pn){return _t.applyAttributeMapping(le,Pn)[0]})),Xe.length&&(le!=null&&le.needRemapping?(Mt.setEncodedData(_t.mapping(Gt,yn)),le.needRemapping=!1):Mt.setEncodedData(_t.mapping(Xe,yn,Mt.getEncodedData())),_t.logger.debug("remapping finished"),Mt.emit("remapping",null))}})}},{key:"generateMaping",value:function(Mt,ht){var _t=this,Lt=ht.styleAttributeService,Gt=Lt.getLayerStyleAttributes()||[],le=Lt.getLayerStyleAttribute("filter"),we=Mt.getSource().data.dataArray,Xe=we;le!=null&&le.scale&&(Xe=we.filter(function(yn){return _t.applyAttributeMapping(le,yn)[0]})),Mt.setEncodedData(this.mapping(Gt,Xe))}},{key:"mapping",value:function(Mt,ht,_t){var Lt=this,Gt=ht.map(function(le,we){var Xe=_t?_t[we]:{},yn=Wn({id:le._id,coordinates:le.coordinates},Xe);return Mt.filter(function(Pn){return Pn.scale!==void 0}).forEach(function(Pn){var Er=Lt.applyAttributeMapping(Pn,le);Pn.needRemapping=!1,Pn.name==="color"&&(Er=Er.map(function(Dr){return Object(O.s)(Dr)})),yn[Pn.name]=Array.isArray(Er)&&Er.length===1?Er[0]:Er,Pn.name==="shape"&&(yn.shape=Lt.fontService.getIconFontKey(yn[Pn.name]))}),yn});return Gt.length>0&&this.mapService.version==="GAODE2.x"&&(typeof Gt[0].coordinates[0]=="number"?Gt.map(function(le){le.version="GAODE2.x",le.originCoordinates=Oe()(le.coordinates),le.coordinates=Lt.mapService.lngLatToCoord(le.coordinates)}):Gt.map(function(le){le.version="GAODE2.x",le.originCoordinates=Oe()(le.coordinates),le.coordinates=Lt.mapService.lngLatToCoords(le.coordinates)})),Gt}},{key:"applyAttributeMapping",value:function(Mt,ht){var _t;if(!Mt.scale)return[];var Lt=(Mt==null||(_t=Mt.scale)===null||_t===void 0?void 0:_t.scalers)||[],Gt=[];return Lt.forEach(function(le){var we,Xe=le.field;(ht.hasOwnProperty(Xe)||((we=Mt.scale)===null||we===void 0?void 0:we.type)==="variable")&&Gt.push(ht[Xe])}),Mt.mapping?Mt.mapping(Gt):[]}}]),tt}(),vn),Ze=_()(Be.prototype,"configService",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=_()(Be.prototype,"logger",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=_()(Be.prototype,"mapService",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gn=_()(Be.prototype,"fontService",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be))||he),Hn=L("rlAn"),fr,xr,Vr,gi=(fr=Object(K.injectable)(),fr(xr=(Vr=function(){function tt(){T()(this,tt),this.mapService=void 0}return t()(tt,[{key:"apply",value:function(Mt){var ht=this;this.mapService=Mt.getContainer().get(U.TYPES.IMapService),Mt.hooks.init.tap("DataSourcePlugin",function(){var _t=Mt.getSource();if(!_t){var Lt=Mt.sourceOption,Gt=Lt.data,le=Lt.options;Mt.setSource(new Hn.default(Gt,le))}ht.updateClusterData(Mt)}),Mt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var _t=ht.updateClusterData(Mt),Lt=Mt.dataState.dataSourceNeedUpdate;return Mt.dataState.dataSourceNeedUpdate=!1,_t||Lt})}},{key:"updateClusterData",value:function(Mt){var ht=Mt.getSource(),_t=ht.cluster,Lt=ht.clusterOptions,Gt=Lt.zoom,le=Gt===void 0?0:Gt,we=Lt.maxZoom,Xe=we===void 0?16:we,yn=this.mapService.getZoom()-1,Pn=Mt.dataState.dataSourceNeedUpdate;return _t&&(Pn||Math.abs(le-yn)>1)&&Xe>le?(ht.updateClusterData(Math.floor(yn)),!0):!1}}]),tt}(),Vr))||xr),Fr=L("7tbW"),ai=L.n(Fr),yi=L("4qC0"),Ui=L.n(yi),Pi=L("J2iB"),pa=L.n(Pi),ta=function(tt,Tt){return tt<Tt?-1:tt>Tt?1:tt>=Tt?0:NaN},oa=function(tt){return tt.length===1&&(tt=si(tt)),{left:function(Mt,ht,_t,Lt){for(_t==null&&(_t=0),Lt==null&&(Lt=Mt.length);_t<Lt;){var Gt=_t+Lt>>>1;tt(Mt[Gt],ht)<0?_t=Gt+1:Lt=Gt}return _t},right:function(Mt,ht,_t,Lt){for(_t==null&&(_t=0),Lt==null&&(Lt=Mt.length);_t<Lt;){var Gt=_t+Lt>>>1;tt(Mt[Gt],ht)>0?Lt=Gt:_t=Gt+1}return _t}}};function si(tt){return function(Tt,Mt){return ta(tt(Tt),Mt)}}var ma=oa(ta),to=ma.right,Ha=ma.left,_i=to,Fa=function(tt,Tt){Tt==null&&(Tt=Za);for(var Mt=0,ht=tt.length-1,_t=tt[0],Lt=new Array(ht<0?0:ht);Mt<ht;)Lt[Mt]=Tt(_t,_t=tt[++Mt]);return Lt};function Za(tt,Tt){return[tt,Tt]}var Os=function(tt,Tt,Mt){var ht=tt.length,_t=Tt.length,Lt=new Array(ht*_t),Gt,le,we,Xe;for(Mt==null&&(Mt=Za),Gt=we=0;Gt<ht;++Gt)for(Xe=tt[Gt],le=0;le<_t;++le,++we)Lt[we]=Mt(Xe,Tt[le]);return Lt},Ms=function(tt,Tt){return Tt<tt?-1:Tt>tt?1:Tt>=tt?0:NaN},ws=function(tt){return tt===null?NaN:+tt},au=function(tt,Tt){var Mt=tt.length,ht=0,_t=-1,Lt=0,Gt,le,we=0;if(Tt==null)for(;++_t<Mt;)isNaN(Gt=ws(tt[_t]))||(le=Gt-Lt,Lt+=le/++ht,we+=le*(Gt-Lt));else for(;++_t<Mt;)isNaN(Gt=ws(Tt(tt[_t],_t,tt)))||(le=Gt-Lt,Lt+=le/++ht,we+=le*(Gt-Lt));if(ht>1)return we/(ht-1)},j=function(tt,Tt){var Mt=au(tt,Tt);return Mt&&Math.sqrt(Mt)},I=function(tt,Tt){var Mt=tt.length,ht=-1,_t,Lt,Gt;if(Tt==null){for(;++ht<Mt;)if((_t=tt[ht])!=null&&_t>=_t)for(Lt=Gt=_t;++ht<Mt;)(_t=tt[ht])!=null&&(Lt>_t&&(Lt=_t),Gt<_t&&(Gt=_t))}else for(;++ht<Mt;)if((_t=Tt(tt[ht],ht,tt))!=null&&_t>=_t)for(Lt=Gt=_t;++ht<Mt;)(_t=Tt(tt[ht],ht,tt))!=null&&(Lt>_t&&(Lt=_t),Gt<_t&&(Gt=_t));return[Lt,Gt]},w=Array.prototype,B=w.slice,D=w.map,G=function(tt){return function(){return tt}},Q=function(tt){return tt},ut=function(tt,Tt,Mt){tt=+tt,Tt=+Tt,Mt=(_t=arguments.length)<2?(Tt=tt,tt=0,1):_t<3?1:+Mt;for(var ht=-1,_t=Math.max(0,Math.ceil((Tt-tt)/Mt))|0,Lt=new Array(_t);++ht<_t;)Lt[ht]=tt+ht*Mt;return Lt},wt=Math.sqrt(50),It=Math.sqrt(10),kt=Math.sqrt(2),Yt=function(tt,Tt,Mt){var ht,_t=-1,Lt,Gt,le;if(Tt=+Tt,tt=+tt,Mt=+Mt,tt===Tt&&Mt>0)return[tt];if((ht=Tt<tt)&&(Lt=tt,tt=Tt,Tt=Lt),(le=qt(tt,Tt,Mt))===0||!isFinite(le))return[];if(le>0)for(tt=Math.ceil(tt/le),Tt=Math.floor(Tt/le),Gt=new Array(Lt=Math.ceil(Tt-tt+1));++_t<Lt;)Gt[_t]=(tt+_t)*le;else for(tt=Math.floor(tt*le),Tt=Math.ceil(Tt*le),Gt=new Array(Lt=Math.ceil(tt-Tt+1));++_t<Lt;)Gt[_t]=(tt-_t)/le;return ht&&Gt.reverse(),Gt};function qt(tt,Tt,Mt){var ht=(Tt-tt)/Math.max(0,Mt),_t=Math.floor(Math.log(ht)/Math.LN10),Lt=ht/Math.pow(10,_t);return _t>=0?(Lt>=wt?10:Lt>=It?5:Lt>=kt?2:1)*Math.pow(10,_t):-Math.pow(10,-_t)/(Lt>=wt?10:Lt>=It?5:Lt>=kt?2:1)}function ce(tt,Tt,Mt){var ht=Math.abs(Tt-tt)/Math.max(0,Mt),_t=Math.pow(10,Math.floor(Math.log(ht)/Math.LN10)),Lt=ht/_t;return Lt>=wt?_t*=10:Lt>=It?_t*=5:Lt>=kt&&(_t*=2),Tt<tt?-_t:_t}var ye=function(tt){return Math.ceil(Math.log(tt.length)/Math.LN2)+1},Le=function(){var tt=Q,Tt=I,Mt=ye;function ht(_t){var Lt,Gt=_t.length,le,we=new Array(Gt);for(Lt=0;Lt<Gt;++Lt)we[Lt]=tt(_t[Lt],Lt,_t);var Xe=Tt(we),yn=Xe[0],Pn=Xe[1],Er=Mt(we,yn,Pn);Array.isArray(Er)||(Er=ce(yn,Pn,Er),Er=ut(Math.ceil(yn/Er)*Er,Pn,Er));for(var Dr=Er.length;Er[0]<=yn;)Er.shift(),--Dr;for(;Er[Dr-1]>Pn;)Er.pop(),--Dr;var fi=new Array(Dr+1),Ai;for(Lt=0;Lt<=Dr;++Lt)Ai=fi[Lt]=[],Ai.x0=Lt>0?Er[Lt-1]:yn,Ai.x1=Lt<Dr?Er[Lt]:Pn;for(Lt=0;Lt<Gt;++Lt)le=we[Lt],yn<=le&&le<=Pn&&fi[_i(Er,le,0,Dr)].push(_t[Lt]);return fi}return ht.value=function(_t){return arguments.length?(tt=typeof _t=="function"?_t:G(_t),ht):tt},ht.domain=function(_t){return arguments.length?(Tt=typeof _t=="function"?_t:G([_t[0],_t[1]]),ht):Tt},ht.thresholds=function(_t){return arguments.length?(Mt=typeof _t=="function"?_t:Array.isArray(_t)?G(B.call(_t)):G(_t),ht):Mt},ht},Ce=function(tt,Tt,Mt){if(Mt==null&&(Mt=ws),!!(ht=tt.length)){if((Tt=+Tt)<=0||ht<2)return+Mt(tt[0],0,tt);if(Tt>=1)return+Mt(tt[ht-1],ht-1,tt);var ht,_t=(ht-1)*Tt,Lt=Math.floor(_t),Gt=+Mt(tt[Lt],Lt,tt),le=+Mt(tt[Lt+1],Lt+1,tt);return Gt+(le-Gt)*(_t-Lt)}},ke=function(tt,Tt,Mt){return tt=D.call(tt,ws).sort(ta),Math.ceil((Mt-Tt)/(2*(Ce(tt,.75)-Ce(tt,.25))*Math.pow(tt.length,-1/3)))},nn=function(tt,Tt,Mt){return Math.ceil((Mt-Tt)/(3.5*j(tt)*Math.pow(tt.length,-1/3)))},ln=function(tt,Tt){var Mt=tt.length,ht=-1,_t,Lt;if(Tt==null){for(;++ht<Mt;)if((_t=tt[ht])!=null&&_t>=_t)for(Lt=_t;++ht<Mt;)(_t=tt[ht])!=null&&_t>Lt&&(Lt=_t)}else for(;++ht<Mt;)if((_t=Tt(tt[ht],ht,tt))!=null&&_t>=_t)for(Lt=_t;++ht<Mt;)(_t=Tt(tt[ht],ht,tt))!=null&&_t>Lt&&(Lt=_t);return Lt},Qn=function(tt,Tt){var Mt=tt.length,ht=Mt,_t=-1,Lt,Gt=0;if(Tt==null)for(;++_t<Mt;)isNaN(Lt=ws(tt[_t]))?--ht:Gt+=Lt;else for(;++_t<Mt;)isNaN(Lt=ws(Tt(tt[_t],_t,tt)))?--ht:Gt+=Lt;if(ht)return Gt/ht},Yn=function(tt,Tt){var Mt=tt.length,ht=-1,_t,Lt=[];if(Tt==null)for(;++ht<Mt;)isNaN(_t=ws(tt[ht]))||Lt.push(_t);else for(;++ht<Mt;)isNaN(_t=ws(Tt(tt[ht],ht,tt)))||Lt.push(_t);return Ce(Lt.sort(ta),.5)},dr=function(tt){for(var Tt=tt.length,Mt,ht=-1,_t=0,Lt,Gt;++ht<Tt;)_t+=tt[ht].length;for(Lt=new Array(_t);--Tt>=0;)for(Gt=tt[Tt],Mt=Gt.length;--Mt>=0;)Lt[--_t]=Gt[Mt];return Lt},Mr=function(tt,Tt){var Mt=tt.length,ht=-1,_t,Lt;if(Tt==null){for(;++ht<Mt;)if((_t=tt[ht])!=null&&_t>=_t)for(Lt=_t;++ht<Mt;)(_t=tt[ht])!=null&&Lt>_t&&(Lt=_t)}else for(;++ht<Mt;)if((_t=Tt(tt[ht],ht,tt))!=null&&_t>=_t)for(Lt=_t;++ht<Mt;)(_t=Tt(tt[ht],ht,tt))!=null&&Lt>_t&&(Lt=_t);return Lt},$r=function(tt,Tt){for(var Mt=Tt.length,ht=new Array(Mt);Mt--;)ht[Mt]=tt[Tt[Mt]];return ht},Kr=function(tt,Tt){if(!!(Mt=tt.length)){var Mt,ht=0,_t=0,Lt,Gt=tt[_t];for(Tt==null&&(Tt=ta);++ht<Mt;)(Tt(Lt=tt[ht],Gt)<0||Tt(Gt,Gt)!==0)&&(Gt=Lt,_t=ht);if(Tt(Gt,Gt)===0)return _t}},bi=function(tt,Tt,Mt){for(var ht=(Mt==null?tt.length:Mt)-(Tt=Tt==null?0:+Tt),_t,Lt;ht;)Lt=Math.random()*ht--|0,_t=tt[ht+Tt],tt[ht+Tt]=tt[Lt+Tt],tt[Lt+Tt]=_t;return tt},Oi=function(tt,Tt){var Mt=tt.length,ht=-1,_t,Lt=0;if(Tt==null)for(;++ht<Mt;)(_t=+tt[ht])&&(Lt+=_t);else for(;++ht<Mt;)(_t=+Tt(tt[ht],ht,tt))&&(Lt+=_t);return Lt},zi=function(tt){if(!(Lt=tt.length))return[];for(var Tt=-1,Mt=Mr(tt,Vi),ht=new Array(Mt);++Tt<Mt;)for(var _t=-1,Lt,Gt=ht[Tt]=new Array(Lt);++_t<Lt;)Gt[_t]=tt[_t][Tt];return ht};function Vi(tt){return tt.length}var _a=function(){return zi(arguments)};function ya(tt,Tt){switch(arguments.length){case 0:break;case 1:this.range(tt);break;default:this.range(Tt).domain(tt);break}return this}function wi(tt,Tt){switch(arguments.length){case 0:break;case 1:this.interpolator(tt);break;default:this.interpolator(Tt).domain(tt);break}return this}var $i="$";function sa(){}sa.prototype=Bi.prototype={constructor:sa,has:function(Tt){return $i+Tt in this},get:function(Tt){return this[$i+Tt]},set:function(Tt,Mt){return this[$i+Tt]=Mt,this},remove:function(Tt){var Mt=$i+Tt;return Mt in this&&delete this[Mt]},clear:function(){for(var Tt in this)Tt[0]===$i&&delete this[Tt]},keys:function(){var Tt=[];for(var Mt in this)Mt[0]===$i&&Tt.push(Mt.slice(1));return Tt},values:function(){var Tt=[];for(var Mt in this)Mt[0]===$i&&Tt.push(this[Mt]);return Tt},entries:function(){var Tt=[];for(var Mt in this)Mt[0]===$i&&Tt.push({key:Mt.slice(1),value:this[Mt]});return Tt},size:function(){var Tt=0;for(var Mt in this)Mt[0]===$i&&++Tt;return Tt},empty:function(){for(var Tt in this)if(Tt[0]===$i)return!1;return!0},each:function(Tt){for(var Mt in this)Mt[0]===$i&&Tt(this[Mt],Mt.slice(1),this)}};function Bi(tt,Tt){var Mt=new sa;if(tt instanceof sa)tt.each(function(le,we){Mt.set(we,le)});else if(Array.isArray(tt)){var ht=-1,_t=tt.length,Lt;if(Tt==null)for(;++ht<_t;)Mt.set(ht,tt[ht]);else for(;++ht<_t;)Mt.set(Tt(Lt=tt[ht],ht,tt),Lt)}else if(tt)for(var Gt in tt)Mt.set(Gt,tt[Gt]);return Mt}var ca=Bi,qi=function(){var tt=[],Tt=[],Mt,ht,_t;function Lt(le,we,Xe,yn){if(we>=tt.length)return Mt!=null&&le.sort(Mt),ht!=null?ht(le):le;for(var Pn=-1,Er=le.length,Dr=tt[we++],fi,Ai,Fi=ca(),fa,ga=Xe();++Pn<Er;)(fa=Fi.get(fi=Dr(Ai=le[Pn])+""))?fa.push(Ai):Fi.set(fi,[Ai]);return Fi.each(function(Xa,Sa){yn(ga,Sa,Lt(Xa,we,Xe,yn))}),ga}function Gt(le,we){if(++we>tt.length)return le;var Xe,yn=Tt[we-1];return ht!=null&&we>=tt.length?Xe=le.entries():(Xe=[],le.each(function(Pn,Er){Xe.push({key:Er,values:Gt(Pn,we)})})),yn!=null?Xe.sort(function(Pn,Er){return yn(Pn.key,Er.key)}):Xe}return _t={object:function(we){return Lt(we,0,Ca,Na)},map:function(we){return Lt(we,0,rs,Jo)},entries:function(we){return Gt(Lt(we,0,rs,Jo),0)},key:function(we){return tt.push(we),_t},sortKeys:function(we){return Tt[tt.length-1]=we,_t},sortValues:function(we){return Mt=we,_t},rollup:function(we){return ht=we,_t}}};function Ca(){return{}}function Na(tt,Tt,Mt){tt[Tt]=Mt}function rs(){return ca()}function Jo(tt,Tt,Mt){tt.set(Tt,Mt)}function is(){}var jo=ca.prototype;is.prototype=Ps.prototype={constructor:is,has:jo.has,add:function(Tt){return Tt+="",this[$i+Tt]=Tt,this},remove:jo.remove,clear:jo.clear,values:jo.keys,size:jo.size,empty:jo.empty,each:jo.each};function Ps(tt,Tt){var Mt=new is;if(tt instanceof is)tt.each(function(Lt){Mt.add(Lt)});else if(tt){var ht=-1,_t=tt.length;if(Tt==null)for(;++ht<_t;)Mt.add(tt[ht]);else for(;++ht<_t;)Mt.add(Tt(tt[ht],ht,tt))}return Mt}var Rl=Ps,sl=function(tt){var Tt=[];for(var Mt in tt)Tt.push(Mt);return Tt},lc=function(tt){var Tt=[];for(var Mt in tt)Tt.push(tt[Mt]);return Tt},xc=function(tt){var Tt=[];for(var Mt in tt)Tt.push({key:Mt,value:tt[Mt]});return Tt},Sl=Array.prototype,_l=Sl.map,Ul=Sl.slice,Lc={name:"implicit"};function Kl(){var tt=ca(),Tt=[],Mt=[],ht=Lc;function _t(Lt){var Gt=Lt+"",le=tt.get(Gt);if(!le){if(ht!==Lc)return ht;tt.set(Gt,le=Tt.push(Lt))}return Mt[(le-1)%Mt.length]}return _t.domain=function(Lt){if(!arguments.length)return Tt.slice();Tt=[],tt=ca();for(var Gt=-1,le=Lt.length,we,Xe;++Gt<le;)tt.has(Xe=(we=Lt[Gt])+"")||tt.set(Xe,Tt.push(we));return _t},_t.range=function(Lt){return arguments.length?(Mt=Ul.call(Lt),_t):Mt.slice()},_t.unknown=function(Lt){return arguments.length?(ht=Lt,_t):ht},_t.copy=function(){return Kl(Tt,Mt).unknown(ht)},ya.apply(_t,arguments),_t}function Mc(){var tt=Kl().unknown(void 0),Tt=tt.domain,Mt=tt.range,ht=[0,1],_t,Lt,Gt=!1,le=0,we=0,Xe=.5;delete tt.unknown;function yn(){var Pn=Tt().length,Er=ht[1]<ht[0],Dr=ht[Er-0],fi=ht[1-Er];_t=(fi-Dr)/Math.max(1,Pn-le+we*2),Gt&&(_t=Math.floor(_t)),Dr+=(fi-Dr-_t*(Pn-le))*Xe,Lt=_t*(1-le),Gt&&(Dr=Math.round(Dr),Lt=Math.round(Lt));var Ai=ut(Pn).map(function(Fi){return Dr+_t*Fi});return Mt(Er?Ai.reverse():Ai)}return tt.domain=function(Pn){return arguments.length?(Tt(Pn),yn()):Tt()},tt.range=function(Pn){return arguments.length?(ht=[+Pn[0],+Pn[1]],yn()):ht.slice()},tt.rangeRound=function(Pn){return ht=[+Pn[0],+Pn[1]],Gt=!0,yn()},tt.bandwidth=function(){return Lt},tt.step=function(){return _t},tt.round=function(Pn){return arguments.length?(Gt=!!Pn,yn()):Gt},tt.padding=function(Pn){return arguments.length?(le=Math.min(1,we=+Pn),yn()):le},tt.paddingInner=function(Pn){return arguments.length?(le=Math.min(1,Pn),yn()):le},tt.paddingOuter=function(Pn){return arguments.length?(we=+Pn,yn()):we},tt.align=function(Pn){return arguments.length?(Xe=Math.max(0,Math.min(1,Pn)),yn()):Xe},tt.copy=function(){return Mc(Tt(),ht).round(Gt).paddingInner(le).paddingOuter(we).align(Xe)},ya.apply(yn(),arguments)}function Cc(tt){var Tt=tt.copy;return tt.padding=tt.paddingOuter,delete tt.paddingInner,delete tt.paddingOuter,tt.copy=function(){return Cc(Tt())},tt}function fc(){return Cc(Mc.apply(null,arguments).paddingInner(1))}var bc=L("FmoU");function ic(tt,Tt,Mt,ht,_t){var Lt=tt*tt,Gt=Lt*tt;return((1-3*tt+3*Lt-Gt)*Tt+(4-6*Lt+3*Gt)*Mt+(1+3*tt+3*Lt-3*Gt)*ht+Gt*_t)/6}var yu=function(tt){var Tt=tt.length-1;return function(Mt){var ht=Mt<=0?Mt=0:Mt>=1?(Mt=1,Tt-1):Math.floor(Mt*Tt),_t=tt[ht],Lt=tt[ht+1],Gt=ht>0?tt[ht-1]:2*_t-Lt,le=ht<Tt-1?tt[ht+2]:2*Lt-_t;return ic((Mt-ht/Tt)*Tt,Gt,_t,Lt,le)}},Ec=function(tt){var Tt=tt.length;return function(Mt){var ht=Math.floor(((Mt%=1)<0?++Mt:Mt)*Tt),_t=tt[(ht+Tt-1)%Tt],Lt=tt[ht%Tt],Gt=tt[(ht+1)%Tt],le=tt[(ht+2)%Tt];return ic((Mt-ht/Tt)*Tt,_t,Lt,Gt,le)}},Sc=function(tt){return function(){return tt}};function Dl(tt,Tt){return function(Mt){return tt+Mt*Tt}}function Gu(tt,Tt,Mt){return tt=Math.pow(tt,Mt),Tt=Math.pow(Tt,Mt)-tt,Mt=1/Mt,function(ht){return Math.pow(tt+ht*Tt,Mt)}}function ul(tt,Tt){var Mt=Tt-tt;return Mt?Dl(tt,Mt>180||Mt<-180?Mt-360*Math.round(Mt/360):Mt):Sc(isNaN(tt)?Tt:tt)}function ll(tt){return(tt=+tt)==1?cl:function(Tt,Mt){return Mt-Tt?Gu(Tt,Mt,tt):Sc(isNaN(Tt)?Mt:Tt)}}function cl(tt,Tt){var Mt=Tt-tt;return Mt?Dl(tt,Mt):Sc(isNaN(tt)?Tt:tt)}var Ju=function tt(Tt){var Mt=ll(Tt);function ht(_t,Lt){var Gt=Mt((_t=Object(bc.b)(_t)).r,(Lt=Object(bc.b)(Lt)).r),le=Mt(_t.g,Lt.g),we=Mt(_t.b,Lt.b),Xe=cl(_t.opacity,Lt.opacity);return function(yn){return _t.r=Gt(yn),_t.g=le(yn),_t.b=we(yn),_t.opacity=Xe(yn),_t+""}}return ht.gamma=tt,ht}(1);function ec(tt){return function(Tt){var Mt=Tt.length,ht=new Array(Mt),_t=new Array(Mt),Lt=new Array(Mt),Gt,le;for(Gt=0;Gt<Mt;++Gt)le=Object(bc.b)(Tt[Gt]),ht[Gt]=le.r||0,_t[Gt]=le.g||0,Lt[Gt]=le.b||0;return ht=tt(ht),_t=tt(_t),Lt=tt(Lt),le.opacity=1,function(we){return le.r=ht(we),le.g=_t(we),le.b=Lt(we),le+""}}}var Rc=ec(yu),zc=ec(Ec),Uc=function(tt,Tt){Tt||(Tt=[]);var Mt=tt?Math.min(Tt.length,tt.length):0,ht=Tt.slice(),_t;return function(Lt){for(_t=0;_t<Mt;++_t)ht[_t]=tt[_t]*(1-Lt)+Tt[_t]*Lt;return ht}};function hc(tt){return ArrayBuffer.isView(tt)&&!(tt instanceof DataView)}var Xc=function(tt,Tt){return(hc(Tt)?Uc:Pc)(tt,Tt)};function Pc(tt,Tt){var Mt=Tt?Tt.length:0,ht=tt?Math.min(Mt,tt.length):0,_t=new Array(ht),Lt=new Array(Mt),Gt;for(Gt=0;Gt<ht;++Gt)_t[Gt]=Oc(tt[Gt],Tt[Gt]);for(;Gt<Mt;++Gt)Lt[Gt]=Tt[Gt];return function(le){for(Gt=0;Gt<ht;++Gt)Lt[Gt]=_t[Gt](le);return Lt}}var jl=function(tt,Tt){var Mt=new Date;return tt=+tt,Tt=+Tt,function(ht){return Mt.setTime(tt*(1-ht)+Tt*ht),Mt}},Bu=function(tt,Tt){return tt=+tt,Tt=+Tt,function(Mt){return tt*(1-Mt)+Tt*Mt}},Jc=function(tt,Tt){var Mt={},ht={},_t;(tt===null||typeof tt!="object")&&(tt={}),(Tt===null||typeof Tt!="object")&&(Tt={});for(_t in Tt)_t in tt?Mt[_t]=Oc(tt[_t],Tt[_t]):ht[_t]=Tt[_t];return function(Lt){for(_t in Mt)ht[_t]=Mt[_t](Lt);return ht}},sf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$c=new RegExp(sf.source,"g");function kf(tt){return function(){return tt}}function wf(tt){return function(Tt){return tt(Tt)+""}}var Gf=function(tt,Tt){var Mt=sf.lastIndex=$c.lastIndex=0,ht,_t,Lt,Gt=-1,le=[],we=[];for(tt=tt+"",Tt=Tt+"";(ht=sf.exec(tt))&&(_t=$c.exec(Tt));)(Lt=_t.index)>Mt&&(Lt=Tt.slice(Mt,Lt),le[Gt]?le[Gt]+=Lt:le[++Gt]=Lt),(ht=ht[0])===(_t=_t[0])?le[Gt]?le[Gt]+=_t:le[++Gt]=_t:(le[++Gt]=null,we.push({i:Gt,x:Bu(ht,_t)})),Mt=$c.lastIndex;return Mt<Tt.length&&(Lt=Tt.slice(Mt),le[Gt]?le[Gt]+=Lt:le[++Gt]=Lt),le.length<2?we[0]?wf(we[0].x):kf(Tt):(Tt=we.length,function(Xe){for(var yn=0,Pn;yn<Tt;++yn)le[(Pn=we[yn]).i]=Pn.x(Xe);return le.join("")})},Oc=function(tt,Tt){var Mt=typeof Tt,ht;return Tt==null||Mt==="boolean"?Sc(Tt):(Mt==="number"?Bu:Mt==="string"?(ht=Object(bc.a)(Tt))?(Tt=ht,Ju):Gf:Tt instanceof bc.a?Ju:Tt instanceof Date?jl:hc(Tt)?Uc:Array.isArray(Tt)?Pc:typeof Tt.valueOf!="function"&&typeof Tt.toString!="function"||isNaN(Tt)?Jc:Bu)(tt,Tt)},sh=function(tt,Tt){return tt=+tt,Tt=+Tt,function(Mt){return Math.round(tt*(1-Mt)+Tt*Mt)}},uf=function(tt){return function(){return tt}},lf=function(tt){return+tt},Tc=[0,1];function fl(tt){return tt}function xf(tt,Tt){return(Tt-=tt=+tt)?function(Mt){return(Mt-tt)/Tt}:uf(isNaN(Tt)?NaN:.5)}function cf(tt){var Tt=tt[0],Mt=tt[tt.length-1],ht;return Tt>Mt&&(ht=Tt,Tt=Mt,Mt=ht),function(_t){return Math.max(Tt,Math.min(Mt,_t))}}function Vf(tt,Tt,Mt){var ht=tt[0],_t=tt[1],Lt=Tt[0],Gt=Tt[1];return _t<ht?(ht=xf(_t,ht),Lt=Mt(Gt,Lt)):(ht=xf(ht,_t),Lt=Mt(Lt,Gt)),function(le){return Lt(ht(le))}}function Wf(tt,Tt,Mt){var ht=Math.min(tt.length,Tt.length)-1,_t=new Array(ht),Lt=new Array(ht),Gt=-1;for(tt[ht]<tt[0]&&(tt=tt.slice().reverse(),Tt=Tt.slice().reverse());++Gt<ht;)_t[Gt]=xf(tt[Gt],tt[Gt+1]),Lt[Gt]=Mt(Tt[Gt],Tt[Gt+1]);return function(le){var we=_i(tt,le,1,ht)-1;return Lt[we](_t[we](le))}}function Qc(tt,Tt){return Tt.domain(tt.domain()).range(tt.range()).interpolate(tt.interpolate()).clamp(tt.clamp()).unknown(tt.unknown())}function ff(){var tt=Tc,Tt=Tc,Mt=Oc,ht,_t,Lt,Gt=fl,le,we,Xe;function yn(){return le=Math.min(tt.length,Tt.length)>2?Wf:Vf,we=Xe=null,Pn}function Pn(Er){return isNaN(Er=+Er)?Lt:(we||(we=le(tt.map(ht),Tt,Mt)))(ht(Gt(Er)))}return Pn.invert=function(Er){return Gt(_t((Xe||(Xe=le(Tt,tt.map(ht),Bu)))(Er)))},Pn.domain=function(Er){return arguments.length?(tt=_l.call(Er,lf),Gt===fl||(Gt=cf(tt)),yn()):tt.slice()},Pn.range=function(Er){return arguments.length?(Tt=Ul.call(Er),yn()):Tt.slice()},Pn.rangeRound=function(Er){return Tt=Ul.call(Er),Mt=sh,yn()},Pn.clamp=function(Er){return arguments.length?(Gt=Er?cf(tt):fl,Pn):Gt!==fl},Pn.interpolate=function(Er){return arguments.length?(Mt=Er,yn()):Mt},Pn.unknown=function(Er){return arguments.length?(Lt=Er,Pn):Lt},function(Er,Dr){return ht=Er,_t=Dr,yn()}}function If(tt,Tt){return ff()(tt,Tt)}var Lf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bf(tt){if(!(Tt=Lf.exec(tt)))throw new Error("invalid format: "+tt);var Tt;return new wc({fill:Tt[1],align:Tt[2],sign:Tt[3],symbol:Tt[4],zero:Tt[5],width:Tt[6],comma:Tt[7],precision:Tt[8]&&Tt[8].slice(1),trim:Tt[9],type:Tt[10]})}bf.prototype=wc.prototype;function wc(tt){this.fill=tt.fill===void 0?" ":tt.fill+"",this.align=tt.align===void 0?">":tt.align+"",this.sign=tt.sign===void 0?"-":tt.sign+"",this.symbol=tt.symbol===void 0?"":tt.symbol+"",this.zero=!!tt.zero,this.width=tt.width===void 0?void 0:+tt.width,this.comma=!!tt.comma,this.precision=tt.precision===void 0?void 0:+tt.precision,this.trim=!!tt.trim,this.type=tt.type===void 0?"":tt.type+""}wc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var hf=function(tt){return Math.abs(tt=Math.round(tt))>=1e21?tt.toLocaleString("en").replace(/,/g,""):tt.toString(10)};function eu(tt,Tt){if((Mt=(tt=Tt?tt.toExponential(Tt-1):tt.toExponential()).indexOf("e"))<0)return null;var Mt,ht=tt.slice(0,Mt);return[ht.length>1?ht[0]+ht.slice(2):ht,+tt.slice(Mt+1)]}var dc=function(tt){return tt=eu(Math.abs(tt)),tt?tt[1]:NaN},Ef=function(tt,Tt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dc(Tt)/3)))*3-dc(Math.abs(tt)))},Yc=function(tt,Tt){return function(Mt,ht){for(var _t=Mt.length,Lt=[],Gt=0,le=tt[0],we=0;_t>0&&le>0&&(we+le+1>ht&&(le=Math.max(1,ht-we)),Lt.push(Mt.substring(_t-=le,_t+le)),!((we+=le+1)>ht));)le=tt[Gt=(Gt+1)%tt.length];return Lt.reverse().join(Tt)}},vc=function(tt){return function(Tt){return Tt.replace(/[0-9]/g,function(Mt){return tt[+Mt]})}},Dc=function(tt){t:for(var Tt=tt.length,Mt=1,ht=-1,_t;Mt<Tt;++Mt)switch(tt[Mt]){case".":ht=_t=Mt;break;case"0":ht===0&&(ht=Mt),_t=Mt;break;default:if(!+tt[Mt])break t;ht>0&&(ht=0);break}return ht>0?tt.slice(0,ht)+tt.slice(_t+1):tt},df,Sf=function(tt,Tt){var Mt=eu(tt,Tt);if(!Mt)return tt+"";var ht=Mt[0],_t=Mt[1],Lt=_t-(df=Math.max(-8,Math.min(8,Math.floor(_t/3)))*3)+1,Gt=ht.length;return Lt===Gt?ht:Lt>Gt?ht+new Array(Lt-Gt+1).join("0"):Lt>0?ht.slice(0,Lt)+"."+ht.slice(Lt):"0."+new Array(1-Lt).join("0")+eu(tt,Math.max(0,Tt+Lt-1))[0]},kc=function(tt,Tt){var Mt=eu(tt,Tt);if(!Mt)return tt+"";var ht=Mt[0],_t=Mt[1];return _t<0?"0."+new Array(-_t).join("0")+ht:ht.length>_t+1?ht.slice(0,_t+1)+"."+ht.slice(_t+1):ht+new Array(_t-ht.length+2).join("0")},Zc={"%":function(Tt,Mt){return(Tt*100).toFixed(Mt)},b:function(Tt){return Math.round(Tt).toString(2)},c:function(Tt){return Tt+""},d:hf,e:function(Tt,Mt){return Tt.toExponential(Mt)},f:function(Tt,Mt){return Tt.toFixed(Mt)},g:function(Tt,Mt){return Tt.toPrecision(Mt)},o:function(Tt){return Math.round(Tt).toString(8)},p:function(Tt,Mt){return kc(Tt*100,Mt)},r:kc,s:Sf,X:function(Tt){return Math.round(Tt).toString(16).toUpperCase()},x:function(Tt){return Math.round(Tt).toString(16)}},Gc=function(tt){return tt},qc=Array.prototype.map,pe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],me=function(tt){var Tt=tt.grouping===void 0||tt.thousands===void 0?Gc:Yc(qc.call(tt.grouping,Number),tt.thousands+""),Mt=tt.currency===void 0?"":tt.currency[0]+"",ht=tt.currency===void 0?"":tt.currency[1]+"",_t=tt.decimal===void 0?".":tt.decimal+"",Lt=tt.numerals===void 0?Gc:vc(qc.call(tt.numerals,String)),Gt=tt.percent===void 0?"%":tt.percent+"",le=tt.minus===void 0?"-":tt.minus+"",we=tt.nan===void 0?"NaN":tt.nan+"";function Xe(Pn){Pn=bf(Pn);var Er=Pn.fill,Dr=Pn.align,fi=Pn.sign,Ai=Pn.symbol,Fi=Pn.zero,fa=Pn.width,ga=Pn.comma,Xa=Pn.precision,Sa=Pn.trim,Lo=Pn.type;Lo==="n"?(ga=!0,Lo="g"):Zc[Lo]||(Xa===void 0&&(Xa=12),Sa=!0,Lo="g"),(Fi||Er==="0"&&Dr==="=")&&(Fi=!0,Er="0",Dr="=");var Ls=Ai==="$"?Mt:Ai==="#"&&/[boxX]/.test(Lo)?"0"+Lo.toLowerCase():"",eo=Ai==="$"?ht:/[%p]/.test(Lo)?Gt:"",Su=Zc[Lo],zu=/[defgprs%]/.test(Lo);Xa=Xa===void 0?6:/[gprs]/.test(Lo)?Math.max(1,Math.min(21,Xa)):Math.max(0,Math.min(20,Xa));function dl(no){var Hu=Ls,Yu=eo,Hc,Fh,Uf;if(Lo==="c")Yu=Su(no)+Yu,no="";else{no=+no;var _h=no<0||1/no<0;if(no=isNaN(no)?we:Su(Math.abs(no),Xa),Sa&&(no=Dc(no)),_h&&+no==0&&fi!=="+"&&(_h=!1),Hu=(_h?fi==="("?fi:le:fi==="-"||fi==="("?"":fi)+Hu,Yu=(Lo==="s"?pe[8+df/3]:"")+Yu+(_h&&fi==="("?")":""),zu){for(Hc=-1,Fh=no.length;++Hc<Fh;)if(Uf=no.charCodeAt(Hc),48>Uf||Uf>57){Yu=(Uf===46?_t+no.slice(Hc+1):no.slice(Hc))+Yu,no=no.slice(0,Hc);break}}}ga&&!Fi&&(no=Tt(no,Infinity));var oh=Hu.length+no.length+Yu.length,gf=oh<fa?new Array(fa-oh+1).join(Er):"";switch(ga&&Fi&&(no=Tt(gf+no,gf.length?fa-Yu.length:Infinity),gf=""),Dr){case"<":no=Hu+no+Yu+gf;break;case"=":no=Hu+gf+no+Yu;break;case"^":no=gf.slice(0,oh=gf.length>>1)+Hu+no+Yu+gf.slice(oh);break;default:no=gf+Hu+no+Yu;break}return Lt(no)}return dl.toString=function(){return Pn+""},dl}function yn(Pn,Er){var Dr=Xe((Pn=bf(Pn),Pn.type="f",Pn)),fi=Math.max(-8,Math.min(8,Math.floor(dc(Er)/3)))*3,Ai=Math.pow(10,-fi),Fi=pe[8+fi/3];return function(fa){return Dr(Ai*fa)+Fi}}return{format:Xe,formatPrefix:yn}},Vt,Kt,ze;rn({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function rn(tt){return Vt=me(tt),Kt=Vt.format,ze=Vt.formatPrefix,Vt}var Un=function(tt,Tt){return tt=Math.abs(tt),Tt=Math.abs(Tt)-tt,Math.max(0,dc(Tt)-dc(tt))+1},gr=function(tt){return Math.max(0,-dc(Math.abs(tt)))},mr=function(tt,Tt,Mt,ht){var _t=ce(tt,Tt,Mt),Lt;switch(ht=bf(ht==null?",f":ht),ht.type){case"s":{var Gt=Math.max(Math.abs(tt),Math.abs(Tt));return ht.precision==null&&!isNaN(Lt=Ef(_t,Gt))&&(ht.precision=Lt),ze(ht,Gt)}case"":case"e":case"g":case"p":case"r":{ht.precision==null&&!isNaN(Lt=Un(_t,Math.max(Math.abs(tt),Math.abs(Tt))))&&(ht.precision=Lt-(ht.type==="e"));break}case"f":case"%":{ht.precision==null&&!isNaN(Lt=gr(_t))&&(ht.precision=Lt-(ht.type==="%")*2);break}}return Kt(ht)};function Jr(tt){var Tt=tt.domain;return tt.ticks=function(Mt){var ht=Tt();return Yt(ht[0],ht[ht.length-1],Mt==null?10:Mt)},tt.tickFormat=function(Mt,ht){var _t=Tt();return mr(_t[0],_t[_t.length-1],Mt==null?10:Mt,ht)},tt.nice=function(Mt){Mt==null&&(Mt=10);var ht=Tt(),_t=0,Lt=ht.length-1,Gt=ht[_t],le=ht[Lt],we;return le<Gt&&(we=Gt,Gt=le,le=we,we=_t,_t=Lt,Lt=we),we=qt(Gt,le,Mt),we>0?(Gt=Math.floor(Gt/we)*we,le=Math.ceil(le/we)*we,we=qt(Gt,le,Mt)):we<0&&(Gt=Math.ceil(Gt*we)/we,le=Math.floor(le*we)/we,we=qt(Gt,le,Mt)),we>0?(ht[_t]=Math.floor(Gt/we)*we,ht[Lt]=Math.ceil(le/we)*we,Tt(ht)):we<0&&(ht[_t]=Math.ceil(Gt*we)/we,ht[Lt]=Math.floor(le*we)/we,Tt(ht)),tt},tt}function Mi(){var tt=If(fl,fl);return tt.copy=function(){return Qc(tt,Mi())},ya.apply(tt,arguments),Jr(tt)}function Hi(tt){var Tt;function Mt(ht){return isNaN(ht=+ht)?Tt:ht}return Mt.invert=Mt,Mt.domain=Mt.range=function(ht){return arguments.length?(tt=_l.call(ht,lf),Mt):tt.slice()},Mt.unknown=function(ht){return arguments.length?(Tt=ht,Mt):Tt},Mt.copy=function(){return Hi(tt).unknown(Tt)},tt=arguments.length?_l.call(tt,lf):[0,1],Jr(Mt)}var ra=function(tt,Tt){tt=tt.slice();var Mt=0,ht=tt.length-1,_t=tt[Mt],Lt=tt[ht],Gt;return Lt<_t&&(Gt=Mt,Mt=ht,ht=Gt,Gt=_t,_t=Lt,Lt=Gt),tt[Mt]=Tt.floor(_t),tt[ht]=Tt.ceil(Lt),tt};function Da(tt){return Math.log(tt)}function Ka(tt){return Math.exp(tt)}function Qa(tt){return-Math.log(-tt)}function qo(tt){return-Math.exp(-tt)}function bo(tt){return isFinite(tt)?+("1e"+tt):tt<0?0:tt}function Ts(tt){return tt===10?bo:tt===Math.E?Math.exp:function(Tt){return Math.pow(tt,Tt)}}function Ys(tt){return tt===Math.E?Math.log:tt===10&&Math.log10||tt===2&&Math.log2||(tt=Math.log(tt),function(Tt){return Math.log(Tt)/tt})}function xu(tt){return function(Tt){return-tt(-Tt)}}function Zs(tt){var Tt=tt(Da,Ka),Mt=Tt.domain,ht=10,_t,Lt;function Gt(){return _t=Ys(ht),Lt=Ts(ht),Mt()[0]<0?(_t=xu(_t),Lt=xu(Lt),tt(Qa,qo)):tt(Da,Ka),Tt}return Tt.base=function(le){return arguments.length?(ht=+le,Gt()):ht},Tt.domain=function(le){return arguments.length?(Mt(le),Gt()):Mt()},Tt.ticks=function(le){var we=Mt(),Xe=we[0],yn=we[we.length-1],Pn;(Pn=yn<Xe)&&(Er=Xe,Xe=yn,yn=Er);var Er=_t(Xe),Dr=_t(yn),fi,Ai,Fi,fa=le==null?10:+le,ga=[];if(!(ht%1)&&Dr-Er<fa){if(Er=Math.round(Er)-1,Dr=Math.round(Dr)+1,Xe>0){for(;Er<Dr;++Er)for(Ai=1,fi=Lt(Er);Ai<ht;++Ai)if(Fi=fi*Ai,!(Fi<Xe)){if(Fi>yn)break;ga.push(Fi)}}else for(;Er<Dr;++Er)for(Ai=ht-1,fi=Lt(Er);Ai>=1;--Ai)if(Fi=fi*Ai,!(Fi<Xe)){if(Fi>yn)break;ga.push(Fi)}}else ga=Yt(Er,Dr,Math.min(Dr-Er,fa)).map(Lt);return Pn?ga.reverse():ga},Tt.tickFormat=function(le,we){if(we==null&&(we=ht===10?".0e":","),typeof we!="function"&&(we=Kt(we)),le===Infinity)return we;le==null&&(le=10);var Xe=Math.max(1,ht*le/Tt.ticks().length);return function(yn){var Pn=yn/Lt(Math.round(_t(yn)));return Pn*ht<ht-.5&&(Pn*=ht),Pn<=Xe?we(yn):""}},Tt.nice=function(){return Mt(ra(Mt(),{floor:function(we){return Lt(Math.floor(_t(we)))},ceil:function(we){return Lt(Math.ceil(_t(we)))}}))},Tt}function zs(){var tt=Zs(ff()).domain([1,10]);return tt.copy=function(){return Qc(tt,zs()).base(tt.base())},ya.apply(tt,arguments),tt}function Eo(tt){return function(Tt){return Math.sign(Tt)*Math.log1p(Math.abs(Tt/tt))}}function Ks(tt){return function(Tt){return Math.sign(Tt)*Math.expm1(Math.abs(Tt))*tt}}function $u(tt){var Tt=1,Mt=tt(Eo(Tt),Ks(Tt));return Mt.constant=function(ht){return arguments.length?tt(Eo(Tt=+ht),Ks(Tt)):Tt},Jr(Mt)}function ys(){var tt=$u(ff());return tt.copy=function(){return Qc(tt,ys()).constant(tt.constant())},ya.apply(tt,arguments)}function Is(tt){return function(Tt){return Tt<0?-Math.pow(-Tt,tt):Math.pow(Tt,tt)}}function $o(tt){return tt<0?-Math.sqrt(-tt):Math.sqrt(tt)}function hl(tt){return tt<0?-tt*tt:tt*tt}function Ic(tt){var Tt=tt(fl,fl),Mt=1;function ht(){return Mt===1?tt(fl,fl):Mt===.5?tt($o,hl):tt(Is(Mt),Is(1/Mt))}return Tt.exponent=function(_t){return arguments.length?(Mt=+_t,ht()):Mt},Jr(Tt)}function jc(){var tt=Ic(ff());return tt.copy=function(){return Qc(tt,jc()).exponent(tt.exponent())},ya.apply(tt,arguments),tt}function Kc(){return jc.apply(null,arguments).exponent(.5)}function tf(){var tt=[],Tt=[],Mt=[],ht;function _t(){var Gt=0,le=Math.max(1,Tt.length);for(Mt=new Array(le-1);++Gt<le;)Mt[Gt-1]=Ce(tt,Gt/le);return Lt}function Lt(Gt){return isNaN(Gt=+Gt)?ht:Tt[_i(Mt,Gt)]}return Lt.invertExtent=function(Gt){var le=Tt.indexOf(Gt);return le<0?[NaN,NaN]:[le>0?Mt[le-1]:tt[0],le<Mt.length?Mt[le]:tt[tt.length-1]]},Lt.domain=function(Gt){if(!arguments.length)return tt.slice();tt=[];for(var le=0,we=Gt.length,Xe;le<we;++le)Xe=Gt[le],Xe!=null&&!isNaN(Xe=+Xe)&&tt.push(Xe);return tt.sort(ta),_t()},Lt.range=function(Gt){return arguments.length?(Tt=Ul.call(Gt),_t()):Tt.slice()},Lt.unknown=function(Gt){return arguments.length?(ht=Gt,Lt):ht},Lt.quantiles=function(){return Mt.slice()},Lt.copy=function(){return tf().domain(tt).range(Tt).unknown(ht)},ya.apply(Lt,arguments)}function Xl(){var tt=0,Tt=1,Mt=1,ht=[.5],_t=[0,1],Lt;function Gt(we){return we<=we?_t[_i(ht,we,0,Mt)]:Lt}function le(){var we=-1;for(ht=new Array(Mt);++we<Mt;)ht[we]=((we+1)*Tt-(we-Mt)*tt)/(Mt+1);return Gt}return Gt.domain=function(we){return arguments.length?(tt=+we[0],Tt=+we[1],le()):[tt,Tt]},Gt.range=function(we){return arguments.length?(Mt=(_t=Ul.call(we)).length-1,le()):_t.slice()},Gt.invertExtent=function(we){var Xe=_t.indexOf(we);return Xe<0?[NaN,NaN]:Xe<1?[tt,ht[0]]:Xe>=Mt?[ht[Mt-1],Tt]:[ht[Xe-1],ht[Xe]]},Gt.unknown=function(we){return arguments.length&&(Lt=we),Gt},Gt.thresholds=function(){return ht.slice()},Gt.copy=function(){return Xl().domain([tt,Tt]).range(_t).unknown(Lt)},ya.apply(Jr(Gt),arguments)}function $f(){var tt=[.5],Tt=[0,1],Mt,ht=1;function _t(Lt){return Lt<=Lt?Tt[_i(tt,Lt,0,ht)]:Mt}return _t.domain=function(Lt){return arguments.length?(tt=Ul.call(Lt),ht=Math.min(tt.length,Tt.length-1),_t):tt.slice()},_t.range=function(Lt){return arguments.length?(Tt=Ul.call(Lt),ht=Math.min(tt.length,Tt.length-1),_t):Tt.slice()},_t.invertExtent=function(Lt){var Gt=Tt.indexOf(Lt);return[tt[Gt-1],tt[Gt]]},_t.unknown=function(Lt){return arguments.length?(Mt=Lt,_t):Mt},_t.copy=function(){return $f().domain(tt).range(Tt).unknown(Mt)},ya.apply(_t,arguments)}var Hf=new Date,_f=new Date;function nc(tt,Tt,Mt,ht){function _t(Lt){return tt(Lt=arguments.length===0?new Date:new Date(+Lt)),Lt}return _t.floor=function(Lt){return tt(Lt=new Date(+Lt)),Lt},_t.ceil=function(Lt){return tt(Lt=new Date(Lt-1)),Tt(Lt,1),tt(Lt),Lt},_t.round=function(Lt){var Gt=_t(Lt),le=_t.ceil(Lt);return Lt-Gt<le-Lt?Gt:le},_t.offset=function(Lt,Gt){return Tt(Lt=new Date(+Lt),Gt==null?1:Math.floor(Gt)),Lt},_t.range=function(Lt,Gt,le){var we=[],Xe;if(Lt=_t.ceil(Lt),le=le==null?1:Math.floor(le),!(Lt<Gt)||!(le>0))return we;do we.push(Xe=new Date(+Lt)),Tt(Lt,le),tt(Lt);while(Xe<Lt&&Lt<Gt);return we},_t.filter=function(Lt){return nc(function(Gt){if(Gt>=Gt)for(;tt(Gt),!Lt(Gt);)Gt.setTime(Gt-1)},function(Gt,le){if(Gt>=Gt)if(le<0)for(;++le<=0;)for(;Tt(Gt,-1),!Lt(Gt););else for(;--le>=0;)for(;Tt(Gt,1),!Lt(Gt););})},Mt&&(_t.count=function(Lt,Gt){return Hf.setTime(+Lt),_f.setTime(+Gt),tt(Hf),tt(_f),Math.floor(Mt(Hf,_f))},_t.every=function(Lt){return Lt=Math.floor(Lt),!isFinite(Lt)||!(Lt>0)?null:Lt>1?_t.filter(ht?function(Gt){return ht(Gt)%Lt==0}:function(Gt){return _t.count(0,Gt)%Lt==0}):_t}),_t}var Yf=nc(function(tt){tt.setMonth(0,1),tt.setHours(0,0,0,0)},function(tt,Tt){tt.setFullYear(tt.getFullYear()+Tt)},function(tt,Tt){return Tt.getFullYear()-tt.getFullYear()},function(tt){return tt.getFullYear()});Yf.every=function(tt){return!isFinite(tt=Math.floor(tt))||!(tt>0)?null:nc(function(Tt){Tt.setFullYear(Math.floor(Tt.getFullYear()/tt)*tt),Tt.setMonth(0,1),Tt.setHours(0,0,0,0)},function(Tt,Mt){Tt.setFullYear(Tt.getFullYear()+Mt*tt)})};var Mf=Yf,Mh=Yf.range,Pf=nc(function(tt){tt.setDate(1),tt.setHours(0,0,0,0)},function(tt,Tt){tt.setMonth(tt.getMonth()+Tt)},function(tt,Tt){return Tt.getMonth()-tt.getMonth()+(Tt.getFullYear()-tt.getFullYear())*12},function(tt){return tt.getMonth()}),uh=Pf,zh=Pf.range,Zf=1e3,Bc=6e4,Rf=36e5,Fe=864e5,lt=6048e5;function nt(tt){return nc(function(Tt){Tt.setDate(Tt.getDate()-(Tt.getDay()+7-tt)%7),Tt.setHours(0,0,0,0)},function(Tt,Mt){Tt.setDate(Tt.getDate()+Mt*7)},function(Tt,Mt){return(Mt-Tt-(Mt.getTimezoneOffset()-Tt.getTimezoneOffset())*Bc)/lt})}var W=nt(0),ct=nt(1),Et=nt(2),Ut=nt(3),fe=nt(4),Ve=nt(5),Ge=nt(6),Ke=W.range,Rn=ct.range,ur=Et.range,rr=Ut.range,lr=fe.range,Zn=Ve.range,qn=Ge.range,kr=nc(function(tt){tt.setHours(0,0,0,0)},function(tt,Tt){tt.setDate(tt.getDate()+Tt)},function(tt,Tt){return(Tt-tt-(Tt.getTimezoneOffset()-tt.getTimezoneOffset())*Bc)/Fe},function(tt){return tt.getDate()-1}),ti=kr,Ir=kr.range,Ci=nc(function(tt){tt.setTime(tt-tt.getMilliseconds()-tt.getSeconds()*Zf-tt.getMinutes()*Bc)},function(tt,Tt){tt.setTime(+tt+Tt*Rf)},function(tt,Tt){return(Tt-tt)/Rf},function(tt){return tt.getHours()}),ni=Ci,qr=Ci.range,Qr=nc(function(tt){tt.setTime(tt-tt.getMilliseconds()-tt.getSeconds()*Zf)},function(tt,Tt){tt.setTime(+tt+Tt*Bc)},function(tt,Tt){return(Tt-tt)/Bc},function(tt){return tt.getMinutes()}),oi=Qr,Ii=Qr.range,ki=nc(function(tt){tt.setTime(tt-tt.getMilliseconds())},function(tt,Tt){tt.setTime(+tt+Tt*Zf)},function(tt,Tt){return(Tt-tt)/Zf},function(tt){return tt.getUTCSeconds()}),xi=ki,di=ki.range,ui=nc(function(){},function(tt,Tt){tt.setTime(+tt+Tt)},function(tt,Tt){return Tt-tt});ui.every=function(tt){return tt=Math.floor(tt),!isFinite(tt)||!(tt>0)?null:tt>1?nc(function(Tt){Tt.setTime(Math.floor(Tt/tt)*tt)},function(Tt,Mt){Tt.setTime(+Tt+Mt*tt)},function(Tt,Mt){return(Mt-Tt)/tt}):ui};var da=ui,aa=ui.range;function Gi(tt){return nc(function(Tt){Tt.setUTCDate(Tt.getUTCDate()-(Tt.getUTCDay()+7-tt)%7),Tt.setUTCHours(0,0,0,0)},function(Tt,Mt){Tt.setUTCDate(Tt.getUTCDate()+Mt*7)},function(Tt,Mt){return(Mt-Tt)/lt})}var oo=Gi(0),ja=Gi(1),So=Gi(2),Io=Gi(3),ou=Gi(4),Bl=Gi(5),Po=Gi(6),Qu=oo.range,bu=ja.range,zo=So.range,Xs=Io.range,Fl=ou.range,kl=Bl.range,cc=Po.range,Ml=nc(function(tt){tt.setUTCHours(0,0,0,0)},function(tt,Tt){tt.setUTCDate(tt.getUTCDate()+Tt)},function(tt,Tt){return(Tt-tt)/Fe},function(tt){return tt.getUTCDate()-1}),co=Ml,pc=Ml.range,xs=nc(function(tt){tt.setUTCMonth(0,1),tt.setUTCHours(0,0,0,0)},function(tt,Tt){tt.setUTCFullYear(tt.getUTCFullYear()+Tt)},function(tt,Tt){return Tt.getUTCFullYear()-tt.getUTCFullYear()},function(tt){return tt.getUTCFullYear()});xs.every=function(tt){return!isFinite(tt=Math.floor(tt))||!(tt>0)?null:nc(function(Tt){Tt.setUTCFullYear(Math.floor(Tt.getUTCFullYear()/tt)*tt),Tt.setUTCMonth(0,1),Tt.setUTCHours(0,0,0,0)},function(Tt,Mt){Tt.setUTCFullYear(Tt.getUTCFullYear()+Mt*tt)})};var Ma=xs,_o=xs.range;function Uo(tt){if(0<=tt.y&&tt.y<100){var Tt=new Date(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L);return Tt.setFullYear(tt.y),Tt}return new Date(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L)}function Gl(tt){if(0<=tt.y&&tt.y<100){var Tt=new Date(Date.UTC(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L));return Tt.setUTCFullYear(tt.y),Tt}return new Date(Date.UTC(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L))}function Vl(tt,Tt,Mt){return{y:tt,m:Tt,d:Mt,H:0,M:0,S:0,L:0}}function ef(tt){var Tt=tt.dateTime,Mt=tt.date,ht=tt.time,_t=tt.periods,Lt=tt.days,Gt=tt.shortDays,le=tt.months,we=tt.shortMonths,Xe=un(_t),yn=ir(_t),Pn=un(Lt),Er=ir(Lt),Dr=un(Gt),fi=ir(Gt),Ai=un(le),Fi=ir(le),fa=un(we),ga=ir(we),Xa={a:_h,A:oh,b:gf,B:_d,c:null,d:Pl,e:Pl,f:Vc,g:hd,G:ed,H:Ac,I:lh,j:Fc,L:ch,m:Qf,M:qf,p:Md,q:Pd,Q:vt,s:Ct,S:td,u:fh,U:ud,V:qu,w:ld,W:cd,x:null,X:null,y:fd,Y:dd,Z:th,"%":J},Sa={a:Td,A:Ad,b:Cd,B:Od,c:null,d:Kf,e:Kf,f:Uh,g:d,G:C,H:vd,I:Jl,j:Ph,L:Tf,m:kh,M:nd,p:Of,q:qh,Q:vt,s:Ct,S:hh,u:Df,U:pd,V:Ed,w:ac,W:Xf,x:null,X:null,y:gd,Y:p,Z:F,"%":J},Lo={a:dl,A:no,b:Hu,B:Yu,c:Hc,d:ci,e:ci,f:ea,g:tr,G:An,H:ri,I:ri,j:Yr,L:To,m:jr,M:Ti,p:zu,q:Tr,Q:fo,s:bs,S:ia,u:Rr,U:sr,V:or,w:wr,W:Sr,x:Fh,X:Uf,y:tr,Y:An,Z:bn,"%":Ba};Xa.x=Ls(Mt,Xa),Xa.X=Ls(ht,Xa),Xa.c=Ls(Tt,Xa),Sa.x=Ls(Mt,Sa),Sa.X=Ls(ht,Sa),Sa.c=Ls(Tt,Sa);function Ls(ho,Us){return function(Go){var Wi=[],of=-1,Yl=0,mf=ho.length,yf,Nh,wd;for(Go instanceof Date||(Go=new Date(+Go));++of<mf;)ho.charCodeAt(of)===37&&(Wi.push(ho.slice(Yl,of)),(Nh=jn[yf=ho.charAt(++of)])!=null?yf=ho.charAt(++of):Nh=yf==="e"?" ":"0",(wd=Us[yf])&&(yf=wd(Go,Nh)),Wi.push(yf),Yl=of+1);return Wi.push(ho.slice(Yl,of)),Wi.join("")}}function eo(ho,Us){return function(Go){var Wi=Vl(1900,void 0,1),of=Su(Wi,ho,Go+="",0),Yl,mf;if(of!=Go.length)return null;if("Q"in Wi)return new Date(Wi.Q);if("s"in Wi)return new Date(Wi.s*1e3+("L"in Wi?Wi.L:0));if(Us&&!("Z"in Wi)&&(Wi.Z=0),"p"in Wi&&(Wi.H=Wi.H%12+Wi.p*12),Wi.m===void 0&&(Wi.m="q"in Wi?Wi.q:0),"V"in Wi){if(Wi.V<1||Wi.V>53)return null;"w"in Wi||(Wi.w=1),"Z"in Wi?(Yl=Gl(Vl(Wi.y,0,1)),mf=Yl.getUTCDay(),Yl=mf>4||mf===0?ja.ceil(Yl):ja(Yl),Yl=co.offset(Yl,(Wi.V-1)*7),Wi.y=Yl.getUTCFullYear(),Wi.m=Yl.getUTCMonth(),Wi.d=Yl.getUTCDate()+(Wi.w+6)%7):(Yl=Uo(Vl(Wi.y,0,1)),mf=Yl.getDay(),Yl=mf>4||mf===0?ct.ceil(Yl):ct(Yl),Yl=ti.offset(Yl,(Wi.V-1)*7),Wi.y=Yl.getFullYear(),Wi.m=Yl.getMonth(),Wi.d=Yl.getDate()+(Wi.w+6)%7)}else("W"in Wi||"U"in Wi)&&("w"in Wi||(Wi.w="u"in Wi?Wi.u%7:"W"in Wi?1:0),mf="Z"in Wi?Gl(Vl(Wi.y,0,1)).getUTCDay():Uo(Vl(Wi.y,0,1)).getDay(),Wi.m=0,Wi.d="W"in Wi?(Wi.w+6)%7+Wi.W*7-(mf+5)%7:Wi.w+Wi.U*7-(mf+6)%7);return"Z"in Wi?(Wi.H+=Wi.Z/100|0,Wi.M+=Wi.Z%100,Gl(Wi)):Uo(Wi)}}function Su(ho,Us,Go,Wi){for(var of=0,Yl=Us.length,mf=Go.length,yf,Nh;of<Yl;){if(Wi>=mf)return-1;if(yf=Us.charCodeAt(of++),yf===37){if(yf=Us.charAt(of++),Nh=Lo[yf in jn?Us.charAt(of++):yf],!Nh||(Wi=Nh(ho,Go,Wi))<0)return-1}else if(yf!=Go.charCodeAt(Wi++))return-1}return Wi}function zu(ho,Us,Go){var Wi=Xe.exec(Us.slice(Go));return Wi?(ho.p=yn[Wi[0].toLowerCase()],Go+Wi[0].length):-1}function dl(ho,Us,Go){var Wi=Dr.exec(Us.slice(Go));return Wi?(ho.w=fi[Wi[0].toLowerCase()],Go+Wi[0].length):-1}function no(ho,Us,Go){var Wi=Pn.exec(Us.slice(Go));return Wi?(ho.w=Er[Wi[0].toLowerCase()],Go+Wi[0].length):-1}function Hu(ho,Us,Go){var Wi=fa.exec(Us.slice(Go));return Wi?(ho.m=ga[Wi[0].toLowerCase()],Go+Wi[0].length):-1}function Yu(ho,Us,Go){var Wi=Ai.exec(Us.slice(Go));return Wi?(ho.m=Fi[Wi[0].toLowerCase()],Go+Wi[0].length):-1}function Hc(ho,Us,Go){return Su(ho,Tt,Us,Go)}function Fh(ho,Us,Go){return Su(ho,Mt,Us,Go)}function Uf(ho,Us,Go){return Su(ho,ht,Us,Go)}function _h(ho){return Gt[ho.getDay()]}function oh(ho){return Lt[ho.getDay()]}function gf(ho){return we[ho.getMonth()]}function _d(ho){return le[ho.getMonth()]}function Md(ho){return _t[+(ho.getHours()>=12)]}function Pd(ho){return 1+~~(ho.getMonth()/3)}function Td(ho){return Gt[ho.getUTCDay()]}function Ad(ho){return Lt[ho.getUTCDay()]}function Cd(ho){return we[ho.getUTCMonth()]}function Od(ho){return le[ho.getUTCMonth()]}function Of(ho){return _t[+(ho.getUTCHours()>=12)]}function qh(ho){return 1+~~(ho.getUTCMonth()/3)}return{format:function(Us){var Go=Ls(Us+="",Xa);return Go.toString=function(){return Us},Go},parse:function(Us){var Go=eo(Us+="",!1);return Go.toString=function(){return Us},Go},utcFormat:function(Us){var Go=Ls(Us+="",Sa);return Go.toString=function(){return Us},Go},utcParse:function(Us){var Go=eo(Us+="",!0);return Go.toString=function(){return Us},Go}}}var jn={"-":"",_:" ","0":"0"},Nr=/^\s*\d+/,Gr=/^%/,Yi=/[\\^$*+?|[\]().{}]/g;function Qi(tt,Tt,Mt){var ht=tt<0?"-":"",_t=(ht?-tt:tt)+"",Lt=_t.length;return ht+(Lt<Mt?new Array(Mt-Lt+1).join(Tt)+_t:_t)}function Mn(tt){return tt.replace(Yi,"\\$&")}function un(tt){return new RegExp("^(?:"+tt.map(Mn).join("|")+")","i")}function ir(tt){for(var Tt={},Mt=-1,ht=tt.length;++Mt<ht;)Tt[tt[Mt].toLowerCase()]=Mt;return Tt}function wr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+1));return ht?(tt.w=+ht[0],Mt+ht[0].length):-1}function Rr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+1));return ht?(tt.u=+ht[0],Mt+ht[0].length):-1}function sr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.U=+ht[0],Mt+ht[0].length):-1}function or(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.V=+ht[0],Mt+ht[0].length):-1}function Sr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.W=+ht[0],Mt+ht[0].length):-1}function An(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+4));return ht?(tt.y=+ht[0],Mt+ht[0].length):-1}function tr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.y=+ht[0]+(+ht[0]>68?1900:2e3),Mt+ht[0].length):-1}function bn(tt,Tt,Mt){var ht=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Tt.slice(Mt,Mt+6));return ht?(tt.Z=ht[1]?0:-(ht[2]+(ht[3]||"00")),Mt+ht[0].length):-1}function Tr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+1));return ht?(tt.q=ht[0]*3-3,Mt+ht[0].length):-1}function jr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.m=ht[0]-1,Mt+ht[0].length):-1}function ci(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.d=+ht[0],Mt+ht[0].length):-1}function Yr(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+3));return ht?(tt.m=0,tt.d=+ht[0],Mt+ht[0].length):-1}function ri(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.H=+ht[0],Mt+ht[0].length):-1}function Ti(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.M=+ht[0],Mt+ht[0].length):-1}function ia(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+2));return ht?(tt.S=+ht[0],Mt+ht[0].length):-1}function To(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+3));return ht?(tt.L=+ht[0],Mt+ht[0].length):-1}function ea(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt,Mt+6));return ht?(tt.L=Math.floor(ht[0]/1e3),Mt+ht[0].length):-1}function Ba(tt,Tt,Mt){var ht=Gr.exec(Tt.slice(Mt,Mt+1));return ht?Mt+ht[0].length:-1}function fo(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt));return ht?(tt.Q=+ht[0],Mt+ht[0].length):-1}function bs(tt,Tt,Mt){var ht=Nr.exec(Tt.slice(Mt));return ht?(tt.s=+ht[0],Mt+ht[0].length):-1}function Pl(tt,Tt){return Qi(tt.getDate(),Tt,2)}function Ac(tt,Tt){return Qi(tt.getHours(),Tt,2)}function lh(tt,Tt){return Qi(tt.getHours()%12||12,Tt,2)}function Fc(tt,Tt){return Qi(1+ti.count(Mf(tt),tt),Tt,3)}function ch(tt,Tt){return Qi(tt.getMilliseconds(),Tt,3)}function Vc(tt,Tt){return ch(tt,Tt)+"000"}function Qf(tt,Tt){return Qi(tt.getMonth()+1,Tt,2)}function qf(tt,Tt){return Qi(tt.getMinutes(),Tt,2)}function td(tt,Tt){return Qi(tt.getSeconds(),Tt,2)}function fh(tt){var Tt=tt.getDay();return Tt===0?7:Tt}function ud(tt,Tt){return Qi(W.count(Mf(tt)-1,tt),Tt,2)}function Wl(tt){var Tt=tt.getDay();return Tt>=4||Tt===0?fe(tt):fe.ceil(tt)}function qu(tt,Tt){return tt=Wl(tt),Qi(fe.count(Mf(tt),tt)+(Mf(tt).getDay()===4),Tt,2)}function ld(tt){return tt.getDay()}function cd(tt,Tt){return Qi(ct.count(Mf(tt)-1,tt),Tt,2)}function fd(tt,Tt){return Qi(tt.getFullYear()%100,Tt,2)}function hd(tt,Tt){return tt=Wl(tt),Qi(tt.getFullYear()%100,Tt,2)}function dd(tt,Tt){return Qi(tt.getFullYear()%1e4,Tt,4)}function ed(tt,Tt){var Mt=tt.getDay();return tt=Mt>=4||Mt===0?fe(tt):fe.ceil(tt),Qi(tt.getFullYear()%1e4,Tt,4)}function th(tt){var Tt=tt.getTimezoneOffset();return(Tt>0?"-":(Tt*=-1,"+"))+Qi(Tt/60|0,"0",2)+Qi(Tt%60,"0",2)}function Kf(tt,Tt){return Qi(tt.getUTCDate(),Tt,2)}function vd(tt,Tt){return Qi(tt.getUTCHours(),Tt,2)}function Jl(tt,Tt){return Qi(tt.getUTCHours()%12||12,Tt,2)}function Ph(tt,Tt){return Qi(1+co.count(Ma(tt),tt),Tt,3)}function Tf(tt,Tt){return Qi(tt.getUTCMilliseconds(),Tt,3)}function Uh(tt,Tt){return Tf(tt,Tt)+"000"}function kh(tt,Tt){return Qi(tt.getUTCMonth()+1,Tt,2)}function nd(tt,Tt){return Qi(tt.getUTCMinutes(),Tt,2)}function hh(tt,Tt){return Qi(tt.getUTCSeconds(),Tt,2)}function Df(tt){var Tt=tt.getUTCDay();return Tt===0?7:Tt}function pd(tt,Tt){return Qi(oo.count(Ma(tt)-1,tt),Tt,2)}function rd(tt){var Tt=tt.getUTCDay();return Tt>=4||Tt===0?ou(tt):ou.ceil(tt)}function Ed(tt,Tt){return tt=rd(tt),Qi(ou.count(Ma(tt),tt)+(Ma(tt).getUTCDay()===4),Tt,2)}function ac(tt){return tt.getUTCDay()}function Xf(tt,Tt){return Qi(ja.count(Ma(tt)-1,tt),Tt,2)}function gd(tt,Tt){return Qi(tt.getUTCFullYear()%100,Tt,2)}function d(tt,Tt){return tt=rd(tt),Qi(tt.getUTCFullYear()%100,Tt,2)}function p(tt,Tt){return Qi(tt.getUTCFullYear()%1e4,Tt,4)}function C(tt,Tt){var Mt=tt.getUTCDay();return tt=Mt>=4||Mt===0?ou(tt):ou.ceil(tt),Qi(tt.getUTCFullYear()%1e4,Tt,4)}function F(){return"+0000"}function J(){return"%"}function vt(tt){return+tt}function Ct(tt){return Math.floor(+tt/1e3)}var Bt,Jt,ve,Ie,Ue;He({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function He(tt){return Bt=ef(tt),Jt=Bt.format,ve=Bt.parse,Ie=Bt.utcFormat,Ue=Bt.utcParse,Bt}var fn=1e3,Ln=fn*60,On=Ln*60,Kn=On*24,$n=Kn*7,_r=Kn*30,Br=Kn*365;function Hr(tt){return new Date(tt)}function pi(tt){return tt instanceof Date?+tt:+new Date(+tt)}function ii(tt,Tt,Mt,ht,_t,Lt,Gt,le,we){var Xe=If(fl,fl),yn=Xe.invert,Pn=Xe.domain,Er=we(".%L"),Dr=we(":%S"),fi=we("%I:%M"),Ai=we("%I %p"),Fi=we("%a %d"),fa=we("%b %d"),ga=we("%B"),Xa=we("%Y"),Sa=[[Gt,1,fn],[Gt,5,5*fn],[Gt,15,15*fn],[Gt,30,30*fn],[Lt,1,Ln],[Lt,5,5*Ln],[Lt,15,15*Ln],[Lt,30,30*Ln],[_t,1,On],[_t,3,3*On],[_t,6,6*On],[_t,12,12*On],[ht,1,Kn],[ht,2,2*Kn],[Mt,1,$n],[Tt,1,_r],[Tt,3,3*_r],[tt,1,Br]];function Lo(eo){return(Gt(eo)<eo?Er:Lt(eo)<eo?Dr:_t(eo)<eo?fi:ht(eo)<eo?Ai:Tt(eo)<eo?Mt(eo)<eo?Fi:fa:tt(eo)<eo?ga:Xa)(eo)}function Ls(eo,Su,zu,dl){if(eo==null&&(eo=10),typeof eo=="number"){var no=Math.abs(zu-Su)/eo,Hu=oa(function(Yu){return Yu[2]}).right(Sa,no);Hu===Sa.length?(dl=ce(Su/Br,zu/Br,eo),eo=tt):Hu?(Hu=Sa[no/Sa[Hu-1][2]<Sa[Hu][2]/no?Hu-1:Hu],dl=Hu[1],eo=Hu[0]):(dl=Math.max(ce(Su,zu,eo),1),eo=le)}return dl==null?eo:eo.every(dl)}return Xe.invert=function(eo){return new Date(yn(eo))},Xe.domain=function(eo){return arguments.length?Pn(_l.call(eo,pi)):Pn().map(Hr)},Xe.ticks=function(eo,Su){var zu=Pn(),dl=zu[0],no=zu[zu.length-1],Hu=no<dl,Yu;return Hu&&(Yu=dl,dl=no,no=Yu),Yu=Ls(eo,dl,no,Su),Yu=Yu?Yu.range(dl,no+1):[],Hu?Yu.reverse():Yu},Xe.tickFormat=function(eo,Su){return Su==null?Lo:we(Su)},Xe.nice=function(eo,Su){var zu=Pn();return(eo=Ls(eo,zu[0],zu[zu.length-1],Su))?Pn(ra(zu,eo)):Xe},Xe.copy=function(){return Qc(Xe,ii(tt,Tt,Mt,ht,_t,Lt,Gt,le,we))},Xe}var Li=function(){return ya.apply(ii(Mf,uh,W,ti,ni,oi,xi,da,Jt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},Ri=nc(function(tt){tt.setUTCDate(1),tt.setUTCHours(0,0,0,0)},function(tt,Tt){tt.setUTCMonth(tt.getUTCMonth()+Tt)},function(tt,Tt){return Tt.getUTCMonth()-tt.getUTCMonth()+(Tt.getUTCFullYear()-tt.getUTCFullYear())*12},function(tt){return tt.getUTCMonth()}),Xi=Ri,ua=Ri.range,na=nc(function(tt){tt.setUTCMinutes(0,0,0)},function(tt,Tt){tt.setTime(+tt+Tt*Rf)},function(tt,Tt){return(Tt-tt)/Rf},function(tt){return tt.getUTCHours()}),Zi=na,qa=na.range,xa=nc(function(tt){tt.setUTCSeconds(0,0)},function(tt,Tt){tt.setTime(+tt+Tt*Bc)},function(tt,Tt){return(Tt-tt)/Bc},function(tt){return tt.getUTCMinutes()}),la=xa,Yo=xa.range,go=function(){return ya.apply(ii(Ma,Xi,oo,co,Zi,la,xi,da,Ie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function Es(){var tt=0,Tt=1,Mt,ht,_t,Lt,Gt=fl,le=!1,we;function Xe(yn){return isNaN(yn=+yn)?we:Gt(_t===0?.5:(yn=(Lt(yn)-Mt)*_t,le?Math.max(0,Math.min(1,yn)):yn))}return Xe.domain=function(yn){return arguments.length?(Mt=Lt(tt=+yn[0]),ht=Lt(Tt=+yn[1]),_t=Mt===ht?0:1/(ht-Mt),Xe):[tt,Tt]},Xe.clamp=function(yn){return arguments.length?(le=!!yn,Xe):le},Xe.interpolator=function(yn){return arguments.length?(Gt=yn,Xe):Gt},Xe.unknown=function(yn){return arguments.length?(we=yn,Xe):we},function(yn){return Lt=yn,Mt=yn(tt),ht=yn(Tt),_t=Mt===ht?0:1/(ht-Mt),Xe}}function Ea(tt,Tt){return Tt.domain(tt.domain()).interpolator(tt.interpolator()).clamp(tt.clamp()).unknown(tt.unknown())}function Qo(){var tt=Jr(Es()(fl));return tt.copy=function(){return Ea(tt,Qo())},wi.apply(tt,arguments)}function Vu(){var tt=Zs(Es()).domain([1,10]);return tt.copy=function(){return Ea(tt,Vu()).base(tt.base())},wi.apply(tt,arguments)}function Fu(){var tt=$u(Es());return tt.copy=function(){return Ea(tt,Fu()).constant(tt.constant())},wi.apply(tt,arguments)}function tl(){var tt=Ic(Es());return tt.copy=function(){return Ea(tt,tl()).exponent(tt.exponent())},wi.apply(tt,arguments)}function Tl(){return tl.apply(null,arguments).exponent(.5)}function Il(){var tt=[],Tt=fl;function Mt(ht){if(!isNaN(ht=+ht))return Tt((_i(tt,ht)-1)/(tt.length-1))}return Mt.domain=function(ht){if(!arguments.length)return tt.slice();tt=[];for(var _t=0,Lt=ht.length,Gt;_t<Lt;++_t)Gt=ht[_t],Gt!=null&&!isNaN(Gt=+Gt)&&tt.push(Gt);return tt.sort(ta),Mt},Mt.interpolator=function(ht){return arguments.length?(Tt=ht,Mt):Tt},Mt.copy=function(){return Il(Tt).domain(tt)},wi.apply(Mt,arguments)}function $l(){var tt=0,Tt=.5,Mt=1,ht,_t,Lt,Gt,le,we=fl,Xe,yn=!1,Pn;function Er(Dr){return isNaN(Dr=+Dr)?Pn:(Dr=.5+((Dr=+Xe(Dr))-_t)*(Dr<_t?Gt:le),we(yn?Math.max(0,Math.min(1,Dr)):Dr))}return Er.domain=function(Dr){return arguments.length?(ht=Xe(tt=+Dr[0]),_t=Xe(Tt=+Dr[1]),Lt=Xe(Mt=+Dr[2]),Gt=ht===_t?0:.5/(_t-ht),le=_t===Lt?0:.5/(Lt-_t),Er):[tt,Tt,Mt]},Er.clamp=function(Dr){return arguments.length?(yn=!!Dr,Er):yn},Er.interpolator=function(Dr){return arguments.length?(we=Dr,Er):we},Er.unknown=function(Dr){return arguments.length?(Pn=Dr,Er):Pn},function(Dr){return Xe=Dr,ht=Dr(tt),_t=Dr(Tt),Lt=Dr(Mt),Gt=ht===_t?0:.5/(_t-ht),le=_t===Lt?0:.5/(Lt-_t),Er}}function Hl(){var tt=Jr($l()(fl));return tt.copy=function(){return Ea(tt,Hl())},wi.apply(tt,arguments)}function _c(){var tt=Zs($l()).domain([.1,1,10]);return tt.copy=function(){return Ea(tt,_c()).base(tt.base())},wi.apply(tt,arguments)}function oc(){var tt=$u($l());return tt.copy=function(){return Ea(tt,oc()).constant(tt.constant())},wi.apply(tt,arguments)}function gc(){var tt=Ic($l());return tt.copy=function(){return Ea(tt,gc()).exponent(tt.exponent())},wi.apply(tt,arguments)}function sc(){return gc.apply(null,arguments).exponent(.5)}var Eu,Ql,as,Zo,su,uu,mc,Nu,el,yc=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,os=(Eu={},l()(Eu,U.ScaleTypes.LINEAR,Mi),l()(Eu,U.ScaleTypes.POWER,jc),l()(Eu,U.ScaleTypes.LOG,zs),l()(Eu,U.ScaleTypes.IDENTITY,Hi),l()(Eu,U.ScaleTypes.TIME,Li),l()(Eu,U.ScaleTypes.QUANTILE,tf),l()(Eu,U.ScaleTypes.QUANTIZE,Xl),l()(Eu,U.ScaleTypes.THRESHOLD,$f),l()(Eu,U.ScaleTypes.CAT,Kl),Eu),jf=(Ql=Object(K.injectable)(),as=Object(K.inject)(U.TYPES.IGlobalConfigService),Zo=Object(K.inject)(U.TYPES.ILogService),Ql(su=(uu=(el=function(){function tt(){T()(this,tt),v()(this,"configService",mc,this),v()(this,"logger",Nu,this),this.scaleCache={},this.scaleOptions={}}return t()(tt,[{key:"apply",value:function(Mt,ht){var _t=this,Lt=ht.styleAttributeService;Mt.hooks.init.tap("FeatureScalePlugin",function(){_t.scaleOptions=Mt.getScaleOptions();var Gt=Lt.getLayerStyleAttributes(),le=Mt.getSource().data.dataArray;le.length!==0&&_t.caculateScalesForAttributes(Gt||[],le)}),Mt.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){_t.scaleOptions=Mt.getScaleOptions();var Gt=Lt.getLayerStyleAttributes(),le=Mt.getSource().data.dataArray;return _t.caculateScalesForAttributes(Gt||[],le),Mt.layerModelNeedUpdate=!0,!0}),Mt.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!Mt.layerModelNeedUpdate){_t.scaleOptions=Mt.getScaleOptions();var Gt=Lt.getLayerStyleAttributes();if(Gt){var le=Mt.getSource().data.dataArray;if(le.length===0)return;var we=Gt.filter(function(Xe){return Xe.needRescale});we.length&&(_t.caculateScalesForAttributes(we,le),_t.logger.debug("rescale finished"))}}})}},{key:"isNumber",value:function(Mt){return!isNaN(parseFloat(Mt))&&isFinite(Mt)}},{key:"caculateScalesForAttributes",value:function(Mt,ht){var _t=this;this.scaleCache={},Mt.forEach(function(Lt){if(Lt.scale){var Gt=Lt.scale,le=Lt.name;Gt.names=_t.parseFields(Lt.scale.field||[]);var we=[];Gt.names.forEach(function(Xe){we.push(_t.getOrCreateScale(Xe,Lt,ht))}),we.some(function(Xe){return Xe.type===U.StyleScaleType.VARIABLE})?(Gt.type=U.StyleScaleType.VARIABLE,we.forEach(function(Xe){if(!Gt.callback){var yn;if(Gt.values&&Gt.values!=="text"){var Pn;if(((Pn=Xe.option)===null||Pn===void 0?void 0:Pn.type)==="linear"&&Gt.values.length>2){var Er=Xe.scale.ticks(Gt.values.length);le==="color"&&Xe.scale.domain(Er)}Xe.scale.range(Gt.values)}else((yn=Xe.option)===null||yn===void 0?void 0:yn.type)==="cat"&&Xe.scale.range(Xe.option.domain)}})):(Gt.type=U.StyleScaleType.CONSTANT,Gt.defaultValues=we.map(function(Xe,yn){return Xe.scale(Gt.names[yn])})),Gt.scalers=we.map(function(Xe){return{field:Xe.field,func:Xe.scale,option:Xe.option}}),Lt.needRescale=!1}})}},{key:"getOrCreateScale",value:function(Mt,ht,_t){var Lt,Gt=[Mt,ht.name].join("_"),le=(Lt=ht.scale)===null||Lt===void 0?void 0:Lt.values,we=this.createScale(Mt,ht.name,le,_t);return we}},{key:"parseFields",value:function(Mt){return Array.isArray(Mt)?Mt:Ui()(Mt)?Mt.split("*"):[Mt]}},{key:"createScale",value:function(Mt,ht,_t,Lt){var Gt,le,we=this.scaleOptions[ht]&&((Gt=this.scaleOptions[ht])===null||Gt===void 0?void 0:Gt.field)===Mt?this.scaleOptions[ht]:this.scaleOptions[Mt],Xe={field:Mt,scale:void 0,type:U.StyleScaleType.VARIABLE,option:we};if(!Lt||!Lt.length)return we&&we.type?Xe.scale=this.createDefaultScale(we):(Xe.scale=Kl([Mt]),Xe.type=U.StyleScaleType.CONSTANT),Xe;var yn=(le=Lt.find(function(Dr){return!pa()(Dr[Mt])}))===null||le===void 0?void 0:le[Mt];if(this.isNumber(Mt)||pa()(yn)&&!we)Xe.scale=Kl([Mt]),Xe.type=U.StyleScaleType.CONSTANT;else{var Pn=we&&we.type||this.getDefaultType(yn);_t==="text"&&(Pn=U.ScaleTypes.CAT);var Er=this.createDefaultScaleConfig(Pn,Mt,Lt);Object.assign(Er,we),Xe.scale=this.createDefaultScale(Er),Xe.option=Er}return Xe}},{key:"getDefaultType",value:function(Mt){var ht=U.ScaleTypes.LINEAR;return typeof Mt=="string"&&(ht=yc.test(Mt)?U.ScaleTypes.TIME:U.ScaleTypes.CAT),ht}},{key:"createDefaultScaleConfig",value:function(Mt,ht,_t){var Lt={type:Mt},Gt=(_t==null?void 0:_t.map(function(le){return le[ht]}))||[];return Mt!==U.ScaleTypes.CAT&&Mt!==U.ScaleTypes.QUANTILE?Lt.domain=I(Gt):Mt===U.ScaleTypes.CAT?Lt.domain=ai()(Gt):Mt===U.ScaleTypes.QUANTILE&&(Lt.domain=Gt),Lt}},{key:"createDefaultScale",value:function(Mt){var ht=Mt.type,_t=Mt.domain,Lt=os[ht]();return _t&&Lt.domain(_t),Lt}}]),tt}(),el),mc=_()(uu.prototype,"configService",[as],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nu=_()(uu.prototype,"logger",[Zo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu))||su),Wc,nf,Nc,uc,rf,Af,Cf,dh;function vf(tt,Tt){var Mt=Object.keys(tt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(tt);Tt&&(ht=ht.filter(function(_t){return Object.getOwnPropertyDescriptor(tt,_t).enumerable})),Mt.push.apply(Mt,ht)}return Mt}function Th(tt){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?vf(Object(Mt),!0).forEach(function(ht){l()(tt,ht,Mt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Mt)):vf(Object(Mt)).forEach(function(ht){Object.defineProperty(tt,ht,Object.getOwnPropertyDescriptor(Mt,ht))})}return tt}var Ah=(Wc=Object(K.injectable)(),nf=Object(K.inject)(U.TYPES.ICameraService),Nc=Object(K.inject)(U.TYPES.IRendererService),Wc(uc=(rf=(dh=function(){function tt(){T()(this,tt),v()(this,"cameraService",Af,this),v()(this,"rendererService",Cf,this)}return t()(tt,[{key:"apply",value:function(Mt){Mt.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){Mt.models.forEach(function(ht){ht.addUniforms(Th({},Mt.layerModel.getAnimateUniforms()))})})}}]),tt}(),dh),Af=_()(rf.prototype,"cameraService",[nf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cf=_()(rf.prototype,"rendererService",[Nc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf))||uc),eh,Ch,Oh=(eh=Object(K.injectable)(),eh(Ch=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(Mt){Mt.hooks.init.tap("LayerModelPlugin",function(){Mt.prepareBuildModel(),Mt.buildModels(),Mt.styleNeedUpdate=!1}),Mt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return Mt.prepareBuildModel(),Mt.clearModels(),Mt.buildModels(),Mt.layerModelNeedUpdate=!1,!1})}}]),tt}())||Ch),wh,Bf,vh=(wh=Object(K.injectable)(),wh(Bf=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(Mt){Mt.hooks.afterInit.tap("LayerStylePlugin",function(){Mt.updateLayerConfig({});var ht=Mt.getLayerConfig(),_t=ht.autoFit,Lt=ht.fitBoundsOptions;_t&&setTimeout(function(){Mt.fitBounds(Lt)},100)})}}]),tt}())||Bf),Ih,nh;function Ff(tt,Tt){var Mt=Object.keys(tt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(tt);Tt&&(ht=ht.filter(function(_t){return Object.getOwnPropertyDescriptor(tt,_t).enumerable})),Mt.push.apply(Mt,ht)}return Mt}function Nf(tt){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?Ff(Object(Mt),!0).forEach(function(ht){l()(tt,ht,Mt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Mt)):Ff(Object(Mt)).forEach(function(ht){Object.defineProperty(tt,ht,Object.getOwnPropertyDescriptor(Mt,ht))})}return tt}var Lh={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Gh={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},ph={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Vh={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},id=["ambient","diffuse","specular"];function gh(tt){var Tt={u_DirectionalLights:new Array(3).fill(Nf({},ph)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Nf({},Vh)),u_NumOfSpotLights:0};return(!tt||!tt.length)&&(tt=[Gh]),tt.forEach(function(Mt,ht){var _t=Mt.type,Lt=_t===void 0?"directional":_t,Gt=a()(Mt,["type"]),le=Lh[Lt].lights,we=Lh[Lt].num,Xe=Tt[we];Tt[le][Xe]=Nf(Nf({},Tt[le][Xe]),Gt),Tt[we]++}),Tt}var Wh=(Ih=Object(K.injectable)(),Ih(nh=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(Mt){Mt.hooks.beforeRender.tap("LightingPlugin",function(){var ht=Mt.getLayerConfig(),_t=ht.enableLighting;_t&&Mt.models.forEach(function(Lt){return Lt.addUniforms(Nf({},gh()))})})}}]),tt}())||nh),mh,yh,Jf={NONE:0,ENCODE:1,HIGHLIGHT:2},xh=(mh=Object(K.injectable)(),mh(yh=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(Mt,ht){var _t=ht.rendererService,Lt=ht.styleAttributeService;Mt.hooks.init.tap("PixelPickingPlugin",function(){var Gt=Mt.getLayerConfig(),le=Gt.enablePicking;Lt.registerStyleAttribute({name:"pickingColor",type:U.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:U.gl.FLOAT},size:3,update:function(Xe,yn){var Pn=Xe.id;return le?Object(O.l)(Pn):[0,0,0]}}})}),Mt.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var Gt=Mt.getLayerConfig(),le=Gt.enablePicking;le&&Mt.isVisible()&&Mt.models.forEach(function(we){return we.addUniforms({u_PickingStage:Jf.ENCODE})})}),Mt.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var Gt=Mt.getLayerConfig(),le=Gt.enablePicking;le&&Mt.isVisible()&&Mt.models.forEach(function(we){return we.addUniforms({u_PickingStage:Jf.HIGHLIGHT})})}),Mt.hooks.beforeHighlight.tap("PixelPickingPlugin",function(Gt){var le=Mt.getLayerConfig(),we=le.highlightColor,Xe=typeof we=="string"?Object(O.s)(we):we||[1,0,0,1];Mt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(Gt))}),Mt.models.forEach(function(yn){return yn.addUniforms({u_PickingStage:Jf.HIGHLIGHT,u_PickingColor:Gt,u_HighlightColor:Xe.map(function(Pn){return Pn*255})})})}),Mt.hooks.beforeSelect.tap("PixelPickingPlugin",function(Gt){var le=Mt.getLayerConfig(),we=le.selectColor,Xe=typeof we=="string"?Object(O.s)(we):we||[1,0,0,1];Mt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(Gt))}),Mt.models.forEach(function(yn){return yn.addUniforms({u_PickingStage:Jf.HIGHLIGHT,u_PickingColor:Gt,u_HighlightColor:Xe.map(function(Pn){return Pn*255})})})})}}]),tt}())||yh),bh,rh,ih,ah,Hh,Yh,md=(bh=Object(K.injectable)(),rh=Object(K.inject)(U.TYPES.ILogService),bh(ih=(ah=(Yh=function(){function tt(){T()(this,tt),v()(this,"logger",Hh,this)}return t()(tt,[{key:"apply",value:function(Mt,ht){var _t=this,Lt=ht.styleAttributeService;Mt.hooks.init.tap("RegisterStyleAttributePlugin",function(){_t.registerBuiltinAttributes(Lt)})}},{key:"registerBuiltinAttributes",value:function(Mt){Mt.registerStyleAttribute({name:"position",type:U.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:U.gl.FLOAT},size:3,update:function(_t,Lt,Gt){return Gt.length===2?[Gt[0],Gt[1],0]:[Gt[0],Gt[1],Gt[2]]}}}),Mt.registerStyleAttribute({name:"filter",type:U.AttributeType.Attribute,descriptor:{name:"filter",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(_t,Lt){var Gt=_t.filter;return Gt?[1]:[0]}}}),Mt.registerStyleAttribute({name:"color",type:U.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(_t,Lt){var Gt=_t.color;return!Gt||!Gt.length?[1,1,1,1]:Gt}}})}}]),tt}(),Yh),Hh=_()(ah.prototype,"logger",[rh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ah))||ih),Zh,ad,Kh,Sd,yd,Eh,Wu,af,xd,zf,Xh,od,Jh=(Zh=Object(K.injectable)(),ad=Object(K.inject)(U.TYPES.ICameraService),Kh=Object(K.inject)(U.TYPES.ICoordinateSystemService),Sd=Object(K.inject)(U.TYPES.IRendererService),yd=Object(K.inject)(U.TYPES.IMapService),Zh(Eh=(Wu=(od=function(){function tt(){T()(this,tt),v()(this,"cameraService",af,this),v()(this,"coordinateSystemService",xd,this),v()(this,"rendererService",zf,this),v()(this,"mapService",Xh,this)}return t()(tt,[{key:"apply",value:function(Mt){var ht=this,_t=this.mapService.version,Lt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Gt=[0,0];Mt.hooks.beforeRender.tap("ShaderUniformPlugin",function(){ht.coordinateSystemService.refresh(),_t==="GAODE2.x"&&(Lt=ht.mapService.map.customCoords.getMVPMatrix(),Gt=ht.mapService.getCustomCoordCenter());var le=ht.rendererService.getViewportSize(),we=le.width,Xe=le.height;Mt.models.forEach(function(yn){var Pn;yn.addUniforms((Pn={},l()(Pn,U.CameraUniform.ProjectionMatrix,ht.cameraService.getProjectionMatrix()),l()(Pn,U.CameraUniform.ViewMatrix,ht.cameraService.getViewMatrix()),l()(Pn,U.CameraUniform.ViewProjectionMatrix,ht.cameraService.getViewProjectionMatrix()),l()(Pn,U.CameraUniform.Zoom,ht.cameraService.getZoom()),l()(Pn,U.CameraUniform.ZoomScale,ht.cameraService.getZoomScale()),l()(Pn,U.CameraUniform.FocalDistance,ht.cameraService.getFocalDistance()),l()(Pn,U.CameraUniform.CameraPosition,ht.cameraService.getCameraPosition()),l()(Pn,U.CoordinateUniform.CoordinateSystem,ht.coordinateSystemService.getCoordinateSystem()),l()(Pn,U.CoordinateUniform.ViewportCenter,ht.coordinateSystemService.getViewportCenter()),l()(Pn,U.CoordinateUniform.ViewportCenterProjection,ht.coordinateSystemService.getViewportCenterProjection()),l()(Pn,U.CoordinateUniform.PixelsPerDegree,ht.coordinateSystemService.getPixelsPerDegree()),l()(Pn,U.CoordinateUniform.PixelsPerDegree2,ht.coordinateSystemService.getPixelsPerDegree2()),l()(Pn,U.CoordinateUniform.PixelsPerMeter,ht.coordinateSystemService.getPixelsPerMeter()),l()(Pn,U.CoordinateUniform.Mvp,Lt),l()(Pn,"u_SceneCenterMKT",Gt),l()(Pn,"u_ViewportSize",[we,Xe]),l()(Pn,"u_DevicePixelRatio",window.devicePixelRatio),l()(Pn,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l()(Pn,"u_PickingBuffer",Mt.getLayerConfig().pickingBuffer||0),Pn))})})}}]),tt}(),od),af=_()(Wu.prototype,"cameraService",[ad],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xd=_()(Wu.prototype,"coordinateSystemService",[Kh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zf=_()(Wu.prototype,"rendererService",[Sd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xh=_()(Wu.prototype,"mapService",[yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wu))||Eh),pf,Rh,Dh=(pf=Object(K.injectable)(),pf(Rh=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(Mt){Mt.hooks.beforeRender.tap("UpdateModelPlugin",function(){Mt.layerModel&&Mt.layerModel.needUpdate()})}}]),tt}())||Rh),jh,Bh,$h,Qh,Sh,sd,bd=(jh=Object(K.injectable)(),Bh=Object(K.inject)(U.TYPES.ILogService),jh($h=(Qh=(sd=function(){function tt(){T()(this,tt),v()(this,"logger",Sh,this)}return t()(tt,[{key:"apply",value:function(Mt,ht){var _t=this,Lt=ht.styleAttributeService;Mt.hooks.init.tap("UpdateStyleAttributePlugin",function(){_t.initStyleAttribute(Mt,{styleAttributeService:Lt})}),Mt.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){Mt.layerModelNeedUpdate||_t.updateStyleAtrribute(Mt,{styleAttributeService:Lt})})}},{key:"updateStyleAtrribute",value:function(Mt,ht){var _t=this,Lt=ht.styleAttributeService,Gt=Lt.getLayerStyleAttributes()||[],le=Lt.getLayerStyleAttribute("filter"),we=Lt.getLayerStyleAttribute("shape");if(le&&le.needRegenerateVertices||we&&we.needRegenerateVertices){Mt.layerModelNeedUpdate=!0,Gt.forEach(function(Xe){return Xe.needRegenerateVertices=!1});return}Gt.filter(function(Xe){return Xe.needRegenerateVertices}).forEach(function(Xe){Lt.updateAttributeByFeatureRange(Xe.name,Mt.getEncodedData(),Xe.featureRange.startIndex,Xe.featureRange.endIndex),Xe.needRegenerateVertices=!1,_t.logger.debug("regenerate vertex attributes: ".concat(Xe.name," finished"))})}},{key:"initStyleAttribute",value:function(Mt,ht){var _t=this,Lt=ht.styleAttributeService,Gt=Lt.getLayerStyleAttributes()||[];Gt.filter(function(le){return le.needRegenerateVertices}).forEach(function(le){Lt.updateAttributeByFeatureRange(le.name,Mt.getEncodedData(),le.featureRange.startIndex,le.featureRange.endIndex),le.needRegenerateVertices=!1,_t.logger.debug("init vertex attributes: ".concat(le.name," finished"))})}}]),tt}(),sd),Sh=_()(Qh.prototype,"logger",[Bh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qh))||$h);U.container.bind(U.TYPES.ILayerPlugin).to(gi).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(md).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(jf).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Jn).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(vh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(bd).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Dh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(ft).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Jh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Ah).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Wh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(xh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Oh).inRequestScope()},t2Dn:function(Se,dt,L){var U=L("hypo"),E=L("ljhN");function T(e,t,u){(u!==void 0&&!E(e[t],u)||u===void 0&&!(t in e))&&U(e,t,u)}Se.exports=T},u6S6:function(Se,dt,L){var U=L("6acW"),E=L("sgoq"),T=E(function(e,t,u){return t=t.toLowerCase(),e+(u?U(t):t)});Se.exports=T},uhBA:function(Se,dt,L){"use strict";var U=Object.prototype.hasOwnProperty,E="~";function T(){}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(E=!1));function e(h,r,c){this.fn=h,this.context=r,this.once=c||!1}function t(h,r,c,n,i){if(typeof c!="function")throw new TypeError("The listener must be a function");var a=new e(c,n||h,i),o=E?E+r:r;return h._events[o]?h._events[o].fn?h._events[o]=[h._events[o],a]:h._events[o].push(a):(h._events[o]=a,h._eventsCount++),h}function u(h,r){--h._eventsCount==0?h._events=new T:delete h._events[r]}function s(){this._events=new T,this._eventsCount=0}s.prototype.eventNames=function(){var r=[],c,n;if(this._eventsCount===0)return r;for(n in c=this._events)U.call(c,n)&&r.push(E?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(c)):r},s.prototype.listeners=function(r){var c=E?E+r:r,n=this._events[c];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(r){var c=E?E+r:r,n=this._events[c];return n?n.fn?1:n.length:0},s.prototype.emit=function(r,c,n,i,a,o){var l=E?E+r:r;if(!this._events[l])return!1;var f=this._events[l],v=arguments.length,b,g;if(f.fn){switch(f.once&&this.removeListener(r,f.fn,void 0,!0),v){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,c),!0;case 3:return f.fn.call(f.context,c,n),!0;case 4:return f.fn.call(f.context,c,n,i),!0;case 5:return f.fn.call(f.context,c,n,i,a),!0;case 6:return f.fn.call(f.context,c,n,i,a,o),!0}for(g=1,b=new Array(v-1);g<v;g++)b[g-1]=arguments[g];f.fn.apply(f.context,b)}else{var y=f.length,_;for(g=0;g<y;g++)switch(f[g].once&&this.removeListener(r,f[g].fn,void 0,!0),v){case 1:f[g].fn.call(f[g].context);break;case 2:f[g].fn.call(f[g].context,c);break;case 3:f[g].fn.call(f[g].context,c,n);break;case 4:f[g].fn.call(f[g].context,c,n,i);break;default:if(!b)for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];f[g].fn.apply(f[g].context,b)}}return!0},s.prototype.on=function(r,c,n){return t(this,r,c,n,!1)},s.prototype.once=function(r,c,n){return t(this,r,c,n,!0)},s.prototype.removeListener=function(r,c,n,i){var a=E?E+r:r;if(!this._events[a])return this;if(!c)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn===c&&(!i||o.once)&&(!n||o.context===n)&&u(this,a);else{for(var l=0,f=[],v=o.length;l<v;l++)(o[l].fn!==c||i&&!o[l].once||n&&o[l].context!==n)&&f.push(o[l]);f.length?this._events[a]=f.length===1?f[0]:f:u(this,a)}return this},s.prototype.removeAllListeners=function(r){var c;return r?(c=E?E+r:r,this._events[c]&&u(this,c)):(this._events=new T,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=E,s.EventEmitter=s,Se.exports=s},ujMp:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.circularDependencyToException=dt.listMetadataForTarget=dt.listRegisteredBindingsForServiceIdentifier=dt.getServiceIdentifierAsString=dt.getFunctionName=void 0;var U=L("MON2");function E(r){if(typeof r=="function"){var c=r;return c.name}else{if(typeof r=="symbol")return r.toString();var c=r;return c}}dt.getServiceIdentifierAsString=E;function T(r,c,n){var i="",a=n(r,c);return a.length!==0&&(i=`
Registered bindings:`,a.forEach(function(o){var l="Object";o.implementationType!==null&&(l=h(o.implementationType)),i=i+`
 `+l,o.constraint.metaData&&(i=i+" - "+o.constraint.metaData)})),i}dt.listRegisteredBindingsForServiceIdentifier=T;function e(r,c){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===c?!0:e(r.parentRequest,c)}function t(r){function c(i,a){a===void 0&&(a=[]);var o=E(i.serviceIdentifier);return a.push(o),i.parentRequest!==null?c(i.parentRequest,a):a}var n=c(r);return n.reverse().join(" --> ")}function u(r){r.childRequests.forEach(function(c){if(e(c,c.serviceIdentifier)){var n=t(c);throw new Error(U.CIRCULAR_DEPENDENCY+" "+n)}else u(c)})}dt.circularDependencyToException=u;function s(r,c){if(c.isTagged()||c.isNamed()){var n="",i=c.getNamedTag(),a=c.getCustomTags();return i!==null&&(n+=i.toString()+`
`),a!==null&&a.forEach(function(o){n+=o.toString()+`
`})," "+r+`
 `+r+" - "+n}else return" "+r}dt.listMetadataForTarget=s;function h(r){if(r.name)return r.name;var c=r.toString(),n=c.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+c}dt.getFunctionName=h},"vN+2":function(Se,dt){function L(){}Se.exports=L},"w/wX":function(Se,dt,L){var U=L("QqLw"),E=L("ExA7"),T="[object Set]";function e(t){return E(t)&&U(t)==T}Se.exports=e},w26f:function(Se,dt,L){(function(U){var E=200,T="__lodash_hash_undefined__",e=1/0,t="[object Function]",u="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,r=typeof U=="object"&&U&&U.Object===Object&&U,c=typeof self=="object"&&self&&self.Object===Object&&self,n=r||c||Function("return this")();function i(de,ue){var Ne=de?de.length:0;return!!Ne&&l(de,ue,0)>-1}function a(de,ue,Ne){for(var cn=-1,Fn=de?de.length:0;++cn<Fn;)if(Ne(ue,de[cn]))return!0;return!1}function o(de,ue,Ne,cn){for(var Fn=de.length,wn=Ne+(cn?1:-1);cn?wn--:++wn<Fn;)if(ue(de[wn],wn,de))return wn;return-1}function l(de,ue,Ne){if(ue!==ue)return o(de,f,Ne);for(var cn=Ne-1,Fn=de.length;++cn<Fn;)if(de[cn]===ue)return cn;return-1}function f(de){return de!==de}function v(de,ue){return de.has(ue)}function b(de,ue){return de==null?void 0:de[ue]}function g(de){var ue=!1;if(de!=null&&typeof de.toString!="function")try{ue=!!(de+"")}catch(Ne){}return ue}function y(de){var ue=-1,Ne=Array(de.size);return de.forEach(function(cn){Ne[++ue]=cn}),Ne}var _=Array.prototype,M=Function.prototype,x=Object.prototype,m=n["__core-js_shared__"],S=function(){var de=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return de?"Symbol(src)_1."+de:""}(),P=M.toString,A=x.hasOwnProperty,O=x.toString,R=RegExp("^"+P.call(A).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=_.splice,N=yt(n,"Map"),K=yt(n,"Set"),V=yt(Object,"create");function k(de){var ue=-1,Ne=de?de.length:0;for(this.clear();++ue<Ne;){var cn=de[ue];this.set(cn[0],cn[1])}}function Z(){this.__data__=V?V(null):{}}function X(de){return this.has(de)&&delete this.__data__[de]}function at(de){var ue=this.__data__;if(V){var Ne=ue[de];return Ne===T?void 0:Ne}return A.call(ue,de)?ue[de]:void 0}function pt(de){var ue=this.__data__;return V?ue[de]!==void 0:A.call(ue,de)}function gt(de,ue){var Ne=this.__data__;return Ne[de]=V&&ue===void 0?T:ue,this}k.prototype.clear=Z,k.prototype.delete=X,k.prototype.get=at,k.prototype.has=pt,k.prototype.set=gt;function ft(de){var ue=-1,Ne=de?de.length:0;for(this.clear();++ue<Ne;){var cn=de[ue];this.set(cn[0],cn[1])}}function Rt(){this.__data__=[]}function Nt(de){var ue=this.__data__,Ne=Y(ue,de);if(Ne<0)return!1;var cn=ue.length-1;return Ne==cn?ue.pop():H.call(ue,Ne,1),!0}function Dt(de){var ue=this.__data__,Ne=Y(ue,de);return Ne<0?void 0:ue[Ne][1]}function St(de){return Y(this.__data__,de)>-1}function xt(de,ue){var Ne=this.__data__,cn=Y(Ne,de);return cn<0?Ne.push([de,ue]):Ne[cn][1]=ue,this}ft.prototype.clear=Rt,ft.prototype.delete=Nt,ft.prototype.get=Dt,ft.prototype.has=St,ft.prototype.set=xt;function Ot(de){var ue=-1,Ne=de?de.length:0;for(this.clear();++ue<Ne;){var cn=de[ue];this.set(cn[0],cn[1])}}function it(){this.__data__={hash:new k,map:new(N||ft),string:new k}}function At(de){return Pt(this,de).delete(de)}function z(de){return Pt(this,de).get(de)}function q(de){return Pt(this,de).has(de)}function mt(de,ue){return Pt(this,de).set(de,ue),this}Ot.prototype.clear=it,Ot.prototype.delete=At,Ot.prototype.get=z,Ot.prototype.has=q,Ot.prototype.set=mt;function et(de){var ue=-1,Ne=de?de.length:0;for(this.__data__=new Ot;++ue<Ne;)this.add(de[ue])}function st(de){return this.__data__.set(de,T),this}function bt(de){return this.__data__.has(de)}et.prototype.add=et.prototype.push=st,et.prototype.has=bt;function Y(de,ue){for(var Ne=de.length;Ne--;)if($t(de[Ne][0],ue))return Ne;return-1}function rt(de){if(!Je(de)||Qt(de))return!1;var ue=De(de)||g(de)?R:h;return ue.test(ne(de))}function ot(de,ue,Ne){var cn=-1,Fn=i,wn=de.length,en=!0,tn=[],xn=tn;if(Ne)en=!1,Fn=a;else if(wn>=E){var Bn=ue?null:$(de);if(Bn)return y(Bn);en=!1,Fn=v,xn=new et}else xn=ue?[]:tn;t:for(;++cn<wn;){var vr=de[cn],li=ue?ue(vr):vr;if(vr=Ne||vr!==0?vr:0,en&&li===li){for(var Me=xn.length;Me--;)if(xn[Me]===li)continue t;ue&&xn.push(li),tn.push(vr)}else Fn(xn,li,Ne)||(xn!==tn&&xn.push(li),tn.push(vr))}return tn}var $=K&&1/y(new K([,-0]))[1]==e?function(de){return new K(de)}:Qe;function Pt(de,ue){var Ne=de.__data__;return Ft(ue)?Ne[typeof ue=="string"?"string":"hash"]:Ne.map}function yt(de,ue){var Ne=b(de,ue);return rt(Ne)?Ne:void 0}function Ft(de){var ue=typeof de;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?de!=="__proto__":de===null}function Qt(de){return!!S&&S in de}function ne(de){if(de!=null){try{return P.call(de)}catch(ue){}try{return de+""}catch(ue){}}return""}function Wt(de){return de&&de.length?ot(de):[]}function $t(de,ue){return de===ue||de!==de&&ue!==ue}function De(de){var ue=Je(de)?O.call(de):"";return ue==t||ue==u}function Je(de){var ue=typeof de;return!!de&&(ue=="object"||ue=="function")}function Qe(){}Se.exports=Wt}).call(this,L("IyRk"))},wclG:function(Se,dt,L){var U=L("pFRH"),E=L("88Gu"),T=E(U);Se.exports=T},wnjb:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.MetadataReader=void 0;var U=L("xfSm"),E=function(){function T(){}return T.prototype.getConstructorMetadata=function(e){var t=Reflect.getMetadata(U.PARAM_TYPES,e),u=Reflect.getMetadata(U.TAGGED,e);return{compilerGeneratedMetadata:t,userGeneratedMetadata:u||{}}},T.prototype.getPropertiesMetadata=function(e){var t=Reflect.getMetadata(U.TAGGED_PROP,e)||[];return t},T}();dt.MetadataReader=E},wrZu:function(Se,dt,L){var U=L("+K+b"),E=L("XYm9"),T=L("b2z7"),e=L("otv/"),t=L("yP5f"),u="[object Boolean]",s="[object Date]",h="[object Map]",r="[object Number]",c="[object RegExp]",n="[object Set]",i="[object String]",a="[object Symbol]",o="[object ArrayBuffer]",l="[object DataView]",f="[object Float32Array]",v="[object Float64Array]",b="[object Int8Array]",g="[object Int16Array]",y="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",x="[object Uint16Array]",m="[object Uint32Array]";function S(P,A,O){var R=P.constructor;switch(A){case o:return U(P);case u:case s:return new R(+P);case l:return E(P,O);case f:case v:case b:case g:case y:case _:case M:case x:case m:return t(P,O);case h:return new R;case r:case i:return new R(P);case c:return T(P);case n:return new R;case a:return e(P)}}Se.exports=S},wy8a:function(Se,dt,L){var U=L("KxBF");function E(T,e,t){var u=T.length;return t=t===void 0?u:t,!e&&t>=u?T:U(T,e,t)}Se.exports=E},xfSm:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.NON_CUSTOM_TAG_KEYS=dt.POST_CONSTRUCT=dt.DESIGN_PARAM_TYPES=dt.PARAM_TYPES=dt.TAGGED_PROP=dt.TAGGED=dt.MULTI_INJECT_TAG=dt.INJECT_TAG=dt.OPTIONAL_TAG=dt.UNMANAGED_TAG=dt.NAME_TAG=dt.NAMED_TAG=void 0,dt.NAMED_TAG="named",dt.NAME_TAG="name",dt.UNMANAGED_TAG="unmanaged",dt.OPTIONAL_TAG="optional",dt.INJECT_TAG="inject",dt.MULTI_INJECT_TAG="multi_inject",dt.TAGGED="inversify:tagged",dt.TAGGED_PROP="inversify:tagged_props",dt.PARAM_TYPES="inversify:paramtypes",dt.DESIGN_PARAM_TYPES="design:paramtypes",dt.POST_CONSTRUCT="post_construct";function U(){return[dt.INJECT_TAG,dt.MULTI_INJECT_TAG,dt.NAME_TAG,dt.UNMANAGED_TAG,dt.NAMED_TAG,dt.OPTIONAL_TAG]}dt.NON_CUSTOM_TAG_KEYS=U()},xfeJ:function(Se,dt){function L(U){return Function.toString.call(U).indexOf("[native code]")!==-1}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},xiII:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Request=void 0;var U=L("d9O0"),E=function(){function T(e,t,u,s,h){this.id=U.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=u,this.target=h,this.childRequests=[],this.bindings=Array.isArray(s)?s:[s],this.requestScope=u===null?new Map:null}return T.prototype.addChildRequest=function(e,t,u){var s=new T(e,this.parentContext,this,t,u);return this.childRequests.push(s),s},T}();dt.Request=E},xp6e:function(Se,dt,L){"use strict";(function(U){L.d(dt,"a",function(){return at}),L.d(dt,"b",function(){return Rt}),L.d(dt,"c",function(){return V}),L.d(dt,"d",function(){return ft});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function E(Nt,Dt,St,xt){function Ot(it){return it instanceof St?it:new St(function(At){At(it)})}return new(St||(St=Promise))(function(it,At){function z(et){try{mt(xt.next(et))}catch(st){At(st)}}function q(et){try{mt(xt.throw(et))}catch(st){At(st)}}function mt(et){et.done?it(et.value):Ot(et.value).then(z,q)}mt((xt=xt.apply(Nt,Dt||[])).next())})}function T(Nt,Dt){var St={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},xt,Ot,it,At;return At={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(At[Symbol.iterator]=function(){return this}),At;function z(mt){return function(et){return q([mt,et])}}function q(mt){if(xt)throw new TypeError("Generator is already executing.");for(;St;)try{if(xt=1,Ot&&(it=mt[0]&2?Ot.return:mt[0]?Ot.throw||((it=Ot.return)&&it.call(Ot),0):Ot.next)&&!(it=it.call(Ot,mt[1])).done)return it;switch(Ot=0,it&&(mt=[mt[0]&2,it.value]),mt[0]){case 0:case 1:it=mt;break;case 4:return St.label++,{value:mt[1],done:!1};case 5:St.label++,Ot=mt[1],mt=[0];continue;case 7:mt=St.ops.pop(),St.trys.pop();continue;default:if(it=St.trys,!(it=it.length>0&&it[it.length-1])&&(mt[0]===6||mt[0]===2)){St=0;continue}if(mt[0]===3&&(!it||mt[1]>it[0]&&mt[1]<it[3])){St.label=mt[1];break}if(mt[0]===6&&St.label<it[1]){St.label=it[1],it=mt;break}if(it&&St.label<it[2]){St.label=it[2],St.ops.push(mt);break}it[2]&&St.ops.pop(),St.trys.pop();continue}mt=Dt.call(Nt,St)}catch(et){mt=[6,et],Ot=0}finally{xt=it=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}}function e(Nt,Dt){var St=typeof Symbol=="function"&&Nt[Symbol.iterator];if(!St)return Nt;var xt=St.call(Nt),Ot,it=[],At;try{for(;(Dt===void 0||Dt-- >0)&&!(Ot=xt.next()).done;)it.push(Ot.value)}catch(z){At={error:z}}finally{try{Ot&&!Ot.done&&(St=xt.return)&&St.call(xt)}finally{if(At)throw At.error}}return it}function t(){for(var Nt=[],Dt=0;Dt<arguments.length;Dt++)Nt=Nt.concat(e(arguments[Dt]));return Nt}function u(Nt){return Nt&&Nt.__esModule&&Object.prototype.hasOwnProperty.call(Nt,"default")?Nt.default:Nt}function s(Nt,Dt){return Dt={exports:{}},Nt(Dt,Dt.exports),Dt.exports}var h=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=St;function St(xt){return xt&&typeof xt.length=="number"&&xt.length>=0&&xt.length%1==0}Nt.exports=Dt.default});u(h);var r=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=function(St){return function(){for(var xt=[],Ot=arguments.length;Ot--;)xt[Ot]=arguments[Ot];var it=xt.pop();return St.call(this,xt,it)}},Nt.exports=Dt.default});u(r);var c=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.fallback=Ot,Dt.wrap=it;var St=Dt.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,xt=Dt.hasNextTick=typeof U=="object"&&typeof U.nextTick=="function";function Ot(z){setTimeout(z,0)}function it(z){return function(q){for(var mt=[],et=arguments.length-1;et-- >0;)mt[et]=arguments[et+1];return z(function(){return q.apply(void 0,mt)})}}var At;St?At=setImmediate:xt?At=U.nextTick:At=Ot,Dt.default=it(At)});u(c);var n=c.fallback,i=c.wrap,a=c.hasSetImmediate,o=c.hasNextTick,l=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=it;var St=Ot(r),xt=Ot(c);function Ot(q){return q&&q.__esModule?q:{default:q}}function it(q){return(0,f.isAsync)(q)?function(){for(var mt=[],et=arguments.length;et--;)mt[et]=arguments[et];var st=mt.pop(),bt=q.apply(this,mt);return At(bt,st)}:(0,St.default)(function(mt,et){var st;try{st=q.apply(this,mt)}catch(bt){return et(bt)}if(st&&typeof st.then=="function")return At(st,et);et(null,st)})}function At(q,mt){return q.then(function(et){z(mt,null,et)},function(et){z(mt,et&&et.message?et:new Error(et))})}function z(q,mt,et){try{q(mt,et)}catch(st){(0,xt.default)(function(bt){throw bt},st)}}Nt.exports=Dt.default});u(l);var f=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.isAsyncIterable=Dt.isAsyncGenerator=Dt.isAsync=void 0;var St=xt(l);function xt(q){return q&&q.__esModule?q:{default:q}}function Ot(q){return q[Symbol.toStringTag]==="AsyncFunction"}function it(q){return q[Symbol.toStringTag]==="AsyncGenerator"}function At(q){return typeof q[Symbol.asyncIterator]=="function"}function z(q){if(typeof q!="function")throw new Error("expected a function");return Ot(q)?(0,St.default)(q):q}Dt.default=z,Dt.isAsync=Ot,Dt.isAsyncGenerator=it,Dt.isAsyncIterable=At});u(f);var v=f.isAsyncIterable,b=f.isAsyncGenerator,g=f.isAsync,y=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=St;function St(xt,Ot){if(Ot===void 0&&(Ot=xt.length),!Ot)throw new Error("arity is undefined");function it(){for(var At=this,z=[],q=arguments.length;q--;)z[q]=arguments[q];return typeof z[Ot-1]=="function"?xt.apply(this,z):new Promise(function(mt,et){z[Ot-1]=function(st){for(var bt=[],Y=arguments.length-1;Y-- >0;)bt[Y]=arguments[Y+1];if(st)return et(st);mt(bt.length>1?bt:bt[0])},xt.apply(At,z)})}return Object.defineProperty(it,"name",{configurable:!0,value:"awaitable("+xt.name+")"}),it}Nt.exports=Dt.default});u(y);var _=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0});var St=it(h),xt=it(f),Ot=it(y);function it(At){return At&&At.__esModule?At:{default:At}}Dt.default=(0,Ot.default)(function(At,z,q){var mt=(0,St.default)(z)?[]:{};At(z,function(et,st,bt){(0,xt.default)(et)(function(Y){for(var rt,ot=[],$=arguments.length-1;$-- >0;)ot[$]=arguments[$+1];ot.length<2&&(rt=ot,ot=rt[0]),mt[st]=ot,bt(Y)})},function(et){return q(et,mt)})},3),Nt.exports=Dt.default});u(_);var M=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=St;function St(xt){function Ot(){for(var it=[],At=arguments.length;At--;)it[At]=arguments[At];if(xt!==null){var z=xt;xt=null,z.apply(this,it)}}return Object.assign(Ot,xt),Ot}Nt.exports=Dt.default});u(M);var x=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=function(St){return St[Symbol.iterator]&&St[Symbol.iterator]()},Nt.exports=Dt.default});u(x);var m=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=q;var St=Ot(h),xt=Ot(x);function Ot(mt){return mt&&mt.__esModule?mt:{default:mt}}function it(mt){var et=-1,st=mt.length;return function(){return++et<st?{value:mt[et],key:et}:null}}function At(mt){var et=-1;return function(){var bt=mt.next();return bt.done?null:(et++,{value:bt.value,key:et})}}function z(mt){var et=mt?Object.keys(mt):[],st=-1,bt=et.length;return function(){var rt=et[++st];return st<bt?{value:mt[rt],key:rt}:null}}function q(mt){if((0,St.default)(mt))return it(mt);var et=(0,xt.default)(mt);return et?At(et):z(mt)}Nt.exports=Dt.default});u(m);var S=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=St;function St(xt){return function(){for(var Ot=[],it=arguments.length;it--;)Ot[it]=arguments[it];if(xt===null)throw new Error("Callback was already called.");var At=xt;xt=null,At.apply(this,Ot)}}Nt.exports=Dt.default});u(S);var P=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0});var St={};Dt.default=St,Nt.exports=Dt.default});u(P);var A=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=Ot;var St=xt(P);function xt(it){return it&&it.__esModule?it:{default:it}}function Ot(it,At,z,q){var mt=!1,et=!1,st=!1,bt=0,Y=0;function rt(){bt>=At||st||mt||(st=!0,it.next().then(function(Pt){var yt=Pt.value,Ft=Pt.done;if(!(et||mt)){if(st=!1,Ft){mt=!0,bt<=0&&q(null);return}bt++,z(yt,Y,ot),Y++,rt()}}).catch($))}function ot(Pt,yt){if(bt-=1,!et){if(Pt)return $(Pt);if(Pt===!1){mt=!0,et=!0;return}if(yt===St.default||mt&&bt<=0)return mt=!0,q(null);rt()}}function $(Pt){et||(st=!1,mt=!0,q(Pt))}rt()}Nt.exports=Dt.default});u(A);var O=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0});var St=z(M),xt=z(m),Ot=z(S),it=z(A),At=z(P);function z(q){return q&&q.__esModule?q:{default:q}}Dt.default=function(q){return function(mt,et,st){if(st=(0,St.default)(st),q<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!mt)return st(null);if((0,f.isAsyncGenerator)(mt))return(0,it.default)(mt,q,et,st);if((0,f.isAsyncIterable)(mt))return(0,it.default)(mt[Symbol.asyncIterator](),q,et,st);var bt=(0,xt.default)(mt),Y=!1,rt=!1,ot=0,$=!1;function Pt(Ft,Qt){if(!rt)if(ot-=1,Ft)Y=!0,st(Ft);else if(Ft===!1)Y=!0,rt=!0;else{if(Qt===At.default||Y&&ot<=0)return Y=!0,st(null);$||yt()}}function yt(){for($=!0;ot<q&&!Y;){var Ft=bt();if(Ft===null){Y=!0,ot<=0&&st(null);return}ot+=1,et(Ft.value,Ft.key,(0,Ot.default)(Pt))}$=!1}yt()}},Nt.exports=Dt.default});u(O);var R=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0});var St=it(O),xt=it(f),Ot=it(y);function it(z){return z&&z.__esModule?z:{default:z}}function At(z,q,mt,et){return(0,St.default)(q)(z,(0,xt.default)(mt),et)}Dt.default=(0,Ot.default)(At,4),Nt.exports=Dt.default});u(R);var H=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0});var St=Ot(R),xt=Ot(y);function Ot(At){return At&&At.__esModule?At:{default:At}}function it(At,z,q){return(0,St.default)(At,1,z,q)}Dt.default=(0,xt.default)(it,3),Nt.exports=Dt.default});u(H);var N=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=it;var St=Ot(_),xt=Ot(H);function Ot(At){return At&&At.__esModule?At:{default:At}}function it(At,z){return(0,St.default)(xt.default,At,z)}Nt.exports=Dt.default}),K=u(N),V=function(){function Nt(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];this.args=[],this.tasks=[]}return Nt.prototype.call=function(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];return this.args=St,K(this.tasks)},Nt.prototype.tap=function(Dt,St){var xt=this;this.tasks.push(function(Ot){St.apply(void 0,t(xt.args)),Ot(null,Dt)})},Nt}(),k=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0});var St=mt(h),xt=mt(P),Ot=mt(R),it=mt(M),At=mt(S),z=mt(f),q=mt(y);function mt(Y){return Y&&Y.__esModule?Y:{default:Y}}function et(Y,rt,ot){ot=(0,it.default)(ot);var $=0,Pt=0,yt=Y.length,Ft=!1;yt===0&&ot(null);function Qt(ne,Wt){ne===!1&&(Ft=!0),Ft!==!0&&(ne?ot(ne):(++Pt===yt||Wt===xt.default)&&ot(null))}for(;$<yt;$++)rt(Y[$],$,(0,At.default)(Qt))}function st(Y,rt,ot){return(0,Ot.default)(Y,Infinity,rt,ot)}function bt(Y,rt,ot){var $=(0,St.default)(Y)?et:st;return $(Y,(0,z.default)(rt),ot)}Dt.default=(0,q.default)(bt,3),Nt.exports=Dt.default});u(k);var Z=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=it;var St=Ot(k),xt=Ot(_);function Ot(At){return At&&At.__esModule?At:{default:At}}function it(At,z){return(0,xt.default)(St.default,At,z)}Nt.exports=Dt.default}),X=u(Z),at=function(){function Nt(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];this.tasks=[]}return Nt.prototype.promise=function(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];return X(this.tasks)},Nt.prototype.tapPromise=function(Dt,St){var xt=this;this.tasks.push(function(Ot){return E(xt,void 0,void 0,function(){return T(this,function(it){switch(it.label){case 0:return[4,St()];case 1:return it.sent(),Ot(null,Dt),[2]}})})})},Nt}(),pt=s(function(Nt,Dt){Object.defineProperty(Dt,"__esModule",{value:!0});var St=At(M),xt=At(S),Ot=At(f),it=At(y);function At(q){return q&&q.__esModule?q:{default:q}}function z(q,mt){if(mt=(0,St.default)(mt),!Array.isArray(q))return mt(new Error("First argument to waterfall must be an array of functions"));if(!q.length)return mt();var et=0;function st(Y){var rt=(0,Ot.default)(q[et++]);rt.apply(void 0,Y.concat([(0,xt.default)(bt)]))}function bt(Y){for(var rt=[],ot=arguments.length-1;ot-- >0;)rt[ot]=arguments[ot+1];if(Y!==!1){if(Y||et===q.length)return mt.apply(void 0,[Y].concat(rt));st(rt)}}st([])}Dt.default=(0,it.default)(z),Nt.exports=Dt.default}),gt=u(pt),ft=function(){function Nt(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];this.tasks=[]}return Nt.prototype.call=function(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];return gt(this.tasks)},Nt.prototype.tap=function(Dt,St){this.tasks.length===0?this.tasks.push(function(xt){var Ot=St();xt(Ot?null:!1,Ot)}):this.tasks.push(function(xt,Ot){var it=St();Ot(it?null:!1,Dt)})},Nt}(),Rt=function(){function Nt(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];this.tasks=[]}return Nt.prototype.call=function(){for(var Dt=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Dt[xt];return K(this.tasks)},Nt.prototype.tap=function(Dt,St){this.tasks.push(function(xt){var Ot=St();xt(Ot,Dt)})},Nt}()}).call(this,L("Q2Ig"))},yG8O:function(Se,dt){function L(U,E,T,e){!T||Object.defineProperty(U,E,{enumerable:T.enumerable,configurable:T.configurable,writable:T.writable,value:T.initializer?T.initializer.call(e):void 0})}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},yHx3:function(Se,dt){var L=Object.prototype,U=L.hasOwnProperty;function E(T){var e=T.length,t=new T.constructor(e);return e&&typeof T[0]=="string"&&U.call(T,"index")&&(t.index=T.index,t.input=T.input),t}Se.exports=E},yLV6:function(Se,dt,L){var U;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(E,T,e,t){"use strict";var u=["","webkit","Moz","MS","ms","o"],s=T.createElement("div"),h="function",r=Math.round,c=Math.abs,n=Date.now;function i(oe,Zt,be){return setTimeout(y(oe,be),Zt)}function a(oe,Zt,be){return Array.isArray(oe)?(o(oe,be[Zt],be),!0):!1}function o(oe,Zt,be){var sn;if(!!oe)if(oe.forEach)oe.forEach(Zt,be);else if(oe.length!==t)for(sn=0;sn<oe.length;)Zt.call(be,oe[sn],sn,oe),sn++;else for(sn in oe)oe.hasOwnProperty(sn)&&Zt.call(be,oe[sn],sn,oe)}function l(oe,Zt,be){var sn="DEPRECATED METHOD: "+Zt+`
`+be+` AT 
`;return function(){var Vn=new Error("get-stack-trace"),er=Vn&&Vn.stack?Vn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",kn=E.console&&(E.console.warn||E.console.log);return kn&&kn.call(E.console,sn,er),oe.apply(this,arguments)}}var f;typeof Object.assign!="function"?f=function(Zt){if(Zt===t||Zt===null)throw new TypeError("Cannot convert undefined or null to object");for(var be=Object(Zt),sn=1;sn<arguments.length;sn++){var Vn=arguments[sn];if(Vn!==t&&Vn!==null)for(var er in Vn)Vn.hasOwnProperty(er)&&(be[er]=Vn[er])}return be}:f=Object.assign;var v=l(function(Zt,be,sn){for(var Vn=Object.keys(be),er=0;er<Vn.length;)(!sn||sn&&Zt[Vn[er]]===t)&&(Zt[Vn[er]]=be[Vn[er]]),er++;return Zt},"extend","Use `assign`."),b=l(function(Zt,be){return v(Zt,be,!0)},"merge","Use `assign`.");function g(oe,Zt,be){var sn=Zt.prototype,Vn;Vn=oe.prototype=Object.create(sn),Vn.constructor=oe,Vn._super=sn,be&&f(Vn,be)}function y(oe,Zt){return function(){return oe.apply(Zt,arguments)}}function _(oe,Zt){return typeof oe==h?oe.apply(Zt&&Zt[0]||t,Zt):oe}function M(oe,Zt){return oe===t?Zt:oe}function x(oe,Zt,be){o(A(Zt),function(sn){oe.addEventListener(sn,be,!1)})}function m(oe,Zt,be){o(A(Zt),function(sn){oe.removeEventListener(sn,be,!1)})}function S(oe,Zt){for(;oe;){if(oe==Zt)return!0;oe=oe.parentNode}return!1}function P(oe,Zt){return oe.indexOf(Zt)>-1}function A(oe){return oe.trim().split(/\s+/g)}function O(oe,Zt,be){if(oe.indexOf&&!be)return oe.indexOf(Zt);for(var sn=0;sn<oe.length;){if(be&&oe[sn][be]==Zt||!be&&oe[sn]===Zt)return sn;sn++}return-1}function R(oe){return Array.prototype.slice.call(oe,0)}function H(oe,Zt,be){for(var sn=[],Vn=[],er=0;er<oe.length;){var kn=Zt?oe[er][Zt]:oe[er];O(Vn,kn)<0&&sn.push(oe[er]),Vn[er]=kn,er++}return be&&(Zt?sn=sn.sort(function(vi,Si){return vi[Zt]>Si[Zt]}):sn=sn.sort()),sn}function N(oe,Zt){for(var be,sn,Vn=Zt[0].toUpperCase()+Zt.slice(1),er=0;er<u.length;){if(be=u[er],sn=be?be+Vn:Zt,sn in oe)return sn;er++}return t}var K=1;function V(){return K++}function k(oe){var Zt=oe.ownerDocument||oe;return Zt.defaultView||Zt.parentWindow||E}var Z=/mobile|tablet|ip(ad|hone|od)|android/i,X="ontouchstart"in E,at=N(E,"PointerEvent")!==t,pt=X&&Z.test(navigator.userAgent),gt="touch",ft="pen",Rt="mouse",Nt="kinect",Dt=25,St=1,xt=2,Ot=4,it=8,At=1,z=2,q=4,mt=8,et=16,st=z|q,bt=mt|et,Y=st|bt,rt=["x","y"],ot=["clientX","clientY"];function $(oe,Zt){var be=this;this.manager=oe,this.callback=Zt,this.element=oe.element,this.target=oe.options.inputTarget,this.domHandler=function(sn){_(oe.options.enable,[oe])&&be.handler(sn)},this.init()}$.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(k(this.element),this.evWin,this.domHandler)}};function Pt(oe){var Zt,be=oe.options.inputClass;return be?Zt=be:at?Zt=li:pt?Zt=ae:X?Zt=ar:Zt=en,new Zt(oe,yt)}function yt(oe,Zt,be){var sn=be.pointers.length,Vn=be.changedPointers.length,er=Zt&St&&sn-Vn==0,kn=Zt&(Ot|it)&&sn-Vn==0;be.isFirst=!!er,be.isFinal=!!kn,er&&(oe.session={}),be.eventType=Zt,Ft(oe,be),oe.emit("hammer.input",be),oe.recognize(be),oe.session.prevInput=be}function Ft(oe,Zt){var be=oe.session,sn=Zt.pointers,Vn=sn.length;be.firstInput||(be.firstInput=Wt(Zt)),Vn>1&&!be.firstMultiple?be.firstMultiple=Wt(Zt):Vn===1&&(be.firstMultiple=!1);var er=be.firstInput,kn=be.firstMultiple,Xr=kn?kn.center:er.center,vi=Zt.center=$t(sn);Zt.timeStamp=n(),Zt.deltaTime=Zt.timeStamp-er.timeStamp,Zt.angle=de(Xr,vi),Zt.distance=Qe(Xr,vi),Qt(be,Zt),Zt.offsetDirection=Je(Zt.deltaX,Zt.deltaY);var Si=De(Zt.deltaTime,Zt.deltaX,Zt.deltaY);Zt.overallVelocityX=Si.x,Zt.overallVelocityY=Si.y,Zt.overallVelocity=c(Si.x)>c(Si.y)?Si.x:Si.y,Zt.scale=kn?Ne(kn.pointers,sn):1,Zt.rotation=kn?ue(kn.pointers,sn):0,Zt.maxPointers=be.prevInput?Zt.pointers.length>be.prevInput.maxPointers?Zt.pointers.length:be.prevInput.maxPointers:Zt.pointers.length,ne(be,Zt);var ji=oe.element;S(Zt.srcEvent.target,ji)&&(ji=Zt.srcEvent.target),Zt.target=ji}function Qt(oe,Zt){var be=Zt.center,sn=oe.offsetDelta||{},Vn=oe.prevDelta||{},er=oe.prevInput||{};(Zt.eventType===St||er.eventType===Ot)&&(Vn=oe.prevDelta={x:er.deltaX||0,y:er.deltaY||0},sn=oe.offsetDelta={x:be.x,y:be.y}),Zt.deltaX=Vn.x+(be.x-sn.x),Zt.deltaY=Vn.y+(be.y-sn.y)}function ne(oe,Zt){var be=oe.lastInterval||Zt,sn=Zt.timeStamp-be.timeStamp,Vn,er,kn,Xr;if(Zt.eventType!=it&&(sn>Dt||be.velocity===t)){var vi=Zt.deltaX-be.deltaX,Si=Zt.deltaY-be.deltaY,ji=De(sn,vi,Si);er=ji.x,kn=ji.y,Vn=c(ji.x)>c(ji.y)?ji.x:ji.y,Xr=Je(vi,Si),oe.lastInterval=Zt}else Vn=be.velocity,er=be.velocityX,kn=be.velocityY,Xr=be.direction;Zt.velocity=Vn,Zt.velocityX=er,Zt.velocityY=kn,Zt.direction=Xr}function Wt(oe){for(var Zt=[],be=0;be<oe.pointers.length;)Zt[be]={clientX:r(oe.pointers[be].clientX),clientY:r(oe.pointers[be].clientY)},be++;return{timeStamp:n(),pointers:Zt,center:$t(Zt),deltaX:oe.deltaX,deltaY:oe.deltaY}}function $t(oe){var Zt=oe.length;if(Zt===1)return{x:r(oe[0].clientX),y:r(oe[0].clientY)};for(var be=0,sn=0,Vn=0;Vn<Zt;)be+=oe[Vn].clientX,sn+=oe[Vn].clientY,Vn++;return{x:r(be/Zt),y:r(sn/Zt)}}function De(oe,Zt,be){return{x:Zt/oe||0,y:be/oe||0}}function Je(oe,Zt){return oe===Zt?At:c(oe)>=c(Zt)?oe<0?z:q:Zt<0?mt:et}function Qe(oe,Zt,be){be||(be=rt);var sn=Zt[be[0]]-oe[be[0]],Vn=Zt[be[1]]-oe[be[1]];return Math.sqrt(sn*sn+Vn*Vn)}function de(oe,Zt,be){be||(be=rt);var sn=Zt[be[0]]-oe[be[0]],Vn=Zt[be[1]]-oe[be[1]];return Math.atan2(Vn,sn)*180/Math.PI}function ue(oe,Zt){return de(Zt[1],Zt[0],ot)+de(oe[1],oe[0],ot)}function Ne(oe,Zt){return Qe(Zt[0],Zt[1],ot)/Qe(oe[0],oe[1],ot)}var cn={mousedown:St,mousemove:xt,mouseup:Ot},Fn="mousedown",wn="mousemove mouseup";function en(){this.evEl=Fn,this.evWin=wn,this.pressed=!1,$.apply(this,arguments)}g(en,$,{handler:function(Zt){var be=cn[Zt.type];be&St&&Zt.button===0&&(this.pressed=!0),be&xt&&Zt.which!==1&&(be=Ot),!!this.pressed&&(be&Ot&&(this.pressed=!1),this.callback(this.manager,be,{pointers:[Zt],changedPointers:[Zt],pointerType:Rt,srcEvent:Zt}))}});var tn={pointerdown:St,pointermove:xt,pointerup:Ot,pointercancel:it,pointerout:it},xn={2:gt,3:ft,4:Rt,5:Nt},Bn="pointerdown",vr="pointermove pointerup pointercancel";E.MSPointerEvent&&!E.PointerEvent&&(Bn="MSPointerDown",vr="MSPointerMove MSPointerUp MSPointerCancel");function li(){this.evEl=Bn,this.evWin=vr,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}g(li,$,{handler:function(Zt){var be=this.store,sn=!1,Vn=Zt.type.toLowerCase().replace("ms",""),er=tn[Vn],kn=xn[Zt.pointerType]||Zt.pointerType,Xr=kn==gt,vi=O(be,Zt.pointerId,"pointerId");er&St&&(Zt.button===0||Xr)?vi<0&&(be.push(Zt),vi=be.length-1):er&(Ot|it)&&(sn=!0),!(vi<0)&&(be[vi]=Zt,this.callback(this.manager,er,{pointers:be,changedPointers:[Zt],pointerType:kn,srcEvent:Zt}),sn&&be.splice(vi,1))}});var Me={touchstart:St,touchmove:xt,touchend:Ot,touchcancel:it},Pe="touchstart",te="touchstart touchmove touchend touchcancel";function ge(){this.evTarget=Pe,this.evWin=te,this.started=!1,$.apply(this,arguments)}g(ge,$,{handler:function(Zt){var be=Me[Zt.type];if(be===St&&(this.started=!0),!!this.started){var sn=Ht.call(this,Zt,be);be&(Ot|it)&&sn[0].length-sn[1].length==0&&(this.started=!1),this.callback(this.manager,be,{pointers:sn[0],changedPointers:sn[1],pointerType:gt,srcEvent:Zt})}}});function Ht(oe,Zt){var be=R(oe.touches),sn=R(oe.changedTouches);return Zt&(Ot|it)&&(be=H(be.concat(sn),"identifier",!0)),[be,sn]}var re={touchstart:St,touchmove:xt,touchend:Ot,touchcancel:it},Te="touchstart touchmove touchend touchcancel";function ae(){this.evTarget=Te,this.targetIds={},$.apply(this,arguments)}g(ae,$,{handler:function(Zt){var be=re[Zt.type],sn=xe.call(this,Zt,be);!sn||this.callback(this.manager,be,{pointers:sn[0],changedPointers:sn[1],pointerType:gt,srcEvent:Zt})}});function xe(oe,Zt){var be=R(oe.touches),sn=this.targetIds;if(Zt&(St|xt)&&be.length===1)return sn[be[0].identifier]=!0,[be,be];var Vn,er,kn=R(oe.changedTouches),Xr=[],vi=this.target;if(er=be.filter(function(Si){return S(Si.target,vi)}),Zt===St)for(Vn=0;Vn<er.length;)sn[er[Vn].identifier]=!0,Vn++;for(Vn=0;Vn<kn.length;)sn[kn[Vn].identifier]&&Xr.push(kn[Vn]),Zt&(Ot|it)&&delete sn[kn[Vn].identifier],Vn++;if(!!Xr.length)return[H(er.concat(Xr),"identifier",!0),Xr]}var qe=2500,zn=25;function ar(){$.apply(this,arguments);var oe=y(this.handler,this);this.touch=new ae(this.manager,oe),this.mouse=new en(this.manager,oe),this.primaryTouch=null,this.lastTouches=[]}g(ar,$,{handler:function(Zt,be,sn){var Vn=sn.pointerType==gt,er=sn.pointerType==Rt;if(!(er&&sn.sourceCapabilities&&sn.sourceCapabilities.firesTouchEvents)){if(Vn)_n.call(this,be,sn);else if(er&&Or.call(this,sn))return;this.callback(Zt,be,sn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function _n(oe,Zt){oe&St?(this.primaryTouch=Zt.changedPointers[0].identifier,Cn.call(this,Zt)):oe&(Ot|it)&&Cn.call(this,Zt)}function Cn(oe){var Zt=oe.changedPointers[0];if(Zt.identifier===this.primaryTouch){var be={x:Zt.clientX,y:Zt.clientY};this.lastTouches.push(be);var sn=this.lastTouches,Vn=function(){var kn=sn.indexOf(be);kn>-1&&sn.splice(kn,1)};setTimeout(Vn,qe)}}function Or(oe){for(var Zt=oe.srcEvent.clientX,be=oe.srcEvent.clientY,sn=0;sn<this.lastTouches.length;sn++){var Vn=this.lastTouches[sn],er=Math.abs(Zt-Vn.x),kn=Math.abs(be-Vn.y);if(er<=zn&&kn<=zn)return!0}return!1}var Ar=N(s.style,"touchAction"),hn=Ar!==t,Pr="compute",yr="auto",Re="manipulation",We="none",Ye="pan-x",dn="pan-y",En=Nn();function Dn(oe,Zt){this.manager=oe,this.set(Zt)}Dn.prototype={set:function(Zt){Zt==Pr&&(Zt=this.compute()),hn&&this.manager.element.style&&En[Zt]&&(this.manager.element.style[Ar]=Zt),this.actions=Zt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Zt=[];return o(this.manager.recognizers,function(be){_(be.options.enable,[be])&&(Zt=Zt.concat(be.getTouchAction()))}),Sn(Zt.join(" "))},preventDefaults:function(Zt){var be=Zt.srcEvent,sn=Zt.offsetDirection;if(this.manager.session.prevented){be.preventDefault();return}var Vn=this.actions,er=P(Vn,We)&&!En[We],kn=P(Vn,dn)&&!En[dn],Xr=P(Vn,Ye)&&!En[Ye];if(er){var vi=Zt.pointers.length===1,Si=Zt.distance<2,ji=Zt.deltaTime<250;if(vi&&Si&&ji)return}if(!(Xr&&kn)&&(er||kn&&sn&st||Xr&&sn&bt))return this.preventSrc(be)},preventSrc:function(Zt){this.manager.session.prevented=!0,Zt.preventDefault()}};function Sn(oe){if(P(oe,We))return We;var Zt=P(oe,Ye),be=P(oe,dn);return Zt&&be?We:Zt||be?Zt?Ye:dn:P(oe,Re)?Re:yr}function Nn(){if(!hn)return!1;var oe={},Zt=E.CSS&&E.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(be){oe[be]=Zt?E.CSS.supports("touch-action",be):!0}),oe}var nr=1,Gn=2,Tn=4,Cr=8,pr=Cr,zr=16,Ei=32;function Oa(oe){this.options=f({},this.defaults,oe||{}),this.id=V(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=nr,this.simultaneous={},this.requireFail=[]}Oa.prototype={defaults:{},set:function(Zt){return f(this.options,Zt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Zt){if(a(Zt,"recognizeWith",this))return this;var be=this.simultaneous;return Zt=wo(Zt,this),be[Zt.id]||(be[Zt.id]=Zt,Zt.recognizeWith(this)),this},dropRecognizeWith:function(Zt){return a(Zt,"dropRecognizeWith",this)?this:(Zt=wo(Zt,this),delete this.simultaneous[Zt.id],this)},requireFailure:function(Zt){if(a(Zt,"requireFailure",this))return this;var be=this.requireFail;return Zt=wo(Zt,this),O(be,Zt)===-1&&(be.push(Zt),Zt.requireFailure(this)),this},dropRequireFailure:function(Zt){if(a(Zt,"dropRequireFailure",this))return this;Zt=wo(Zt,this);var be=O(this.requireFail,Zt);return be>-1&&this.requireFail.splice(be,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Zt){return!!this.simultaneous[Zt.id]},emit:function(Zt){var be=this,sn=this.state;function Vn(er){be.manager.emit(er,Zt)}sn<Cr&&Vn(be.options.event+wa(sn)),Vn(be.options.event),Zt.additionalEvent&&Vn(Zt.additionalEvent),sn>=Cr&&Vn(be.options.event+wa(sn))},tryEmit:function(Zt){if(this.canEmit())return this.emit(Zt);this.state=Ei},canEmit:function(){for(var Zt=0;Zt<this.requireFail.length;){if(!(this.requireFail[Zt].state&(Ei|nr)))return!1;Zt++}return!0},recognize:function(Zt){var be=f({},Zt);if(!_(this.options.enable,[this,be])){this.reset(),this.state=Ei;return}this.state&(pr|zr|Ei)&&(this.state=nr),this.state=this.process(be),this.state&(Gn|Tn|Cr|zr)&&this.tryEmit(be)},process:function(Zt){},getTouchAction:function(){},reset:function(){}};function wa(oe){return oe&zr?"cancel":oe&Cr?"end":oe&Tn?"move":oe&Gn?"start":""}function Ja(oe){return oe==et?"down":oe==mt?"up":oe==z?"left":oe==q?"right":""}function wo(oe,Zt){var be=Zt.manager;return be?be.get(oe):oe}function ha(){Oa.apply(this,arguments)}g(ha,Oa,{defaults:{pointers:1},attrTest:function(Zt){var be=this.options.pointers;return be===0||Zt.pointers.length===be},process:function(Zt){var be=this.state,sn=Zt.eventType,Vn=be&(Gn|Tn),er=this.attrTest(Zt);return Vn&&(sn&it||!er)?be|zr:Vn||er?sn&Ot?be|Cr:be&Gn?be|Tn:Gn:Ei}});function ro(){ha.apply(this,arguments),this.pX=null,this.pY=null}g(ro,ha,{defaults:{event:"pan",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var Zt=this.options.direction,be=[];return Zt&st&&be.push(dn),Zt&bt&&be.push(Ye),be},directionTest:function(Zt){var be=this.options,sn=!0,Vn=Zt.distance,er=Zt.direction,kn=Zt.deltaX,Xr=Zt.deltaY;return er&be.direction||(be.direction&st?(er=kn===0?At:kn<0?z:q,sn=kn!=this.pX,Vn=Math.abs(Zt.deltaX)):(er=Xr===0?At:Xr<0?mt:et,sn=Xr!=this.pY,Vn=Math.abs(Zt.deltaY))),Zt.direction=er,sn&&Vn>be.threshold&&er&be.direction},attrTest:function(Zt){return ha.prototype.attrTest.call(this,Zt)&&(this.state&Gn||!(this.state&Gn)&&this.directionTest(Zt))},emit:function(Zt){this.pX=Zt.deltaX,this.pY=Zt.deltaY;var be=Ja(Zt.direction);be&&(Zt.additionalEvent=this.options.event+be),this._super.emit.call(this,Zt)}});function ko(){ha.apply(this,arguments)}g(ko,ha,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(Zt){return this._super.attrTest.call(this,Zt)&&(Math.abs(Zt.scale-1)>this.options.threshold||this.state&Gn)},emit:function(Zt){if(Zt.scale!==1){var be=Zt.scale<1?"in":"out";Zt.additionalEvent=this.options.event+be}this._super.emit.call(this,Zt)}});function $a(){Oa.apply(this,arguments),this._timer=null,this._input=null}g($a,Oa,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[yr]},process:function(Zt){var be=this.options,sn=Zt.pointers.length===be.pointers,Vn=Zt.distance<be.threshold,er=Zt.deltaTime>be.time;if(this._input=Zt,!Vn||!sn||Zt.eventType&(Ot|it)&&!er)this.reset();else if(Zt.eventType&St)this.reset(),this._timer=i(function(){this.state=pr,this.tryEmit()},be.time,this);else if(Zt.eventType&Ot)return pr;return Ei},reset:function(){clearTimeout(this._timer)},emit:function(Zt){this.state===pr&&(Zt&&Zt.eventType&Ot?this.manager.emit(this.options.event+"up",Zt):(this._input.timeStamp=n(),this.manager.emit(this.options.event,this._input)))}});function Mo(){ha.apply(this,arguments)}g(Mo,ha,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(Zt){return this._super.attrTest.call(this,Zt)&&(Math.abs(Zt.rotation)>this.options.threshold||this.state&Gn)}});function ss(){ha.apply(this,arguments)}g(ss,ha,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:st|bt,pointers:1},getTouchAction:function(){return ro.prototype.getTouchAction.call(this)},attrTest:function(Zt){var be=this.options.direction,sn;return be&(st|bt)?sn=Zt.overallVelocity:be&st?sn=Zt.overallVelocityX:be&bt&&(sn=Zt.overallVelocityY),this._super.attrTest.call(this,Zt)&&be&Zt.offsetDirection&&Zt.distance>this.options.threshold&&Zt.maxPointers==this.options.pointers&&c(sn)>this.options.velocity&&Zt.eventType&Ot},emit:function(Zt){var be=Ja(Zt.offsetDirection);be&&this.manager.emit(this.options.event+be,Zt),this.manager.emit(this.options.event,Zt)}});function Pa(){Oa.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}g(Pa,Oa,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Re]},process:function(Zt){var be=this.options,sn=Zt.pointers.length===be.pointers,Vn=Zt.distance<be.threshold,er=Zt.deltaTime<be.time;if(this.reset(),Zt.eventType&St&&this.count===0)return this.failTimeout();if(Vn&&er&&sn){if(Zt.eventType!=Ot)return this.failTimeout();var kn=this.pTime?Zt.timeStamp-this.pTime<be.interval:!0,Xr=!this.pCenter||Qe(this.pCenter,Zt.center)<be.posThreshold;this.pTime=Zt.timeStamp,this.pCenter=Zt.center,!Xr||!kn?this.count=1:this.count+=1,this._input=Zt;var vi=this.count%be.taps;if(vi===0)return this.hasRequireFailures()?(this._timer=i(function(){this.state=pr,this.tryEmit()},be.interval,this),Gn):pr}return Ei},failTimeout:function(){return this._timer=i(function(){this.state=Ei},this.options.interval,this),Ei},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==pr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Bo(oe,Zt){return Zt=Zt||{},Zt.recognizers=M(Zt.recognizers,Bo.defaults.preset),new Ko(oe,Zt)}Bo.VERSION="2.0.7",Bo.defaults={domEvents:!1,touchAction:Pr,enable:!0,inputTarget:null,inputClass:null,preset:[[Mo,{enable:!1}],[ko,{enable:!1},["rotate"]],[ss,{direction:st}],[ro,{direction:st},["swipe"]],[Pa],[Pa,{event:"doubletap",taps:2},["tap"]],[$a]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ro=1,Js=2;function Ko(oe,Zt){this.options=f({},Bo.defaults,Zt||{}),this.options.inputTarget=this.options.inputTarget||oe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=oe,this.input=Pt(this),this.touchAction=new Dn(this,this.options.touchAction),nu(this,!0),o(this.options.recognizers,function(be){var sn=this.add(new be[0](be[1]));be[2]&&sn.recognizeWith(be[2]),be[3]&&sn.requireFailure(be[3])},this)}Ko.prototype={set:function(Zt){return f(this.options,Zt),Zt.touchAction&&this.touchAction.update(),Zt.inputTarget&&(this.input.destroy(),this.input.target=Zt.inputTarget,this.input.init()),this},stop:function(Zt){this.session.stopped=Zt?Js:Ro},recognize:function(Zt){var be=this.session;if(!be.stopped){this.touchAction.preventDefaults(Zt);var sn,Vn=this.recognizers,er=be.curRecognizer;(!er||er&&er.state&pr)&&(er=be.curRecognizer=null);for(var kn=0;kn<Vn.length;)sn=Vn[kn],be.stopped!==Js&&(!er||sn==er||sn.canRecognizeWith(er))?sn.recognize(Zt):sn.reset(),!er&&sn.state&(Gn|Tn|Cr)&&(er=be.curRecognizer=sn),kn++}},get:function(Zt){if(Zt instanceof Oa)return Zt;for(var be=this.recognizers,sn=0;sn<be.length;sn++)if(be[sn].options.event==Zt)return be[sn];return null},add:function(Zt){if(a(Zt,"add",this))return this;var be=this.get(Zt.options.event);return be&&this.remove(be),this.recognizers.push(Zt),Zt.manager=this,this.touchAction.update(),Zt},remove:function(Zt){if(a(Zt,"remove",this))return this;if(Zt=this.get(Zt),Zt){var be=this.recognizers,sn=O(be,Zt);sn!==-1&&(be.splice(sn,1),this.touchAction.update())}return this},on:function(Zt,be){if(Zt!==t&&be!==t){var sn=this.handlers;return o(A(Zt),function(Vn){sn[Vn]=sn[Vn]||[],sn[Vn].push(be)}),this}},off:function(Zt,be){if(Zt!==t){var sn=this.handlers;return o(A(Zt),function(Vn){be?sn[Vn]&&sn[Vn].splice(O(sn[Vn],be),1):delete sn[Vn]}),this}},emit:function(Zt,be){this.options.domEvents&&Rs(Zt,be);var sn=this.handlers[Zt]&&this.handlers[Zt].slice();if(!(!sn||!sn.length)){be.type=Zt,be.preventDefault=function(){be.srcEvent.preventDefault()};for(var Vn=0;Vn<sn.length;)sn[Vn](be),Vn++}},destroy:function(){this.element&&nu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function nu(oe,Zt){var be=oe.element;if(!!be.style){var sn;o(oe.options.cssProps,function(Vn,er){sn=N(be.style,er),Zt?(oe.oldCssProps[sn]=be.style[sn],be.style[sn]=Vn):be.style[sn]=oe.oldCssProps[sn]||""}),Zt||(oe.oldCssProps={})}}function Rs(oe,Zt){var be=T.createEvent("Event");be.initEvent(oe,!0,!0),be.gesture=Zt,Zt.target.dispatchEvent(be)}f(Bo,{INPUT_START:St,INPUT_MOVE:xt,INPUT_END:Ot,INPUT_CANCEL:it,STATE_POSSIBLE:nr,STATE_BEGAN:Gn,STATE_CHANGED:Tn,STATE_ENDED:Cr,STATE_RECOGNIZED:pr,STATE_CANCELLED:zr,STATE_FAILED:Ei,DIRECTION_NONE:At,DIRECTION_LEFT:z,DIRECTION_RIGHT:q,DIRECTION_UP:mt,DIRECTION_DOWN:et,DIRECTION_HORIZONTAL:st,DIRECTION_VERTICAL:bt,DIRECTION_ALL:Y,Manager:Ko,Input:$,TouchAction:Dn,TouchInput:ae,MouseInput:en,PointerEventInput:li,TouchMouseInput:ar,SingleTouchInput:ge,Recognizer:Oa,AttrRecognizer:ha,Tap:Pa,Pan:ro,Swipe:ss,Pinch:ko,Rotate:Mo,Press:$a,on:x,off:m,each:o,merge:b,extend:v,assign:f,inherit:g,bindFn:y,prefixed:N});var je=typeof E!="undefined"?E:typeof self!="undefined"?self:{};je.Hammer=Bo,U=function(){return Bo}.call(dt,L,dt,Se),U!==t&&(Se.exports=U)})(window,document,"Hammer")},yMAV:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Plan=void 0;var U=function(){function E(T,e){this.parentContext=T,this.rootRequest=e}return E}();dt.Plan=U},yP5f:function(Se,dt,L){var U=L("+K+b");function E(T,e){var t=e?U(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.length)}Se.exports=E},"yP6+":function(Se,dt,L){(function(E,T){Se.exports=T(L("q1tI"))})(this,function(U){return function(E){var T={};function e(t){if(T[t])return T[t].exports;var u=T[t]={i:t,l:!1,exports:{}};return E[t].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=E,e.c=T,e.i=function(t){return t},e.d=function(t,u,s){e.o(t,u)||Object.defineProperty(t,u,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var u=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(u,"a",u),u},e.o=function(t,u){return Object.prototype.hasOwnProperty.call(t,u)},e.p="",e(e.s=546)}([function(E,T,e){var t=e(166),u=e(16),s=t.mix({},t,{assign:t.mix,merge:t.deepMix,cloneDeep:t.clone,isFinite,isNaN,snapEqual:t.isNumberEqual,remove:t.pull,inArray:t.contains,toAllPadding:function(r){var c=0,n=0,i=0,a=0;return s.isNumber(r)||s.isString(r)?c=n=i=a=r:s.isArray(r)?(c=r[0],i=s.isNil(r[1])?r[0]:r[1],a=s.isNil(r[2])?r[0]:r[2],n=s.isNil(r[3])?i:r[3]):s.isObject(r)&&(c=r.top||0,i=r.right||0,a=r.bottom||0,n=r.left||0),[c,i,a,n]},getClipByRange:function(r){var c=r.tl,n=r.br,i=new u.Rect({attrs:{x:c.x,y:c.y,width:n.x-c.x,height:n.y-c.y}});return i}});s.Array={groupToMap:t.groupToMap,group:t.group,merge:t.merge,values:t.valuesOfKey,getRange:t.getRange,firstValue:t.firstValue,remove:t.pull},E.exports=s},function(E,T,e){var t=e(150),u={};t.merge(u,t,{mixin:function(h,r){var c=h.CFG?"CFG":"ATTRS";if(h&&r){h._mixins=r,h[c]=h[c]||{};var n={};u.each(r,function(i){u.augment(h,i);var a=i[c];a&&u.merge(n,a)}),h[c]=u.merge(n,h[c])}}}),E.exports=u},function(E,T,e){var t=e(39),u=e(4),s=function(r,c){if(!!r){var n=void 0;if(u(r))for(var i=0,a=r.length;i<a&&(n=c(r[i],i),n!==!1);i++);else if(t(r)){for(var o in r)if(r.hasOwnProperty(o)&&(n=c(r[o],o),n===!1))break}}};E.exports=s},function(E,T,e){var t=e(31),u=e(166),s=u.mix({assign:u.mix,isFinite,isNaN,Group:t.Group,Event:t.Event},u);E.exports=s},function(E,T,e){var t=e(17),u=Array.isArray?Array.isArray:function(s){return t(s,"Array")};E.exports=u},function(E,T,e){var t=e(0),u=e(132),s={version:"3.5.15",renderer:"canvas",trackingInfo:{},animate:!0,widthRatio:{column:1/2,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(r,c){u[r]=c},setTheme:function(r){var c={};t.isObject(r)?c=r:t.indexOf(Object.keys(u),r)!==-1?c=u[r]:c=u.default,t.deepMix(s,c)}};s.setTheme("default"),E.exports=s},function(E,T){var e=function(u){return u==null};E.exports=e},function(E,T,e){var t=e(1),u=e(331),s=e(133),h=e(76),r=function i(a){i.superclass.constructor.call(this,a)};r.ATTRS={},t.extend(r,s);var c={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function n(i){for(var a=[],o=0;o<i.length;o++)t.isArray(i[o])?a.push([].concat(i[o])):a.push(i[o]);return a}t.augment(r,u,{isShape:!0,drawInner:function(a){var o=this,l=o._attrs;o.createPath(a);var f=a.globalAlpha;if(o.hasFill()){var v=l.fillOpacity;!t.isNil(v)&&v!==1?(a.globalAlpha=v,a.fill(),a.globalAlpha=f):a.fill()}if(o.hasStroke()){var b=o._attrs.lineWidth;if(b>0){var g=l.strokeOpacity;!t.isNil(g)&&g!==1&&(a.globalAlpha=g),a.stroke()}}o.afterPath(a)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(a,o){var l=this,f=[a,o,1];if(l.invert(f),l.isHitBox()){var v=l.getBBox();if(v&&!h.box(v.minX,v.maxX,v.minY,v.maxY,f[0],f[1]))return!1}var b=l._attrs.clip;if(b){if(b.invert(f,l.get("canvas")),b.isPointInPath(f[0],f[1]))return l.isPointInPath(f[0],f[1])}else return l.isPointInPath(f[0],f[1]);return!1},calculateBox:function(){return null},getHitLineWidth:function(){var a=this._attrs,o=a.lineAppendWidth||0,l=a.lineWidth||0;return l+o},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var a=this._cfg.box;return a||(a=this.calculateBox(),a&&(a.x=a.minX,a.y=a.minY,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY),this._cfg.box=a),a},clone:function(){var a=this,o=null,l=a._attrs,f={};return t.each(l,function(v,b){c[b]&&t.isArray(l[b])?f[b]=n(l[b]):f[b]=l[b]}),o=new a.constructor({attrs:f}),o._cfg.zIndex=a._cfg.zIndex,o}}),E.exports=r},function(E,T,e){function t(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function u(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var s=e(65),h=e(227),r=e(120),c=e(0),n=e(5),i=e(294),a=e(9),o=e(300),l=e(298),f=e(299),v=e(313),b=["color","shape","size"],g="_origin";function y(M){return(c.isString(M)||c.isPlainObject(M))&&(M=[M]),c.each(M,function(x,m){c.isObject(x)||(M[m]={type:x})}),M}var _=function(M){u(m,M);var x=m.prototype;x.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}};function m(S){var P;return P=M.call(this,S)||this,P.viewTheme=P.get("viewTheme"),c.assign(t(P),o,l,f),P.get("container")&&P._initContainer(),P._initOptions(),P}return x._initOptions=function(){var P=this.get("adjusts");P&&(P=y(P),this.set("adjusts",P))},x._createScale=function(P,A){var O=this.get("scales"),R=O[P];return R||(R=this.get("view").createScale(P,A),O[P]=R),R},x._setAttrOptions=function(P,A){var O=this.get("attrOptions");O[P]=A},x._createAttrOption=function(P,A,O,R){var H={};H.field=A,O?c.isFunction(O)?H.callback=O:H.values=O:P!=="color"&&(H.values=R),this._setAttrOptions(P,H)},x.position=function(P){return this._setAttrOptions("position",{field:P}),this},x.color=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("color",P,A,O.colors),this},x.size=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("size",P,A,O.sizes),this},x.shape=function(P,A){var O=this.viewTheme||n,R=this.get("type"),H=O.shapes[R]||[];return this._createAttrOption("shape",P,A,H),this},x.opacity=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("opacity",P,A,O.opacities),this},x.style=function(P,A){var O=this.get("styleOptions");O||(O={},this.set("styleOptions",O)),c.isObject(P)&&(A=P,P=null);var R;return P&&(R=v(P)),O.fields=R,O.style=A,this},x.label=function(P,A,O){var R=this,H=R.get("labelCfg");H||(H={},R.set("labelCfg",H));var N;return P&&(N=v(P)),H.fields=N,c.isFunction(A)?(O||(O={}),H.callback=A):c.isObject(A)&&(O=A),H.globalCfg=O,this},x.tooltip=function(P,A){var O=this.get("tooltipCfg");if(O||(O={}),P===!1)this.set("tooltipCfg",!1);else{var R;P&&(R=v(P)),O.fields=R,O.cfg=A}return this.set("tooltipCfg",O),this},x.animate=function(P){return this.set("animateCfg",P),this},x.active=function(P,A){return P===!1?this.set("allowActive",!1):c.isObject(P)?(this.set("allowActive",!0),this.set("activedOptions",P)):(this.set("allowActive",!0),this.set("activedOptions",A)),this},x.adjust=function(P){return this.get("hasDefaultAdjust")||(P&&(P=y(P)),this.set("adjusts",P)),this},x.select=function(P,A){return P===!1?this.set("allowSelect",!1):c.isObject(P)?(this.set("allowSelect",!0),this.set("selectedOptions",P)):(this.set("allowSelect",!0),this.set("selectedOptions",A)),this},x.hasAdjust=function(P){var A=this,O=A.get("adjusts");if(!P)return!1;var R=!1;return c.each(O,function(H){if(H.type===P)return R=!0,!1}),R},x.hasStack=function(){var P=this.get("isStacked");return c.isNil(P)&&(P=this.hasAdjust("stack"),this.set("isStacked",P)),P},x.isInCircle=function(){var P=this.get("coord");return P&&P.isPolar},x._initContainer=function(){var P=this,A=P.get("shapeContainer");if(!A){var O=P.get("container"),R=P.get("view"),H=R&&R.get("_id");A=O.addGroup({viewId:H,visible:P.get("visible")}),P.set("shapeContainer",A)}},x.init=function(){var P=this;if(P._initContainer(),P._initAttrs(),P.get("tooltipCfg")&&P.get("tooltipCfg").fields){var A=P.get("tooltipCfg").fields;c.each(A,function(R){P._createScale(R)})}var O=P._processData();P.get("adjusts")&&P._adjust(O),P.set("dataArray",O)},x._initAttrs=function(){var P=this,A=P.get("attrs"),O=P.get("attrOptions"),R=P.get("coord"),H=P.viewTheme||n,N=!1;for(var K in O)if(O.hasOwnProperty(K)){var V=O[K],k=c.upperFirst(K),Z=v(V.field);K==="position"&&(V.coord=R,Z.length===1&&R.type==="theta"&&(Z.unshift("1"),N=!0));for(var X=[],at=0;at<Z.length;at++){var pt=Z[at],gt=P._createScale(pt);K==="color"&&c.isNil(V.values)&&(gt.values.length<=8?V.values=N?H.colors_pie:H.colors:gt.values.length<=16?V.values=N?H.colors_pie_16:H.colors_16:V.values=H.colors_24,c.isNil(V.values)&&(V.values=H.colors)),X.push(gt)}if(R.type==="theta"&&K==="position"&&X.length>1){var ft=X[1],Rt=0,Nt=Math.max.apply(null,ft.values);isFinite(Nt)||(Nt=1),ft.change({nice:!1,min:Rt,max:Nt})}V.scales=X;var Dt=new s[k](V);A[K]=Dt}},x._processData=function(){for(var P=this,A=this.get("data"),O=[],R=this._groupData(A),H=0;H<R.length;H++){var N=R[H],K=P._saveOrigin(N);O.push(P._numberic(K))}return O},x._groupData=function(P){var A=this._getGroupScales(),O=A.map(function(R){return R.field});return c.Array.group(P,O)},x._saveOrigin=function(P){for(var A=[],O=0;O<P.length;O++){var R=P[O],H={};for(var N in R)H[N]=R[N];H[g]=R,A.push(H)}return A},x._numberic=function(P){for(var A=this.getAttr("position"),O=A.scales,R=[],H=0;H<P.length;H++){for(var N=P[H],K=!0,V=0;V<Math.min(2,O.length);V++){var k=O[V];if(k.isCategory){var Z=k.field;N[Z]=k.translate(N[Z]),Number.isNaN(N[Z])&&(K=!1)}}K&&R.push(N)}return R},x._getGroupScales=function(){var P=this,A=P.get("groupScales");if(!A){A=[];var O=P.get("attrs");c.each(O,function(R){if(b.includes(R.type)){var H=R.scales;c.each(H,function(N){N.isCategory&&c.indexOf(A,N)===-1&&A.push(N)})}}),P.set("groupScales",A)}return A},x._updateStackRange=function(P,A,O){for(var R=c.Array.merge(O),H=A.min,N=A.max,K=0;K<R.length;K++){var V=R[K];if(!!c.isArray(V[P])){var k=Math.min.apply(null,V[P]),Z=Math.max.apply(null,V[P]);k<H&&(H=k),Z>N&&(N=Z)}}(H<A.min||N>A.max)&&A.change({min:H,max:N})},x._adjust=function(P){if(!(!P||!P.length)){var A=this,O=A.get("adjusts"),R=this.viewTheme||n,H=A.getYScale(),N=A.getXScale(),K=N.field,V=H?H.field:null;c.each(O,function(k){var Z=c.mix({xField:K,yField:V},k),X=c.upperFirst(k.type);if(X==="Dodge"){var at=[];if(N.isCategory||N.isIdentity)at.push("x");else if(!H)at.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Z.adjustNames=at,Z.dodgeRatio=Z.dodgeRatio||R.widthRatio.column}else if(X==="Stack"){var pt=A.get("coord");if(!H){Z.height=pt.getHeight();var gt=A.getDefaultValue("size")||3;Z.size=gt}!pt.isTransposed&&c.isNil(Z.reverseOrder)&&(Z.reverseOrder=!0)}var ft=new h[X](Z);ft.processAdjust(P),X==="Stack"&&H&&A._updateStackRange(V,H,P)})}},x.setCoord=function(P){this.set("coord",P);var A=this.getAttr("position"),O=this.get("shapeContainer");O.setMatrix(P.matrix),A&&(A.coord=P)},x.paint=function(){var P=this,A=P.get("dataArray"),O=[],R=P.getShapeFactory();R.setCoord(P.get("coord")),P.set("shapeFactory",R);var H=P.get("shapeContainer");P._beforeMapping(A);for(var N=0;N<A.length;N++){var K=A[N],V=N;K=P._mapping(K),O.push(K),P.draw(K,H,R,V)}P.get("labelCfg")&&P._addLabels(c.union.apply(null,O),H.get("children")),P.get("sortable")?P.set("dataArray",O):P._sort(O)},x._sort=function(P){var A=this,O=A.getXScale(),R=O.field;c.each(P,function(H){H.sort(function(N,K){return O.translate(N[g][R])-O.translate(K[g][R])})}),A.set("dataArray",P)},x._beforeMapping=function(P){var A=this;if(A.get("sortable")){var O=A.getXScale(),R=O.field;c.each(P,function(H){H.sort(function(N,K){return O.translate(N[R])-O.translate(K[R])})})}A.get("generatePoints")&&(c.each(P,function(H){A._generatePoints(H)}),c.each(P,function(H,N){var K=P[N+1];K&&(H[0].nextPoints=K[0].points)}))},x._addLabels=function(P,A){var O=this,R=O.get("type"),H=O.get("viewTheme")||n,N=O.get("coord"),K=i.getLabelsClass(N.type,R),V=O.get("container"),k=c.map(O.get("labelCfg").fields,function(X){return O._createScale(X)}),Z=V.addGroup(K,{_id:this.get("_id"),labelCfg:c.mix({scales:k},O.get("labelCfg")),coord:N,geom:O,geomType:R,yScale:O.getYScale(),viewTheme:H,visible:O.get("visible")});Z.showLabels(P,A),O.set("labelContainer",Z)},x.getShapeFactory=function(){var P=this.get("shapeFactory");if(!P){var A=this.get("shapeType");P=a.getShapeFactory(A),this.set("shapeFactory",P)}return P},x._generatePoints=function(P){for(var A=this,O=A.getShapeFactory(),R=A.getAttr("shape"),H=0;H<P.length;H++){var N=P[H],K=A.createShapePointsCfg(N),V=R?A._getAttrValues(R,N):null,k=O.getShapePoints(V,K);N.points=k}},x.createShapePointsCfg=function(P){var A=this.getXScale(),O=this.getYScale(),R=this._normalizeValues(P[A.field],A),H;return O?H=this._normalizeValues(P[O.field],O):H=P.y?P.y:.1,{x:R,y:H,y0:O?O.scale(this.getYMinValue()):void 0}},x.getYMinValue=function(){var P=this.getYScale(),A=P.min,O=P.max,R;return A>=0?R=A:O<=0?R=O:R=0,R},x._normalizeValues=function(P,A){var O=[];if(c.isArray(P))for(var R=0;R<P.length;R++){var H=P[R];O.push(A.scale(H))}else O=A.scale(P);return O},x._mapping=function(P){for(var A=this,O=A.get("attrs"),R=[],H=0;H<P.length;H++){var N=P[H],K={};K[g]=N[g],K.points=N.points,K.nextPoints=N.nextPoints;for(var V in O)if(O.hasOwnProperty(V)){var k=O[V],Z=k.names,X=A._getAttrValues(k,N);if(Z.length>1)for(var at=0;at<X.length;at++){var pt=X[at],gt=Z[at];K[gt]=c.isArray(pt)&&pt.length===1?pt[0]:pt}else K[Z[0]]=X.length===1?X[0]:X}R.push(K)}return R},x._getAttrValues=function(P,A){for(var O=P.scales,R=[],H=0;H<O.length;H++){var N=O[H],K=N.field;N.type==="identity"?R.push(N.value):R.push(A[K])}var V=P.mapping.apply(P,R);return V},x.getAttrValue=function(P,A){var O=this.getAttr(P),R=null;if(O){var H=this._getAttrValues(O,A);R=H[0]}return R},x.getDefaultValue=function(P){var A=this.get(P),O=this.getAttr(P);if(O){var R=O.getScale(P);R.type==="identity"&&(A=R.value)}return A},x.draw=function(P,A,O,R){for(var H=this,N=0;N<P.length;N++){var K=P[N];H.drawPoint(K,A,O,R+N)}},x.getCallbackCfg=function(P,A,O){if(!P)return A;var R={},H=P.map(function(N){return O[N]});return c.each(A,function(N,K){c.isFunction(N)?R[K]=N.apply(null,H):R[K]=N}),R},x._getShapeId=function(P){var A=this.get("_id"),O=this.get("keyFields");if(O&&O.length>0)c.each(O,function(at){A+="-"+P[at]});else{var R=this.get("type"),H=this.getXScale(),N=this.getYScale(),K=H.field||"x",V=N.field||"y",k=P[V],Z;H.isIdentity?Z=H.value:Z=P[K],R==="interval"||R==="schema"?A+="-"+Z:R==="line"||R==="area"||R==="path"?A+="-"+R:A+="-"+Z+"-"+k;var X=this._getGroupScales();c.isEmpty(X)||c.each(X,function(at){var pt=at.field;at.type!=="identity"&&(A+="-"+P[pt])})}return A},x.getDrawCfg=function(P){var A=this,O={origin:P,x:P.x,y:P.y,color:P.color,size:P.size,shape:P.shape,isInCircle:A.isInCircle(),opacity:P.opacity},R=A.get("styleOptions");return R&&R.style&&(O.style=A.getCallbackCfg(R.fields,R.style,P[g])),A.get("generatePoints")&&(O.points=P.points,O.nextPoints=P.nextPoints),A.get("animate")&&(O._id=A._getShapeId(P[g])),O},x.appendShapeInfo=function(P,A){P&&(P.setSilent("index",A),P.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&P.setSilent("animateCfg",this.get("animateCfg")))},x._applyViewThemeShapeStyle=function(P,A,O){var R=this,H=R.viewTheme||n,N=O.name;A?A&&(A.indexOf("hollow")>-1||A.indexOf("liquid")>-1)&&(N="hollow"+c.upperFirst(N)):O.defaultShapeType.indexOf("hollow")>-1&&(N="hollow"+c.upperFirst(N));var K=H.shape[N]||{};P.style=c.mix({},K,P.style)},x.drawPoint=function(P,A,O,R){var H=this,N=P.shape,K=H.getDrawCfg(P);H._applyViewThemeShapeStyle(K,N,O);var V=O.drawShape(N,K,A);H.appendShapeInfo(V,R)},x.getAttr=function(P){return this.get("attrs")[P]},x.getXScale=function(){return this.getAttr("position").scales[0]},x.getYScale=function(){return this.getAttr("position").scales[1]},x.getShapes=function(){var P=[],A=this.get("shapeContainer"),O=A.get("children");return c.each(O,function(R){R.get("origin")&&P.push(R)}),P},x.getAttrsForLegend=function(){var P=this.get("attrs"),A=[];return c.each(P,function(O){b.includes(O.type)&&A.push(O)}),A},x.getFieldsForLegend=function(){var P=[],A=this.get("attrOptions");return c.each(b,function(O){var R=A[O];R&&R.field&&c.isString(R.field)&&(P=P.concat(R.field.split("*")))}),c.uniq(P)},x.changeVisible=function(P,A){var O=this;O.set("visible",P);var R=this.get("shapeContainer");R&&R.set("visible",P);var H=this.get("labelContainer");if(H&&H.set("visible",P),!A&&R){var N=R.get("canvas");N.draw()}},x.reset=function(){this.set("attrOptions",{}),this.clearInner()},x.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var P=this.get("shapeContainer");P&&P.clear();var A=this.get("labelContainer");A&&A.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},x.clear=function(){this.clearInner(),this.set("scales",{})},x.destroy=function(){this.clear();var P=this.get("shapeContainer");P&&P.remove(),this.offEvents(),M.prototype.destroy.call(this)},x.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},x.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},m}(r);E.exports=_},function(E,T,e){var t=e(0),u=e(25),s=t.PathUtil,h={},r={_coord:null,draw:function(i,a){return this.drawShape?this.drawShape(i,a):null},setCoord:function(i){this._coord=i},parsePath:function(i,a){var o=this._coord;return i=s.parsePathString(i),o.isPolar&&a!==!1?i=u.convertPolarPath(o,i):i=u.convertNormalPath(o,i),i},parsePoint:function(i){var a=this._coord;return a.convertPoint(i)},parsePoints:function(i){var a=this._coord,o=[];return t.each(i,function(l){o.push(a.convertPoint(l))}),o}},c={defaultShapeType:null,setCoord:function(i){this._coord=i},getShape:function(i){var a=this;t.isArray(i)&&(i=i[0]);var o=a[i]||a[a.defaultShapeType];return o._coord=a._coord,o},getShapePoints:function(i,a){var o=this.getShape(i),l=o.getPoints||o.getShapePoints||this.getDefaultPoints,f=l(a);return f},getDefaultPoints:function(){return[]},getMarkerCfg:function(i,a){var o=this.getShape(i);if(!o.getMarkerCfg){var l=this.defaultShapeType;o=this.getShape(l)}return o.getMarkerCfg(a)},getSelectedCfg:function(){return{}},drawShape:function(i,a,o){var l=this.getShape(i),f=l.draw(a,o);return f&&(f.setSilent("origin",a.origin),f._id=a.yIndex?a._id+a.yIndex:a._id,f.name=this.name),f}};h.registerFactory=function(n,i){var a=t.upperFirst(n),o=t.assign({},c,i);return h[a]=o,o.name=n,o},h.registerShape=function(n,i,a){var o=t.upperFirst(n),l=h[o],f=t.assign({},r,a);return l[i]=f,f},h.getShapeFactory=function(n){var i=this;n=n||"point";var a=t.upperFirst(n);return i[a]},E.exports=h},function(E,T){function e(u,s){for(var h in s)s.hasOwnProperty(h)&&h!=="constructor"&&s[h]!==void 0&&(u[h]=s[h])}var t=function(s,h,r,c){return h&&e(s,h),r&&e(s,r),c&&e(s,c),s};E.exports=t},function(E,T,e){var t=e(17),u=function(h){return t(h,"Number")};E.exports=u},function(E,T,e){"use strict";var t=e(89);e.d(T,"f",function(){return t.h}),e.d(T,"e",function(){return t.g}),e.d(T,"d",function(){return t.f});var u=e(440);e.d(T,"c",function(){return u.b}),e.d(T,"b",function(){return u.a});var s=e(439);e.d(T,"a",function(){return s.a})},function(E,T,e){"use strict";e.d(T,"d",function(){return c}),e.d(T,"a",function(){return n}),e.d(T,"b",function(){return o}),e.d(T,"c",function(){return l}),T.g=f,T.e=v,T.f=b;var t=e(442),u=e(103),s=e.i(t.a)("start","end","cancel","interrupt"),h=[],r=0,c=1,n=2,i=3,a=4,o=5,l=6;T.h=function(y,_,M,x,m,S){var P=y.__transition;if(!P)y.__transition={};else if(M in P)return;g(y,M,{name:_,index:x,group:m,on:s,tween:h,time:S.time,delay:S.delay,duration:S.duration,ease:S.ease,timer:null,state:r})};function f(y,_){var M=b(y,_);if(M.state>r)throw new Error("too late; already scheduled");return M}function v(y,_){var M=b(y,_);if(M.state>i)throw new Error("too late; already running");return M}function b(y,_){var M=y.__transition;if(!M||!(M=M[_]))throw new Error("transition not found");return M}function g(y,_,M){var x=y.__transition,m;x[_]=M,M.timer=e.i(u.timer)(S,0,M.time);function S(R){M.state=c,M.timer.restart(P,M.delay,M.time),M.delay<=R&&P(R-M.delay)}function P(R){var H,N,K,V;if(M.state!==c)return O();for(H in x)if(V=x[H],V.name===M.name){if(V.state===i)return e.i(u.timeout)(P);V.state===a?(V.state=l,V.timer.stop(),V.on.call("interrupt",y,y.__data__,V.index,V.group),delete x[H]):+H<_&&(V.state=l,V.timer.stop(),V.on.call("cancel",y,y.__data__,V.index,V.group),delete x[H])}if(e.i(u.timeout)(function(){M.state===i&&(M.state=a,M.timer.restart(A,M.delay,M.time),A(R))}),M.state=n,M.on.call("start",y,y.__data__,M.index,M.group),M.state===n){for(M.state=i,m=new Array(K=M.tween.length),H=0,N=-1;H<K;++H)(V=M.tween[H].value.call(y,y.__data__,M.index,M.group))&&(m[++N]=V);m.length=N+1}}function A(R){for(var H=R<M.duration?M.ease.call(null,R/M.duration):(M.timer.restart(O),M.state=o,1),N=-1,K=m.length;++N<K;)m[N].call(y,H);M.state===o&&(M.on.call("end",y,y.__data__,M.index,M.group),O())}function O(){M.state=l,M.timer.stop(),delete x[_];for(var R in x)return;delete y.__transition}}},function(E,T,e){var t=e(17),u=function(h){return t(h,"Function")};E.exports=u},function(E,T,e){var t=e(17),u=function(h){return t(h,"String")};E.exports=u},function(E,T,e){var t=e(31);E.exports=t},function(E,T){var e={}.toString,t=function(s,h){return e.call(s)==="[object "+h+"]"};E.exports=t},function(E,T,e){"use strict";e.d(T,"c",function(){return X}),T.b=at;var t=e(505),u=e(506),s=e(493),h=e(487),r=e(216),c=e(492),n=e(496),i=e(498),a=e(501),o=e(508),l=e(484),f=e(500),v=e(499),b=e(507),g=e(491),y=e(490),_=e(483),M=e(218),x=e(502),m=e(485),S=e(509),P=e(494),A=e(503),O=e(497),R=e(482),H=e(495),N=e(504),K=e(486),V=e(488),k=e(99),Z=e(489),X=[null];function at(gt,ft){this._groups=gt,this._parents=ft}function pt(){return new at([[document.documentElement]],X)}at.prototype=pt.prototype={constructor:at,select:t.a,selectAll:u.a,filter:s.a,data:h.a,enter:r.a,exit:c.a,join:n.a,merge:i.a,order:a.a,sort:o.a,call:l.a,nodes:f.a,node:v.a,size:b.a,empty:g.a,each:y.a,attr:_.a,style:M.b,property:x.a,classed:m.a,text:S.a,html:P.a,raise:A.a,lower:O.a,append:R.a,insert:H.a,remove:N.a,clone:K.a,datum:V.a,on:k.c,dispatch:Z.a},T.a=pt},function(E,T){E.exports={FONT_FAMILY:'"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"'}},function(E,T,e){function t(f){return function(){var v=r(f),b;if(h()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(109),a=e(36),o=["min","max","median","start","end"],l=function(f){c(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return n.mix({},_,{xScales:null,yScales:null,el:null})},g.render=function(){},g.clear=function(){var _=this,M=_.get("el");M&&M.remove(),this.set("el",null)},g.destroy=function(){this.clear(),f.prototype.destroy.call(this)},g.changeVisible=function(_){var M=this;M.set("visible",_);var x=M.get("el");!x||(x.set?x.set("visible",_):x.style.display=_?"":"none")},g.parsePoint=function(_,M){var x=this,m=x.get("xScales"),S=x.get("yScales");n.isFunction(M)&&(M=M(m,S));var P,A;if(n.isArray(M)&&n.isString(M[0])&&M[0].indexOf("%")!==-1)return this._parsePercentPoint(_,M);if(n.isArray(M))P=x._getNormalizedValue(M[0],i.getFirstScale(m)),A=x._getNormalizedValue(M[1],i.getFirstScale(S));else for(var O in M){var R=M[O];m[O]&&(P=x._getNormalizedValue(R,m[O])),S[O]&&(A=x._getNormalizedValue(R,S[O],"y"))}return!n.isNil(P)&&!n.isNil(A)&&!isNaN(P)&&!isNaN(A)?_.convert({x:P,y:A}):null},g._getNormalizedValue=function(_,M){var x;if(n.indexOf(o,_)!==-1){var m;_==="start"?x=0:_==="end"?x=1:_==="median"?(m=M.isCategory?(M.values.length-1)/2:(M.min+M.max)/2,x=M.scale(m)):(M.isCategory?m=_==="min"?0:M.values.length-1:m=M[_],x=M.scale(m))}else x=M.scale(_);return x},g._parsePercentPoint=function(_,M){var x=parseFloat(M[0])/100,m=parseFloat(M[1])/100,S=_.start,P=_.end,A={x:Math.min(S.x,P.x),y:Math.min(S.y,P.y)},O=_.width*x+A.x,R=_.height*m+A.y;return{x:O,y:R}},b}(a);E.exports=l},function(E,T){var e=function(u){return u!==null&&typeof u!="function"&&isFinite(u.length)};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(478);e.d(T,"create",function(){return t.a});var u=e(61);e.d(T,"creator",function(){return u.a});var s=e(479);e.d(T,"local",function(){return s.a});var h=e(214);e.d(T,"matcher",function(){return h.a});var r=e(480);e.d(T,"mouse",function(){return r.a});var c=e(97);e.d(T,"namespace",function(){return c.a});var n=e(98);e.d(T,"namespaces",function(){return n.a});var i=e(62);e.d(T,"clientPoint",function(){return i.a});var a=e(215);e.d(T,"select",function(){return a.a});var o=e(481);e.d(T,"selectAll",function(){return o.a});var l=e(18);e.d(T,"selection",function(){return l.a});var f=e(100);e.d(T,"selector",function(){return f.a});var v=e(219);e.d(T,"selectorAll",function(){return v.a});var b=e(218);e.d(T,"style",function(){return b.a});var g=e(510);e.d(T,"touch",function(){return g.a});var y=e(511);e.d(T,"touches",function(){return y.a});var _=e(102);e.d(T,"window",function(){return _.a});var M=e(99);e.d(T,"event",function(){return M.a}),e.d(T,"customEvent",function(){return M.b})},function(E,T,e){var t=e(0),u={splitPoints:function(h){var r=[],c=h.x,n=h.y;return n=t.isArray(n)?n:[n],t.each(n,function(i,a){var o={x:t.isArray(c)?c[a]:c,y:i};r.push(o)}),r},addFillAttrs:function(h,r){r.color&&(h.fill=r.color),t.isNumber(r.opacity)&&(h.opacity=h.fillOpacity=r.opacity)},addStrokeAttrs:function(h,r){r.color&&(h.stroke=r.color),t.isNumber(r.opacity)&&(h.opacity=h.strokeOpacity=r.opacity)}};E.exports=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function f(v,b){for(var g=0;g<b.length;g++){var y=b[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,g){return b&&f(v.prototype,b),g&&f(v,g),v}}(),u=e(42),s=c(u),h=e(29),r=c(h);function c(f){return f&&f.__esModule?f:{default:f}}function n(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function i(f,v){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:f}function a(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(f,v):f.__proto__=v)}var o=function(f){a(v,f);function v(b,g){n(this,v);var y=i(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return y.getParentInfo=function(){return{id:y.id,name:y.name}},y.name=g,y}return t(v,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}},{key:"componentWillMount",value:function(){var g=this.context;this.id=g.createId(),g.addElement(this.name,this.id,this.props,g.getParentInfo(),g.getViewId())}},{key:"componentWillReceiveProps",value:function(g){this.context.updateElement(this.name,this.id,g,this.context.getParentInfo(),this.context.getViewId())}},{key:"componentWillUnmount",value:function(){this.context.deleteElement(this.name,this.id)}},{key:"render",value:function(){var g=this.props.children;return g?g.length&&(g=s.default.createElement("div",null,g)):g=null,g}}]),v}(u.Component);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func};function l(f){var v=function(b){a(g,b);function g(y){return n(this,g),i(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,y,f))}return t(g,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}}]),g}(o);return v.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.displayName=f,v}o.generateBaseTypedComponent=l,T.default=o},function(E,T,e){var t=e(0),u=e(314);function s(a,o){if(!a.length)return[];for(var l=[],f=0,v=a.length;f<v;f++){var b=a[f];f===0?l.push(["M",b.x,b.y]):l.push(["L",b.x,b.y])}return o&&l.push(["Z"]),l}function h(a,o){var l=a.getCenter(),f=Math.sqrt(Math.pow(o.x-l.x,2)+Math.pow(o.y-l.y,2));return f}function r(a,o){for(var l=a.length,f=[a[0]],v=1;v<l;v=v+2){var b=o.convertPoint({x:a[v],y:a[v+1]});f.push(b.x,b.y)}return f}function c(a,o,l){var f=l.isTransposed,v=l.startAngle,b=l.endAngle,g={x:a[1],y:a[2]},y={x:o[1],y:o[2]},_=[],M=f?"y":"x",x=Math.abs(y[M]-g[M])*(b-v),m=y[M]>=g[M]?1:0,S=x>Math.PI?1:0,P=l.convertPoint(y),A=h(l,P);if(A>=.5)if(x===Math.PI*2){var O={x:(y.x+g.x)/2,y:(y.y+g.y)/2},R=l.convertPoint(O);_.push(["A",A,A,0,S,m,R.x,R.y]),_.push(["A",A,A,0,S,m,P.x,P.y])}else _.push(["A",A,A,0,S,m,P.x,P.y]);return _}function n(a){t.each(a,function(o,l){var f=o;if(f[0].toLowerCase()==="a"){var v=a[l-1],b=a[l+1];b&&b[0].toLowerCase()==="a"?v&&v[0].toLowerCase()==="l"&&(v[0]="M"):v&&v[0].toLowerCase()==="a"&&b&&b[0].toLowerCase()==="l"&&(b[0]="M")}})}var i={getLinePath:function(o,l){return s(o,l)},getSplinePath:function(o,l,f){var v=[],b=o[0],g=null;if(o.length<=2)return i.getLinePath(o,l);t.each(o,function(_){(!g||!(g.x===_.x&&g.y===_.y))&&(v.push(_.x),v.push(_.y),g=_)}),f=f||[[0,0],[1,1]];var y=u.catmullRom2bezier(v,l,f);return y.unshift(["M",b.x,b.y]),y},getPointRadius:function(o,l){var f=h(o,l);return f},getPointAngle:function(o,l){var f=o.getCenter(),v=Math.atan2(l.y-f.y,l.x-f.x);return v},convertNormalPath:function(o,l){var f=[];return t.each(l,function(v){var b=v[0];switch(b.toLowerCase()){case"m":case"l":case"c":f.push(r(v,o));break;case"z":default:f.push(v);break}}),f},convertPolarPath:function(o,l){var f=[],v,b,g,y;return t.each(l,function(_,M){var x=_[0];switch(x.toLowerCase()){case"m":case"c":case"q":f.push(r(_,o));break;case"l":v=l[M-1],b=_,g=o.isTransposed,y=g?v[v.length-2]===b[1]:v[v.length-1]===b[2],y?f=f.concat(c(v,b,o)):f.push(r(_,o));break;case"z":default:f.push(_);break}}),n(f),f}};E.exports=i},function(E,T,e){var t=e(10),u=e(2),s=e(39),h=e(6),r=function(){var c=n.prototype;c._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]};function n(i){this._initDefaultCfg(),t(this,i),this.init()}return c.init=function(){},c.getTicks=function(){var a=this,o=a.ticks,l=[];return u(o,function(f){var v;s(f)?v=f:v={text:a.getText(f),tickValue:f,value:a.scale(f)},l.push(v)}),l},c.getText=function(a,o){var l=this.formatter;return a=l?l(a,o):a,(h(a)||!a.toString)&&(a=""),a.toString()},c.rangeMin=function(){return this.range[0]},c.rangeMax=function(){var a=this.range;return a[a.length-1]},c.invert=function(a){return a},c.translate=function(a){return a},c.scale=function(a){return a},c.clone=function(){var a=this,o=a.constructor,l={};return u(a,function(f,v){l[v]=a[v]}),new o(l)},c.change=function(a){return this.ticks=null,t(this,a),this.init(),this},n}();E.exports=r},function(E,T,e){"use strict";T.b=P,T.a=A,T.c=O;var t=e(22),u=e(519),s=e(520),h=e(521),r=e(522),c=e(523),n=e(525),i=e(526),a=e(527),o=e(528),l=e(529),f=e(530),v=e(531),b=e(532),g=e(533),y=e(534),_=e(535),M=e(536),x=e(63),m=e(524),S=0;function P(H,N,K,V){this._groups=H,this._parents=N,this._name=K,this._id=V}function A(H){return e.i(t.selection)().transition(H)}function O(){return++S}var R=t.selection.prototype;P.prototype=A.prototype={constructor:P,select:l.a,selectAll:f.a,filter:n.a,merge:i.a,selection:v.a,transition:M.a,call:R.call,nodes:R.nodes,node:R.node,size:R.size,empty:R.empty,each:R.each,on:a.a,attr:u.a,attrTween:s.a,style:b.a,styleTween:g.a,text:y.a,textTween:_.a,remove:o.a,tween:x.a,delay:h.a,duration:r.a,ease:c.a,end:m.a}},function(E,T,e){var t=e(0),u=t.DomUtil,s=["start","process","end","reset"],h=function(){var r=c.prototype;r.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},r._start=function(i){var a=this;a.preStart&&a.preStart(i),a.start(i),a.onStart&&a.onStart(i)},r._process=function(i){var a=this;a.preProcess&&a.preProcess(i),a.process(i),a.onProcess&&a.onProcess(i)},r._end=function(i){var a=this;a.preEnd&&a.preEnd(i),a.end(i),a.onEnd&&a.onEnd(i)},r._reset=function(i){var a=this;a.preReset&&a.preReset(i),a.reset(i),a.onReset&&a.onReset(i)},r.start=function(){},r.process=function(){},r.end=function(){},r.reset=function(){};function c(n,i){var a=this,o=a.getDefaultCfg();t.assign(a,o,n),a.view=a.chart=i,a.canvas=i.get("canvas"),a._bindEvents()}return r._bindEvents=function(){var i=this,a=i.canvas,o=a.get("canvasDOM");i._clearEvents(),t.each(s,function(l){var f=t.upperFirst(l);i["_on"+f+"Listener"]=u.addEventListener(o,i[l+"Event"],t.wrapBehavior(i,"_"+l))})},r._clearEvents=function(){var i=this;t.each(s,function(a){var o="_on"+t.upperFirst(a)+"Listener";i[o]&&i[o].remove()})},r.destroy=function(){this._clearEvents()},c}();E.exports=h},function(E,T,e){var t=e(224),u=!0;E.exports=e(541)(t.isElement,u)},function(E,T,e){E.exports={Axis:e(240),Component:e(66),Guide:e(248),Label:e(252),Legend:e(258),Tooltip:e(263)}},function(E,T,e){E.exports={Canvas:e(328),Group:e(134),Shape:e(7),Arc:e(136),Circle:e(137),Dom:e(138),Ellipse:e(139),Fan:e(140),Image:e(141),Line:e(142),Marker:e(74),Path:e(145),Polygon:e(146),Polyline:e(147),Rect:e(148),Text:e(149),PathSegment:e(50),PathUtil:e(77),Event:e(135),version:"3.3.6"}},function(E,T,e){"use strict";T.b=h,T.c=r,T.a=c;var t=e(209);function u(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function h(n,i){var a=i-n;return a?u(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?c:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function c(n,i){var a=i-n;return a?u(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T,e){var t=e(10),u=function(){var s=h.prototype;s._initDefaultCfg=function(){this.adjustNames=["x","y"]};function h(r){this._initDefaultCfg(),t(this,r)}return s.processAdjust=function(){},h}();E.exports=u},function(E,T,e){var t=e(15),u=e(4),s=e(6),h=e(10),r=e(2);function c(i,a){return t(a)?a:i.invert(i.scale(a))}var n=function(){function i(o){var l=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var f=null,v=this.callback;if(o.callback){var b=o.callback;f=function(){for(var y=arguments.length,_=new Array(y),M=0;M<y;M++)_[M]=arguments[M];var x=b.apply(void 0,_);return s(x)&&(x=v.apply(l,_)),x}}h(this,o),f&&h(this,{callback:f})}var a=i.prototype;return a._getAttrValue=function(l,f){var v=this.values;if(l.isCategory&&!this.linear){var b=l.translate(f);return v[b%v.length]}var g=l.scale(f);return this.getLinearValue(g)},a.getLinearValue=function(l){var f=this.values,v=f.length-1,b=Math.floor(v*l),g=v*l-b,y=f[b],_=b===v?y:f[b+1],M=y+(_-y)*g;return M},a.callback=function(l){var f=this,v=f.scales[0],b=null;return v.type==="identity"?b=v.value:b=f._getAttrValue(v,l),b},a.getNames=function(){for(var l=this.scales,f=this.names,v=Math.min(l.length,f.length),b=[],g=0;g<v;g++)b.push(f[g]);return b},a.getFields=function(){var l=this.scales,f=[];return r(l,function(v){f.push(v.field)}),f},a.getScale=function(l){var f=this.scales,v=this.names,b=v.indexOf(l);return f[b]},a.mapping=function(){for(var l=this.scales,f=this.callback,v=arguments.length,b=new Array(v),g=0;g<v;g++)b[g]=arguments[g];var y=b;if(f){for(var _=0,M=b.length;_<M;_++)b[_]=this._toOriginParam(b[_],l[_]);y=f.apply(this,b)}return y=[].concat(y),y},a._toOriginParam=function(l,f){var v=l;if(!f.isLinear)if(u(l)){v=[];for(var b=0,g=l.length;b<g;b++)v.push(c(f,l[b]))}else v=c(f,l);return v},i}();E.exports=n},function(E,T,e){function t(b){return function(){var g=r(b),y;if(h()){var _=r(this).constructor;y=Reflect.construct(g,arguments,_)}else y=g.apply(this,arguments);return u(this,y)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(b)}function c(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(36),i=e(3),a=e(108),o=e(110),l=e(19),f=l.FONT_FAMILY,v=function(b){c(y,b);var g=t(y);function y(){return b.apply(this,arguments)||this}var _=y.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return i.mix({},x,{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{offset:0,offsetX:0,offsetY:0,textStyle:{},autoRotate:!0,autoHide:!1,formatter:null},labelItems:[],title:{autoRotate:!0,textStyle:{}},autoPaint:!0})},_.beforeRender=function(){var x=this,m=x.get("title"),S=x.get("label"),P=x.get("grid");m&&x.set("title",i.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f,textAlign:"center"},offset:48},m)),S&&x.set("label",i.deepMix({autoRotate:!0,autoHide:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f},offset:10},S)),P&&x.set("grid",i.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},P))},_.render=function(){var x=this;x.beforeRender();var m=x.get("label");m&&x.renderLabels(),x.get("autoPaint")&&x.paint(),i.isNil(x.get("title"))||x.renderTitle(),x.get("group").sort()},_.renderLabels=function(){var x=this,m=x.get("group"),S=x.get("label"),P=new o({name:"axis-label"});x.set("labelRenderer",P),P.set("labelCfg",S);var A=["formatter","htmlTemplate","labelLine","textStyle","useHtml"];i.each(A,function(O){S[O]&&P.set(O,S[O])}),P.set("coord",x.get("coord")),P.set("group",m.addGroup()),P.set("canvas",x.get("canvas"))},_._parseTicks=function(x){x=x||[];for(var m=x.length,S=0;S<m;S++){var P=x[S];i.isObject(P)||(x[S]=this.parseTick(P,S,m))}return this.set("ticks",x),x},_._addTickItem=function(x,m,S,P){P===void 0&&(P="");var A=this.get("tickItems"),O=this.get("subTickItems"),R=this.getTickEnd(m,S,x),H={x1:m.x,y1:m.y,x2:R.x,y2:R.y};A||(A=[]),O||(O=[]),P==="sub"?O.push(H):A.push(H),this.set("tickItems",A),this.set("subTickItems",O)},_._renderLine=function(){var x=this,m=x.get("line"),S;if(m){S=x.getLinePath(),m=i.mix({path:S},m);var P=x.get("group"),A=P.addShape("path",{attrs:m});A.name="axis-line",x.get("appendInfo")&&A.setSilent("appendInfo",x.get("appendInfo")),x.set("lineShape",A)}},_._processCatTicks=function(){var x=this,m=x.get("label"),S=x.get("tickLine"),P=x.get("ticks");P=x._parseTicks(P);for(var A=x._getNormalizedTicks(P),O=0;O<A.length;O+=3){var R=x.getTickPoint(A[O]),H=x.getTickPoint(A[O+1]),N=x.getTickPoint(A[O+2]),K=Math.floor(O/3),V=P[K];S&&(K===0&&x._addTickItem(K,H,S.length),x._addTickItem(K,N,S.length)),m&&x.addLabel(V,R,K)}},_._getNormalizedTicks=function(x){var m=0;x.length>1&&(m=(x[1].value-x[0].value)/2);for(var S=[],P=0;P<x.length;P++){var A=x[P],O=A.value,R=A.value-m,H=A.value+m;S.push(O,R,H)}var N=i.arrayUtil.getRange(S);return S.map(function(K){var V=(K-N.min)/(N.max-N.min);return V})},_.addLabel=function(x,m,S){var P=this,A=P.get("labelItems"),O=P.get("labelRenderer"),R=i.deepMix({},P.get("label")),H;if(O){var N=P.get("_labelOffset");i.isNil(P.get("label").offset)||(N=P.get("label").offset);var K=P.getSideVector(N,m,S);m={x:m.x+K[0]+R.offsetX,y:m.y+K[1]+R.offsetY},R.text=x.text,R.x=m.x,R.y=m.y,R.point=m,R.textAlign=P.getTextAnchor(K),m.rotate&&(R.rotate=m.rotate),A.push(R)}return H},_._processTicks=function(){var x=this,m=x.get("label"),S=x.get("subTickCount"),P=x.get("tickLine"),A=x.get("ticks");if(A=x._parseTicks(A),i.each(A,function(R,H){var N=x.getTickPoint(R.value,H);P&&x._addTickItem(H,N,P.length),m&&x.addLabel(R,N,H)}),S){var O=x.get("subTickLine");i.each(A,function(R,H){if(H>0){var N=R.value-A[H-1].value;N=N/(x.get("subTickCount")+1);for(var K=1;K<=S;K++){var V={text:"",value:H?A[H-1].value+K*N:K*N},k=x.getTickPoint(V.value),Z=void 0;O&&O.length?Z=O.length:Z=parseInt(P.length*(3/5),10),x._addTickItem(K-1,k,Z,"sub")}}})}},_._addTickLine=function(x,m){var S=this,P=i.mix({},m),A=[];i.each(x,function(H){A.push(["M",H.x1,H.y1]),A.push(["L",H.x2,H.y2])}),delete P.length,P.path=A;var O=S.get("group"),R=O.addShape("path",{attrs:P});R.name="axis-ticks",R._id=S.get("_id")+"-ticks",R.set("coord",S.get("coord")),S.get("appendInfo")&&R.setSilent("appendInfo",S.get("appendInfo"))},_._renderTicks=function(){var x=this,m=x.get("tickItems"),S=x.get("subTickItems");if(!i.isEmpty(m)){var P=x.get("tickLine");x._addTickLine(m,P)}if(!i.isEmpty(S)){var A=x.get("subTickLine")||x.get("tickLine");x._addTickLine(S,A)}},_._renderGrid=function(){var x=this.get("grid");if(!!x){x.coord=this.get("coord"),x.appendInfo=this.get("appendInfo");var m=this.get("group");this.set("gridGroup",m.addGroup(a,x))}},_._renderLabels=function(){var x=this,m=x.get("labelRenderer"),S=x.get("labelItems");m&&(m.set("items",S),m._dryDraw())},_.paint=function(){var x=this,m=x.get("tickLine"),S=!0;m&&m.hasOwnProperty("alignWithLabel")&&(S=m.alignWithLabel),x._renderLine();var P=x.get("type"),A=P==="cat"||P==="timeCat";A&&S===!1?x._processCatTicks():x._processTicks(),x._renderTicks(),x._renderGrid(),x._renderLabels();var O=this.get("label");O&&O.autoRotate&&x.autoRotateLabels(),O&&O.autoHide&&x.autoHideLabels()},_.parseTick=function(x,m,S){return{text:x,value:m/(S-1)}},_.getTextAnchor=function(x){var m=Math.abs(x[1]/x[0]),S;return m>=1?S="center":x[0]>0?S="start":S="end",S},_.getMaxLabelWidth=function(x){var m=x.getLabels(),S=0;return i.each(m,function(P){var A=P.getBBox(),O=A.width;S<O&&(S=O)}),S},_.getMaxLabelHeight=function(x){var m=x.getLabels(),S=0;return i.each(m,function(P){var A=P.getBBox(),O=A.height;S<O&&(S=O)}),S},_.destroy=function(){var x=this;if(!x.destroyed){var m=x.get("gridGroup");m&&m.remove();var S=this.get("labelRenderer");S&&S.destroy();var P=x.get("group");P.destroy(),b.prototype.destroy.call(this)}},_.clear=function(){var x=this,m=x.get("group");if(!m.get("destroyed")&&m.get("children").length){var S=x.get("gridGroup");S&&S.clear();var P=this.get("labelRenderer");P&&P.clear();var A=x.get("group");A.clear()}},_.autoRotateLabels=function(){},_.autoHideLabels=function(){},_.renderTitle=function(){},_.getLinePath=function(){},_.getTickPoint=function(){},_.getTickEnd=function(){},_.getSideVector=function(){},y}(n);E.exports=v},function(E,T,e){function t(a){return function(){var o=r(a),l;if(h()){var f=r(this).constructor;l=Reflect.construct(o,arguments,f)}else l=o.apply(this,arguments);return u(this,l)}}function u(a,o){return o&&(typeof o=="object"||typeof o=="function")?o:s(a)}function s(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function r(a){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},r(a)}function c(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o}var n=e(66),i=function(a){c(l,a);var o=t(l);function l(){return a.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){return{_id:null,canvas:null,container:null,group:null,capture:!1,coord:null,offset:[0,0],plotRange:null,position:[0,0],visible:!0,zIndex:1}},f._init=function(){},f.clear=function(){},f.destroy=function(){a.prototype.destroy.call(this)},f.beforeRender=function(){},f.render=function(){},f.afterRender=function(){},f.beforeDraw=function(){},f.draw=function(){},f.afterDraw=function(){},f.show=function(){},f.hide=function(){},f.setOffset=function(){},f.setPosition=function(){},f.setVisible=function(){},f.setZIndex=function(){},l}(n);E.exports=i},function(E,T,e){var t=e(1),u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,h={};E.exports={parseRadius:function(c){var n=0,i=0,a=0,o=0;return t.isArray(c)?c.length===1?n=i=a=o=c[0]:c.length===2?(n=a=c[0],i=o=c[1]):c.length===3?(n=c[0],i=o=c[1],a=c[2]):(n=c[0],i=c[1],a=c[2],o=c[3]):n=i=a=o=c,{r1:n,r2:i,r3:a,r4:o}},parsePath:function(c){if(c=c||[],t.isArray(c))return c;if(t.isString(c))return c=c.match(u),t.each(c,function(n,i){if(n=n.match(s),n[0].length>1){var a=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=a}t.each(n,function(o,l){isNaN(o)||(n[l]=+o)}),c[i]=n}),c},numberToColor:function(c){var n=h[c];if(!n){for(var i=c.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,h[c]=n}return n}}},function(E,T,e){var t=e(6);function u(s){return t(s)?"":s.toString()}E.exports=u},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=function(s){var h=typeof s=="undefined"?"undefined":e(s);return s!==null&&h==="object"||h==="function"};E.exports=t},function(E,T,e){var t=e(86),u=e(17),s=function(r){if(!t(r)||!u(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var c=r;Object.getPrototypeOf(c)!==null;)c=Object.getPrototypeOf(c);return Object.getPrototypeOf(r)===c};E.exports=s},function(E,T,e){"use strict";T.b=h,T.c=r,T.a=c;var t=e(202);function u(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function h(n,i){var a=i-n;return a?u(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?c:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function c(n,i){var a=i-n;return a?u(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T){E.exports=U},function(E,T,e){"use strict";function t(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function u(a,o){for(var l=0;l<o.length;l++){var f=o[l];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function s(a,o,l){return o&&u(a.prototype,o),l&&u(a,l),a}var h=e(56),r=e(10),c=h.mat3,n=h.vec3,i=function(){s(a,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]);function a(o){t(this,a);var l=this.getDefaultCfg();r(this,l,o),this.init()}return s(a,[{key:"init",value:function(){var l=this.start,f=this.end,v={x:(l.x+f.x)/2,y:(l.y+f.y)/2};this.center=v,this.width=Math.abs(f.x-l.x),this.height=Math.abs(f.y-l.y)}},{key:"_swapDim",value:function(l){var f=this[l];if(f){var v=f.start;f.start=f.end,f.end=v}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(l,f){var v=this[f],b=v.start,g=v.end;return b+l*(g-b)}},{key:"invertDim",value:function(l,f){var v=this[f],b=v.start,g=v.end;return(l-b)/(g-b)}},{key:"convertPoint",value:function(l){return l}},{key:"invertPoint",value:function(l){return l}},{key:"applyMatrix",value:function(l,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,g=[l,f,v];return n.transformMat3(g,g,b),g}},{key:"invertMatrix",value:function(l,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,g=c.invert([],b),y=[l,f,v];return n.transformMat3(y,y,g),y}},{key:"convert",value:function(l){var f=this.convertPoint(l),v=f.x,b=f.y,g=this.applyMatrix(v,b,1);return{x:g[0],y:g[1]}}},{key:"invert",value:function(l){var f=this.invertMatrix(l.x,l.y,1);return this.invertPoint({x:f[0],y:f[1]})}},{key:"rotate",value:function(l){var f=this.matrix,v=this.center;return c.translate(f,f,[-v.x,-v.y]),c.rotate(f,f,l),c.translate(f,f,[v.x,v.y]),this}},{key:"reflect",value:function(l){switch(l){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(l,f){var v=this.matrix,b=this.center;return c.translate(v,v,[-b.x,-b.y]),c.scale(v,v,[l,f]),c.translate(v,v,[b.x,b.y]),this}},{key:"translate",value:function(l,f){var v=this.matrix;return c.translate(v,v,[l,f]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),a}();E.exports=i},function(E,T,e){function t(_,M){_.prototype=Object.create(M.prototype),_.prototype.constructor=_,_.__proto__=M}var u=e(0),s=e(279),h=e(16),r=h.Canvas,c=u.DomUtil,n=e(5),i=e(283),a=e(121),o=e(123),l=e(122),f=e(124),v="auto";function b(_,M){var x=!1;return u.each(_,function(m){var S=[].concat(m.values),P=[].concat(M.values);if(m.type===M.type&&m.field===M.field&&S.sort().toString()===P.sort().toString()){x=!0;return}}),x}function g(_,M){return u.isEqualWith(_,M,function(x,m){return x===m})}var y=function(_){t(M,_);function M(){return _.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=_.prototype.getDefaultCfg.call(this);return u.mix(S,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:n.plotCfg.padding,background:null,autoPaddingAppend:5,limitInPlot:!1,renderer:n.renderer,views:[]})},x.init=function(){var S=this,P=S.get("viewTheme");S._initCanvas(),S._initPlot(),S._initEvents(),_.prototype.init.call(this);var A=new a.Tooltip({chart:S,viewTheme:P,options:{}});S.set("tooltipController",A);var O=new a.Legend({chart:S,viewTheme:P});S.set("legendController",O),S.set("_id","chart"),S.emit("afterinit")},x._isAutoPadding=function(){var S=this.get("padding");return u.isArray(S)?S.includes(v):S===v},x._getAutoPadding=function(){for(var S=this.get("padding"),P=this.get("frontPlot"),A=P.getBBox(),O=this.get("backPlot"),R=l(O,f(this.get("plotRange"))),H=o(A,R),N=[0-H.minY,H.maxX-this.get("width"),H.maxY-this.get("height"),0-H.minX],K=u.toAllPadding(S),V=0;V<K.length;V++)if(K[V]===v){var k=Math.max(0,N[V]);K[V]=k+this.get("autoPaddingAppend")}return K},x._initCanvas=function(){var S=this.get("container"),P=this.get("id");!S&&P&&(S=P,this.set("container",P));var A=this.get("width"),O=this.get("height");if(u.isString(S)){if(S=document.getElementById(S),!S)throw new Error("Please specify the container for the chart!");this.set("container",S)}var R=c.createDom('<div style="position:relative;"></div>');S.appendChild(R),this.set("wrapperEl",R),this.get("forceFit")&&(A=c.getWidth(S,A),this.set("width",A));var H=this.get("renderer"),N=new r({containerDOM:R,width:A,height:O,pixelRatio:H==="svg"?1:this.get("pixelRatio"),renderer:H});this.set("canvas",N)},x._initPlot=function(){var S=this;S._initPlotBack();var P=S.get("canvas"),A=P.addGroup({zIndex:1}),O=P.addGroup({zIndex:0}),R=P.addGroup({zIndex:3});S.set("backPlot",A),S.set("middlePlot",O),S.set("frontPlot",R)},x._initPlotBack=function(){var S=this,P=S.get("canvas"),A=S.get("viewTheme"),O=P.addGroup(i,{padding:this.get("padding"),plotBackground:u.mix({},A.plotBackground,S.get("plotBackground")),background:u.mix({},A.background,S.get("background"))});S.set("plot",O),S.set("plotRange",O.get("plotRange"))},x._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",u.wrapBehavior(this,"_initForceFitEvent"))},x._initForceFitEvent=function(){var S=setTimeout(u.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",S)},x._renderLegends=function(){var S=this.get("options"),P=S.legends;if(u.isNil(P)||P!==!1){var A=this.get("legendController");if(A.options=P||{},A.plotRange=this.get("plotRange"),P&&P.custom)A.addCustomLegend();else{var O=this.getAllGeoms(),R=[];u.each(O,function(N){var K=N.get("view"),V=N.getAttrsForLegend();u.each(V,function(k){var Z=k.type,X=k.getScale(Z);if(X.field&&X.type!=="identity"&&!b(R,X)){R.push(X);var at=K.getFilteredOutValues(X.field);A.addLegend(X,k,N,at)}})});var H=this.getYScales();R.length===0&&H.length>1&&A.addMixedLegend(H,O)}A.alignLegends()}},x._renderTooltips=function(){var S=this.get("options");if(u.isNil(S.tooltip)||S.tooltip!==!1){var P=this.get("tooltipController");P.options=S.tooltip||{},P.renderTooltip()}},x.getAllGeoms=function(){var S=[];S=S.concat(this.get("geoms"));var P=this.get("views");return u.each(P,function(A){S=S.concat(A.get("geoms"))}),S},x.forceFit=function(){var S=this;if(!(!S||S.destroyed)){var P=S.get("container"),A=S.get("width"),O=c.getWidth(P,A);if(O!==0&&O!==A){var R=S.get("height");S.changeSize(O,R)}return S}},x.resetPlot=function(){var S=this.get("plot"),P=this.get("padding");g(P,S.get("padding"))||(S.set("padding",P),S.repaint())},x.changeSize=function(S,P){var A=this,O=A.get("canvas");O.changeSize(S,P);var R=this.get("plot");return A.set("width",S),A.set("height",P),R.repaint(),this.set("keepPadding",!0),A.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),A},x.changeWidth=function(S){return this.changeSize(S,this.get("height"))},x.changeHeight=function(S){return this.changeSize(this.get("width"),S)},x.view=function(S){S=S||{},S.theme=this.get("theme"),S.parent=this,S.backPlot=this.get("backPlot"),S.middlePlot=this.get("middlePlot"),S.frontPlot=this.get("frontPlot"),S.canvas=this.get("canvas"),u.isNil(S.animate)&&(S.animate=this.get("animate")),S.options=u.mix({},this._getSharedOptions(),S.options);var P=new s(S);return P.set("_id","view"+this.get("views").length),this.get("views").push(P),this.emit("addview",{view:P}),P},x.removeView=function(S){var P=this.get("views");u.Array.remove(P,S),S.destroy()},x._getSharedOptions=function(){var S=this.get("options"),P={};return u.each(["scales","coord","axes"],function(A){P[A]=u.cloneDeep(S[A])}),P},x.getViewRegion=function(){var S=this.get("plotRange");return{start:S.bl,end:S.tr}},x.legend=function(S,P){var A=this.get("options");A.legends||(A.legends={});var O={};return S===!1?A.legends=!1:u.isObject(S)?O=S:u.isString(S)?O[S]=P:O=P,u.mix(A.legends,O),this},x.tooltip=function(S,P){var A=this.get("options");return A.tooltip||(A.tooltip={}),S===!1?A.tooltip=!1:u.isObject(S)?u.mix(A.tooltip,S):u.mix(A.tooltip,P),this},x.clear=function(){this.emit("beforeclear");for(var S=this.get("views");S.length>0;){var P=S.shift();P.destroy()}_.prototype.clear.call(this);var A=this.get("canvas");return this.resetPlot(),A.draw(),this.emit("afterclear"),this},x.clearInner=function(){var S=this.get("views");u.each(S,function(O){O.clearInner()});var P=this.get("tooltipController");if(P&&P.clear(),!this.get("keepLegend")){var A=this.get("legendController");A&&A.clear()}_.prototype.clearInner.call(this)},x.drawComponents=function(){_.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},x.render=function(){var S=this;if(!S.get("keepPadding")&&S._isAutoPadding()){S.beforeRender(),S.drawComponents();var P=S._getAutoPadding(),A=S.get("plot");g(A.get("padding"),P)||(A.set("padding",P),A.repaint())}var O=S.get("middlePlot");if(S.get("limitInPlot")&&!O.attr("clip")){var R=u.getClipByRange(S.get("plotRange"));O.attr("clip",R)}_.prototype.render.call(this),S._renderTooltips()},x.repaint=function(){this.get("keepPadding")||this.resetPlot(),_.prototype.repaint.call(this)},x.changeVisible=function(S){var P=this.get("wrapperEl"),A=S?"":"none";P.style.display=A},x.toDataURL=function(){var S=this,P=S.get("canvas"),A=S.get("renderer"),O=P.get("el"),R="";if(A==="svg"){var H=O.cloneNode(!0),N=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),K=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",N);K.replaceChild(H,K.documentElement);var V=new XMLSerializer().serializeToString(K);R="data:image/svg+xml;charset=utf8,"+encodeURIComponent(V)}else A==="canvas"&&(R=O.toDataURL("image/png"));return R},x.downloadImage=function(S){var P=this,A=document.createElement("a"),O=P.get("renderer"),R=(S||"chart")+(O==="svg"?".svg":".png"),H=P.get("canvas");H.get("timeline").stopAllAnimations(),setTimeout(function(){var N=P.toDataURL();if(window.Blob&&window.URL&&O!=="svg"){for(var K=N.split(","),V=K[0].match(/:(.*?);/)[1],k=atob(K[1]),Z=k.length,X=new Uint8Array(Z);Z--;)X[Z]=k.charCodeAt(Z);var at=new Blob([X],{type:V});window.navigator.msSaveBlob?window.navigator.msSaveBlob(at,R):A.addEventListener("click",function(){A.download=R,A.href=window.URL.createObjectURL(at)})}else A.addEventListener("click",function(){A.download=R,A.href=N});var pt=document.createEvent("MouseEvents");pt.initEvent("click",!1,!1),A.dispatchEvent(pt)},16)},x.showTooltip=function(S){var P=this.getViewsByPoint(S);if(P.length){var A=this.get("tooltipController");A.showTooltip(S,P)}return this},x.lockTooltip=function(){var S=this.get("tooltipController");return S.lockTooltip(),this},x.unlockTooltip=function(){var S=this.get("tooltipController");return S.unlockTooltip(),this},x.hideTooltip=function(){var S=this.get("tooltipController");return S.hideTooltip(),this},x.getTooltipItems=function(S){var P=this,A=P.getViewsByPoint(S),O=[];return u.each(A,function(R){var H=R.get("geoms");u.each(H,function(N){var K=N.get("dataArray"),V=[];u.each(K,function(k){var Z=N.findPoint(S,k);if(Z){var X=N.getTipItems(Z);V=V.concat(X)}}),O=O.concat(V)})}),O},x.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var S=this.get("canvas"),P=this.get("wrapperEl");P.parentNode.removeChild(P),_.prototype.destroy.call(this),S.destroy(),window.removeEventListener("resize",u.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},M}(s);E.exports=y},function(E,T,e){var t=e(154),u=e(16),s=e(119),h=e(44),r=e(5),c=e(9),n=e(0),i={version:r.version,Animate:s,Chart:h,Global:r,Scale:t,Shape:c,Util:n,G:u,DomUtil:n.DomUtil,MatrixUtil:n.MatrixUtil,PathUtil:n.PathUtil};i.track=function(){console.warn("G2 tracks nothing ;-)")},typeof window!="undefined"&&(window.G2?console.warn("There are multiple versions of G2. Version "+i.version+"'s reference is 'window.G2_3'"):window.G2=i),E.exports=i},function(E,T,e){var t=e(5),u=e(0),s=u.assign,h=u.isNil,r=u.isArray,c=u.cloneDeep,n=u.wrapBehavior,i=u.getWrapBehavior,a=function(){var o=l.prototype;o.getDefaultCfg=function(){return{chart:null,group:null,showTitle:!0,autoSetAxis:!0,padding:10,eachView:null,fields:[],colTitle:{offsetY:-15,style:{fontSize:14,textAlign:"center",fill:"#666",fontFamily:t.fontFamily}},rowTitle:{offsetX:15,style:{fontSize:14,textAlign:"center",rotate:90,fill:"#666",fontFamily:t.fontFamily}}}};function l(f){var v=this.getDefaultCfg();s(this,v,f),this.init()}return o.init=function(){if(!this.chart)throw new Error("Facets Error: please specify the chart!");this._bindEvent(),this.initContainer(),this.chart.get("data")&&this.initViews()},o.initContainer=function(){var v=this.chart,b=v.get("frontPlot"),g=b.addGroup();this.group=g},o.initViews=function(){for(var v=this.chart,b=v.get("data"),g=this.eachView,y=this.generateFacets(b),_=0;_<y.length;_++){var M=y[_],x=M.region,m=v.view({start:x.start,end:x.end,padding:this.padding});m.source(M.data),this.beforeProcessView(m,M),g&&g(m,M),this.afterProcessView(m,M),M.view=m}this.facets=y},o.beforeProcessView=function(){},o.afterProcessView=function(v,b){this.autoSetAxis&&this.processAxis(v,b)},o.processAxis=function(v,b){var g=v.get("options"),y=v.get("geoms");if((!g.coord.type||g.coord.type==="rect")&&y.length){var _=y[0].get("attrOptions").position.field,M=r(_)?_:_.split("*").map(function(P){return P.trim()}),x=M[0],m=M[1];h(g.axes)&&(g.axes={});var S=g.axes;S!==!1&&(x&&S[x]!==!1&&(S[x]=S[x]||{},this.setXAxis(x,S,b)),m&&S[m]!==!1&&(S[m]=S[m]||{},this.setYAxis(m,S,b)))}},o.setXAxis=function(){},o.setYAxis=function(){},o.renderTitle=function(v,b){this.drawColTitle(v,b)},o.getScaleText=function(v,b,g){var y;if(v){var _=g.get("scales"),M=_[v];M||(M=g.createScale(v)),y=M.getText(b)}else y=b;return y},o.drawColTitle=function(v,b){var g=this.getScaleText(b.colField,b.colValue,v),y=s({position:["50%","0%"],content:g},this.colTitle);v.guide().text(y)},o.drawRowTitle=function(v,b){var g=this.getScaleText(b.rowField,b.rowValue,v),y=s({position:["100%","50%"],content:g},c(this.rowTitle));v.guide().text(y)},o.getFilter=function(v){var b=function(y){var _=!0;return v.forEach(function(M){var x=M.field,m=M.value,S=!0;!h(m)&&x&&(S=y[x]===m),_=_&&S}),_};return b},o.getFieldValues=function(v,b){for(var g=[],y={},_=0;_<b.length;_++){var M=b[_],x=M[v];!h(x)&&!y[x]&&(g.push(x),y[x]=!0)}return g},o.getRegion=function(v,b,g,y){var _=1/b,M=1/v,x={x:_*g,y:M*y},m={x:x.x+_,y:x.y+M};return{start:x,end:m}},o.generateFacets=function(){return[]},o._bindEvent=function(){var v=this.chart;v.on("afterchangedata",n(this,"onDataChange")),v.on("beforeclear",n(this,"onClear")),v.on("beforedestroy",n(this,"destroy")),v.on("beforepaint",n(this,"onPaint")),v.on("setdata",n(this,"onDataChange"))},o._clearEvent=function(){var v=this.chart;v&&(v.off("afterchangedata",i(this,"onDataChange")),v.off("beforeclear",i(this,"onClear")),v.off("beforedestroy",i(this,"destroy")),v.off("beforepaint",i(this,"onPaint")),v.off("setdata",i(this,"onDataChange")))},o._clearFacets=function(){var v=this.facets,b=this.chart;if(v)for(var g=0;g<v.length;g++){var y=v[g];b.removeView(y.view)}this.facets=null},o.onClear=function(){this.onRemove()},o.onPaint=function(){if(this.showTitle)for(var v=this.facets,b=0;b<v.length;b++){var g=v[b],y=g.view;this.renderTitle(y,g)}},o.onDataChange=function(){this._clearFacets(),this.initViews()},o.onRemove=function(){this._clearFacets(),this._clearEvent(),this.group&&this.group.remove(),this.chart=null,this.facets=null,this.group=null},o.destroy=function(){this.onRemove(),this.destroyed=!0},l}();E.exports=a},function(E,T,e){var t=e(1);function u(n,i,a,o){return{x:Math.cos(o)*a+n,y:Math.sin(o)*a+i}}function s(n,i,a,o){var l,f;return o?n<i?(l=i-n,f=Math.PI*2-a+n):n>a&&(l=Math.PI*2-n+i,f=n-a):(l=n-i,f=a-n),l>f?a:i}function h(n,i,a,o){var l=0;return a-i>=Math.PI*2&&(l=Math.PI*2),i=t.mod(i,Math.PI*2),a=t.mod(a,Math.PI*2)+l,n=t.mod(n,Math.PI*2),o?i>=a?n>a&&n<i?n:s(n,a,i,!0):n<i||n>a?n:s(n,i,a):i<=a?i<n&&n<a?n:s(n,i,a,!0):n>i||n<a?n:s(n,a,i)}function r(n,i,a,o,l,f,v,b,g){var y=[v,b],_=[n,i],M=[1,0],x=t.vec2.subtract([],y,_),m=t.vec2.angleTo(M,x);m=h(m,o,l,f);var S=[a*Math.cos(m)+n,a*Math.sin(m)+i];g&&(g.x=S[0],g.y=S[1]);var P=t.vec2.distance(S,y);return P}function c(n,i,a,o,l,f){var v=0,b=Math.PI/2,g=Math.PI,y=Math.PI*3/2,_=[],M=h(v,o,l,f);M===v&&_.push(u(n,i,a,v)),M=h(b,o,l,f),M===b&&_.push(u(n,i,a,b)),M=h(g,o,l,f),M===g&&_.push(u(n,i,a,g)),M=h(y,o,l,f),M===y&&_.push(u(n,i,a,y)),_.push(u(n,i,a,o)),_.push(u(n,i,a,l));var x=Infinity,m=-Infinity,S=Infinity,P=-Infinity;return t.each(_,function(A){x>A.x&&(x=A.x),m<A.x&&(m=A.x),S>A.y&&(S=A.y),P<A.y&&(P=A.y)}),{minX:x,minY:S,maxX:m,maxY:P}}E.exports={nearAngle:h,projectPoint:function(i,a,o,l,f,v,b,g){var y={};return r(i,a,o,l,f,v,b,g,y),y},pointDistance:r,box:c}},function(E,T,e){var t=e(1).vec2;E.exports={at:function(s,h,r){return(h-s)*r+s},pointDistance:function(s,h,r,c,n,i){var a=[r-s,c-h];if(t.exactEquals(a,[0,0]))return NaN;var o=[-a[1],a[0]];t.normalize(o,o);var l=[n-s,i-h];return Math.abs(t.dot(l,o))},box:function(s,h,r,c,n){var i=n/2,a=Math.min(s,r),o=Math.max(s,r),l=Math.min(h,c),f=Math.max(h,c);return{minX:a-i,minY:l-i,maxX:o+i,maxY:f+i}},len:function(s,h,r,c){return Math.sqrt((r-s)*(r-s)+(c-h)*(c-h))}}},function(E,T,e){var t=e(37),u=e(50),s=Math.PI,h=Math.sin,r=Math.cos,c=Math.atan2,n=10,i=s/3;function a(f,v,b,g,y,_,M){var x,m,S,P,A,O,R;if(!v.fill){var H=v.arrowLength||n,N=v.arrowAngle?v.arrowAngle*s/180:i;R=c(g-_,b-y),A=Math.abs(v.lineWidth*r(R))/2,O=Math.abs(v.lineWidth*h(R))/2,M&&(A=-A,O=-O),x=y+H*r(R+N/2),m=_+H*h(R+N/2),S=y+H*r(R-N/2),P=_+H*h(R-N/2),f.beginPath(),f.moveTo(x-A,m-O),f.lineTo(y-A,_-O),f.lineTo(S-A,P-O),f.moveTo(y-A,_-O),f.lineTo(y+A,_+O),f.moveTo(y,_),f.stroke()}}function o(f){var v=[],b=t.parsePath(f.path),g;if(!Array.isArray(b)||b.length===0||b[0][0]!=="M"&&b[0][0]!=="m")return!1;for(var y=b.length,_=0;_<b.length;_++){var M=b[_];g=new u(M,g,_===y-1),v.push(g)}return v}function l(f,v,b,g,y,_,M){var x=M?v.startArrow:v.endArrow,m=x.d,S=0,P=y-b,A=_-g,O=Math.atan(P/A);A===0&&P<0?S=Math.PI:P>0&&A>0?S=Math.PI/2-O:P<0&&A<0?S=-Math.PI/2-O:P>=0&&A<0?S=-O-Math.PI/2:P<=0&&A>0&&(S=Math.PI/2-O);var R=o(x);if(!!R){m&&(M?(y=y+Math.sin(Math.abs(O))*m,_=_+Math.cos(Math.abs(O))*m-.5*f.lineWidth):(y=y-Math.sin(Math.abs(O))*m,_=_-Math.cos(Math.abs(O))*m+.5*f.lineWidth)),f.save(),f.beginPath(),f.translate(y,_),f.rotate(S);for(var H=0;H<R.length;H++)R[H].draw(f);f.setTransform(1,0,0,1,0,0),f.fillStyle=f.strokeStyle,f.fill(),f.restore()}}E.exports={addStartArrow:function(v,b,g,y,_,M){typeof b.startArrow=="object"?l(v,b,g,y,_,M,!0):b.startArrow&&a(v,b,g,y,_,M,!0)},addEndArrow:function(v,b,g,y,_,M){typeof b.endArrow=="object"?l(v,b,g,y,_,M,!1):b.endArrow&&a(v,b,g,y,_,M,!1)}}},function(E,T,e){var t=e(1),u=e(76),s=e(75),h=e(144),r=e(143),c=t.vec3,n=t.mat3,i=["m","l","c","a","q","h","v","t","s","z"];function a(y,_,M){return{x:M.x+y,y:M.y+_}}function o(y,_){return{x:_.x+(_.x-y.x),y:_.y+(_.y-y.y)}}function l(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function f(y,_){return(y[0]*_[0]+y[1]*_[1])/(l(y)*l(_))}function v(y,_){return(y[0]*_[1]<y[1]*_[0]?-1:1)*Math.acos(f(y,_))}function b(y,_,M,x,m,S,P){var A=t.mod(t.toRadian(P),Math.PI*2),O=y.x,R=y.y,H=_.x,N=_.y,K=Math.cos(A)*(O-H)/2+Math.sin(A)*(R-N)/2,V=-1*Math.sin(A)*(O-H)/2+Math.cos(A)*(R-N)/2,k=K*K/(m*m)+V*V/(S*S);k>1&&(m*=Math.sqrt(k),S*=Math.sqrt(k));var Z=m*m*(V*V)+S*S*(K*K),X=Math.sqrt((m*m*(S*S)-Z)/Z);M===x&&(X*=-1),isNaN(X)&&(X=0);var at=X*m*V/S,pt=X*-S*K/m,gt=(O+H)/2+Math.cos(A)*at-Math.sin(A)*pt,ft=(R+N)/2+Math.sin(A)*at+Math.cos(A)*pt,Rt=v([1,0],[(K-at)/m,(V-pt)/S]),Nt=[(K-at)/m,(V-pt)/S],Dt=[(-1*K-at)/m,(-1*V-pt)/S],St=v(Nt,Dt);return f(Nt,Dt)<=-1&&(St=Math.PI),f(Nt,Dt)>=1&&(St=0),x===0&&St>0&&(St=St-2*Math.PI),x===1&&St<0&&(St=St+2*Math.PI),[y,gt,ft,m,S,Rt,St,A,x]}var g=function(_,M,x){this.preSegment=M,this.isLast=x,this.init(_,M)};t.augment(g,{init:function(_,M){var x=_[0];M=M||{endPoint:{x:0,y:0}};var m=i.indexOf(x)>=0,S=m?x.toUpperCase():x,P=_,A,O,R,H,N=M.endPoint,K=P[1],V=P[2];switch(S){default:break;case"M":m?H=a(K,V,N):H={x:K,y:V},this.command="M",this.params=[N,H],this.subStart=H,this.endPoint=H;break;case"L":m?H=a(K,V,N):H={x:K,y:V},this.command="L",this.params=[N,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-N.x,H.y-N.y]},this.startTangent=function(){return[N.x-H.x,N.y-H.y]};break;case"H":m?H=a(K,0,N):H={x:K,y:N.y},this.command="L",this.params=[N,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-N.x,H.y-N.y]},this.startTangent=function(){return[N.x-H.x,N.y-H.y]};break;case"V":m?H=a(0,K,N):H={x:N.x,y:K},this.command="L",this.params=[N,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-N.x,H.y-N.y]},this.startTangent=function(){return[N.x-H.x,N.y-H.y]};break;case"Q":m?(A=a(K,V,N),O=a(P[3],P[4],N)):(A={x:K,y:V},O={x:P[3],y:P[4]}),this.command="Q",this.params=[N,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[N.x-A.x,N.y-A.y]};break;case"T":m?O=a(K,V,N):O={x:K,y:V},M.command==="Q"?(A=o(M.params[1],N),this.command="Q",this.params=[N,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[N.x-A.x,N.y-A.y]}):(this.command="TL",this.params=[N,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-N.x,O.y-N.y]},this.startTangent=function(){return[N.x-O.x,N.y-O.y]});break;case"C":m?(A=a(K,V,N),O=a(P[3],P[4],N),R=a(P[5],P[6],N)):(A={x:K,y:V},O={x:P[3],y:P[4]},R={x:P[5],y:P[6]}),this.command="C",this.params=[N,A,O,R],this.subStart=M.subStart,this.endPoint=R,this.endTangent=function(){return[R.x-O.x,R.y-O.y]},this.startTangent=function(){return[N.x-A.x,N.y-A.y]};break;case"S":m?(O=a(K,V,N),R=a(P[3],P[4],N)):(O={x:K,y:V},R={x:P[3],y:P[4]}),M.command==="C"?(A=o(M.params[2],N),this.command="C",this.params=[N,A,O,R],this.subStart=M.subStart,this.endPoint=R,this.endTangent=function(){return[R.x-O.x,R.y-O.y]},this.startTangent=function(){return[N.x-A.x,N.y-A.y]}):(this.command="SQ",this.params=[N,O,R],this.subStart=M.subStart,this.endPoint=R,this.endTangent=function(){return[R.x-O.x,R.y-O.y]},this.startTangent=function(){return[N.x-O.x,N.y-O.y]});break;case"A":{var k=K,Z=V,X=P[3],at=P[4],pt=P[5];m?H=a(P[6],P[7],N):H={x:P[6],y:P[7]},this.command="A";var gt=b(N,H,at,pt,k,Z,X);this.params=gt;var ft=M.subStart;this.subStart=ft,this.endPoint=H;var Rt=gt[5]%(Math.PI*2);t.isNumberEqual(Rt,Math.PI*2)&&(Rt=0);var Nt=gt[6]%(Math.PI*2);t.isNumberEqual(Nt,Math.PI*2)&&(Nt=0);var Dt=.001;this.startTangent=function(){pt===0&&(Dt*=-1);var St=gt[3]*Math.cos(Rt-Dt)+gt[1],xt=gt[4]*Math.sin(Rt-Dt)+gt[2];return[St-ft.x,xt-ft.y]},this.endTangent=function(){var St=gt[6];St-Math.PI*2<1e-4&&(St=0);var xt=gt[3]*Math.cos(Rt+St+Dt)+gt[1],Ot=gt[4]*Math.sin(Rt+St-Dt)+gt[2];return[N.x-xt,N.y-Ot]};break}case"Z":this.command="Z",this.params=[N,M.subStart],this.subStart=M.subStart,this.endPoint=M.subStart}},isInside:function(_,M,x){var m=this,S=m.command,P=m.params,A=m.box;if(A&&!u.box(A.minX,A.maxX,A.minY,A.maxY,_,M))return!1;switch(S){default:break;case"M":return!1;case"TL":case"L":case"Z":return u.line(P[0].x,P[0].y,P[1].x,P[1].y,x,_,M);case"SQ":case"Q":return u.quadraticline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,x,_,M);case"C":return u.cubicline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,P[3].x,P[3].y,x,_,M);case"A":{var O=P,R=O[1],H=O[2],N=O[3],K=O[4],V=O[5],k=O[6],Z=O[7],X=O[8],at=N>K?N:K,pt=N>K?1:N/K,gt=N>K?K/N:1;O=[_,M,1];var ft=[1,0,0,0,1,0,0,0,1];return n.translate(ft,ft,[-R,-H]),n.rotate(ft,ft,-Z),n.scale(ft,ft,[1/pt,1/gt]),c.transformMat3(O,O,ft),u.arcline(0,0,at,V,V+k,1-X,x,O[0],O[1])}}return!1},draw:function(_){var M=this.command,x=this.params,m,S,P;switch(M){default:break;case"M":_.moveTo(x[1].x,x[1].y);break;case"TL":case"L":_.lineTo(x[1].x,x[1].y);break;case"SQ":case"Q":m=x[1],S=x[2],_.quadraticCurveTo(m.x,m.y,S.x,S.y);break;case"C":m=x[1],S=x[2],P=x[3],_.bezierCurveTo(m.x,m.y,S.x,S.y,P.x,P.y);break;case"A":{var A=x,O=A[1],R=A[2],H=O,N=R,K=A[3],V=A[4],k=A[5],Z=A[6],X=A[7],at=A[8],pt=K>V?K:V,gt=K>V?1:K/V,ft=K>V?V/K:1;_.translate(H,N),_.rotate(X),_.scale(gt,ft),_.arc(0,0,pt,k,k+Z,1-at),_.scale(1/gt,1/ft),_.rotate(-X),_.translate(-H,-N);break}case"Z":_.closePath();break}},getBBox:function(_){var M=_/2,x=this.params,m,S,P,A;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(x[0].x,x[1].x)-M,maxX:Math.max(x[0].x,x[1].x)+M,minY:Math.min(x[0].y,x[1].y)-M,maxY:Math.max(x[0].y,x[1].y)+M};break;case"SQ":case"Q":for(S=h.extrema(x[0].x,x[1].x,x[2].x),P=0,A=S.length;P<A;P++)S[P]=h.at(x[0].x,x[1].x,x[2].x,S[P]);for(S.push(x[0].x,x[2].x),m=h.extrema(x[0].y,x[1].y,x[2].y),P=0,A=m.length;P<A;P++)m[P]=h.at(x[0].y,x[1].y,x[2].y,m);m.push(x[0].y,x[2].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,m)-M,maxY:Math.max.apply(Math,m)+M};break;case"C":for(S=s.extrema(x[0].x,x[1].x,x[2].x,x[3].x),P=0,A=S.length;P<A;P++)S[P]=s.at(x[0].x,x[1].x,x[2].x,x[3].x,S[P]);for(m=s.extrema(x[0].y,x[1].y,x[2].y,x[3].y),P=0,A=m.length;P<A;P++)m[P]=s.at(x[0].y,x[1].y,x[2].y,x[3].y,m[P]);S.push(x[0].x,x[3].x),m.push(x[0].y,x[3].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,m)-M,maxY:Math.max.apply(Math,m)+M};break;case"A":{var O=x,R=O[1],H=O[2],N=O[3],K=O[4],V=O[5],k=O[6],Z=O[7],X=O[8],at=V,pt=V+k,gt=r.xExtrema(Z,N,K),ft=Infinity,Rt=-Infinity,Nt=[at,pt];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var Dt=gt+P;X===1?at<Dt&&Dt<pt&&Nt.push(Dt):pt<Dt&&Dt<at&&Nt.push(Dt)}for(P=0,A=Nt.length;P<A;P++){var St=r.xAt(Z,N,K,R,Nt[P]);St<ft&&(ft=St),St>Rt&&(Rt=St)}var xt=r.yExtrema(Z,N,K),Ot=Infinity,it=-Infinity,At=[at,pt];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var z=xt+P;X===1?at<z&&z<pt&&At.push(z):pt<z&&z<at&&At.push(z)}for(P=0,A=At.length;P<A;P++){var q=r.yAt(Z,N,K,H,At[P]);q<Ot&&(Ot=q),q>it&&(it=q)}this.box={minX:ft-M,maxX:Rt+M,minY:Ot-M,maxY:it+M};break}}}}),E.exports=g},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(6),s=e(2),h=e(26),r=e(351),c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this);var l=this;l.type="linear",l.isLinear=!0,l.nice=!1,l.min=null,l.minLimit=null,l.max=null,l.maxLimit=null,l.tickCount=null,l.tickInterval=null,l.minTickInterval=null,l.snapArray=null},a.init=function(){var l=this;if(!l.ticks)l.min=l.translate(l.min),l.max=l.translate(l.max),l.initTicks();else{var f=l.ticks,v=l.translate(f[0]),b=l.translate(f[f.length-1]);(u(l.min)||l.min>v)&&(l.min=v),(u(l.max)||l.max<b)&&(l.max=b)}},a.calculateTicks=function(){var l=this.min,f=this.max,v=this.minLimit,b=this.maxLimit,g=this.tickCount,y=this.tickInterval,_=this.minTickInterval,M=this.snapArray;if(g===1)throw new Error("linear scale'tickCount should not be 1");if(f<l)throw new Error("max: "+f+" should not be less than min: "+l);var x=r({min:l,max:f,minLimit:v,maxLimit:b,minCount:g,maxCount:g,interval:y,minTickInterval:_,snapArray:M});return x.ticks},a.initTicks=function(){var l=this,f=l.calculateTicks();if(l.nice)l.ticks=f,l.min=f[0],l.max=f[f.length-1];else{var v=[];s(f,function(b){b>=l.min&&b<=l.max&&v.push(b)}),v.length||(v.push(l.min),v.push(l.max)),l.ticks=v}},a.scale=function(l){if(u(l))return NaN;var f=this.max,v=this.min;if(f===v)return 0;var b=(l-v)/(f-v),g=this.rangeMin(),y=this.rangeMax();return g+b*(y-g)},a.invert=function(l){var f=(l-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+f*(this.max-this.min)},i}(h);h.Linear=c,E.exports=c},function(E,T,e){var t=e(15),u=e(192);E.exports={toTimeStamp:function(h){return t(h)&&(h.indexOf("T")>0?h=new Date(h).getTime():h=new Date(h.replace(/-/ig,"/")).getTime()),u(h)&&(h=h.getTime()),h}}},function(E,T,e){var t=e(21),u=Array.prototype.indexOf,s=function(r,c){return t(r)?u.call(r,c)>-1:!1};E.exports=s},function(E,T){var e=function(u){for(var s=[],h=0;h<u.length;h++)s=s.concat(u[h]);return s};E.exports=e},function(E,T){var e=1e-5;E.exports=function(u,s){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;return Math.abs(u-s)<h}},function(E,T,e){E.exports={mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(21);function u(s){return t(s)?Array.prototype.slice.call(s):[]}E.exports=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u=e(45);function s(r,c){return r===c?r!==0||c!==0||1/r==1/c:r!==r&&c!==c}function h(r){return u.Util.isArray(r)?r.length:u.Util.isObject(r)?Object.keys(r).length:0}T.default=u.Util.mix({},u.Util,{shallowEqual:function(c,n){if(s(c,n))return!0;if((typeof c=="undefined"?"undefined":t(c))!=="object"||c===null||(typeof n=="undefined"?"undefined":t(n))!=="object"||n===null||u.Util.isArray(c)!==u.Util.isArray(n)||h(c)!==h(n))return!1;var i=!0;return u.Util.each(c,function(a,o){return s(a,n[o])?!0:(i=!1,i)}),i},without:function(c){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i={};return u.Util.each(c,function(a,o){u.Util.indexOf(n,o)===-1&&(i[o]=a)}),i},length:h})},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u-=t,function(s){return t+u*s}}},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u=+u,function(s){return t*(1-s)+u*s}}},function(E,T,e){"use strict";var t=e(97),u=e(98);function s(r){return function(){var c=this.ownerDocument,n=this.namespaceURI;return n===u.b&&c.documentElement.namespaceURI===u.b?c.createElement(r):c.createElementNS(n,r)}}function h(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}T.a=function(r){var c=e.i(t.a)(r);return(c.local?h:s)(c)}},function(E,T,e){"use strict";T.a=function(t,u){var s=t.ownerSVGElement||t;if(s.createSVGPoint){var h=s.createSVGPoint();return h.x=u.clientX,h.y=u.clientY,h=h.matrixTransform(t.getScreenCTM().inverse()),[h.x,h.y]}var r=t.getBoundingClientRect();return[u.clientX-r.left-t.clientLeft,u.clientY-r.top-t.clientTop]}},function(E,T,e){"use strict";T.b=h;var t=e(13);function u(r,c){var n,i;return function(){var a=e.i(t.e)(this,r),o=a.tween;if(o!==n){i=n=o;for(var l=0,f=i.length;l<f;++l)if(i[l].name===c){i=i.slice(),i.splice(l,1);break}}a.tween=i}}function s(r,c,n){var i,a;if(typeof n!="function")throw new Error;return function(){var o=e.i(t.e)(this,r),l=o.tween;if(l!==i){a=(i=l).slice();for(var f={name:c,value:n},v=0,b=a.length;v<b;++v)if(a[v].name===c){a[v]=f;break}v===b&&a.push(f)}o.tween=a}}T.a=function(r,c){var n=this._id;if(r+="",arguments.length<2){for(var i=e.i(t.f)(this.node(),n).tween,a=0,o=i.length,l;a<o;++a)if((l=i[a]).name===r)return l.value;return null}return this.each((c==null?u:s)(n,r,c))};function h(r,c,n){var i=r._id;return r.each(function(){var a=e.i(t.e)(this,i);(a.value||(a.value={}))[c]=n.apply(this,arguments)}),function(a){return e.i(t.f)(a,i).value[c]}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setTheme=T.track=T.Interactions=T.PathUtil=T.Animate=T.Shape=T.Util=T.G2=T.Facet=T.Label=T.Guide=T.View=T.Geom=T.Tooltip=T.Legend=T.Axis=T.Coord=T.Chart=void 0;var t=e(422);Object.defineProperty(T,"Chart",{enumerable:!0,get:function(){return x(t).default}});var u=e(424);Object.defineProperty(T,"Coord",{enumerable:!0,get:function(){return x(u).default}});var s=e(420);Object.defineProperty(T,"Axis",{enumerable:!0,get:function(){return x(s).default}});var h=e(430);Object.defineProperty(T,"Legend",{enumerable:!0,get:function(){return x(h).default}});var r=e(431);Object.defineProperty(T,"Tooltip",{enumerable:!0,get:function(){return x(r).default}});var c=e(427);Object.defineProperty(T,"Geom",{enumerable:!0,get:function(){return x(c).default}});var n=e(432);Object.defineProperty(T,"View",{enumerable:!0,get:function(){return x(n).default}});var i=e(428);Object.defineProperty(T,"Guide",{enumerable:!0,get:function(){return x(i).default}});var a=e(429);Object.defineProperty(T,"Label",{enumerable:!0,get:function(){return x(a).default}});var o=e(426);Object.defineProperty(T,"Facet",{enumerable:!0,get:function(){return x(o).default}});var l=e(45),f=x(l),v=e(322),b=x(v),g=e(58),y=x(g),_=e(438),M=x(_);function x(A){return A&&A.__esModule?A:{default:A}}T.G2=f.default,T.Util=y.default,T.Shape=l.Shape,T.Animate=l.Animate,T.PathUtil=l.PathUtil,T.Interactions=b.default;var m=T.track=function(){},S=T.setTheme=function(O){var R=O;typeof O=="string"&&M.default[O]&&(R=M.default[O]),f.default.Global.setTheme(R)},P={G2:f.default,Util:y.default,Shape:l.Shape,Animate:l.Animate,PathUtil:l.PathUtil,track:m,setTheme:S,Interactions:b.default};T.default=P},function(E,T,e){E.exports={Position:e(235),Color:e(233),Shape:e(236),Size:e(237),Opacity:e(234),ColorUtil:e(107)}},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(105),i=e(3),a=function(o){c(v,o);var l=t(v),f=v.prototype;f.getDefaultCfg=function(){return{}};function v(b){var g;g=o.call(this)||this;var y=s(g),_={visible:!0},M=y.getDefaultCfg();return y._attrs=_,i.deepMix(_,M,b),g}return f.get=function(g){return this._attrs[g]},f.set=function(g,y){this._attrs[g]=y},f.changeVisible=function(){},f.destroy=function(){var g=this;g._attrs={},g.removeAllListeners(),g.destroyed=!0},v}(n);E.exports=a},function(E,T,e){function t(y){return function(){var _=r(y),M;if(h()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return u(this,M)}}function u(y,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(y)}function s(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}function r(y){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(y)}function c(y,_){y.prototype=Object.create(_.prototype),y.prototype.constructor=y,y.__proto__=_}var n=e(3),i=e(112),a=e(261),o=e(19),l=o.FONT_FAMILY,f=8,v=n.Event,b=n.Group,g=function(y){c(M,y);var _=t(M);function M(){return y.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=y.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"continuous-legend",items:null,layout:"vertical",width:20,height:156,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",stroke:"#fff",lineWidth:5,fontFamily:l},hoverTextStyle:{fill:"rgba(0,0,0,0.25)"},slidable:!0,triggerAttr:{fill:"#fff",shadowBlur:10,shadowColor:"rgba(0,0,0,0.65)",radius:2},_range:[0,100],middleBackgroundStyle:{fill:"#D9D9D9"},textOffset:4,lineStyle:{lineWidth:1,stroke:"#fff"},pointerStyle:{fill:"rgb(230, 230, 230)"}})},x._calStartPoint=function(){var S={x:10,y:this.get("titleGap")-f},P=this.get("titleShape");if(P){var A=P.getBBox();S.y+=A.height}return S},x.beforeRender=function(){var S=this.get("items");!n.isArray(S)||n.isEmpty(S)||(y.prototype.beforeRender.call(this),this.set("firstItem",S[0]),this.set("lastItem",S[S.length-1]))},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x.render=function(){y.prototype.render.call(this),this.get("slidable")?this._renderSlider():this._renderUnslidable()},x._renderSlider=function(){var S=new b,P=new b,A=new b,O=this._calStartPoint(),R=this.get("group"),H=R.addGroup(a,{minHandleElement:S,maxHandleElement:P,backgroundElement:A,layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});H.translate(O.x,O.y),this.set("slider",H);var N=this._renderSliderShape();N.attr("clip",H.get("middleHandleElement")),this._renderTrigger()},x._addMiddleBar=function(S,P,A){return S.addShape(P,{attrs:n.mix({},A,this.get("middleBackgroundStyle"))}),S.addShape(P,{attrs:A})},x._renderTrigger=function(){var S=this.get("firstItem"),P=this.get("lastItem"),A=this.get("layout"),O=this.get("textStyle"),R=this.get("triggerAttr"),H=n.mix({},R),N=n.mix({},R),K=n.mix({text:this._formatItemValue(S.value)+""},O),V=n.mix({text:this._formatItemValue(P.value)+""},O);A==="vertical"?(this._addVerticalTrigger("min",H,K),this._addVerticalTrigger("max",N,V)):(this._addHorizontalTrigger("min",H,K),this._addHorizontalTrigger("max",N,V))},x._addVerticalTrigger=function(S,P,A){var O=this.get("slider"),R=O.get(S+"HandleElement"),H=this.get("width"),N=R.addShape("rect",{attrs:n.mix({x:H/2-f-2,y:S==="min"?0:-f,width:2*f+2,height:f},P)}),K=R.addShape("text",{attrs:n.mix(A,{x:H+this.get("textOffset"),y:S==="max"?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),V=this.get("layout"),k=V==="vertical"?"ns-resize":"ew-resize";N.attr("cursor",k),K.attr("cursor",k),this.set(S+"ButtonElement",N),this.set(S+"TextElement",K)},x._addHorizontalTrigger=function(S,P,A){var O=this.get("slider"),R=O.get(S+"HandleElement"),H=R.addShape("rect",{attrs:n.mix({x:S==="min"?-f:0,y:-f-this.get("height")/2,width:f,height:2*f},P)}),N=R.addShape("text",{attrs:n.mix(A,{x:S==="min"?-f-4:f+4,y:f/2+this.get("textOffset")+10,textAlign:S==="min"?"end":"start",textBaseline:"middle"})}),K=this.get("layout"),V=K==="vertical"?"ns-resize":"ew-resize";H.attr("cursor",V),N.attr("cursor",V),this.set(S+"ButtonElement",H),this.set(S+"TextElement",N)},x._bindEvents=function(){var S=this;if(this.get("slidable")){var P=this.get("slider");P.on("sliderchange",function(A){var O=A.range,R=S.get("firstItem").value,H=S.get("lastItem").value,N=R+O[0]/100*(H-R),K=R+O[1]/100*(H-R);S._updateElement(N,K);var V=new v("itemfilter",A,!0,!0);V.range=[N,K],S.emit("itemfilter",V)})}this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMouseMove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseLeave")))},x._updateElement=function(S,P){var A=this.get("minTextElement"),O=this.get("maxTextElement");P>1&&(S=parseInt(S,10),P=parseInt(P,10)),A.attr("text",this._formatItemValue(S)+""),O.attr("text",this._formatItemValue(P)+"")},x._onMouseLeave=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},x._onMouseMove=function(S){var P=this.get("height"),A=this.get("width"),O=this.get("items"),R=this.get("canvas").get("el"),H=R.getBoundingClientRect(),N=this.get("group").getBBox(),K;if(this.get("layout")==="vertical"){var V=5;this.get("type")==="color-legend"&&(V=30);var k=this.get("titleGap"),Z=this.get("titleShape");Z&&(k+=Z.getBBox().maxY-Z.getBBox().minY);var X=S.clientY||S.event.clientY;X=X-H.y-this.get("group").attr("matrix")[7]+N.y-V+k,K=O[0].value+(1-X/P)*(O[O.length-1].value-O[0].value)}else{var at=S.clientX||S.event.clientX;at=at-H.x-this.get("group").attr("matrix")[6],K=O[0].value+at/A*(O[O.length-1].value-O[0].value)}K=K.toFixed(2),this.activate(K),this.emit("mousehover",{value:K})},x.activate=function(S){if(!!S){var P=this.get("group").findById("hoverPointer"),A=this.get("group").findById("hoverText"),O=this.get("items");if(!(S<O[0].value||S>O[O.length-1].value)){var R=this.get("height"),H=this.get("width"),N=this.get("titleShape"),K=this.get("titleGap"),V=[],k=(S-O[0].value)/(O[O.length-1].value-O[0].value),Z;if(this.get("layout")==="vertical"){var X=0,at=0;this.get("type")==="color-legend"&&(X=K,N&&(X+=N.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?X-=13:(X=K-15,N&&(X+=N.getBBox().height)),at+=10),k=(1-k)*R,V=[[at,k+X],[at-10,k+X-5],[at-10,k+X+5]],Z=n.mix({},{x:H+this.get("textOffset")/2+at,y:k+X,text:this._formatItemValue(S)+""},this.get("textStyle"),{textAlign:"start"})}else{var pt=0,gt=0;this.get("type")==="color-legend"&&(pt=K,N&&(pt+=N.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?pt-=7:(pt=K,N||(pt-=7)),gt+=10),k*=H,V=[[k+gt,pt],[k+gt-5,pt-10],[k+gt+5,pt-10]],Z=n.mix({},{x:k-5,y:R+this.get("textOffset")+pt,text:this._formatItemValue(S)+""},this.get("textStyle"))}var ft=n.mix(Z,this.get("hoverTextStyle"));A?A.attr(ft):(A=this.get("group").addShape("text",{attrs:ft}),A.set("id","hoverText")),P?P.attr(n.mix({points:V},this.get("pointerStyle"))):(P=this.get("group").addShape("Polygon",{attrs:n.mix({points:V},this.get("pointerStyle"))}),P.set("id","hoverPointer")),this.get("canvas").draw()}}},x.deactivate=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},M}(i);E.exports=g},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(66),i=e(3),a=function(o){c(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return i.mix({},g,{x:0,y:0,items:null,titleContent:null,showTitle:!0,plotRange:null,offset:10,timeStamp:0,inPlot:!0,crosshairs:null})},v.isContentChange=function(g,y){var _=this.get("titleContent"),M=this.get("items"),x=!(g===_&&M.length===y.length);return x||i.each(y,function(m,S){var P=M[S];for(var A in m)if(m.hasOwnProperty(A)&&!i.isObject(m[A])&&m[A]!==P[A]){x=!0;break}if(x)return!1}),x},v.setContent=function(g,y){var _=new Date().valueOf();return this.set("items",y),this.set("titleContent",g),this.set("timeStamp",_),this.render(),this},v.setPosition=function(g,y){this.set("x",g),this.set("y",y)},v.render=function(){},v.clear=function(){},v.show=function(){this.set("visible",!0)},v.hide=function(){this.set("visible",!1)},f}(n);E.exports=a},function(E,T,e){var t=e(16),u=t.Group,s=e(30),h=s.Label,r=e(5),c=e(0),n=["line","point","path"],i="_origin";function a(f){var v=0;return c.each(f,function(b){v+=b}),v/f.length}function o(f,v){if(c.isNumber(f)&&c.isNumber(v))return[f,v];for(var b=-1,g=0,y=0,_,M=f.length-1,x,m=0;++b<f.length;)_=M,M=b,m+=x=f[_]*v[M]-f[M]*v[_],g+=(f[_]+f[M])*x,y+=(v[_]+v[M])*x;return m*=3,[g/m,y/m]}var l=function f(v){f.superclass.constructor.call(this,v)};c.extend(l,u),c.augment(l,{getDefaultCfg:function(){return{label:r.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},_renderUI:function(){l.superclass._renderUI.call(this),this.initLabelsCfg();var v=this.addGroup(),b=this.addGroup({elCls:"x-line-group"}),g=this.get("labelRenderer");this.set("labelsGroup",v),this.set("lineGroup",b),this.get("labelRenderer").set("group",v),g.set("group",v),g.set("lineGroup",b)},initLabelsCfg:function(){var v=this,b=new h,g=v.getDefaultLabelCfg(),y=v.get("labelCfg");c.deepMix(g,y.globalCfg||y.cfg),b.set("config",!1),g.labelLine&&b.set("labelLine",g.labelLine),b.set("coord",v.get("coord")),this.set("labelRenderer",b),v.set("label",g)},getDefaultLabelCfg:function(){var v=this,b=v.get("labelCfg").cfg||v.get("labelCfg").globalCfg,g=v.get("geomType"),y=v.get("viewTheme")||r;return g==="polygon"||b&&b.offset<0&&c.indexOf(n,g)===-1?c.deepMix({},v.get("label"),y.innerLabels,b):c.deepMix({},v.get("label"),y.label,b)},getLabelsItems:function(v,b){var g=this,y=[],_=g.get("geom"),M=g.get("coord");g._getLabelCfgs(v,b);var x=g.get("labelItemCfgs");return c.each(v,function(m,S){var P=m[i],A=x[S];if(!A){y.push(null);return}c.isArray(A.text)||(A.text=[A.text]);var O=A.text.length;c.each(A.text,function(R,H){if(c.isNil(R)||R===""){y.push(null);return}var N=g.getLabelPoint(A,m,H);N=c.mix({},A,N),N.textAlign||(N.textAlign=g.getLabelAlign(N,H,O)),_&&(N._id=_._getShapeId(P)+"-glabel-"+H+"-"+N.text),N.coord=M,y.push(N)})}),y},adjustItems:function(v){return c.each(v,function(b){!b||(b.offsetX&&(b.x+=b.offsetX),b.offsetY&&(b.y+=b.offsetY))}),v},drawLines:function(v){var b=this;c.each(v,function(g){!g||g.offset>0&&b.lineToLabel(g)})},lineToLabel:function(){},getLabelPoint:function(v,b,g){var y=this,_=y.get("coord"),M=v.text.length;function x(O,R){return c.isArray(O)&&(v.text.length===1?O.length<=2?O=O[O.length-1]:O=a(O):O=O[R]),O}var m={text:v.text[g]};if(b&&this.get("geomType")==="polygon"){var S=o(b.x,b.y);m.x=S[0],m.y=S[1]}else m.x=x(b.x,g),m.y=x(b.y,g);if(b&&b.nextPoints&&(b.shape==="funnel"||b.shape==="pyramid")){var P=-Infinity;b.nextPoints.forEach(function(O){O=_.convert(O),O.x>P&&(P=O.x)}),m.x=(m.x+P)/2}b.shape==="pyramid"&&!b.nextPoints&&b.points&&b.points.forEach(function(O){O=_.convert(O),(c.isArray(O.x)&&!b.x.includes(O.x)||c.isNumber(O.x)&&b.x!==O.x)&&(m.x=(m.x+O.x)/2)}),v.position&&y.setLabelPosition(m,b,g,v.position);var A=y.getLabelOffset(v,g,M);return v.offsetX&&(A.x+=v.offsetX),v.offsetY&&(A.y+=v.offsetY),y.transLabelPoint(m),m.start={x:m.x,y:m.y},m.x+=A.x,m.y+=A.y,m.color=b.color,m},setLabelPosition:function(){},transLabelPoint:function(v){var b=this,g=b.get("coord"),y=g.applyMatrix(v.x,v.y,1);v.x=y[0],v.y=y[1]},getOffsetVector:function(v){var b=this,g=v.offset||0,y=b.get("coord"),_;return y.isTransposed?_=y.applyMatrix(g,0):_=y.applyMatrix(0,g),_},getDefaultOffset:function(v){var b=this,g=0,y=b.get("coord"),_=b.getOffsetVector(v);y.isTransposed?g=_[0]:g=_[1];var M=this.get("yScale");if(M&&v.point){var x=v.point[M.field];x<0&&(g=g*-1)}return g},getLabelOffset:function(v,b,g){var y=this,_=y.getDefaultOffset(v),M=y.get("coord"),x=M.isTransposed,m=x?"x":"y",S=x?1:-1,P={x:0,y:0};return b>0||g===1?P[m]=_*S:P[m]=_*S*-1,P},getLabelAlign:function(v,b,g){var y=this,_="center",M=y.get("coord");if(M.isTransposed){var x=y.getDefaultOffset(v);x<0?_="right":x===0?_="center":_="left",g>1&&b===0&&(_==="right"?_="left":_==="left"&&(_="right"))}return _},_getLabelValue:function(v,b){c.isArray(b)||(b=[b]);var g=[];return c.each(b,function(y){var _=v[y.field];if(c.isArray(_)){var M=[];c.each(_,function(x){M.push(y.getText(x))}),_=M}else _=y.getText(_);(c.isNil(_)||_==="")&&g.push(null),g.push(_)}),g},_getLabelCfgs:function(v){var b=this,g=this.get("labelCfg"),y=g.scales,_=this.get("label"),M=b.get("viewTheme")||r,x=[];g.globalCfg&&g.globalCfg.type&&b.set("type",g.globalCfg.type),c.each(v,function(m,S){var P={},A=m[i],O=b._getLabelValue(A,y);if(g.callback){var R=y.map(function(K){return A[K.field]});P=g.callback.apply(null,[].concat(R,[m,S]))}if(!P&&P!==0){x.push(null);return}if(c.isString(P)||c.isNumber(P)?P={text:P}:(P.text=P.content||O[0],delete P.content),P=c.mix({},_,g.globalCfg||{},P),m.point=A,P.point=A,P.htmlTemplate&&(P.useHtml=!0,P.text=P.htmlTemplate.call(null,P.text,m,S),delete P.htmlTemplate),P.formatter&&(P.text=P.formatter.call(null,P.text,m,S),delete P.formatter),P.label){var H=P.label;delete P.label,P=c.mix(P,H)}if(P.textStyle){delete P.textStyle.offset;var N=P.textStyle;c.isFunction(N)&&(P.textStyle=N.call(null,P.text,m,S))}P.labelLine&&(P.labelLine=c.mix({},_.labelLine,P.labelLine)),P.textStyle=c.mix({},_.textStyle,M.label.textStyle,P.textStyle),delete P.items,x.push(P)}),this.set("labelItemCfgs",x)},showLabels:function(v,b){var g=this,y=g.get("labelRenderer"),_=g.getLabelsItems(v,b);b=[].concat(b);var M=g.get("type");_=g.adjustItems(_,b),g.drawLines(_),y.set("items",_.filter(function(x,m){return x?!0:(b.splice(m,1),!1)})),M&&(y.set("shapes",b),y.set("type",M),y.set("points",v)),y.set("canvas",this.get("canvas")),y.draw()},destroy:function(){this.get("labelRenderer").destroy(),l.superclass.destroy.call(this)}}),E.exports=l},function(E,T,e){var t=e(5),u=e(0);function s(r,c){var n=r.length;u.isString(r[0])&&(r=r.map(function(l){return c.translate(l)}));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}var h={getDefaultSize:function(){var c=this.get("defaultSize"),n=this.get("viewTheme")||t;if(!c){var i=this.get("coord"),a=this.getXScale(),o=a.values,l=this.get("dataArray"),f;if(a.isLinear&&o.length>1){o.sort();var v=s(o,a);f=(a.max-a.min)/v,o.length>f&&(f=o.length)}else f=o.length;var b=a.range,g=1/f,y=1;if(this.isInCircle()?i.isTransposed&&f>1?y=n.widthRatio.multiplePie:y=n.widthRatio.rose:(a.isLinear&&(g*=b[1]-b[0]),y=n.widthRatio.column),g*=y,this.hasAdjust("dodge")){var _=this._getDodgeCfg(l),M=_.dodgeCount,x=_.dodgeRatio;g=g/M,x>0&&(g=x*g/y)}c=g,this.set("defaultSize",c)}return c},_getDodgeCfg:function(c){var n=this.get("adjusts"),i,a,o=c.length;if(u.each(n,function(v){v.type==="dodge"&&(i=v.dodgeBy,a=v.dodgeRatio)}),i){var l=u.Array.merge(c),f=u.Array.values(l,i);o=f.length}return{dodgeCount:o,dodgeRatio:a}},getDimWidth:function(c){var n=this.get("coord"),i=n.convertPoint({x:0,y:0}),a=n.convertPoint({x:c==="x"?1:0,y:c==="x"?0:1}),o=0;return i&&a&&(o=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))),o},_getWidth:function(){var c=this.get("coord"),n;return this.isInCircle()&&!c.isTransposed?n=(c.endAngle-c.startAngle)*c.radius:n=this.getDimWidth("x"),n},_toNormalizedSize:function(c){var n=this._getWidth();return c/n},_toCoordSize:function(c){var n=this._getWidth();return n*c},getNormalizedSize:function(c){var n=this.getAttrValue("size",c);return u.isNil(n)?n=this.getDefaultSize():n=this._toNormalizedSize(n),n},getSize:function(c){var n=this.getAttrValue("size",c);if(u.isNil(n)){var i=this.getDefaultSize();n=this._toCoordSize(i)}return n}};E.exports=h},function(E,T,e){var t=e(72);E.exports=function(u,s){var h=t(u);if(h&&h[s])return h[s]}},function(E,T){E.exports=function(e){var t=e.get("scaleController")||{};return t.defs}},function(E,T,e){var t=e(0),u=e(52);E.exports=function(s,h){var r,c=h.field,n=h.type,i=t.Array.values(s,c);return n==="linear"?(r=t.Array.getRange(i),h.min<r.min&&(r.min=h.min),h.max>r.max&&(r.max=h.max)):(n==="timeCat"&&(t.each(i,function(a,o){i[o]=u.toTimeStamp(a)}),i.sort(function(a,o){return a-o})),r=i),r}},function(E,T,e){var t=e(1),u=e(7),s=e(37),h=e(50),r=function c(n){c.superclass.constructor.call(this,n)};r.Symbols={circle:function(n,i,a){return[["M",n,i],["m",-a,0],["a",a,a,0,1,0,a*2,0],["a",a,a,0,1,0,-a*2,0]]},square:function(n,i,a){return[["M",n-a,i-a],["L",n+a,i-a],["L",n+a,i+a],["L",n-a,i+a],["Z"]]},diamond:function(n,i,a){return[["M",n-a,i],["L",n,i-a],["L",n+a,i],["L",n,i+a],["Z"]]},triangle:function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i+o],["L",n,i-o],["L",n+a,i+o],["z"]]},"triangle-down":function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i-o],["L",n+a,i-o],["L",n,i+o],["Z"]]}},r.ATTRS={path:null,lineWidth:1},t.extend(r,u),t.augment(r,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius,l=this.getHitLineWidth(),f=l/2+o;return{minX:i-f,minY:a-f,maxX:i+f,maxY:a+f}},_getPath:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius||n.r,l=n.symbol||"circle",f;return t.isFunction(l)?f=l:f=r.Symbols[l],f?f(i,a,o):(console.warn(l+" marker is not supported."),null)},createPath:function(n){var i=this._cfg.segments;if(i&&!this._cfg.hasUpdate){n.beginPath();for(var a=0;a<i.length;a++)i[a].draw(n);return}var o=s.parsePath(this._getPath());n.beginPath();var l;i=[];for(var f=0;f<o.length;f++){var v=o[f];l=new h(v,l,f===o.length-1),i.push(l),l.draw(n)}this._cfg.segments=i,this._cfg.hasUpdate=!1}}),E.exports=r},function(E,T,e){var t=e(1),u=t.vec2;function s(a,o,l,f,v){var b=1-v;return b*b*(b*f+3*v*l)+v*v*(v*a+3*b*o)}function h(a,o,l,f,v){var b=1-v;return 3*(((o-a)*b+2*(l-o)*v)*b+(f-l)*v*v)}function r(a,o,l,f,v,b,g,y,_,M,x){var m,S=.005,P=Infinity,A,O,R,H,N,K,V,k=1e-4,Z=[_,M];for(A=0;A<1;A+=.05)O=[s(a,l,v,g,A),s(o,f,b,y,A)],R=u.squaredDistance(Z,O),R<P&&(m=A,P=R);P=Infinity;for(var X=0;X<32&&!(S<k);X++)K=m-S,V=m+S,O=[s(a,l,v,g,K),s(o,f,b,y,K)],R=u.squaredDistance(Z,O),K>=0&&R<P?(m=K,P=R):(N=[s(a,l,v,g,V),s(o,f,b,y,V)],H=u.squaredDistance(Z,N),V<=1&&H<P?(m=V,P=H):S*=.5);return x&&(x.x=s(a,l,v,g,m),x.y=s(o,f,b,y,m)),Math.sqrt(P)}function c(a,o,l,f){var v=3*a-9*o+9*l-3*f,b=6*o-12*l+6*f,g=3*l-3*f,y=[],_,M,x;if(t.isNumberEqual(v,0))t.isNumberEqual(b,0)||(_=-g/b,_>=0&&_<=1&&y.push(_));else{var m=b*b-4*v*g;t.isNumberEqual(m,0)?y.push(-b/(2*v)):m>0&&(x=Math.sqrt(m),_=(-b+x)/(2*v),M=(-b-x)/(2*v),_>=0&&_<=1&&y.push(_),M>=0&&M<=1&&y.push(M))}return y}function n(a,o,l,f,v){var b=-3*o+9*l-9*f+3*v,g=a*b+6*o-12*l+6*f;return a*g-3*o+3*l}function i(a,o,l,f,v,b,g,y,_){t.isNil(_)&&(_=1),_=_>1?1:_<0?0:_;for(var M=_/2,x=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],S=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,A=0;A<x;A++){var O=M*m[A]+M,R=n(O,a,l,v,g),H=n(O,o,f,b,y),N=R*R+H*H;P+=S[A]*Math.sqrt(N)}return M*P}E.exports={at:s,derivativeAt:h,projectPoint:function(o,l,f,v,b,g,y,_,M,x){var m={};return r(o,l,f,v,b,g,y,_,M,x,m),m},pointDistance:r,extrema:c,len:i}},function(E,T,e){var t=e(48),u=e(144),s=e(75),h=e(47);E.exports={line:function(c,n,i,a,o,l,f){var v=t.box(c,n,i,a,o);if(!this.box(v.minX,v.maxX,v.minY,v.maxY,l,f))return!1;var b=t.pointDistance(c,n,i,a,l,f);return isNaN(b)?!1:b<=o/2},polyline:function(c,n,i,a){var o=c.length-1;if(o<1)return!1;for(var l=0;l<o;l++){var f=c[l][0],v=c[l][1],b=c[l+1][0],g=c[l+1][1];if(this.line(f,v,b,g,n,i,a))return!0}return!1},cubicline:function(c,n,i,a,o,l,f,v,b,g,y){return s.pointDistance(c,n,i,a,o,l,f,v,g,y)<=b/2},quadraticline:function(c,n,i,a,o,l,f,v,b){return u.pointDistance(c,n,i,a,o,l,v,b)<=f/2},arcline:function(c,n,i,a,o,l,f,v,b){return h.pointDistance(c,n,i,a,o,l,v,b)<=f/2},rect:function(c,n,i,a,o,l){return c<=o&&o<=c+i&&n<=l&&l<=n+a},circle:function(c,n,i,a,o){return Math.pow(a-c,2)+Math.pow(o-n,2)<=Math.pow(i,2)},box:function(c,n,i,a,o,l){return c<=o&&o<=n&&i<=l&&l<=a}}},function(E,T,e){var t=e(150),u=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,s=new RegExp("([a-z])["+u+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+u+"]*,?["+u+"]*)+)","ig"),h=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+u+"]*,?["+u+"]*","ig"),r=function(St){if(!St)return null;if(typeof St==typeof[])return St;var xt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Ot=[];return String(St).replace(s,function(it,At,z){var q=[],mt=At.toLowerCase();if(z.replace(h,function(et,st){st&&q.push(+st)}),mt==="m"&&q.length>2&&(Ot.push([At].concat(q.splice(0,2))),mt="l",At=At==="m"?"l":"L"),mt==="o"&&q.length===1&&Ot.push([At,q[0]]),mt==="r")Ot.push([At].concat(q));else for(;q.length>=xt[mt]&&(Ot.push([At].concat(q.splice(0,xt[mt]))),!!xt[mt]););}),Ot},c=function(St,xt){for(var Ot=[],it=0,At=St.length;At-2*!xt>it;it+=2){var z=[{x:+St[it-2],y:+St[it-1]},{x:+St[it],y:+St[it+1]},{x:+St[it+2],y:+St[it+3]},{x:+St[it+4],y:+St[it+5]}];xt?it?At-4===it?z[3]={x:+St[0],y:+St[1]}:At-2===it&&(z[2]={x:+St[0],y:+St[1]},z[3]={x:+St[2],y:+St[3]}):z[0]={x:+St[At-2],y:+St[At-1]}:At-4===it?z[3]=z[2]:it||(z[0]={x:+St[it],y:+St[it+1]}),Ot.push(["C",(-z[0].x+6*z[1].x+z[2].x)/6,(-z[0].y+6*z[1].y+z[2].y)/6,(z[1].x+6*z[2].x-z[3].x)/6,(z[1].y+6*z[2].y-z[3].y)/6,z[2].x,z[2].y])}return Ot},n=function(St,xt,Ot,it,At){var z=[];if(At===null&&it===null&&(it=Ot),St=+St,xt=+xt,Ot=+Ot,it=+it,At!==null){var q=Math.PI/180,mt=St+Ot*Math.cos(-it*q),et=St+Ot*Math.cos(-At*q),st=xt+Ot*Math.sin(-it*q),bt=xt+Ot*Math.sin(-At*q);z=[["M",mt,st],["A",Ot,Ot,0,+(At-it>180),0,et,bt]]}else z=[["M",St,xt],["m",0,-it],["a",Ot,it,0,1,1,0,2*it],["a",Ot,it,0,1,1,0,-2*it],["z"]];return z},i=function(St){if(St=r(St),!St||!St.length)return[["M",0,0]];var xt=[],Ot=0,it=0,At=0,z=0,q=0,mt,et;St[0][0]==="M"&&(Ot=+St[0][1],it=+St[0][2],At=Ot,z=it,q++,xt[0]=["M",Ot,it]);for(var st=St.length===3&&St[0][0]==="M"&&St[1][0].toUpperCase()==="R"&&St[2][0].toUpperCase()==="Z",bt,Y,rt=q,ot=St.length;rt<ot;rt++){if(xt.push(bt=[]),Y=St[rt],mt=Y[0],mt!==mt.toUpperCase())switch(bt[0]=mt.toUpperCase(),bt[0]){case"A":bt[1]=Y[1],bt[2]=Y[2],bt[3]=Y[3],bt[4]=Y[4],bt[5]=Y[5],bt[6]=+Y[6]+Ot,bt[7]=+Y[7]+it;break;case"V":bt[1]=+Y[1]+it;break;case"H":bt[1]=+Y[1]+Ot;break;case"R":et=[Ot,it].concat(Y.slice(1));for(var $=2,Pt=et.length;$<Pt;$++)et[$]=+et[$]+Ot,et[++$]=+et[$]+it;xt.pop(),xt=xt.concat(c(et,st));break;case"O":xt.pop(),et=n(Ot,it,Y[1],Y[2]),et.push(et[0]),xt=xt.concat(et);break;case"U":xt.pop(),xt=xt.concat(n(Ot,it,Y[1],Y[2],Y[3])),bt=["U"].concat(xt[xt.length-1].slice(-2));break;case"M":At=+Y[1]+Ot,z=+Y[2]+it;break;default:for(var yt=1,Ft=Y.length;yt<Ft;yt++)bt[yt]=+Y[yt]+(yt%2?Ot:it)}else if(mt==="R")et=[Ot,it].concat(Y.slice(1)),xt.pop(),xt=xt.concat(c(et,st)),bt=["R"].concat(Y.slice(-2));else if(mt==="O")xt.pop(),et=n(Ot,it,Y[1],Y[2]),et.push(et[0]),xt=xt.concat(et);else if(mt==="U")xt.pop(),xt=xt.concat(n(Ot,it,Y[1],Y[2],Y[3])),bt=["U"].concat(xt[xt.length-1].slice(-2));else for(var Qt=0,ne=Y.length;Qt<ne;Qt++)bt[Qt]=Y[Qt];if(mt=mt.toUpperCase(),mt!=="O")switch(bt[0]){case"Z":Ot=+At,it=+z;break;case"H":Ot=bt[1];break;case"V":it=bt[1];break;case"M":At=bt[bt.length-2],z=bt[bt.length-1];break;default:Ot=bt[bt.length-2],it=bt[bt.length-1]}}return xt},a=function(St,xt,Ot,it){return[St,xt,Ot,it,Ot,it]},o=function(St,xt,Ot,it,At,z){var q=1/3,mt=2/3;return[q*St+mt*Ot,q*xt+mt*it,q*At+mt*Ot,q*z+mt*it,At,z]},l=function Dt(St,xt,Ot,it,At,z,q,mt,et,st){Ot===it&&(Ot+=1);var bt=Math.PI*120/180,Y=Math.PI/180*(+At||0),rt=[],ot,$,Pt,yt,Ft,Qt=function(ae,xe,qe){var zn=ae*Math.cos(qe)-xe*Math.sin(qe),ar=ae*Math.sin(qe)+xe*Math.cos(qe);return{x:zn,y:ar}};if(st)$=st[0],Pt=st[1],yt=st[2],Ft=st[3];else{ot=Qt(St,xt,-Y),St=ot.x,xt=ot.y,ot=Qt(mt,et,-Y),mt=ot.x,et=ot.y,St===mt&&xt===et&&(mt+=1,et+=1);var ne=(St-mt)/2,Wt=(xt-et)/2,$t=ne*ne/(Ot*Ot)+Wt*Wt/(it*it);$t>1&&($t=Math.sqrt($t),Ot=$t*Ot,it=$t*it);var De=Ot*Ot,Je=it*it,Qe=(z===q?-1:1)*Math.sqrt(Math.abs((De*Je-De*Wt*Wt-Je*ne*ne)/(De*Wt*Wt+Je*ne*ne)));yt=Qe*Ot*Wt/it+(St+mt)/2,Ft=Qe*-it*ne/Ot+(xt+et)/2,$=Math.asin(((xt-Ft)/it).toFixed(9)),Pt=Math.asin(((et-Ft)/it).toFixed(9)),$=St<yt?Math.PI-$:$,Pt=mt<yt?Math.PI-Pt:Pt,$<0&&($=Math.PI*2+$),Pt<0&&(Pt=Math.PI*2+Pt),q&&$>Pt&&($=$-Math.PI*2),!q&&Pt>$&&(Pt=Pt-Math.PI*2)}var de=Pt-$;if(Math.abs(de)>bt){var ue=Pt,Ne=mt,cn=et;Pt=$+bt*(q&&Pt>$?1:-1),mt=yt+Ot*Math.cos(Pt),et=Ft+it*Math.sin(Pt),rt=Dt(mt,et,Ot,it,At,0,q,Ne,cn,[Pt,ue,yt,Ft])}de=Pt-$;var Fn=Math.cos($),wn=Math.sin($),en=Math.cos(Pt),tn=Math.sin(Pt),xn=Math.tan(de/4),Bn=4/3*Ot*xn,vr=4/3*it*xn,li=[St,xt],Me=[St+Bn*wn,xt-vr*Fn],Pe=[mt+Bn*tn,et-vr*en],te=[mt,et];if(Me[0]=2*li[0]-Me[0],Me[1]=2*li[1]-Me[1],st)return[Me,Pe,te].concat(rt);rt=[Me,Pe,te].concat(rt).join().split(",");for(var ge=[],Ht=0,re=rt.length;Ht<re;Ht++)ge[Ht]=Ht%2?Qt(rt[Ht-1],rt[Ht],Y).y:Qt(rt[Ht],rt[Ht+1],Y).x;return ge},f=function(St,xt){var Ot=i(St),it=xt&&i(xt),At={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},q=[],mt=[],et="",st="",bt,Y=function(Wt,$t,De){var Je,Qe;if(!Wt)return["C",$t.x,$t.y,$t.x,$t.y,$t.x,$t.y];switch(!(Wt[0]in{T:1,Q:1})&&($t.qx=$t.qy=null),Wt[0]){case"M":$t.X=Wt[1],$t.Y=Wt[2];break;case"A":Wt=["C"].concat(l.apply(0,[$t.x,$t.y].concat(Wt.slice(1))));break;case"S":De==="C"||De==="S"?(Je=$t.x*2-$t.bx,Qe=$t.y*2-$t.by):(Je=$t.x,Qe=$t.y),Wt=["C",Je,Qe].concat(Wt.slice(1));break;case"T":De==="Q"||De==="T"?($t.qx=$t.x*2-$t.qx,$t.qy=$t.y*2-$t.qy):($t.qx=$t.x,$t.qy=$t.y),Wt=["C"].concat(o($t.x,$t.y,$t.qx,$t.qy,Wt[1],Wt[2]));break;case"Q":$t.qx=Wt[1],$t.qy=Wt[2],Wt=["C"].concat(o($t.x,$t.y,Wt[1],Wt[2],Wt[3],Wt[4]));break;case"L":Wt=["C"].concat(a($t.x,$t.y,Wt[1],Wt[2]));break;case"H":Wt=["C"].concat(a($t.x,$t.y,Wt[1],$t.y));break;case"V":Wt=["C"].concat(a($t.x,$t.y,$t.x,Wt[1]));break;case"Z":Wt=["C"].concat(a($t.x,$t.y,$t.X,$t.Y));break;default:break}return Wt},rt=function(Wt,$t){if(Wt[$t].length>7){Wt[$t].shift();for(var De=Wt[$t];De.length;)q[$t]="A",it&&(mt[$t]="A"),Wt.splice($t++,0,["C"].concat(De.splice(0,6)));Wt.splice($t,1),bt=Math.max(Ot.length,it&&it.length||0)}},ot=function(Wt,$t,De,Je,Qe){Wt&&$t&&Wt[Qe][0]==="M"&&$t[Qe][0]!=="M"&&($t.splice(Qe,0,["M",Je.x,Je.y]),De.bx=0,De.by=0,De.x=Wt[Qe][1],De.y=Wt[Qe][2],bt=Math.max(Ot.length,it&&it.length||0))};bt=Math.max(Ot.length,it&&it.length||0);for(var $=0;$<bt;$++){Ot[$]&&(et=Ot[$][0]),et!=="C"&&(q[$]=et,$&&(st=q[$-1])),Ot[$]=Y(Ot[$],At,st),q[$]!=="A"&&et==="C"&&(q[$]="C"),rt(Ot,$),it&&(it[$]&&(et=it[$][0]),et!=="C"&&(mt[$]=et,$&&(st=mt[$-1])),it[$]=Y(it[$],z,st),mt[$]!=="A"&&et==="C"&&(mt[$]="C"),rt(it,$)),ot(Ot,it,At,z,$),ot(it,Ot,z,At,$);var Pt=Ot[$],yt=it&&it[$],Ft=Pt.length,Qt=it&&yt.length;At.x=Pt[Ft-2],At.y=Pt[Ft-1],At.bx=parseFloat(Pt[Ft-4])||At.x,At.by=parseFloat(Pt[Ft-3])||At.y,z.bx=it&&(parseFloat(yt[Qt-4])||z.x),z.by=it&&(parseFloat(yt[Qt-3])||z.y),z.x=it&&yt[Qt-2],z.y=it&&yt[Qt-1]}return it?[Ot,it]:Ot},v=/,?([a-z]),?/gi,b=function(St){return St.join(",").replace(v,"$1")},g=function(St,xt,Ot,it,At){var z=-3*xt+9*Ot-9*it+3*At,q=St*z+6*xt-12*Ot+6*it;return St*q-3*xt+3*Ot},y=function(St,xt,Ot,it,At,z,q,mt,et){et===null&&(et=1),et=et>1?1:et<0?0:et;for(var st=et/2,bt=12,Y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],rt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ot=0,$=0;$<bt;$++){var Pt=st*Y[$]+st,yt=g(Pt,St,Ot,At,q),Ft=g(Pt,xt,it,z,mt),Qt=yt*yt+Ft*Ft;ot+=rt[$]*Math.sqrt(Qt)}return st*ot},_=function(St,xt,Ot,it,At,z,q,mt){for(var et=[],st=[[],[]],bt,Y,rt,ot,$=0;$<2;++$){if($===0?(Y=6*St-12*Ot+6*At,bt=-3*St+9*Ot-9*At+3*q,rt=3*Ot-3*St):(Y=6*xt-12*it+6*z,bt=-3*xt+9*it-9*z+3*mt,rt=3*it-3*xt),Math.abs(bt)<1e-12){if(Math.abs(Y)<1e-12)continue;ot=-rt/Y,ot>0&&ot<1&&et.push(ot);continue}var Pt=Y*Y-4*rt*bt,yt=Math.sqrt(Pt);if(!(Pt<0)){var Ft=(-Y+yt)/(2*bt);Ft>0&&Ft<1&&et.push(Ft);var Qt=(-Y-yt)/(2*bt);Qt>0&&Qt<1&&et.push(Qt)}}for(var ne=et.length,Wt=ne,$t;ne--;)ot=et[ne],$t=1-ot,st[0][ne]=$t*$t*$t*St+3*$t*$t*ot*Ot+3*$t*ot*ot*At+ot*ot*ot*q,st[1][ne]=$t*$t*$t*xt+3*$t*$t*ot*it+3*$t*ot*ot*z+ot*ot*ot*mt;return st[0][Wt]=St,st[1][Wt]=xt,st[0][Wt+1]=q,st[1][Wt+1]=mt,st[0].length=st[1].length=Wt+2,{min:{x:Math.min.apply(0,st[0]),y:Math.min.apply(0,st[1])},max:{x:Math.max.apply(0,st[0]),y:Math.max.apply(0,st[1])}}},M=function(St,xt,Ot,it,At,z,q,mt){if(!(Math.max(St,Ot)<Math.min(At,q)||Math.min(St,Ot)>Math.max(At,q)||Math.max(xt,it)<Math.min(z,mt)||Math.min(xt,it)>Math.max(z,mt))){var et=(St*it-xt*Ot)*(At-q)-(St-Ot)*(At*mt-z*q),st=(St*it-xt*Ot)*(z-mt)-(xt-it)*(At*mt-z*q),bt=(St-Ot)*(z-mt)-(xt-it)*(At-q);if(!!bt){var Y=et/bt,rt=st/bt,ot=+Y.toFixed(2),$=+rt.toFixed(2);if(!(ot<+Math.min(St,Ot).toFixed(2)||ot>+Math.max(St,Ot).toFixed(2)||ot<+Math.min(At,q).toFixed(2)||ot>+Math.max(At,q).toFixed(2)||$<+Math.min(xt,it).toFixed(2)||$>+Math.max(xt,it).toFixed(2)||$<+Math.min(z,mt).toFixed(2)||$>+Math.max(z,mt).toFixed(2)))return{x:Y,y:rt}}}},x=function(St,xt,Ot){return xt>=St.x&&xt<=St.x+St.width&&Ot>=St.y&&Ot<=St.y+St.height},m=function(St,xt,Ot,it,At){if(At)return[["M",+St+ +At,xt],["l",Ot-At*2,0],["a",At,At,0,0,1,At,At],["l",0,it-At*2],["a",At,At,0,0,1,-At,At],["l",At*2-Ot,0],["a",At,At,0,0,1,-At,-At],["l",0,At*2-it],["a",At,At,0,0,1,At,-At],["z"]];var z=[["M",St,xt],["l",Ot,0],["l",0,it],["l",-Ot,0],["z"]];return z.parsePathArray=b,z},S=function(St,xt,Ot,it){return St===null&&(St=xt=Ot=it=0),xt===null&&(xt=St.y,Ot=St.width,it=St.height,St=St.x),{x:St,y:xt,width:Ot,w:Ot,height:it,h:it,x2:St+Ot,y2:xt+it,cx:St+Ot/2,cy:xt+it/2,r1:Math.min(Ot,it)/2,r2:Math.max(Ot,it)/2,r0:Math.sqrt(Ot*Ot+it*it)/2,path:m(St,xt,Ot,it),vb:[St,xt,Ot,it].join(" ")}},P=function(St,xt){return St=S(St),xt=S(xt),x(xt,St.x,St.y)||x(xt,St.x2,St.y)||x(xt,St.x,St.y2)||x(xt,St.x2,St.y2)||x(St,xt.x,xt.y)||x(St,xt.x2,xt.y)||x(St,xt.x,xt.y2)||x(St,xt.x2,xt.y2)||(St.x<xt.x2&&St.x>xt.x||xt.x<St.x2&&xt.x>St.x)&&(St.y<xt.y2&&St.y>xt.y||xt.y<St.y2&&xt.y>St.y)},A=function(St,xt,Ot,it,At,z,q,mt){t.isArray(St)||(St=[St,xt,Ot,it,At,z,q,mt]);var et=_.apply(null,St);return S(et.min.x,et.min.y,et.max.x-et.min.x,et.max.y-et.min.y)},O=function(St,xt,Ot,it,At,z,q,mt,et){var st=1-et,bt=Math.pow(st,3),Y=Math.pow(st,2),rt=et*et,ot=rt*et,$=bt*St+Y*3*et*Ot+st*3*et*et*At+ot*q,Pt=bt*xt+Y*3*et*it+st*3*et*et*z+ot*mt,yt=St+2*et*(Ot-St)+rt*(At-2*Ot+St),Ft=xt+2*et*(it-xt)+rt*(z-2*it+xt),Qt=Ot+2*et*(At-Ot)+rt*(q-2*At+Ot),ne=it+2*et*(z-it)+rt*(mt-2*z+it),Wt=st*St+et*Ot,$t=st*xt+et*it,De=st*At+et*q,Je=st*z+et*mt,Qe=90-Math.atan2(yt-Qt,Ft-ne)*180/Math.PI;return{x:$,y:Pt,m:{x:yt,y:Ft},n:{x:Qt,y:ne},start:{x:Wt,y:$t},end:{x:De,y:Je},alpha:Qe}},R=function(St,xt,Ot){var it=A(St),At=A(xt);if(!P(it,At))return Ot?0:[];for(var z=y.apply(0,St),q=y.apply(0,xt),mt=~~(z/8),et=~~(q/8),st=[],bt=[],Y={},rt=Ot?0:[],ot=0;ot<mt+1;ot++){var $=O.apply(0,St.concat(ot/mt));st.push({x:$.x,y:$.y,t:ot/mt})}for(var Pt=0;Pt<et+1;Pt++){var yt=O.apply(0,xt.concat(Pt/et));bt.push({x:yt.x,y:yt.y,t:Pt/et})}for(var Ft=0;Ft<mt;Ft++)for(var Qt=0;Qt<et;Qt++){var ne=st[Ft],Wt=st[Ft+1],$t=bt[Qt],De=bt[Qt+1],Je=Math.abs(Wt.x-ne.x)<.001?"y":"x",Qe=Math.abs(De.x-$t.x)<.001?"y":"x",de=M(ne.x,ne.y,Wt.x,Wt.y,$t.x,$t.y,De.x,De.y);if(de){if(Y[de.x.toFixed(4)]===de.y.toFixed(4))continue;Y[de.x.toFixed(4)]=de.y.toFixed(4);var ue=ne.t+Math.abs((de[Je]-ne[Je])/(Wt[Je]-ne[Je]))*(Wt.t-ne.t),Ne=$t.t+Math.abs((de[Qe]-$t[Qe])/(De[Qe]-$t[Qe]))*(De.t-$t.t);ue>=0&&ue<=1&&Ne>=0&&Ne<=1&&(Ot?rt++:rt.push({x:de.x,y:de.y,t1:ue,t2:Ne}))}}return rt},H=function(St,xt,Ot){St=f(St),xt=f(xt);for(var it,At,z,q,mt,et,st,bt,Y,rt,ot=Ot?0:[],$=0,Pt=St.length;$<Pt;$++){var yt=St[$];if(yt[0]==="M")it=mt=yt[1],At=et=yt[2];else{yt[0]==="C"?(Y=[it,At].concat(yt.slice(1)),it=Y[6],At=Y[7]):(Y=[it,At,it,At,mt,et,mt,et],it=mt,At=et);for(var Ft=0,Qt=xt.length;Ft<Qt;Ft++){var ne=xt[Ft];if(ne[0]==="M")z=st=ne[1],q=bt=ne[2];else{ne[0]==="C"?(rt=[z,q].concat(ne.slice(1)),z=rt[6],q=rt[7]):(rt=[z,q,z,q,st,bt,st,bt],z=st,q=bt);var Wt=R(Y,rt,Ot);if(Ot)ot+=Wt;else{for(var $t=0,De=Wt.length;$t<De;$t++)Wt[$t].segment1=$,Wt[$t].segment2=Ft,Wt[$t].bez1=Y,Wt[$t].bez2=rt;ot=ot.concat(Wt)}}}}}return ot},N=function(St,xt){return H(St,xt)};function K(Dt,St){var xt=[],Ot=[];function it(At,z){if(At.length===1)xt.push(At[0]),Ot.push(At[0]);else{for(var q=[],mt=0;mt<At.length-1;mt++)mt===0&&xt.push(At[0]),mt===At.length-2&&Ot.push(At[mt+1]),q[mt]=[(1-z)*At[mt][0]+z*At[mt+1][0],(1-z)*At[mt][1]+z*At[mt+1][1]];it(q,z)}}return Dt.length&&it(Dt,St),{left:xt,right:Ot.reverse()}}function V(Dt,St,xt){var Ot=[[Dt[1],Dt[2]]];xt=xt||2;var it=[];St[0]==="A"?(Ot.push(St[6]),Ot.push(St[7])):St[0]==="C"?(Ot.push([St[1],St[2]]),Ot.push([St[3],St[4]]),Ot.push([St[5],St[6]])):St[0]==="S"||St[0]==="Q"?(Ot.push([St[1],St[2]]),Ot.push([St[3],St[4]])):Ot.push([St[1],St[2]]);for(var At=Ot,z=1/xt,q=0;q<xt-1;q++){var mt=z/(1-z*q),et=K(At,mt);it.push(et.left),At=et.right}it.push(At);var st=it.map(function(bt){var Y=[];return bt.length===4&&(Y.push("C"),Y=Y.concat(bt[2])),bt.length>=3&&(bt.length===3&&Y.push("Q"),Y=Y.concat(bt[1])),bt.length===2&&Y.push("L"),Y=Y.concat(bt[bt.length-1]),Y});return st}var k=function(St,xt,Ot){if(Ot===1)return[[].concat(St)];var it=[];if(xt[0]==="L"||xt[0]==="C"||xt[0]==="Q")it=it.concat(V(St,xt,Ot));else{var At=[].concat(St);At[0]==="M"&&(At[0]="L");for(var z=0;z<=Ot-1;z++)it.push(At)}return it},Z=function(St,xt){if(St.length===1)return St;var Ot=St.length-1,it=xt.length-1,At=Ot/it,z=[];if(St.length===1&&St[0][0]==="M"){for(var q=0;q<it-Ot;q++)St.push(St[0]);return St}for(var mt=0;mt<it;mt++){var et=Math.floor(At*mt);z[et]=(z[et]||0)+1}var st=z.reduce(function(bt,Y,rt){return rt===Ot?bt.concat(St[Ot]):bt.concat(k(St[rt],St[rt+1],Y))},[]);return st.unshift(St[0]),(xt[it]==="Z"||xt[it]==="z")&&st.push("Z"),st},X=function(St,xt){if(St.length!==xt.length)return!1;var Ot=!0;return t.each(St,function(it,At){if(it!==xt[At])return Ot=!1,!1}),Ot};function at(Dt,St,xt){var Ot=null,it=xt;return St<it&&(it=St,Ot="add"),Dt<it&&(it=Dt,Ot="del"),{type:Ot,min:it}}var pt=function(St,xt){var Ot=St.length,it=xt.length,At,z,q=0;if(Ot===0||it===0)return null;for(var mt=[],et=0;et<=Ot;et++)mt[et]=[],mt[et][0]={min:et};for(var st=0;st<=it;st++)mt[0][st]={min:st};for(var bt=1;bt<=Ot;bt++){At=St[bt-1];for(var Y=1;Y<=it;Y++){z=xt[Y-1],X(At,z)?q=0:q=1;var rt=mt[bt-1][Y].min+1,ot=mt[bt][Y-1].min+1,$=mt[bt-1][Y-1].min+q;mt[bt][Y]=at(rt,ot,$)}}return mt},gt=function(St,xt){var Ot=pt(St,xt),it=St.length,At=xt.length,z=[],q=1,mt=1;if(Ot[it][At]!==it){for(var et=1;et<=it;et++){var st=Ot[et][et].min;mt=et;for(var bt=q;bt<=At;bt++)Ot[et][bt].min<st&&(st=Ot[et][bt].min,mt=bt);q=mt,Ot[et][q].type&&z.push({index:et-1,type:Ot[et][q].type})}for(var Y=z.length-1;Y>=0;Y--)q=z[Y].index,z[Y].type==="add"?St.splice(q,0,[].concat(St[q])):St.splice(q,1)}it=St.length;var rt=At-it;if(it<At)for(var ot=0;ot<rt;ot++)St[it-1][0]==="z"||St[it-1][0]==="Z"?St.splice(it-2,0,St[it-2]):St.push(St[it-1]),it+=1;return St};function ft(Dt,St,xt){for(var Ot=[].concat(Dt),it,At=1/(xt+1),z=Rt(St)[0],q=1;q<=xt;q++)At*=q,it=Math.floor(Dt.length*At),it===0?Ot.unshift([z[0]*At+Dt[it][0]*(1-At),z[1]*At+Dt[it][1]*(1-At)]):Ot.splice(it,0,[z[0]*At+Dt[it][0]*(1-At),z[1]*At+Dt[it][1]*(1-At)]);return Ot}function Rt(Dt){var St=[];switch(Dt[0]){case"M":St.push([Dt[1],Dt[2]]);break;case"L":St.push([Dt[1],Dt[2]]);break;case"A":St.push([Dt[6],Dt[7]]);break;case"Q":St.push([Dt[3],Dt[4]]),St.push([Dt[1],Dt[2]]);break;case"T":St.push([Dt[1],Dt[2]]);break;case"C":St.push([Dt[5],Dt[6]]),St.push([Dt[1],Dt[2]]),St.push([Dt[3],Dt[4]]);break;case"S":St.push([Dt[3],Dt[4]]),St.push([Dt[1],Dt[2]]);break;case"H":St.push([Dt[1],Dt[1]]);break;case"V":St.push([Dt[1],Dt[1]]);break;default:}return St}var Nt=function(St,xt){if(St.length<=1)return St;for(var Ot,it=0;it<xt.length;it++)if(St[it][0]!==xt[it][0])switch(Ot=Rt(St[it]),xt[it][0]){case"M":St[it]=["M"].concat(Ot[0]);break;case"L":St[it]=["L"].concat(Ot[0]);break;case"A":St[it]=[].concat(xt[it]),St[it][6]=Ot[0][0],St[it][7]=Ot[0][1];break;case"Q":if(Ot.length<2)if(it>0)Ot=ft(Ot,St[it-1],1);else{St[it]=xt[it];break}St[it]=["Q"].concat(Ot.reduce(function(At,z){return At.concat(z)},[]));break;case"T":St[it]=["T"].concat(Ot[0]);break;case"C":if(Ot.length<3)if(it>0)Ot=ft(Ot,St[it-1],2);else{St[it]=xt[it];break}St[it]=["C"].concat(Ot.reduce(function(At,z){return At.concat(z)},[]));break;case"S":if(Ot.length<2)if(it>0)Ot=ft(Ot,St[it-1],1);else{St[it]=xt[it];break}St[it]=["S"].concat(Ot.reduce(function(At,z){return At.concat(z)},[]));break;default:St[it]=xt[it]}return St};E.exports={parsePathString:r,parsePathArray:b,pathTocurve:f,pathToAbsolute:i,catmullRomToBezier:c,rectPath:m,fillPath:Z,fillPathByDiff:gt,formatPath:Nt,intersection:N}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMatrixArrayType=h,T.toRadian=c,T.equals=n;var t=T.EPSILON=1e-6,u=T.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,s=T.RANDOM=Math.random;function h(i){T.ARRAY_TYPE=u=i}var r=Math.PI/180;function c(i){return i*r}function n(i,a){return Math.abs(i-a)<=t*Math.max(1,Math.abs(i),Math.abs(a))}},function(E,T,e){var t=e(6),u=e(4),s=e(2);E.exports=function(r,c){for(var n=[],i={},a=0;a<r.length;a++){var o=r[a],l=o[c];t(l)||(u(l)||(l=[l]),s(l,function(f){i[f]||(n.push(f),i[f]=!0)}))}return n}},function(E,T,e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u=e(4),s=function h(r){if((typeof r=="undefined"?"undefined":t(r))!=="object"||r===null)return r;var c=void 0;if(u(r)){c=[];for(var n=0,i=r.length;n<i;n++)t(r[n])==="object"&&r[n]!=null?c[n]=h(r[n]):c[n]=r[n]}else{c={};for(var a in r)t(r[a])==="object"&&r[a]!=null?c[a]=h(r[a]):c[a]=r[a]}return c};E.exports=s},function(E,T,e){var t=e(40),u=e(4),s=5;function h(c,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];l!==null&&t(l)?(t(c[o])||(c[o]={}),i<a?h(c[o],l,i+1,a):c[o]=n[o]):u(l)?(c[o]=[],c[o]=c[o].concat(l)):l!==void 0&&(c[o]=l)}}var r=function(){for(var n=new Array(arguments.length),i=n.length,a=0;a<i;a++)n[a]=arguments[a];for(var o=n[0],l=1;l<i;l++)h(o,n[l]);return o};E.exports=r},function(E,T,e){var t=e(2),u=e(21),s=function(r,c){if(!u(r))return r;var n=[];return t(r,function(i,a){c(i,a)&&n.push(i)}),n};E.exports=s},function(E,T,e){var t=e(86),u=e(21),s=e(15),h=function r(c,n){if(c===n)return!0;if(!c||!n||s(c)||s(n))return!1;if(u(c)||u(n)){if(c.length!==n.length)return!1;for(var i=!0,a=0;a<c.length&&(i=r(c[a],n[a]),!!i);a++);return i}if(t(c)||t(n)){var o=Object.keys(c),l=Object.keys(n);if(o.length!==l.length)return!1;for(var f=!0,v=0;v<o.length&&(f=r(c[o[v]],n[o[v]]),!!f);v++);return f}return!1};E.exports=h},function(E,T){var e=function(u,s,h){return u<s?s:u>h?h:u};E.exports=e},function(E,T,e){var t=e(348);t.translate=function(u,s,h){var r=new Array(9);return t.fromTranslation(r,h),t.multiply(u,r,s)},t.rotate=function(u,s,h){var r=new Array(9);return t.fromRotation(r,h),t.multiply(u,r,s)},t.scale=function(u,s,h){var r=new Array(9);return t.fromScaling(r,h),t.multiply(u,r,s)},E.exports=t},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=function(s){return(typeof s=="undefined"?"undefined":e(s))==="object"&&s!==null};E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",GuideRegionFilter:"deleteTypedGuide",GuideDataMarker:"deleteTypedGuide",GuideDataRegion:"deleteTypedGuide",Facet:"deleteFacet"},u={merge:function(h,r,c,n){this.mergeDelete(h,r,c),this.mergeUpdate(h,n)},mergeDelete:function(h,r,c){var n=this;Object.keys(r).forEach(function(i){var a=t[c[i].name],o=h;c[i].viewId&&(o=h.views[c[i].viewId]),n[a]&&n[a](o,i,c[i].parentInfo.id)})},deleteAxis:function(h,r){!h||delete h.axises[r]},deleteTooltip:function(h){!h||delete h.tooltip},deleteCoord:function(h){!h||delete h.coord},deleteLegend:function(h,r){!h||delete h.legends[r]},deleteGuide:function(h){!h||delete h.guide},deleteGeom:function(h,r){!h||!h.geoms||delete h.geoms[r]},deleteLabel:function(h,r,c){!h||!h.geoms||!h.geoms[c]||delete h.geoms[c].label},deleteFacet:function(h){!h||delete h.facet},deleteTypedGuide:function(h,r){!h||!h.guide||delete h.guide.elements[r]},deleteView:function(h,r){!h||delete h.views[r]},mergeUpdate:function(h,r){this.mergeChart(h,r),this.mergeAxises(h,r),this.mergeCoord(h,r),this.mergeGeoms(h.geoms,r),this.mergeLegends(h.legends,r),this.mergeTooltip(h,r),this.mergeViews(h.views,r),this.mergeGuide(h.guide,r)},mergeChart:function(h,r){h.chart&&h.chart.updateProps&&(h.chart.props=h.chart.updateProps),r&&delete h.chart.g2Instance},mergeAxises:function(h,r){var c=h.axises;if(!c!=null)for(var n in c)c[n]&&c[n].updateProps&&(c[n].props=c[n].updateProps),r&&delete c[n].g2Instance},mergeTooltip:function(h,r){!h.tooltip||(r&&delete h.tooltip.g2Instance,h.tooltip.updateProps&&(h.tooltip.props=h.tooltip.updateProps))},mergeCoord:function(h,r){!h.coord||(r&&delete h.coord.g2Instance,h.coord.updateProps&&(h.coord.props=h.coord.updateProps))},mergeLegends:function(h,r){if(!!h){for(var c in h)if(h[c]){var n=h[c];r&&delete n.g2Instance,n.updateProps&&(n.props=n.updateProps)}}},mergeGeoms:function(h,r){if(h!=null)for(var c in h)h[c]&&(r&&(delete h[c].g2Instance,h[c].label&&h[c].label.g2Instance&&(h[c].label.updateProps&&(h[c].label.props=h[c].label.updateProps),delete h[c].label.g2Instance)),h[c].updateProps&&(h[c].props=h[c].updateProps))},mergeGuide:function(h,r){if(h!=null){var c=h.elements;for(var n in c)c[n]&&(r&&delete c[n].g2Instance,c[n].updateProps&&(c[n].props=c[n].updateProps))}},mergeView:function(h,r){!h||(r&&h.g2Instance&&delete h.g2Instance,h.updateProps&&(h.props=h.updateProps),this.mergeCoord(h,r),this.mergeAxises(h,r),this.mergeGeoms(h.geoms,r),this.mergeGuide(h.guide,r))},mergeViews:function(h,r){if(h!=null)for(var c in h)h[c]&&this.mergeView(h[c],r)}};T.default=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Prop=T.Util=void 0;var t=e(58),u=r(t),s=e(437),h=r(s);function r(c){return c&&c.__esModule?c:{default:c}}T.Util=u.default,T.Prop=h.default},function(E,T,e){"use strict";T.c=u,e.d(T,"e",function(){return s}),e.d(T,"d",function(){return h}),T.h=x,T.b=P,T.g=A,T.a=O,T.f=k;var t=e(90);function u(){}var s=.7,h=1/s,r="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),l=new RegExp("^rgba\\("+[r,r,r,c]+"\\)$"),f=new RegExp("^rgba\\("+[n,n,n,c]+"\\)$"),v=new RegExp("^hsl\\("+[c,n,n]+"\\)$"),b=new RegExp("^hsla\\("+[c,n,n,c]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e.i(t.a)(u,x,{copy:function(at){return Object.assign(new this.constructor,this,at)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:_,formatRgb:M,toString:M});function y(){return this.rgb().formatHex()}function _(){return V(this).formatHsl()}function M(){return this.rgb().formatRgb()}function x(at){var pt,gt;return at=(at+"").trim().toLowerCase(),(pt=i.exec(at))?(gt=pt[1].length,pt=parseInt(pt[1],16),gt===6?m(pt):gt===3?new O(pt>>8&15|pt>>4&240,pt>>4&15|pt&240,(pt&15)<<4|pt&15,1):gt===8?S(pt>>24&255,pt>>16&255,pt>>8&255,(pt&255)/255):gt===4?S(pt>>12&15|pt>>8&240,pt>>8&15|pt>>4&240,pt>>4&15|pt&240,((pt&15)<<4|pt&15)/255):null):(pt=a.exec(at))?new O(pt[1],pt[2],pt[3],1):(pt=o.exec(at))?new O(pt[1]*255/100,pt[2]*255/100,pt[3]*255/100,1):(pt=l.exec(at))?S(pt[1],pt[2],pt[3],pt[4]):(pt=f.exec(at))?S(pt[1]*255/100,pt[2]*255/100,pt[3]*255/100,pt[4]):(pt=v.exec(at))?K(pt[1],pt[2]/100,pt[3]/100,1):(pt=b.exec(at))?K(pt[1],pt[2]/100,pt[3]/100,pt[4]):g.hasOwnProperty(at)?m(g[at]):at==="transparent"?new O(NaN,NaN,NaN,0):null}function m(at){return new O(at>>16&255,at>>8&255,at&255,1)}function S(at,pt,gt,ft){return ft<=0&&(at=pt=gt=NaN),new O(at,pt,gt,ft)}function P(at){return at instanceof u||(at=x(at)),at?(at=at.rgb(),new O(at.r,at.g,at.b,at.opacity)):new O}function A(at,pt,gt,ft){return arguments.length===1?P(at):new O(at,pt,gt,ft==null?1:ft)}function O(at,pt,gt,ft){this.r=+at,this.g=+pt,this.b=+gt,this.opacity=+ft}e.i(t.a)(O,A,e.i(t.b)(u,{brighter:function(at){return at=at==null?h:Math.pow(h,at),new O(this.r*at,this.g*at,this.b*at,this.opacity)},darker:function(at){return at=at==null?s:Math.pow(s,at),new O(this.r*at,this.g*at,this.b*at,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:R,formatHex:R,formatRgb:H,toString:H}));function R(){return"#"+N(this.r)+N(this.g)+N(this.b)}function H(){var at=this.opacity;return at=isNaN(at)?1:Math.max(0,Math.min(1,at)),(at===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(at===1?")":", "+at+")")}function N(at){return at=Math.max(0,Math.min(255,Math.round(at)||0)),(at<16?"0":"")+at.toString(16)}function K(at,pt,gt,ft){return ft<=0?at=pt=gt=NaN:gt<=0||gt>=1?at=pt=NaN:pt<=0&&(at=NaN),new Z(at,pt,gt,ft)}function V(at){if(at instanceof Z)return new Z(at.h,at.s,at.l,at.opacity);if(at instanceof u||(at=x(at)),!at)return new Z;if(at instanceof Z)return at;at=at.rgb();var pt=at.r/255,gt=at.g/255,ft=at.b/255,Rt=Math.min(pt,gt,ft),Nt=Math.max(pt,gt,ft),Dt=NaN,St=Nt-Rt,xt=(Nt+Rt)/2;return St?(pt===Nt?Dt=(gt-ft)/St+(gt<ft)*6:gt===Nt?Dt=(ft-pt)/St+2:Dt=(pt-gt)/St+4,St/=xt<.5?Nt+Rt:2-Nt-Rt,Dt*=60):St=xt>0&&xt<1?0:Dt,new Z(Dt,St,xt,at.opacity)}function k(at,pt,gt,ft){return arguments.length===1?V(at):new Z(at,pt,gt,ft==null?1:ft)}function Z(at,pt,gt,ft){this.h=+at,this.s=+pt,this.l=+gt,this.opacity=+ft}e.i(t.a)(Z,k,e.i(t.b)(u,{brighter:function(at){return at=at==null?h:Math.pow(h,at),new Z(this.h,this.s,this.l*at,this.opacity)},darker:function(at){return at=at==null?s:Math.pow(s,at),new Z(this.h,this.s,this.l*at,this.opacity)},rgb:function(){var at=this.h%360+(this.h<0)*360,pt=isNaN(at)||isNaN(this.s)?0:this.s,gt=this.l,ft=gt+(gt<.5?gt:1-gt)*pt,Rt=2*gt-ft;return new O(X(at>=240?at-240:at+120,Rt,ft),X(at,Rt,ft),X(at<120?at+240:at-120,Rt,ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var at=this.opacity;return at=isNaN(at)?1:Math.max(0,Math.min(1,at)),(at===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(at===1?")":", "+at+")")}}));function X(at,pt,gt){return(at<60?pt+(gt-pt)*at/60:at<180?gt:at<240?pt+(gt-pt)*(240-at)/60:pt)*255}},function(E,T,e){"use strict";T.b=t,T.a=function(u,s,h){u.prototype=s.prototype=h,h.constructor=u};function t(u,s){var h=Object.create(u.prototype);for(var r in s)h[r]=s[r];return h}},function(E,T,e){"use strict";T.b=t;function t(u,s,h,r,c){var n=u*u,i=n*u;return((1-3*u+3*n-i)*s+(4-6*n+3*i)*h+(1+3*u+3*n-3*i)*r+i*c)/6}T.a=function(u){var s=u.length-1;return function(h){var r=h<=0?h=0:h>=1?(h=1,s-1):Math.floor(h*s),c=u[r],n=u[r+1],i=r>0?u[r-1]:2*c-n,a=r<s-1?u[r+2]:2*n-c;return t((h-r/s)*s,i,c,n,a)}}},function(E,T,e){"use strict";var t=e(12),u=e(205),s=e(200),h=e(203),r=e(59),c=e(204),n=e(206),i=e(202);T.a=function(a,o){var l=typeof o,f;return o==null||l==="boolean"?e.i(i.a)(o):(l==="number"?r.a:l==="string"?(f=e.i(t.f)(o))?(o=f,u.a):n.a:o instanceof t.f?u.a:o instanceof Date?h.a:Array.isArray(o)?s.a:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?c.a:r.a)(a,o)}},function(E,T,e){"use strict";T.b=t;function t(u,s,h,r,c){var n=u*u,i=n*u;return((1-3*u+3*n-i)*s+(4-6*n+3*i)*h+(1+3*u+3*n-3*i)*r+i*c)/6}T.a=function(u){var s=u.length-1;return function(h){var r=h<=0?h=0:h>=1?(h=1,s-1):Math.floor(h*s),c=u[r],n=u[r+1],i=r>0?u[r-1]:2*c-n,a=r<s-1?u[r+2]:2*n-c;return t((h-r/s)*s,i,c,n,a)}}},function(E,T,e){"use strict";var t=e(96),u=e(207),s=e(93),h=e(208),r=e(210),c=e(465),n=e(468),i=e(60);e.d(T,"b",function(){return i.a});var a=e(95),o=e(211),l=e(472),f=e(213);e.d(T,"d",function(){return f.a});var v=e(474);e.d(T,"a",function(){return v.a}),e.d(T,"e",function(){return v.b});var b=e(476),g=e(212);e.d(T,"c",function(){return g.a});var y=e(467),_=e(469),M=e(466),x=e(464),m=e(470),S=e(471)},function(E,T,e){"use strict";T.a=t,T.b=function(u,s){s||(s=[]);var h=u?Math.min(s.length,u.length):0,r=s.slice(),c;return function(n){for(c=0;c<h;++c)r[c]=u[c]*(1-n)+s[c]*n;return r}};function t(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}},function(E,T,e){"use strict";var t=e(12),u=e(212),s=e(207),h=e(210),r=e(60),c=e(211),n=e(213),i=e(209),a=e(95);T.a=function(o,l){var f=typeof l,v;return l==null||f==="boolean"?e.i(i.a)(l):(f==="number"?r.a:f==="string"?(v=e.i(t.f)(l))?(l=v,u.a):n.a:l instanceof t.f?u.a:l instanceof Date?h.a:e.i(a.a)(l)?a.b:Array.isArray(l)?s.a:typeof l.valueOf!="function"&&typeof l.toString!="function"||isNaN(l)?c.a:r.a)(o,l)}},function(E,T,e){"use strict";var t=e(98);T.a=function(u){var s=u+="",h=s.indexOf(":");return h>=0&&(s=u.slice(0,h))!=="xmlns"&&(u=u.slice(h+1)),t.a.hasOwnProperty(s)?{space:t.a[s],local:u}:u}},function(E,T,e){"use strict";e.d(T,"b",function(){return t});var t="http://www.w3.org/1999/xhtml";T.a={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(E,T,e){"use strict";e.d(T,"a",function(){return u}),T.b=a;var t={},u=null;if(typeof document!="undefined"){var s=document.documentElement;"onmouseenter"in s||(t={mouseenter:"mouseover",mouseleave:"mouseout"})}function h(o,l,f){return o=r(o,l,f),function(v){var b=v.relatedTarget;(!b||b!==this&&!(b.compareDocumentPosition(this)&8))&&o.call(this,v)}}function r(o,l,f){return function(v){var b=u;u=v;try{o.call(this,this.__data__,l,f)}finally{u=b}}}function c(o){return o.trim().split(/^|\s+/).map(function(l){var f="",v=l.indexOf(".");return v>=0&&(f=l.slice(v+1),l=l.slice(0,v)),{type:l,name:f}})}function n(o){return function(){var l=this.__on;if(!!l){for(var f=0,v=-1,b=l.length,g;f<b;++f)g=l[f],(!o.type||g.type===o.type)&&g.name===o.name?this.removeEventListener(g.type,g.listener,g.capture):l[++v]=g;++v?l.length=v:delete this.__on}}}function i(o,l,f){var v=t.hasOwnProperty(o.type)?h:r;return function(b,g,y){var _=this.__on,M,x=v(l,g,y);if(_){for(var m=0,S=_.length;m<S;++m)if((M=_[m]).type===o.type&&M.name===o.name){this.removeEventListener(M.type,M.listener,M.capture),this.addEventListener(M.type,M.listener=x,M.capture=f),M.value=l;return}}this.addEventListener(o.type,x,f),M={type:o.type,name:o.name,value:l,listener:x,capture:f},_?_.push(M):this.__on=[M]}}T.c=function(o,l,f){var v=c(o+""),b,g=v.length,y;if(arguments.length<2){var _=this.node().__on;if(_){for(var M=0,x=_.length,m;M<x;++M)for(b=0,m=_[M];b<g;++b)if((y=v[b]).type===m.type&&y.name===m.name)return m.value}return}for(_=l?i:n,f==null&&(f=!1),b=0;b<g;++b)this.each(_(v[b],l,f));return this};function a(o,l,f,v){var b=u;o.sourceEvent=u,u=o;try{return l.apply(f,v)}finally{u=b}}},function(E,T,e){"use strict";function t(){}T.a=function(u){return u==null?t:function(){return this.querySelector(u)}}},function(E,T,e){"use strict";var t=e(99);T.a=function(){for(var u=t.a,s;s=u.sourceEvent;)u=s;return u}},function(E,T,e){"use strict";T.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(104);e.d(T,"now",function(){return t.a}),e.d(T,"timer",function(){return t.b}),e.d(T,"timerFlush",function(){return t.c});var u=e(513);e.d(T,"timeout",function(){return u.a});var s=e(512);e.d(T,"interval",function(){return s.a})},function(E,T,e){"use strict";T.a=f,T.d=b,T.b=g,T.c=y;var t=0,u=0,s=0,h=1e3,r,c,n=0,i=0,a=0,o=typeof performance=="object"&&performance.now?performance:Date,l=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(S){setTimeout(S,17)};function f(){return i||(l(v),i=o.now()+a)}function v(){i=0}function b(){this._call=this._time=this._next=null}b.prototype=g.prototype={constructor:b,restart:function(S,P,A){if(typeof S!="function")throw new TypeError("callback is not a function");A=(A==null?f():+A)+(P==null?0:+P),!this._next&&c!==this&&(c?c._next=this:r=this,c=this),this._call=S,this._time=A,m()},stop:function(){this._call&&(this._call=null,this._time=Infinity,m())}};function g(S,P,A){var O=new b;return O.restart(S,P,A),O}function y(){f(),++t;for(var S=r,P;S;)(P=i-S._time)>=0&&S._call.call(null,P),S=S._next;--t}function _(){i=(n=o.now())+a,t=u=0;try{y()}finally{t=0,x(),i=0}}function M(){var S=o.now(),P=S-n;P>h&&(a-=P,n=S)}function x(){for(var S,P=r,A,O=Infinity;P;)P._call?(O>P._time&&(O=P._time),S=P,P=P._next):(A=P._next,P._next=null,P=S?S._next=A:r=A);c=S,m(O)}function m(S){if(!t){u&&(u=clearTimeout(u));var P=S-i;P>24?(S<Infinity&&(u=setTimeout(_,S-o.now()-a)),s&&(s=clearInterval(s))):(s||(n=o.now(),s=setInterval(M,h)),t=1,l(_))}}},function(E,T,e){var t;/*!
* EventEmitter v5.1.0 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - http://oli.me.uk/
* @preserve
*/(function(u){"use strict";function s(){}var h=s.prototype,r=u.EventEmitter;function c(a,o){for(var l=a.length;l--;)if(a[l].listener===o)return l;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}h.getListeners=function(o){var l=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in l)l.hasOwnProperty(v)&&o.test(v)&&(f[v]=l[v])}else f=l[o]||(l[o]=[]);return f},h.flattenListeners=function(o){var l=[],f;for(f=0;f<o.length;f+=1)l.push(o[f].listener);return l},h.getListenersAsObject=function(o){var l=this.getListeners(o),f;return l instanceof Array&&(f={},f[o]=l),f||l};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}h.addListener=function(o,l){if(!i(l))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof l=="object",b;for(b in f)f.hasOwnProperty(b)&&c(f[b],l)===-1&&f[b].push(v?l:{listener:l,once:!1});return this},h.on=n("addListener"),h.addOnceListener=function(o,l){return this.addListener(o,{listener:l,once:!0})},h.once=n("addOnceListener"),h.defineEvent=function(o){return this.getListeners(o),this},h.defineEvents=function(o){for(var l=0;l<o.length;l+=1)this.defineEvent(o[l]);return this},h.removeListener=function(o,l){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=c(f[b],l),v!==-1&&f[b].splice(v,1));return this},h.off=n("removeListener"),h.addListeners=function(o,l){return this.manipulateListeners(!1,o,l)},h.removeListeners=function(o,l){return this.manipulateListeners(!0,o,l)},h.manipulateListeners=function(o,l,f){var v,b,g=o?this.removeListener:this.addListener,y=o?this.removeListeners:this.addListeners;if(typeof l=="object"&&!(l instanceof RegExp))for(v in l)l.hasOwnProperty(v)&&(b=l[v])&&(typeof b=="function"?g.call(this,v,b):y.call(this,v,b));else for(v=f.length;v--;)g.call(this,l,f[v]);return this},h.removeEvent=function(o){var l=typeof o,f=this._getEvents(),v;if(l==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},h.removeAllListeners=n("removeEvent"),h.emitEvent=function(o,l){var f=this.getListenersAsObject(o),v,b,g,y,_;for(y in f)if(f.hasOwnProperty(y))for(v=f[y].slice(0),g=0;g<v.length;g++)b=v[g],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,l||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},h.trigger=n("emitEvent"),h.emit=function(o){var l=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,l)},h.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},h._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},h._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return u.EventEmitter=r,s},t=function(){return s}.call(u,e,u,E),t!==void 0&&(E.exports=t)})(this||{})},function(E,T,e){var t=0,u=e(2),s={values:e(79)};E.exports={isAdjust:function(r){return this.adjustNames.indexOf(r)>=0},_getDimValues:function(r){var c=this,n={},i=[];if(c.xField&&c.isAdjust("x")&&i.push(c.xField),c.yField&&c.isAdjust("y")&&i.push(c.yField),u(i,function(l){var f=s.values(r,l);f.sort(function(v,b){return v-b}),n[l]=f}),!c.yField&&c.isAdjust("y")){var a="y",o=[t,1];n[a]=o}return n},adjustData:function(r,c){var n=this,i=n._getDimValues(c);u(r,function(a,o){u(i,function(l,f){n.adjustDim(f,l,a,r.length,o)})})},getAdjustRange:function(r,c,n){var i=this,a=n.indexOf(c),o=n.length,l,f;return!i.yField&&i.isAdjust("y")?(l=0,f=1):o>1?(l=a===0?n[0]:n[a-1],f=a===o-1?n[o-1]:n[a+1],a!==0?l+=(c-l)/2:l-=(f-c)/2,a!==o-1?f-=(f-c)/2:f+=(c-n[o-2])/2):(l=c===0?0:c-.5,f=c===0?1:c+.5),{pre:l,next:f}},groupData:function(r,c){var n={};return u(r,function(i){var a=i[c];a===void 0&&(a=i[c]=t),n[a]||(n[a]=[]),n[a].push(i)}),n}}},function(E,T,e){var t=e(11),u=e(15),s=e(2),h=/rgba?\(([\s.,0-9]+)\)/;function r(){var b=document.createElement("i");return b.title="Web Colour Picker",b.style.display="none",document.body.appendChild(b),b}function c(b,g,y,_){var M=b[_]+(g[_]-b[_])*y;return M}function n(b){return"#"+i(b[0])+i(b[1])+i(b[2])}function i(b){return b=Math.round(b),b=b.toString(16),b.length===1&&(b="0"+b),b}function a(b,g){(isNaN(g)||!t(g)||g<0)&&(g=0),g>1&&(g=1);var y=b.length-1,_=Math.floor(y*g),M=y*g-_,x=b[_],m=_===y?x:b[_+1],S=n([c(x,m,M,0),c(x,m,M,1),c(x,m,M,2)]);return S}function o(b){var g=[];return g.push(parseInt(b.substr(1,2),16)),g.push(parseInt(b.substr(3,2),16)),g.push(parseInt(b.substr(5,2),16)),g}var l={},f=null,v={toRGB:function(g){if(g[0]==="#"&&g.length===7)return g;f||(f=r());var y;if(l[g])y=l[g];else{f.style.color=g,y=document.defaultView.getComputedStyle(f,"").getPropertyValue("color");var _=h.exec(y),M=_[1].split(/\s*,\s*/);y=n(M),l[g]=y}return y},rgb2arr:o,gradient:function(g){var y=[];return u(g)&&(g=g.split("-")),s(g,function(_){_.indexOf("#")===-1&&(_=v.toRGB(_)),y.push(o(_))}),function(_){return a(y,_)}}};E.exports=v},function(E,T,e){var t=e(31),u=t.Group,s=e(3),h=function r(c){r.superclass.constructor.call(this,c)};s.extend(h,u),s.augment(h,{getDefaultCfg:function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!1,zeroLineStyle:{stroke:"#595959",lineDash:[0,0]}}},_renderUI:function(){h.superclass._renderUI.call(this),this._drawLines()},_drawLines:function(){var c=this,n=c.get("lineStyle"),i=c.get("items");i&&i.length&&(c._precessItems(i),c._drawGridLines(i,n))},_precessItems:function(c){var n=this,i;s.each(c,function(a,o){i&&n.get("alternateColor")&&n._drawAlternativeBg(a,i,o),i=a})},_drawGridLines:function(c,n){var i=this,a=this.get("type"),o,l,f,v,b=c.length;a==="line"||a==="polygon"?s.each(c,function(g,y){i.get("hideFirstLine")&&y===0||i.get("hideLastLine")&&y===b-1||(v=g.points,l=[],a==="line"?(l.push(["M",v[0].x,v[0].y]),l.push(["L",v[v.length-1].x,v[v.length-1].y])):s.each(v,function(_,M){M===0?l.push(["M",_.x,_.y]):l.push(["L",_.x,_.y])}),i._drawZeroLine(a,y)?f=s.mix({},i.get("zeroLineStyle"),{path:l}):f=s.mix({},n,{path:l}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=g._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))}):s.each(c,function(g,y){i.get("hideFirstLine")&&y===0||i.get("hideLastLine")&&y===b-1||(v=g.points,l=[],s.each(v,function(_,M){var x=_.radius;M===0?l.push(["M",_.x,_.y]):l.push(["A",x,x,0,0,_.flag,_.x,_.y])}),f=s.mix({},n,{path:l}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=g._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))})},_drawZeroLine:function(c,n){var i=this,a=i.get("tickValues");return!!(c==="line"&&a&&a[n]===0&&i.get("hightLightZero"))},_drawAlternativeBg:function(c,n,i){var a=this,o=a.get("alternateColor"),l,f,v;s.isString(o)?f=o:s.isArray(o)&&(f=o[0],v=o[1]),i%2==0?v&&(l=a._getBackItem(n.points,c.points,v)):f&&(l=a._getBackItem(n.points,c.points,f));var b=a.addShape("Path",{attrs:l});b.name="axis-grid-rect",b._id=c._id&&c._id.replace("grid","grid-rect"),b.set("coord",a.get("coord")),a.get("appendInfo")&&b.setSilent("appendInfo",a.get("appendInfo"))},_getBackItem:function(c,n,i){var a=[],o=this.get("type");if(o==="line")a.push(["M",c[0].x,c[0].y]),a.push(["L",c[c.length-1].x,c[c.length-1].y]),a.push(["L",n[n.length-1].x,n[n.length-1].y]),a.push(["L",n[0].x,n[0].y]),a.push(["Z"]);else if(o==="polygon"){s.each(c,function(y,_){_===0?a.push(["M",y.x,y.y]):a.push(["L",y.x,y.y])});for(var l=n.length-1;l>=0;l--)a.push(["L",n[l].x,n[l].y]);a.push(["Z"])}else{var f=c[0].flag;s.each(c,function(y,_){var M=y.radius;_===0?a.push(["M",y.x,y.y]):a.push(["A",M,M,0,0,y.flag,y.x,y.y])});for(var v=n.length-1;v>=0;v--){var b=n[v],g=b.radius;v===n.length-1?a.push(["M",b.x,b.y]):a.push(["A",g,g,0,0,f===1?0:1,b.x,b.y])}}return{fill:i,path:a}}}),E.exports=h},function(E,T,e){var t=e(3);E.exports={getFirstScale:function(s){var h;return t.each(s,function(r){if(r)return h=r,!1}),h}}},function(E,T,e){function t(g){return function(){var y=r(g),_;if(h()){var M=r(this).constructor;_=Reflect.construct(y,arguments,M)}else _=y.apply(this,arguments);return u(this,_)}}function u(g,y){return y&&(typeof y=="object"||typeof y=="function")?y:s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(g){return!1}}function r(g){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},r(g)}function c(g,y){g.prototype=Object.create(y.prototype),g.prototype.constructor=g,g.__proto__=y}var n=e(3),i=n.DomUtil,a=e(36),o=e(254),l=e(255),f=e(253),v={scatter:o,map:l,treemap:f},b=function(g){c(_,g);var y=t(_);function _(){return g.apply(this,arguments)||this}var M=_.prototype;return M.getDefaultCfg=function(){var m=g.prototype.getDefaultCfg.call(this);return n.mix({},m,{name:"label",type:"default",textStyle:null,formatter:null,items:null,useHtml:!1,containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>',labelLine:!1,lineGroup:null,shapes:null,config:!0,capture:!0})},M.clear=function(){var m=this.get("group"),S=this.get("container");m&&!m.get("destroyed")&&m.clear(),S&&(S.innerHTML=""),g.prototype.clear.call(this)},M.destroy=function(){var m=this.get("group"),S=this.get("container");m.destroy||m.destroy(),S&&S.parentNode&&S.parentNode.removeChild(S),g.prototype.destroy.call(this)},M.render=function(){this.clear(),this._init(),this.beforeDraw(),this.draw(),this.afterDraw()},M._dryDraw=function(){var m=this,S=m.get("items"),P=m.getLabels(),A=P.length;n.each(S,function(R,H){if(H<A){var N=P[H];m.changeLabel(N,R)}else{var K=m._addLabel(R,H);K&&(K._id=R._id,K.set("coord",R.coord))}});for(var O=A-1;O>=S.length;O--)P[O].remove();m._adjustLabels(),(m.get("labelLine")||!m.get("config"))&&m.drawLines()},M.draw=function(){this._dryDraw(),this.get("canvas").draw()},M.changeLabel=function(m,S){if(!!m)if(m.tagName){var P=this._createDom(S);m.innerHTML=P.innerHTML,this._setCustomPosition(S,m)}else m._id=S._id,m.attr("text",S.text),(m.attr("x")!==S.x||m.attr("y")!==S.y)&&(m.resetMatrix(),S.textStyle.rotate&&(m.rotateAtStart(S.textStyle.rotate),delete S.textStyle.rotate),m.attr(S))},M.show=function(){var m=this.get("group"),S=this.get("container");m&&m.show(),S&&(S.style.opacity=1)},M.hide=function(){var m=this.get("group"),S=this.get("container");m&&m.hide(),S&&(S.style.opacity=0)},M.drawLines=function(){var m=this,S=m.get("labelLine");typeof S=="boolean"&&m.set("labelLine",{});var P=m.get("lineGroup");!P||P.get("destroyed")?(P=m.get("group").addGroup({elCls:"x-line-group"}),m.set("lineGroup",P)):P.clear(),n.each(m.get("items"),function(A){m.lineToLabel(A,P)})},M.lineToLabel=function(m,S){var P=this;if(!(!P.get("config")&&!m.labelLine)){var A=m.labelLine||P.get("labelLine"),O=typeof m.capture=="undefined"?P.get("capture"):m.capture,R=A.path;if(R&&n.isFunction(A.path)&&(R=A.path(m)),!R){var H=m.start||{x:m.x-m._offset.x,y:m.y-m._offset.y};R=[["M",H.x,H.y],["L",m.x,m.y]]}var N=m.color;N||(m.textStyle&&m.textStyle.fill?N=m.textStyle.fill:N="#000");var K=S.addShape("path",{attrs:n.mix({path:R,fill:null,stroke:N},A),capture:O});K.name=P.get("name"),K._id=m._id&&m._id.replace("glabel","glabelline"),K.set("coord",P.get("coord"))}},M._adjustLabels=function(){var m=this,S=m.get("type"),P=m.getLabels(),A=m.get("shapes"),O=v[S];S==="default"||!O||O(P,A)},M.getLabels=function(){var m=this.get("container");return m?n.toArray(m.childNodes):this.get("group").get("children")},M._addLabel=function(m,S){var P=m;return this.get("config")&&(P=this._getLabelCfg(m,S)),this._createText(P)},M._getLabelCfg=function(m,S){var P=this.get("textStyle")||{},A=this.get("formatter"),O=this.get("htmlTemplate");if(!n.isObject(m)){var R=m;m={},m.text=R}n.isFunction(P)&&(P=P(m.text,m,S)),A&&(m.text=A(m.text,m,S)),O&&(m.useHtml=!0,n.isFunction(O)&&(m.text=O(m.text,m,S))),n.isNil(m.text)&&(m.text=""),m.text=m.text+"";var H=n.mix({},m,{textStyle:P},{x:m.x||0,y:m.y||0});return H},M._init=function(){if(!this.get("group")){var m=this.get("canvas").addGroup({id:"label-group"});this.set("group",m)}},M.initHtmlContainer=function(){var m=this.get("container");if(m)n.isString(m)&&(m=document.getElementById(m),m&&this.set("container",m));else{var S=this.get("containerTpl"),P=this.get("canvas").get("el").parentNode;m=i.createDom(S),P.style.position="relative",P.appendChild(m),this.set("container",m)}return m},M._createText=function(m){var S=n.deepMix({},m),P=this.get("container"),A=typeof S.capture=="undefined"?this.get("capture"):S.capture,O;if(S.useHtml||S.htmlTemplate){P||(P=this.initHtmlContainer());var R=this._createDom(S);P.appendChild(R),this._setCustomPosition(S,R)}else{var H=this.get("name"),N=S.point,K=this.get("group");delete S.point;var V=S.rotate;return S.textStyle&&(S.textStyle.rotate&&(V=S.textStyle.rotate,delete S.textStyle.rotate),S=n.mix({x:S.x,y:S.y,textAlign:S.textAlign,text:S.text},S.textStyle)),O=K.addShape("text",{attrs:S,capture:A}),V&&(Math.abs(V)>Math.PI*2&&(V=V/180*Math.PI),O.transform([["t",-S.x,-S.y],["r",V],["t",S.x,S.y]])),O.setSilent("origin",N||S),O.name=H,this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo")),O}},M._createDom=function(m){var S=this.get("itemTpl"),P=n.substitute(S,{text:m.text});return i.createDom(P)},M._setCustomPosition=function(m,S){var P=m.textAlign||"left",A=m.y,O=m.x,R=i.getOuterWidth(S),H=i.getOuterHeight(S);A=A-H/2,P==="center"?O=O-R/2:P==="right"&&(O=O-R),S.style.top=parseInt(A,10)+"px",S.style.left=parseInt(O,10)+"px"},_}(a);E.exports=b},function(E,T){var e=function(){function t(){this.bitmap=[]}var u=t.prototype;return u.hasGap=function(h){for(var r=!0,c=this.bitmap,n=Math.floor(h.minX),i=Math.ceil(h.maxX),a=Math.floor(h.minY),o=Math.ceil(h.maxY)-1,l=n;l<i;l++){if(!c[l]){c[l]=[];continue}if(l===n||l===i-1){for(var f=a;f<=o;f++)if(c[l][f]){r=!1;break}}else if(c[l][a]||c[l][o]){r=!1;break}}return r},u.fillGap=function(h){for(var r=this.bitmap,c=Math.floor(h.minX),n=Math.ceil(h.maxX)-1,i=Math.floor(h.minY),a=Math.ceil(h.maxY)-1,o=c;o<=n;o++){for(var l=i;l<a;l+=8)r[o]||(r[o]=[]),r[o][l]=!0;r[o][a]=!0}for(var f=i;f<=a;f++)r[c][f]=!0,r[n][f]=!0},t}();E.exports=e},function(E,T,e){function t(f){return function(){var v=r(f),b;if(h()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(36),a=e(19),o=a.FONT_FAMILY,l=function(f){c(g,f);var v=t(g),b=g.prototype;b.getDefaultCfg=function(){return{container:null,title:null,formatter:null,hoverable:!0,titleGap:15,position:[0,0],offset:[0,0],offsetX:null,offsetY:null}};function g(y){var _;return _=f.call(this,y)||this,_._init(),_.beforeRender(),_.render(),_._adjustPositionOffset(),_._bindEvents(),_}return b._init=function(){var _=this.get("group"),M=this.get("container");this.set("canvas",M.get("canvas"));var x=this.get("position");_||(_=M.addGroup({x:0-x[0],y:0-x[1]})),this.set("group",_)},b._adjustPositionOffset=function(){var _=this.get("position"),M=this.get("offset"),x=this.get("offsetX"),m=this.get("offsetY");if(!n.isArray(M)){var S=this.get("layout");M=S==="vertical"?[M,0]:[0,M]}x&&(M[0]=x),m&&(M[1]=m);var P=this.get("group").getBBox();this.move(-P.minX+_[0]+M[0],-P.minY+_[1]+M[1])},b.beforeRender=function(){var _=this.get("group"),M=_.addGroup();this.set("itemsGroup",M)},b.render=function(){this._renderTitle()},b._renderTitle=function(){var _=this.get("title"),M=this.get("titleGap");if(M=M||0,_&&_.text){var x=this.get("group"),m=x.addShape("text",{attrs:n.mix({x:0,y:0-M,fill:"#333",textBaseline:"middle",fontFamily:o},_)});m.name="legend-title",this.get("appendInfo")&&m.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",m)}},b.getCheckedCount=function(){var _=this.get("itemsGroup"),M=_.get("children"),x=n.filter(M,function(m){return m.get("checked")});return x.length},b.setItems=function(_){this.set("items",_),this.clear(),this.render()},b.addItem=function(_){var M=this.get("items");M.push(_),this.clear(),this.render()},b.clear=function(){var _=this.get("itemsGroup");_.clear();var M=this.get("group");M.clear(),this.beforeRender()},b.destroy=function(){var _=this.get("group");_&&_.destroy(),this._attrs={},this.removeAllListeners(),f.prototype.destroy.call(this)},b.getWidth=function(){var _=this.get("group").getBBox();return _.width},b.getHeight=function(){var _=this.get("group").getBBox();return _.height},b.move=function(_,M){this.get("group").move(_,M)},b.draw=function(){this.get("canvas").draw()},g}(i);E.exports=l},function(E,T,e){function t(A){return function(){var O=r(A),R;if(h()){var H=r(this).constructor;R=Reflect.construct(O,arguments,H)}else R=O.apply(this,arguments);return u(this,R)}}function u(A,O){return O&&(typeof O=="object"||typeof O=="function")?O:s(A)}function s(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}function r(A){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},r(A)}function c(A,O){A.prototype=Object.create(O.prototype),A.prototype.constructor=A,A.__proto__=O}var n=e(3),i=e(114),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f=n.Group,v="g2-legend",b="g2-legend-title",g="g2-legend-list",y="g2-legend-list-item",_="g2-legend-text",M="g2-legend-marker";function x(A,O){return A.getElementsByClassName(O)[0]}function m(A,O){var R=A.className;return n.isNil(R)||(R=R.split(" "),R.indexOf(O)>-1)?A:A.parentNode?A.parentNode.className===v?A.parentNode:m(A.parentNode,O):null}function S(A,O){var R=null,H=O instanceof f?O.get("value"):O;return n.each(A,function(N){if(N.value===H)return R=N,!1}),R}var P=function(A){c(R,A);var O=t(R);function R(){return A.apply(this,arguments)||this}var H=R.prototype;return H.getDefaultCfg=function(){var K=A.prototype.getDefaultCfg.call(this);return n.mix({},K,{type:"category-legend",container:null,containerTpl:'<div class="'+v+'"><h4 class="'+b+'"></h4><ul class="'+g+'"></ul></div>',itemTpl:'<li class="'+y+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+M+'" style="background-color:{color};"></i><span class="'+_+'">{value}</span></li>',legendStyle:{},textStyle:{fill:"#333",fontSize:12,textAlign:"middle",textBaseline:"top",fontFamily:o},abridgeText:!1,tipTpl:'<div class="textTip"></div>',tipStyle:{display:"none",fontSize:"12px",backgroundColor:"#fff",position:"absolute",width:"auto",height:"auto",padding:"3px",boxShadow:"2px 2px 5px #888"},autoPosition:!0})},H._init=function(){},H.beforeRender=function(){},H.render=function(){this._renderHTML()},H._bindEvents=function(){var K=this,V=this.get("legendWrapper"),k=x(V,g);this.get("hoverable")&&(k.onmousemove=function(Z){return K._onMousemove(Z)},k.onmouseout=function(Z){return K._onMouseleave(Z)}),this.get("clickable")&&(k.onclick=function(Z){return K._onClick(Z)})},H._onMousemove=function(K){var V=this.get("items"),k=K.target,Z=k.className;if(Z=Z.split(" "),!(Z.indexOf(v)>-1||Z.indexOf(g)>-1)){var X=m(k,y),at=S(V,X.getAttribute("data-value"));at?(this.deactivate(),this.activate(X.getAttribute("data-value")),this.emit("itemhover",{item:at,currentTarget:X,checked:at.checked})):at||(this.deactivate(),this.emit("itemunhover",K))}},H._onMouseleave=function(K){this.deactivate(),this.emit("itemunhover",K)},H._onClick=function(K){var V=this,k=this.get("legendWrapper"),Z=x(k,g),X=this.get("unCheckColor"),at=this.get("items"),pt=this.get("selectedMode"),gt=Z.childNodes,ft=K.target,Rt=ft.className;if(Rt=Rt.split(" "),!(Rt.indexOf(v)>-1||Rt.indexOf(g)>-1)){var Nt=m(ft,y),Dt=x(Nt,_),St=x(Nt,M),xt=S(at,Nt.getAttribute("data-value"));if(!!xt){var Ot=Nt.className,it=Nt.getAttribute("data-color");if(pt==="single")xt.checked=!0,n.each(gt,function(q){if(q!==Nt){var mt=x(q,M);mt.style.backgroundColor=X,q.className=q.className.replace("checked","unChecked"),q.style.color=X;var et=S(at,q.getAttribute("data-value"));et.checked=!1}else Dt&&(Dt.style.color=V.get("textStyle").fill),St&&(St.style.backgroundColor=it),Nt.className=Ot.replace("unChecked","checked")});else{var At=Ot.indexOf("checked")!==-1,z=0;if(n.each(gt,function(q){q.className.indexOf("checked")!==-1&&z++}),!this.get("allowAllCanceled")&&At&&z===1){this.emit("clicklastitem",{item:xt,currentTarget:Nt,checked:pt==="single"?!0:xt.checked});return}xt.checked=!xt.checked,At?(St&&(St.style.backgroundColor=X),Nt.className=Ot.replace("checked","unChecked"),Nt.style.color=X):(St&&(St.style.backgroundColor=it),Nt.className=Ot.replace("unChecked","checked"),Nt.style.color=this.get("textStyle").fill)}this.emit("itemclick",{item:xt,currentTarget:Nt,checked:pt==="single"?!0:xt.checked})}}},H.activate=function(K){var V=this,k=this,Z=k.get("items"),X=S(Z,K),at=k.get("legendWrapper"),pt=x(at,g),gt=pt.childNodes;gt.forEach(function(ft){var Rt=x(ft,M),Nt=S(Z,ft.getAttribute("data-value"));if(V.get("highlight")){if(Nt===X&&Nt.checked){Rt.style.border="1px solid #333";return}}else Nt===X?Rt.style.opacity=k.get("activeOpacity"):Nt.checked&&(Rt.style.opacity=k.get("inactiveOpacity"))})},H.deactivate=function(){var K=this,V=this,k=V.get("legendWrapper"),Z=x(k,g),X=Z.childNodes;X.forEach(function(at){var pt=x(at,M);K.get("highlight")?pt.style.border="1px solid #fff":pt.style.opacity=V.get("inactiveOpacity")})},H._renderHTML=function(){var K=this,V=this.get("container"),k=this.get("title"),Z=this.get("containerTpl"),X=l.createDom(Z),at=x(X,b),pt=x(X,g),gt=this.get("unCheckColor"),ft=n.deepMix({},{CONTAINER_CLASS:{height:"auto",width:"auto",position:"absolute",overflowY:"auto",fontSize:"12px",fontFamily:o,lineHeight:"20px",color:"#8C8C8C"},TITLE_CLASS:{marginBottom:this.get("titleGap")+"px",fontSize:"12px",color:"#333",textBaseline:"middle",fontFamily:o},LIST_CLASS:{listStyleType:"none",margin:0,padding:0,textAlign:"center"},LIST_ITEM_CLASS:{cursor:"pointer",marginBottom:"5px",marginRight:"24px"},MARKER_CLASS:{width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"4px",verticalAlign:"middle"}},this.get("legendStyle"));if(/^\#/.test(V)||typeof V=="string"&&V.constructor===String){var Rt=V.replace("#","");V=document.getElementById(Rt),V.appendChild(X)}else{var Nt=this.get("position"),Dt={};Nt==="left"||Nt==="right"?Dt={maxHeight:(this.get("maxLength")||V.offsetHeight)+"px"}:Dt={maxWidth:(this.get("maxLength")||V.offsetWidth)+"px"},l.modifyCSS(X,n.mix({},ft.CONTAINER_CLASS,Dt,this.get(v))),V.appendChild(X)}l.modifyCSS(pt,n.mix({},ft.LIST_CLASS,this.get(g))),at&&(k&&k.text?(at.innerHTML=k.text,l.modifyCSS(at,n.mix({},ft.TITLE_CLASS,this.get(b),k))):X.removeChild(at));var St=this.get("items"),xt=this.get("itemTpl"),Ot=this.get("position"),it=this.get("layout"),At=Ot==="right"||Ot==="left"||it==="vertical"?"block":"inline-block",z=n.mix({},ft.LIST_ITEM_CLASS,{display:At},this.get(y)),q=n.mix({},ft.MARKER_CLASS,this.get(M));if(n.each(St,function(bt,Y){var rt=bt.checked,ot=K._formatItemValue(bt.value),$=bt.marker.fill||bt.marker.stroke,Pt=rt?$:gt,yt;n.isFunction(xt)?yt=xt(ot,Pt,rt,Y):yt=xt;var Ft=n.substitute(yt,n.mix({},bt,{index:Y,checked:rt?"checked":"unChecked",value:ot,color:Pt,originColor:$,originValue:bt.value.replace(/\"/g,"&quot;")})),Qt=l.createDom(Ft);Qt.style.color=K.get("textStyle").fill;var ne=x(Qt,M),Wt=x(Qt,_);if(l.modifyCSS(Qt,z),ne&&l.modifyCSS(ne,q),rt||(Qt.style.color=gt,ne&&(ne.style.backgroundColor=gt)),pt.appendChild(Qt),K.get("abridgeText")){var $t=ot,De=Qt.offsetWidth,Je=K.get("textStyle").fontSize;isNaN(Je)&&(Je.indexOf("pt")!==-1?Je=parseFloat(Je.substr(0,Je.length-2))*1/72*96:Je.indexOf("px")!==-1&&(Je=parseFloat(Je.substr(0,Je.length-2))));var Qe=Je*$t.length,de=Math.floor(De/Je);De<2*Je?$t="":De<Qe&&de>1&&($t=$t.substr(0,de-1)+"..."),Wt.innerText=$t,Qt.addEventListener("mouseover",function(){var ue=x(X.parentNode,"textTip");ue.style.display="block",ue.style.left=Qt.offsetLeft+Qt.offsetWidth+"px",ue.style.top=Qt.offsetTop+15+"px",ue.innerText=ot}),Qt.addEventListener("mouseout",function(){var ue=x(X.parentNode,"textTip");ue.style.display="none"})}}),this.get("abridgeText")){var mt=this.get("tipTpl"),et=l.createDom(mt),st=this.get("tipStyle");l.modifyCSS(et,st),X.parentNode.appendChild(et),et.addEventListener("mouseover",function(){et.style.display="none"})}this.set("legendWrapper",X)},H._adjustPositionOffset=function(){var K=this.get("autoPosition");if(K!==!1){var V=this.get("position"),k=this.get("offset"),Z=this.get("offsetX"),X=this.get("offsetY");Z&&(k[0]=Z),X&&(k[1]=X);var at=this.get("legendWrapper");at.style.left=V[0]+"px",at.style.top=V[1]+"px",at.style.marginLeft=k[0]+"px",at.style.marginTop=k[1]+"px"}},H.getWidth=function(){return l.getOuterWidth(this.get("legendWrapper"))},H.getHeight=function(){return l.getOuterHeight(this.get("legendWrapper"))},H.move=function(K,V){/^\#/.test(this.get("container"))?A.prototype.move.call(this,K,V):(l.modifyCSS(this.get("legendWrapper"),{left:K+"px",top:V+"px"}),this.set("x",K),this.set("y",V))},H.destroy=function(){var K=this.get("legendWrapper");K&&K.parentNode&&K.parentNode.removeChild(K),A.prototype.destroy.call(this)},R}(i);E.exports=P},function(E,T,e){function t(y){return function(){var _=r(y),M;if(h()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return u(this,M)}}function u(y,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(y)}function s(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}function r(y){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(y)}function c(y,_){y.prototype=Object.create(_.prototype),y.prototype.constructor=y,y.__proto__=_}var n=e(3),i=e(112),a=e(19),o=a.FONT_FAMILY,l=n.Event,f=n.Group;function v(y,_){var M=null,x=_ instanceof f||_.name==="legendGroup"?_.get("value"):_;return n.each(y,function(m){if(m.value===x)return M=m,!1}),M}function b(y,_){return y.findBy(function(M){return M.name===_})}var g=function(y){c(M,y);var _=t(M);function M(){return y.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=y.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"category-legend",items:null,itemGap:5,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},_wordSpaceing:8,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0,highlight:!1,activeOpacity:.7,inactiveOpacity:1})},x.render=function(){y.prototype.render.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems()},x._bindEvents=function(){this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMousemove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.get("group").on("click",n.wrapBehavior(this,"_onClick"))},x._getLegendItem=function(S){var P=S.get("parent");return P&&P.name==="legendGroup"?P:null},x.activate=function(S){var P=this,A=this,O=A.get("itemsGroup"),R=O.get("children"),H=void 0;R.forEach(function(N){if(H=b(N,"legend-marker"),!!H){var K=N.get("checked");P.get("highlight")?N.get("value")===S&&K?H.attr("stroke","#333"):H.attr("stroke",null):N.get("value")===S&&H.attr("fillOpacity",A.get("activeOpacity"))}}),this.get("canvas").draw()},x.deactivate=function(){var S=this,P=this,A=P.get("itemsGroup"),O=A.get("children"),R=void 0,H=this.get("unCheckColor");O.forEach(function(N){if(R=b(N,"legend-marker"),!!R)if(S.get("highlight")){var K=R.get("oriStroke"),V=N.get("checked");K&&!V?K=H:K="",R.attr("stroke",K)}else R.attr("fillOpacity",P.get("inactiveOpacity"))}),this.get("canvas").draw()},x._onMousemove=function(S){var P=this._getLegendItem(S.currentTarget);if(P&&P.get("checked")){var A=this.get("items"),O=new l("itemhover",S,!0,!0);O.item=v(A,P),O.checked=P.get("checked"),O.currentTarget=S.currentTarget,this.deactivate(),this.activate(P.get("value")),this.emit("itemhover",O)}else this.deactivate(),this.emit("itemunhover",S);this.get("canvas").draw()},x._onMouseleave=function(S){this.deactivate(),this.get("canvas").draw(),this.emit("itemunhover",S)},x._onClick=function(S){var P=this._getLegendItem(S.currentTarget),A=this.get("items");if(P&&!P.get("destroyed")){var O=P.get("checked"),R=this.get("selectedMode"),H=v(A,P),N=new l("itemclick",S,!0,!0);if(N.item=H,N.currentTarget=P,N.appendInfo=S.currentTarget.get("appendInfo"),N.checked=R==="single"?!0:!O,!this.get("allowAllCanceled")&&O&&this.getCheckedCount()===1){this.emit("clicklastitem",N);return}var K=this.get("unCheckColor"),V=this.get("textStyle").fill,k=void 0,Z=void 0,X=void 0;if(R==="single"){var at=this.get("itemsGroup"),pt=at.get("children");n.each(pt,function(gt){k=b(gt,"legend-marker"),Z=b(gt,"legend-text"),X=b(gt,"legend-item"),gt!==P?(k.attr("fill")&&k.attr("fill",K),k.attr("stroke")&&k.attr("stroke",K),Z.attr("fill",K),k.setSilent("checked",!1),Z.setSilent("checked",!1),X.setSilent("checked",!1),gt.setSilent("checked",!1)):(k.attr("fill")&&H&&H.marker&&k.attr("fill",H.marker.fill),k.attr("stroke")&&H&&H.marker&&k.attr("stroke",H.marker.stroke),Z.attr("fill",V),k.setSilent("checked",!0),Z.setSilent("checked",!0),X.setSilent("checked",!0),gt.setSilent("checked",!0))})}else k=b(P,"legend-marker"),Z=b(P,"legend-text"),X=b(P,"legend-item"),k.attr("fill")&&H&&H.marker&&k.attr("fill",O?K:H.marker.fill),k.attr("stroke")&&H&&H.marker&&k.attr("stroke",O?K:H.marker.stroke),Z.attr("fill",O?K:V),P.setSilent("checked",!O),k.setSilent("checked",!O),Z.setSilent("checked",!O),X.setSilent("checked",!O);this.emit("itemclick",N)}this.get("canvas").draw()},x._renderItems=function(){var S=this,P=this.get("items");if(this.get("reversed")&&P.reverse(),n.each(P,function(H,N){S._addItem(H,N)}),this.get("highlight")){var A=this.get("itemsGroup"),O=A.get("children"),R=void 0;O.forEach(function(H){R=b(H,"legend-marker");var N=R.get("oriStroke");N||(R.attr("stroke")?R.set("oriStroke",R.attr("stroke")):R.set("oriStroke",""))})}},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x._getNextX=function(){var S=this.get("layout"),P=this.get("itemGap"),A=this.get("itemsGroup"),O=this.get("itemWidth"),R=A.get("children"),H=0;return S==="horizontal"&&n.each(R,function(N){H+=(O||N.getBBox().width)+P}),H},x._getNextY=function(){var S=this.get("itemMarginBottom"),P=this.get("titleShape")?this.get("titleGap"):0,A=this.get("layout"),O=this.get("itemsGroup"),R=this.get("titleShape"),H=O.get("children"),N=P;return R&&(N+=R.getBBox().height),A==="vertical"&&n.each(H,function(K){N+=K.getBBox().height+S}),N},x._addItem=function(S){var P=this.get("itemsGroup"),A=this._getNextX(),O=this._getNextY(),R=this.get("unCheckColor"),H=P.addGroup({x:A,y:O,value:S.value,checked:S.checked});H.set("viewId",this.get("viewId"));var N=this.get("textStyle"),K=this.get("_wordSpaceing"),V=0;if(S.marker){var k=n.mix({},S.marker,{x:S.marker.radius+A,y:O});S.checked||(k.fill&&(k.fill=R),k.stroke&&(k.stroke=R));var Z=H.addShape("marker",{type:"marker",attrs:k});Z.attr("cursor","pointer"),Z.name="legend-marker",V+=Z.getBBox().width+K}var X=n.mix({},{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},N,{x:V+A,y:O,text:this._formatItemValue(S.value)});S.checked||n.mix(X,{fill:R});var at=H.addShape("text",{attrs:X});at.attr("cursor","pointer"),at.name="legend-text",this.get("appendInfo")&&at.setSilent("appendInfo",this.get("appendInfo"));var pt=H.getBBox(),gt=this.get("itemWidth"),ft=H.addShape("rect",{attrs:{x:A,y:O-pt.height/2,fill:"#fff",fillOpacity:0,width:gt||pt.width,height:pt.height}});return ft.attr("cursor","pointer"),ft.setSilent("origin",S),ft.name="legend-item",this.get("appendInfo")&&ft.setSilent("appendInfo",this.get("appendInfo")),H.name="legendGroup",H},x._adjustHorizontal=function(){var S=this.get("itemsGroup"),P=S.get("children"),A=this.get("maxLength"),O=this.get("itemGap"),R=this.get("itemMarginBottom"),H=this.get("titleShape")?this.get("titleGap"):0,N=0,K=0,V=void 0,k=void 0,Z=void 0,X=this.get("itemWidth");S.getBBox().width>A&&n.each(P,function(at){Z=at.getBBox(),V=X||Z.width,k=Z.height+R,A-K<V&&(N++,K=0),at.move(K,N*k+H),K+=V+O})},x._adjustVertical=function(){var S=this.get("itemsGroup"),P=this.get("titleShape"),A=S.get("children"),O=this.get("maxLength"),R=this.get("itemGap"),H=this.get("itemMarginBottom"),N=this.get("titleGap"),K=P?P.getBBox().height+N:0,V=this.get("itemWidth"),k=K,Z=void 0,X=void 0,at=void 0,pt=0,gt=0;S.getBBox().height>O&&n.each(A,function(ft){at=ft.getBBox(),Z=at.width,X=at.height,V?pt=V+R:Z>pt&&(pt=Z+R),O-k<X?(k=K,gt+=pt,ft.move(gt,K)):ft.move(gt,k),k+=X+H})},x._adjustItems=function(){var S=this.get("layout");S==="horizontal"?this._adjustHorizontal():this._adjustVertical()},x.getWidth=function(){return y.prototype.getWidth.call(this)},x.getHeight=function(){return y.prototype.getHeight.call(this)},x.move=function(S,P){y.prototype.move.call(this,S,P)},M}(i);E.exports=g},function(E,T,e){function t(M){return function(){var x=r(M),m;if(h()){var S=r(this).constructor;m=Reflect.construct(x,arguments,S)}else m=x.apply(this,arguments);return u(this,m)}}function u(M,x){return x&&(typeof x=="object"||typeof x=="function")?x:s(M)}function s(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}function r(M){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(M)}function c(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var n=e(31),i=e(116),a=e(117),o=e(118),l=e(68),f=e(3),v=e(19),b=v.FONT_FAMILY,g=f.DomUtil,y=f.MatrixUtil,_=function(M){c(S,M);var x=t(S),m=S.prototype;m.getDefaultCfg=function(){var A=M.prototype.getDefaultCfg.call(this);return f.mix({},A,{boardStyle:{x:0,y:0,width:100,height:100,fill:"rgba(255, 255, 255, 0.9)",radius:4,stroke:"#e2e2e2",lineWidth:1},titleStyle:{fontFamily:b,text:"",textBaseline:"top",fontSize:12,fill:"rgb(87, 87, 87)",lineHeight:20,padding:20},markerStyle:{radius:4},nameStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:8},valueStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:30},padding:{top:20,right:20,bottom:20,left:20},itemGap:10,animationDuration:200})};function S(P){var A;A=M.call(this,P)||this,f.assign(s(A),o),f.assign(s(A),a);var O=A.get("crosshairs");if(O){var R=O.type==="rect"?A.get("backPlot"):A.get("frontPlot"),H=new i(f.mix({plot:R,plotRange:A.get("plotRange"),canvas:A.get("canvas")},A.get("crosshairs")));H.hide(),A.set("crosshairGroup",H)}return A._init_(),A.get("items")&&A.render(),A}return m._init_=function(){var A=this,O=A.get("padding"),R=A.get("frontPlot"),H=R.addGroup({capture:!1});A.set("markerGroup",H);var N=R.addGroup();N.hide(),A.set("container",N);var K=N.addShape("rect",{attrs:f.mix({},A.get("boardStyle"))});A.set("board",K);var V=A.get("titleStyle");if(A.get("showTitle")){var k=N.addShape("text",{attrs:f.mix({x:O.left,y:O.top},V)});A.set("titleShape",k),k.name="tooltip-title"}var Z=N.addGroup();Z.move(O.left,O.top+V.lineHeight+V.padding),A.set("itemsGroup",Z)},m.render=function(){var A=this;A.clear();var O=A.get("container"),R=A.get("board"),H=A.get("showTitle"),N=A.get("titleContent"),K=this.get("titleShape"),V=this.get("itemsGroup"),k=A.get("items"),Z=A.get("padding");if(K&&H&&K.attr("text",N),V){var X=A.get("itemGap"),at=0,pt=0;f.each(k,function(Nt){var Dt=A._addItem(Nt);Dt.move(at,pt),V.add(Dt);var St=Dt.getBBox().height;pt+=St+X})}var gt=O.getBBox(),ft=gt.width+Z.right,Rt=gt.height+Z.bottom;R.attr("width",ft),R.attr("height",Rt),A._alignToRight(ft)},m.clear=function(){var A=this.get("titleShape"),O=this.get("itemsGroup"),R=this.get("board");A.text="",O.clear(),R.attr("width",0),R.attr("height",0)},m.show=function(){var A=this.get("container");A.show();var O=this.get("crosshairGroup");O&&O.show();var R=this.get("markerGroup");R&&R.show(),M.prototype.show.call(this),this.get("canvas").draw()},m.hide=function(){var A=this.get("container");A.hide();var O=this.get("crosshairGroup");O&&O.hide();var R=this.get("markerGroup");R&&R.hide(),M.prototype.hide.call(this),this.get("canvas").draw()},m.destroy=function(){var A=this.get("container"),O=this.get("crosshairGroup");O&&O.destroy();var R=this.get("markerGroup");R&&R.remove(),M.prototype.destroy.call(this),A.remove()},m.setPosition=function(A,O,R){var H=this.get("container"),N=this.get("canvas").get("el"),K=g.getWidth(N),V=g.getHeight(N),k=H.getBBox(),Z=k.width,X=k.height,at=A,pt=O,gt;if(this.get("position")){var ft=k.width,Rt=k.height;gt=this._calcTooltipPosition(A,O,this.get("position"),ft,Rt,R),A=gt[0],O=gt[1]}else gt=this._constraintPositionInBoundary(A,O,Z,X,K,V),A=gt[0],O=gt[1];if(this.get("inPlot")){var Nt=this.get("plotRange");gt=this._constraintPositionInPlot(A,O,Z,X,Nt,this.get("enterable")),A=gt[0],O=gt[1]}var Dt=this.get("markerItems");f.isEmpty(Dt)||(at=Dt[0].x,pt=Dt[0].y);var St=[1,0,0,0,1,0,0,0,1],xt=y.transform(St,[["t",A,O]]);H.stopAnimate(),H.animate({matrix:xt},this.get("animationDuration"));var Ot=this.get("crosshairGroup");if(Ot){var it=this.get("items");Ot.setPosition(at,pt,it)}M.prototype.setPosition.call(this,A,O)},m._addItem=function(A){var O=new n.Group,R=this.get("markerStyle").radius;if(A.marker){var H=f.mix({},A.marker,{x:A.marker.radius/2,y:0,symbol:A.marker.activeSymbol||A.marker.symbol});O.addShape("marker",{attrs:H}),R=A.marker.radius}var N=this.get("nameStyle");O.addShape("text",{attrs:f.mix({x:R+N.padding,y:0,text:A.name},N)});var K=this.get("valueStyle");return O.addShape("text",{attrs:f.mix({x:O.getBBox().width+K.padding,y:0,text:A.value},K)}),O},m._alignToRight=function(A){var O=this,R=this.get("itemsGroup"),H=R.get("children");f.each(H,function(N){var K=N.get("children"),V=K[2],k=V.getBBox().width,Z=A-k-O.get("padding").right*2;V.attr("x",Z)})},S}(l);E.exports=_},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(36),i=e(3),a=function(o){c(v,o);var l=t(v),f=v.prototype;f.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return i.mix({},g,{type:null,plot:null,plotRange:null,rectStyle:{fill:"#CCD6EC",opacity:.3},lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},isTransposed:!1})};function v(b){var g;return g=o.call(this,b)||this,g._init_(),g.render(),g}return f._init_=function(){var g=this,y=g.get("plot"),_;g.type==="rect"?_=y.addGroup({zIndex:0}):_=y.addGroup(),this.set("container",_)},f._addLineShape=function(g,y){var _=this.get("container"),M=_.addShape("line",{capture:!1,attrs:g});return this.set("crossLineShape"+y,M),M},f._renderHorizontalLine=function(g,y){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:y?y.bl.x:g.get("width"),y1:0,x2:y?y.br.x:0,y2:0},_);this._addLineShape(M,"X")},f._renderVerticalLine=function(g,y){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:0,y1:y?y.bl.y:g.get("height"),x2:0,y2:y?y.tl.y:0},_);this._addLineShape(M,"Y")},f._renderBackground=function(g,y){var _=i.mix(this.get("rectStyle"),this.get("style")),M=this.get("container"),x=i.mix({x:y?y.tl.x:0,y:y?y.tl.y:g.get("height"),width:y?y.br.x-y.bl.x:g.get("width"),height:y?Math.abs(y.tl.y-y.bl.y):g.get("height")},_),m=M.addShape("rect",{attrs:x,capture:!1});return this.set("crosshairsRectShape",m),m},f._updateRectShape=function(g){var y,_=this.get("crosshairsRectShape"),M=this.get("isTransposed"),x=g[0],m=g[g.length-1],S=M?"y":"x",P=M?"height":"width",A=x[S];if(g.length>1&&x[S]>m[S]&&(A=m[S]),this.get("width"))_.attr(S,A-this.get("crosshairs").width/2),_.attr(P,this.get("width"));else if(i.isArray(x.point[S])&&!x.size){var O=x.point[S][1]-x.point[S][0];_.attr(S,x.point[S][0]),_.attr(P,O)}else y=3*x.size/4,_.attr(S,A-y),g.length===1?_.attr(P,3*x.size/2):_.attr(P,Math.abs(m[S]-x[S])+2*y)},f.render=function(){var g=this.get("canvas"),y=this.get("plotRange"),_=this.get("isTransposed");switch(this.clear(),this.get("type")){case"x":this._renderHorizontalLine(g,y);break;case"y":this._renderVerticalLine(g,y);break;case"cross":this._renderHorizontalLine(g,y),this._renderVerticalLine(g,y);break;case"rect":this._renderBackground(g,y);break;default:_?this._renderHorizontalLine(g,y):this._renderVerticalLine(g,y)}},f.show=function(){var g=this.get("container");o.prototype.show.call(this),g.show()},f.hide=function(){var g=this.get("container");o.prototype.hide.call(this),g.hide()},f.clear=function(){var g=this.get("container");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),o.prototype.clear.call(this),g.clear()},f.destroy=function(){var g=this.get("container");o.prototype.destroy.call(this),g.remove()},f.setPosition=function(g,y,_){var M=this.get("crossLineShapeX"),x=this.get("crossLineShapeY"),m=this.get("crosshairsRectShape");x&&!x.get("destroyed")&&x.move(g,0),M&&!M.get("destroyed")&&M.move(0,y),m&&!m.get("destroyed")&&this._updateRectShape(_)},v}(n);E.exports=a},function(E,T,e){var t=e(3),u={setMarkers:function(h,r){var c=this,n=c.get("markerGroup"),i=c.get("frontPlot");n?n.clear():(n=i.addGroup({zIndex:1,capture:!1}),c.set("markerGroup",n)),t.each(h,function(a){var o=t.mix({fill:a.color,symbol:"circle",shadowColor:a.color},r,{x:a.x,y:a.y});a.marker&&a.marker.activeSymbol&&(o.symbol=a.marker.activeSymbol),n.addShape("marker",{color:a.color,attrs:o})}),this.set("markerItems",h)},clearMarkers:function(){var h=this.get("markerGroup");h&&h.clear()}};E.exports=u},function(E,T){var e=20,t={_calcTooltipPosition:function(s,h,r,c,n,i){var a=0,o=0,l=20;if(i){var f=i.getBBox();a=f.width,o=f.height,s=f.x,h=f.y,l=5}switch(r){case"inside":s=s+a/2-c/2,h=h+o/2-n/2;break;case"top":s=s+a/2-c/2,h=h-n-l;break;case"left":s=s-c-l,h=h+o/2-n/2;break;case"right":s=s+a+l,h=h+o/2-n/2;break;case"bottom":default:s=s+a/2-c/2,h=h+o+l;break}return[s,h]},_constraintPositionInBoundary:function(s,h,r,c,n,i){return s+r+e>n?(s-=r+e,s=s<0?0:s):s+e<0?s=e:s+=e,h+c+e>i?(h-=c+e,h=h<0?0:h):h+e<0?h=e:h+=e,[s,h]},_constraintPositionInPlot:function(s,h,r,c,n,i){return s+r>n.tr.x&&(i?s-=r+1:s-=r+2*e),s<n.tl.x&&(s=n.tl.x),i||(h+c>n.bl.y&&(h-=c+2*e),h<n.tl.y&&(h=n.tl.y)),[s,h]}};E.exports=t},function(E,T,e){var t=e(0),u=e(270),s={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},h={line:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},path:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},area:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.fadeIn},leave:function(){return u.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return u.appear.zoomIn},enter:function(){return u.enter.zoomIn},leave:function(){return u.leave.zoomOut}},edge:{appear:function(){return u.appear.pathIn},enter:function(){return u.enter.pathIn},leave:function(){return u.leave.pathOut}},interval:{appear:function(c){var n;return c.isPolar?(n=u.appear.zoomIn,(c.isTransposed||c.type==="theta")&&(n=u.appear.fanIn)):c.isRect?n=c.isTransposed?u.appear.scaleInX:u.appear.scaleInY:n=u.appear.zoomIn,n},enter:function(c){return c.isRect||c.isTransposed||c.type==="theta"?u.enter.fadeIn:u.enter.zoomIn},leave:function(){return u.leave.fadeOut},update:function(c){if(c.type==="theta")return u.update.fanIn}},point:{appear:function(){return u.appear.zoomIn},enter:function(){return u.enter.zoomIn},leave:function(){return u.leave.zoomOut}},schema:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return u.appear.fadeIn},enter:function(){return u.enter.fadeIn},leave:function(){return u.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(c){if(c.isPolar)return u.appear.fadeIn}},"axis-ticks":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(c){if(c.isPolar)return u.appear.fadeIn}},"axis-grid":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(c){if(c.isPolar)return u.appear.fadeIn}},"axis-grid-rect":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(){return u.leave.fadeIn}},labelLine:{appear:function(){return u.appear.pathIn},enter:function(){return u.enter.pathIn},leave:function(){return u.leave.pathOut}}};h.Action=u,h.defaultCfg=s,h.getAnimation=function(r,c,n){var i=this[r];if(i){var a=i[n];if(t.isFunction(a))return a(c)}return!1},h.getAnimateCfg=function(r,c){var n=s[c];return this[r]&&this[r].cfg&&this[r].cfg[c]?t.deepMix({},n,this[r].cfg[c]):n},h.registerAnimation=function(r,c,n){this.Action[r]||(this.Action[r]={}),this.Action[r][c]=n},E.exports=h},function(E,T,e){function t(r,c){r.prototype=Object.create(c.prototype),r.prototype.constructor=r,r.__proto__=c}var u=e(105),s=e(0),h=function(r){t(n,r);var c=n.prototype;c.getDefaultCfg=function(){return{}};function n(i){var a;a=r.call(this)||this;var o={visible:!0},l=a.getDefaultCfg();return a._attrs=o,s.assign(o,l,i),a}return c.get=function(a){return this._attrs[a]},c.set=function(a,o){this._attrs[a]=o},c.show=function(){var a=this.get("visible");a||(this.set("visible",!0),this.changeVisible(!0))},c.hide=function(){var a=this.get("visible");a&&(this.set("visible",!1),this.changeVisible(!1))},c.changeVisible=function(){},c.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},n}(u);E.exports=h},function(E,T,e){E.exports={Scale:e(277),Coord:e(273),Axis:e(272),Guide:e(275),Legend:e(276),Tooltip:e(278),Event:e(274)}},function(E,T,e){var t=e(16),u=e(0),s=e(123);function h(c,n,i){i===void 0&&(i=1);var a=[c.x,c.y,i];return u.vec3.transformMat3(a,a,n),{x:a[0],y:a[1]}}function r(c){var n=c.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY},o=c.attr("matrix");return i=h(i,o),a=h(a,o),{minX:i.x,minY:i.y,maxX:a.x,maxY:a.y}}E.exports=function(n,i){var a=i;return u.each(n.get("children"),function(o){o instanceof t.Group&&u.each(o.get("children"),function(l){if(l instanceof t.Group&&l.get("children").length||l instanceof t.Path)a=s(a,l.getBBox());else if(l instanceof t.Text){var f=r(l);a=s(a,f)}})}),a}},function(E,T){E.exports=function(t,u){return{minX:Math.min(t.minX,u.minX),minY:Math.min(t.minY,u.minY),maxX:Math.max(t.maxX,u.maxX),maxY:Math.max(t.maxY,u.maxY)}}},function(E,T){E.exports=function(t){return{minX:t.tl.x,minY:t.tl.y,maxX:t.br.x,maxY:t.br.y}}},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(46),s=function(h){t(r,h);function r(){return h.apply(this,arguments)||this}var c=r.prototype;return c.getDefaultCfg=function(){var i=h.prototype.getDefaultCfg.call(this);return i.type="list",i.cols=null,i},c.generateFacets=function(i){var a=this,o=a.fields,l=o[0];if(!l)throw"Please specify for the field for facet!";var f=a.getFieldValues(l,i),v=f.length,b=a.cols||v,g=parseInt((v+b-1)/b),y=[];return f.forEach(function(_,M){var x=parseInt(M/b),m=M%b,S=[{field:l,value:_,values:f}],P=a.getFilter(S),A=i.filter(P),O={type:a.type,count:v,colValue:_,colField:l,rowField:null,rowValue:_,colIndex:m,rowIndex:x,cols:b,rows:g,data:A,region:a.getRegion(g,b,m,x)};y.push(O)}),y},c.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&o.cols*o.rowIndex+o.colIndex+1+o.cols<=o.count&&(a[i].label=null,a[i].title=null)},c.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(u);E.exports=s},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(46),s=function(h){t(r,h);function r(){return h.apply(this,arguments)||this}var c=r.prototype;return c.getDefaultCfg=function(){var i=h.prototype.getDefaultCfg.call(this);return i.type="rect",i},c.generateFacets=function(i){var a=this,o=a.fields,l=[],f=1,v=1,b=o[0],g=o[1],y=[""],_=[""];return b&&(y=a.getFieldValues(b,i),v=y.length),g&&(_=a.getFieldValues(g,i),f=_.length),y.forEach(function(M,x){_.forEach(function(m,S){var P=[{field:b,value:M,values:y},{field:g,value:m,values:_}],A=a.getFilter(P),O=i.filter(A),R={type:a.type,colValue:M,rowValue:m,colField:b,rowField:g,colIndex:x,rowIndex:S,cols:v,rows:f,data:O,region:a.getRegion(f,v,x,S)};l.push(R)})}),l},c.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1?(a[i].title=null,a[i].label=null):o.colIndex!==parseInt((o.cols-1)/2)&&(a[i].title=null)},c.setYAxis=function(i,a,o){o.colIndex!==0?(a[i].title=null,a[i].label=null):o.rowIndex!==parseInt((o.rows-1)/2)&&(a[i].title=null)},c.renderTitle=function(i,a){a.rowIndex===0&&this.drawColTitle(i,a),a.colIndex===a.cols-1&&this.drawRowTitle(i,a)},r}(u);E.exports=s},function(E,T,e){var t=e(69),u=e(25),s=e(0),h=function r(c){r.superclass.constructor.call(this,c)};s.extend(h,t),s.augment(h,{getPointRauis:function(c,n){return u.getPointRadius(c,n)},getCirclePoint:function(c,n,i){var a=this,o=a.get("coord"),l=o.getCenter(),f=a._isEmitLabels(),v=a.getPointRauis(o,i);if(v===0)return null;if(o.isTransposed&&v>n&&!f){var b=Math.asin(n/(2*v));c=c+b*2}else v=v+n;return{x:l.x+v*Math.cos(c),y:l.y+v*Math.sin(c),angle:c,r:v}},getArcPoint:function(c,n){var i=this,a;return n=n||0,s.isArray(c.x)||s.isArray(c.y)?a={x:s.isArray(c.x)?c.x[n]:c.x,y:s.isArray(c.y)?c.y[n]:c.y}:a=c,i.transLabelPoint(a),a},getPointAngle:function(c){var n=this,i=n.get("coord");return u.getPointAngle(i,c)},getMiddlePoint:function(c){var n=this,i=n.get("coord"),a=c.length,o={x:0,y:0};return s.each(c,function(l){o.x+=l.x,o.y+=l.y}),o.x/=a,o.y/=a,o=i.convert(o),o},_isToMiddle:function(c){return c.x.length>2},getLabelPoint:function(c,n,i){var a=this,o=c.text[i],l=1,f;a._isToMiddle(n)?f=a.getMiddlePoint(n.points):(c.text.length===1&&i===0?i=1:i===0&&(l=-1),f=a.getArcPoint(n,i));var v=a.getDefaultOffset(c);v=v*l;var b=a.getPointAngle(f),g=a.getCirclePoint(b,v,f);if(g?(g.text=o,g.angle=b,g.color=n.color):g={text:""},c.autoRotate||typeof c.autoRotate=="undefined"){var y=g.textStyle?g.textStyle.rotate:null;y||(y=g.rotate||a.getLabelRotate(b,v,n)),g.rotate=y}return g.start={x:f.x,y:f.y},g},_isEmitLabels:function(){var c=this.get("label");return c.labelEmit},getLabelRotate:function(c){var n=this,i;return i=c*180/Math.PI,i+=90,n._isEmitLabels()&&(i-=90),i&&(i>90?i=i-180:i<-90&&(i=i+180)),i/180*Math.PI},getLabelAlign:function(c){var n=this,i=n.get("coord"),a;if(n._isEmitLabels())c.angle<=Math.PI/2&&c.angle>-Math.PI/2?a="left":a="right";else if(!i.isTransposed)a="center";else{var o=i.getCenter(),l=n.getDefaultOffset(c);Math.abs(c.x-o.x)<1?a="center":c.angle>Math.PI||c.angle<=0?l>0?a="left":a="right":l>0?a="right":a="left"}return a}}),E.exports=h},function(E,T,e){var t=e(0),u=e(5);E.exports={splitData:function(h){var r=this.get("viewTheme")||u;if(!h.length)return[];var c=[],n=[],i=this.getYScale(),a=i.field,o;return t.each(h,function(l){o=l._origin?l._origin[a]:l[a],r.connectNulls?t.isNil(o)||n.push(l):t.isArray(o)&&t.isNil(o[0])||t.isNil(o)?n.length&&(c.push(n),n=[]):n.push(l)}),n.length&&c.push(n),c}}},function(E,T){E.exports={toFront:function(t){var u=t.get("parent"),s=u.get("children").indexOf(t);t.set("_originIndex",s),t.toFront()},resetZIndex:function(t){var u=t.get("parent"),s=t.get("_originIndex"),h=u.get("children"),r=h.indexOf(t);s>=0&&s!==r&&(h.splice(r,1),h.splice(s,0,t))}}},function(E,T,e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var s=e(8),h=e(128),r=e(0),c=function(n){u(a,n);var i=a.prototype;i.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.type="path",l.shapeType="line",l};function a(o){var l;return l=n.call(this,o)||this,r.assign(t(l),h),l}return i.getDrawCfg=function(l){var f=n.prototype.getDrawCfg.call(this,l);return f.isStack=this.hasStack(),f},i.draw=function(l,f,v,b){var g=this,y=this.splitData(l),_=this.getDrawCfg(l[0]);g._applyViewThemeShapeStyle(_,_.shape,v),_.origin=l,r.each(y,function(M,x){if(!r.isEmpty(M)){_.splitedIndex=x,_.points=M;var m=v.drawShape(_.shape,_,f);g.appendShapeInfo(m,b+x)}})},a}(s);s.Path=c,E.exports=c},function(E,T){var e,t,u="#1890FF",s=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],h=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],r=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],c=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],n=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],i='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',a="g2-tooltip",o="g2-tooltip-title",l="g2-tooltip-list",f="g2-tooltip-list-item",v="g2-tooltip-marker",b="g2-tooltip-value",g="g2-legend",y="g2-legend-title",_="g2-legend-list",M="g2-legend-list-item",x="g2-legend-marker",m={defaultColor:u,plotCfg:{padding:[20,20,95,80]},fontFamily:i,defaultLegendPosition:"bottom",colors:s,colors_16:h,colors_24:r,colors_pie:c,colors_pie_16:n,shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:16,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:16,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:8,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:i}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:i}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:i}},thetaLabels:{labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,legendStyle:{LIST_CLASS:{textAlign:"left"}},textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:0,fontFamily:i},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},top:{position:"top",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},html:(e={},e[""+g]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:i,lineHeight:"20px",color:"#8C8C8C"},e[""+y]={marginBottom:"4px"},e[""+_]={listStyleType:"none",margin:0,padding:0},e[""+M]={listStyleType:"none",cursor:"pointer",marginBottom:"5px",marginRight:"24px"},e[""+x]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},e),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:i},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,5,24,5],legendMargin:24},tooltip:(t={useHtml:!0,crosshairs:!1,offset:15,marker:{symbol:"circle",activeSymbol:"circle"}},t[""+a]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:i,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+o]={marginBottom:"4px"},t[""+l]={margin:0,listStyleType:"none",padding:0},t[""+f]={listStyleType:"none",marginBottom:"4px",padding:0,marginTop:0,marginLeft:0,marginRight:0},t[""+v]={width:"5px",height:"5px",display:"inline-block",marginRight:"8px"},t[""+b]={display:"inline-block",float:"right",marginLeft:"30px"},t),tooltipMarker:{symbol:function(P,A,O){return[["M",P,A],["m",-O,0],["a",O,O,0,1,0,O*2,0],["a",O,O,0,1,0,-O*2,0]]},stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,radius:4},tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:u,radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:u,radius:3},interval:{lineWidth:0,fill:u,fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:u,fillOpacity:.6},polygon:{lineWidth:0,fill:u,fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},line:{stroke:u,lineWidth:2,fill:null},edge:{stroke:u,lineWidth:1,fill:null},schema:{stroke:u,lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"rgba(0, 0, 0, .65)",lineDash:[2,2],lineWidth:1},text:{position:"start",autoRotate:!0,style:{fill:"rgba(0, 0, 0, .45)",fontSize:12,textAlign:"start",fontFamily:i,textBaseline:"bottom"}}},text:{style:{fill:"rgba(0,0,0,.5)",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:i}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"},dataRegion:{style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}},dataMarker:{top:!0,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"rgba(0, 0, 0, .65)",opacity:1,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0}},pixelRatio:null};E.exports=m},function(E,T,e){var t={default:e(131),dark:e(327)};E.exports=t},function(E,T,e){var t=e(1),u=e(330),s=e(333),h=e(329),r=e(105),c=function(i){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},t.assign(this._cfg,this.getDefaultCfg(),i),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};c.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},t.augment(c,u,s,r,h,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(i,a){return i==="zIndex"&&this._beforeSetZIndex&&this._beforeSetZIndex(a),i==="loading"&&this._beforeSetLoading&&this._beforeSetLoading(a),this._cfg[i]=a,this},setSilent:function(i,a){this._cfg[i]=a},get:function(i){return this._cfg[i]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(i,a){var o=this._cfg,l=o.parent,f=o.el;return l&&t.remove(l.get("children"),this),f&&(a?l&&l._cfg.tobeRemoved.push(f):f.parentNode.removeChild(f)),(i||i===void 0)&&this.destroy(),this},destroy:function(){var i=this.get("destroyed");i||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,l=i.el,f=o.indexOf(this);o.splice(f,1),o.push(this),l&&(l.parentNode.removeChild(l),i.el=null)}},toBack:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,l=i.el,f=o.indexOf(this);if(o.splice(f,1),o.unshift(this),l){var v=l.parentNode;v.removeChild(l),v.insertBefore(l,v.firstChild)}}},_beforeSetZIndex:function(i){var a=this._cfg.parent;this._cfg.zIndex=i,t.isNil(a)||a.sort();var o=this._cfg.el;if(o){var l=a._cfg.children,f=l.indexOf(this),v=o.parentNode;v.removeChild(o),f===l.length-1?v.appendChild(o):v.insertBefore(o,v.childNodes[f])}return i},_setAttrs:function(i){return this.attr(i),i},setZIndex:function(i){return this._cfg.zIndex=i,this._beforeSetZIndex(i)},clone:function(){return t.clone(this)},getBBox:function(){}}),E.exports=c},function(E,T,e){var t=e(1),u=e(133),s=e(347),h={},r="_INDEX";function c(o){return function(l,f){var v=o(l,f);return v===0?l[r]-f[r]:v}}function n(o,l,f){for(var v,b=o.length-1;b>=0;b--){var g=o[b];if(g._cfg.visible&&g._cfg.capture&&(g.isGroup?v=g.getShape(l,f):g.isHit(l,f)&&(v=g)),v)break}return v}var i=function o(l){o.superclass.constructor.call(this,l),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function a(o){if(!(o._cfg||o===i)){var l=o.superclass.constructor;l&&!l._cfg&&a(l),o._cfg={},t.merge(o._cfg,l._cfg),t.merge(o._cfg,o.CFG)}}t.extend(i,u),t.augment(i,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return a(this.constructor),t.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(l,f){var v=this.get("canvas");f=f||{};var b=h[l];if(b||(b=t.upperFirst(l),h[l]=b),f.attrs&&v){var g=f.attrs;if(l==="text"){var y=v.get("fontFamily");y&&(g.fontFamily=g.fontFamily?g.fontFamily:y)}}f.canvas=v,f.type=l;var _=new s[b](f);return this.add(_),_},addGroup:function(l,f){var v=this.get("canvas"),b;if(f=t.merge({},f),t.isFunction(l))f?(f.canvas=v,f.parent=this,b=new l(f)):b=new l({canvas:v,parent:this}),this.add(b);else if(t.isObject(l))l.canvas=v,b=new i(l),this.add(b);else if(l===void 0)b=new i,this.add(b);else return!1;return b},renderBack:function(l,f){var v=this.get("backShape"),b=this.getBBox();return t.merge(f,{x:b.minX-l[3],y:b.minY-l[0],width:b.width+l[1]+l[3],height:b.height+l[0]+l[2]}),v?v.attr(f):v=this.addShape("rect",{zIndex:-1,attrs:f}),this.set("backShape",v),this.sort(),v},removeChild:function(l,f){if(arguments.length>=2)this.contain(l)&&l.remove(f);else{if(arguments.length===1)if(t.isBoolean(l))f=l;else return this.contain(l)&&l.remove(!0),this;arguments.length===0&&(f=!0),i.superclass.remove.call(this,f)}return this},add:function(l){var f=this,v=f.get("children");if(t.isArray(l))t.each(l,function(y){var _=y.get("parent");_&&_.removeChild(y,!1),f._setCfgProperty(y)}),f._cfg.children=v.concat(l);else{var b=l,g=b.get("parent");g&&g.removeChild(b,!1),f._setCfgProperty(b),v.push(b)}return f},_setCfgProperty:function(l){var f=this._cfg;l.set("parent",this),l.set("canvas",f.canvas),f.timeline&&l.set("timeline",f.timeline)},contain:function(l){var f=this.get("children");return f.indexOf(l)>-1},getChildByIndex:function(l){var f=this.get("children");return f[l]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var l=this.get("children").length-1;return this.getChildByIndex(l)},getBBox:function(){var l=this,f=Infinity,v=-Infinity,b=Infinity,g=-Infinity,y=l.get("children");y.length>0?t.each(y,function(M){if(M.get("visible")){if(M.isGroup&&M.get("children").length===0)return;var x=M.getBBox();if(!x)return!0;var m=[x.minX,x.minY,1],S=[x.minX,x.maxY,1],P=[x.maxX,x.minY,1],A=[x.maxX,x.maxY,1];M.apply(m),M.apply(S),M.apply(P),M.apply(A);var O=Math.min(m[0],S[0],P[0],A[0]),R=Math.max(m[0],S[0],P[0],A[0]),H=Math.min(m[1],S[1],P[1],A[1]),N=Math.max(m[1],S[1],P[1],A[1]);O<f&&(f=O),R>v&&(v=R),H<b&&(b=H),N>g&&(g=N)}}):(f=0,v=0,b=0,g=0);var _={minX:f,minY:b,maxX:v,maxY:g};return _.x=_.minX,_.y=_.minY,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY,_},getCount:function(){return this.get("children").length},sort:function(){var l=this.get("children");return t.each(l,function(f,v){return f[r]=v,f}),l.sort(c(function(f,v){return f.get("zIndex")-v.get("zIndex")})),this},findById:function(l){return this.find(function(f){return f.get("id")===l})},find:function(l){if(t.isString(l))return this.findById(l);var f=this.get("children"),v=null;return t.each(f,function(b){if(l(b)?v=b:b.find&&(v=b.find(l)),v)return!1}),v},findAll:function(l){var f=this.get("children"),v=[],b=[];return t.each(f,function(g){l(g)&&v.push(g),g.findAllBy&&(b=g.findAllBy(l),v=v.concat(b))}),v},findBy:function(l){var f=this.get("children"),v=null;return t.each(f,function(b){if(l(b)?v=b:b.findBy&&(v=b.findBy(l)),v)return!1}),v},findAllBy:function(l){var f=this.get("children"),v=[],b=[];return t.each(f,function(g){l(g)&&v.push(g),g.findAllBy&&(b=g.findAllBy(l),v=v.concat(b))}),v},getShape:function(l,f){var v=this,b=v._attrs.clip,g=v._cfg.children,y;if(b){var _=[l,f,1];b.invert(_,v.get("canvas")),b.isPointInPath(_[0],_[1])&&(y=n(g,l,f))}else y=n(g,l,f);return y},clearTotalMatrix:function(){var l=this.get("totalMatrix");if(l){this.setSilent("totalMatrix",null);for(var f=this._cfg.children,v=0;v<f.length;v++){var b=f[v];b.clearTotalMatrix()}}},clear:function(l){for(var f=this._cfg.children,v=f.length-1;v>=0;v--)f[v].remove(!0,l);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),i.superclass.destroy.call(this))},clone:function(){var l=this,f=l._cfg.children,v=new i;return t.each(f,function(b){v.add(b.clone())}),v}}),E.exports=i},function(E,T,e){var t=e(1),u=function(h,r,c,n){this.type=h,this.target=null,this.currentTarget=null,this.bubbles=c,this.cancelable=n,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=r};t.augment(u,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return t.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),E.exports=u},function(E,T,e){var t=e(1),u=e(7),s=e(47),h=e(49);function r(i,a,o){return i+a*Math.cos(o)}function c(i,a,o){return i+a*Math.sin(o)}var n=function i(a){i.superclass.constructor.call(this,a)};n.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(n,u),t.augment(n,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var a=this._attrs,o=a.x,l=a.y,f=a.r,v=a.startAngle,b=a.endAngle,g=a.clockwise,y=this.getHitLineWidth(),_=y/2,M=s.box(o,l,f,v,b,g);return M.minX-=_,M.minY-=_,M.maxX+=_,M.maxY+=_,M},getStartTangent:function(){var a=this._attrs,o=a.x,l=a.y,f=a.startAngle,v=a.r,b=a.clockwise,g=Math.PI/180;b&&(g*=-1);var y=[],_=r(o,v,f+g),M=c(l,v,f+g),x=r(o,v,f),m=c(l,v,f);return y.push([_,M]),y.push([x,m]),y},getEndTangent:function(){var a=this._attrs,o=a.x,l=a.y,f=a.endAngle,v=a.r,b=a.clockwise,g=Math.PI/180,y=[];b&&(g*=-1);var _=r(o,v,f+g),M=c(l,v,f+g),x=r(o,v,f),m=c(l,v,f);return y.push([x,m]),y.push([_,M]),y},createPath:function(a){var o=this._attrs,l=o.x,f=o.y,v=o.r,b=o.startAngle,g=o.endAngle,y=o.clockwise;a=a||self.get("context"),a.beginPath(),a.arc(l,f,v,b,g,y)},afterPath:function(a){var o=this._attrs;if(a=a||this.get("context"),o.startArrow){var l=this.getStartTangent();h.addStartArrow(a,o,l[0][0],l[0][1],l[1][0],l[1][1])}if(o.endArrow){var f=this.getEndTangent();h.addEndArrow(a,o,f[0][0],f[0][1],f[1][0],f[1][1])}}}),E.exports=n},function(E,T,e){var t=e(1),u=e(7),s=function h(r){h.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,r:0,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,c=r.x,n=r.y,i=r.r,a=this.getHitLineWidth(),o=a/2+i;return{minX:c-o,minY:n-o,maxX:c+o,maxY:n+o}},createPath:function(r){var c=this._attrs,n=c.x,i=c.y,a=c.r;r.beginPath(),r.arc(n,i,a,0,Math.PI*2,!1),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=function h(r){h.superclass.constructor.call(this,r)};t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var r=this,c=r._attrs,n=c.x,i=c.y,a=c.width,o=c.height,l=this.getHitLineWidth(),f=l/2;return{minX:n-f,minY:i-f,maxX:n+a+f,maxY:i+o+f}}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=function h(r){h.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,c=r.x,n=r.y,i=r.rx,a=r.ry,o=this.getHitLineWidth(),l=i+o/2,f=a+o/2;return{minX:c-l,minY:n-f,maxX:c+l,maxY:n+f}},createPath:function(r){var c=this._attrs,n=c.x,i=c.y,a=c.rx,o=c.ry;r=r||self.get("context");var l=a>o?a:o,f=a>o?1:a/o,v=a>o?o/a:1,b=[1,0,0,0,1,0,0,0,1];t.mat3.scale(b,b,[f,v]),t.mat3.translate(b,b,[n,i]),r.beginPath(),r.save(),r.transform(b[0],b[1],b[3],b[4],b[6],b[7]),r.arc(0,0,l,0,Math.PI*2),r.restore(),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(47),h=function r(c){r.superclass.constructor.call(this,c)};h.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},t.extend(h,u),t.augment(h,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var c=this,n=c._attrs,i=n.x,a=n.y,o=n.rs,l=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,g=this.getHitLineWidth(),y=s.box(i,a,o,f,v,b),_=s.box(i,a,l,f,v,b),M=Math.min(y.minX,_.minX),x=Math.min(y.minY,_.minY),m=Math.max(y.maxX,_.maxX),S=Math.max(y.maxY,_.maxY),P=g/2;return{minX:M-P,minY:x-P,maxX:m+P,maxY:S+P}},createPath:function(c){var n=this._attrs,i=n.x,a=n.y,o=n.rs,l=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,g={x:Math.cos(f)*o+i,y:Math.sin(f)*o+a},y={x:Math.cos(f)*l+i,y:Math.sin(f)*l+a},_={x:Math.cos(v)*o+i,y:Math.sin(v)*o+a};c=c||self.get("context"),c.beginPath(),c.moveTo(g.x,g.y),c.lineTo(y.x,y.y),c.arc(i,a,l,f,v,b),c.lineTo(_.x,_.y),c.arc(i,a,o,v,f,!b),c.closePath()}}),E.exports=h},function(E,T,e){var t=e(1),u=e(7),s=function h(r){h.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},t.extend(s,u),t.augment(s,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var r=this._attrs;(!this._cfg.attrs||this._cfg.attrs.img!==r.img)&&this._setAttrImg();var c=r.x,n=r.y,i=r.width,a=r.height;return{minX:c,minY:n,maxX:c+i,maxY:n+a}},_beforeSetLoading:function(r){var c=this.get("canvas");return r===!1&&this.get("toDraw")===!0&&(this._cfg.loading=!1,c.draw()),r},_setAttrImg:function(){var r=this,c=r._attrs,n=c.img;if(t.isString(n)){var i=new Image;i.onload=function(){if(r.get("destroyed"))return!1;r.attr("imgSrc",n),r.attr("img",i);var a=r.get("callback");a&&a.call(r),r.set("loading",!1)},i.src=n,i.crossOrigin="Anonymous",r.set("loading",!0)}else return n instanceof Image?(c.width||r.attr("width",n.width),c.height||r.attr("height",n.height),n):n instanceof HTMLElement&&t.isString(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"?(c.width||r.attr("width",Number(n.getAttribute("width"))),c.height||r.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(c.width||r.attr("width",n.width),c.height||r.attr("height",n.height),n):null},drawInner:function(r){if(this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")){this.set("toDraw",!0);return}this._drawImage(r),this._cfg.hasUpdate=!1},_drawImage:function(r){var c=this._attrs,n=c.x,i=c.y,a=c.img,o=c.width,l=c.height,f=c.sx,v=c.sy,b=c.swidth,g=c.sheight;this.set("toDraw",!1);var y=a;if(y instanceof ImageData&&(y=new Image,y.src=a),y instanceof Image||y instanceof HTMLElement&&t.isString(y.nodeName)&&y.nodeName.toUpperCase()==="CANVAS"){if(t.isNil(f)||t.isNil(v)||t.isNil(b)||t.isNil(g)){r.drawImage(y,n,i,o,l);return}if(!t.isNil(f)&&!t.isNil(v)&&!t.isNil(b)&&!t.isNil(g)){r.drawImage(y,f,v,b,g,n,i,o,l);return}}}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(49),h=e(48),r=function c(n){c.superclass.constructor.call(this,n)};r.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(r,u),t.augment(r,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,i=n.x1,a=n.y1,o=n.x2,l=n.y2,f=this.getHitLineWidth();return h.box(i,a,o,l,f)},createPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,l=i.x2,f=i.y2;n=n||self.get("context"),n.beginPath(),n.moveTo(a,o),n.lineTo(l,f)},afterPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,l=i.x2,f=i.y2;n=n||this.get("context"),i.startArrow&&s.addStartArrow(n,i,l,f,a,o),i.endArrow&&s.addEndArrow(n,i,a,o,l,f)},getPoint:function(n){var i=this._attrs;return{x:h.at(i.x1,i.x2,n),y:h.at(i.y1,i.y2,n)}}}),E.exports=r},function(E,T){E.exports={xAt:function(t,u,s,h,r){return u*Math.cos(t)*Math.cos(r)-s*Math.sin(t)*Math.sin(r)+h},yAt:function(t,u,s,h,r){return u*Math.sin(t)*Math.cos(r)+s*Math.cos(t)*Math.sin(r)+h},xExtrema:function(t,u,s){return Math.atan(-s/u*Math.tan(t))},yExtrema:function(t,u,s){return Math.atan(s/(u*Math.tan(t)))}}},function(E,T,e){var t=e(1),u=t.vec2;function s(c,n,i,a){var o=1-a;return o*(o*c+2*a*n)+a*a*i}function h(c,n,i,a,o,l,f,v,b){var g,y=.005,_=Infinity,M,x,m,S,P,A,O=1e-4,R=[f,v];for(S=0;S<1;S+=.05)x=[s(c,i,o,S),s(n,a,l,S)],M=u.squaredDistance(R,x),M<_&&(g=S,_=M);for(_=Infinity,A=0;A<32&&!(y<O);A++){var H=g-y,N=g+y;x=[s(c,i,o,H),s(n,a,l,H)],M=u.squaredDistance(R,x),H>=0&&M<_?(g=H,_=M):(m=[s(c,i,o,N),s(n,a,l,N)],P=u.squaredDistance(R,m),N<=1&&P<_?(g=N,_=P):y*=.5)}return b&&(b.x=s(c,i,o,g),b.y=s(n,a,l,g)),Math.sqrt(_)}function r(c,n,i){var a=c+i-2*n;if(t.isNumberEqual(a,0))return[.5];var o=(c-n)/a;return o<=1&&o>=0?[o]:[]}E.exports={at:s,projectPoint:function(n,i,a,o,l,f,v,b){var g={};return h(n,i,a,o,l,f,v,b,g),g},pointDistance:h,extrema:r}},function(E,T,e){var t=e(1),u=e(7),s=e(50),h=e(37),r=e(49),c=e(77),n=e(75),i=function a(o){a.superclass.constructor.call(this,o)};i.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(i,u),t.augment(i,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(o){var l=this;if(t.isNil(o)){l.setSilent("segments",null),l.setSilent("box",void 0);return}var f=h.parsePath(o),v,b=[];if(!(!t.isArray(f)||f.length===0||f[0][0]!=="M"&&f[0][0]!=="m")){for(var g=f.length,y=0;y<f.length;y++){var _=f[y];v=new s(_,v,y===g-1),b.push(v)}l.setSilent("segments",b),l.setSilent("tCache",null),l.setSilent("box",null)}},calculateBox:function(){var o=this,l=o.get("segments");if(!l)return null;var f=this.getHitLineWidth(),v=Infinity,b=-Infinity,g=Infinity,y=-Infinity;return t.each(l,function(_){_.getBBox(f);var M=_.box;M&&(M.minX<v&&(v=M.minX),M.maxX>b&&(b=M.maxX),M.minY<g&&(g=M.minY),M.maxY>y&&(y=M.maxY))}),v===Infinity||g===Infinity?{minX:0,minY:0,maxX:0,maxY:0}:{minX:v,minY:g,maxX:b,maxY:y}},_setTcache:function(){var o=0,l=0,f=[],v,b,g,y,_=this._cfg.curve;!_||(t.each(_,function(M,x){g=_[x+1],y=M.length,g&&(o+=n.len(M[y-2],M[y-1],g[1],g[2],g[3],g[4],g[5],g[6]))}),t.each(_,function(M,x){g=_[x+1],y=M.length,g&&(v=[],v[0]=l/o,b=n.len(M[y-2],M[y-1],g[1],g[2],g[3],g[4],g[5],g[6]),l+=b,v[1]=l/o,f.push(v))}),this._cfg.tCache=f)},_calculateCurve:function(){var o=this,l=o._attrs,f=l.path;this._cfg.curve=c.pathTocurve(f)},getStartTangent:function(){var o=this.get("segments"),l,f,v,b;if(o.length>1)if(l=o[0].endPoint,f=o[1].endPoint,v=o[1].startTangent,b=[],t.isFunction(v)){var g=v();b.push([l.x-g[0],l.y-g[1]]),b.push([l.x,l.y])}else b.push([f.x,f.y]),b.push([l.x,l.y]);return b},getEndTangent:function(){var o=this.get("segments"),l=o.length,f,v,b,g;if(l>1)if(f=o[l-2].endPoint,v=o[l-1].endPoint,b=o[l-1].endTangent,g=[],t.isFunction(b)){var y=b();g.push([v.x-y[0],v.y-y[1]]),g.push([v.x,v.y])}else g.push([f.x,f.y]),g.push([v.x,v.y]);return g},getPoint:function(o){var l=this._cfg.tCache,f,v;l||(this._calculateCurve(),this._setTcache(),l=this._cfg.tCache);var b=this._cfg.curve;if(!l)return b?{x:b[0][1],y:b[0][2]}:null;t.each(l,function(M,x){o>=M[0]&&o<=M[1]&&(f=(o-M[0])/(M[1]-M[0]),v=x)});var g=b[v];if(t.isNil(g)||t.isNil(v))return null;var y=g.length,_=b[v+1];return{x:n.at(g[y-2],_[1],_[3],_[5],1-f),y:n.at(g[y-1],_[2],_[4],_[6],1-f)}},createPath:function(o){var l=this,f=l.get("segments");if(!!t.isArray(f)){o=o||l.get("context"),o.beginPath();for(var v=f.length,b=0;b<v;b++)f[b].draw(o)}},afterPath:function(o){var l=this,f=l._attrs,v=l.get("segments"),b=f.path;if(o=o||l.get("context"),!!t.isArray(v)&&v.length!==1&&!(!f.startArrow&&!f.endArrow)&&!(b[b.length-1]==="z"||b[b.length-1]==="Z"||f.fill)){var g=l.getStartTangent();r.addStartArrow(o,f,g[0][0],g[0][1],g[1][0],g[1][1]);var y=l.getEndTangent();r.addEndArrow(o,f,y[0][0],y[0][1],y[1][0],y[1][1])}}}),E.exports=i},function(E,T,e){var t=e(1),u=e(7),s=function h(r){h.superclass.constructor.call(this,r)};s.ATTRS={points:null,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this,c=r._attrs,n=c.points,i=this.getHitLineWidth();if(!n||n.length===0)return null;var a=Infinity,o=Infinity,l=-Infinity,f=-Infinity;t.each(n,function(b){var g=b[0],y=b[1];g<a&&(a=g),g>l&&(l=g),y<o&&(o=y),y>f&&(f=y)});var v=i/2;return{minX:a-v,minY:o-v,maxX:l+v,maxY:f+v}},createPath:function(r){var c=this,n=c._attrs,i=n.points;i.length<2||(r=r||c.get("context"),r.beginPath(),t.each(i,function(a,o){o===0?r.moveTo(a[0],a[1]):r.lineTo(a[0],a[1])}),r.closePath())}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(49),h=e(48),r=function c(n){c.superclass.constructor.call(this,n)};r.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},t.extend(r,u),t.augment(r,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this,i=n._attrs,a=this.getHitLineWidth(),o=i.points;if(!o||o.length===0)return null;var l=Infinity,f=Infinity,v=-Infinity,b=-Infinity;t.each(o,function(y){var _=y[0],M=y[1];_<l&&(l=_),_>v&&(v=_),M<f&&(f=M),M>b&&(b=M)});var g=a/2;return{minX:l-g,minY:f-g,maxX:v+g,maxY:b+g}},_setTcache:function(){var n=this,i=n._attrs,a=i.points,o=0,l=0,f=[],v,b;!a||a.length===0||(t.each(a,function(g,y){a[y+1]&&(o+=h.len(g[0],g[1],a[y+1][0],a[y+1][1]))}),!(o<=0)&&(t.each(a,function(g,y){a[y+1]&&(v=[],v[0]=l/o,b=h.len(g[0],g[1],a[y+1][0],a[y+1][1]),l+=b,v[1]=l/o,f.push(v))}),this.tCache=f))},createPath:function(n){var i=this,a=i._attrs,o=a.points,l,f;if(!(o.length<2)){for(n=n||i.get("context"),n.beginPath(),n.moveTo(o[0][0],o[0][1]),f=1,l=o.length-1;f<l;f++)n.lineTo(o[f][0],o[f][1]);n.lineTo(o[l][0],o[l][1])}},getStartTangent:function(){var n=this.__attrs.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i},getEndTangent:function(){var n=this.__attrs.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a},afterPath:function(n){var i=this,a=i._attrs,o=a.points,l=o.length-1;n=n||i.get("context"),a.startArrow&&s.addStartArrow(n,a,o[1][0],o[1][1],o[0][0],o[0][1]),a.endArrow&&s.addEndArrow(n,a,o[l-1][0],o[l-1][1],o[l][0],o[l][1])},getPoint:function(n){var i=this._attrs,a=i.points,o=this.tCache,l,f;return o||(this._setTcache(),o=this.tCache),t.each(o,function(v,b){n>=v[0]&&n<=v[1]&&(l=(n-v[0])/(v[1]-v[0]),f=b)}),{x:h.at(a[f][0],a[f+1][0],l),y:h.at(a[f][1],a[f+1][1],l)}}}),E.exports=r},function(E,T,e){var t=e(1),u=e(37),s=u.parseRadius,h=e(7),r=function c(n){c.superclass.constructor.call(this,n)};r.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},t.extend(r,h),t.augment(r,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var n=this,i=n._attrs,a=i.x,o=i.y,l=i.width,f=i.height,v=this.getHitLineWidth(),b=v/2;return{minX:a-b,minY:o-b,maxX:a+l+b,maxY:o+f+b}},createPath:function(n){var i=this,a=i._attrs,o=a.x,l=a.y,f=a.width,v=a.height,b=a.radius;if(n=n||i.get("context"),n.beginPath(),b===0)n.rect(o,l,f,v);else{var g=s(b);n.moveTo(o+g.r1,l),n.lineTo(o+f-g.r2,l),g.r2!==0&&n.arc(o+f-g.r2,l+g.r2,g.r2,-Math.PI/2,0),n.lineTo(o+f,l+v-g.r3),g.r3!==0&&n.arc(o+f-g.r3,l+v-g.r3,g.r3,0,Math.PI/2),n.lineTo(o+g.r4,l+v),g.r4!==0&&n.arc(o+g.r4,l+v-g.r4,g.r4,Math.PI/2,Math.PI),n.lineTo(o,l+g.r1),g.r1!==0&&n.arc(o+g.r1,l+g.r1,g.r1,Math.PI,Math.PI*1.5),n.closePath()}}}),E.exports=r},function(E,T,e){var t=e(1),u=e(7),s=function h(r){h.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var r=this._attrs.fontSize;r&&+r<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+r/12,+r/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var r=this._attrs,c=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;r.font=[a,o,i,c+"px",n].join(" ")},_setAttrText:function(){var r=this._attrs,c=r.text,n=null;if(t.isString(c)&&c.indexOf(`
`)!==-1){n=c.split(`
`);var i=n.length;r.lineCount=i}r.textArr=n},_getTextHeight:function(){var r=this._attrs,c=r.lineCount,n=r.fontSize*1;if(c>1){var i=this._getSpaceingY();return n*c+i*(c-1)}return n},isHitBox:function(){return!1},calculateBox:function(){var r=this,c=r._attrs,n=this._cfg;(!n.attrs||n.hasUpdate)&&(this._assembleFont(),this._setAttrText()),c.textArr||this._setAttrText();var i=c.x,a=c.y,o=r.measureText();if(!o)return{minX:i,minY:a,maxX:i,maxY:a};var l=r._getTextHeight(),f=c.textAlign,v=c.textBaseline,b=r.getHitLineWidth(),g={x:i,y:a-l};f&&(f==="end"||f==="right"?g.x-=o:f==="center"&&(g.x-=o/2)),v&&(v==="top"?g.y+=l:v==="middle"&&(g.y+=l/2)),this.set("startPoint",g);var y=b/2;return{minX:g.x-y,minY:g.y-y,maxX:g.x+o+y,maxY:g.y+l+y}},_getSpaceingY:function(){var r=this._attrs,c=r.lineHeight,n=r.fontSize*1;return c?c-n:n*.14},drawInner:function(r){var c=this,n=c._attrs,i=this._cfg;(!i.attrs||i.hasUpdate)&&(this._assembleFont(),this._setAttrText()),r.font=n.font;var a=n.text;if(!!a){var o=n.textArr,l=n.x,f=n.y;if(r.beginPath(),c.hasStroke()){var v=n.strokeOpacity;!t.isNil(v)&&v!==1&&(r.globalAlpha=v),o?c._drawTextArr(r,!1):r.strokeText(a,l,f),r.globalAlpha=1}if(c.hasFill()){var b=n.fillOpacity;!t.isNil(b)&&b!==1&&(r.globalAlpha=b),o?c._drawTextArr(r,!0):r.fillText(a,l,f)}i.hasUpdate=!1}},_drawTextArr:function(r,c){var n=this._attrs.textArr,i=this._attrs.textBaseline,a=this._attrs.fontSize*1,o=this._getSpaceingY(),l=this._attrs.x,f=this._attrs.y,v=this.getBBox(),b=v.maxY-v.minY,g;t.each(n,function(y,_){g=f+_*(o+a)-b+a,i==="middle"&&(g+=b-a-(b-a)/2),i==="top"&&(g+=b-a),c?r.fillText(y,l,g):r.strokeText(y,l,g)})},measureText:function(){var r=this,c=r._attrs,n=c.text,i=c.font,a=c.textArr,o,l=0;if(!t.isNil(n)){var f=document.createElement("canvas").getContext("2d");return f.save(),f.font=i,a?t.each(a,function(v){o=f.measureText(v).width,l<o&&(l=o),f.restore()}):(l=f.measureText(n).width,f.restore()),l}}}),E.exports=s},function(E,T,e){E.exports={isFunction:e(14),isObject:e(39),isBoolean:e(191),isNil:e(6),isString:e(15),isArray:e(4),isNumber:e(11),isEmpty:e(167),uniqueId:e(194),clone:e(80),deepMix:e(81),assign:e(10),merge:e(81),upperFirst:e(189),each:e(2),isEqual:e(83),toArray:e(57),extend:e(162),augment:e(158),remove:e(156),isNumberEqual:e(55),toRadian:e(172),toDegree:e(170),mod:e(169),clamp:e(84),createDom:e(159),modifyCSS:e(160),requestAnimationFrame:e(161),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(2),u=8,s=4;function h(c){var n=[];return t(c,function(i){n=n.concat(i)}),n}function r(c,n){var i;for(i=n;i>0&&c%i!=0;i--);if(i===1)for(i=n;i>0&&(c-1)%i!=0;i--);return i}E.exports=function(c){var n={},i=[],a=c.isRounding,o=h(c.data),l=o.length,f=c.maxCount||u,v;if(a?(v=r(l-1,f-1)+1,v===2?v=f:v<f-s&&(v=f-s)):v=f,!a&&l<=v+v/2)i=[].concat(o);else{for(var b=parseInt(l/(v-1),10),g=o.map(function(x,m){return m%b==0?o.slice(m,m+b):null}).filter(function(x){return x}),y=1,_=g.length;y<_&&(a?y*b<l-b:y<v-1);y++)i.push(g[y][0]);if(o.length){i.unshift(o[0]);var M=o[l-1];i.indexOf(M)===-1&&i.push(M)}}return n.categories=o,n.ticks=i,n}},function(E,T){var e=12;function t(r){var c=1;if(r===Infinity||r===-Infinity)throw new Error("Not support Infinity!");if(r<1){for(var n=0;r<1;)c=c/10,r=r*10,n++;c.toString().length>e&&(c=parseFloat(c.toFixed(n)))}else for(;r>10;)c=c*10,r=r/10;return c}function u(r,c){var n=r.length;if(n===0)return NaN;var i=r[0];if(c<r[0])return NaN;if(c>=r[n-1])return r[n-1];for(var a=1;a<r.length&&!(c<r[a]);a++)i=r[a];return i}function s(r,c){var n=r.length;if(n===0)return NaN;var i;if(c>r[n-1])return NaN;if(c<r[0])return r[0];for(var a=1;a<r.length;a++)if(c<=r[a]){i=r[a];break}return i}var h={snapFactorTo:function(c,n,i){if(isNaN(c))return NaN;var a=1;if(c!==0){c<0&&(a=-1),c=c*a;var o=t(c);a=a*o,c=c/o}i==="floor"?c=h.snapFloor(n,c):i==="ceil"?c=h.snapCeiling(n,c):c=h.snapTo(n,c);var l=parseFloat((c*a).toPrecision(e));if(Math.abs(a)<1&&l.toString().length>e){var f=parseInt(1/a),v=a>0?1:-1;l=c/f*v}return l},snapMultiple:function(c,n,i){var a;return i==="ceil"?a=Math.ceil(c/n):i==="floor"?a=Math.floor(c/n):a=Math.round(c/n),a*n},snapTo:function(c,n){var i=u(c,n),a=s(c,n);if(isNaN(i)||isNaN(a)){if(c[0]>=n)return c[0];var o=c[c.length-1];if(o<=n)return o}return Math.abs(n-i)<Math.abs(a-n)?i:a},snapFloor:function(c,n){return u(c,n)},snapCeiling:function(c,n){return s(c,n)},fixedBase:function(c,n){var i=n.toString(),a=i.indexOf("."),o=i.indexOf("e-");if(a<0&&o<0)return Math.round(c);var l=o>=0?parseInt(i.substr(o+2),10):i.substr(a+1).length;return l>20&&(l=20),parseFloat(c.toFixed(l))}};E.exports=h},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(26),s=e(151),h=e(2),r=e(11),c=e(15),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},o.init=function(){var f=this,v=f.values,b=f.tickCount;if(h(v,function(_,M){v[M]=_.toString()}),!f.ticks){var g=v;if(b){var y=s({maxCount:b,data:v,isRounding:f.isRounding});g=y.ticks}this.ticks=g}},o.getText=function(f){return this.values.indexOf(f)===-1&&r(f)&&(f=this.values[Math.round(f)]),i.prototype.getText.call(this,f)},o.translate=function(f){var v=this.values.indexOf(f);return v===-1&&r(f)?v=f:v===-1&&(v=NaN),v},o.scale=function(f){var v=this.rangeMin(),b=this.rangeMax(),g;return(c(f)||this.values.indexOf(f)!==-1)&&(f=this.translate(f)),this.values.length>1?g=f/(this.values.length-1):g=f,v+g*(b-v)},o.invert=function(f){if(c(f))return f;var v=this.rangeMin(),b=this.rangeMax();f<v&&(f=v),f>b&&(f=b);var g=(f-v)/(b-v),y=Math.round(g*(this.values.length-1))%this.values.length;return y=y||0,this.values[y]},a}(u);u.Cat=n,E.exports=n},function(E,T,e){var t=e(187),u=e(26);u.Linear=e(51),u.Identity=e(353),u.Cat=e(153),u.Time=e(357),u.TimeCat=e(356),u.Log=e(354),u.Pow=e(355);var s=function(n){if(u.hasOwnProperty(n)){var i=t(n);u[i]=function(a){return new u[n](a)}}};for(var h in u)s(h);var r=["cat","timeCat"];u.isCategory=function(c){return r.indexOf(c)>=0},E.exports=u},function(E,T,e){var t=e(21),u=Array.prototype.splice,s=function(r,c){if(!t(r))return[];for(var n=r?c.length:0,i=n-1;n--;){var a=void 0,o=c[n];(n===i||o!==a)&&(a=o,u.call(r,o,1))}return r};E.exports=s},function(E,T){var e=Array.prototype,t=e.splice,u=e.indexOf,s=e.slice,h=function(c){for(var n=s.call(arguments,1),i=0;i<n.length;i++)for(var a=n[i],o=-1;(o=u.call(c,a))>-1;)t.call(c,o,1);return c};E.exports=h},function(E,T,e){var t=e(2),u=e(53),s=function(r){var c=[];return t(r,function(n){u(c,n)||c.push(n)}),c};E.exports=s},function(E,T,e){var t=e(14),u=e(57),s=e(10),h=function(c){for(var n=u(arguments),i=1;i<n.length;i++){var a=n[i];t(a)&&(a=a.prototype),s(c.prototype,a)}};E.exports=h},function(E,T){var e=document.createElement("table"),t=document.createElement("tr"),u=/^\s*<(\w+|!)[^>]*>/,s={tr:document.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:t,th:t,"*":document.createElement("div")};E.exports=function(r){var c=u.test(r)&&RegExp.$1;c in s||(c="*");var n=s[c];r=r.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+r;var i=n.childNodes[0];return n.removeChild(i),i}},function(E,T){E.exports=function(t,u){if(t)for(var s in u)u.hasOwnProperty(s)&&(t.style[s]=u[s]);return t}},function(E,T){E.exports=function(t){var u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(s){return setTimeout(s,16)};return u(t)}},function(E,T,e){var t=e(14),u=e(10),s=function(r,c,n,i){t(c)||(n=c,c=r,r=function(){});var a=Object.create?function(l,f){return Object.create(l,{constructor:{value:f}})}:function(l,f){function v(){}v.prototype=l;var b=new v;return b.constructor=f,b},o=a(c.prototype,r);return r.prototype=u(o,r.prototype),r.superclass=a(c.prototype,c),u(o,n),u(r,i),r};E.exports=s},function(E,T,e){var t=e(2),u=e(4),s=Object.prototype.hasOwnProperty,h=function(c,n){if(!n||!u(c))return c;var i={},a=null;return t(c,function(o){a=n(o),s.call(i,a)?i[a].push(o):i[a]=[o]}),i};E.exports=h},function(E,T,e){var t=e(14),u=e(4),s=e(163),h=function(c,n){if(!n)return{0:c};if(!t(n)){var i=u(n)?n:n.replace(/\s+/g,"").split("*");n=function(l){for(var f="_",v=0,b=i.length;v<b;v++)f+=l[i[v]]&&l[i[v]].toString();return f}}var a=s(c,n);return a};E.exports=h},function(E,T,e){var t=e(164),u=function(h,r){if(!r)return[h];var c=t(h,r),n=[];for(var i in c)n.push(c[i]);return n};E.exports=u},function(E,T,e){var t=e(2),u=e(10),s=e(378),h=e(364),r=e(380),c=e(382),n=e(390),i=e(56),a=e(401),o=e(405),l=e(409),f=e(414),v={DOMUtil:s,DomUtil:s,MatrixUtil:i,PathUtil:o,arrayUtil:h,domUtil:s,eventUtil:r,formatUtil:c,mathUtil:n,matrixUtil:i,objectUtil:a,stringUtil:l,pathUtil:o,typeUtil:f,augment:e(158),clone:e(80),debounce:e(369),deepMix:e(81),each:t,extend:e(162),filter:e(82),group:e(165),groupBy:e(163),groupToMap:e(164),indexOf:e(386),isEmpty:e(167),isEqual:e(83),isEqualWith:e(387),map:e(388),mix:u,pick:e(408),throttle:e(413),toArray:e(57),toString:e(38),uniqueId:e(194)};t([s,h,r,c,n,i,a,o,l,f],function(b){u(v,b)}),E.exports=v},function(E,T,e){var t=e(6),u=e(21),s=e(190),h=e(193),r=Object.prototype.hasOwnProperty;function c(n){if(t(n))return!0;if(u(n))return!n.length;var i=s(n);if(i==="Map"||i==="Set")return!n.size;if(h(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}E.exports=c},function(E,T,e){var t=e(4),u=e(14),s=e(2),h=function(c,n){if(!!t(c)){var i=c[0],a=void 0;u(n)?a=n(c[0]):a=c[0][n];var o=void 0;return s(c,function(l){u(n)?o=n(l):o=l[n],o>a&&(i=l,a=o)}),i}};E.exports=h},function(E,T){var e=function(u,s){return(u%s+s)%s};E.exports=e},function(E,T){var e=180/Math.PI,t=function(s){return e*s};E.exports=t},function(E,T){E.exports=parseInt},function(E,T){var e=Math.PI/180,t=function(s){return e*s};E.exports=t},function(E,T,e){var t=e(80),u=e(2),s=e(85);E.exports=function(r,c){return r=t(r),u(c,function(n){switch(n[0]){case"t":s.translate(r,r,[n[1],n[2]]);break;case"s":s.scale(r,r,[n[1],n[2]]);break;case"r":s.rotate(r,r,n[1]);break;case"m":s.multiply(r,r,n[1]);break;default:return!1}}),r}},function(E,T,e){var t=e(349),u=e(84);t.angle=function(s,h){var r=t.dot(s,h)/(t.length(s)*t.length(h));return Math.acos(u(r,-1,1))},t.direction=function(s,h){return s[0]*h[1]-h[0]*s[1]},t.angleTo=function(s,h,r){var c=t.angle(s,h),n=t.direction(s,h)>=0;return r?n?Math.PI*2-c:c:n?c:Math.PI*2-c},t.vertical=function(s,h,r){return r?(s[0]=h[1],s[1]=-1*h[0]):(s[0]=-1*h[1],s[1]=h[0]),s},E.exports=t},function(E,T,e){var t=e(350);E.exports=t},function(E,T){E.exports=function(e,t){return e.hasOwnProperty(t)}},function(E,T,e){var t=e(178),u=e(6);function s(h,r){var c=t(r),n=c.length;if(u(h))return!n;for(var i=0;i<n;i+=1){var a=c[i];if(r[a]!==h[a]||!(a in h))return!1}return!0}E.exports=s},function(E,T,e){var t=e(2),u=e(14),s=Object.keys?function(h){return Object.keys(h)}:function(h){var r=[];return t(h,function(c,n){u(h)&&n==="prototype"||r.push(n)}),r};E.exports=s},function(E,T,e){var t=e(2),u=e(14),s=Object.values?function(h){return Object.values(h)}:function(h){var r=[];return t(h,function(c,n){u(h)&&n==="prototype"||r.push(c)}),r};E.exports=s},function(E,T){E.exports=function(t,u){for(var s=[],h=0,r=t.length;r-2*!u>h;h+=2){var c=[{x:+t[h-2],y:+t[h-1]},{x:+t[h],y:+t[h+1]},{x:+t[h+2],y:+t[h+3]},{x:+t[h+4],y:+t[h+5]}];u?h?r-4===h?c[3]={x:+t[0],y:+t[1]}:r-2===h&&(c[2]={x:+t[0],y:+t[1]},c[3]={x:+t[2],y:+t[3]}):c[0]={x:+t[r-2],y:+t[r-1]}:r-4===h?c[3]=c[2]:h||(c[0]={x:+t[h],y:+t[h+1]}),s.push(["C",(-c[0].x+6*c[1].x+c[2].x)/6,(-c[0].y+6*c[1].y+c[2].y)/6,(c[1].x+6*c[2].x-c[3].x)/6,(c[1].y+6*c[2].y-c[3].y)/6,c[2].x,c[2].y])}return s}},function(E,T){var e=/,?([a-z]),?/gi;E.exports=function(u){return u.join(",").replace(e,"$1")}},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},t=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,u=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");E.exports=function(r){if(!r)return null;if((typeof r=="undefined"?"undefined":e(r))===e([]))return r;var c={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(r).replace(u,function(i,a,o){var l=[],f=a.toLowerCase();if(o.replace(s,function(v,b){b&&l.push(+b)}),f==="m"&&l.length>2&&(n.push([a].concat(l.splice(0,2))),f="l",a=a==="m"?"l":"L"),f==="o"&&l.length===1&&n.push([a,l[0]]),f==="r")n.push([a].concat(l));else for(;l.length>=c[f]&&(n.push([a].concat(l.splice(0,c[f]))),!!c[f]););}),n}},function(E,T,e){var t=e(182),u=e(180);function s(h,r,c,n,i){var a=[];if(i===null&&n===null&&(n=c),h=+h,r=+r,c=+c,n=+n,i!==null){var o=Math.PI/180,l=h+c*Math.cos(-n*o),f=h+c*Math.cos(-i*o),v=r+c*Math.sin(-n*o),b=r+c*Math.sin(-i*o);a=[["M",l,v],["A",c,c,0,+(i-n>180),0,f,b]]}else a=[["M",h,r],["m",0,-n],["a",c,n,0,1,1,0,2*n],["a",c,n,0,1,1,0,-2*n],["z"]];return a}E.exports=function(r){if(r=t(r),!r||!r.length)return[["M",0,0]];var c=[],n=0,i=0,a=0,o=0,l=0,f=void 0,v=void 0;r[0][0]==="M"&&(n=+r[0][1],i=+r[0][2],a=n,o=i,l++,c[0]=["M",n,i]);for(var b=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",g,y,_=l,M=r.length;_<M;_++){if(c.push(g=[]),y=r[_],f=y[0],f!==f.toUpperCase())switch(g[0]=f.toUpperCase(),g[0]){case"A":g[1]=y[1],g[2]=y[2],g[3]=y[3],g[4]=y[4],g[5]=y[5],g[6]=+y[6]+n,g[7]=+y[7]+i;break;case"V":g[1]=+y[1]+i;break;case"H":g[1]=+y[1]+n;break;case"R":v=[n,i].concat(y.slice(1));for(var x=2,m=v.length;x<m;x++)v[x]=+v[x]+n,v[++x]=+v[x]+i;c.pop(),c=c.concat(u(v,b));break;case"O":c.pop(),v=s(n,i,y[1],y[2]),v.push(v[0]),c=c.concat(v);break;case"U":c.pop(),c=c.concat(s(n,i,y[1],y[2],y[3])),g=["U"].concat(c[c.length-1].slice(-2));break;case"M":a=+y[1]+n,o=+y[2]+i;break;default:for(var S=1,P=y.length;S<P;S++)g[S]=+y[S]+(S%2?n:i)}else if(f==="R")v=[n,i].concat(y.slice(1)),c.pop(),c=c.concat(u(v,b)),g=["R"].concat(y.slice(-2));else if(f==="O")c.pop(),v=s(n,i,y[1],y[2]),v.push(v[0]),c=c.concat(v);else if(f==="U")c.pop(),c=c.concat(s(n,i,y[1],y[2],y[3])),g=["U"].concat(c[c.length-1].slice(-2));else for(var A=0,O=y.length;A<O;A++)g[A]=y[A];if(f=f.toUpperCase(),f!=="O")switch(g[0]){case"Z":n=+a,i=+o;break;case"H":n=g[1];break;case"V":i=g[1];break;case"M":a=g[g.length-2],o=g[g.length-1];break;default:n=g[g.length-2],i=g[g.length-1]}}return c}},function(E,T,e){var t=e(183),u=function r(c,n,i,a,o,l,f,v,b,g){i===a&&(i+=1);var y=Math.PI*120/180,_=Math.PI/180*(+o||0),M=[],x=void 0,m=void 0,S=void 0,P=void 0,A=void 0,O=function(bt,Y,rt){var ot=bt*Math.cos(rt)-Y*Math.sin(rt),$=bt*Math.sin(rt)+Y*Math.cos(rt);return{x:ot,y:$}};if(g)m=g[0],S=g[1],P=g[2],A=g[3];else{x=O(c,n,-_),c=x.x,n=x.y,x=O(v,b,-_),v=x.x,b=x.y,c===v&&n===b&&(v+=1,b+=1);var R=(c-v)/2,H=(n-b)/2,N=R*R/(i*i)+H*H/(a*a);N>1&&(N=Math.sqrt(N),i=N*i,a=N*a);var K=i*i,V=a*a,k=(l===f?-1:1)*Math.sqrt(Math.abs((K*V-K*H*H-V*R*R)/(K*H*H+V*R*R)));P=k*i*H/a+(c+v)/2,A=k*-a*R/i+(n+b)/2,m=Math.asin(((n-A)/a).toFixed(9)),S=Math.asin(((b-A)/a).toFixed(9)),m=c<P?Math.PI-m:m,S=v<P?Math.PI-S:S,m<0&&(m=Math.PI*2+m),S<0&&(S=Math.PI*2+S),f&&m>S&&(m=m-Math.PI*2),!f&&S>m&&(S=S-Math.PI*2)}var Z=S-m;if(Math.abs(Z)>y){var X=S,at=v,pt=b;S=m+y*(f&&S>m?1:-1),v=P+i*Math.cos(S),b=A+a*Math.sin(S),M=r(v,b,i,a,o,0,f,at,pt,[S,X,P,A])}Z=S-m;var gt=Math.cos(m),ft=Math.sin(m),Rt=Math.cos(S),Nt=Math.sin(S),Dt=Math.tan(Z/4),St=4/3*i*Dt,xt=4/3*a*Dt,Ot=[c,n],it=[c+St*ft,n-xt*gt],At=[v+St*Nt,b-xt*Rt],z=[v,b];if(it[0]=2*Ot[0]-it[0],it[1]=2*Ot[1]-it[1],g)return[it,At,z].concat(M);M=[it,At,z].concat(M).join().split(",");for(var q=[],mt=0,et=M.length;mt<et;mt++)q[mt]=mt%2?O(M[mt-1],M[mt],_).y:O(M[mt],M[mt+1],_).x;return q},s=function(c,n,i,a){return[c,n,i,a,i,a]},h=function(c,n,i,a,o,l){var f=1/3,v=2/3;return[f*c+v*i,f*n+v*a,f*o+v*i,f*l+v*a,o,l]};E.exports=function(c,n){var i=t(c),a=n&&t(n),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f=[],v=[],b="",g="",y=void 0,_=function(H,N,K){var V=void 0,k=void 0;if(!H)return["C",N.x,N.y,N.x,N.y,N.x,N.y];switch(!(H[0]in{T:1,Q:1})&&(N.qx=N.qy=null),H[0]){case"M":N.X=H[1],N.Y=H[2];break;case"A":H=["C"].concat(u.apply(0,[N.x,N.y].concat(H.slice(1))));break;case"S":K==="C"||K==="S"?(V=N.x*2-N.bx,k=N.y*2-N.by):(V=N.x,k=N.y),H=["C",V,k].concat(H.slice(1));break;case"T":K==="Q"||K==="T"?(N.qx=N.x*2-N.qx,N.qy=N.y*2-N.qy):(N.qx=N.x,N.qy=N.y),H=["C"].concat(h(N.x,N.y,N.qx,N.qy,H[1],H[2]));break;case"Q":N.qx=H[1],N.qy=H[2],H=["C"].concat(h(N.x,N.y,H[1],H[2],H[3],H[4]));break;case"L":H=["C"].concat(s(N.x,N.y,H[1],H[2]));break;case"H":H=["C"].concat(s(N.x,N.y,H[1],N.y));break;case"V":H=["C"].concat(s(N.x,N.y,N.x,H[1]));break;case"Z":H=["C"].concat(s(N.x,N.y,N.X,N.Y));break;default:break}return H},M=function(H,N){if(H[N].length>7){H[N].shift();for(var K=H[N];K.length;)f[N]="A",a&&(v[N]="A"),H.splice(N++,0,["C"].concat(K.splice(0,6)));H.splice(N,1),y=Math.max(i.length,a&&a.length||0)}},x=function(H,N,K,V,k){H&&N&&H[k][0]==="M"&&N[k][0]!=="M"&&(N.splice(k,0,["M",V.x,V.y]),K.bx=0,K.by=0,K.x=H[k][1],K.y=H[k][2],y=Math.max(i.length,a&&a.length||0))};y=Math.max(i.length,a&&a.length||0);for(var m=0;m<y;m++){i[m]&&(b=i[m][0]),b!=="C"&&(f[m]=b,m&&(g=f[m-1])),i[m]=_(i[m],o,g),f[m]!=="A"&&b==="C"&&(f[m]="C"),M(i,m),a&&(a[m]&&(b=a[m][0]),b!=="C"&&(v[m]=b,m&&(g=v[m-1])),a[m]=_(a[m],l,g),v[m]!=="A"&&b==="C"&&(v[m]="C"),M(a,m)),x(i,a,o,l,m),x(a,i,l,o,m);var S=i[m],P=a&&a[m],A=S.length,O=a&&P.length;o.x=S[A-2],o.y=S[A-1],o.bx=parseFloat(S[A-4])||o.x,o.by=parseFloat(S[A-3])||o.y,l.bx=a&&(parseFloat(P[O-4])||l.x),l.by=a&&(parseFloat(P[O-3])||l.y),l.x=a&&P[O-2],l.y=a&&P[O-1]}return a?[i,a]:i}},function(E,T,e){var t=e(181);E.exports=function(s,h,r,c,n){if(n)return[["M",+s+ +n,h],["l",r-n*2,0],["a",n,n,0,0,1,n,n],["l",0,c-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-r,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-c],["a",n,n,0,0,1,n,-n],["z"]];var i=[["M",s,h],["l",r,0],["l",0,c],["l",-r,0],["z"]];return i.parsePathArray=t,i}},function(E,T,e){var t=e(38),u=function(h){return t(h).toLowerCase()};E.exports=u},function(E,T,e){var t=e(38),u=function(h){var r=t(h);return r.charAt(0).toLowerCase()+r.substring(1)};E.exports=u},function(E,T,e){var t=e(38),u=function(h){return t(h).toUpperCase()};E.exports=u},function(E,T,e){var t=e(38),u=function(h){var r=t(h);return r.charAt(0).toUpperCase()+r.substring(1)};E.exports=u},function(E,T){var e={}.toString,t=function(s){return e.call(s).replace(/^\[object /,"").replace(/\]$/,"")};E.exports=t},function(E,T,e){var t=e(17),u=function(h){return t(h,"Boolean")};E.exports=u},function(E,T,e){var t=e(17),u=function(h){return t(h,"Date")};E.exports=u},function(E,T){var e=Object.prototype,t=function(s){var h=s&&s.constructor,r=typeof h=="function"&&h.prototype||e;return s===r};E.exports=t},function(E,T){var e=function(){var t={};return function(u){return u=u||"g",t[u]?t[u]+=1:t[u]=1,u+t[u]}}();E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={COORD_FUNC_PROPS:["rotate","scale","reflect","transpose"],GEOM_FUNC_PROPS:["position","color","size","shape","opacity","tooltip","style","animate","active","select","sets"]}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(29),u=r(t),s=e(58),h=r(s);function r(H){return H&&H.__esModule?H:{default:H}}for(var c=[{prop:"onPlotMove",event:"plotmove"},{prop:"onPlotEnter",event:"plotenter"},{prop:"onPlotLeave",event:"plotleave"},{prop:"onPlotClick",event:"plotclick"},{prop:"onPlotDblClick",event:"plotdblclick"},{prop:"onItemSelected",event:"itemselected"},{prop:"onItemUnselected",event:"itemunselected"},{prop:"onItemSelectedChange",event:"itemselectedchange"},{prop:"onTooltipChange",event:"tooltip:change"},{prop:"onTooltipShow",event:"tooltip:show"},{prop:"onTooltipHide",event:"tooltip:hide"}],n=["mouseenter","mousemove","mouseleave","click","dblclick","mousedown","mouseup","touchstart","touchmove","touchend"],i=["Mouseenter","Mousemove","Mouseleave","Click","Dblclick","Mousedown","Mouseup","Touchstart","Touchmove","Touchend"],a=["point","area","line","path","interval","schema","polygon","edge","axis-title","axis-label","axis-ticks","axis-line","axis-grid","legend-title","legend-item","legend-marker","legend-text","guide-text","guide-region","guide-line","guide-image","label"],o=["onPoint","onArea","onLine","onPath","onInterval","onSchema","onPolygon","onEdge","onAxisTitle","onAxisLabel","onAxisTicks","onAxisLine","onAxisGrid","onLegendTitle","onLegendItem","onLegendMarker","onLegendText","onGuideText","onGuideRegion","onGuideLine","onGuideImage","onLabel"],l=[],f=0;f<a.length;f+=1)for(var v=0;v<n.length;v+=1)l.push({prop:""+o[f]+i[v],event:a[f]+":"+n[v]});var b=c.concat(l);function g(){return[{prop:"onMouseEnter",event:"mouseenter"},{prop:"onMouseMove",event:"mousemove"},{prop:"onMouseLeave",event:"mouseleave"},{prop:"onClick",event:"click"},{prop:"onDblClick",event:"dblclick"},{prop:"onMouseDown",event:"mousedown"},{prop:"onMouseUp",event:"mouseup"},{prop:"onTouchStart",event:"touchstart"},{prop:"onTouchMove",event:"touchmove"},{prop:"onTouchEnd",event:"touchend"}]}function y(H){var N=g();return h.default.map(N,function(K){var V=K.event;return K.event=H+":"+V,K}),N}var _=g(),M={onMouseEnter:u.default.object,onMouseMove:u.default.object,onMouseLeave:u.default.object,onClick:u.default.oneOfType([u.default.object,u.default.func]),onDblClick:u.default.object,onMouseDown:u.default.object,onMouseUp:u.default.object,onTouchStart:u.default.object,onTouchMove:u.default.object,onTouchEnd:u.default.object},x={onMouseEnter:u.default.func,onMouseMove:u.default.func,onMouseLeave:u.default.func,onClick:u.default.func,onDblClick:u.default.func,onMouseDown:u.default.func,onMouseUp:u.default.func,onTouchStart:u.default.func,onTouchMove:u.default.func,onTouchEnd:u.default.func};function m(H){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2];h.default.each(N,function(V){var k=V.prop,Z=V.event,X=K[k];if(h.default.isFunction(X))H.on(Z,X);else if(h.default.isObject(X))for(var at in X)X[at]!==void 0&&H.on(at+":"+Z,X[at])})}function S(H,N){m(H,_,N)}function P(H){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2],V=arguments[3];h.default.each(N,function(k){var Z=k.prop,X=k.event,at=K[Z],pt=V[Z],gt=void 0;if(!h.default.shallowEqual(at,pt)){if(h.default.isFunction(at)&&h.default.isFunction(pt))H.off(X,at),H.on(X,pt);else if(h.default.isObject(at)&&h.default.isObject(pt)){for(gt in at)Object.prototype.hasOwnProperty.call(at,gt)&&H.off(gt+":"+X,at[gt]);for(gt in pt)Object.prototype.hasOwnProperty.call(pt,gt)&&H.on(gt+":"+X,pt[gt])}}})}function A(H,N,K){P(H,_,N,K)}function O(H){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2];h.default.each(N,function(V){var k=V.prop,Z=V.event,X=K[k];if(h.default.isFunction(X))H.off(Z,X);else if(h.default.isObject(X))for(var at in X)Object.prototype.hasOwnProperty.call(X,at)&&H.off(at+":"+Z,X[at])})}function R(H,N){O(H,_,N)}T.default={baseEventObjectTypes:M,baseEventFuncTypes:x,genBaseEvents:g,genItemBaseEvents:y,bindEvents:m,bindBaseEvents:S,updateEvents:P,updateBaseEvents:A,unbindEvents:O,unbindBaseEvents:R,chartEvents:b}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},u=e(45),s=f(u),h=e(88),r=e(195),c=l(r),n=e(196),i=l(n),a=e(87),o=l(a);function l(_){return _&&_.__esModule?_:{default:_}}function f(_){if(_&&_.__esModule)return _;var M={};if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(M[x]=_[x]);return M.default=_,M}function v(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function b(_,M){var x={};for(var m in _)M.indexOf(m)>=0||!Object.prototype.hasOwnProperty.call(_,m)||(x[m]=_[m]);return x}var g=c.default.COORD_FUNC_PROPS,y=c.default.GEOM_FUNC_PROPS;T.default={createChart:function(M){var x=M.chart,m=x.props.forceFit;x.props.forceFit=!1;var S=new s.Chart(x.props);return x.props.afterChartInitialized&&x.props.afterChartInitialized(S),m&&S.forceFit(),x.g2Instance=S,S},executeChartConfig:function(M,x){var m=x.chart,S=m.props;M.coord("rect",{}),M.source(S.data,S.scale),(!x.facet&&!S.axis||!x.facet||S.axis===!1)&&M.axis(!1),M.legend(!1),M.tooltip(!1),S.filter&&S.filter.forEach(function(P){M.filter(P[0],P[1])}),i.default.bindEvents(M,i.default.chartEvents,S),i.default.bindBaseEvents(M,S)},coord:function(M,x){var m=x.coord;if(!(!m||m.g2Instance)){var S=m.props,P=S.type,A=b(S,["type"]),O=M.coord(P||"rect",h.Util.without(A,g));h.Prop.init(g,A,function(R,H){H==="reflect"?h.Util.each(R,function(N){return O[H](N)}):H==="transpose"?R[0]===!0&&O[H].apply(O,v(R)):O[H].apply(O,v(R))}),m.g2Instance=O}},createLabel:function(M,x){if(!(!x||x.g2Instance)){var m=x.props,S=m.content,P=b(m,["content"]);S&&(h.Util.isArray(S)?x.g2Instance=M.label(S[0],S[1],P):x.g2Instance=M.label(S,P))}},createGeom:function(M,x){if(x.g2Instance){x.label&&this.createLabel(x.g2Instance,x.label);return}var m=x.props,S=M[m.type||"interval"]();m.adjust&&S.adjust(m.adjust),h.Prop.init(y,m,function(P,A){S[A].apply(S,v(P))}),x.g2Instance=S,this.createLabel(S,x.label)},geoms:function(M,x){var m=x.geoms;if(!!m)for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&this.createGeom(M,m[S])},legends:function(M,x){var m=x.legends;for(var S in m)if(m[S]){var P=m[S];if(P.g2Instance)return;var A=P.props,O=A.name,R=A.visible,H=b(A,["name","visible"]),N=R;Object.prototype.hasOwnProperty.call(P.props,"visible")||(N=!0);var K=N&&H;P.g2Instance=M.legend.apply(M,v(O?[O,K]:[K]))}},tooltip:function(M,x){var m=x.tooltip;!m||m.g2Instance||(m.g2Instance=M.tooltip(t({},m.props)))},createAxis:function(M,x){if(!x.g2Instance){var m=x.props,S=m.name,P=m.visible,A=b(m,["name","visible"]);P||!Object.prototype.hasOwnProperty.call(x.props,"visible")?x.g2Instance=M.axis(S,A):x.g2Instance=M.axis(S,!1)}},axises:function(M,x){var m=x.axises;for(var S in m)m[S]&&this.createAxis(M,m[S])},views:function(M,x){var m=x.views;for(var S in m)m[S]&&this.createView(M,m[S])},createView:function(M,x){if(x.parentInfo.name!=="Facet"){if(x.g2Instance){x.filter&&x.filter.forEach(function(V){x.g2Instance.filter(V[0],V[1])}),this.coord(x.g2Instance,x),this.axises(x.g2Instance,x),this.geoms(x.g2Instance,x),this.guide(x.g2Instance,x.guide);return}var m=x.props,S=m.scale,P=m.data,A=m.instance,O=m.axis,R=m.filter,H=m.geoms,N=b(m,["scale","data","instance","axis","filter","geoms"]),K=void 0;A?K=A:K=M.view(t({},N)),P&&K.source(P,S),S&&K.scale(S),R&&R.forEach(function(V){K.filter(V[0],V[1])}),O===!0||A||K.axis(!1),x.g2Instance=K,this.coord(K,x),this.axises(K,x),this.geoms(K,x),this.guide(K,x.guide)}},facetView:function(M,x){var m=x.props,S=m.scale,P=m.data,A=m.axis,O=m.geoms,R=b(m,["scale","data","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),A===!1&&M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide),o.default.mergeView(x,!0)},guide:function(M,x){if(!!x){var m=x.elements;for(var S in m)if(m[S]){var P=m[S];if(!P.g2Instance){var A=P.props,O=A.type,R=b(A,["type"]);P.g2Instance=M.guide()[P.type](R)}}}},facet:function(M,x){var m=this,S=x.facet;if(!(!S||S.g2Instance)){var P=S.props,A=P.children,O=P.type,R=b(P,["children","type"]);if(!A){M.facet(O,R);return}var H=x.views,N=null;for(var K in H)if(H[K]&&H[K].parentInfo.name==="Facet"&&H[K].parentInfo.id===S.id){N=H[K];break}N&&(o.default.mergeView(N,!0),R.eachView=function(V){m.facetView(V,N)},M.facet(O,R))}},synchronizeG2Add:function(M,x){this.coord(M,x),this.axises(M,x),this.legends(M,x),this.tooltip(M,x),this.geoms(M,x),this.facet(M,x),this.views(M,x),this.guide(M,x.guide)},synchronizeG2Views:function(M,x){var m=x.views;for(var S in m)m[S]&&this.synchronizeG2View(m[S].g2Instance,m[S])},synchronizeG2View:function(M,x){M.clear(),this.clearViewG2Instance(x);var m=x.props,S=m.scale,P=m.data,A=m.instance,O=m.axis,R=m.geoms,H=b(m,["scale","data","instance","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),O===!0||A||M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide)},clearViewG2Instance:function(M){M.coord&&delete M.coord.g2Instance,M.axises&&Object.keys(M.axises).forEach(function(x){delete M.axises[x].g2Instance}),M.geoms&&Object.keys(M.geoms).forEach(function(x){delete M.geoms[x].g2Instance,M.geoms[x].label&&delete M.geoms[x].label.g2Instance}),M.guide&&M.guide.elements&&Object.keys(M.guide.elements).forEach(function(x){delete M.guide.elements[x].g2Instance})}}},function(E,T,e){"use strict";e.d(T,"b",function(){return t}),e.d(T,"a",function(){return u});var t=Math.PI/180,u=180/Math.PI},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(449);e.d(T,"easeLinear",function(){return t.a});var u=e(451);e.d(T,"easeQuad",function(){return u.a}),e.d(T,"easeQuadIn",function(){return u.b}),e.d(T,"easeQuadOut",function(){return u.c}),e.d(T,"easeQuadInOut",function(){return u.a});var s=e(446);e.d(T,"easeCubic",function(){return s.a}),e.d(T,"easeCubicIn",function(){return s.b}),e.d(T,"easeCubicOut",function(){return s.c}),e.d(T,"easeCubicInOut",function(){return s.a});var h=e(450);e.d(T,"easePoly",function(){return h.a}),e.d(T,"easePolyIn",function(){return h.b}),e.d(T,"easePolyOut",function(){return h.c}),e.d(T,"easePolyInOut",function(){return h.a});var r=e(452);e.d(T,"easeSin",function(){return r.a}),e.d(T,"easeSinIn",function(){return r.b}),e.d(T,"easeSinOut",function(){return r.c}),e.d(T,"easeSinInOut",function(){return r.a});var c=e(448);e.d(T,"easeExp",function(){return c.a}),e.d(T,"easeExpIn",function(){return c.b}),e.d(T,"easeExpOut",function(){return c.c}),e.d(T,"easeExpInOut",function(){return c.a});var n=e(445);e.d(T,"easeCircle",function(){return n.a}),e.d(T,"easeCircleIn",function(){return n.b}),e.d(T,"easeCircleOut",function(){return n.c}),e.d(T,"easeCircleInOut",function(){return n.a});var i=e(444);e.d(T,"easeBounce",function(){return i.a}),e.d(T,"easeBounceIn",function(){return i.b}),e.d(T,"easeBounceOut",function(){return i.a}),e.d(T,"easeBounceInOut",function(){return i.c});var a=e(443);e.d(T,"easeBack",function(){return a.a}),e.d(T,"easeBackIn",function(){return a.b}),e.d(T,"easeBackOut",function(){return a.c}),e.d(T,"easeBackInOut",function(){return a.a});var o=e(447);e.d(T,"easeElastic",function(){return o.a}),e.d(T,"easeElasticIn",function(){return o.b}),e.d(T,"easeElasticOut",function(){return o.a}),e.d(T,"easeElasticInOut",function(){return o.c})},function(E,T,e){"use strict";var t=e(92);T.a=function(u,s){var h=s?s.length:0,r=u?Math.min(h,u.length):0,c=new Array(r),n=new Array(h),i;for(i=0;i<r;++i)c[i]=e.i(t.a)(u[i],s[i]);for(;i<h;++i)n[i]=s[i];return function(a){for(i=0;i<r;++i)n[i]=c[i](a);return n}}},function(E,T,e){"use strict";var t=e(91);T.a=function(u){var s=u.length;return function(h){var r=Math.floor(((h%=1)<0?++h:h)*s),c=u[(r+s-1)%s],n=u[r%s],i=u[(r+1)%s],a=u[(r+2)%s];return e.i(t.b)((h-r/s)*s,c,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,u){var s=new Date;return t=+t,u-=t,function(h){return s.setTime(t+u*h),s}}},function(E,T,e){"use strict";var t=e(92);T.a=function(u,s){var h={},r={},c;(u===null||typeof u!="object")&&(u={}),(s===null||typeof s!="object")&&(s={});for(c in s)c in u?h[c]=e.i(t.a)(u[c],s[c]):r[c]=s[c];return function(n){for(c in h)r[c]=h[c](n);return r}}},function(E,T,e){"use strict";e.d(T,"b",function(){return c}),e.d(T,"c",function(){return n});var t=e(12),u=e(91),s=e(201),h=e(41);T.a=function i(a){var o=e.i(h.c)(a);function l(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),g=o(f.g,v.g),y=o(f.b,v.b),_=e.i(h.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=g(M),f.b=y(M),f.opacity=_(M),f+""}}return l.gamma=i,l}(1);function r(i){return function(a){var o=a.length,l=new Array(o),f=new Array(o),v=new Array(o),b,g;for(b=0;b<o;++b)g=e.i(t.e)(a[b]),l[b]=g.r||0,f[b]=g.g||0,v[b]=g.b||0;return l=i(l),f=i(f),v=i(v),g.opacity=1,function(y){return g.r=l(y),g.g=f(y),g.b=v(y),g+""}}}var c=r(u.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(59),u=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(u.source,"g");function h(c){return function(){return c}}function r(c){return function(n){return c(n)+""}}T.a=function(c,n){var i=u.lastIndex=s.lastIndex=0,a,o,l,f=-1,v=[],b=[];for(c=c+"",n=n+"";(a=u.exec(c))&&(o=s.exec(n));)(l=o.index)>i&&(l=n.slice(i,l),v[f]?v[f]+=l:v[++f]=l),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(l=n.slice(i),v[f]?v[f]+=l:v[++f]=l),v.length<2?b[0]?r(b[0].x):h(n):(n=b.length,function(g){for(var y=0,_;y<n;++y)v[(_=b[y]).i]=_.x(g);return v.join("")})}},function(E,T,e){"use strict";T.a=h;var t=e(96),u=e(95),s=function(r,c){return(e.i(u.a)(c)?u.b:h)(r,c)};function h(r,c){var n=c?c.length:0,i=r?Math.min(n,r.length):0,a=new Array(i),o=new Array(n),l;for(l=0;l<i;++l)a[l]=e.i(t.a)(r[l],c[l]);for(;l<n;++l)o[l]=c[l];return function(f){for(l=0;l<i;++l)o[l]=a[l](f);return o}}},function(E,T,e){"use strict";var t=e(93);T.a=function(u){var s=u.length;return function(h){var r=Math.floor(((h%=1)<0?++h:h)*s),c=u[(r+s-1)%s],n=u[r%s],i=u[(r+1)%s],a=u[(r+2)%s];return e.i(t.b)((h-r/s)*s,c,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,u){var s=new Date;return t=+t,u=+u,function(h){return s.setTime(t*(1-h)+u*h),s}}},function(E,T,e){"use strict";var t=e(96);T.a=function(u,s){var h={},r={},c;(u===null||typeof u!="object")&&(u={}),(s===null||typeof s!="object")&&(s={});for(c in s)c in u?h[c]=e.i(t.a)(u[c],s[c]):r[c]=s[c];return function(n){for(c in h)r[c]=h[c](n);return r}}},function(E,T,e){"use strict";var t=e(12),u=e(93),s=e(208),h=e(32);T.a=function i(a){var o=e.i(h.c)(a);function l(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),g=o(f.g,v.g),y=o(f.b,v.b),_=e.i(h.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=g(M),f.b=y(M),f.opacity=_(M),f+""}}return l.gamma=i,l}(1);function r(i){return function(a){var o=a.length,l=new Array(o),f=new Array(o),v=new Array(o),b,g;for(b=0;b<o;++b)g=e.i(t.e)(a[b]),l[b]=g.r||0,f[b]=g.g||0,v[b]=g.b||0;return l=i(l),f=i(f),v=i(v),g.opacity=1,function(y){return g.r=l(y),g.g=f(y),g.b=v(y),g+""}}}var c=r(u.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(60),u=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(u.source,"g");function h(c){return function(){return c}}function r(c){return function(n){return c(n)+""}}T.a=function(c,n){var i=u.lastIndex=s.lastIndex=0,a,o,l,f=-1,v=[],b=[];for(c=c+"",n=n+"";(a=u.exec(c))&&(o=s.exec(n));)(l=o.index)>i&&(l=n.slice(i,l),v[f]?v[f]+=l:v[++f]=l),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(l=n.slice(i),v[f]?v[f]+=l:v[++f]=l),v.length<2?b[0]?r(b[0].x):h(n):(n=b.length,function(g){for(var y=0,_;y<n;++y)v[(_=b[y]).i]=_.x(g);return v.join("")})}},function(E,T,e){"use strict";T.a=function(t){return function(){return this.matches(t)}}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){return typeof u=="string"?new t.b([[document.querySelector(u)]],[document.documentElement]):new t.b([[u]],t.c)}},function(E,T,e){"use strict";T.b=s;var t=e(217),u=e(18);T.a=function(){return new u.b(this._enter||this._groups.map(t.a),this._parents)};function s(h,r){this.ownerDocument=h.ownerDocument,this.namespaceURI=h.namespaceURI,this._next=null,this._parent=h,this.__data__=r}s.prototype={constructor:s,appendChild:function(h){return this._parent.insertBefore(h,this._next)},insertBefore:function(h,r){return this._parent.insertBefore(h,r)},querySelector:function(h){return this._parent.querySelector(h)},querySelectorAll:function(h){return this._parent.querySelectorAll(h)}}},function(E,T,e){"use strict";T.a=function(t){return new Array(t.length)}},function(E,T,e){"use strict";T.a=r;var t=e(102);function u(c){return function(){this.style.removeProperty(c)}}function s(c,n,i){return function(){this.style.setProperty(c,n,i)}}function h(c,n,i){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(c):this.style.setProperty(c,a,i)}}T.b=function(c,n,i){return arguments.length>1?this.each((n==null?u:typeof n=="function"?h:s)(c,n,i==null?"":i)):r(this.node(),c)};function r(c,n){return c.style.getPropertyValue(n)||e.i(t.a)(c).getComputedStyle(c,null).getPropertyValue(n)}},function(E,T,e){"use strict";function t(){return[]}T.a=function(u){return u==null?t:function(){return this.querySelectorAll(u)}}},function(E,T,e){"use strict";var t=e(13);T.a=function(u,s){var h=u.__transition,r,c,n=!0,i;if(!!h){s=s==null?null:s+"";for(i in h){if((r=h[i]).name!==s){n=!1;continue}c=r.state>t.a&&r.state<t.b,r.state=t.c,r.timer.stop(),r.on.call(c?"interrupt":"cancel",u,u.__data__,r.index,r.group),delete h[i]}n&&delete u.__transition}}},function(E,T,e){"use strict";var t=e(12),u=e(94);T.a=function(s,h){var r;return(typeof h=="number"?u.b:h instanceof t.f?u.c:(r=e.i(t.f)(h))?(h=r,u.c):u.d)(s,h)}},function(E,T,e){var t;(function(u){"use strict";var s={},h=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r=/\d\d?/,c=/\d{3}/,n=/\d{4}/,i=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,a=/\[([^]*?)\]/gm,o=function(){};function l(m,S){for(var P=[],A=0,O=m.length;A<O;A++)P.push(m[A].substr(0,S));return P}function f(m){return function(S,P,A){var O=A[m].indexOf(P.charAt(0).toUpperCase()+P.substr(1).toLowerCase());~O&&(S.month=O)}}function v(m,S){for(m=String(m),S=S||2;m.length<S;)m="0"+m;return m}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],y=l(g,3),_=l(b,3);s.i18n={dayNamesShort:_,dayNames:b,monthNamesShort:y,monthNames:g,amPm:["am","pm"],DoFn:function(S){return S+["th","st","nd","rd"][S%10>3?0:(S-S%10!=10)*S%10]}};var M={D:function(m){return m.getDate()},DD:function(m){return v(m.getDate())},Do:function(m,S){return S.DoFn(m.getDate())},d:function(m){return m.getDay()},dd:function(m){return v(m.getDay())},ddd:function(m,S){return S.dayNamesShort[m.getDay()]},dddd:function(m,S){return S.dayNames[m.getDay()]},M:function(m){return m.getMonth()+1},MM:function(m){return v(m.getMonth()+1)},MMM:function(m,S){return S.monthNamesShort[m.getMonth()]},MMMM:function(m,S){return S.monthNames[m.getMonth()]},YY:function(m){return String(m.getFullYear()).substr(2)},YYYY:function(m){return v(m.getFullYear(),4)},h:function(m){return m.getHours()%12||12},hh:function(m){return v(m.getHours()%12||12)},H:function(m){return m.getHours()},HH:function(m){return v(m.getHours())},m:function(m){return m.getMinutes()},mm:function(m){return v(m.getMinutes())},s:function(m){return m.getSeconds()},ss:function(m){return v(m.getSeconds())},S:function(m){return Math.round(m.getMilliseconds()/100)},SS:function(m){return v(Math.round(m.getMilliseconds()/10),2)},SSS:function(m){return v(m.getMilliseconds(),3)},a:function(m,S){return m.getHours()<12?S.amPm[0]:S.amPm[1]},A:function(m,S){return m.getHours()<12?S.amPm[0].toUpperCase():S.amPm[1].toUpperCase()},ZZ:function(m){var S=m.getTimezoneOffset();return(S>0?"-":"+")+v(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4)}},x={D:[r,function(m,S){m.day=S}],Do:[new RegExp(r.source+i.source),function(m,S){m.day=parseInt(S,10)}],M:[r,function(m,S){m.month=S-1}],YY:[r,function(m,S){var P=new Date,A=+(""+P.getFullYear()).substr(0,2);m.year=""+(S>68?A-1:A)+S}],h:[r,function(m,S){m.hour=S}],m:[r,function(m,S){m.minute=S}],s:[r,function(m,S){m.second=S}],YYYY:[n,function(m,S){m.year=S}],S:[/\d/,function(m,S){m.millisecond=S*100}],SS:[/\d{2}/,function(m,S){m.millisecond=S*10}],SSS:[c,function(m,S){m.millisecond=S}],d:[r,o],ddd:[i,o],MMM:[i,f("monthNamesShort")],MMMM:[i,f("monthNames")],a:[i,function(m,S,P){var A=S.toLowerCase();A===P.amPm[0]?m.isPm=!1:A===P.amPm[1]&&(m.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(m,S){S==="Z"&&(S="+00:00");var P=(S+"").match(/([\+\-]|\d\d)/gi),A;P&&(A=+(P[1]*60)+parseInt(P[2],10),m.timezoneOffset=P[0]==="+"?A:-A)}]};x.dd=x.d,x.dddd=x.ddd,x.DD=x.D,x.mm=x.m,x.hh=x.H=x.HH=x.h,x.MM=x.M,x.ss=x.s,x.A=x.a,s.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},s.format=function(m,S,P){var A=P||s.i18n;if(typeof m=="number"&&(m=new Date(m)),Object.prototype.toString.call(m)!=="[object Date]"||isNaN(m.getTime()))throw new Error("Invalid Date in fecha.format");S=s.masks[S]||S||s.masks.default;var O=[];return S=S.replace(a,function(R,H){return O.push(H),"??"}),S=S.replace(h,function(R){return R in M?M[R](m,A):R.slice(1,R.length-1)}),S.replace(/\?\?/g,function(){return O.shift()})},s.parse=function(m,S,P){var A=P||s.i18n;if(typeof S!="string")throw new Error("Invalid format in fecha.parse");if(S=s.masks[S]||S,m.length>1e3)return!1;var O=!0,R={};if(S.replace(h,function(K){if(x[K]){var V=x[K],k=m.search(V[0]);~k?m.replace(V[0],function(Z){return V[1](R,Z,A),m=m.substr(k+Z.length),Z}):O=!1}return x[K]?"":K.slice(1,K.length-1)}),!O)return!1;var H=new Date;R.isPm===!0&&R.hour!=null&&+R.hour!=12?R.hour=+R.hour+12:R.isPm===!1&&+R.hour==12&&(R.hour=0);var N;return R.timezoneOffset!=null?(R.minute=+(R.minute||0)-+R.timezoneOffset,N=new Date(Date.UTC(R.year||H.getFullYear(),R.month||0,R.day||1,R.hour||0,R.minute||0,R.second||0,R.millisecond||0))):N=new Date(R.year||H.getFullYear(),R.month||0,R.day||1,R.hour||0,R.minute||0,R.second||0,R.millisecond||0),N},typeof E!="undefined"&&E.exports?E.exports=s:(t=function(){return s}.call(T,e,T,E),t!==void 0&&(E.exports=t))})(this)},function(E,T,e){"use strict";var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";E.exports=t},function(E,T,e){"use strict";E.exports=e(542)},function(E,T){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){typeof window=="object"&&(e=window)}E.exports=e},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(33),s=e(2),h=1/2,r=1/2,c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){this.marginRatio=h,this.dodgeRatio=r,this.adjustNames=["x","y"]},a.getDodgeOffset=function(l,f,v){var b=this,g=l.pre,y=l.next,_=y-g,M=_*b.dodgeRatio/v,x=b.marginRatio*M,m=1/2*(_-v*M-(v-1)*x)+((f+1)*M+f*x)-1/2*M-1/2*_;return(g+y)/2+m},a.processAdjust=function(l){var f=this,v=l.length,b=f.xField;s(l,function(g,y){for(var _=0,M=g.length;_<M;_++){var x=g[_],m=x[b],S={pre:M===1?m-1:m-.5,next:M===1?m+1:m+.5},P=f.getDodgeOffset(S,y,v);x[b]=P}})},i}(u);u.Dodge=c,E.exports=c},function(E,T,e){var t=e(10),u=e(33),s=e(226),h=e(231),r=e(106),c=e(229),n=e(230);t(u.prototype,r),t(s.prototype,r,c),t(h.prototype,n),u.Jitter=e(228),u.Symmetric=e(232),u.Dodge=s,u.Stack=h,E.exports=u},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(2),s=e(10),h={merge:e(54)},r=e(33),c=e(106),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},o.processAdjust=function(f){var v=this,b=h.merge(f);v.adjDataArray=f,v.mergeData=b,v.adjustData(f,b),v.adjFrames=null,v.mergeData=null},o.getAdjustOffset=function(f,v){var b=Math.random(),g=v-f,y=g*.05;return f+y+g*.9*b},o._adjustGroup=function(f,v,b,g){var y=this,_=y.getAdjustRange(v,b,g);u(f,function(M){M[v]=y.getAdjustOffset(_.pre,_.next)})},o.adjustDim=function(f,v,b){var g=this,y=g.groupData(b,f);u(y,function(_,M){M=parseFloat(M),g._adjustGroup(_,f,M,v)})},a}(r);s(n.prototype,c),r.Jitter=n,E.exports=n},function(E,T,e){var t={merge:e(54),values:e(79)},u=e(165),s=e(2);E.exports={processAdjust:function(r){var c=this,n=t.merge(r),i=c.dodgeBy,a=r;i&&(a=u(n,i)),c.cacheMap={},c.adjDataArray=a,c.mergeData=n,c.adjustData(a,n),c.adjDataArray=null,c.mergeData=null},getDistribution:function(r){var c=this,n=c.adjDataArray,i=c.cacheMap,a=i[r];return a||(a={},s(n,function(o,l){var f=t.values(o,r);f.length||f.push(0),s(f,function(v){a[v]||(a[v]=[]),a[v].push(l)})}),i[r]=a),a},adjustDim:function(r,c,n,i,a){var o=this,l=o.getDistribution(r),f=o.groupData(n,r);s(f,function(v,b){b=parseFloat(b);var g;c.length===1?g={pre:c[0]-1,next:c[0]+1}:g=o.getAdjustRange(r,b,c),s(v,function(y){var _=y[r],M=l[_],x=M.indexOf(a);y[r]=o.getDodgeOffset(g,x,M.length)})})}}},function(E,T){E.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(t){var u=this,s=u.xField,h=u.yField||"y",r=u.height,c={};u.reverseOrder&&(t=t.slice(0).reverse());for(var n=0,i=t.length;n<i;n++)for(var a=t[n],o=0,l=a.length;o<l;o++){var f=a[o],v=f.size||u.size,b=v*2/r,g=f[s];c[g]||(c[g]=b/2),f[h]=c[g],c[g]+=b}},processAdjust:function(t){this.yField?this.processStack(t):this.processOneDimStack(t)}}},function(E,T,e){function t(c,n){c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.__proto__=n}var u=e(4),s=e(6),h=e(33),r=function(c){t(n,c);function n(){return c.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){this.xField=null,this.yField=null},i.processAdjust=function(o){this.processStack(o)},i.processStack=function(o){var l=this,f=l.xField,v=l.yField,b=o.length,g={positive:{},negative:{}};l.reverseOrder&&(o=o.slice(0).reverse());for(var y=0;y<b;y++)for(var _=o[y],M=0,x=_.length;M<x;M++){var m=_[M],S=m[f]||0,P=m[v],A=S.toString();if(P=u(P)?P[1]:P,!s(P)){var O=P>=0?"positive":"negative";g[O][A]||(g[O][A]=0),m[v]=[g[O][A],P+g[O][A]],g[O][A]+=P}}},n}(h);h.Stack=r,E.exports=r},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(2),s=e(168),h=e(4),r={merge:e(54)},c=e(33),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},o._getMax=function(f){var v=this,b=v.mergeData,g=s(b,function(M){var x=M[f];return h(x)?Math.max.apply(null,x):x}),y=g[f],_=h(y)?Math.max.apply(null,y):y;return _},o._getXValuesMax=function(){var f=this,v=f.yField,b=f.xField,g={},y=f.mergeData;return u(y,function(_){var M=_[b],x=_[v],m=h(x)?Math.max.apply(null,x):x;g[M]=g[M]||0,g[M]<m&&(g[M]=m)}),g},o.processAdjust=function(f){var v=this,b=r.merge(f);v.mergeData=b,v._processSymmetric(f),v.mergeData=null},o._processSymmetric=function(f){var v=this,b=v.xField,g=v.yField,y=v._getMax(g),_=f[0][0],M;_&&h(_[g])&&(M=v._getXValuesMax()),u(f,function(x){u(x,function(m){var S=m[g],P;if(h(S)){var A=m[b],O=M[A];P=(y-O)/2;var R=[];u(S,function(H){R.push(P+H)}),m[g]=R}else P=(y-S)/2,m[g]=[P,S+P]})})},a}(c);c.Symmetric=n,E.exports=n},function(E,T,e){function t(c,n){c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.__proto__=n}var u=e(15),s=e(107),h=e(34),r=function(c){t(n,c);function n(a){var o;return o=c.call(this,a)||this,o.names=["color"],o.type="color",o.gradient=null,u(o.values)&&(o.linear=!0),o}var i=n.prototype;return i.getLinearValue=function(o){var l=this.gradient;if(!l){var f=this.values;l=s.gradient(f),this.gradient=l}return l(o)},n}(h);E.exports=r},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(34),s=function(h){t(r,h);function r(c){var n;return n=h.call(this,c)||this,n.names=["opacity"],n.type="opacity",n.gradient=null,n}return r}(u);E.exports=s},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(6),s=e(4),h=e(2),r=e(34),c=function(n){t(i,n);function i(o){var l;return l=n.call(this,o)||this,l.names=["x","y"],l.type="position",l}var a=i.prototype;return a.mapping=function(l,f){var v=this.scales,b=this.coord,g=v[0],y=v[1],_,M,x;if(u(l)||u(f))return[];if(s(f)&&s(l)){_=[],M=[];for(var m=0,S=0,P=l.length,A=f.length;m<P&&S<A;m++,S++)x=b.convertPoint({x:g.scale(l[m]),y:y.scale(f[S])}),_.push(x.x),M.push(x.y)}else if(s(f))l=g.scale(l),M=[],h(f,function(R){R=y.scale(R),x=b.convertPoint({x:l,y:R}),_&&_!==x.x?(s(_)||(_=[_]),_.push(x.x)):_=x.x,M.push(x.y)});else if(s(l))f=y.scale(f),_=[],h(l,function(R){R=g.scale(R),x=b.convertPoint({x:R,y:f}),M&&M!==x.y?(s(M)||(M=[M]),M.push(x.y)):M=x.y,_.push(x.x)});else{l=g.scale(l),f=y.scale(f);var O=b.convertPoint({x:l,y:f});_=O.x,M=O.y}return[_,M]},i}(r);E.exports=c},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(34),s=function(h){t(r,h);function r(n){var i;return i=h.call(this,n)||this,i.names=["shape"],i.type="shape",i.gradient=null,i}var c=r.prototype;return c.getLinearValue=function(i){var a=this.values,o=Math.round((a.length-1)*i);return a[o]},r}(u);E.exports=s},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(34),s=function(h){t(r,h);function r(c){var n;return n=h.call(this,c)||this,n.names=["size"],n.type="size",n.gradient=null,n}return r}(u);E.exports=s},function(E,T,e){function t(l){return function(){var f=r(l),v;if(h()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function c(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=e(35),a=n.MatrixUtil.vec2,o=function(l){c(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var y=l.prototype.getDefaultCfg.call(this);return n.mix({},y,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},b.parseTick=function(y,_,M){return{text:y,value:_/M}},b._getCirclePoint=function(y,_){var M=this,x=M.get("center");return _=_||M.get("radius"),{x:x.x+Math.cos(y)*_,y:x.y+Math.sin(y)*_}},b.getTickPoint=function(y){var _=this,M=_.get("startAngle"),x=_.get("endAngle"),m=M+(x-M)*y;return _._getCirclePoint(m)},b.getSideVector=function(y,_){var M=this,x=M.get("center"),m=[_.x-x.x,_.y-x.y];if(!n.isNil(y)){var S=a.length(m);a.scale(m,m,y/S)}return m},b.getSidePoint=function(y,_){var M=this,x=M.getSideVector(_,y);return{x:y.x+x[0],y:y.y+x[1]}},b.getTickEnd=function(y,_){var M=this,x=M.get("tickLine");return _=_||x.length,M.getSidePoint(y,_)},b.getTextAnchor=function(y){var _;return n.snapEqual(y[0],0)?_="center":y[0]>0?_="left":y[0]<0&&(_="right"),_},b.getLinePath=function(){var y=this,_=y.get("center"),M=_.x,x=_.y,m=y.get("radius"),S=m,P=y.get("startAngle"),A=y.get("endAngle"),O=y.get("inner"),R=[];if(Math.abs(A-P)===Math.PI*2)R=[["M",M,x],["m",0,-S],["a",m,S,0,1,1,0,2*S],["a",m,S,0,1,1,0,-2*S],["z"]];else{var H=y._getCirclePoint(P),N=y._getCirclePoint(A),K=Math.abs(A-P)>Math.PI?1:0,V=P>A?0:1;if(!O)R=[["M",M,x],["L",H.x,H.y],["A",m,S,0,K,V,N.x,N.y],["L",M,x]];else{var k=y.getSideVector(O*m,H),Z=y.getSideVector(O*m,N),X={x:k[0]+M,y:k[1]+x},at={x:Z[0]+M,y:Z[1]+x};R=[["M",X.x,X.y],["L",H.x,H.y],["A",m,S,0,K,V,N.x,N.y],["L",at.x,at.y],["A",m*O,S*O,0,K,Math.abs(V-1),X.x,X.y]]}}return R},b.addLabel=function(y,_,M){var x=this,m=x.get("label").offset||x.get("_labelOffset")||.001;_=x.getSidePoint(_,m),l.prototype.addLabel.call(this,y,_,M)},b.autoRotateLabels=function(){var y=this,_=y.get("ticks"),M=y.get("labelRenderer");if(M&&_.length>12){var x=y.get("radius"),m=y.get("startAngle"),S=y.get("endAngle"),P=S-m,A=P/(_.length-1),O=Math.sin(A/2)*x*2,R=y.getMaxLabelWidth(M);n.each(M.get("group").get("children"),function(H,N){var K=_[N],V=K.value*P+m,k=V%(Math.PI*2);R<O?(k<=0&&(V=V+Math.PI),k>Math.PI&&(V=V-Math.PI),V=V-Math.PI/2,H.attr("textAlign","center")):k>Math.PI/2?V=V-Math.PI:k<Math.PI/2*-1&&(V=V+Math.PI),H.rotateAtStart(V)})}},v}(i);E.exports=o},function(E,T,e){function t(v){return function(){var b=r(v),g;if(h()){var y=r(this).constructor;g=Reflect.construct(b,arguments,y)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function c(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,l=a.vec2,f=function(v){c(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var y=g.prototype;return y.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{inner:0,type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},y.getLinePath=function(){var M=this,x=M.get("crp"),m=M.get("axisStart"),S=o.catmullRomToBezier(x);return S.unshift(["M",m.x,m.y]),S},y.getTickPoint=function(M){var x=this,m=x.get("startAngle"),S=x.get("endAngle"),P=m+(S-m)*M;return x._getHelixPoint(P)},y._getHelixPoint=function(M){var x=this,m=x.get("center"),S=x.get("a"),P=S*M+x.get("inner");return{x:m.x+Math.cos(M)*P,y:m.y+Math.sin(M)*P}},y.getSideVector=function(M,x){var m=this,S=m.get("center"),P=[x.x-S.x,x.y-S.y];if(M){var A=l.length(P);l.scale(P,P,M/A)}return P},y.getSidePoint=function(M,x){var m=this,S=m.getSideVector(x,M);return{x:M.x+S[0],y:M.y+S[1]}},y.getTickEnd=function(M,x){var m=this,S=m.get("tickLine");return x=x||S.length,m.getSidePoint(M,x)},g}(i);E.exports=f},function(E,T,e){var t=e(35);t.Base=t,t.Circle=e(238),t.Grid=e(108),t.Helix=e(239),t.Line=e(241),t.Polyline=e(242),E.exports=t},function(E,T,e){function t(f){return function(){var v=r(f),b;if(h()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(35),i=e(3),a=i.MatrixUtil,o=a.vec2,l=function(f){c(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return i.mix({},_,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},g._getAvgLabelLength=function(_){var M=_.get("group").get("children");return M[1].attr("x")-M[0].attr("x")},g._getAvgLabelHeightSpace=function(_){var M=_.get("group").get("children");return M[1].attr("y")-M[0].attr("y")},g.getSideVector=function(_){var M=this,x=M.get("isVertical"),m=M.get("factor");if(!i.isNumber(_))return[0,0];var S=M.get("start"),P=M.get("end"),A=M.getAxisVector(),O=o.normalize([],A),R=!1;(x&&S.y<P.y||!x&&S.x>P.x)&&(R=!0);var H=o.vertical([],O,R);return o.scale([],H,_*m)},g.getAxisVector=function(){var _=this.get("start"),M=this.get("end");return[M.x-_.x,M.y-_.y]},g.getLinePath=function(){var _=this,M=_.get("start"),x=_.get("end"),m=[];return m.push(["M",M.x,M.y]),m.push(["L",x.x,x.y]),m},g.getTickEnd=function(_,M){var x=this,m=x.getSideVector(M);return{x:_.x+m[0],y:_.y+m[1]}},g.getTickPoint=function(_){var M=this,x=M.get("start"),m=M.get("end"),S=m.x-x.x,P=m.y-x.y;return{x:x.x+S*_,y:x.y+P*_}},g.renderTitle=function(){var _=this,M=_.get("title"),x=_.getTickPoint(.5),m=M.offset;if(i.isNil(m)){m=20;var S=_.get("labelsGroup");if(S){var P=_.getMaxLabelWidth(S),A=_.get("label").offset||_.get("_labelOffset");m+=P+A}}var O=M.textStyle,R=i.mix({},O);if(M.text){var H=_.getAxisVector();if(M.autoRotate&&i.isNil(O.rotate)){var N=0;if(!i.snapEqual(H[1],0)){var K=[1,0],V=[H[0],H[1]];N=o.angleTo(V,K,!0)}R.rotate=N*(180/Math.PI)}else i.isNil(O.rotate)||(R.rotate=O.rotate/180*Math.PI);var k=_.getSideVector(m),Z,X=M.position;X==="start"?Z={x:this.get("start").x+k[0],y:this.get("start").y+k[1]}:X==="end"?Z={x:this.get("end").x+k[0],y:this.get("end").y+k[1]}:Z={x:x.x+k[0],y:x.y+k[1]},R.x=Z.x,R.y=Z.y,R.text=M.text;var at=_.get("group"),pt=at.addShape("Text",{zIndex:2,attrs:R});pt.name="axis-title",_.get("appendInfo")&&pt.setSilent("appendInfo",_.get("appendInfo"))}},g.autoRotateLabels=function(){var _=this,M=_.get("labelRenderer"),x=_.get("title");if(M){var m=M.get("group"),S=m.get("children"),P=_.get("label").offset,A=12,O=x?x.offset:48;if(O<0)return;var R=_.getAxisVector(),H,N;if(i.snapEqual(R[0],0)&&x&&x.text)N=_.getMaxLabelWidth(M),N>O-P-A&&(H=Math.acos((O-P-A)/N)*-1);else if(i.snapEqual(R[1],0)&&S.length>1){var K=Math.abs(_._getAvgLabelLength(M));N=_.getMaxLabelWidth(M),N>K&&(H=Math.asin((O-P-A)*1.25/N))}if(H){var V=_.get("factor");i.each(S,function(k){k.rotateAtStart(H),i.snapEqual(R[1],0)&&(V>0?k.attr("textAlign","left"):k.attr("textAlign","right"))})}}},g.autoHideLabels=function(){var _=this,M=_.get("labelRenderer"),x,m,S=8;if(M){var P=M.get("group"),A=P.get("children"),O=_.getAxisVector();if(A.length<2)return;if(i.snapEqual(O[0],0)){var R=_.getMaxLabelHeight(M)+S,H=Math.abs(_._getAvgLabelHeightSpace(M));R>H&&(x=R,m=H)}else if(i.snapEqual(O[1],0)&&A.length>1){var N=_.getMaxLabelWidth(M)+S,K=Math.abs(_._getAvgLabelLength(M));N>K&&(x=N,m=K)}if(x&&m){var V=Math.ceil(x/m);i.each(A,function(k,Z){Z%V!=0&&k.attr("text","")})}}},b}(n);E.exports=l},function(E,T,e){function t(v){return function(){var b=r(v),g;if(h()){var y=r(this).constructor;g=Reflect.construct(b,arguments,y)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function c(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,l=a.vec2,f=function(v){c(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var y=g.prototype;return y.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{type:"polyline"})},y.getLinePath=function(){var M=this,x=M.get("tickPoints"),m=M.get("start"),S=M.get("end"),P=[];P.push(m.x),P.push(m.y),n.each(x,function(O){P.push(O.x),P.push(O.y)}),P.push(S.x),P.push(S.y);var A=o.catmullRomToBezier(P);return A.unshift(["M",m.x,m.y]),A},y.getTickPoint=function(M,x){var m=this.get("tickPoints");return m[x]},y.getTickEnd=function(M,x,m){var S=this,P=S.get("tickLine"),A=x||P.length,O=S.getSideVector(A,M,m);return{x:M.x+O[0],y:M.y+O[1]}},y.getSideVector=function(M,x,m){var S=this,P;if(m===0){if(P=S.get("start"),P.x===x.x&&P.y===x.y)return[0,0]}else{var A=S.get("tickPoints");P=A[m-1]}var O=[x.x-P.x,x.y-P.y],R=l.normalize([],O),H=l.vertical([],R,!1);return l.scale([],H,M)},g}(i);E.exports=f},function(E,T,e){function t(v){return function(){var b=r(v),g;if(h()){var y=r(this).constructor;g=Reflect.construct(b,arguments,y)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function c(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=Math.PI,o=Math.atan;function l(v,b){var g=v.x-b.x,y=v.y-b.y,_;return y===0?g<0?_=a/2:_=270*a/180:g>=0&&y>0?_=a*2-o(g/y):g<=0&&y<0?_=a-o(g/y):g>0&&y<0?_=a+o(-g/y):g<0&&y>0&&(_=o(g/-y)),_}var f=function(v){c(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var y=g.prototype;return y.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},y.render=function(M,x){var m=this,S=m.parsePoint(M,m.get("start")),P=m.parsePoint(M,m.get("end"));if(!(!S||!P)){var A=M.getCenter(),O=Math.sqrt((S.x-A.x)*(S.x-A.x)+(S.y-A.y)*(S.y-A.y)),R,H=l(S,A),N=l(P,A);if(N<H&&(N+=a*2),n.isNumberEqual(S.x,P.x)&&n.isNumberEqual(S.y,P.y)&&(m.get("start")[0]!==m.get("end")[0]||m.get("start")[1]!==m.get("end")[1]))R=[["M",S.x,S.y],["A",O,O,0,1,1,2*A.x-S.x,2*A.y-S.y],["A",O,O,0,1,1,S.x,S.y]];else{var K=(N-H)%(a*2),V=K>a?1:0;R=[["M",S.x,S.y],["A",O,O,0,V,1,P.x,P.y]]}var k=x.addShape("path",{zIndex:m.get("zIndex"),attrs:n.mix({path:R},m.get("style"))});k.name="guide-arc",m.get("appendInfo")&&k.setSilent("appendInfo",m.get("appendInfo")),m.set("el",k)}},g}(i);E.exports=f},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){c(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"#000000",opacity:.65,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0})},v.render=function(g,y){var _=this,M=_.parsePoint(g,_.get("position"));if(!!M){var x=y.addGroup();x.name="guide-data-marker";var m=_._getElementPosition(M),S=_.get("display"),P,A;if(S.line){var O=m.line;P=_._drawLine(O,x)}if(S.text&&_.get("content")){var R=m.text;A=_._drawText(R,x)}if(S.point){var H=m.point;_._drawPoint(H,x)}if(_.get("autoAdjust")){var N=x.getBBox(),K=N.minX,V=N.minY,k=N.maxX,Z=N.maxY,X=g.start,at=g.end;if(A){K<=X.x&&A.attr("textAlign","start"),k>=at.x&&A.attr("textAlign","end");var pt=_.get("direction");if(pt==="upward"&&V<=at.y||pt!=="upward"&&Z>=X.y){var gt,ft;pt==="upward"&&V<=at.y?(gt="top",ft=1):(gt="bottom",ft=-1),A.attr("textBaseline",gt);var Rt=0;if(_.get("display").line){Rt=_.get("lineLength");var Nt=[["M",M.x,M.y],["L",M.x,M.y+Rt*ft]];P.attr("path",Nt)}var Dt=M.y+(Rt+2)*ft;A.attr("y",Dt)}}}_.get("appendInfo")&&x.setSilent("appendInfo",_.get("appendInfo")),_.set("el",x)}},v._getElementPosition=function(g){var y=this,_=g.x,M=g.y,x=y.get("display").line?y.get("lineLength"):0,m=y.get("direction"),S=y.get("style").text;S.textBaseline=m==="upward"?"bottom":"top";var P=m==="upward"?-1:1,A={x:_,y:M},O={x:_,y:M},R={x:_,y:x*P+M},H={x:_,y:(x+2)*P+M};return{point:A,line:[O,R],text:H}},v._drawLine=function(g,y){var _=this,M=_.get("style").line,x=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y]],m=y.addShape("path",{attrs:n.mix({path:x},M)});return m},v._drawText=function(g,y){var _=this,M=this.get("style").text,x=y.addShape("text",{attrs:n.mix({text:_.get("content")},M,g)});return x},v._drawPoint=function(g,y){var _=this,M=_.get("style").point,x=y.addShape("circle",{attrs:n.mix({},M,g)});return x},f}(i);E.exports=a},function(E,T,e){function t(l){return function(){var f=r(l),v;if(h()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function c(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=e(109),a=e(20),o=function(l){c(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var y=l.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"dataRegion",start:null,end:null,content:"",style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}})},b.render=function(y,_,M){var x=this,m=x.get("lineLength")||0,S=x._getRegionData(y,M);if(!!S.length){var P=x._getBBox(S),A=[];A.push(["M",S[0].x,P.yMin-m]);for(var O=0,R=S.length;O<R;O++){var H=["L",S[O].x,S[O].y];A.push(H)}A.push(["L",S[S.length-1].x,P.yMin-m]);var N=x.get("style"),K=N.region,V=N.text,k=_.addGroup();k.name="guide-data-region",k.addShape("path",{attrs:n.mix({path:A},K)});var Z=x.get("content");Z&&k.addShape("Text",{attrs:n.mix({x:(P.xMin+P.xMax)/2,y:P.yMin-m,text:Z},V)}),x.get("appendInfo")&&k.setSilent("appendInfo",x.get("appendInfo")),x.set("el",k)}},b._getRegionData=function(y,_){for(var M=this,x=M.get("start"),m=M.get("end"),S=i.getFirstScale(M.get("xScales")).field,P=i.getFirstScale(M.get("yScales")).field,A=n.isArray(x)?x[0]:x[S],O=n.isArray(m)?m[0]:m[S],R,H=[],N=0,K=_.length;N<K;N++){var V=_[N];if(V[S]===A&&(R=N),N>=R){var k=M.parsePoint(y,[V[S],V[P]]);k&&H.push(k)}if(V[S]===O)break}return H},b._getBBox=function(y){for(var _=[],M=[],x=0;x<y.length;x++)_.push(y[x].x),M.push(y[x].y);var m=n.arrayUtil.getRange(_),S=n.arrayUtil.getRange(M);return{xMin:m.min,xMax:m.max,yMin:S.min,yMax:S.max}},v}(a);E.exports=o},function(E,T,e){function t(l){return function(){var f=r(l),v;if(h()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function c(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=n.DomUtil,a=e(20),o=function(l){c(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var y=l.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},b.render=function(y,_){var M=this,x=M.parsePoint(y,M.get("position"));if(!!x){var m=_.get("canvas").get("el").parentNode,S=i.createDom('<div class="g-guide"></div>');m.appendChild(S);var P=M.get("htmlContent")||M.get("html");if(n.isFunction(P)){var A=M.get("xScales"),O=M.get("yScales");P=P(A,O)}var R=i.createDom(P);S.appendChild(R),i.modifyCSS(S,{position:"absolute"}),M._setDomPosition(S,R,x),M.set("el",S)}},b._setDomPosition=function(y,_,M){var x=this,m=x.get("alignX"),S=x.get("alignY"),P=i.getOuterWidth(_),A=i.getOuterHeight(_),O={x:M.x,y:M.y};m==="middle"&&S==="top"?O.x-=Math.round(P/2):m==="middle"&&S==="bottom"?(O.x-=Math.round(P/2),O.y-=Math.round(A)):m==="left"&&S==="bottom"?O.y-=Math.round(A):m==="left"&&S==="middle"?O.y-=Math.round(A/2):m==="left"&&S==="top"?(O.x=M.x,O.y=M.y):m==="right"&&S==="bottom"?(O.x-=Math.round(P),O.y-=Math.round(A)):m==="right"&&S==="middle"?(O.x-=Math.round(P),O.y-=Math.round(A/2)):m==="right"&&S==="top"?O.x-=Math.round(P):(O.x-=Math.round(P/2),O.y-=Math.round(A/2));var R=x.get("offsetX");R&&(O.x+=R);var H=x.get("offsetY");H&&(O.y+=H),i.modifyCSS(y,{top:Math.round(O.y)+"px",left:Math.round(O.x)+"px",visibility:"visible",zIndex:x.get("zIndex")})},b.clear=function(){var y=this,_=y.get("el");_&&_.parentNode&&_.parentNode.removeChild(_)},v}(a);E.exports=o},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){c(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"image",start:null,end:null,src:null,offsetX:null,offsetY:null})},v.render=function(g,y){var _=this,M=_.parsePoint(g,_.get("start"));if(!!M){var x={x:M.x,y:M.y};if(x.img=_.get("src"),!_.get("end"))x.width=_.get("width")||32,x.height=_.get("height")||32;else{var m=_.parsePoint(g,_.get("end"));if(!m)return;x.width=m.x-M.x,x.height=m.y-M.y}_.get("offsetX")&&(x.x+=_.get("offsetX")),_.get("offsetY")&&(x.y+=_.get("offsetY"));var S=y.addShape("Image",{zIndex:1,attrs:x});S.name="guide-image",_.get("appendInfo")&&S.setSilent("appendInfo",_.get("appendInfo")),_.set("el",S)}},f}(i);E.exports=a},function(E,T,e){E.exports={Guide:e(20),Arc:e(243),DataMarker:e(244),DataRegion:e(245),Html:e(246),Image:e(247),Line:e(249),Region:e(250),Text:e(251)}},function(E,T,e){function t(v){return function(){var b=r(v),g;if(h()){var y=r(this).constructor;g=Reflect.construct(b,arguments,y)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function c(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=n.MatrixUtil.vec2,o=e(19),l=o.FONT_FAMILY,f=function(v){c(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var y=g.prototype;return y.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:l},content:null}})},y.render=function(M,x){var m=this,S=m.parsePoint(M,m.get("start")),P=m.parsePoint(M,m.get("end"));if(!(!S||!P)){var A=x.addGroup({viewId:x.get("viewId")});m._drawLines(S,P,A);var O=m.get("text");O&&O.content&&m._drawText(S,P,A),m.set("el",A)}},y._drawLines=function(M,x,m){var S=[["M",M.x,M.y],["L",x.x,x.y]],P=m.addShape("Path",{attrs:n.mix({path:S},this.get("lineStyle"))});P.name="guide-line",this.get("appendInfo")&&P.setSilent("appendInfo",this.get("appendInfo"))},y._drawText=function(M,x,m){var S=this.get("text"),P=S.position,A=S.style||{},O;P==="start"?O=0:P==="center"?O=.5:n.isString(P)&&P.indexOf("%")!==-1?O=parseInt(P,10)/100:n.isNumber(P)?O=P:O=1,(O>1||O<0)&&(O=1);var R={x:M.x+(x.x-M.x)*O,y:M.y+(x.y-M.y)*O};if(S.offsetX&&(R.x+=S.offsetX),S.offsetY&&(R.y+=S.offsetY),R.text=S.content,R=n.mix({},R,A),S.autoRotate&&n.isNil(A.rotate)){var H=a.angleTo([x.x-M.x,x.y-M.y],[1,0],1);R.rotate=H}else n.isNil(A.rotate)||(R.rotate=A.rotate*Math.PI/180);var N=m.addShape("Text",{attrs:R});N.name="guide-line-text",this.get("appendInfo")&&N.setSilent("appendInfo",this.get("appendInfo"))},g}(i);E.exports=f},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){c(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},v.render=function(g,y){var _=this,M=_.get("style"),x=_._getPath(g);if(!!x.length){var m=y.addShape("path",{zIndex:_.get("zIndex"),attrs:n.mix({path:x},M)});m.name="guide-region",_.get("appendInfo")&&m.setSilent("appendInfo",_.get("appendInfo")),_.set("el",m)}},v._getPath=function(g){var y=this,_=y.parsePoint(g,y.get("start")),M=y.parsePoint(g,y.get("end"));if(!_||!M)return[];var x=[["M",_.x,_.y],["L",M.x,_.y],["L",M.x,M.y],["L",_.x,M.y],["z"]];return x},f}(i);E.exports=a},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){c(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},v.render=function(g,y){var _=this,M=_.parsePoint(g,_.get("position"));if(!!M){var x=n.mix({},_.get("style")),m=_.get("offsetX"),S=_.get("offsetY");m&&(M.x+=m),S&&(M.y+=S),x.rotate&&(x.rotate=x.rotate*Math.PI/180);var P=y.addShape("Text",{zIndex:_.get("zIndex"),attrs:n.mix({text:_.get("content")},x,M)});P.name="guide-text",_.get("appendInfo")&&P.setSilent("appendInfo",_.get("appendInfo")),_.set("el",P)}},f}(i);E.exports=a},function(E,T,e){var t=e(110);E.exports=t},function(E,T){E.exports=function(t,u){for(var s,h,r=[],c=0;c<t.length;c++)s=t[c].getBBox(),h=u[c].getBBox(),(s.width>h.width||s.height>h.height||s.width*s.height>h.width*h.height)&&r.push(t[c]);for(var n=0;n<r.length;n++)r[n].remove()}},function(E,T,e){var t=e(111);function u(s,h,r,c){var n=s.getBBox(),i=n.width,a=n.height,o={x:h,y:r,textAlign:"center"};switch(c){case 0:o.y-=a/2,o.textAlign="left";break;case 1:o.y-=a/2,o.textAlign="right";break;case 2:o.y+=a/2,o.textAlign="right";break;case 3:o.y+=a/2,o.textAlign="left";break;case 5:o.y-=a/2;break;case 6:o.y+=a/2;break;case 7:o.x+=i/2,o.textAlign="left";break;case 8:o.x-=i/2,o.textAlign="right";break;default:break}return s.attr(o),s.getBBox()}E.exports=function(s){for(var h=new t,r=[],c,n,i,a,o,l=0;l<s.length;l++){n=s[l],i=n.attr("x"),a=n.attr("y"),o=!1;for(var f=0;f<8;f++)if(c=u(n,i,a,f),h.hasGap(c)){h.fillGap(c),o=!0;break}o||r.push(n)}for(var v=0;v<r.length;v++)r[v].remove();return o}},function(E,T,e){var t=e(111),u=20;function s(h,r){var c=-1,n=h.attr("x"),i=h.attr("y"),a=h.getBBox(),o=Math.sqrt(a.width*a.width+a.height*a.height),l,f=-c,v=0,b=0,g=function(x){return[(x*=.1)*Math.cos(x),x*Math.sin(x)]};if(r.hasGap(a))return r.fillGap(a),!0;for(var y=!1,_=0;Math.min(Math.abs(v),Math.abs(b))<o&&_<u;)if(l=g(f+=c),v=~~l[0],b=~~l[1],h.attr({x:n+v,y:i+b}),_++,r.hasGap(h.getBBox())){r.fillGap(a),y=!0;break}return y}E.exports=function(h){for(var r,c=new t,n=[],i=0;i<h.length;i++)r=h[i],s(r,c)||n.push(r);for(var a=0;a<n.length;a++)n[a].remove()}},function(E,T,e){function t(m){return function(){var S=r(m),P;if(h()){var A=r(this).constructor;P=Reflect.construct(S,arguments,A)}else P=S.apply(this,arguments);return u(this,P)}}function u(m,S){return S&&(typeof S=="object"||typeof S=="function")?S:s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}function r(m){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},r(m)}function c(m,S){m.prototype=Object.create(S.prototype),m.prototype.constructor=m,m.__proto__=S}var n=e(3),i=e(113),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f="g2-legend-list",v="g2-slip",b="g2-caret-up",g="g2-caret-down",y="rgba(0,0,0,0.65)",_="rgba(0,0,0,0.25)";function M(m,S){return m.getElementsByClassName(S)[0]}var x=function(m){c(P,m);var S=t(P);function P(){return m.apply(this,arguments)||this}var A=P.prototype;return A.getDefaultCfg=function(){var R=m.prototype.getDefaultCfg.call(this);return n.mix({},R,{type:"category-page-legend",container:null,caretStyle:{fill:"rgba(0,0,0,0.65)"},pageNumStyle:{display:"inline-block",fontSize:"12px",fontFamily:o,cursor:"default"},slipDomStyle:{width:"auto",height:"auto",position:"absolute"},slipTpl:'<div class="'+v+'" ><svg viewBox="64 64 896 896" class="g2-caret-up" data-icon="left" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg><p class="cur-pagenum" style = "display:inline-block;vertical-align:middle;">1</p><p class="next-pagenum" style = "display:inline-block;vertical-align:middle;"">/2</p><svg viewBox="64 64 896 896" class="g2-caret-down" data-icon="right" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></div>',slipWidth:65,legendOverflow:"unset"})},A.render=function(){m.prototype._renderHTML.call(this),this._renderFlipPage()},A._renderFlipPage=function(){var R=this.get("legendWrapper"),H=M(R,f),N=this.get("position"),K=this.get("layout"),V=N==="right"||N==="left"||K==="vertical",k=V?"block":"inline-block",Z=R.offsetHeight;if(R.scrollHeight>Z){var X=this.get("slipTpl"),at=l.createDom(X),pt=M(at,b),gt=M(at,g);l.modifyCSS(pt,this.get("caretStyle")),l.modifyCSS(pt,{fill:"rgba(0,0,0,0.25)"}),l.modifyCSS(gt,this.get("caretStyle"));var ft=M(at,"cur-pagenum"),Rt=M(at,"next-pagenum"),Nt=this.get("pageNumStyle");if(l.modifyCSS(ft,n.mix({},Nt,{paddingLeft:"10px"})),l.modifyCSS(Rt,n.mix({},Nt,{opacity:.3,paddingRight:"10px"})),l.modifyCSS(at,n.mix({},this.get("slipDomStyle"),V?{top:Z+"px"}:{right:0,top:"50%",transform:"translate(0, -50%)"})),R.style.overflow=this.get("legendOverflow"),R.appendChild(at),!V){var Dt=Math.max(R.offsetWidth-10-at.offsetWidth,0);l.modifyCSS(H,{maxWidth:Dt+"px"})}for(var St=H.childNodes,xt=0,Ot=1,it=[],At=0;At<St.length;At++)St[At].style.display=k,xt=St[At].offsetTop+St[At].offsetHeight,xt>Z&&(Ot++,it.forEach(function(z){z.style.display="none"}),it=[]),it.push(St[At]);Rt.innerText="/"+Ot,St.forEach(function(z){z.style.display=k,xt=z.offsetTop+z.offsetHeight,xt>Z&&(z.style.display="none")}),pt.addEventListener("click",function(){if(St[0].style.display!==k){var z=-1;St.forEach(function(et,st){et.style.display===k&&(z=z===-1?st:z,et.style.display="none")});for(var q=z-1;q>=0&&(St[q].style.display=k,xt=St[z-1].offsetTop+St[z-1].offsetHeight,St[q].style.display="none",xt<=Z);q--)St[q].style.display=k;var mt=Number.parseInt(ft.innerText,10)-1;mt===1?pt.style.fill=_:pt.style.fill=y,gt.style.fill=y,ft.innerText=mt}}),gt.addEventListener("click",function(){if(St[St.length-1].style.display!==k){var z=-1;St.forEach(function(et,st){et.style.display===k&&(z=st,et.style.display="none")});for(var q=z+1;q<St.length&&(St[q].style.display=k,xt=St[q].offsetTop+St[q].offsetHeight,St[q].style.display="none",xt<=Z);q++)St[q].style.display=k;var mt=Number.parseInt(ft.innerText,10)+1;mt===Ot?gt.style.fill=_:gt.style.fill=y,pt.style.fill=y,ft.innerText=mt}}),this.set("slipDom",at)}},A.destroy=function(){var R=this.get("slipDom");R&&R.parentNode&&R.parentNode.removeChild(R),m.prototype.destroy.call(this)},P}(i);E.exports=x},function(E,T,e){function t(f){return function(){var v=r(f),b;if(h()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(65),i=n.ColorUtil,a=e(3),o=e(67),l=function(f){c(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return a.mix({},_,{type:"color-legend",layout:"vertical",triggerAttr:{fill:"#fff",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc",radius:3},isSegment:!1})},g._setPercentage=function(){var _=this.get("items");if(!_[0].percentage){var M=_[0].value,x=_[_.length-1].value;a.each(_,function(m){m.percentage=(m.value-M)/(x-M)})}},g._renderSliderShape=function(){this._setPercentage();var _=this.get("slider"),M=_.get("backgroundElement"),x=this.get("width"),m=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O;return S==="vertical"?(A+="l (90) ",a.each(P,function(R){O=i.toRGB(R.color),A+=1-R.percentage+":"+O+" "})):(A+="l (0) ",a.each(P,function(R){O=i.toRGB(R.color),A+=R.percentage+":"+O+" "})),this._addMiddleBar(M,"Rect",{x:0,y:0,width:x,height:m,fill:A,strokeOpacity:0})},g._renderUnslidable=function(){this._setPercentage();var _=this.get("titleShape"),M=this.get("titleGap");M=_?_.getBBox().height+M:M;var x=this.get("width"),m=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O,R=[],H=this.get("group"),N=H.addGroup(),K=P.length;if(S==="vertical"){A+="l (90) ";for(var V=0;V<K;V+=1){if(V!==0&&V!==K-1&&(R.push(["M",0,m-P[V].percentage*m]),R.push(["L",x,m-P[V].percentage*m])),O=i.toRGB(P[V].color),A+=1-P[V].percentage+":"+O+" ",this.get("isSegment")&&V>0){var k=i.toRGB(P[V-1].color);A+=1-P[V].percentage+":"+k+" "}N.addShape("text",{attrs:a.mix({},{x:x+this.get("textOffset")/2,y:m-P[V].percentage*m,text:this._formatItemValue(P[V].value)+""},this.get("textStyle"),{textAlign:"start"})})}}else{A+="l (0) ";for(var Z=0;Z<K;Z+=1){if(Z!==0&&Z!==K-1&&(R.push(["M",P[Z].percentage*x,0]),R.push(["L",P[Z].percentage*x,m])),O=i.toRGB(P[Z].color),this.get("isSegment")&&Z>0){var X=i.toRGB(P[Z-1].color);A+=P[Z].percentage+":"+X+" "}A+=P[Z].percentage+":"+O+" ",N.addShape("text",{attrs:a.mix({},{x:P[Z].percentage*x,y:m+5+this.get("textOffset"),text:this._formatItemValue(P[Z].value)+""},this.get("textStyle"))})}}N.addShape("rect",{attrs:{x:0,y:0,width:x,height:m,fill:A,strokeOpacity:0}}),N.addShape("path",{attrs:a.mix({path:R},this.get("lineStyle"))}),N.move(0,M)},b}(o);E.exports=l},function(E,T,e){E.exports={Category:e(114),CatHtml:e(113),CatPageHtml:e(256),Color:e(257),Size:e(260),CircleSize:e(259)}},function(E,T,e){function t(b){return function(){var g=r(b),y;if(h()){var _=r(this).constructor;y=Reflect.construct(g,arguments,_)}else y=g.apply(this,arguments);return u(this,y)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(b)}function c(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(3),i=e(67),a=2,o=16,l=16,f=5,v=function(b){c(y,b);var g=t(y);function y(){return b.apply(this,arguments)||this}var _=y.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{type:"size-circle-legend",width:100,height:200,_unslidableCircleStyle:{stroke:"rgb(99, 161, 248)",fill:"rgb(99, 161, 248)",fillOpacity:.3,lineWidth:1.5},triggerAttr:{fill:"white",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc"},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},_._renderSliderShape=function(){var x=f,m=this.get("slider"),S=m.get("backgroundElement"),P=this.get("layout"),A=P==="vertical"?a:this.get("width"),O=P==="vertical"?this.get("height"):a,R=x,H=this.get("height")/2,N=this.get("frontMiddleBarStyle"),K=P==="vertical"?[[0,0],[A,0],[A,O],[0,O]]:[[0,H+O],[0,H-O],[R+A-4,H-O],[R+A-4,H+O]];return this._addMiddleBar(S,"Polygon",n.mix({points:K},N))},_._addHorizontalTrigger=function(x,m,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),R=-this.get("height")/2,H=O.addShape("circle",{attrs:n.mix({x:0,y:R,r:P},m)}),N=O.addShape("text",{attrs:n.mix(S,{x:0,y:R+P+10,textAlign:"center",textBaseline:"middle"})}),K=this.get("layout"),V=K==="vertical"?"ns-resize":"ew-resize";H.attr("cursor",V),N.attr("cursor",V),this.set(x+"ButtonElement",H),this.set(x+"TextElement",N)},_._addVerticalTrigger=function(x,m,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),R=O.addShape("circle",{attrs:n.mix({x:0,y:0,r:P},m)}),H=O.addShape("text",{attrs:n.mix(S,{x:P+10,y:0,textAlign:"start",textBaseline:"middle"})}),N=this.get("layout"),K=N==="vertical"?"ns-resize":"ew-resize";R.attr("cursor",K),H.attr("cursor",K),this.set(x+"ButtonElement",R),this.set(x+"TextElement",H)},_._renderTrigger=function(){var x=this.get("firstItem"),m=this.get("lastItem"),S=this.get("layout"),P=this.get("textStyle"),A=this.get("triggerAttr"),O=n.mix({},A),R=n.mix({},A),H=f,N=l,K=n.mix({text:this._formatItemValue(x.value)+""},P),V=n.mix({text:this._formatItemValue(m.value)+""},P);S==="vertical"?(this._addVerticalTrigger("min",O,K,H),this._addVerticalTrigger("max",R,V,N)):(this._addHorizontalTrigger("min",O,K,H),this._addHorizontalTrigger("max",R,V,N))},_._bindEvents=function(){var x=this;if(this.get("slidable")){var m=this.get("slider");m.on("sliderchange",function(S){var P=S.range,A=x.get("firstItem").value,O=x.get("lastItem").value,R=A+P[0]/100*(O-A),H=A+P[1]/100*(O-A),N=f+P[0]/100*(l-f),K=f+P[1]/100*(l-f);x._updateElement(R,H,N,K);var V=new Event("itemfilter",S,!0,!0);V.range=[R,H],x.emit("itemfilter",V)})}},_._updateElement=function(x,m,S,P){b.prototype._updateElement.call(this,x,m);var A=this.get("minTextElement"),O=this.get("maxTextElement"),R=this.get("minButtonElement"),H=this.get("maxButtonElement");R.attr("r",S),H.attr("r",P);var N=this.get("layout");if(N==="vertical")A.attr("x",S+10),O.attr("x",P+10);else{var K=-this.get("height")/2;A.attr("y",K+S+10),O.attr("y",K+P+10)}},_._addCircle=function(x,m,S,P,A){var O=this.get("group"),R=O.addGroup(),H=this.get("_unslidableCircleStyle"),N=this.get("textStyle"),K=this.get("titleShape"),V=this.get("titleGap");K&&(V+=K.getBBox().height),R.addShape("circle",{attrs:n.mix({x,y:m+V,r:S===0?1:S},H)}),this.get("layout")==="vertical"?R.addShape("text",{attrs:n.mix({x:A+20+this.get("textOffset"),y:m+V,text:P===0?"0":P},N)}):R.addShape("text",{attrs:n.mix({x,y:m+V+A+13+this.get("textOffset"),text:P===0?"0":P},N)})},_._renderUnslidable=function(){var x=this.get("firstItem").value,m=this.get("lastItem").value;if(x>m){var S=m;m=x,x=S}var P=this._formatItemValue(x),A=this._formatItemValue(m),O=x<f?f:x,R=m>l?l:m;O>R&&(O=f,R=l),this.get("layout")==="vertical"?(this._addCircle(R,R,O,P,2*R),this._addCircle(R,R*2+o+O,R,A,2*R)):(this._addCircle(R,R,O,P,2*R),this._addCircle(R*2+o+O,R,R,A,2*R))},_.activate=function(x){!this.get("slidable")||b.prototype.activate.call(this,x)},y}(i);E.exports=v},function(E,T,e){function t(o){return function(){var l=r(o),f;if(h()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function c(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(67),a=function(o){c(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"size-legend",width:100,height:200,_unslidableElementStyle:{fill:"#4E7CCC",fillOpacity:1},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},v._renderSliderShape=function(){var g=this.get("slider"),y=g.get("backgroundElement"),_=this.get("layout"),M=this.get("width"),x=this.get("height"),m=this.get("height")/2,S=this.get("frontMiddleBarStyle"),P=_==="vertical"?[[0,0],[M,0],[M,x],[M-4,x]]:[[0,m+x/2],[0,m+x/2-4],[M,m-x/2],[M,m+x/2]];return this._addMiddleBar(y,"Polygon",n.mix({points:P},S))},v._renderUnslidable=function(){var g=this.get("layout"),y=this.get("width"),_=this.get("height"),M=this.get("frontMiddleBarStyle"),x=g==="vertical"?[[0,0],[y,0],[y,_],[y-4,_]]:[[0,_],[0,_-4],[y,0],[y,_]],m=this.get("group"),S=m.addGroup();S.addShape("Polygon",{attrs:n.mix({points:x},M)});var P=this._formatItemValue(this.get("firstItem").value),A=this._formatItemValue(this.get("lastItem").value);this.get("layout")==="vertical"?(this._addText(y+10,_-3,P),this._addText(y+10,3,A)):(this._addText(0,_,P),this._addText(y,_,A))},v._addText=function(g,y,_){var M=this.get("group"),x=M.addGroup(),m=this.get("textStyle"),S=this.get("titleShape"),P=this.get("titleGap");S&&(P+=S.getBBox().height),this.get("layout")==="vertical"?x.addShape("text",{attrs:n.mix({x:g+this.get("textOffset"),y,text:_===0?"0":_},m)}):(y+=P+this.get("textOffset")-20,S||(y+=10),x.addShape("text",{attrs:n.mix({x:g,y,text:_===0?"0":_},m)}))},f}(i);E.exports=a},function(E,T,e){var t=e(3),u=t.DomUtil,s=t.Group,h=function r(c){r.superclass.constructor.call(this,c)};t.extend(h,s),t.augment(h,{getDefaultCfg:function(){return{range:null,middleAttr:{fill:"#fff",fillOpacity:0},backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_beforeRenderUI:function(){var c=this.get("layout"),n=this.get("backgroundElement"),i=this.get("minHandleElement"),a=this.get("maxHandleElement"),o=this.addShape("rect",{attrs:this.get("middleAttr")}),l=c==="vertical"?"ns-resize":"ew-resize";this.add([n,i,a]),this.set("middleHandleElement",o),n.set("zIndex",0),o.set("zIndex",1),i.set("zIndex",2),a.set("zIndex",2),o.attr("cursor","move"),i.attr("cursor",l),a.attr("cursor",l),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(c){var n=this.get("range"),i=n[0]/100,a=n[1]/100,o=this.get("width"),l=this.get("height"),f=this.get("minHandleElement"),v=this.get("maxHandleElement"),b=this.get("middleHandleElement");f.resetMatrix(),v.resetMatrix(),c==="horizontal"?(b.attr({x:o*i,y:0,width:(a-i)*o,height:l}),f.translate(i*o,l),v.translate(a*o,l)):(b.attr({x:0,y:l*(1-a),width:o,height:(a-i)*l}),f.translate(1,(1-i)*l),v.translate(1,(1-a)*l))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(c,n){var i=this.get(n);if(c===i)return!0;if(i.isGroup){var a=i.get("children");return a.indexOf(c)>-1}return!1},_getRange:function(c,n){var i=c+n;return i=i>100?100:i,i=i<0?0:i,i},_updateStatus:function(c,n){var i=c==="x"?this.get("width"):this.get("height");c=t.upperFirst(c);var a=this.get("range"),o=this.get("page"+c),l=this.get("currentTarget"),f=this.get("rangeStash"),v=this.get("layout"),b=v==="vertical"?-1:1,g=n["page"+c],y=g-o,_=y/i*100*b,M;a[1]<=a[0]?(this._isElement(l,"minHandleElement")||this._isElement(l,"maxHandleElement"))&&(a[0]=this._getRange(_,a[0]),a[1]=this._getRange(_,a[0])):(this._isElement(l,"minHandleElement")&&(a[0]=this._getRange(_,a[0])),this._isElement(l,"maxHandleElement")&&(a[1]=this._getRange(_,a[1]))),this._isElement(l,"middleHandleElement")&&(M=f[1]-f[0],a[0]=this._getRange(_,a[0]),a[1]=a[0]+M,a[1]>100&&(a[1]=100,a[0]=a[1]-M)),this.emit("sliderchange",{range:a}),this.set("page"+c,g),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(c){var n=c.currentTarget,i=c.event,a=this.get("range");i.stopPropagation(),i.preventDefault(),this.set("pageX",i.pageX),this.set("pageY",i.pageY),this.set("currentTarget",n),this.set("rangeStash",[a[0],a[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var c=this.get("canvas").get("containerDOM");this.onMouseMoveListener=u.addEventListener(c,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=u.addEventListener(c,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=u.addEventListener(c,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(c){if(!this._mouseOutArea(c)){var n=this.get("layout");n==="horizontal"?this._updateStatus("x",c):this._updateStatus("y",c)}},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},_mouseOutArea:function(c){var n=this.get("canvas").get("el"),i=n.getBoundingClientRect(),a=this.get("parent"),o=a.getBBox(),l=a.attr("matrix")[6],f=a.attr("matrix")[7],v=l+o.width,b=f+o.height,g=c.clientX-i.x,y=c.clientY-i.y;return g<l||g>v||y<f||y>b}}),E.exports=h},function(E,T,e){function t(){return t=Object.assign||function(N){for(var K=1;K<arguments.length;K++){var V=arguments[K];for(var k in V)Object.prototype.hasOwnProperty.call(V,k)&&(N[k]=V[k])}return N},t.apply(this,arguments)}function u(N){return function(){var K=c(N),V;if(r()){var k=c(this).constructor;V=Reflect.construct(K,arguments,k)}else V=K.apply(this,arguments);return s(this,V)}}function s(N,K){return K&&(typeof K=="object"||typeof K=="function")?K:h(N)}function h(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}function c(N){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)},c(N)}function n(N,K){N.prototype=Object.create(K.prototype),N.prototype.constructor=N,N.__proto__=K}var i=e(31),a=e(68),o=e(3),l=o.DomUtil,f=e(265),v=e(116),b=e(118),g=e(117),y="g2-tooltip",_="g2-tooltip-title",M="g2-tooltip-list",x="g2-tooltip-marker",m="g2-tooltip-value",S="g2-tooltip-list-item",P=5,A=i.Marker;function O(N,K){return N.getElementsByClassName(K)[0]}function R(N,K){return Object.keys(N).forEach(function(V){K[V]&&(N[V]=o.mix(N[V],K[V]))}),N}var H=function(N){n(k,N);var K=u(k),V=k.prototype;V.getDefaultCfg=function(){var X=N.prototype.getDefaultCfg.call(this);return o.mix({},X,{containerTpl:' <div class="'+y+'"> <div class="'+_+'"></div><ul class="'+M+'"></ul></div>',itemTpl:`<li data-index={index}>
      <svg viewBox="0 0 `+P+" "+P+'" class="'+x+`"></svg>
      {name}<span class="`+m+'">{value}</span></li>',htmlContent:null,follow:!0,enterable:!1})};function k(Z){var X;X=N.call(this,Z)||this,o.assign(h(X),b),o.assign(h(X),g);var at=f;X.style=R(at,Z),X._init_(),X.get("items")&&X.render();var pt=X.get("crosshairs");if(pt){var gt=pt.type==="rect"?X.get("backPlot"):X.get("frontPlot"),ft=new v(o.mix({plot:gt,plotRange:X.get("plotRange"),canvas:X.get("canvas")},X.get("crosshairs")));ft.hide(),X.set("crosshairGroup",ft)}return X}return V._init_=function(){var X=this,at=X.get("containerTpl"),pt=X.get("canvas").get("el").parentNode,gt;if(!this.get("htmlContent")){if(/^\#/.test(at)){var ft=at.replace("#","");gt=document.getElementById(ft)}else gt=l.createDom(at),l.modifyCSS(gt,X.style[y]),pt.appendChild(gt),pt.style.position="relative";X.set("container",gt)}},V.render=function(){var X=this;if(X.clear(),X.get("htmlContent")){var at=X.get("canvas").get("el").parentNode,pt=X._getHtmlContent();at.appendChild(pt),X.set("container",pt)}else X._renderTpl()},V._renderTpl=function(){var X=this,at=X.get("showTitle"),pt=X.get("titleContent"),gt=X.get("container"),ft=O(gt,_),Rt=O(gt,M),Nt=X.get("items");ft&&at&&(l.modifyCSS(ft,X.style[_]),ft.innerHTML=pt),Rt&&(l.modifyCSS(Rt,X.style[M]),o.each(Nt,function(Dt,St){Rt.appendChild(X._addItem(Dt,St))}))},V.clear=function(){var X=this.get("container");if(this.get("htmlContent"))X&&X.remove();else{var at=O(X,_),pt=O(X,M);at&&(at.innerHTML=""),pt&&(pt.innerHTML="")}},V.show=function(){var X=this.get("container");if(!(!X||this.destroyed)){X.style.visibility="visible",X.style.display="block";var at=this.get("crosshairGroup");at&&at.show();var pt=this.get("markerGroup");pt&&pt.show(),N.prototype.show.call(this),this.get("canvas").draw()}},V.hide=function(){var X=this.get("container");if(!(!X||this.destroyed)){X.style.visibility="hidden",X.style.display="none";var at=this.get("crosshairGroup");at&&at.hide();var pt=this.get("markerGroup");pt&&pt.hide(),N.prototype.hide.call(this),this.get("canvas").draw()}},V.destroy=function(){var X=this,at=X.get("container"),pt=X.get("containerTpl");at&&!/^\#/.test(pt)&&at.parentNode.removeChild(at);var gt=this.get("crosshairGroup");gt&&gt.destroy();var ft=this.get("markerGroup");ft&&ft.remove(),N.prototype.destroy.call(this)},V._getMarkerSvg=function(X){var at=X.marker||{},pt=at.activeSymbol||at.symbol,gt;o.isFunction(pt)?gt=pt:o.isString(pt)&&(gt=A.Symbols[pt]),gt=o.isFunction(gt)?gt:A.Symbols.circle;var ft=gt(P/2,P/2,P/2),Rt=ft.reduce(function(Nt,Dt){return""+Nt+Dt[0]+Dt.slice(1).join(",")},"");return'<path d="'+Rt+'" fill="'+(at.fill||"none")+'" stroke="'+(at.stroke||"none")+'" />'},V._addItem=function(X,at){var pt=this.get("itemTpl"),gt=o.substitute(pt,o.mix({index:at},X)),ft=l.createDom(gt);l.modifyCSS(ft,this.style[S]);var Rt=O(ft,x);if(Rt){l.modifyCSS(Rt,t({},this.style[x],{borderRadius:"unset"}));var Nt=this._getMarkerSvg(X);Rt.innerHTML=Nt}var Dt=O(ft,m);return Dt&&l.modifyCSS(Dt,this.style[m]),ft},V._getHtmlContent=function(){var X=this.get("htmlContent"),at=this.get("titleContent"),pt=this.get("items"),gt=X(at,pt),ft=l.createDom(gt);return ft},V.setPosition=function(X,at,pt){var gt=this.get("container"),ft=this.get("canvas").get("el"),Rt=l.getWidth(ft),Nt=l.getHeight(ft),Dt=gt.clientWidth,St=gt.clientHeight,xt=X,Ot=at,it,At=this.get("prePosition")||{x:0,y:0};if(Dt||(gt.style.display="block",Dt=gt.clientWidth,St=gt.clientHeight,gt.style.display="none"),this.get("enterable")?(at=at-gt.clientHeight/2,it=[X,at],At&&X-At.x>0?X-=gt.clientWidth+1:X+=1):this.get("position")?(it=this._calcTooltipPosition(X,at,this.get("position"),Dt,St,pt),X=it[0],at=it[1]):(it=this._constraintPositionInBoundary(X,at,Dt,St,Rt,Nt),X=it[0],at=it[1]),this.get("inPlot")){var z=this.get("plotRange");it=this._constraintPositionInPlot(X,at,Dt,St,z,this.get("enterable")),X=it[0],at=it[1]}var q=this.get("markerItems");o.isEmpty(q)||(xt=q[0].x,Ot=q[0].y),this.set("prePosition",it);var mt=this.get("follow");mt&&(gt.style.left=X+"px",gt.style.top=at+"px");var et=this.get("crosshairGroup");if(et){var st=this.get("items");et.setPosition(xt,Ot,st)}N.prototype.setPosition.call(this,X,at)},k}(a);E.exports=H},function(E,T,e){var t=e(68);t.Html=e(262),t.Canvas=e(115),t.Mini=e(264),E.exports=t},function(E,T,e){function t(b){return function(){var g=r(b),y;if(h()){var _=r(this).constructor;y=Reflect.construct(g,arguments,_)}else y=g.apply(this,arguments);return u(this,y)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(b)}function c(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(3),i=e(115),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f=n.MatrixUtil,v=function(b){c(y,b);var g=t(y);function y(){return b.apply(this,arguments)||this}var _=y.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{boardStyle:{x:0,y:0,width:0,height:0,radius:3},valueStyle:{x:0,y:0,text:"",fontFamily:o,fontSize:12,stroke:"#fff",lineWidth:2,fill:"black",textBaseline:"top",textAlign:"start"},padding:{top:5,right:5,bottom:0,left:5},triangleWidth:10,triangleHeight:4})},_._init_=function(){var x=this,m=x.get("padding"),S=x.get("frontPlot"),P=S.addGroup();x.set("container",P);var A=P.addShape("rect",{attrs:n.mix({},x.get("boardStyle"))});x.set("board",A);var O=P.addShape("path",{attrs:{fill:x.get("boardStyle").fill}});x.set("triangleShape",O);var R=P.addGroup();R.move(m.left,m.top);var H=R.addShape("text",{attrs:n.mix({},x.get("valueStyle"))});x.set("valueShape",H)},_.render=function(){var x=this;x.clear();var m=x.get("board"),S=x.get("valueShape"),P=x.get("padding"),A=x.get("items")[0];S&&S.attr("text",A.value);var O=S?S.getBBox():{width:80,height:30},R=P.left+O.width+P.right,H=P.top+O.height+P.bottom;m.attr("width",R),m.attr("height",H),x._centerTriangleShape()},_.clear=function(){var x=this.get("valueShape");x.attr("text","")},_.setPosition=function(x,m,S){var P=this,A=P.get("container"),O=P.get("plotRange"),R=A.getBBox(),H=R.width,N=R.height;if(x-=H/2,S&&(S.name==="point"||S.name==="interval")){var K=S.getBBox().y;m=K}if(m-=N,this.get("inPlot"))x<O.tl.x?(x=O.tl.x,P._leftTriangleShape()):x+H/2>O.tr.x?(x=O.tr.x-H,P._rightTriangleShape()):P._centerTriangleShape(),m<O.tl.y?m=O.tl.y:m+N>O.bl.y&&(m=O.bl.y-N);else{var V=this.get("canvas").get("el"),k=l.getWidth(V),Z=l.getHeight(V);x<0?(x=0,P._leftTriangleShape()):x+H/2>k?(x=k-H,P._rightTriangleShape()):P._centerTriangleShape(),m<0?m=0:m+N>Z&&(m=Z-N)}var X=[1,0,0,0,1,0,0,0,1],at=f.transform(X,[["t",x,m]]);A.stopAnimate(),A.animate({matrix:at},this.get("animationDuration"))},_._centerTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,R=[["M",0,0],["L",m,0],["L",m/2,S],["L",0,0],["Z"]];x.attr("path",R),x.move(A/2-m/2,O-1)},_._leftTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.height,O=[["M",0,0],["L",m,0],["L",0,S+3],["L",0,0],["Z"]];x.attr("path",O),x.move(0,A-3)},_._rightTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,R=[["M",0,0],["L",m,0],["L",m,S+4],["L",0,0],["Z"]];x.attr("path",R),x.move(A-m-1,O-4)},y}(i);E.exports=v},function(E,T,e){var t,u=e(19),s=u.FONT_FAMILY,h="g2-tooltip",r="g2-tooltip-title",c="g2-tooltip-list",n="g2-tooltip-list-item",i="g2-tooltip-marker",a="g2-tooltip-value",o=(t={crosshairs:!1,offset:15},t[""+h]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:s,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+r]={marginBottom:"4px"},t[""+c]={margin:0,listStyleType:"none",padding:0},t[""+n]={marginBottom:"4px"},t[""+i]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t[""+a]={display:"inline-block",float:"right",marginLeft:"30px"},t);E.exports=o},function(E,T,e){"use strict";function t(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(_){return typeof _}:t=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(g)}function u(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function s(g,y){return y&&(t(y)==="object"||typeof y=="function")?y:h(g)}function h(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function r(g,y){for(var _=0;_<y.length;_++){var M=y[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(g,M.key,M)}}function c(g,y,_){return y&&r(g.prototype,y),_&&r(g,_),g}function n(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),y&&i(g,y)}function i(g,y){return i=Object.setPrototypeOf||function(M,x){return M.__proto__=x,M},i(g,y)}function a(g,y,_){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(x,m,S){var P=o(x,m);if(!!P){var A=Object.getOwnPropertyDescriptor(P,m);return A.get?A.get.call(S):A.value}},a(g,y,_||g)}function o(g,y){for(;!Object.prototype.hasOwnProperty.call(g,y)&&(g=l(g),g!==null););return g}function l(g){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},l(g)}var f=e(10),v=e(43),b=function(g){n(y,g),c(y,[{key:"getDefaultCfg",value:function(){var M=a(l(y.prototype),"getDefaultCfg",this).call(this);return f({},M,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]);function y(_){var M;return u(this,y),M=s(this,l(y).call(this,_)),M._init(),M}return c(y,[{key:"_init",value:function(){var M=this.start,x=this.end,m={start:M.x,end:x.x},S={start:M.y,end:x.y};this.x=m,this.y=S}},{key:"convertPoint",value:function(M){var x,m;return this.isTransposed?(x=M.y,m=M.x):(x=M.x,m=M.y),{x:this.convertDim(x,"x"),y:this.convertDim(m,"y")}}},{key:"invertPoint",value:function(M){var x=this.invertDim(M.x,"x"),m=this.invertDim(M.y,"y");return this.isTransposed?{x:m,y:x}:{x,y:m}}}]),y}(v);E.exports=b},function(E,T,e){"use strict";function t(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(m){return typeof m}:t=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},t(M)}function u(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function s(M,x){return x&&(t(x)==="object"||typeof x=="function")?x:h(M)}function h(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function r(M,x){for(var m=0;m<x.length;m++){var S=x[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(M,S.key,S)}}function c(M,x,m){return x&&r(M.prototype,x),m&&r(M,m),M}function n(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),x&&i(M,x)}function i(M,x){return i=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S},i(M,x)}function a(M,x,m){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(P,A,O){var R=o(P,A);if(!!R){var H=Object.getOwnPropertyDescriptor(R,A);return H.get?H.get.call(O):H.value}},a(M,x,m||M)}function o(M,x){for(;!Object.prototype.hasOwnProperty.call(M,x)&&(M=l(M),M!==null););return M}function l(M){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},l(M)}var f=e(56),v=e(55),b=e(10),g=e(43),y=f.vec2,_=function(M){n(x,M),c(x,[{key:"getDefaultCfg",value:function(){var S=a(l(x.prototype),"getDefaultCfg",this).call(this);return b({},S,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]);function x(m){var S;return u(this,x),S=s(this,l(x).call(this,m)),S._init(),S}return c(x,[{key:"_init",value:function(){var S=this.width,P=this.height,A=this.radius,O=this.innerRadius,R=this.startAngle,H=this.endAngle,N=(H-R)/(2*Math.PI)+1,K=Math.min(S,P)/2;A&&A>=0&&A<=1&&(K=K*A);var V=Math.floor(K*(1-O)/N),k=V/(Math.PI*2),Z={start:R,end:H},X={start:O*K,end:O*K+V*.99};this.a=k,this.d=V,this.x=Z,this.y=X}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(S){var P=this.a,A=this.center,O,R;this.isTransposed?(O=S.y,R=S.x):(O=S.x,R=S.y);var H=this.convertDim(O,"x"),N=P*H,K=this.convertDim(R,"y");return{x:A.x+Math.cos(H)*(N+K),y:A.y+Math.sin(H)*(N+K)}}},{key:"invertPoint",value:function(S){var P=this.center,A=this.a,O=this.d+this.y.start,R=y.subtract([],[S.x,S.y],[P.x,P.y]),H=y.angleTo(R,[1,0],!0),N=H*A;y.length(R)<N&&(N=y.length(R));var K=Math.floor((y.length(R)-N)/O);H=2*K*Math.PI+H;var V=A*H,k=y.length(R)-V;k=v(k,0)?0:k;var Z=this.invertDim(H,"x"),X=this.invertDim(k,"y");Z=v(Z,0)?0:Z,X=v(X,0)?0:X;var at={};return at.x=this.isTransposed?X:Z,at.y=this.isTransposed?Z:X,at}}]),x}(g);E.exports=_},function(E,T,e){"use strict";var t=e(43);t.Cartesian=e(266),t.Rect=t.Cartesian,t.Polar=e(269),t.Helix=e(267),E.exports=t},function(E,T,e){"use strict";function t(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(P){return typeof P}:t=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t(m)}function u(m,S){if(!(m instanceof S))throw new TypeError("Cannot call a class as a function")}function s(m,S){return S&&(t(S)==="object"||typeof S=="function")?S:h(m)}function h(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function r(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}function c(m,S,P){return S&&r(m.prototype,S),P&&r(m,P),m}function n(m,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(S&&S.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),S&&i(m,S)}function i(m,S){return i=Object.setPrototypeOf||function(A,O){return A.__proto__=O,A},i(m,S)}function a(m,S,P){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(O,R,H){var N=o(O,R);if(!!N){var K=Object.getOwnPropertyDescriptor(N,R);return K.get?K.get.call(H):K.value}},a(m,S,P||m)}function o(m,S){for(;!Object.prototype.hasOwnProperty.call(m,S)&&(m=l(m),m!==null););return m}function l(m){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},l(m)}var f=e(56),v=e(55),b=e(10),g=e(43),y=f.mat3,_=f.vec2,M=f.vec3,x=function(m){n(S,m),c(S,[{key:"getDefaultCfg",value:function(){var A=a(l(S.prototype),"getDefaultCfg",this).call(this);return b({},A,{startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,type:"polar",isPolar:!0})}}]);function S(P){var A;return u(this,S),A=s(this,l(S).call(this,P)),A._init(),A}return c(S,[{key:"_init",value:function(){for(var A=this.radius,O=this.innerRadius,R=this.center,H=this.startAngle,N=this.endAngle;N<H;)N+=Math.PI*2;this.endAngle=N;var K=this.getOneBox(),V=K.maxX-K.minX,k=K.maxY-K.minY,Z=Math.abs(K.minX)/V,X=Math.abs(K.minY)/k,at=this.width,pt=this.height,gt,ft;pt/k>at/V?(gt=at/V,ft={x:R.x-(.5-Z)*at,y:R.y-(.5-X)*gt*k}):(gt=pt/k,ft={x:R.x-(.5-Z)*gt*V,y:R.y-(.5-X)*pt}),A?A>0&&A<=1?A=gt*A:(A<=0||A>gt)&&(A=gt):A=gt;var Rt={start:H,end:N},Nt={start:O*A,end:A};this.x=Rt,this.y=Nt,this.radius=A,this.circleCentre=ft,this.center=ft}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var A=this.startAngle,O=this.endAngle;if(Math.abs(O-A)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var R=[0,Math.cos(A),Math.cos(O)],H=[0,Math.sin(A),Math.sin(O)],N=Math.min(A,O);N<Math.max(A,O);N+=Math.PI/18)R.push(Math.cos(N)),H.push(Math.sin(N));return{minX:Math.min.apply(Math,R),maxX:Math.max.apply(Math,R),minY:Math.min.apply(Math,H),maxY:Math.max.apply(Math,H)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(A){var O=this.getCenter(),R=this.isTransposed?A.y:A.x,H=this.isTransposed?A.x:A.y;return R=this.convertDim(R,"x"),H=this.convertDim(H,"y"),{x:O.x+Math.cos(R)*H,y:O.y+Math.sin(R)*H}}},{key:"invertPoint",value:function(A){var O=this.getCenter(),R=[A.x-O.x,A.y-O.y],H=this.x,N=[1,0,0,0,1,0,0,0,1];y.rotate(N,N,H.start);var K=[1,0,0];M.transformMat3(K,K,N),K=[K[0],K[1]];var V=_.angleTo(K,R,H.end<H.start);v(V,Math.PI*2)&&(V=0);var k=_.length(R),Z=V/(H.end-H.start);Z=H.end-H.start>0?Z:-Z;var X=this.invertDim(k,"y"),at={};return at.x=this.isTransposed?X:Z,at.y=this.isTransposed?Z:X,at}}]),S}(g);E.exports=x},function(E,T,e){var t=e(0),u=e(16),s=t.PathUtil;function h(S){var P=S.start,A=S.end,O=S.getWidth(),R=S.getHeight(),H=200,N,K,V,k,Z;return S.isPolar?(k=S.getRadius(),V=S.getCenter(),N=S.startAngle,K=S.endAngle,Z=new u.Fan({attrs:{x:V.x,y:V.y,rs:0,re:k+H,startAngle:N,endAngle:N}}),Z.endState={endAngle:K}):(Z=new u.Rect({attrs:{x:P.x-H,y:A.y-H,width:S.isTransposed?O+H*2:0,height:S.isTransposed?0:R+H*2}}),S.isTransposed?Z.endState={height:R+H*2}:Z.endState={width:O+H*2}),Z.isClip=!0,Z}function r(S){if(t.isEmpty(S))return null;var P=S[0].x,A=S[0].x,O=S[0].y,R=S[0].y;return t.each(S,function(H){P=P>H.x?H.x:P,A=A<H.x?H.x:A,O=O>H.y?H.y:O,R=R<H.y?H.y:R}),{minX:P,maxX:A,minY:O,maxY:R,centerX:(P+A)/2,centerY:(O+R)/2}}function c(S,P){var A=S.points||S.get("origin").points,O=r(A),R,H,N=P.startAngle,K=P.endAngle,V=K-N;return P.isTransposed?(R=O.maxY*V,H=O.minY*V):(R=O.maxX*V,H=O.minX*V),R+=N,H+=N,{startAngle:H,endAngle:R}}function n(S,P,A){var O={};return S.delay&&(O.delay=t.isFunction(S.delay)?S.delay(P,A):S.delay),O.easing=t.isFunction(S.easing)?S.easing(P,A):S.easing,O.duration=t.isFunction(S.duration)?S.duration(P,A):S.duration,O.callback=S.callback,O}function i(S,P){var A=S._id,O=S.get("index"),R=S.getBBox(),H=S.get("origin").points,N=(R.minX+R.maxX)/2,K;H[0].y-H[1].y<=0?K=R.maxY:K=R.minY;var V=[N,K,1];S.apply(V),S.attr("transform",[["t",-N,-K],["s",1,.01],["t",N,K]]);var k={transform:[["t",-N,-K],["s",1,100],["t",N,K]]},Z=n(P,O,A,k);S.animate(k,Z.duration,Z.easing,Z.callback,Z.delay)}function a(S,P){var A=S._id,O=S.get("index"),R=S.getBBox(),H=S.get("origin").points,N,K=(R.minY+R.maxY)/2;H[0].y-H[1].y>0?N=R.maxX:N=R.minX;var V=[N,K,1];S.apply(V),S.attr({transform:[["t",-N,-K],["s",.01,1],["t",N,K]]});var k={transform:[["t",-N,-K],["s",100,1],["t",N,K]]},Z=n(P,O,A,k);S.animate(k,Z.duration,Z.easing,Z.callback,Z.delay)}function o(S,P){var A={lineWidth:0,opacity:0},O=S._id,R=S.get("index"),H=n(P,R,O,A);S.animate(A,H.duration,H.easing,function(){S.remove()},H.delay)}function l(S,P,A){var O=S._id,R=S.get("index"),H,N;if(A.isPolar&&S.name!=="point")H=A.getCenter().x,N=A.getCenter().y;else{var K=S.getBBox();H=(K.minX+K.maxX)/2,N=(K.minY+K.maxY)/2}var V=[H,N,1];S.apply(V),S.attr({transform:[["t",-H,-N],["s",.01,.01],["t",H,N]]});var k={transform:[["t",-H,-N],["s",100,100],["t",H,N]]},Z=n(P,R,O,k);S.animate(k,Z.duration,Z.easing,Z.callback,Z.delay)}function f(S,P,A){var O=S._id,R=S.get("index"),H,N;if(A.isPolar&&S.name!=="point")H=A.getCenter().x,N=A.getCenter().y;else{var K=S.getBBox();H=(K.minX+K.maxX)/2,N=(K.minY+K.maxY)/2}var V=[H,N,1];S.apply(V);var k={transform:[["t",-H,-N],["s",.01,.01],["t",H,N]]},Z=n(P,R,O,k);S.animate(k,Z.duration,Z.easing,function(){S.remove()},Z.delay)}function v(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),R=s.pathToAbsolute(S.attr("path"));S.attr("path",[R[0]]);var H={path:R},N=n(P,O,A,H);S.animate(H,N.duration,N.easing,N.callback,N.delay)}}function b(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),R=s.pathToAbsolute(S.attr("path")),H={path:[R[0]]},N=n(P,O,A,H);S.animate(H,N.duration,N.easing,function(){S.remove()},N.delay)}}function g(S,P,A,O,R){var H=h(A),N=S.get("canvas"),K=S._id,V=S.get("index"),k;O?(H.attr("startAngle",O),H.attr("endAngle",O),k={endAngle:R}):k=H.endState,H.set("canvas",N),S.attr("clip",H),S.setSilent("animating",!0);var Z=n(P,V,K,k);H.animate(k,Z.duration,Z.easing,function(){S&&!S.get("destroyed")&&(S.attr("clip",null),S.setSilent("cacheShape",null),S.setSilent("animating",!1),H.remove())},Z.delay)}function y(S,P){var A=S._id,O=S.get("index"),R=t.isNil(S.attr("fillOpacity"))?1:S.attr("fillOpacity"),H=t.isNil(S.attr("strokeOpacity"))?1:S.attr("strokeOpacity");S.attr("fillOpacity",0),S.attr("strokeOpacity",0);var N={fillOpacity:R,strokeOpacity:H},K=n(P,O,A,N);S.animate(N,K.duration,K.easing,K.callback,K.delay)}function _(S,P){var A=S._id,O=S.get("index"),R={fillOpacity:0,strokeOpacity:0},H=n(P,O,A,R);S.animate(R,H.duration,H.easing,function(){S.remove()},H.delay)}function M(S,P,A){var O=c(S,A),R=O.endAngle,H=O.startAngle;g(S,P,A,H,R)}function x(S,P,A){if(S.name==="line"){var O=S.get("canvas"),R=S.get("cacheShape"),H=S._id,N=S.get("index"),K=new u.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});K.isClip=!0,K.set("canvas",O);var V=s.pathToAbsolute(R.attrs.path),k=s.pathToAbsolute(S.attr("path")),Z=V[1][1]-V[0][1],X=V[V.length-1][1]+Z,at=k[k.length-1][2],pt=V.concat([["L",X,at]]),gt=[0,0,1];S.apply(gt),S.attr("clip",K),S.attr("path",pt);var ft={transform:[["t",-Z,0]]},Rt=n(P,N,H,ft);S.animate(ft,Rt.duration,Rt.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",k),S.attr({transform:[["t",Z,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),K.remove())},Rt.delay)}}function m(S,P,A){if(S.name==="area"){var O=S.get("canvas"),R=S.get("cacheShape"),H=S._id,N=S.get("index"),K=new u.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});K.isClip=!0,K.set("canvas",O);var V=s.pathToAbsolute(R.attrs.path),k=s.pathToAbsolute(S.attr("path")),Z=V[1][1]-V[0][1],X=Math.floor(V.length/2),at=V[X-1][1]+Z,pt=k[X-1][2],gt=[].concat(V.slice(0,X),[["L",at,pt],["L",at,k[X][2]]],V.slice(X)),ft=[0,0,1];S.apply(ft),S.attr("clip",K),S.attr("path",gt);var Rt={transform:[["t",-Z,0]]},Nt=n(P,N,H,Rt);S.animate(Rt,Nt.duration,Nt.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",k),S.attr({transform:[["t",Z,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),K.remove())},Nt.delay)}}E.exports={enter:{clipIn:g,zoomIn:l,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:y},leave:{lineWidthOut:o,zoomOut:f,pathOut:b,fadeOut:_},appear:{clipIn:g,zoomIn:l,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:y},update:{fadeIn:y,fanIn:M,lineSlideLeft:x,areaSlideLeft:m}}},function(E,T,e){var t=e(0),u=e(119),s=t.MatrixUtil,h=s.mat3;function r(o,l){var f=[];if(o.get("animate")===!1)return[];var v=o.get("children");return t.each(v,function(b){if(b.isGroup)f=f.concat(r(b,l));else if(b.isShape&&b._id){var g=b._id;g=g.split("-")[0],g===l&&f.push(b)}}),f}function c(o){var l={};return t.each(o,function(f){if(!(!f._id||f.isClip)){var v=f._id;l[v]={_id:v,type:f.get("type"),attrs:t.cloneDeep(f.attr()),name:f.name,index:f.get("index"),animateCfg:f.get("animateCfg"),coord:f.get("coord")}}}),l}function n(o,l,f,v){var b;return v?b=u.Action[f][v]:b=u.getAnimation(o,l,f),b}function i(o,l,f){var v=u.getAnimateCfg(o,l);return f&&f[l]?t.deepMix({},v,f[l]):v}function a(o,l,f,v){var b,g,y=!1;if(v){var _=[],M=[];t.each(l,function(x){var m=o[x._id];m?(x.setSilent("cacheShape",m),_.push(x),delete o[x._id]):M.push(x)}),t.each(o,function(x){var m=x.name,S=x.coord,P=x._id,A=x.attrs,O=x.index,R=x.type;if(g=i(m,"leave",x.animateCfg),b=n(m,S,"leave",g.animation),t.isFunction(b)){var H=f.addShape(R,{attrs:A,index:O});if(H._id=P,H.name=m,S&&m!=="label"){var N=H.getMatrix(),K=h.multiply([],N,S.matrix);H.setMatrix(K)}y=!0,b(H,g,S)}}),t.each(_,function(x){var m=x.name,S=x.get("coord"),P=x.get("cacheShape").attrs;if(!t.isEqual(P,x.attr())){if(g=i(m,"update",x.get("animateCfg")),b=n(m,S,"update",g.animation),t.isFunction(b))b(x,g,S);else{var A=t.cloneDeep(x.attr());x.attr(P),x.animate(A,g.duration,g.easing,function(){x.setSilent("cacheShape",null)})}y=!0}}),t.each(M,function(x){var m=x.name,S=x.get("coord");g=i(m,"enter",x.get("animateCfg")),b=n(m,S,"enter",g.animation),t.isFunction(b)&&(b(x,g,S),y=!0)})}else t.each(l,function(x){var m=x.name,S=x.get("coord");g=i(m,"appear",x.get("animateCfg")),b=n(m,S,"appear",g.animation),t.isFunction(b)&&(b(x,g,S),y=!0)});return y}E.exports={execAnimation:function(l,f){var v=l.get("middlePlot"),b=l.get("backPlot"),g=l.get("_id"),y=l.get("canvas"),_=y.get(g+"caches")||[];_.length===0&&(f=!1);var M=r(v,g),x=r(b,g),m=M.concat(x);y.setSilent(g+"caches",c(m));var S;f?S=a(_,m,y,f):S=a(_,M,y,f),S||y.draw()}}},function(E,T,e){var t=e(0),u=e(30),s=u.Axis,h=t.MatrixUtil.vec2;function r(a){var o=[];if(a.length>0){o=a.slice(0);var l=o[0],f=o[o.length-1];l.value!==0&&o.unshift({value:0}),f.value!==1&&o.push({value:1})}return o}function c(a,o,l){var f=[];return a.length<1||(a.length>=2&&o&&l&&f.push({text:"",tickValue:"",value:0}),a[0].value!==0&&f.push({text:"",tickValue:"",value:0}),f=f.concat(a),f[f.length-1].value!==1&&f.push({text:"",tickValue:"",value:1})),f}function n(a,o){return o===void 0&&(o=0),a==="middle"&&(o=.5),a.includes("%")&&(o=parseInt(a,10)/100),o}var i=function(){function a(l){this.visible=!0,this.canvas=null,this.container=null,this.coord=null,this.options=null,this.axes=[],t.mix(this,l)}var o=a.prototype;return o._isHide=function(f){var v=this.options;return!!(v&&v[f]===!1)},o._getMiddleValue=function(f,v,b,g){if(f===0&&!g)return 0;if(f===1)return 1;var y=v[b+1].value;return!g&&y===1?1:(f+y)/2},o._getLineRange=function(f,v,b,g){var y,_,M,x=v.field,m=this.options,S="";if(m[x]&&m[x].position&&(S=m[x].position),b==="x"){var P=S==="top"?1:0;P=n(S,P),y={x:0,y:P},_={x:1,y:P},M=!1}else{if(g){var A=S==="left"?0:1;A=n(S,A),y={x:A,y:0},_={x:A,y:1}}else{var O=S==="right"?1:0;O=n(S,O),y={x:O,y:0},_={x:O,y:1}}M=!0}return y=f.convert(y),_=f.convert(_),{start:y,end:_,isVertical:M}},o._getLineCfg=function(f,v,b,g){var y,_=this._getLineRange(f,v,b,g),M=_.isVertical,x=_.start,m=_.end,S=f.center;return f.isTransposed&&(M=!M),M&&x.x>S.x||!M&&x.y>S.y?y=1:y=-1,{isVertical:M,factor:y,start:x,end:m}},o._getCircleCfg=function(f){var v={},b=f.x,g=f.y,y=g.start>g.end,_;f.isTransposed?_={x:y?0:1,y:0}:_={x:0,y:y?0:1},_=f.convert(_);var M=f.circleCentre,x=[_.x-M.x,_.y-M.y],m=[1,0],S;_.y>M.y?S=h.angle(x,m):S=h.angle(x,m)*-1;var P=S+(b.end-b.start);return v.startAngle=S,v.endAngle=P,v.center=M,v.radius=Math.sqrt(Math.pow(_.x-M.x,2)+Math.pow(_.y-M.y,2)),v.inner=f.innerRadius||0,v},o._getRadiusCfg=function(f){var v=f.x.start,b=v<0?-1:1,g,y;return f.isTransposed?(g={x:0,y:0},y={x:1,y:0}):(g={x:0,y:0},y={x:0,y:1}),{factor:b,start:f.convert(g),end:f.convert(y)}},o._getAxisPosition=function(f,v,b,g){var y="",_=this.options;if(_[g]&&_[g].position)y=_[g].position;else{var M=f.type;f.isRect?v==="x"?y="bottom":v==="y"&&(b?y="right":y="left"):M==="helix"?y="helix":v==="x"?y=f.isTransposed?"radius":"circle":y=f.isTransposed?"circle":"radius"}return y},o._getAxisDefaultCfg=function(f,v,b,g){var y=this,_=y.viewTheme,M={},x=y.options,m=v.field;if(M=t.deepMix({},_.axis[g],M,x[m]),M.viewTheme=_,M.title){var S=t.isPlainObject(M.title)?M.title:{};S.text=S.text||v.alias||m,t.deepMix(M,{title:S})}return M.ticks=v.getTicks(),f.isPolar&&!v.isCategory&&b==="x"&&Math.abs(f.endAngle-f.startAngle)===Math.PI*2&&M.ticks.pop(),M.coord=f,M.label&&t.isNil(M.label.autoRotate)&&(M.label.autoRotate=!0),x.hasOwnProperty("xField")&&x.xField.hasOwnProperty("grid")&&M.position==="left"&&t.deepMix(M,x.xField),M},o._getAxisCfg=function(f,v,b,g,y,_){y===void 0&&(y="");var M=this,x=M._getAxisPosition(f,g,y,v.field),m=M._getAxisDefaultCfg(f,v,g,x);if(!t.isEmpty(m.grid)&&b){var S=[],P=[],A=r(b.getTicks());if(A.length){var O=c(m.ticks,v.isLinear,m.grid.align==="center");t.each(O,function(R,H){P.push(R.tickValue);var N=[],K=R.value;if(m.grid.align==="center"&&(K=M._getMiddleValue(K,O,H,v.isLinear)),!t.isNil(K)){var V=f.x,k=f.y;t.each(A,function(Z){var X=g==="x"?K:Z.value,at=g==="x"?Z.value:K,pt=f.convert({x:X,y:at});if(f.isPolar){var gt=f.circleCentre;k.start>k.end&&(at=1-at),pt.flag=V.start>V.end?0:1,pt.radius=Math.sqrt(Math.pow(pt.x-gt.x,2)+Math.pow(pt.y-gt.y,2))}N.push(pt)}),S.push({_id:_+"-"+g+y+"-grid-"+R.tickValue,points:N})}})}m.grid.items=S,m.grid.tickValues=P}return m.type=v.type,m},o._getHelixCfg=function(f){for(var v={},b=f.a,g=f.startAngle,y=f.endAngle,_=100,M=[],x=0;x<=_;x++){var m=f.convert({x:x/100,y:0});M.push(m.x),M.push(m.y)}var S=f.convert({x:0,y:0});return v.a=b,v.startAngle=g,v.endAngle=y,v.crp=M,v.axisStart=S,v.center=f.center,v.inner=f.y.start,v},o._drawAxis=function(f,v,b,g,y,_,M){var x=this.container,m=this.canvas,S,P;f.type==="cartesian"?(S=s.Line,P=this._getLineCfg(f,v,g,M)):f.type==="helix"&&g==="x"?(S=s.Helix,P=this._getHelixCfg(f)):g==="x"?(S=s.Circle,P=this._getCircleCfg(f)):(S=s.Line,P=this._getRadiusCfg(f));var A=this._getAxisCfg(f,v,b,g,M,y);A=t.mix({},A,P),g==="y"&&_&&_.get("type")==="circle"&&(A.circle=_),A._id=y+"-"+g,t.isNil(M)||(A._id=y+"-"+g+M),t.mix(A,{canvas:m,group:x.addGroup({viewId:y})});var O=new S(A);return O.render(),this.axes.push(O),O},o.createAxis=function(f,v,b){var g=this,y=this.coord,_=y.type;if(_!=="theta"&&!(_==="polar"&&y.isTransposed)){var M;f&&!g._isHide(f.field)&&(M=g._drawAxis(y,f,v[0],"x",b)),!t.isEmpty(v)&&_!=="helix"&&t.each(v,function(x,m){g._isHide(x.field)||g._drawAxis(y,x,f,"y",b,M,m)})}},o.changeVisible=function(f){var v=this.axes;t.each(v,function(b){b.set("visible",f)})},o.clear=function(){var f=this,v=f.axes;t.each(v,function(b){b.destroy()}),f.axes=[]},a}();E.exports=i},function(E,T,e){var t=e(0),u=e(268),s=function(){function h(c){this.type="rect",this.actions=[],this.cfg={},t.mix(this,c),this.option=c||{}}var r=h.prototype;return r.reset=function(n){return this.actions=n.actions||[],this.type=n.type,this.cfg=n.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},r._execActions=function(n){var i=this.actions;t.each(i,function(a){var o=a[0];n[o](a[1],a[2])})},r.hasAction=function(n){var i=this.actions,a=!1;return t.each(i,function(o){if(n===o[0])return a=!0,!1}),a},r.createCoord=function(n,i){var a=this,o=a.type,l=a.cfg,f,v,b=t.mix({start:n,end:i},l);return o==="theta"?(f=u.Polar,a.hasAction("transpose")||a.transpose(),v=new f(b),v.type=o):(f=u[t.upperFirst(o||"")]||u.Rect,v=new f(b)),a._execActions(v),v},r.rotate=function(n){return n=n*Math.PI/180,this.actions.push(["rotate",n]),this},r.reflect=function(n){return this.actions.push(["reflect",n]),this},r.scale=function(n,i){return this.actions.push(["scale",n,i]),this},r.transpose=function(){return this.actions.push(["transpose"]),this},h}();E.exports=s},function(E,T,e){var t=e(0);function u(r,c){if(t.isNil(r)||t.isNil(c))return!1;var n=r.get("origin"),i=c.get("origin");return t.isNil(n)&&t.isNil(i)?t.isEqual(r,c):t.isEqual(n,i)}function s(r){r.shape&&r.shape.get("origin")&&(r.data=r.shape.get("origin"))}var h=function(){function r(n){this.view=null,this.canvas=null,t.assign(this,n),this._init()}var c=r.prototype;return c._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},c._getShapeEventObj=function(i){return{x:i.x/this.pixelRatio,y:i.y/this.pixelRatio,target:i.target,toElement:i.event.toElement||i.event.relatedTarget}},c._getShape=function(i,a){var o=this.view,l=o.get("canvas");return l.getShape(i,a)},c._getPointInfo=function(i){var a=this.view,o={x:i.x/this.pixelRatio,y:i.y/this.pixelRatio},l=a.getViewsByPoint(o);return o.views=l,o},c._getEventObj=function(i,a,o){return{x:a.x,y:a.y,target:i.target,toElement:i.event.toElement||i.event.relatedTarget,views:o}},c.bindEvents=function(){var i=this.canvas;i.on("mousedown",t.wrapBehavior(this,"onDown")),i.on("mousemove",t.wrapBehavior(this,"onMove")),i.on("mouseleave",t.wrapBehavior(this,"onOut")),i.on("mouseup",t.wrapBehavior(this,"onUp")),i.on("click",t.wrapBehavior(this,"onClick")),i.on("dblclick",t.wrapBehavior(this,"onClick")),i.on("touchstart",t.wrapBehavior(this,"onTouchstart")),i.on("touchmove",t.wrapBehavior(this,"onTouchmove")),i.on("touchend",t.wrapBehavior(this,"onTouchend"))},c._triggerShapeEvent=function(i,a,o){if(i&&i.name&&!i.get("destroyed")){var l=this.view;if(l.isShapeInView(i)){var f=i.name+":"+a;o.view=l,o.appendInfo=i.get("appendInfo"),l.emit(f,o);var v=l.get("parent");v&&v.emit(f,o)}}},c.onDown=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("mousedown",o),this._triggerShapeEvent(this.currentShape,"mousedown",o)},c.onMove=function(i){var a=this,o=a.view,l=a.currentShape;l&&l.get("destroyed")&&(l=null,a.currentShape=null);var f=a._getShape(i.x,i.y)||i.currentTarget,v=a._getShapeEventObj(i);if(v.shape=f,s(v),o.emit("mousemove",v),a._triggerShapeEvent(f,"mousemove",v),l&&!u(l,f)){var b=a._getShapeEventObj(i);b.shape=l,b.toShape=f,s(b),a._triggerShapeEvent(l,"mouseleave",b)}if(f&&!u(l,f)){var g=a._getShapeEventObj(i);g.shape=f,g.fromShape=l,s(g),a._triggerShapeEvent(f,"mouseenter",g)}a.currentShape=f;var y=a._getPointInfo(i),_=a.curViews||[];_.length===0&&y.views.length&&o.emit("plotenter",a._getEventObj(i,y,y.views)),_.length&&y.views.length===0&&o.emit("plotleave",a._getEventObj(i,y,_)),y.views.length&&(v=a._getEventObj(i,y,y.views),v.shape=f,s(v),o.emit("plotmove",v)),a.curViews=y.views},c.onOut=function(i){var a=this,o=a.view,l=a._getPointInfo(i),f=a.curViews||[],v=a._getEventObj(i,l,f);a.curViews&&a.curViews.length!==0&&(!v.toElement||v.toElement.tagName!=="CANVAS")&&(o.emit("plotleave",v),a.curViews=[])},c.onUp=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,a.emit("mouseup",o),this._triggerShapeEvent(this.currentShape,"mouseup",o)},c.onClick=function(i){var a=this,o=a.view,l=a._getShape(i.x,i.y)||i.currentTarget,f=a._getShapeEventObj(i);f.shape=l,s(f),o.emit("click",f),a._triggerShapeEvent(l,i.type,f),a.currentShape=l;var v=a._getPointInfo(i),b=v.views;if(!t.isEmpty(b)){var g=a._getEventObj(i,v,b);if(a.currentShape){var y=a.currentShape;g.shape=y,s(g)}i.type==="dblclick"?(o.emit("plotdblclick",g),o.emit("dblclick",f)):o.emit("plotclick",g)}},c.onTouchstart=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,l=this._getShapeEventObj(i);l.shape=o,s(l),a.emit("touchstart",l),this._triggerShapeEvent(o,"touchstart",l),this.currentShape=o},c.onTouchmove=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,l=this._getShapeEventObj(i);l.shape=o,s(l),a.emit("touchmove",l),this._triggerShapeEvent(o,"touchmove",l),this.currentShape=o},c.onTouchend=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("touchend",o),this._triggerShapeEvent(this.currentShape,"touchend",o)},c.clearEvents=function(){var i=this.canvas;i.off("mousemove",t.getWrapBehavior(this,"onMove")),i.off("mouseleave",t.getWrapBehavior(this,"onOut")),i.off("mousedown",t.getWrapBehavior(this,"onDown")),i.off("mouseup",t.getWrapBehavior(this,"onUp")),i.off("click",t.getWrapBehavior(this,"onClick")),i.off("dblclick",t.getWrapBehavior(this,"onClick")),i.off("touchstart",t.getWrapBehavior(this,"onTouchstart")),i.off("touchmove",t.getWrapBehavior(this,"onTouchmove")),i.off("touchend",t.getWrapBehavior(this,"onTouchend"))},r}();E.exports=h},function(E,T,e){var t=e(0),u=e(280),s=function(){function h(c){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,t.mix(this,c)}var r=h.prototype;return r._creatGuides=function(){var n=this,i=this.options,a=this.xScales,o=this.yScales,l=this.view,f=this.viewTheme;return this.backContainer&&l&&(this.backGroup=this.backContainer.addGroup({viewId:l.get("_id")})),this.frontContainer&&l&&(this.frontGroup=this.frontContainer.addGroup({viewId:l.get("_id")})),i.forEach(function(v){var b=v.type,g=t.deepMix({xScales:a,yScales:o,viewTheme:f},f?f.guide[b]:{},v);b=t.upperFirst(b);var y=new u[b](g);n.guides.push(y)}),n.guides},r.line=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"line"},n)),this},r.arc=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"arc"},n)),this},r.text=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"text"},n)),this},r.image=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"image"},n)),this},r.region=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"region"},n)),this},r.regionFilter=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"regionFilter"},n)),this},r.dataMarker=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataMarker"},n)),this},r.dataRegion=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataRegion"},n)),this},r.html=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"html"},n)),this},r.render=function(n){var i=this,a=i.view,o=a&&a.get("data"),l=i._creatGuides();t.each(l,function(f){var v;f.get("top")?v=i.frontGroup||i.frontContainer:v=i.backGroup||i.backContainer,f.render(n,v,o,a)})},r.clear=function(){this.options=[],this.reset()},r.changeVisible=function(n){var i=this.guides;t.each(i,function(a){a.changeVisible(n)})},r.reset=function(){var n=this.guides;t.each(n,function(i){i.clear()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},h}();E.exports=s},function(E,T,e){function t(){return t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},t.apply(this,arguments)}var u=e(0),s=e(30),h=s.Legend,r=e(282),c=e(9),n=e(122),i=e(124),a=e(5),o="_origin",l=4.5,f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,v=["cross","tick","plus","hyphen","line","hollowCircle","hollowSquare","hollowDiamond","hollowTriangle","hollowTriangleDown","hollowHexagon","hollowBowtie"];function b(_,M,x){var m;return u.isNil(x)?!1:(_=x.translate(_),M=x.translate(M),x.isCategory?m=_===M:m=Math.abs(_-M)<=1,m)}function g(_,M){var x;return u.each(_,function(m){if(m.get("visible")){var S=m.getYScale();if(S.field===M){x=m;return}}}),x}var y=function(){function _(x){var m=this;m.options={},u.mix(m,x),m.clear();var S=m.chart;m.container=S.get("frontPlot"),m.plotRange=S.get("plotRange")}var M=_.prototype;return M.clear=function(){var m=this.legends;this.backRange=null,u.each(m,function(S){u.each(S,function(P){P.destroy()})}),this.legends={}},M.getBackRange=function(){var m=this.backRange;if(!m){var S=this.chart.get("backPlot");m=n(S,i(this.chart.get("plotRange")));var P=this.plotRange;m.maxX-m.minX<P.br.x-P.tl.x&&m.maxY-m.minY<P.br.y-P.tl.y&&(m={minX:P.tl.x,minY:P.tl.y,maxX:P.br.x,maxY:P.br.y}),this.backRange=m}return m},M._isFieldInView=function(m,S,P){var A=!1,O=P.get("scales"),R=O[m];return R&&R.values&&(A=u.inArray(R.values,S)),A},M._bindClickEvent=function(m,S,P){var A=this,O=A.chart,R=O.get("views"),H=S.field,N=A.options;m.on("itemclick",function(K){if(N.onClick&&N.defaultClickHandlerEnabled!==!0)N.onClick(K);else{var V=K.item,k=K.checked,Z=m.get("selectedMode")==="single",X=V.dataValue;k?(u.Array.remove(P,X),A._isFieldInView(H,X,O)&&O.filter(H,function(at){return Z?at===X:!u.inArray(P,at)}),u.each(R,function(at){A._isFieldInView(H,X,at)&&at.filter(H,function(pt){return Z?pt===X:!u.inArray(P,pt)})})):Z||(P.push(X),A._isFieldInView(H,X,O)&&O.filter(H,function(at){return!u.inArray(P,at)}),u.each(R,function(at){A._isFieldInView(H,X,at)&&at.filter(H,function(pt){return!u.inArray(P,pt)})})),N.onClick&&N.onClick(K),O.set("keepLegend",!0),O.set("keepPadding",!0),O.repaint(),O.set("keepPadding",!1),O.set("keepLegend",!1)}})},M._bindClickEventForMix=function(m){var S=this,P=S.chart,A=P.getAllGeoms();m.on("itemclick",function(O){var R=O.item.field,H=O.checked;H?u.each(A,function(N){var K=N.getYScale().field;K===R&&N.show()}):u.each(A,function(N){var K=N.getYScale().field;K===R&&N.hide()})})},M._filterLabels=function(m,S,P){if(m.get("gLabel"))m.get("gLabel").set("visible",P);else{var A=S.get("labelCfg");if(A&&A.fields&&A.fields.length>0){var O=S.getXScale(),R=S.getYScale(),H=O.field,N=R.field,K=m.get("origin")._origin,V=S.get("labelContainer"),k=V.get("labelsGroup").get("children");u.each(k,function(Z){var X=Z.get("origin")||[];X[H]===K[H]&&X[N]===K[N]&&(Z.set("visible",P),m.set("gLabel",Z))})}}},M._bindFilterEvent=function(m,S){var P=this,A=this.chart,O=S.field;m.on("itemfilter",function(R){var H=R.range;A.filterShape(function(k,Z,X){if(!u.isNil(k[O])){var at=k[O]>=H[0]&&k[O]<=H[1];return P._filterLabels(Z,X,at),at}return!0});for(var N=A.getAllGeoms()||[],K=function(Z){var X=N[Z];X.get("type")==="heatmap"&&f(function(){X.drawWithRange(H)})},V=0;V<N.length;V++)K(V)})},M._getShapeData=function(m){var S=m.get("origin");return u.isArray(S)&&(S=S[0]),S[o]},M._bindHoverEvent=function(m,S){var P=this,A=P.chart,O=A.getAllGeoms(),R=P.options,H=A.get("canvas");m.on("itemhover",function(N){var K=N.item.value,V=P.pre;if(!V)u.each(O,function(k){var Z=k.get("shapeContainer"),X=k.getShapes(),at=[];if(S){var pt=k.get("scales")[S];u.each(X,function(gt){var ft=P._getShapeData(gt);ft&&b(ft[S],K,pt)&&at.push(gt)})}else k.getYScale().field===K&&(at=X);u.isEmpty(at)||(N.shapes=at,N.geom=k,R.onHover?(R.onHover(N),Z.sort(),H.draw()):k.setShapesActived(at))}),P.pre=K;else if(V===K)return}),m.on("itemunhover",function(N){P.pre=null,R.onUnhover&&R.onUnhover(N),u.each(O,function(K){K.get("activeShapes")&&(K.clearActivedShapes(),H.draw())})})},M._isFiltered=function(m,S,P){if(!m.isCategory)return!0;var A=!0;return P=m.invert(P),u.each(S,function(O){if(m.getText(O)===m.getText(P))return A=!1,!1}),A},M._alignLegend=function(m,S,P,A){var O=this,R=O.viewTheme,H=O.container,N=H.get("canvas"),K=N.get("width"),V=N.get("height"),k=O.totalRegion,Z=O.plotRange,X=O.getBackRange(),at=m.get("offset")[0]||0,pt=m.get("offset")[1]||0,gt=m.getHeight(),ft=m.getWidth(),Rt=R.legend.margin,Nt=R.legend.legendMargin,Dt=O.legends[A].length,St=A.split("-"),xt=0,Ot=0,it=Dt>1?k:P;if(St[0]==="left"||St[0]==="right")V=Z.br.y,xt=O._getXAlign(St[0],K,P,X,ft,Rt),S?Ot=(S.get("y")||S.get("group").get("y"))+S.getHeight()+Nt:Ot=O._getYAlignVertical(St[1],V,it,X,0,Rt,N.get("height"));else if(St[0]==="top"||St[0]==="bottom")if(Ot=O._getYAlignHorizontal(St[0],V,P,X,gt,Rt),S){var At=S.getWidth();xt=(S.get("x")||S.get("group").get("x"))+At+Nt}else xt=O._getXAlign(St[1],K,it,X,0,Rt),St[1]==="right"&&(xt=Z.br.x-it.totalWidth);m.move(xt+at,Ot+pt)},M._getXAlign=function(m,S,P,A,O,R){var H=A.minX-O-R[3]<0?0:A.minX-O-R[3],N=m==="left"?H:A.maxX+R[1];return m==="center"&&(N=(S-P.totalWidth)/2),N},M._getYAlignHorizontal=function(m,S,P,A,O,R){var H=m==="top"?A.minY-O-R[0]:A.maxY+R[2];return H},M._getYAlignVertical=function(m,S,P,A,O,R,H){var N=m==="top"?A.minY-O-R[0]:S-P.totalHeight;return m==="center"&&(N=(H-P.totalHeight)/2),N},M._getSubRegion=function(m){var S=0,P=0,A=0,O=0;return u.each(m,function(R){var H=R.getWidth(),N=R.getHeight();S<H&&(S=H),A+=H,P<N&&(P=N),O+=N}),{maxWidth:S,totalWidth:A,maxHeight:P,totalHeight:O}},M._getRegion=function(){var m=this,S=m.viewTheme,P=m.legends,A=S.legend.legendMargin,O=[],R=0,H=0;return u.each(P,function(N){var K=m._getSubRegion(N);O.push(K),R+=K.totalWidth+A,H+=K.totalHeight+A}),{totalWidth:R,totalHeight:H,subs:O}},M._addCategoryLegend=function(m,S,P,A,O){var R=this,H=m.field,N=R.options,K=N[H];K&&(N=K);var V=R.legends;V[O]=V[O]||[];var k=R.container,Z=[],X=m.getTicks(),at=!0,pt=P.get("shapeType")||"point",gt=P.getDefaultValue("shape")||"circle";N[H]&&N[H].marker?(gt=N[H].marker,pt="point",at=!1):N.marker&&(gt=N.marker,pt="point",at=!1);var ft=R.chart,Rt=R.viewTheme,Nt=ft.get("canvas"),Dt=R.plotRange,St=O.split("-"),xt=St[0]==="right"||St[0]==="left"?Dt.bl.y-Dt.tr.y:Nt.get("width");u.each(X,function(q){var mt=q.text,et=mt,st=q.value,bt=m.invert(st),Y={isInCircle:P.isInCircle()},rt=A?R._isFiltered(m,A,st):!0,ot=P.getAttr("color"),$=P.getAttr("shape");if(ot)if(ot.callback&&ot.callback.length>1){var Pt=Array(ot.callback.length-1).fill("");Y.color=ot.mapping.apply(ot,[bt].concat(Pt)).join("")||Rt.defaultColor}else Y.color=ot.mapping(bt).join("")||Rt.defaultColor;if(at&&$)if($.callback&&$.callback.length>1){var yt=Array($.callback.length-1).fill("");gt=$.mapping.apply($,[bt].concat(yt)).join("")}else gt=$.mapping(bt).join("");var Ft=c.getShapeFactory(pt),Qt=Ft.getMarkerCfg(gt,Y);a.legendMarkerRadius&&(Qt.radius=a.legendMarkerRadius),u.isFunction(gt)&&(Qt.symbol=gt),Z.push({value:et,dataValue:bt,checked:rt,marker:Qt})});var Ot=u.deepMix({},Rt.legend[St[0]],N[H]||N,{viewId:ft.get("_id"),maxLength:xt,items:Z,container:k,position:[0,0]});Ot.title&&u.deepMix(Ot,{title:{text:m.alias||m.field}});var it;if(R._isTailLegend(N,P))Ot.chart=R.chart,Ot.geom=P,it=new r(Ot);else if(N.useHtml){var At=k.get("canvas").get("el");if(k=N.container,u.isString(k)&&/^\#/.test(k)){var z=k.replace("#","");k=document.getElementById(z)}k||(k=At.parentNode),Ot.container=k,Ot.legendStyle===void 0&&(Ot.legendStyle={}),Ot.legendStyle.CONTAINER_CLASS=t({},Ot.legendStyle.CONTAINER_CLASS,{position:"absolute",overflow:"auto","z-index":At.style.zIndex===""?1:parseInt(At.style.zIndex,10)+1}),N.flipPage?(Ot.legendStyle.CONTAINER_CLASS.height=St[0]==="right"||St[0]==="left"?xt+"px":"auto",Ot.legendStyle.CONTAINER_CLASS.width=St[0]==="right"||St[0]==="left"?"auto":xt+"px",it=new h.CatPageHtml(Ot)):it=new h.CatHtml(Ot)}else it=new h.Category(Ot);return R._bindClickEvent(it,m,A),V[O].push(it),it},M._bindChartMove=function(m){var S=this.chart,P=this.legends;S.on("plotmove",function(A){var O=!1;if(A.target){var R=A.target.get("origin");if(R){var H=R[o]||R[0][o],N=m.field;if(H){var K=H[N];u.each(P,function(V){u.each(V,function(k){O=!0,!k.destroyed&&k.activate(K)})})}}}O||u.each(P,function(V){u.each(V,function(k){!k.destroyed&&k.deactivate()})})})},M._addContinuousLegend=function(m,S,P){var A=this,O=A.legends;O[P]=O[P]||[];var R=A.container,H=m.field,N=m.getTicks(),K=[],V,k,Z,X=A.viewTheme;u.each(N,function(Rt){var Nt=Rt.value,Dt=m.invert(Nt),St=S.mapping(Dt).join("");K.push({value:Rt.tickValue,attrValue:St,color:St,scaleValue:Nt}),Nt===0&&(k=!0),Nt===1&&(Z=!0)}),k||K.push({value:m.min,attrValue:S.mapping(0).join(""),color:S.mapping(0).join(""),scaleValue:0}),Z||K.push({value:m.max,attrValue:S.mapping(1).join(""),color:S.mapping(1).join(""),scaleValue:1});var at=A.options,pt=P.split("-"),gt=X.legend[pt[0]];(at&&at.slidable===!1||at[H]&&at[H].slidable===!1)&&(gt=u.mix({},gt,X.legend.gradient));var ft=u.deepMix({},gt,at[H]||at,{items:K,attr:S,formatter:m.formatter,container:R,position:[0,0]});if(ft.title&&u.deepMix(ft,{title:{text:m.alias||m.field}}),S.type==="color")V=new h.Color(ft);else if(S.type==="size")at&&at.sizeType==="circle"?V=new h.CircleSize(ft):V=new h.Size(ft);else return;return A._bindFilterEvent(V,m),O[P].push(V),V},M._isTailLegend=function(m,S){if(m.hasOwnProperty("attachLast")&&m.attachLast){var P=S.get("type");if(P==="line"||P==="lineStack"||P==="area"||P==="areaStack")return!0}return!1},M._adjustPosition=function(m,S){var P;if(S)P="right-top";else if(u.isArray(m))P=String(m[0])+"-"+String(m[1]);else{var A=m.split("-");A.length===1?(A[0]==="left"&&(P="left-bottom"),A[0]==="right"&&(P="right-bottom"),A[0]==="top"&&(P="top-center"),A[0]==="bottom"&&(P="bottom-center")):P=m}return P},M.addLegend=function(m,S,P,A){var O=this,R=O.options,H=m.field,N=R[H],K=O.viewTheme;if(N===!1)return null;if(N&&N.custom)O.addCustomLegend(H);else{var V=R.position||K.defaultLegendPosition;V=O._adjustPosition(V,O._isTailLegend(R,P)),N&&N.position&&(V=O._adjustPosition(N.position,O._isTailLegend(N,P)));var k;m.isLinear?k=O._addContinuousLegend(m,S,V):k=O._addCategoryLegend(m,S,P,A,V),k&&(O._bindHoverEvent(k,H),R.reactive&&O._bindChartMove(m))}},M.addCustomLegend=function(m){var S=this,P=S.chart,A=S.viewTheme,O=S.container,R=S.options;m&&(R=R[m]);var H=R.position||A.defaultLegendPosition;H=S._adjustPosition(H);var N=S.legends;N[H]=N[H]||[];var K=R.items;if(!!K){var V=P.getAllGeoms();u.each(K,function(Nt){var Dt=g(V,Nt.value);u.isPlainObject(Nt.marker)?Nt.marker.radius=Nt.marker.radius||a.legendMarkerRadius||l:(Nt.marker={symbol:Nt.marker||"circle",radius:a.legendMarkerRadius||l},u.indexOf(v,Nt.marker.symbol)!==-1?Nt.marker.stroke=Nt.fill:Nt.marker.fill=Nt.fill);var St=Nt.marker.symbol;u.isString(St)&&St.indexOf("hollow")!==-1&&(Nt.marker.symbol=u.lowerFirst(St.substr(6))),Nt.checked=u.isNil(Nt.checked)?!0:Nt.checked,Nt.geom=Dt});var k=P.get("canvas"),Z=S.plotRange,X=H.split("-"),at=X[0]==="right"||X[0]==="left"?Z.bl.y-Z.tr.y:k.get("width"),pt=u.deepMix({},A.legend[X[0]],R,{maxLength:at,items:K,container:O,position:[0,0]}),gt;if(R.useHtml){var ft=R.container;if(/^\#/.test(O)){var Rt=ft.replace("#","");ft=document.getElementById(Rt)}else ft||(ft=O.get("canvas").get("el").parentNode);pt.container=ft,pt.legendStyle===void 0&&(pt.legendStyle={}),pt.legendStyle.CONTAINER_CLASS||(pt.legendStyle.CONTAINER_CLASS={height:X[0]==="right"||X[0]==="left"?at+"px":"auto",width:X[0]==="right"||X[0]==="left"?"auto":at+"px",position:"absolute",overflow:"auto"}),R.flipPage?gt=new h.CatPageHtml(pt):gt=new h.CatHtml(pt)}else gt=new h.Category(pt);return N[H].push(gt),gt.on("itemclick",function(Nt){R.onClick&&R.onClick(Nt)}),S._bindHoverEvent(gt),gt}},M.addMixedLegend=function(m,S){var P=this,A=P.options,O=[];u.each(m,function(N){var K=N.alias||N.field,V=A[N.field];u.each(S,function(k){if(k.getYScale()===N&&N.values&&N.values.length>0&&V!==!1){var Z=k.get("shapeType")||"point",X=k.getDefaultValue("shape")||"circle",at=c.getShapeFactory(Z),pt={color:k.getDefaultValue("color")},gt=at.getMarkerCfg(X,pt);a.legendMarkerRadius&&(gt.radius=a.legendMarkerRadius);var ft={value:K,marker:gt,field:N.field};O.push(ft)}})});var R={custom:!0,items:O};P.options=u.deepMix({},R,P.options);var H=P.addCustomLegend();P._bindClickEventForMix(H)},M.alignLegends=function(){var m=this,S=m.legends,P=m._getRegion(S);m.totalRegion=P;var A=0;return u.each(S,function(O,R){var H=P.subs[A];u.each(O,function(N,K){var V=O[K-1];N.get("useHtml")&&!N.get("autoPosition")||m._alignLegend(N,V,H,R)}),A++}),this},_}();E.exports=y},function(E,T,e){var t=e(154),u=e(0),s=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,h={LINEAR:"linear",CAT:"cat",TIME:"time"},r=function(){function c(i){this.defs={},this.viewTheme={scales:{}},this.filters={},u.assign(this,i)}var n=c.prototype;return n._getDef=function(a){var o=this.defs,l=this.viewTheme,f=null;return(l.scales[a]||o[a])&&(f=u.mix({},l.scales[a]),u.each(o[a],function(v,b){u.isNil(v)?delete f[b]:f[b]=v}),this.filters[a]&&(delete f.min,delete f.max)),f},n._getDefaultType=function(a,o){var l=h.LINEAR,f=u.Array.firstValue(o,a);return u.isArray(f)&&(f=f[0]),s.test(f)?l=h.TIME:u.isString(f)&&(l=h.CAT),l},n._getScaleCfg=function(a,o,l){var f={field:o},v=u.Array.values(l,o);if(f.values=v,!t.isCategory(a)&&a!=="time"){var b=u.Array.getRange(v);f.min=b.min,f.max=b.max,f.nice=!0}return a==="time"&&(f.nice=!1),f},n.createScale=function(a,o){var l=this,f=l._getDef(a),v,b=o||[],g=u.Array.firstValue(b,a);if(u.isNumber(a)||u.isNil(g)&&!f)v=t.identity({value:a,field:a.toString(),values:[a]});else{var y;f&&(y=f.type),y=y||l._getDefaultType(a,b);var _=l._getScaleCfg(y,a,b);f&&u.mix(_,f),v=t[y](_)}return v},c}();E.exports=r},function(E,T,e){function t(){return t=Object.assign||function(y){for(var _=1;_<arguments.length;_++){var M=arguments[_];for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(y[x]=M[x])}return y},t.apply(this,arguments)}var u=e(0),s=e(9),h=e(30),r=h.Tooltip,c=u.MatrixUtil,n=c.vec2,i=["line","area","path","areaStack"],a=["line","area","point"],o=["marker","showMarker"];function l(y,_){var M=-1;return u.each(y,function(x,m){var S=!0;for(var P in _)if(_.hasOwnProperty(P)&&!o.includes(P)&&!u.isObject(_[P])&&_[P]!==x[P]){S=!1;break}if(S)return M=m,!1}),M}function f(y,_){if(!y)return!1;var M="";return y.className?(u.isNil(y.className.baseVal)?M=y.className:M=y.className.baseVal,M.includes(_)):!1}function v(y,_){for(var M=y.parentNode,x=!1;M&&M!==document.body;){if(f(M,_)){x=!0;break}M=M.parentNode}return x}function b(y){var _=[];return u.each(y,function(M){var x=l(_,M);x===-1?_.push(M):_[x]=M}),_}var g=function(){function y(M){u.assign(this,M),this.timeStamp=0,this.locked=!1}var _=y.prototype;return _._normalizeEvent=function(x){var m=this.chart,S=this._getCanvas(),P=S.getPointByClient(x.clientX,x.clientY),A=S.get("pixelRatio");P.x=P.x/A,P.y=P.y/A;var O=m.getViewsByPoint(P);return P.views=O,P},_._getCanvas=function(){return this.chart.get("canvas")},_._getTriggerEvent=function(){var x=this.options,m=x.triggerOn,S;return!m||m==="mousemove"?S="plotmove":m==="click"?S="plotclick":m==="none"&&(S=null),S},_._getDefaultTooltipCfg=function(){var x=this,m=x.chart,S=x.viewTheme,P=x.options,A=u.mix({},S.tooltip),O=m.getAllGeoms().filter(function(k){return k.get("visible")}),R=[];u.each(O,function(k){var Z=k.get("type"),X=k.get("adjusts"),at=!1;X&&u.each(X,function(pt){if(pt.type==="symmetric"||pt.type==="Symmetric")return at=!0,!1}),u.indexOf(R,Z)===-1&&!at&&R.push(Z)});var H=O.length&&O[0].get("coord")?O[0].get("coord").isTransposed:!1,N;if(O.length&&O[0].get("coord")&&O[0].get("coord").type==="cartesian"){if(R[0]==="interval"&&P.shared!==!1){var K=u.mix({},S.tooltipCrosshairsRect);K.isTransposed=H,N={zIndex:0,crosshairs:K}}else if(u.indexOf(a,R[0])>-1){var V=u.mix({},S.tooltipCrosshairsLine);V.isTransposed=H,N={crosshairs:V}}}return u.mix(A,N,{})},_._bindEvent=function(){var x=this.chart,m=this._getTriggerEvent();m&&(x.on(m,u.wrapBehavior(this,"onMouseMove")),x.on("plotleave",u.wrapBehavior(this,"onMouseOut")))},_._offEvent=function(){var x=this.chart,m=this._getTriggerEvent();m&&(x.off(m,u.getWrapBehavior(this,"onMouseMove")),x.off("plotleave",u.getWrapBehavior(this,"onMouseOut")))},_._setTooltip=function(x,m,S,P){var A=this,O=A.tooltip,R=A.prePoint;if(!R||R.x!==x.x||R.y!==x.y){m=b(m),A.prePoint=x;var H=A.chart,N=A.viewTheme,K=u.isArray(x.x)?x.x[x.x.length-1]:x.x,V=u.isArray(x.y)?x.y[x.y.length-1]:x.y;O.get("visible")||H.emit("tooltip:show",{x:K,y:V,tooltip:O});var k=m[0],Z=k.title||k.name;O.isContentChange(Z,m)&&(H.emit("tooltip:change",{tooltip:O,x:K,y:V,items:m}),Z=m[0].title||m[0].name,O.setContent(Z,m),u.isEmpty(S)?(O.clearMarkers(),O.set("markerItems",[])):A.options.hideMarkers===!0?O.set("markerItems",S):O.setMarkers(S,N.tooltipMarker));var X=this._getCanvas();P===X&&O.get("type")==="mini"?O.hide():(O.setPosition(K,V,P),O.show())}},_.hideTooltip=function(){var x=this.tooltip,m=this.chart,S=this._getCanvas();this.prePoint=null,x.hide(),m.emit("tooltip:hide",{tooltip:x}),S.draw()},_.onMouseMove=function(x){if(!(u.isEmpty(x.views)||this.locked)){var m=this.timeStamp,S=+new Date,P={x:x.x,y:x.y};S-m>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(P,x.views,x.shape),this.timeStamp=S)}},_.onMouseOut=function(x){var m=this.tooltip;!m.get("visible")||!m.get("follow")||this.locked||x&&x.toElement&&(f(x.toElement,"g2-tooltip")||v(x.toElement,"g2-tooltip"))||this.hideTooltip()},_.renderTooltip=function(){var x=this;if(!x.tooltip){var m=x.chart,S=x.viewTheme,P=x._getCanvas(),A=x._getDefaultTooltipCfg(),O=x.options;O=u.deepMix({plotRange:m.get("plotRange"),capture:!1,canvas:P,frontPlot:m.get("frontPlot"),viewTheme:S.tooltip,backPlot:m.get("backPlot")},A,O),O.crosshairs&&O.crosshairs.type==="rect"&&(O.zIndex=0),O.visible=!1;var R;O.type==="mini"?(O.crosshairs=!1,O.position="top",R=new r.Mini(O)):O.useHtml?R=new r.Html(O):R=new r.Canvas(O),x.tooltip=R;var H=x._getTriggerEvent(),N=R.get("container");!R.get("enterable")&&H==="plotmove"&&N&&(N.onmousemove=function(K){var V=x._normalizeEvent(K);m.emit(H,V)}),N&&(N.onmouseleave=function(){x.locked||x.hideTooltip()}),x._bindEvent()}},_._formatMarkerOfItem=function(x,m,S){var P=this,A=P.options,O=S.point;if(O&&O.x&&O.y){var R=u.isArray(O.x)?O.x[O.x.length-1]:O.x,H=u.isArray(O.y)?O.y[O.y.length-1]:O.y;O=x.applyMatrix(R,H,1),S.x=O[0],S.y=O[1],S.showMarker=!0,S.color.substring(0,2)==="l("&&(!A.hasOwnProperty("useHtml")||A.useHtml)&&(S.color=S.color.split(" ")[1].substring(2));var N=P._getItemMarker(m,S);if(S.marker=N,u.indexOf(i,m.get("type"))!==-1)return S}return null},_.lockTooltip=function(){this.locked=!0},_.unlockTooltip=function(){this.locked=!1},_.showTooltip=function(x,m,S){var P=this,A=this;if(!(u.isEmpty(m)||!x)){this.tooltip||this.renderTooltip();var O=A.options,R=[],H=[];if(u.each(m,function(X){if(!X.get("tooltipEnable"))return!0;var at=X.get("geoms"),pt=X.get("coord");u.each(at,function(gt){var ft=gt.get("type");if(gt.get("visible")&&gt.get("tooltipCfg")!==!1){var Rt=gt.get("dataArray");if(gt.isShareTooltip()||O.shared===!1&&u.inArray(["area","line","path","polygon"],ft)){var Nt=gt.getXScale(),Dt=gt.getAttr("color"),St=Dt?Dt.field:void 0;if(ft==="interval"&&Nt.field===St&&gt.hasAdjust("dodge")){var xt=u.find(Rt,function(q){return!!gt.findPoint(x,q)});u.each(xt,function(q){var mt=gt.getTipItems(q,O.title);u.each(mt,function(et){var st=A._formatMarkerOfItem(pt,gt,et);st&&R.push(st)}),H=H.concat(mt)})}else u.each(Rt,function(q){var mt=gt.findPoint(x,q);if(mt){var et=gt.getTipItems(mt,O.title);u.each(et,function(st){var bt=A._formatMarkerOfItem(pt,gt,st);bt&&R.push(bt)}),H=H.concat(et)}})}else{var Ot=gt.get("shapeContainer"),it=Ot.get("canvas"),At=it.get("pixelRatio"),z=Ot.getShape(x.x*At,x.y*At);z&&z.get("visible")&&z.get("origin")&&(H=gt.getTipItems(z.get("origin"),O.title)),u.each(H,function(q){var mt=P._formatMarkerOfItem(pt,gt,q);mt&&R.push(mt)})}}}),u.each(H,function(gt){var ft=gt.point,Rt=u.isArray(ft.x)?ft.x[ft.x.length-1]:ft.x,Nt=u.isArray(ft.y)?ft.y[ft.y.length-1]:ft.y;ft=pt.applyMatrix(Rt,Nt,1),gt.x=ft[0],gt.y=ft[1]})}),H.length){var N=H[0];if(!H.every(function(X){return X.title===N.title})){var K=N,V=Infinity;H.forEach(function(X){var at=n.distance([x.x,x.y],[X.x,X.y]);at<V&&(V=at,K=X)}),H=H.filter(function(X){return X.title===K.title}),R=R.filter(function(X){return X.title===K.title})}if(O.shared===!1&&H.length>1){var k=H[0],Z=Math.abs(x.y-k.y);u.each(H,function(X){Math.abs(x.y-X.y)<=Z&&(k=X,Z=Math.abs(x.y-X.y))}),k&&k.x&&k.y&&(R=[k]),H=[k]}A._setTooltip(x,H,R,S)}else A.hideTooltip()}},_.clear=function(){var x=this.tooltip;x&&x.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},_._getItemMarker=function(x,m){var S=this.options,P=S.marker||this.viewTheme.tooltip.marker;if(u.isFunction(P)){var A=x.get("shapeType")||"point",O=x.getDefaultValue("shape")||"circle",R=s.getShapeFactory(A),H={color:m.color},N=R.getMarkerCfg(O,H);return P(N,m)}return t({fill:m.color},P)},y}();E.exports=g},function(E,T,e){function t(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function u(y,_){y.prototype=Object.create(_.prototype),y.prototype.constructor=y,y.__proto__=_}var s=e(120),h=e(8),r=e(0),c=e(121),n=e(5),i=e(132),a="_origin",o=e(271);function l(y){var _=y.startAngle,M=y.endAngle;return!(!r.isNil(_)&&!r.isNil(M)&&M-_<Math.PI*2)}function f(y,_,M){var x=(y-_)/(M-_);return x>=0&&x<=1}function v(y,_){var M=!1;if(y){var x=y.type;if(x==="theta"){var m=y.start,S=y.end;M=f(_.x,m.x,S.x)&&f(_.y,m.y,S.y)}else{var P=y.invert(_);M=P.x>=0&&P.y>=0&&P.x<=1&&P.y<=1}}return M}var b={};r.each(h,function(y,_){var M=r.lowerFirst(_);b[M]=function(x){var m=new y(x);return this.addGeom(m),m}});var g=function(y){u(M,y);var _=M.prototype;_.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:n.animate,visible:!0}};function M(x){var m;m=y.call(this,x)||this;var S=t(m);return S._setTheme(),r.each(h,function(P,A){var O=r.lowerFirst(A);S[O]=function(R){R===void 0&&(R={}),R.viewTheme=S.get("viewTheme");var H=new P(R);return S.addGeom(H),H}}),S.init(),m}return _._setTheme=function(){var m=this,S=m.get("theme"),P={},A={};r.isObject(S)?A=S:r.indexOf(Object.keys(i),S)!==-1&&(A=i[S]),r.deepMix(P,n,A),m.set("viewTheme",P)},_.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},_._initOptions=function(){var m=this,S=r.mix({},m.get("options"));S.scales||(S.scales={}),S.coord||(S.coord={}),S.animate===!1&&this.set("animate",!1),(S.tooltip===!1||r.isNull(S.tooltip))&&this.set("tooltipEnable",!1),S.geoms&&S.geoms.length&&r.each(S.geoms,function(O){m._createGeom(O)});var P=m.get("scaleController");P&&(P.defs=S.scales);var A=m.get("coordController");A&&A.reset(S.coord),this.set("options",S)},_._createGeom=function(m){var S=m.type,P;this[S]&&(P=this[S](),r.each(m,function(A,O){if(P[O])if(r.isObject(A)&&A.field)if(A==="label")P[O](A.field,A.callback,A.cfg);else{var R;r.each(A,function(H,N){N!=="field"&&(R=H)}),P[O](A.field,R)}else P[O](A)}))},_._initControllers=function(){var m=this,S=m.get("options"),P=m.get("viewTheme"),A=m.get("canvas"),O=new c.Scale({viewTheme:P,defs:S.scales}),R=new c.Coord(S.coord);this.set("scaleController",O),this.set("coordController",R);var H=new c.Axis({canvas:A,viewTheme:P});this.set("axisController",H);var N=new c.Guide({viewTheme:P,options:S.guides||[]});this.set("guideController",N)},_._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},_._initGeoms=function(){for(var m=this.get("geoms"),S=this.get("filteredData"),P=this.get("coord"),A=this.get("_id"),O=0;O<m.length;O++){var R=m[O];R.set("data",S),R.set("coord",P),R.set("_id",A+"-geom"+O),R.set("keyFields",this.get("keyFields")),R.init()}},_._clearGeoms=function(){for(var m=this,S=m.get("geoms"),P=0;P<S.length;P++){var A=S[P];A.clear()}},_._removeGeoms=function(){for(var m=this,S=m.get("geoms");S.length>0;){var P=S.shift();P.destroy()}},_._drawGeoms=function(){this.emit("beforedrawgeoms");for(var m=this.get("geoms"),S=this.get("coord"),P=0;P<m.length;P++){var A=m[P];A.setCoord(S),A.paint()}this.emit("afterdrawgeoms")},_.isShapeInView=function(m){var S=this.get("_id"),P=m._id;if(P)return P.split("-")[0]===S;for(var A=m;A;){if(A.get("viewId")===S)return!0;A=A.get("parent")}return!1},_.getViewRegion=function(){var m=this,S=m.get("parent"),P,A;if(S){var O=S.getViewRegion(),R=m._getViewRegion(O.start,O.end);P=R.start,A=R.end}else P=m.get("start"),A=m.get("end");return{start:P,end:A}},_._getViewRegion=function(m,S){var P=this.get("start"),A=this.get("end"),O=P.x,R=1-A.y,H=A.x,N=1-P.y,K=this.get("padding"),V=r.toAllPadding(K),k=V[0],Z=V[1],X=V[2],at=V[3],pt={x:O*(S.x-m.x)+m.x+at,y:R*(S.y-m.y)+m.y-X},gt={x:H*(S.x-m.x)+m.x-Z,y:N*(S.y-m.y)+m.y+k};return{start:pt,end:gt}},_._createCoord=function(){var m=this.get("coordController"),S=this.getViewRegion(),P=m.createCoord(S.start,S.end);this.set("coord",P)},_._renderAxes=function(){var m=this.get("options"),S=m.axes;if(S!==!1){var P=this.get("axisController");P.container=this.get("backPlot"),P.coord=this.get("coord"),P.options=S||{};var A=this.getXScale(),O=this.getYScales(),R=this.get("_id");P.createAxis(A,O,R)}},_._renderGuides=function(){var m=this.get("guideController");if(!r.isEmpty(m.options)){var S=this.get("coord");m.view=this,m.backContainer=this.get("backPlot"),m.frontContainer=this.get("frontPlot"),m.xScales=this._getScales("x"),m.yScales=this._getScales("y"),m.render(S)}},_._bindEvents=function(){var m=new c.Event({view:this,canvas:this.get("canvas")});m.bindEvents(),this.set("eventController",m)},_._clearEvents=function(){var m=this.get("eventController");m&&m.clearEvents()},_._getScales=function(m){for(var S=this.get("geoms"),P={},A=0;A<S.length;A++){var O=S[A],R=m==="x"?O.getXScale():O.getYScale();R&&!P[R.field]&&(P[R.field]=R)}return P},_._adjustScale=function(){this._setCatScalesRange();for(var m=this.get("geoms"),S=this.get("scaleController"),P=S.defs,A=0;A<m.length;A++){var O=m[A];if(O.get("type")==="interval"){var R=O.getYScale(),H=R.field,N=R.min,K=R.max,V=R.type;!(P[H]&&P[H].min)&&V!=="time"&&(N>0?R.change({min:0}):K<=0&&R.change({max:0}))}}},_._setCatScalesRange=function(){var m=this,S=m.get("coord"),P=m.get("viewTheme"),A=m.getXScale(),O=m.getYScales(),R=[];A&&R.push(A),R=R.concat(O);var H=S.isPolar&&l(S),N=m.get("scaleController"),K=N.defs;r.each(R,function(V){if((V.isCategory||V.isIdentity)&&V.values&&!(K[V.field]&&K[V.field].range)){var k=V.values.length,Z;if(k===1)Z=[.5,1];else{var X=1,at=0;H?S.isTransposed?(X=P.widthRatio.multiplePie,at=1/k*X,Z=[at/2,1-at/2]):Z=[0,1-1/k]:(at=1/k*1/2,Z=[at,1-at])}V.range=Z}})},_.getXScale=function(){var m=this.get("geoms"),S=null;return r.isEmpty(m)||(S=m[0].getXScale()),S},_.getYScales=function(){for(var m=this.get("geoms"),S=[],P=0;P<m.length;P++){var A=m[P],O=A.getYScale();O&&r.indexOf(S,O)===-1&&S.push(O)}return S},_.getXY=function(m){var S=this,P=S.get("coord"),A=S._getScales("x"),O=S._getScales("y"),R,H;for(var N in m)A[N]&&(R=A[N].scale(m[N])),O[N]&&(H=O[N].scale(m[N]));return!r.isNil(R)&&!r.isNil(H)?P.convert({x:R,y:H}):null},_.getSnapRecords=function(m){var S=this,P=S.get("geoms"),A=[];return r.each(P,function(O){var R=O.get("dataArray"),H;r.each(R,function(N){H=O.findPoint(m,N),H&&A.push(H)})}),A},_.addGeom=function(m){var S=this,P=S.get("geoms");P.push(m),m.set("view",S);var A=S.get("viewContainer");m.set("container",A),m.set("animate",S.get("animate")),m.bindEvents()},_.removeGeom=function(m){var S=this.get("geoms");r.Array.remove(S,m),m.destroy()},_.createScale=function(m,S){var P=this.get("scales"),A=this.get("parent"),O=P[m];if(!S){var R=this.get("filteredData"),H=this._getFieldsForLegend();R.length&&!H.includes(m)?S=R:S=this.get("data")}var N=this.get("scaleController");if(O){if(O.sync){var V=N.createScale(m,S);this._syncScale(O,V)}}else{if(O=N.createScale(m,S),O.sync&&A){var K=A.createScale(m,S);O=this._getSyncScale(K,O)}P[m]=O}return O},_._getFieldsForLegend=function(){var m=[],S=this.get("geoms");return r.each(S,function(P){var A=P.getFieldsForLegend();m=m.concat(A)}),r.uniq(m)},_._getSyncScale=function(m,S){return m.type!==S.type?S:(this._syncScale(m,S),m)},_._syncScale=function(m,S){var P=r.union(m.values,S.values);if(S.isLinear){var A=Math.max(m.max,S.max),O=Math.min(m.min,S.min);(m.max!==A||m.min!==O)&&m.change({min:O,max:A,values:P})}P.length!==m.values.length&&m.change({values:P})},_.getFilteredValues=function(m){var S=this.get("scales")[m],P=S.values,A=this._getFilters(),O;return A&&A[m]?O=P.filter(A[m]):O=P.slice(0),O},_.getFilteredOutValues=function(m){var S=this.get("scales")[m],P=S.values,A=this._getFilters(),O;return A&&A[m]?O=P.filter(function(){return!A[m].apply(A,arguments)}):O=[],O},_.filter=function(m,S){var P=this.get("options");P.filters||(P.filters={}),P.filters[m]=S,this.get("scaleController").filters=P.filters},_._getFilters=function(){var m=this.get("options");return m.filters},_.execFilter=function(m){var S=this,P=S._getFilters();return P&&(m=m.filter(function(A){var O=!0;return r.each(P,function(R,H){if(R&&(O=R(A[H],A),!O))return!1}),O})),m},_.axis=function(m,S){var P=this.get("options");if(m===!1)P.axes=!1;else{P.axes||(P.axes={});var A=P.axes;A[m]=S}return this},_.guide=function(){return this.get("guideController")},_._getKeyFields=function(m){var S=[];r.each(m,function(P,A){P.key&&S.push(A)}),this.set("keyFields",S)},_.scale=function(m,S){var P=this.get("options"),A=P.scales;return r.isObject(m)?r.mix(A,m):A[m]=S,this._getKeyFields(A),this},_.tooltip=function(m){return this.set("tooltipEnable",m),this},_.animate=function(m){var S=this.get("options");return S.animate=m,this.set("animate",m),this},_.changeOptions=function(m){return this.set("options",m),this._initOptions(m),this},_.getViewsByPoint=function(m){var S=[],P=this.get("views");return v(this.get("coord"),m)&&S.push(this),r.each(P,function(A){A.get("visible")&&v(A.get("coord"),m)&&S.push(A)}),S},_.eachShape=function(m){var S=this,P=S.get("views"),A=S.get("canvas");r.each(P,function(R){R.eachShape(m)});var O=this.get("geoms");return r.each(O,function(R){var H=R.getShapes();r.each(H,function(N){var K=N.get("origin");if(r.isArray(K)){var V=K.map(function(Z){return Z[a]});m(V,N,R,S)}else{var k=K[a];m(k,N,R,S)}})}),A.draw(),this},_.filterShape=function(m){var S=function(A,O,R,H){m(A,O,R,H)?O.show():O.hide()};return this.eachShape(S),this},_.clearInner=function(){this.set("scales",{}),this.emit("beforeclearinner");var m=this.get("options");m.geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear(),this.emit("afterclearinner")},_.clear=function(){var m=this.get("options");return m.filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},_.coord=function(m,S){var P=this.get("coordController");return P.reset({type:m,cfg:S}),P},_.resetCoord=function(){this._createCoord()},_.source=function(m,S){return this._initData(m),S&&this.scale(S),this.emit("setdata"),this},_.changeData=function(m){return this.emit("beforechangedata"),this._initData(m),this.emit("afterchangedata"),this.repaint(),this},_._initData=function(m){var S=this.get("dataView");S&&(S.off("change",r.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),m&&m.isDataView&&(m.on("change",r.wrapBehavior(this,"_onViewChange")),this.set("dataView",m),m=m.rows),this.set("data",m)},_._onViewChange=function(){this.emit("beforechangedata");var m=this.get("dataView"),S=m.rows;this.set("data",S),this.emit("afterchangedata"),this.repaint()},_.beforeRender=function(){var m=this.get("views");r.each(m,function(S){S.beforeRender()}),this.initView()},_.drawComponents=function(){var m=this.get("views");r.each(m,function(S){S.drawComponents()}),this._renderAxes(),this._renderGuides()},_.drawCanvas=function(m){if(!m){var S=this.get("views"),P=this.get("backPlot");P.sort();var A=this.get("canvas"),O=this.get("animate");if(O){var R=this.get("isUpdate");r.each(S,function(H){o.execAnimation(H,R)}),o.execAnimation(this,R)}else A.draw()}},_.render=function(m){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(m),this.emit("afterrender"),this.set("rendered",!0),this},_.initView=function(){var m=this.get("data")||[],S=this.execFilter(m);this.set("filteredData",S),this._createCoord(),this.emit("beforeinitgeoms"),this._initGeoms(),this._adjustScale()},_.paint=function(){var m=this.get("views");r.each(m,function(P){P.paint()});var S=this.get("data");r.isEmpty(S)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},_.changeVisible=function(m,S){var P=this.get("geoms");if(r.each(P,function(O){O.changeVisible(m,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(m),this.get("guideController")&&this.get("guideController").changeVisible(m),!S){var A=this.get("canvas");A.draw()}},_.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},_.destroy=function(){this._clearEvents();var m=this.get("dataView");m&&m.off("change",r.getWrapBehavior(this,"_onViewChange")),this.clear(),y.prototype.destroy.call(this)},M}(s);E.exports=g},function(E,T,e){var t=e(30),u=t.Guide,s=e(281);u.RegionFilter=s,E.exports=u},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(0),s=e(20),h=e(31),r=h.Path,c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return u.mix({},l,{name:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},a.render=function(l,f,v,b){var g=this,y=f.addGroup();y.name="guide-region-filter",b.once("afterpaint",function(){if(!y.get("destroyed")){g._drawShapes(b,y);var _=g._drawClip(l);y.attr({clip:_}),g.set("clip",_),g.get("appendInfo")&&y.setSilent("appendInfo",g.get("appendInfo")),g.set("el",y)}})},a._drawShapes=function(l,f){var v=this,b=[],g=l.getAllGeoms();return g.map(function(y){var _=y.getShapes(),M=y.get("type"),x=v._geomFilter(M);return x&&_.map(function(m){var S=m.type,P=u.cloneDeep(m.attr());v._adjustDisplay(P);var A=f.addShape(S,{attrs:P});return b.push(A),m}),y}),b},a._drawClip=function(l){var f=this,v=f.parsePoint(l,f.get("start")),b=f.parsePoint(l,f.get("end")),g=[["M",v.x,v.y],["L",b.x,v.y],["L",b.x,b.y],["L",v.x,b.y],["z"]],y=new r({attrs:{path:g,opacity:1}});return y},a._adjustDisplay=function(l){var f=this,v=f.get("color");l.fill&&(l.fill=l.fillStyle=v),l.stroke=l.strokeStyle=v},a._geomFilter=function(l){var f=this,v=f.get("apply");return v?u.contains(v,l):!0},a.clear=function(){n.prototype.clear.call(this);var l=this.get("clip");l&&l.remove()},i}(s);E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(0),s=e(30),h=e(5),r=s.Legend,c=r.Category,n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return u.mix({},f,{type:"tail-legend",layout:"vertical",autoLayout:!0})},o._addItem=function(f){var v=this.get("itemsGroup"),b=this._getNextX(),g=0,y=this.get("unCheckColor"),_=v.addGroup({x:0,y:0,value:f.value,scaleValue:f.scaleValue,checked:f.checked});_.translate(b,g),_.set("viewId",v.get("viewId"));var M=this.get("textStyle"),x=this.get("_wordSpaceing"),m=0;if(f.marker){var S=u.mix({},f.marker,{x:f.marker.radius,y:0});f.checked||(S.fill&&(S.fill=y),S.stroke&&(S.stroke=y));var P=_.addShape("marker",{type:"marker",attrs:S});P.attr("cursor","pointer"),P.name="legend-marker",m+=P.getBBox().width+x}var A=u.mix({},M,{x:m,y:0,text:this._formatItemValue(f.value)});f.checked||u.mix(A,{fill:y});var O=_.addShape("text",{attrs:A});O.attr("cursor","pointer"),O.name="legend-text",this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo"));var R=_.getBBox(),H=this.get("itemWidth"),N=_.addShape("rect",{attrs:{x:b,y:g-R.height/2,fill:"#fff",fillOpacity:0,width:H||R.width,height:R.height}});return N.attr("cursor","pointer"),N.setSilent("origin",f),N.name="legend-item",this.get("appendInfo")&&N.setSilent("appendInfo",this.get("appendInfo")),_.name="legendGroup",_},o._adjust=function(){var f=this,v=f.get("geom");if(v){var b=f.get("group").attr("matrix");b[7]=0;var g=f.get("geom").get("dataArray"),y=this.get("itemsGroup").get("children"),_=0;u.each(y,function(M){var x=g[_],m=x[x.length-1].y;u.isArray(m)&&(m=m[1]);var S=M.getBBox().height,P=M.get("x"),A=m-S/2;M.translate(P,A),_++}),f.get("autoLayout")&&f._antiCollision(y)}},o.render=function(){var f=this;i.prototype.render.call(this);var v=this.get("chart");v.once("afterpaint",function(){f._adjust()})},o._getPreviousY=function(f){var v=f.attr("matrix")[7],b=f.getBBox().height;return v+b},o._adjustDenote=function(f,v,b){var g=h.legend.legendMargin,y=-2,_=-g*2;f.addShape("path",{attrs:{path:"M"+y+","+v+"L"+_+","+(b+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},o._antiCollision=function(f){if(f===void 0&&(f=[]),!!f.length){var v=this;f.sort(function(V,k){var Z=V.attr("matrix")[7],X=k.attr("matrix")[7];return Z-X});var b=!0,g=v.get("chart").get("plotRange"),y=g.tl.y,_=Math.abs(y-g.bl.y),M=f[0].getBBox().height,x=Number.MIN_VALUE,m=0,S=f.map(function(V){var k=V.attr("matrix")[7];return k>m&&(m=k),k<x&&(x=k),{size:V.getBBox().height,targets:[k-y]}});x-=y;for(var P=0;b;){for(var A=0;A<S.length;A++){var O=S[A],R=(Math.min.apply(x,O.targets)+Math.max.apply(x,O.targets))/2;O.pos=Math.min(Math.max(x,R-O.size/2),_-O.size)}for(b=!1,P=S.length;P--;)if(P>0){var H=S[P-1],N=S[P];H.pos+H.size>N.pos&&(H.size+=N.size,H.targets=H.targets.concat(N.targets),S.splice(P,1),b=!0)}}P=0;var K=this.get("itemsGroup").addGroup();S.forEach(function(V){var k=y+M;V.targets.forEach(function(){var Z=f[P].attr("matrix")[7],X=V.pos+k-M/2,at=Math.abs(Z-X);at>M/2&&v._adjustDenote(K,X,Z-v.get("group").attr("matrix")[7]/2),f[P].translate(0,-Z),f[P].translate(0,X),k+=M,P++})})}},a}(c);E.exports=n},function(E,T,e){var t=e(0),u=e(16),s=u.Group,h="auto",r=function c(n){c.superclass.constructor.call(this,n)};t.extend(r,s),t.augment(r,{getDefaultCfg:function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},_beforeRenderUI:function(){this._calculateRange()},_renderUI:function(){this._renderBackground(),this._renderPlotBackground()},_renderBackground:function(){var n=this,i=n.get("background");if(i){var a=this.get("canvas"),o=n.get("width")||a.get("width"),l=n.get("height")||a.get("height"),f={x:0,y:0,width:o,height:l},v=n.get("backgroundShape");v?v.attr(f):(v=this.addShape("rect",{attrs:t.mix(f,i)}),this.set("backgroundShape",v))}else return},_renderPlotBackground:function(){var n=this,i=n.get("plotBackground");if(i){var a=n.get("plotRange"),o=a.br.x-a.bl.x,l=a.br.y-a.tr.y,f=a.tl,v={x:f.x,y:f.y,width:o,height:l},b=n.get("plotBackShape");b?b.attr(v):(i.image?(v.img=i.image,b=n.addShape("image",{attrs:v})):(t.mix(v,i),b=n.addShape("rect",{attrs:v})),n.set("plotBackShape",b))}else return},_convert:function(n,i){if(t.isString(n)){if(n===h)n=0;else if(n.includes("%")){var a=this.get("canvas"),o=this.get("width")||a.get("width"),l=this.get("height")||a.get("height");n=parseInt(n,10)/100,n=i?n*o:n*l}}return n},_calculateRange:function(){var n=this,i=n.get("plotRange");t.isNil(i)&&(i={});var a=n.get("padding"),o=this.get("canvas"),l=n.get("width")||o.get("width"),f=n.get("height")||o.get("height"),v=t.toAllPadding(a),b=n._convert(v[0],!1),g=n._convert(v[1],!0),y=n._convert(v[2],!1),_=n._convert(v[3],!0),M=Math.min(_,l-g),x=Math.max(_,l-g),m=Math.min(f-y,b),S=Math.max(f-y,b);i.tl={x:M,y:m},i.tr={x,y:m},i.bl={x:M,y:S},i.br={x,y:S},i.cc={x:(x+M)/2,y:(S+m)/2},this.set("plotRange",i)},repaint:function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this}}),E.exports=r},function(E,T,e){function t(r,c){r.prototype=Object.create(c.prototype),r.prototype.constructor=r,r.__proto__=c}var u=e(46);function s(r,c,n){return{x:r.x+c*Math.cos(n),y:r.y+c*Math.sin(n)}}var h=function(r){t(c,r);function c(){return r.apply(this,arguments)||this}var n=c.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="circle",a},n.getRegion=function(a,o){var l=1/2,f=Math.PI*2/a,v=-1*Math.PI/2+f*o,b=l/(1+1/Math.sin(f/2)),g={x:.5,y:.5},y=s(g,l-b,v),_=Math.PI*5/4,M=Math.PI*1/4;return{start:s(y,b,_),end:s(y,b,M)}},n.generateFacets=function(a){var o=this,l=o.fields,f=l[0];if(!f)throw"Please specify for the field for facet!";var v=o.getFieldValues(f,a),b=v.length,g=[];return v.forEach(function(y,_){var M=[{field:f,value:y,values:v}],x=o.getFilter(M),m=a.filter(x),S={type:o.type,colValue:y,colField:f,colIndex:_,cols:b,rows:1,rowIndex:0,data:m,region:o.getRegion(b,_)};g.push(S)}),g},c}(u);E.exports=h},function(E,T,e){var t=e(0),u=e(44),s={};s.Rect=e(126),s.List=e(125),s.Circle=e(284),s.Tree=e(288),s.Mirror=e(287),s.Matrix=e(286),u.prototype.facet=function(h,r){var c=s[t.upperFirst(h)];if(!c)throw new Error("Not support such type of facets as: "+h);var n=this.get("facets");n&&n.destroy(),r.chart=this;var i=new c(r);this.set("facets",i)},E.exports=s},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(126),s=function(h){t(r,h);function r(){return h.apply(this,arguments)||this}var c=r.prototype;return c.getDefaultCfg=function(){var i=h.prototype.getDefaultCfg.call(this);return i.type="matrix",i.showTitle=!1,i},c.generateFacets=function(i){for(var a=this,o=a.fields,l=o.length,f=l,v=[],b=0;b<f;b++)for(var g=o[b],y=0;y<l;y++){var _=o[y],M={type:a.type,colValue:g,rowValue:_,colField:g,rowField:_,colIndex:b,rowIndex:y,cols:f,rows:l,data:i,region:a.getRegion(l,f,b,y)};v.push(M)}return v},c.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&(a[i].title=null,a[i].label=null)},c.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(u);E.exports=s},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(125),s=function(h){t(r,h);function r(){return h.apply(this,arguments)||this}var c=r.prototype;return c.getDefaultCfg=function(){var i=h.prototype.getDefaultCfg.call(this);return i.type="mirror",this.transpose=!1,i},c.init=function(){var i=this;i.transpose?(i.cols=2,i.rows=1):(i.cols=1,i.rows=2),h.prototype.init.call(this)},c.beforeProcessView=function(i,a){this.transpose?a.colIndex%2==0?i.coord().transpose().scale(-1,1):i.coord().transpose():a.rowIndex%2!=0&&i.coord().scale(1,-1)},c.renderTitle=function(i,a){this.transpose?this.drawColTitle(i,a):this.drawRowTitle(i,a)},c.setXAxis=function(i,a,o){(o.colIndex===1||o.rowIndex===1)&&(a[i].label=null,a[i].title=null)},c.setYAxis=function(){},r}(u);E.exports=s},function(E,T,e){function t(c,n){c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.__proto__=n}var u=e(46),s=e(0),h=s.assign,r=function(c){t(n,c);function n(){return c.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=c.prototype.getDefaultCfg.call(this);return o.type="tree",o.line={lineWidth:1,stroke:"#ddd"},o.lineSmooth=!1,o},i.generateFacets=function(o){var l=this,f=l.fields;if(!f.length)throw"Please specify for the fields for facet!";var v=[],b=l.getRootFacet(o);return v.push(b),b.children=l.getChildFacets(o,1,v),l.setRegion(v),v},i.getRootFacet=function(o){var l=this,f={type:l.type,rows:l.getRows(),rowIndex:0,colIndex:0,colValue:l.rootTitle,data:o};return f},i.getRows=function(){return this.fields.length+1},i.getChildFacets=function(o,l,f){var v=this,b=v.fields,g=b.length;if(!(g<l)){var y=[],_=b[l-1],M=v.getFieldValues(_,o);return M.forEach(function(x,m){var S=[{field:_,value:x,values:M}],P=v.getFilter(S),A=o.filter(P);if(A.length){var O={type:v.type,colValue:x,colField:_,colIndex:m,rows:v.getRows(),rowIndex:l,data:A,children:v.getChildFacets(A,l+1,f)};y.push(O),f.push(O)}}),y}},i.setRegion=function(o){var l=this;l.forceColIndex(o),o.forEach(function(f){f.region=l.getRegion(f.rows,f.cols,f.colIndex,f.rowIndex)})},i.forceColIndex=function(o){var l=this,f=[],v=0;o.forEach(function(x){l.isLeaf(x)&&(f.push(x),x.colIndex=v,v++)}),f.forEach(function(x){x.cols=f.length});for(var b=l.fields.length,g=b-1;g>=0;g--)for(var y=l.getFacetsByLevel(o,g),_=0;_<y.length;_++){var M=y[_];l.isLeaf(M)||(M.originColIndex=M.colIndex,M.colIndex=l.getRegionIndex(M.children),M.cols=f.length)}},i.getFacetsByLevel=function(o,l){var f=[];return o.forEach(function(v){v.rowIndex===l&&f.push(v)}),f},i.getRegion=function(o,l,f,v){var b=1/l,g=1/o,y={x:b*f,y:g*v},_={x:y.x+b,y:y.y+g*2/3};return{start:y,end:_}},i.getRegionIndex=function(o){var l=o[0],f=o[o.length-1];return(f.colIndex-l.colIndex)/2+l.colIndex},i.isLeaf=function(o){return!o.children||!o.children.length},i.setXAxis=function(o,l,f){f.rowIndex!==f.rows-1&&(l[o].label=null,l[o].title=null)},i.setYAxis=function(o,l,f){f.originColIndex!==0&&f.colIndex!==0&&(l[o].title=null,l[o].label=null)},i.onPaint=function(){c.prototype.onPaint.call(this),this.group.clear(),this.facets&&this.line&&this.drawLines(this.facets,this.group)},i.drawLines=function(o,l){var f=this,v=l.addGroup();o.forEach(function(b){if(!f.isLeaf(b)){var g=b.children;f._addFacetLines(b,g,v)}})},i._addFacetLines=function(o,l,f){var v=this,b=o.view,g=b.getViewRegion(),y={x:g.start.x+(g.end.x-g.start.x)/2,y:g.start.y};l.forEach(function(_){var M=_.view.getViewRegion(),x={x:M.start.x+(M.end.x-M.start.x)/2,y:M.end.y},m={x:y.x,y:y.y+(x.y-y.y)/2},S={x:x.x,y:m.y};v._drawLine([y,m,S,x],f)})},i._getPath=function(o){var l=this,f=[],v=l.lineSmooth;return v?(f.push(["M",o[0].x,o[0].y]),f.push(["C",o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y])):o.forEach(function(b,g){g===0?f.push(["M",b.x,b.y]):f.push(["L",b.x,b.y])}),f},i._drawLine=function(o,l){var f=this,v=f._getPath(o),b=f.line;l.addShape("path",{attrs:h({path:v},b)})},n}(u);E.exports=r},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),h=e(128),r=e(0);e(304);var c=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="area",f.shapeType="area",f.generatePoints=!0,f.sortable=!0,f};function o(l){var f;return f=i.call(this,l)||this,r.assign(t(f),h),f}return a.draw=function(f,v,b,g){var y=this,_=this.getDrawCfg(f[0]);y._applyViewThemeShapeStyle(_,_.shape,b);var M=this.splitData(f);_.origin=f,r.each(M,function(x,m){_.splitedIndex=m;var S=x.map(function(A){return A.points});_.points=S;var P=b.drawShape(_.shape,_,v);y.appendShapeInfo(P,g+m)})},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"stack"}],f},a}(c);c.Stack=n,s.Area=c,s.AreaStack=n,E.exports=c},function(E,T,e){function t(h,r){h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.__proto__=r}var u=e(8);e(305);var s=function(h){t(r,h);function r(){return h.apply(this,arguments)||this}var c=r.prototype;return c.getDefaultCfg=function(){var i=h.prototype.getDefaultCfg.call(this);return i.type="edge",i.shapeType="edge",i.generatePoints=!0,i},r}(u);u.Edge=s,E.exports=s},function(E,T,e){function t(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var u=e(65),s=u.ColorUtil,h=e(8),r=e(0),c="_origin",n="shadowCanvas",i="valueRange",a="imageShape",o="mappedData",l="grayScaleBlurredCanvas",f="heatmapSize",v=function(b){t(g,b);function g(){return b.apply(this,arguments)||this}var y=g.prototype;return y.getDefaultCfg=function(){var M=b.prototype.getDefaultCfg.call(this);return M.type="heatmap",M.paletteCache={},M},y._prepareRange=function(){var M=this,x=M.get(o),m=M.getAttr("color"),S=m.field,P=Infinity,A=-Infinity;x.forEach(function(R){var H=R[c][S];H>A&&(A=H),H<P&&(P=H)}),P===A&&(P=A-1);var O=[P,A];M.set(i,O)},y._prepareSize=function(){var M=this,x=M.getDefaultValue("size");r.isNumber(x)||(x=M._getDefaultSize());var m=M.get("styleOptions"),S=m&&r.isObject(m.style)?m.style.blur:null;(!r.isFinite(S)||S===null)&&(S=x/2),M.set(f,{blur:S,radius:x})},y._getDefaultSize=function(){var M=this,x=M.getAttr("position"),m=M.get("coord"),S=Math.min(m.width/(x.scales[0].ticks.length*4),m.height/(x.scales[1].ticks.length*4));return S},y._colorize=function(M){for(var x=this,m=x.getAttr("color"),S=M.data,P=x.get("paletteCache"),A=3;A<S.length;A+=4){var O=S[A];if(O){var R=void 0;P[O]?R=P[O]:(R=s.rgb2arr(m.gradient(O/256)),P[O]=R),S[A-3]=R[0],S[A-2]=R[1],S[A-1]=R[2],S[A]=O}}},y._prepareGreyScaleBlurredCircle=function(M,x){var m=this,S=m.get(l);S||(S=document.createElement("canvas"),m.set(l,S));var P=M+x,A=S.getContext("2d");S.width=S.height=P*2,A.clearRect(0,0,S.width,S.height),A.shadowOffsetX=A.shadowOffsetY=P*2,A.shadowBlur=x,A.shadowColor="black",A.beginPath(),A.arc(-P,-P,M,0,Math.PI*2,!0),A.closePath(),A.fill()},y._drawGrayScaleBlurredCircle=function(M,x,m,S,P){var A=this,O=A.get(l);P.globalAlpha=S,P.drawImage(O,M-m,x-m)},y._getShadowCanvasCtx=function(){var M=this,x=M.get(n);x||(x=document.createElement("canvas"),M.set(n,x));var m=M.get("coord");return m&&(x.width=m.width,x.height=m.height),x.getContext("2d")},y._clearShadowCanvasCtx=function(){var M=this._getShadowCanvasCtx();M.clearRect(0,0,M.canvas.width,M.canvas.height)},y._getImageShape=function(){var M=this,x=M.get(a);if(x)return x;var m=M.get("container");return x=m.addShape("Image",{}),M.set(a,x),x},y.clear=function(){this._clearShadowCanvasCtx(),b.prototype.clear.call(this)},y.drawWithRange=function(M){var x=this,m=x.get("coord"),S=m.start,P=m.end,A=m.width,O=m.height,R=x.getAttr("color").field,H=x.get(f);x._clearShadowCanvasCtx();var N=x._getShadowCanvasCtx(),K=x.get(o);M&&(K=K.filter(function(ft){return ft[c][R]<=M[1]&&ft[c][R]>=M[0]}));for(var V=x._getScale(R),k=0;k<K.length;k++){var Z=K[k],X=x.getDrawCfg(Z),at=V.scale(Z[c][R]);x._drawGrayScaleBlurredCircle(X.x-S.x,X.y-P.y,H.radius+H.blur,at,N)}var pt=N.getImageData(0,0,A,O);x._clearShadowCanvasCtx(),x._colorize(pt),N.putImageData(pt,0,0);var gt=x._getImageShape();gt.attr("x",S.x),gt.attr("y",P.y),gt.attr("width",A),gt.attr("height",O),gt.attr("img",N.canvas)},y.draw=function(M){var x=this;x.set(o,M),x._prepareRange(),x._prepareSize();var m=x.get(f);x._prepareGreyScaleBlurredCircle(m.radius,m.blur);var S=x.get(i);x.drawWithRange(S)},g}(h);h.Heatmap=v,E.exports=v},function(E,T,e){var t=e(8);t.Point=e(301),t.PointJitter=t.Point.Jitter,t.PointStack=t.Point.Stack,t.Path=e(130),t.Line=e(297),t.LineStack=t.Line.Stack,t.Interval=e(293),t.IntervalStack=t.Interval.Stack,t.IntervalDodge=t.Interval.Dodge,t.IntervalSymmetric=t.Interval.Symmetric,t.Area=e(289),t.AreaStack=t.Area.Stack,t.Polygon=e(302),t.Schema=e(303),t.SchemaDodge=t.Schema.Dodge,t.Edge=e(290),t.Heatmap=e(291),t.Venn=e(315),t.Violin=e(316),E.exports=t},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function u(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var s=e(8),h=e(0),r=e(70);e(306);var c=function(o){u(f,o);var l=f.prototype;l.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.type="interval",b.shapeType="interval",b.generatePoints=!0,b};function f(v){var b;return b=o.call(this,v)||this,h.assign(t(b),r),b}return l.createShapePointsCfg=function(b){var g=o.prototype.createShapePointsCfg.call(this,b);return g.size=this.getNormalizedSize(b),g},l.clearInner=function(){o.prototype.clearInner.call(this),this.set("defaultSize",null)},f}(s),n=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"stack"}],b},l}(c),i=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"dodge"}],b},l}(c),a=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"symmetric"}],b},l}(c);c.Stack=n,c.Dodge=i,c.Symmetric=a,s.Interval=c,s.IntervalStack=n,s.IntervalDodge=i,s.IntervalSymmetric=a,E.exports=c},function(E,T,e){var t=e(69),u=e(127),s=e(296),h=e(295),r={getLabelsClass:function(n,i){var a=t;return n==="polar"?a=u:n==="theta"?a=s:(i==="interval"||i==="polygon")&&(a=h),a}};E.exports=r},function(E,T,e){var t=e(0),u=e(69),s=function h(r){h.superclass.constructor.call(this,r)};t.extend(s,u),t.augment(s,{setLabelPosition:function(r,c,n,i){t.isFunction(i)&&(i=i(r.text,c._origin,n));var a=this.get("coord"),o=a.isTransposed,l=a.convertPoint(c.points[0]),f=a.convertPoint(c.points[2]),v=(l.x-f.x)/2*(o?-1:1),b=(l.y-f.y)/2*(o?-1:1);switch(i){case"right":o?(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"center"):(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"left");break;case"left":o?(r.x-=v,r.y-=b,r.textAlign=r.textAlign||"center"):(r.x+=v,r.y+=b,r.textAlign=r.textAlign||"right");break;case"bottom":o?(r.x-=v*2,r.textAlign=r.textAlign||"left"):(r.y+=b*2,r.textAlign=r.textAlign||"center");break;case"middle":o?r.x-=v:r.y+=b,r.textAlign=r.textAlign||"center";break;case"top":o?r.textAlign=r.textAlign||"left":r.textAlign=r.textAlign||"center";break;default:break}}}),E.exports=s},function(E,T,e){var t=e(0),u=e(127),s=e(25),h=e(5),r=5;function c(a,o,l){return{x:a.x+l*Math.cos(o),y:a.y+l*Math.sin(o)}}function n(a,o,l,f,v){var b=!0,g=l.start,y=l.end,_=Math.min(g.y,y.y),M=Math.abs(g.y-y.y),x,m=0,S=Number.MIN_VALUE,P=a.map(function(R){return R.y>m&&(m=R.y),R.y<S&&(S=R.y),{size:o,targets:[R.y-_]}});for(S-=_,m-_>M&&(M=m-_);b;)for(P.forEach(function(R){var H=(Math.min.apply(S,R.targets)+Math.max.apply(S,R.targets))/2;R.pos=Math.min(Math.max(S,H-R.size/2),M-R.size)}),b=!1,x=P.length;x--;)if(x>0){var A=P[x-1],O=P[x];A.pos+A.size>O.pos&&(A.size+=O.size,A.targets=A.targets.concat(O.targets),A.pos+A.size>M&&(A.pos=M-A.size),P.splice(x,1),b=!0)}x=0,P.forEach(function(R){var H=_+o/2;R.targets.forEach(function(){a[x].y=R.pos+H,H+=o,x++})}),a.forEach(function(R){var H=R.r*R.r,N=Math.pow(Math.abs(R.y-f.y),2);if(H<N)R.x=f.x;else{var K=Math.sqrt(H-N);v?R.x=f.x+K:R.x=f.x-K}})}var i=function a(o){a.superclass.constructor.call(this,o)};t.extend(i,u),t.augment(i,{getDefaultCfg:function(){return{label:h.thetaLabels}},getDefaultOffset:function(o){return o.offset||0},adjustItems:function(o){var l=this,f=o[0]?o[0].offset:0;return f>0&&(o=l._distribute(o,f)),i.superclass.adjustItems.call(this,o)},_distribute:function(o,l){var f=this,v=f.get("coord"),b=v.getRadius(),g=f.get("label").labelHeight,y=v.getCenter(),_=b+l,M=_*2+g*2,x={start:v.start,end:v.end},m=f.get("geom");if(m){var S=m.get("view");x=S.getViewRegion()}var P=[[],[]];return o.forEach(function(A){!A||(A.textAlign==="right"?P[0].push(A):P[1].push(A))}),P.forEach(function(A,O){var R=parseInt(M/g,10);A.length>R&&(A.sort(function(H,N){return N["..percent"]-H["..percent"]}),A.splice(R,A.length-R)),A.sort(function(H,N){return H.y-N.y}),n(A,g,x,y,O)}),P[0].concat(P[1])},lineToLabel:function(o){var l=this,f=l.get("coord"),v=f.getRadius(),b=o.offset,g=o.orignAngle||o.angle,y=f.getCenter(),_=c(y,g,v+r/2),M=c(y,g,v+b/2);o.labelLine||(o.labelLine=l.get("label").labelLine||{}),o.labelLine.path=["M"+_.x,_.y+" Q"+M.x,M.y+" "+o.x,o.y].join(",")},getLabelRotate:function(o,l){var f;return l<0&&(f=o*180/Math.PI,f>90&&(f=f-180),f<-90&&(f=f+180)),f/180*Math.PI},getLabelAlign:function(o){var l=this,f=l.get("coord"),v=f.getCenter(),b;o.angle<=Math.PI/2&&o.x>=v.x?b="left":b="right";var g=l.getDefaultOffset(o);return g<=0&&(b==="right"?b="left":b="right"),b},getArcPoint:function(o){return o},getPointAngle:function(o){var l=this,f=l.get("coord"),v={x:t.isArray(o.x)?o.x[0]:o.x,y:o.y[0]};l.transLabelPoint(v);var b={x:t.isArray(o.x)?o.x[1]:o.x,y:o.y[1]};l.transLabelPoint(b);var g,y=s.getPointAngle(f,v);if(o.points&&o.points[0].y===o.points[1].y)g=y;else{var _=s.getPointAngle(f,b);y>=_&&(_=_+Math.PI*2),g=y+(_-y)/2}return g},getCirclePoint:function(o,l){var f=this,v=f.get("coord"),b=v.getCenter(),g=v.getRadius()+l,y=c(b,o,g);return y.angle=o,y.r=g,y}}),E.exports=i},function(E,T,e){function t(c,n){c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.__proto__=n}var u=e(8),s=e(130);e(307);var h=function(c){t(n,c);function n(){return c.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=c.prototype.getDefaultCfg.call(this);return o.type="line",o.sortable=!0,o},n}(s),r=function(c){t(n,c);function n(){return c.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=c.prototype.getDefaultCfg.call(this);return o.hasDefaultAdjust=!0,o.adjusts=[{type:"stack"}],o},n}(h);h.Stack=r,u.Line=h,u.LineStack=r,E.exports=h},function(E,T,e){var t=e(0),u="_origin",s=e(129),h="_originActiveAttrs";function r(a,o){if(t.isNil(a)||t.isNil(o))return!1;var l=a.get("origin"),f=o.get("origin");return t.isEqual(l,f)}function c(a,o){if(!a||a.length!==o.length)return!0;var l=!1;return t.each(o,function(f,v){if(!r(f,a[v]))return l=!0,!1}),l}function n(a,o){var l={};return t.each(a,function(f,v){var b=o.attr(v);t.isArray(b)&&(b=t.cloneDeep(b)),l[v]=b}),l}var i={_isAllowActive:function(){var o=this.get("allowActive");if(t.isNil(o)){var l=this.get("view"),f=this.isShareTooltip(),v=l.get("options");if(v.tooltip===!1||!f)return!0}else return o;return!1},_onMouseenter:function(o){var l=this,f=o.shape,v=l.get("shapeContainer");f&&v.contain(f)&&l._isAllowActive()&&l.setShapesActived(f)},_onMouseleave:function(){var o=this,l=o.get("view"),f=l.get("canvas");o.get("activeShapes")&&(o.clearActivedShapes(),f.draw())},_bindActiveAction:function(){var o=this,l=o.get("view"),f=o.get("type");l.on(f+":mouseenter",t.wrapBehavior(o,"_onMouseenter")),l.on(f+":mouseleave",t.wrapBehavior(o,"_onMouseleave"))},_offActiveAction:function(){var o=this,l=o.get("view"),f=o.get("type");l.off(f+":mouseenter",t.getWrapBehavior(o,"_onMouseenter")),l.off(f+":mouseleave",t.getWrapBehavior(o,"_onMouseleave"))},_setActiveShape:function(o){var l=this,f=l.get("activedOptions")||{},v=o.get("origin"),b=v.shape||l.getDefaultValue("shape");t.isArray(b)&&(b=b[0]);var g=l.get("shapeFactory"),y=t.mix({},o.attr(),{origin:v}),_=g.getActiveCfg(b,y);f.style&&t.mix(_,f.style);var M=n(_,o);o.setSilent(h,M),f.animate?o.animate(_,300):o.attr(_),s.toFront(o)},setShapesActived:function(o){var l=this;t.isArray(o)||(o=[o]);var f=l.get("activeShapes");if(!!c(f,o)){var v=l.get("view"),b=v.get("canvas"),g=l.get("activedOptions");g&&g.highlight?(t.each(o,function(y){y.get("animating")&&y.stopAnimate()}),l.highlightShapes(o)):(f&&l.clearActivedShapes(),t.each(o,function(y){y.get("animating")&&y.stopAnimate(),y.get("visible")&&l._setActiveShape(y)})),l.set("activeShapes",o),b.draw()}},clearActivedShapes:function(){var o=this,l=o.get("shapeContainer"),f=o.get("activedOptions"),v=f&&f.animate;if(l&&!l.get("destroyed")){var b=o.get("activeShapes");t.each(b,function(_){var M=_.get(h);v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(h,null)});var g=o.get("preHighlightShapes");if(g){var y=l.get("children");t.each(y,function(_){var M=_.get(h);M&&(v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(h,null))})}o.set("activeShapes",null),o.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(o){var l=this,f=l.get("shapeContainer"),v=[];if(f){var b=l.getXScale().field,g=l.getShapes(),y=l._getOriginByPoint(o);t.each(g,function(_){var M=_.get("origin");if(_.get("visible")&&M){var x=M[u][b];x===y[b]&&v.push(_)}})}return v},getSingleShapeByPoint:function(o){var l=this,f=l.get("shapeContainer"),v=f.get("canvas"),b=v.get("pixelRatio"),g;if(f&&(g=f.getShape(o.x*b,o.y*b)),g&&g.get("origin"))return g},highlightShapes:function(o,l){var f=this;t.isArray(o)||(o=[o]);var v=f.get("activeShapes");if(!!c(v,o)){v&&f.clearActivedShapes();var b=f.getShapes(),g=f.get("activedOptions"),y=g&&g.animate,_=g&&g.style;t.each(b,function(M){var x={};M.stopAnimate(),t.indexOf(o,M)!==-1?(t.mix(x,_,l),s.toFront(M)):(t.mix(x,{fillOpacity:.3,opacity:.3}),s.resetZIndex(M));var m=n(x,M);M.setSilent(h,m),y?M.animate(x,300):M.attr(x)}),f.set("preHighlightShapes",o),f.set("activeShapes",o)}}};E.exports=i},function(E,T,e){var t=e(0),u="_origin",s=e(129);function h(n,i){if(t.isNil(n)||t.isNil(i))return!1;var a=n.get("origin"),o=i.get("origin");return t.isEqual(a,o)}function r(n,i){var a={};return t.each(n,function(o,l){l==="transform"&&(l="matrix");var f=i.attr(l);t.isArray(f)&&(f=t.cloneDeep(f)),a[l]=f}),a}var c={_isAllowSelect:function(){var i=this.get("allowSelect");if(t.isNil(i)){var a=this.get("type"),o=this.get("coord"),l=o&&o.type;if(a==="interval"&&l==="theta")return!0}else return i;return!1},_onClick:function(i){var a=this;if(a._isAllowSelect()){var o=i.shape,l=a.get("shapeContainer");o&&l.contain(o)&&a.setShapeSelected(o)}},_bindSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.on(o+":click",t.wrapBehavior(i,"_onClick"))},_offSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.off(o+":click",t.getWrapBehavior(i,"_onClick"))},_setShapeStatus:function(i,a){var o=this,l=o.get("view"),f=o.get("selectedOptions")||{},v=f.animate!==!1,b=l.get("canvas");i.set("selected",a);var g=i.get("origin");if(a){var y=g.shape||o.getDefaultValue("shape");t.isArray(y)&&(y=y[0]);var _=o.get("shapeFactory"),M=t.mix({geom:o,point:g},f),x=_.getSelectedCfg(y,M);t.mix(x,M.style),i.get("_originAttrs")||(i.get("animating")&&i.stopAnimate(),i.set("_originAttrs",r(x,i))),f.toFront&&s.toFront(i),v?i.animate(x,300):(i.attr(x),b.draw())}else{var m=i.get("_originAttrs");f.toFront&&s.resetZIndex(i),i.set("_originAttrs",null),v?i.animate(m,300):(i.attr(m),b.draw())}},setShapeSelected:function(i){var a=this,o=a._getSelectedShapes(),l=a.get("selectedOptions")||{},f=l.cancelable!==!1;if(l.mode==="multiple")t.indexOf(o,i)===-1?(o.push(i),a._setShapeStatus(i,!0)):f&&(t.Array.remove(o,i),a._setShapeStatus(i,!1));else{var v=o[0];f&&(i=h(v,i)?null:i),h(v,i)||(v&&a._setShapeStatus(v,!1),i&&a._setShapeStatus(i,!0))}},clearSelected:function(){var i=this,a=i.get("shapeContainer");if(a&&!a.get("destroyed")){var o=i._getSelectedShapes();t.each(o,function(l){i._setShapeStatus(l,!1),l.set("_originAttrs",null)})}},setSelected:function(i){var a=this,o=a.getShapes();return t.each(o,function(l){var f=l.get("origin");f&&f[u]===i&&a.setShapeSelected(l)}),this},_getSelectedShapes:function(){var i=this,a=i.getShapes(),o=[];return t.each(a,function(l){l.get("selected")&&o.push(l)}),i.set("selectedShapes",o),o}};E.exports=c},function(E,T,e){var t=e(0),u=e(5),s=u.defaultColor,h="_origin";function r(n){return n.alias||n.field}var c={_getIntervalSize:function(i){var a=null,o=this.get("type"),l=this.get("coord");if(l.isRect&&(o==="interval"||o==="schema")){a=this.getSize(i[h]);var f=l.isTransposed?"y":"x";if(t.isArray(i[f])){var v=Math.abs(i[f][1]-i[f][0]);a=a<v?null:a}}return a},_snapEqual:function(i,a,o){var l;return i=o.translate(i),a=o.translate(a),o.isCategory?l=i===a:l=t.snapEqual(i,a),l},_getScaleValueByPoint:function(i){var a=0,o=this.get("coord"),l=this.getXScale(),f=o.invert(i),v=f.x;return this.isInCircle()&&v>(1+l.rangeMax())/2&&(v=l.rangeMin()),a=l.invert(v),l.isCategory&&(a=l.translate(a)),a},_getOriginByPoint:function(i){var a=this.getXScale(),o=this.getYScale(),l=a.field,f=o.field,v=this.get("coord"),b=v.invert(i),g=a.invert(b.x),y=o.invert(b.y),_={};return _[l]=g,_[f]=y,_},_getScale:function(i){var a=this,o=a.get("scales"),l=null;return t.each(o,function(f){if(f.field===i)return l=f,!1}),l},_getTipValueScale:function(){var i=this.getAttrsForLegend(),a;t.each(i,function(f){var v=f.getScale(f.type);if(v.isLinear)return a=v,!1});var o=this.getXScale(),l=this.getYScale();return!a&&l&&l.field==="..y"?o:a||l||o},_getTipTitleScale:function(i){var a=this;if(i)return a._getScale(i);var o=a.getAttr("position"),l=o.getFields(),f;return t.each(l,function(v){if(!v.includes(".."))return f=v,!1}),a._getScale(f)},_filterValue:function(i,a){var o=this.get("coord"),l=this.getYScale(),f=l.field,v=o.invert(a),b=v.y;b=l.invert(b);var g=i[i.length-1];return t.each(i,function(y){var _=y[h];if(_[f][0]<=b&&_[f][1]>=b)return g=y,!1}),g},getXDistance:function(){var i=this,a=i.get("xDistance");if(!a){var o=i.getXScale();if(o.isCategory)a=1;else{var l=o.values,f=o.translate(l[0]),v=f;t.each(l,function(g){g=o.translate(g),g<f&&(f=g),g>v&&(v=g)});var b=l.length;a=(v-f)/(b-1)}i.set("xDistance",a)}return a},findPoint:function(i,a){var o=this,l=o.get("type"),f=o.getXScale(),v=o.getYScale(),b=f.field,g=v.field,y=null;if(t.indexOf(["heatmap","point"],l)>-1){var _=o.get("coord"),M=_.invert(i),x=f.invert(M.x),m=v.invert(M.y),S=Infinity;return t.each(a,function(gt){var ft=Math.pow(gt[h][b]-x,2)+Math.pow(gt[h][g]-m,2);ft<S&&(S=ft,y=gt)}),y}var P=a[0],A=a[a.length-1];if(!P)return y;var O=o._getScaleValueByPoint(i),R=P[h][b],H=P[h][g],N=A[h][b],K=v.isLinear&&t.isArray(H);if(t.isArray(R))t.each(a,function(gt){var ft=gt[h];if(f.translate(ft[b][0])<=O&&f.translate(ft[b][1])>=O)if(K)t.isArray(y)||(y=[]),y.push(gt);else return y=gt,!1}),t.isArray(y)&&(y=this._filterValue(y,i));else{var V;if(!f.isLinear&&f.type!=="timeCat")t.each(a,function(gt,ft){var Rt=gt[h];if(o._snapEqual(Rt[b],O,f))if(K)t.isArray(y)||(y=[]),y.push(gt);else return y=gt,!1;else f.translate(Rt[b])<=O&&(A=gt,V=a[ft+1])}),t.isArray(y)&&(y=this._filterValue(y,i));else{if((O>f.translate(N)||O<f.translate(R))&&(O>f.max||O<f.min))return null;for(var k=0,Z=a.length-1,X;k<=Z;){X=Math.floor((k+Z)/2);var at=a[X][h][b];if(o._snapEqual(at,O,f))return a[X];f.translate(at)<=f.translate(O)?(k=X+1,A=a[X],V=a[X+1]):(Z===0&&(A=a[0]),Z=X-1)}}A&&V&&Math.abs(f.translate(A[h][b])-O)>Math.abs(f.translate(V[h][b])-O)&&(A=V)}var pt=o.getXDistance();return!y&&Math.abs(f.translate(A[h][b])-O)<=pt/2&&(y=A),y},getTipTitle:function(i,a){var o="",l=this._getTipTitleScale(a);if(l){var f=i[l.field];o=l.getText(f)}else if(this.get("type")==="heatmap"){var v=this.getXScale(),b=this.getYScale(),g=v.getText(i[v.field]),y=b.getText(i[b.field]);o="( "+g+", "+y+" )"}return o},getTipValue:function(i,a){var o,l=a.field,f=i.key;if(o=i[l],t.isArray(o)){var v=[];t.each(o,function(b){v.push(a.getText(b))}),o=v.join("-")}else o=a.getText(o,f);return o},getTipName:function(i){var a,o,l=this._getGroupScales();if(l.length&&t.each(l,function(b){return o=b,!1}),o){var f=o.field;a=o.getText(i[f])}else{var v=this._getTipValueScale();a=r(v)}return a},getTipItems:function(i,a){var o=this,l=i[h],f=o.getTipTitle(l,a),v=o.get("tooltipCfg"),b=[],g,y;function _(A,O,R){if(!t.isNil(O)&&O!==""){var H={title:f,point:i,name:A||f,value:O,color:i.color||s,marker:!0};H.size=o._getIntervalSize(i),b.push(t.mix({},H,R))}}if(v){var M=v.fields,x=v.cfg,m=[];if(t.each(M,function(A){m.push(l[A])}),x){t.isFunction(x)&&(x=x.apply(null,m));var S=t.mix({},{point:i,title:f,color:i.color||s,marker:!0},x);S.size=o._getIntervalSize(i),b.push(S)}else t.each(M,function(A){if(!t.isNil(l[A])){var O=o._getScale(A);g=r(O),y=O.getText(l[A]),_(g,y)}})}else{var P=o._getTipValueScale();t.isNil(l[P.field])||(y=o.getTipValue(l,P),g=o.getTipName(l),_(g,y))}return b},isShareTooltip:function(){var i=this.get("shareTooltip"),a=this.get("type"),o=this.get("view"),l;if(o.get("parent")?l=o.get("parent").get("options"):l=o.get("options"),a==="interval"){var f=this.get("coord"),v=f.type;(v==="theta"||v==="polar"&&f.isTransposed)&&(i=!1)}else(!this.getYScale()||t.inArray(["contour","point","polygon","edge"],a))&&(i=!1);return l.tooltip&&t.isBoolean(l.tooltip.shared)&&(i=l.tooltip.shared),i}};E.exports=c},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(8),s=e(0);e(308);var h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.type="point",l.shapeType="point",l.generatePoints=!0,l},a.drawPoint=function(l,f,v,b){var g=this,y=l.shape,_=g.getDrawCfg(l);g._applyViewThemeShapeStyle(_,y,v);var M;if(s.isArray(l.y)){var x=g.hasStack();s.each(l.y,function(m,S){_.y=m,_.yIndex=S,(!x||S!==0)&&(M=v.drawShape(y,_,f),g.appendShapeInfo(M,b+S))})}else s.isNil(l.y)||(M=v.drawShape(y,_,f),g.appendShapeInfo(M,b))},i}(u),r=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.hasDefaultAdjust=!0,l.adjusts=[{type:"jitter"}],l},i}(h),c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.hasDefaultAdjust=!0,l.adjusts=[{type:"stack"}],l},i}(h);h.Jitter=r,h.Stack=c,u.Point=h,u.PointJitter=r,u.PointStack=c,E.exports=h},function(E,T,e){function t(r,c){r.prototype=Object.create(c.prototype),r.prototype.constructor=r,r.__proto__=c}var u=e(8),s=e(0);e(309);var h=function(r){t(c,r);function c(){return r.apply(this,arguments)||this}var n=c.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="polygon",a.shapeType="polygon",a.generatePoints=!0,a},n.createShapePointsCfg=function(a){var o=r.prototype.createShapePointsCfg.call(this,a),l=this,f=o.x,v=o.y,b;if(!(s.isArray(f)&&s.isArray(v))){var g=l.getXScale(),y=l.getYScale(),_=g.values?g.values.length:g.ticks.length,M=y.values?y.values.length:y.ticks.length,x=.5*1/_,m=.5*1/M;g.isCategory&&y.isCategory?(f=[f-x,f-x,f+x,f+x],v=[v-m,v+m,v+m,v-m]):s.isArray(f)?(b=f,f=[b[0],b[0],b[1],b[1]],v=[v-m/2,v+m/2,v+m/2,v-m/2]):s.isArray(v)&&(b=v,v=[b[0],b[1],b[1],b[0]],f=[f-x/2,f-x/2,f+x/2,f+x/2]),o.x=f,o.y=v}return o},c}(u);u.Polygon=h,E.exports=h},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),h=e(0),r=e(70);e(310);var c=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="schema",f.shapeType="schema",f.generatePoints=!0,f};function o(l){var f;return f=i.call(this,l)||this,h.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=i.prototype.createShapePointsCfg.call(this,f);return v.size=this.getNormalizedSize(f),v},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(c);c.Dodge=n,s.Schema=c,s.SchemaDodge=n,E.exports=c},function(E,T,e){var t=e(0),u=e(9),s=e(25),h=e(23),r=e(5);function c(v){var b=r.shape.hollowArea,g=t.mix({},b,v.style);return h.addStrokeAttrs(g,v),t.isNumber(v.size)&&(g.lineWidth=v.size),g}function n(v){var b=r.shape.area,g=t.mix({},b,v.style);return h.addFillAttrs(g,v),v.color&&(g.stroke=g.stroke||v.color),t.isNumber(v.size)&&(g.lineWidth=v.size),g}function i(v,b,g){var y=[],_=[],M=[],x=[],m=v.isInCircle;return t.each(v.points,function(S){M.push(S[1]),x.push(S[0])}),x=x.reverse(),_.push(M,x),t.each(_,function(S,P){var A=[];S=g.parsePoints(S);var O=S[0];m&&S.push({x:O.x,y:O.y}),b?A=s.getSplinePath(S,!1,v.constraint):A=s.getLinePath(S,!1),P>0&&(A[0][0]="L"),y=y.concat(A)}),y.push(["Z"]),y}function a(v){return{symbol:function(g,y,_){return[["M",g-_,y-4],["L",g+_,y-4],["L",g+_,y+4],["L",g-_,y+4],["Z"]]},radius:5,fill:v.color,fillOpacity:.6}}function o(v,b){if(v==="line"||v==="smoothLine"){var g=b.lineWidth||0;return{lineWidth:g+1}}var y=b.fillOpacity||b.opacity||1;return{fillOpacity:y-.15,strokeOpacity:y-.15}}function l(v,b,g){var y=v._coord,_=y.convertPoint(b.points[0][1]);return g.addShape("circle",{attrs:t.mix({x:_.x,y:_.y,r:2,fill:b.color},b.style)})}var f=u.registerFactory("area",{defaultShapeType:"area",getDefaultPoints:function(b){var g=[],y=b.x,_=b.y,M=b.y0;return _=t.isArray(_)?_:[M,_],t.each(_,function(x){g.push({x:y,y:x})}),g},getActiveCfg:function(b,g){return o(b,g)},drawShape:function(b,g,y){var _=this.getShape(b),M;return g.points.length===1&&r.showSinglePoint?M=l(this,g,y):M=_.draw(g,y),M&&(M.set("origin",g.origin),M._id=g.splitedIndex?g._id+g.splitedIndex:g._id,M.name=this.name),M},getSelectedCfg:function(b,g){return g&&g.style?g.style:this.getActiveCfg(b,g)}});u.registerShape("area","area",{draw:function(b,g){var y=n(b),_=i(b,!1,this);return g.addShape("path",{attrs:t.mix(y,{path:_})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","smooth",{draw:function(b,g){var y=n(b),_=this._coord;b.constraint=[[_.start.x,_.end.y],[_.end.x,_.start.y]];var M=i(b,!0,this);return g.addShape("path",{attrs:t.mix(y,{path:M})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","line",{draw:function(b,g){var y=c(b),_=i(b,!1,this);return g.addShape("path",{attrs:t.mix(y,{path:_})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","smoothLine",{draw:function(b,g){var y=c(b),_=i(b,!0,this);return g.addShape("path",{attrs:t.mix(y,{path:_})})},getMarkerCfg:function(b){return a(b)}}),f.spline=f.smooth,E.exports=f},function(E,T,e){var t=e(0),u=e(9),s=e(23),h=e(5),r=e(25),c=1/3;function n(g){var y=h.shape.edge,_=t.mix({},y,g.style);return s.addStrokeAttrs(_,g),g.size&&(_.lineWidth=g.size),_}var i=u.registerFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(y){return s.splitPoints(y)},getActiveCfg:function(y,_){var M=_.lineWidth||0;return{lineWidth:M+1}}});function a(g,y){var _=[];_.push({x:g.x,y:g.y*(1-1/2)+y.y*1/2}),_.push({y:g.y*(1-1/2)+y.y*1/2,x:y.x}),_.push(y);var M=["C"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function o(g,y){var _=[];_.push({x:y.x,y:y.y}),_.push(g);var M=["Q"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function l(g,y){var _=a(g,y),M=[["M",g.x,g.y]];return M.push(_),M}function f(g,y,_){var M=o(y,_),x=[["M",g.x,g.y]];return x.push(M),x}function v(g,y){var _=o(g[1],y),M=o(g[3],y),x=[["M",g[0].x,g[0].y]];return x.push(M),x.push(["L",g[3].x,g[3].y]),x.push(["L",g[2].x,g[2].y]),x.push(_),x.push(["L",g[1].x,g[1].y]),x.push(["L",g[0].x,g[0].y]),x.push(["Z"]),x}function b(g,y){var _=[];_.push({y:g.y*(1-c)+y.y*c,x:g.x}),_.push({y:g.y*(1-c)+y.y*c,x:y.x}),_.push(y);var M=[["M",g.x,g.y]];return t.each(_,function(x){M.push(["L",x.x,x.y])}),M}u.registerShape("edge","line",{draw:function(y,_){var M=this.parsePoints(y.points),x=n(y),m=r.getLinePath(M),S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(y){return t.mix({symbol:"circle",radius:4.5},n(y))}}),u.registerShape("edge","vhv",{draw:function(y,_){var M=y.points,x=n(y),m=b(M[0],M[1]);m=this.parsePath(m);var S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(y){return t.mix({symbol:"circle",radius:4.5},n(y))}}),u.registerShape("edge","smooth",{draw:function(y,_){var M=y.points,x=n(y),m=l(M[0],M[1]);m=this.parsePath(m);var S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(y){return t.mix({symbol:"circle",radius:4.5},n(y))}}),u.registerShape("edge","arc",{draw:function(y,_){var M=y.points,x=M.length>2?"weight":"normal",m=n(y),S,P;if(y.isInCircle){var A={x:0,y:1};x==="normal"?P=f(M[0],M[1],A):(m.fill=m.stroke,P=v(M,A)),P=this.parsePath(P),S=_.addShape("path",{attrs:t.mix(m,{path:P})})}else if(x==="normal")M=this.parsePoints(M),S=_.addShape("arc",{attrs:t.mix(m,{x:(M[1].x+M[0].x)/2,y:M[0].y,r:Math.abs(M[1].x-M[0].x)/2,startAngle:Math.PI,endAngle:Math.PI*2})});else{P=[["M",M[0].x,M[0].y],["L",M[1].x,M[1].y]];var O=a(M[1],M[3]),R=a(M[2],M[0]);P.push(O),P.push(["L",M[3].x,M[3].y]),P.push(["L",M[2].x,M[2].y]),P.push(R),P.push(["Z"]),P=this.parsePath(P),m.fill=m.stroke,S=_.addShape("path",{attrs:t.mix(m,{path:P})})}return S},getMarkerCfg:function(y){return t.mix({symbol:"circle",radius:4.5},n(y))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(25),h=e(23),r=e(5),c=e(16),n=t.PathUtil;function i(A,O){var R=A.x,H=A.y,N=A.y0,K=A.size,V=N,k=H;t.isArray(H)&&(k=H[1],V=H[0]);var Z,X;t.isArray(R)?(Z=R[0],X=R[1]):(Z=R-K/2,X=R+K/2);var at=[];return at.push({x:Z,y:V},{x:Z,y:k}),O?at.push({x:X,y:(k+V)/2}):at.push({x:X,y:k},{x:X,y:V}),at}function a(A){for(var O=[],R=0;R<A.length;R++){var H=A[R];if(H){var N=R===0?"M":"L";O.push([N,H.x,H.y])}}var K=A[0];return O.push(["L",K.x,K.y]),O.push(["z"]),O}function o(A){var O=A.x,R=A.y,H=A.y0,N=[];return t.isArray(R)?t.each(R,function(K,V){N.push({x:t.isArray(O)?O[V]:O,y:K})}):N.push({x:O,y:R},{x:O,y:H}),N}function l(A){var O=A.x,R=t.isArray(A.y)?A.y[1]:A.y,H=t.isArray(A.y)?A.y[0]:A.y0,N=A.size,K=[];return K.push({x:O-N/2,y:R},{x:O+N/2,y:R},{x:O,y:R},{x:O,y:H},{x:O-N/2,y:H},{x:O+N/2,y:H}),K}function f(A){var O=[];return O.push(["M",A[0].x,A[0].y],["L",A[1].x,A[1].y],["M",A[2].x,A[2].y],["L",A[3].x,A[3].y],["M",A[4].x,A[4].y],["L",A[5].x,A[5].y]),O}function v(A){var O=r.shape.interval,R=t.mix({},O,A.style);return h.addFillAttrs(R,A),A.color&&(R.stroke=R.stroke||A.color),R}function b(A){var O=r.shape.hollowInterval,R=t.mix({},O,A.style);return h.addStrokeAttrs(R,A),R}function g(A,O){var R=[],H=A.points,N=A.nextPoints;return t.isNil(N)?O?R.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",H[2].x,H[2].y],["L",H[3].x,H[3].y],["Z"]):R.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",H[2].x,H[2].y],["L",H[2].x,H[2].y],["Z"]):R.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",N[1].x,N[1].y],["L",N[0].x,N[0].y],["Z"]),R}function y(A,O){var R=O.getRadius(),H=O.innerRadius,N,K,V=R*H,k,Z;return!t.isArray(A.x)&&t.isArray(A.y)&&(A.x=[A.x,A.x]),t.isArray(A.x)?(k={x:A.x[0],y:A.y[0]},Z={x:A.x[1],y:A.y[1]},N=s.getPointAngle(O,k),K=s.getPointAngle(O,Z),K<=N&&(K=K+Math.PI*2)):(Z=A,N=O.startAngle,K=s.getPointAngle(O,Z)),{r:R,ir:V,startAngle:N,endAngle:K}}function _(A,O){var R=O.geom,H=R.get("coord"),N=O.point,K=7.5,V;if(H&&H.type==="theta"){var k=y(N,H),Z=(k.endAngle-k.startAngle)/2+k.startAngle,X=K*Math.cos(Z),at=K*Math.sin(Z);V={transform:[["t",X,at]]}}return t.mix({},V)}var M=u.registerFactory("interval",{defaultShapeType:"rect",getActiveCfg:function(O,R){if(!O||t.inArray(["rect","funnel","pyramid"],O)){var H=R.fillOpacity||R.opacity||1;return{fillOpacity:H-.15}}var N=R.lineWidth||0;return{lineWidth:N+1}},getDefaultPoints:function(O){return i(O)},getSelectedCfg:function(O,R){return _(O,R)}});u.registerShape("interval","rect",{draw:function(O,R){var H=v(O),N=a(O.points);return N=this.parsePath(N),R.addShape("path",{attrs:t.mix(H,{path:N})})},getMarkerCfg:function(O){var R=v(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},R)}}),u.registerShape("interval","hollowRect",{draw:function(O,R){var H=b(O),N=a(O.points);return N=this.parsePath(N),R.addShape("path",{attrs:t.mix(H,{path:N})})},getMarkerCfg:function(O){var R=b(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},R)}}),u.registerShape("interval","line",{getPoints:function(O){return o(O)},draw:function(O,R){var H=b(O);H.lineWidth=O.size||1;var N=a(O.points);return N=this.parsePath(N),R.addShape("path",{attrs:t.mix(H,{path:N})})},getMarkerCfg:function(O){var R=b(O);return t.mix({symbol:"line",radius:5},R)}}),u.registerShape("interval","tick",{getPoints:function(O){return l(O)},draw:function(O,R){var H=b(O);H.lineWidth||(H.lineWidth=2);var N=f(O.points);return N=this.parsePath(N),R.addShape("path",{attrs:t.mix(H,{path:N})})},getMarkerCfg:function(O){var R=b(O);return t.mix({symbol:"tick",radius:5},R)}}),u.registerShape("interval","funnel",{getPoints:function(O){return O.size=O.size*2,i(O)},draw:function(O,R){var H=v(O),N=g(O,!0);return N=this.parsePath(N),R.addShape("path",{attrs:t.mix(H,{path:N})})},getMarkerCfg:function(O){var R=v(O);return t.mix({symbol:"square",radius:4},R)}}),u.registerShape("interval","pyramid",{getPoints:function(O){return O.size=O.size*2,i(O,!0)},draw:function(O,R){var H=v(O),N=g(O,!1);return N=this.parsePath(N),R.addShape("path",{attrs:t.mix(H,{path:N})})},getMarkerCfg:function(O){var R=v(O);return t.mix({symbol:"square",radius:4},R)}});function x(A,O,R,H){return O===0?[[A+1/2*R/Math.PI/2,H/2],[A+1/2*R/Math.PI,H],[A+R/4,H]]:O===1?[[A+1/2*R/Math.PI/2*(Math.PI-2),H],[A+1/2*R/Math.PI/2*(Math.PI-1),H/2],[A+R/4,0]]:O===2?[[A+1/2*R/Math.PI/2,-H/2],[A+1/2*R/Math.PI,-H],[A+R/4,-H]]:[[A+1/2*R/Math.PI/2*(Math.PI-2),-H],[A+1/2*R/Math.PI/2*(Math.PI-1),-H/2],[A+R/4,0]]}function m(A,O,R,H,N,K,V){for(var k=Math.ceil(2*A/R*4)*2,Z=[];H<-Math.PI*2;)H+=Math.PI*2;for(;H>0;)H-=Math.PI*2;H=H/Math.PI/2*R;var X=K-A+H-A*2;Z.push(["M",X,O]);for(var at=0,pt=0;pt<k;++pt){var gt=pt%4,ft=x(pt*R/4,gt,R,N);Z.push(["C",ft[0][0]+X,-ft[0][1]+O,ft[1][0]+X,-ft[1][1]+O,ft[2][0]+X,-ft[2][1]+O]),pt===k-1&&(at=ft[2][0])}return Z.push(["L",at+X,V+A]),Z.push(["L",X,V+A]),Z.push(["L",X,O]),Z}function S(A,O,R,H,N,K,V,k){for(var Z=V.getBBox(),X=Z.maxX-Z.minX,at=Z.maxY-Z.minY,pt=5e3,gt=300,ft=0;ft<H;ft++){var Rt=K.addShape("path",{attrs:{path:m(k,Z.minY+at*R,X/4,0,X/64,A,O),fill:N[ft],clip:V}});r.renderer==="canvas"&&Rt.animate({transform:[["t",X/2,0]],repeat:!0},pt-ft*gt)}}u.registerShape("interval","liquid-fill-gauge",{draw:function(O,R){var H=this,N=.5,K=0,V=Infinity;t.each(O.points,function(Rt){Rt.x<V&&(V=Rt.x),K+=Rt.x});var k=K/O.points.length,Z=H.parsePoint({x:k,y:N}),X=H.parsePoint({x:V,y:.5}),at=Z.x-X.x,pt=Math.min(at,X.y),gt=v(O),ft=new c.Circle({attrs:{x:Z.x,y:Z.y,r:pt}});return S(Z.x,Z.y,O.y/(2*Z.y),1,[gt.fill],R,ft,pt*4),R.addShape("circle",{attrs:t.mix(b(O),{x:Z.x,y:Z.y,r:pt+pt/8})})}});var P={};u.registerShape("interval","liquid-fill-path",{draw:function(O,R){var H=this,N=t.mix({},v(O)),K=O.shape[1],V=.5,k=0,Z=Infinity;t.each(O.points,function(st){st.x<Z&&(Z=st.x),k+=st.x});var X=k/O.points.length,at=H.parsePoint({x:X,y:V}),pt=H.parsePoint({x:Z,y:.5}),gt=at.x-pt.x,ft=Math.min(gt,pt.y),Rt;if(P[K])Rt=P[K];else{var Nt=n.parsePathString(K);P[K]=Rt={segments:Nt}}var Dt=[];N.rotate&&(Dt.push(["r",N.rotate/180*Math.PI]),delete N.rotate);var St=R.addShape("path",{attrs:t.mix(N,{fillOpacity:0,path:Rt.segments})}),xt=t.cloneDeep(St.getBBox()),Ot=xt.maxX-xt.minX,it=xt.maxY-xt.minY,At=Math.max(Ot,it),z=ft*2/At;St.transform(Dt.concat([["s",z,z]]));var q=z*Ot/2,mt=z*it/2;St.transform([["t",at.x-q,at.y-mt]]),S(at.x,at.y,O.y/(2*at.y),1,[N.fill],R,St,pt.y*4);var et=R.addShape("path",{attrs:t.mix(b(O),{path:Rt.segments})});return et.transform(Dt.concat([["s",z,z],["t",at.x-q,at.y-mt]])),et}}),u.registerShape("interval","top-line",{draw:function(O,R){var H=v(O),N=O.style||{},K=[["M",O.points[1].x,O.points[1].y],["L",O.points[2].x,O.points[2].y]],V={stroke:N.stroke||"white",lineWidth:N.lineWidth||1,path:this.parsePath(K)},k=a(O.points);k=this.parsePath(k),delete H.stroke;var Z=R.addShape("path",{attrs:t.mix(H,{zIndex:0,path:k})});return R.addShape("path",{zIndex:1,attrs:V}),Z},getMarkerCfg:function(O){var R=v(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},R)}}),E.exports=M},function(E,T,e){var t=e(0),u=e(25),s=e(23),h=e(9),r=e(5),c=[1,1],n=[5.5,1];function i(P){var A=r.shape.line,O=t.mix({},A,P.style);return s.addStrokeAttrs(O,P),P.size&&(O.lineWidth=P.size),O}function a(P){var A=r.shape.line,O=t.mix({lineWidth:2,radius:6},A,P.style);return s.addStrokeAttrs(O,P),O}function o(P,A,O,R){for(var H=[],N=R.isStack,K=[],V=0;V<P.length;V++){var k=P[V],Z=s.splitPoints(k);K.push(Z[0]),H.push(Z[1])}var X=l(H,A,O,R),at=l(K,A,O,R);return N?X:X.concat(at)}function l(P,A,O,R){var H;if(!A)H=u.getLinePath(P,!1),O&&H.push(["Z"]);else{var N=R.constraint;O&&P.length&&P.push({x:P[0].x,y:P[0].y}),H=u.getSplinePath(P,!1,N)}return H}function f(P,A){var O,R=P.points,H=P.isInCircle,N=R[0];return t.isArray(N.y)?O=o(R,A,H,P):O=l(R,A,H,P),O}function v(P,A){var O=[];return t.each(P,function(R,H){var N=P[H+1];O.push(R),N&&(O=O.concat(A(R,N)))}),O}function b(P){var A=[];return t.each(P,function(O,R){var H=R===0?["M",O.x,O.y]:["L",O.x,O.y];A.push(H)}),A}function g(P,A){var O=v(P.points,A);return b(O)}function y(P,A,O){return[["M",P-O,A],["L",P+O,A]]}function _(P,A,O){return[["M",P-O,A],["A",O/2,O/2,0,1,1,P,A],["A",O/2,O/2,0,1,0,P+O,A]]}function M(P,A){return t.mix({symbol:A?_:y},a(P))}function x(P,A){return t.mix({symbol:A},a(P))}function m(P,A,O){var R=A.points[0];return O.addShape("circle",{attrs:t.mix({x:R.x,y:R.y,r:2,fill:A.color},A.style)})}var S=h.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(A,O){var R=O.lineWidth||0;return{lineWidth:R+1}},getDefaultPoints:function(A){return s.splitPoints(A)},drawShape:function(A,O,R){var H=this.getShape(A),N;return O.points.length===1&&r.showSinglePoint?N=m(this,O,R):N=H.draw(O,R),N&&(N.set("origin",O.origin),N._id=O.splitedIndex?O._id+O.splitedIndex:O._id,N.name=this.name),N}});h.registerShape("line","line",{draw:function(A,O){var R=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix(R,{path:H})})},getMarkerCfg:function(A){return M(A)}}),h.registerShape("line","dot",{draw:function(A,O){var R=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix(R,{path:H,lineDash:c})})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=c,O}}),h.registerShape("line","dash",{draw:function(A,O){var R=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix({path:H,lineDash:n},R)})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=O.lineDash||n,O}}),h.registerShape("line","smooth",{draw:function(A,O){var R=i(A),H=this._coord;A.constraint=[[H.start.x,H.end.y],[H.end.x,H.start.y]];var N=f(A,!0);return O.addShape("path",{attrs:t.mix(R,{path:N})})},getMarkerCfg:function(A){return M(A,!0)}}),h.registerShape("line","hv",{draw:function(A,O){var R=i(A),H=g(A,function(N,K){var V=[];return V.push({x:K.x,y:N.y}),V});return O.addShape("path",{attrs:t.mix(R,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,R,H){return[["M",O-H-1,R-2.5],["L",O,R-2.5],["L",O,R+2.5],["L",O+H+1,R+2.5]]})}}),h.registerShape("line","vh",{draw:function(A,O){var R=i(A),H=g(A,function(N,K){var V=[];return V.push({x:N.x,y:K.y}),V});return O.addShape("path",{attrs:t.mix(R,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,R,H){return[["M",O-H-1,R+2.5],["L",O,R+2.5],["L",O,R-2.5],["L",O+H+1,R-2.5]]})}}),h.registerShape("line","hvh",{draw:function(A,O){var R=i(A),H=g(A,function(N,K){var V=[],k=(K.x-N.x)/2+N.x;return V.push({x:k,y:N.y}),V.push({x:k,y:K.y}),V});return O.addShape("path",{attrs:t.mix(R,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,R,H){return[["M",O-(H+1),R+2.5],["L",O-H/2,R+2.5],["L",O-H/2,R-2.5],["L",O+H/2,R-2.5],["L",O+H/2,R+2.5],["L",O+H+1,R+2.5]]})}}),h.registerShape("line","vhv",{draw:function(A,O){var R=i(A),H=g(A,function(N,K){var V=[],k=(K.y-N.y)/2+N.y;return V.push({x:N.x,y:k}),V.push({x:K.x,y:k}),V});return O.addShape("path",{attrs:t.mix(R,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,R){return[["M",O-5,R+2.5],["L",O-5,R],["L",O,R],["L",O,R-3],["L",O,R+3],["L",O+6.5,R+3]]})}}),S.spline=S.smooth,E.exports=S},function(E,T,e){var t=e(0),u=e(23),s=e(5),h=e(9),r=e(16),c=r.Marker,n=t.PathUtil,i=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],a=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],o=Math.sqrt(3);t.mix(c.Symbols,{hexagon:function(_,M,x){var m=x/2*o;return[["M",_,M-x],["L",_+m,M-x/2],["L",_+m,M+x/2],["L",_,M+x],["L",_-m,M+x/2],["L",_-m,M-x/2],["Z"]]},bowtie:function(_,M,x){var m=x-1.5;return[["M",_-x,M-m],["L",_+x,M+m],["L",_+x,M-m],["L",_-x,M+m],["Z"]]},cross:function(_,M,x){return[["M",_-x,M-x],["L",_+x,M+x],["M",_+x,M-x],["L",_-x,M+x]]},tick:function(_,M,x){return[["M",_-x/2,M-x],["L",_+x/2,M-x],["M",_,M-x],["L",_,M+x],["M",_-x/2,M+x],["L",_+x/2,M+x]]},plus:function(_,M,x){return[["M",_-x,M],["L",_+x,M],["M",_,M-x],["L",_,M+x]]},hyphen:function(_,M,x){return[["M",_-x,M],["L",_+x,M]]},line:function(_,M,x){return[["M",_,M-x],["L",_,M+x]]}});function l(y){var _=s.shape.point,M=t.mix({},_,y.style);return u.addFillAttrs(M,y),t.isNumber(y.size)&&(M.radius=y.size),M}function f(y){var _=s.shape.hollowPoint,M=t.mix({},_,y.style);return u.addStrokeAttrs(M,y),t.isNumber(y.size)&&(M.radius=y.size),M}var v=h.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(_,M){var x=M.radius,m;return _&&(_.indexOf("hollow")===0||t.indexOf(a,_)!==-1)||!_?m=M.stroke||M.strokeStyle:m=M.fill||M.fillStyle,{radius:x+1,shadowBlur:x,shadowColor:m,stroke:m,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(_){return u.splitPoints(_)}});function b(y){var _=y.points[0].x,M=y.points[0].y,x=y.size[0],m=y.size[1],S=[["M",_-.5*x,M-.5*m],["L",_+.5*x,M-.5*m],["L",_+.5*x,M+.5*m],["L",_-.5*x,M+.5*m],["z"]];return S}h.registerShape("point","rect",{draw:function(_,M){var x=l(_),m=b(_);m=this.parsePath(m);var S=M.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(_){var M=l(_);return M.symbol="rect",M.radius=4.5,M}}),t.each(i,function(y){h.registerShape("point",y,{draw:function(M,x){var m=l(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:y,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=l(M);return x.symbol=y,x.radius=4.5,x}}),h.registerShape("point","hollow"+t.upperFirst(y),{draw:function(M,x){var m=f(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:y,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=y,x.radius=4.5,x}})}),t.each(a,function(y){h.registerShape("point",y,{draw:function(M,x){var m=f(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:y,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=y,x.radius=4.5,x}})}),h.registerShape("point","image",{draw:function(_,M){return _.points=this.parsePoints(_.points),M.addShape("image",{attrs:{x:_.points[0].x-_.size/2,y:_.points[0].y-_.size,width:_.size,height:_.size,img:_.shape[1]}})}});var g={};h.registerShape("point","path",{draw:function(_,M){var x=t.mix({},f(_),l(_)),m=_.shape[1],S=_.size||10,P;if(g[m])P=g[m];else{var A=n.parsePathString(m),O=t.flatten(A).filter(function(K){return t.isNumber(K)});g[m]=P={range:Math.max.apply(null,O)-Math.min.apply(null,O),segments:A}}var R=S/P.range,H=[];x.rotate&&(H.push(["r",x.rotate/180*Math.PI]),delete x.rotate);var N=M.addShape("path",{attrs:t.mix(x,{path:P.segments})});return H.push(["s",R,R],["t",_.x,_.y]),N.transform(H),N}}),E.exports=v},function(E,T,e){var t=e(0),u=e(9),s=e(23),h=e(5);function r(a){var o=h.shape.polygon,l=t.mix({},o,a.style);return s.addFillAttrs(l,a),l}function c(a){var o=h.shape.hollowPolygon,l=t.mix({},o,a.style);return s.addStrokeAttrs(l,a),l}function n(a){for(var o=a[0],l=1,f=[["M",o.x,o.y]];l<a.length;){var v=a[l];(v.x!==a[l-1].x||v.y!==a[l-1].y)&&(f.push(["L",v.x,v.y]),v.x===o.x&&v.y===o.y&&l<a.length-1&&(o=a[l+1],f.push(["Z"]),f.push(["M",o.x,o.y]),l++)),l++}return t.isEqual(f[f.length-1],o)||f.push(["L",o.x,o.y]),f.push(["Z"]),f}var i=u.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var l=[];return t.each(o.x,function(f,v){var b=o.y[v];l.push({x:f,y:b})}),l},getActiveCfg:function(o,l){var f=l.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=l.fillOpacity||l.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,l){return l&&l.style?l.style:this.getActiveCfg(o,l)}});u.registerShape("polygon","polygon",{draw:function(o,l){if(!t.isEmpty(o.points)){var f=r(o),v=n(o.points);return v=this.parsePath(v),l.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),u.registerShape("polygon","hollow",{draw:function(o,l){if(!t.isEmpty(o.points)){var f=c(o),v=n(o.points);return v=this.parsePath(v),l.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(23),h=e(5);function r(g){t.isArray(g)||(g=[g]);var y=g[0],_=g[g.length-1],M=g.length>1?g[1]:y,x=g.length>3?g[3]:_,m=g.length>2?g[2]:M;return{min:y,max:_,min1:M,max1:x,median:m}}function c(g,y){t.each(g,function(_){y.push({x:_[0],y:_[1]})})}function n(g){var y=h.shape.schema,_=t.mix({},y,g.style);return s.addStrokeAttrs(_,g),_}function i(g){var y=h.shape.schema,_=t.mix({},y,g.style);return s.addFillAttrs(_,g),g.color&&(_.stroke=g.color||_.stroke),_}function a(g,y,_){var M=[],x,m;return t.isArray(y)?(m=r(y),x=[[g-_/2,m.max],[g+_/2,m.max],[g,m.max],[g,m.max1],[g-_/2,m.min1],[g-_/2,m.max1],[g+_/2,m.max1],[g+_/2,m.min1],[g,m.min1],[g,m.min],[g-_/2,m.min],[g+_/2,m.min],[g-_/2,m.median],[g+_/2,m.median]]):(y=y||.5,m=r(g),x=[[m.min,y-_/2],[m.min,y+_/2],[m.min,y],[m.min1,y],[m.min1,y-_/2],[m.min1,y+_/2],[m.max1,y+_/2],[m.max1,y-_/2],[m.max1,y],[m.max,y],[m.max,y-_/2],[m.max,y+_/2],[m.median,y-_/2],[m.median,y+_/2]]),c(x,M),M}function o(g){t.isArray(g)||(g=[g]);var y=g.sort(function(m,S){return m<S?1:-1}),_=y.length;if(_<4)for(var M=y[_-1],x=0;x<4-_;x++)y.push(M);return y}function l(g,y,_){var M=o(y),x=[{x:g,y:M[0]},{x:g,y:M[1]},{x:g-_/2,y:M[2]},{x:g-_/2,y:M[1]},{x:g+_/2,y:M[1]},{x:g+_/2,y:M[2]},{x:g,y:M[2]},{x:g,y:M[3]}];return x}function f(g){var y=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y],["M",g[2].x,g[2].y],["L",g[3].x,g[3].y],["M",g[4].x,g[4].y],["L",g[5].x,g[5].y],["L",g[6].x,g[6].y],["L",g[7].x,g[7].y],["L",g[4].x,g[4].y],["Z"],["M",g[8].x,g[8].y],["L",g[9].x,g[9].y],["M",g[10].x,g[10].y],["L",g[11].x,g[11].y],["M",g[12].x,g[12].y],["L",g[13].x,g[13].y]];return y}function v(g){var y=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y],["M",g[2].x,g[2].y],["L",g[3].x,g[3].y],["L",g[4].x,g[4].y],["L",g[5].x,g[5].y],["Z"],["M",g[6].x,g[6].y],["L",g[7].x,g[7].y]];return y}var b=u.registerFactory("schema",{defaultShapeType:"",getActiveCfg:function(y,_){if(y==="box"){var M=_.lineWidth||1;return{lineWidth:M+1}}var x=_.fillOpacity||_.opacity||1;return{fillOpacity:x-.15,strokeOpacity:x-.15}},getSelectedCfg:function(y,_){return _&&_.style?_.style:this.getActiveCfg(y,_)}});u.registerShape("schema","box",{getPoints:function(y){return a(y.x,y.y,y.size)},draw:function(y,_){var M=n(y),x=f(y.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(y){return{symbol:function(M,x,m){var S=[x-6,x-3,x,x+3,x+6],P=a(M,S,m);return[["M",P[0].x+1,P[0].y],["L",P[1].x-1,P[1].y],["M",P[2].x,P[2].y],["L",P[3].x,P[3].y],["M",P[4].x,P[4].y],["L",P[5].x,P[5].y],["L",P[6].x,P[6].y],["L",P[7].x,P[7].y],["L",P[4].x,P[4].y],["Z"],["M",P[8].x,P[8].y],["L",P[9].x,P[9].y],["M",P[10].x+1,P[10].y],["L",P[11].x-1,P[11].y],["M",P[12].x,P[12].y],["L",P[13].x,P[13].y]]},radius:6,lineWidth:1,stroke:y.color}}}),u.registerShape("schema","candle",{getPoints:function(y){return l(y.x,y.y,y.size)},draw:function(y,_){var M=i(y),x=v(y.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(y){return{symbol:function(M,x,m){x=[x+7.5,x+3,x-3,x-7.5];var S=l(M,x,m);return[["M",S[0].x,S[0].y],["L",S[1].x,S[1].y],["M",S[2].x,S[2].y],["L",S[3].x,S[3].y],["L",S[4].x,S[4].y],["L",S[5].x,S[5].y],["Z"],["M",S[6].x,S[6].y],["L",S[7].x,S[7].y]]},lineWidth:1,stroke:y.color,fill:y.color,radius:6}}}),E.exports=b},function(E,T,e){var t=e(0),u=e(9),s=e(23),h=e(5),r=t.PathUtil;function c(a){var o=h.shape.venn,l=t.mix({},o,a.style);return s.addFillAttrs(l,a),l}function n(a){var o=h.shape.hollowVenn,l=t.mix({},o,a.style);return s.addStrokeAttrs(l,a),l}var i=u.registerFactory("venn",{defaultShapeType:"venn",getActiveCfg:function(o,l){var f=l.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=l.fillOpacity||l.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,l){return l&&l.style?l.style:this.getActiveCfg(o,l)}});u.registerShape("venn","venn",{draw:function(o,l){var f=o.origin._origin,v=f.path,b=c(o),g=r.parsePathString(v),y=l.addShape("path",{attrs:t.mix(b,{path:g})});return y},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},c(o))}}),u.registerShape("venn","hollow",{draw:function(o,l){var f=o.origin._origin,v=f.path,b=n(o),g=r.parsePathString(v),y=l.addShape("path",{attrs:t.mix(b,{path:g})});return y},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},c(o))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(23),h=e(5),r=e(25);function c(f){var v=h.shape.venn,b=t.mix({},v,f.style);return s.addFillAttrs(b,f),f.color&&(b.stroke=b.stroke||f.color),b}function n(f){var v=h.shape.hollowVenn,b=t.mix({},v,f.style);return s.addStrokeAttrs(b,f),b}function i(f){for(var v=[],b=0;b<f.length;b++){var g=f[b];if(g){var y=b===0?"M":"L";v.push([y,g.x,g.y])}}var _=f[0];return _&&(v.push(["L",_.x,_.y]),v.push(["z"])),v}function a(f){for(var v=f.length/2,b=[],g=[],y=0;y<f.length;y++)y<v?b.push(f[y]):g.push(f[y]);var _=r.getSplinePath(b,!1),M=r.getSplinePath(g,!1);g.length&&_.push(["L",g[0].x,g[0].y]),M.shift();var x=_.concat(M);return b.length&&x.push(["L",b[0].x,b[0].y]),x.push(["z"]),x}function o(f){var v=Math.max.apply(null,f);return f.map(function(b){return b/v})}var l=u.registerFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(v){var b=v.size/2,g=[],y=o(v._size);return t.each(v.y,function(_,M){var x=y[M]*b,m=M===0,S=M===v.y.length-1;g.push({isMin:m,isMax:S,x:v.x-x,y:_}),g.unshift({isMin:m,isMax:S,x:v.x+x,y:_})}),g},getActiveCfg:function(v,b){var g=b.lineWidth||1;if(v==="hollow")return{lineWidth:g+1};var y=b.fillOpacity||b.opacity||1;return{fillOpacity:y-.08}},getSelectedCfg:function(v,b){return b&&b.style?b.style:this.getActiveCfg(v,b)}});u.registerShape("violin","violin",{draw:function(v,b){var g=c(v),y=i(v.points);y=this.parsePath(y);var _=b.addShape("path",{attrs:t.mix(g,{path:y})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},c(v))}}),u.registerShape("violin","smooth",{draw:function(v,b){var g=c(v),y=a(v.points);y=this.parsePath(y);var _=b.addShape("path",{attrs:t.mix(g,{path:y})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},c(v))}}),u.registerShape("violin","hollow",{draw:function(v,b){var g=n(v),y=i(v.points);y=this.parsePath(y);var _=b.addShape("path",{attrs:t.mix(g,{path:y})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),u.registerShape("violin","smoothHollow",{draw:function(v,b){var g=n(v),y=a(v.points);y=this.parsePath(y);var _=b.addShape("path",{attrs:t.mix(g,{path:y})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),E.exports=l},function(E,T,e){var t=e(0);E.exports=function(u){return t.isArray(u)?u:t.isString(u)?u.split("*"):[u]}},function(E,T,e){var t=e(0).MatrixUtil,u=t.vec2;function s(r,c,n,i){var a=[],o,l,f=!!i,v,b;if(f){v=[Infinity,Infinity],b=[-Infinity,-Infinity];for(var g=0,y=r.length;g<y;g++){var _=r[g];v=u.min([],v,_),b=u.max([],b,_)}v=u.min([],v,i[0]),b=u.max([],b,i[1])}for(var M=0,x=r.length;M<x;M++){var m=r[M];if(n)o=r[M?M-1:x-1],l=r[(M+1)%x];else if(M===0||M===x-1){a.push(m);continue}else o=r[M-1],l=r[M+1];var S=[];S=u.sub(S,l,o),S=u.scale(S,S,c);var P=u.distance(m,o),A=u.distance(m,l),O=P+A;O!==0&&(P/=O,A/=O);var R=u.scale([],S,-P),H=u.scale([],S,A),N=u.add([],m,R),K=u.add([],m,H);f&&(N=u.max([],N,v),N=u.min([],N,b),K=u.max([],K,v),K=u.min([],K,b)),a.push(N),a.push(K)}return n&&a.push(a.shift()),a}function h(r,c,n){for(var i=!!c,a=[],o=0,l=r.length;o<l;o+=2)a.push([r[o],r[o+1]]);for(var f=s(a,.4,i,n),v=a.length,b=[],g,y,_,M=0;M<v-1;M++)g=f[M*2],y=f[M*2+1],_=a[M+1],b.push(["C",g[0],g[1],y[0],y[1],_[0],_[1]]);return i&&(g=f[v],y=f[v+1],_=a[0],b.push(["C",g[0],g[1],y[0],y[1],_[0],_[1]])),b}E.exports={catmullRom2bezier:h}},function(E,T,e){function t(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var u=e(8),s=e(0),h=e(544),r=h.venn,c=h.scaleSolution,n=h.circlePath,i=h.intersectionAreaPath,a=h.computeTextCentres;e(311);var o=function(l){t(f,l);function f(){return l.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=l.prototype.getDefaultCfg.call(this);return g.type="venn",g.shapeType="venn",g.generatePoints=!1,g},v._getAttrValues=function(g,y){return g.type==="position"?[y.x,y.y]:l.prototype._getAttrValues.call(this,g,y)},v.sets=function(g){return this.set("setsField",g),this},v._initAttrs=function(){var g=this;l.prototype._initAttrs.call(this);var y=g.get("attrOptions"),_=g.get("setsField")||"sets",M=g.get("data"),x=y.size?y.size.field:"size";M.forEach(function(k){k.sets=k[_],k._sets=k[_].join("&"),k.size=k[x]});var m=r(M),S=g.get("coord"),P=[Math.min(S.x.end,S.x.start),Math.max(S.x.end,S.x.start)],A=[Math.min(S.y.end,S.y.start),Math.max(S.y.end,S.y.start)],O=P[1]-P[0],R=A[1]-A[0],H=g.get("styleOptions"),N=H&&s.isObject(H.style)?H.style.padding:0;s.isFinite(N)||(N=0);var K=c(m,O,R,N),V=a(K,M);M.forEach(function(k){var Z=k.sets,X=Z.join(",");if(k.id=X,Z.length===1){var at=K[X];k.path=n(at.x,at.y,at.radius),s.assign(k,at)}else{var pt=Z.map(function(Rt){return K[Rt]}),gt=i(pt);/[zZ]$/.test(gt)||(gt+="Z"),k.path=gt;var ft=V[X]||{x:0,y:0};s.assign(k,ft)}})},f}(u);u.Venn=o,E.exports=o},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),h=e(0),r=e(70);e(312);var c=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="violin",f.shapeType="violin",f.generatePoints=!0,f};function o(l){var f;return f=i.call(this,l)||this,h.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=this,b=i.prototype.createShapePointsCfg.call(this,f);b.size=v.getNormalizedSize(f);var g=v.get("_sizeField");return b._size=f._origin[g],b},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},a._initAttrs=function(){var f=this,v=f.get("attrOptions"),b=v.size?v.size.field:f.get("_sizeField")?f.get("_sizeField"):"size";f.set("_sizeField",b),delete v.size,i.prototype._initAttrs.call(this)},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(c);c.Dodge=n,s.Violin=c,s.ViolinDodge=n,E.exports=c},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(0),h=e(28),r=["X","Y","XY","POLYGON"],c="XY",n=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return s.mix({},f,{type:c,startPoint:null,brushing:!1,dragging:!1,brushShape:null,container:null,polygonPath:null,style:{fill:"#C5D4EB",opacity:.3,lineWidth:1,stroke:"#82A6DD"},draggable:!1,dragOffX:0,dragOffY:0,inPlot:!0,xField:null,yField:null})};function o(l,f){var v;v=i.call(this,l,f)||this;var b=t(v);b.filter=!b.draggable,b.type=b.type.toUpperCase(),b.chart=f,r.includes(b.type)||(b.type=c);var g=b.canvas;if(g){var y;g.get("children").map(function(m){return m.get("type")==="plotBack"?(y=m.get("plotRange"),!1):m}),b.plot={start:y.bl,end:y.tr}}if(f){var _=f.get("coord");b.plot={start:_.start,end:_.end},f.on("afterrender",function(){b.plot={start:_.start,end:_.end}}),b.isTransposed=_.isTransposed;var M=f._getScales("x"),x=f._getScales("y");b.xScale=b.xField?M[b.xField]:f.getXScale(),b.yScale=b.yField?x[b.yField]:f.getYScales()[0]}return v}return a.start=function(f){var v=this,b=v.canvas,g=v.type,y=v.brushShape;if(!!g){v.brushing&&v.end(f);var _={x:f.offsetX,y:f.offsetY};if(!!_.x){var M=v.plot&&v.inPlot,x=b.get("canvasDOM"),m=b.get("pixelRatio");if(v.selection&&(v.selection=null),v.draggable&&y&&!y.get("destroyed")){if(y.isHit(_.x*m,_.y*m)){if(x.style.cursor="move",v.selection=y,v.dragging=!0,g==="X")v.dragoffX=_.x-y.attr("x"),v.dragoffY=0;else if(g==="Y")v.dragoffX=0,v.dragoffY=_.y-y.attr("y");else if(g==="XY")v.dragoffX=_.x-y.attr("x"),v.dragoffY=_.y-y.attr("y");else if(g==="POLYGON"){var S=y.getBBox();v.dragoffX=_.x-S.minX,v.dragoffY=_.y-S.minY}v.onDragstart&&v.onDragstart(f)}v.prePoint=_}if(!v.dragging){v.onBrushstart&&v.onBrushstart(_);var P=v.container;if(M){var A=v.plot,O=A.start,R=A.end;if(_.x<O.x||_.x>R.x||_.y<R.y||_.y>O.y)return}x.style.cursor="crosshair",v.startPoint=_,v.brushShape=null,v.brushing=!0,P?P.clear():(P=b.addGroup({zIndex:5}),P.initTransform()),v.container=P,g==="POLYGON"&&(v.polygonPath="M "+_.x+" "+_.y)}}}},a.process=function(f){var v=this,b=v.brushing,g=v.dragging,y=v.type,_=v.plot,M=v.startPoint,x=v.xScale,m=v.yScale,S=v.canvas;if(!(!b&&!g)){var P={x:f.offsetX,y:f.offsetY},A=S.get("canvasDOM");if(b){A.style.cursor="crosshair";var O=_.start,R=_.end,H=v.polygonPath,N=v.brushShape,K=v.container;v.plot&&v.inPlot&&(P=v._limitCoordScope(P));var V,k,Z,X;y==="Y"?(V=O.x,k=P.y>=M.y?M.y:P.y,Z=Math.abs(O.x-R.x),X=Math.abs(M.y-P.y)):y==="X"?(V=P.x>=M.x?M.x:P.x,k=R.y,Z=Math.abs(M.x-P.x),X=Math.abs(R.y-O.y)):y==="XY"?(P.x>=M.x?(V=M.x,k=P.y>=M.y?M.y:P.y):(V=P.x,k=P.y>=M.y?M.y:P.y),Z=Math.abs(M.x-P.x),X=Math.abs(M.y-P.y)):y==="POLYGON"&&(H+="L "+P.x+" "+P.y,v.polygonPath=H,N?!N.get("destroyed")&&N.attr(s.mix({},N._attrs,{path:H})):N=K.addShape("path",{attrs:s.mix(v.style,{path:H})})),y!=="POLYGON"&&(N?!N.get("destroyed")&&N.attr(s.mix({},N._attrs,{x:V,y:k,width:Z,height:X})):N=K.addShape("rect",{attrs:s.mix(v.style,{x:V,y:k,width:Z,height:X})})),v.brushShape=N}else if(g){A.style.cursor="move";var at=v.selection;if(at&&!at.get("destroyed"))if(y==="POLYGON"){var pt=v.prePoint;v.selection.translate(P.x-pt.x,P.y-pt.y)}else v.dragoffX&&at.attr("x",P.x-v.dragoffX),v.dragoffY&&at.attr("y",P.y-v.dragoffY)}v.prePoint=P,S.draw();var gt=v._getSelected(),ft=gt.data,Rt=gt.shapes,Nt=gt.xValues,Dt=gt.yValues,St={data:ft,shapes:Rt};x&&(St[x.field]=Nt),m&&(St[m.field]=Dt),s.mix(f,St),St.x=P.x,St.y=P.y,v.onDragmove&&v.onDragmove(St),v.onBrushmove&&v.onBrushmove(St)}},a.end=function(f){var v=this;if(!(!v.brushing&&!v.dragging)){var b=v.data,g=v.shapes,y=v.xValues,_=v.yValues,M=v.canvas,x=v.type,m=v.startPoint,S=v.chart,P=v.container,A=v.xScale,O=v.yScale,R=f.offsetX,H=f.offsetY,N=M.get("canvasDOM");if(N.style.cursor="default",m!==null){if(Math.abs(m.x-R)<=1&&Math.abs(m.y-H)<=1){v.brushing=!1,v.dragging=!1,P.clear(),M.draw();return}var K={data:b,shapes:g};if(A&&(K[A.field]=y),O&&(K[O.field]=_),s.mix(f,K),K.x=R,K.y=H,v.dragging)v.dragging=!1,v.onDragend&&v.onDragend(K);else if(v.brushing){v.brushing=!1;var V=v.brushShape,k=v.polygonPath;x==="POLYGON"&&(k+="z",V&&!V.get("destroyed")&&V.attr(s.mix({},V._attrs,{path:k})),v.polygonPath=k,M.draw()),v.onBrushend?v.onBrushend(K):S&&v.filter&&(P.clear(),!v.isTransposed&&x==="X"||v.isTransposed&&x==="Y"?A&&S.filter(A.field,function(Z){return y.indexOf(Z)>-1}):!v.isTransposed&&x==="Y"||v.isTransposed&&x==="X"?O&&S.filter(O.field,function(Z){return _.indexOf(Z)>-1}):(A&&S.filter(A.field,function(Z){return y.indexOf(Z)>-1}),O&&S.filter(O.field,function(Z){return _.indexOf(Z)>-1})),S.repaint())}}}},a.reset=function(){var f=this,v=f.chart,b=f.filter,g=f.brushShape,y=f.canvas;this._init(),v&&b&&(v.get("options").filters={},v.repaint()),g&&(g.destroy(),y.draw())},a._limitCoordScope=function(f){var v=this.plot,b=v.start,g=v.end;return f.x<b.x&&(f.x=b.x),f.x>g.x&&(f.x=g.x),f.y<g.y&&(f.y=g.y),f.y>b.y&&(f.y=b.y),f},a._getSelected=function(){var f=this,v=f.chart,b=f.xScale,g=f.yScale,y=f.brushShape,_=f.canvas,M=_.get("pixelRatio"),x=[],m=[],S=[],P=[];if(v){var A=v.get("geoms");A.map(function(O){var R=O.getShapes();return R.map(function(H){var N=H.get("origin");return Array.isArray(N)||(N=[N]),N.map(function(K){if(y.isHit(K.x*M,K.y*M)){x.push(H);var V=K._origin;P.push(V),b&&m.push(V[b.field]),g&&S.push(V[g.field])}return K}),H}),O})}return f.shapes=x,f.xValues=m,f.yValues=S,f.data=P,_.draw(),{data:P,xValues:m,yValues:S,shapes:x}},o}(h);E.exports=n},function(E,T,e){var t=e(0),u=e(16),s=u.Group,h=t.DomUtil,r=5,c=function n(i){n.superclass.constructor.call(this,i)};t.extend(c,s),t.augment(c,{getDefaultCfg:function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_initHandle:function(i){var a=this,o=a.addGroup(),l=a.get("layout"),f=a.get("handleStyle"),v=f.img,b=f.width,g=f.height,y,_,M;if(l==="horizontal"){var x=f.width;M="ew-resize",_=o.addShape("Image",{attrs:{x:-x/2,y:0,width:x,height:g,img:v,cursor:M}}),y=o.addShape("Text",{attrs:t.mix({x:i==="min"?-(x/2+r):x/2+r,y:g/2,textAlign:i==="min"?"end":"start",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))})}else M="ns-resize",_=o.addShape("Image",{attrs:{x:0,y:-g/2,width:b,height:g,img:v,cursor:M}}),y=o.addShape("Text",{attrs:t.mix({x:b/2,y:i==="min"?g/2+r:-(g/2+r),textAlign:"center",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))});return this.set(i+"TextElement",y),this.set(i+"IconElement",_),o},_initSliderBackground:function(){var i=this.addGroup();return i.initTransform(),i.translate(0,0),i.addShape("Rect",{attrs:t.mix({x:0,y:0,width:this.get("width"),height:this.get("height")},this.get("backgroundStyle"))}),i},_beforeRenderUI:function(){var i=this._initSliderBackground(),a=this._initHandle("min"),o=this._initHandle("max"),l=this.addShape("rect",{attrs:this.get("middleAttr")});this.set("middleHandleElement",l),this.set("minHandleElement",a),this.set("maxHandleElement",o),this.set("backgroundElement",i),i.set("zIndex",0),l.set("zIndex",1),a.set("zIndex",2),o.set("zIndex",2),l.attr("cursor","move"),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(i){var a=this.get("range"),o=a[0]/100,l=a[1]/100,f=this.get("width"),v=this.get("height"),b=this.get("minHandleElement"),g=this.get("maxHandleElement"),y=this.get("middleHandleElement");b.resetMatrix?(b.resetMatrix(),g.resetMatrix()):(b.initTransform(),g.initTransform()),i==="horizontal"?(y.attr({x:f*o,y:0,width:(l-o)*f,height:v}),b.translate(o*f,0),g.translate(l*f,0)):(y.attr({x:0,y:v*(1-l),width:f,height:(l-o)*v}),b.translate(0,(1-o)*v),g.translate(0,(1-l)*v))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(i,a){var o=this.get(a);if(i===o)return!0;if(o.isGroup){var l=o.get("children");return l.indexOf(i)>-1}return!1},_getRange:function(i,a){var o=i+a;return o=o>100?100:o,o=o<0?0:o,o},_limitRange:function(i,a,o){o[0]=this._getRange(i,o[0]),o[1]=o[0]+a,o[1]>100&&(o[1]=100,o[0]=o[1]-a)},_updateStatus:function(i,a){var o=i==="x"?this.get("width"):this.get("height");i=t.upperFirst(i);var l=this.get("range"),f=this.get("page"+i),v=this.get("currentTarget"),b=this.get("rangeStash"),g=this.get("layout"),y=g==="vertical"?-1:1,_=a["page"+i],M=_-f,x=M/o*100*y,m,S=this.get("minRange"),P=this.get("maxRange");l[1]<=l[0]?(this._isElement(v,"minHandleElement")||this._isElement(v,"maxHandleElement"))&&(l[0]=this._getRange(x,l[0]),l[1]=this._getRange(x,l[0])):(this._isElement(v,"minHandleElement")&&(l[0]=this._getRange(x,l[0]),S&&l[1]-l[0]<=S&&this._limitRange(x,S,l),P&&l[1]-l[0]>=P&&this._limitRange(x,P,l)),this._isElement(v,"maxHandleElement")&&(l[1]=this._getRange(x,l[1]),S&&l[1]-l[0]<=S&&this._limitRange(x,S,l),P&&l[1]-l[0]>=P&&this._limitRange(x,P,l))),this._isElement(v,"middleHandleElement")&&(m=b[1]-b[0],this._limitRange(x,m,l)),this.emit("sliderchange",{range:l}),this.set("page"+i,_),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(i){var a=i.currentTarget,o=i.event,l=this.get("range");o.stopPropagation(),o.preventDefault(),this.set("pageX",o.pageX),this.set("pageY",o.pageY),this.set("currentTarget",a),this.set("rangeStash",[l[0],l[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var i=this.get("canvas").get("containerDOM");this.onMouseMoveListener=h.addEventListener(i,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=h.addEventListener(i,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=h.addEventListener(i,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(i){var a=this.get("layout");a==="horizontal"?this._updateStatus("x",i):this._updateStatus("y",i)},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove(),this.onMouseLeaveListener.remove()}}),E.exports=c},function(E,T,e){function t(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function u(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var s=e(0),h=e(28),r=e(320),c=e(71),n=e(73),i=864e5,a=["X","Y","XY"],o="X",l=function(f){u(b,f);var v=b.prototype;v.getDefaultCfg=function(){var y=f.prototype.getDefaultCfg.call(this);return s.mix({},y,{type:o,stepRatio:.05,limitRange:{},stepByField:{},threshold:20,originScaleDefsByField:{},previousPoint:null,isDragging:!1})},v._disableTooltip=function(){var y=this,_=y.chart,M=_.get("tooltipController");M&&(y._showTooltip=!0,_.tooltip(!1))},v._enableTooltip=function(y){var _=this,M=_.chart;_._showTooltip&&(M.tooltip(!0),M.showTooltip(y))};function b(g,y){var _;_=f.call(this,g,y)||this;var M=t(_);M.type=M.type.toUpperCase(),M.chart=y,M.coord=y.get("coord");var x=M.data=y.get("data");r(y);var m=y.getYScales(),S=y.getXScale();m.push(S);var P=y.get("scaleController");return m.forEach(function(A){var O=A.field;M.limitRange[O]=n(x,A);var R=P.defs[O]||{};M.originScaleDefsByField[O]=s.mix(R,{nice:!!R.nice}),A.isLinear&&(M.stepByField[O]=(A.max-A.min)*M.stepRatio)}),a.includes(M.type)||(M.type=o),M._disableTooltip(),_}return v._applyTranslate=function(y,_,M){_===void 0&&(_=0);var x=this;y.isLinear?x._translateLinearScale(y,_,M):x._translateCatScale(y,_,M)},v._translateCatScale=function(y,_,M){var x=this,m=x.chart,S=y.type,P=y.field,A=y.values,O=y.ticks,R=c(m,P),H=x.limitRange[P],N=_/M,K=A.length,V=Math.max(1,Math.abs(parseInt(N*K))),k=H.indexOf(A[0]),Z=H.indexOf(A[K-1]);if(_>0&&k>=0){for(var X=0;X<V&&k>0;X++)k-=1,Z-=1;var at=H.slice(k,Z+1),pt=null;if(S==="timeCat"){for(var gt=O.length>2?O[1]-O[0]:i,ft=O[0]-gt;ft>=at[0];ft-=gt)O.unshift(ft);pt=O}m.scale(P,s.mix({},R,{values:at,ticks:pt}))}else if(_<0&&Z<=H.length-1){for(var Rt=0;Rt<V&&Z<H.length-1;Rt++)k+=1,Z+=1;var Nt=H.slice(k,Z+1),Dt=null;if(S==="timeCat"){for(var St=O.length>2?O[1]-O[0]:i,xt=O[O.length-1]+St;xt<=Nt[Nt.length-1];xt+=St)O.push(xt);Dt=O}m.scale(P,s.mix({},R,{values:Nt,ticks:Dt}))}},v._translateLinearScale=function(y,_,M){var x=this,m=x.chart,S=x.limitRange,P=y.min,A=y.max,O=y.field;if(!(P===S[O].min&&A===S[O].max)){var R=_/M,H=A-P,N=c(m,O);m.scale(O,s.mix({},N,{nice:!1,min:P+R*H,max:A+R*H}))}},v.start=function(y){var _=this,M=_.canvas,x=M.get("canvasDOM");x.style.cursor="pointer",_.isDragging=!0,_.previousPoint={x:y.x,y:y.y},_._disableTooltip()},v.process=function(y){var _=this;if(_.isDragging){var M=_.chart,x=_.type,m=_.canvas,S=_.coord,P=_.threshold,A=m.get("canvasDOM");A.style.cursor="move";var O=_.previousPoint,R=y,H=R.x-O.x,N=R.y-O.y,K=!1;if(Math.abs(H)>P&&x.indexOf("X")>-1){K=!0;var V=M.getXScale();_._applyTranslate(V,V.isLinear?-H:H,S.width)}if(Math.abs(N)>P&&x.indexOf("Y")>-1){K=!0;var k=M.getYScales();k.forEach(function(Z){_._applyTranslate(Z,R.y-O.y,S.height)})}K&&(_.previousPoint=R,M.repaint())}},v.end=function(y){var _=this;_.isDragging=!1;var M=_.canvas,x=M.get("canvasDOM");x.style.cursor="default",_._enableTooltip(y)},v.reset=function(){var y=this,_=y.view,M=y.originScaleDefsByField,x=_.getYScales(),m=_.getXScale();x.push(m),x.forEach(function(S){if(S.isLinear){var P=S.field;_.scale(P,M[P])}}),_.repaint(),y._disableTooltip()},b}(h);E.exports=l},function(E,T,e){var t=e(0),u=e(52),s=e(72);E.exports=function(h){h.on("beforeinitgeoms",function(){h.set("limitInPlot",!0);var r=h.get("data"),c=s(h);if(!c)return r;var n=h.get("geoms"),i=!1;t.each(n,function(l){if(["area","line","path"].includes(l.get("type")))return i=!0,!1});var a=[];if(t.each(c,function(l,f){!i&&l&&(l.values||l.min||l.max)&&a.push(f)}),a.length===0)return r;var o=[];t.each(r,function(l){var f=!0;t.each(a,function(v){var b=l[v];if(b){var g=c[v];if(g.type==="timeCat"){var y=g.values;t.isNumber(y[0])&&(b=u.toTimeStamp(b))}(g.values&&!g.values.includes(b)||g.min&&b<g.min||g.max&&b>g.max)&&(f=!1)}}),f&&o.push(l)}),h.set("filteredData",o)})}},function(E,T){E.exports=function(e,t,u){if(!e)return[0,1];var s=0,h=0;if(u==="linear"){var r=t.min,c=t.max,n=c-r;s=(e.min-r)/n,h=(e.max-r)/n}else{var i=t,a=e.values,o=i.indexOf(a[0]),l=i.indexOf(a[a.length-1]);s=o/(i.length-1),h=l/(i.length-1)}return[s,h]}},function(E,T,e){var t=e(45),u=e(44),s=e(0),h={Base:e(28),Brush:e(317),Drag:e(319),ScrollBar:e(323),ShapeSelect:e(324),Slider:e(325),Zoom:e(326)};t._Interactions={},t.registerInteraction=function(r,c){t._Interactions[r]=c},t.getInteraction=function(r){return t._Interactions[r]},u.prototype.getInteractions=function(){var r=this;return r._interactions||(r._interactions={}),r._interactions},u.prototype._setInteraction=function(r,c){var n=this,i=n.getInteractions();i[r]&&i[r]!==c&&i[r].destroy(),i[r]=c},u.prototype.clearInteraction=function(r){var c=this,n=c.getInteractions();r?(n[r]&&(n[r]._reset(),n[r].destroy()),delete n[r]):s.each(n,function(i,a){i._reset(),i.destroy(),delete n[a]})},u.prototype.interact=u.prototype.interaction=function(r,c){var n=this,i=t.getInteraction(r),a=new i(c,n);return n._setInteraction(r,a),n},t.registerInteraction("brush",h.Brush),t.registerInteraction("Brush",h.Brush),t.registerInteraction("drag",h.Drag),t.registerInteraction("Drag",h.Drag),t.registerInteraction("zoom",h.Zoom),t.registerInteraction("Zoom",h.Zoom),t.registerInteraction("scroll-bar",h.ScrollBar),t.registerInteraction("ScrollBar",h.ScrollBar),t.registerInteraction("shape-select",h.ShapeSelect),t.registerInteraction("ShapeSelect",h.ShapeSelect),t.registerInteraction("slider",h.Slider),t.registerInteraction("Slider",h.Slider),E.exports=h},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(0),s=e(28),h=e(321),r=e(73),c="X",n=function(i){t(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return u.mix({},f,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,type:c,xStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:0,offsetY:-10},yStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:8,offsetY:0}})},a._renderScrollBars=function(){var f=this.chart,v=f.get("_scrollBarCfg");if(!!v){var b=f.get("data"),g=f.get("plotRange");g.width=Math.abs(g.br.x-g.bl.x),g.height=Math.abs(g.tl.y-g.bl.y);var y=f.get("backPlot"),_=f.get("canvas"),M=_.get("height"),x=f.get("_limitRange"),m=v.type;if(m.indexOf("X")>-1){var S=v.xStyle,P=S.offsetX,A=S.offsetY,O=S.lineCap,R=S.backgroundColor,H=S.fillerColor,N=S.size,K=f.getXScale(),V=x[K.field];V||(V=r(b,K),x[K.field]=V);var k=h(K,V,K.type),Z=f.get("_horizontalBar"),X=M-N/2+A;if(Z){var at=Z.get("children")[1];at.attr({x1:Math.max(g.bl.x+g.width*k[0]+P,g.bl.x),x2:Math.min(g.bl.x+g.width*k[1]+P,g.br.x)})}else Z=y.addGroup({className:"horizontalBar"}),Z.addShape("line",{attrs:{x1:g.bl.x+P,y1:X,x2:g.br.x+P,y2:X,lineWidth:N,stroke:R,lineCap:O}}),Z.addShape("line",{attrs:{x1:Math.max(g.bl.x+g.width*k[0]+P,g.bl.x),y1:X,x2:Math.min(g.bl.x+g.width*k[1]+P,g.br.x),y2:X,lineWidth:N,stroke:H,lineCap:O}}),f.set("_horizontalBar",Z)}if(m.indexOf("Y")>-1){var pt=v.yStyle,gt=pt.offsetX,ft=pt.offsetY,Rt=pt.lineCap,Nt=pt.backgroundColor,Dt=pt.fillerColor,St=pt.size,xt=f.getYScales()[0],Ot=x[xt.field];Ot||(Ot=r(b,xt),x[xt.field]=Ot);var it=h(xt,Ot,xt.type),At=f.get("_verticalBar"),z=St/2+gt;if(At){var q=At.get("children")[1];q.attr({y1:Math.max(g.tl.y+g.height*it[0]+ft,g.tl.y),y2:Math.min(g.tl.y+g.height*it[1]+ft,g.bl.y)})}else At=y.addGroup({className:"verticalBar"}),At.addShape("line",{attrs:{x1:z,y1:g.tl.y+ft,x2:z,y2:g.bl.y+ft,lineWidth:St,stroke:Nt,lineCap:Rt}}),At.addShape("line",{attrs:{x1:z,y1:Math.max(g.tl.y+g.height*it[0]+ft,g.tl.y),x2:z,y2:Math.min(g.tl.y+g.height*it[1]+ft,g.bl.y),lineWidth:St,stroke:Dt,lineCap:Rt}}),f.set("_verticalBar",At)}}};function o(l,f){var v;v=i.call(this,l,f)||this;var b=v.getDefaultCfg();return f.set("_scrollBarCfg",u.deepMix({},b,l)),f.set("_limitRange",{}),!f.get("_horizontalBar")&&!f.get("_verticalBar")&&v._renderScrollBars(),v}return a._clear=function(){var f=this.chart;if(f){var v=f.get("_horizontalBar"),b=f.get("_verticalBar");v&&v.remove(!0),b&&b.remove(!0),f.set("_horizontalBar",null),f.set("_verticalBar",null)}},a._bindEvents=function(){this._onAfterclearOrBeforechangedata=this._onAfterclearOrBeforechangedata.bind(this),this._onAfterclearinner=this._onAfterclearinner.bind(this),this._onAfterdrawgeoms=this._onAfterdrawgeoms.bind(this);var f=this.chart;f.on("afterclear",this._onAfterclearOrBeforechangedata),f.on("beforechangedata",this._onAfterclearOrBeforechangedata),f.on("afterclearinner",this._onAfterclearinner),f.on("afterdrawgeoms",this._onAfterdrawgeoms)},a._onAfterclearOrBeforechangedata=function(){this.chart&&this.chart.set("_limitRange",{})},a._onAfterclearinner=function(){this._clear()},a._onAfterdrawgeoms=function(){this._renderScrollBars()},a._clearEvents=function(){var f=this.chart;f&&(f.off("afterclear",this._onAfterclearOrBeforechangedata),f.off("beforechangedata",this._onAfterclearOrBeforechangedata),f.off("afterclearinner",this._onAfterclearinner),f.off("afterdrawgeoms",this._onAfterdrawgeoms))},a.destroy=function(){this._clearEvents(),this._clear(),this.canvas.draw()},o}(s);E.exports=n},function(E,T,e){function t(c,n){c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.__proto__=n}var u=e(0),s=e(28);function h(c,n){var i={};for(var a in n)i[a]=c[a];return i}var r=function(c){t(n,c);function n(){return c.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=c.prototype.getDefaultCfg.call(this);return u.mix({},o,{startEvent:"mouseup",processEvent:null,selectStyle:{fillOpacity:1},unSelectStyle:{fillOpacity:.1},cancelable:!0})},i.start=function(o){var l=this,f=l.view,v,b=[];if(f.eachShape(function(M,x){x.isPointInPath(o.x,o.y)?v=x:b.push(x)}),!v){l.reset();return}if(v.get("_selected")){if(!l.cancelable)return;l.reset()}else{var g=l.selectStyle,y=l.unSelectStyle,_=h(v.attr(),v);v.set("_originAttrs",_),v.attr(g),u.each(b,function(M){var x=M.get("_originAttrs");x&&M.attr(x),M.set("_selected",!1),y&&(x=h(M.attr(),y),M.set("_originAttrs",x),M.attr(y))}),v.set("_selected",!0),l.selectedShape=v,l.canvas.draw()}},i.end=function(o){var l=this.selectedShape;l&&!l.get("destroyed")&&l.get("origin")&&(o.data=l.get("origin")._origin,o.shapeInfo=l.get("origin"),o.shape=l,o.selected=!!l.get("_selected"))},i.reset=function(){var o=this;if(!!o.selectedShape){var l=o.view,f=l.get("geoms")[0],v=f.get("container").get("children")[0],b=v.get("children");u.each(b,function(g){var y=g.get("_originAttrs");y&&(g._attrs=y,g.set("_originAttrs",null)),g.set("_selected",!1)}),o.canvas.draw()}},n}(s);E.exports=r},function(E,T,e){function t(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function u(g,y){g.prototype=Object.create(y.prototype),g.prototype.constructor=g,g.__proto__=y}var s=e(318),h=e(44),r=e(0),c=e(16),n=e(5),i=e(28),a=e(71),o=e(72),l=c.Canvas,f=r.DomUtil,v=r.isNumber,b=function(g){u(_,g);var y=_.prototype;y.getDefaultCfg=function(){var x=g.prototype.getDefaultCfg.call(this);return r.mix({},x,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,height:26,width:"auto",padding:n.plotCfg.padding,container:null,xAxis:null,yAxis:null,fillerStyle:{fill:"#BDCCED",fillOpacity:.3},backgroundStyle:{stroke:"#CCD6EC",fill:"#CCD6EC",fillOpacity:.3,lineWidth:1},range:[0,100],layout:"horizontal",textStyle:{fill:"#545454"},handleStyle:{img:"https://gw.alipayobjects.com/zos/rmsportal/QXtfhORGlDuRvLXFzpsQ.png",width:5},backgroundChart:{type:["area"],color:"#CCD6EC"}})},y._initContainer=function(){var x=this,m=x.container;if(!m)throw new Error("Please specify the container for the Slider!");r.isString(m)?x.domContainer=document.getElementById(m):x.domContainer=m},y.forceFit=function(){var x=this;if(!(!x||x.destroyed)){var m=f.getWidth(x.domContainer),S=x.height;if(m!==x.domWidth){var P=x.canvas;P.changeSize(m,S),x.bgChart&&x.bgChart.changeWidth(m),P.clear(),x._initWidth(),x._initSlider(),x._bindEvent(),P.draw()}}},y._initForceFitEvent=function(){var x=this,m=setTimeout(r.wrapBehavior(x,"forceFit"),200);clearTimeout(x.resizeTimer),x.resizeTimer=m},y._initStyle=function(){var x=this;x.handleStyle=r.mix({width:x.height,height:x.height},x.handleStyle),x.width==="auto"&&window.addEventListener("resize",r.wrapBehavior(x,"_initForceFitEvent"))},y._initWidth=function(){var x=this,m;x.width==="auto"?m=f.getWidth(x.domContainer):m=x.width,x.domWidth=m;var S=r.toAllPadding(x.padding);x.layout==="horizontal"?(x.plotWidth=m-S[1]-S[3],x.plotPadding=S[3],x.plotHeight=x.height):x.layout==="vertical"&&(x.plotWidth=x.width,x.plotHeight=x.height-S[0]-S[2],x.plotPadding=S[0])},y._initCanvas=function(){var x=this,m=x.domWidth,S=x.height,P=new l({width:m,height:S,containerDOM:x.domContainer,capture:!1}),A=P.get("el");A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.zIndex=3,x.canvas=P},y._initBackground=function(){var x,m=this,S=this.chart,P=S.getAllGeoms[0],A=m.data=m.data||S.get("data"),O=S.getXScale(),R=m.xAxis||O.field,H=m.yAxis||S.getYScales()[0].field,N=r.deepMix((x={},x[""+R]={range:[0,1]},x),o(S),m.scales);if(delete N[R].min,delete N[R].max,!A)throw new Error("Please specify the data!");if(!R)throw new Error("Please specify the xAxis!");if(!H)throw new Error("Please specify the yAxis!");var K=m.backgroundChart,V=K.type||P.get("type"),k=K.color||"grey",Z=K.shape;r.isArray(V)||(V=[V]);var X=r.toAllPadding(m.padding),at=new h({container:m.container,width:m.domWidth,height:m.height,padding:[0,X[1],0,X[3]],animate:!1});at.source(A),at.scale(N),at.axis(!1),at.tooltip(!1),at.legend(!1),r.each(V,function(pt,gt){var ft=at[pt]().position(R+"*"+H).opacity(1),Rt=r.isArray(k)?k[gt]:k;Rt&&(r.isObject(Rt)?Rt.field&&ft.color(Rt.field,Rt.colors):ft.color(Rt));var Nt=r.isArray(Z)?Z[gt]:Z;Nt&&(r.isObject(Nt)?Nt.field&&ft.shape(Nt.field,Nt.callback||Nt.shapes):ft.shape(Nt))}),at.render(),m.bgChart=at,m.scale=m.layout==="horizontal"?at.getXScale():at.getYScales()[0],m.layout==="vertical"&&at.destroy()},y._initRange=function(){var x=this,m=x.startRadio,S=x.endRadio,P=x._startValue,A=x._endValue,O=x.scale,R=0,H=1;v(m)?R=m:P&&(R=O.scale(O.translate(P))),v(S)?H=S:A&&(H=O.scale(O.translate(A)));var N=x.minSpan,K=x.maxSpan,V=0;if(O.type==="time"||O.type==="timeCat"){var k=O.values,Z=k[0],X=k[k.length-1];V=X-Z}else O.isLinear&&(V=O.max-O.min);V&&N&&(x.minRange=N/V*100),V&&K&&(x.maxRange=K/V*100);var at=[R*100,H*100];return x.range=at,at},y._getHandleValue=function(x){var m=this,S,P=m.range,A=P[0]/100,O=P[1]/100,R=m.scale;return x==="min"?S=m._startValue?m._startValue:R.invert(A):S=m._endValue?m._endValue:R.invert(O),S},y._initSlider=function(){var x=this,m=x.canvas,S=x._initRange(),P=x.scale,A=m.addGroup(s,{middleAttr:x.fillerStyle,range:S,minRange:x.minRange,maxRange:x.maxRange,layout:x.layout,width:x.plotWidth,height:x.plotHeight,backgroundStyle:x.backgroundStyle,textStyle:x.textStyle,handleStyle:x.handleStyle,minText:P.getText(x._getHandleValue("min")),maxText:P.getText(x._getHandleValue("max"))});x.layout==="horizontal"?A.translate(x.plotPadding,0):x.layout==="vertical"&&A.translate(0,x.plotPadding),x.rangeElement=A},y._updateElement=function(x,m){var S=this,P=S.chart,A=S.scale,O=S.rangeElement,R=A.field,H=O.get("minTextElement"),N=O.get("maxTextElement"),K=A.invert(x),V=A.invert(m),k=A.getText(K),Z=A.getText(V);H.attr("text",k),N.attr("text",Z),S._startValue=k,S._endValue=Z,S.onChange&&S.onChange({startText:k,endText:Z,startValue:K,endValue:V,startRadio:x,endRadio:m}),P.scale(R,r.mix({},a(P,R),{nice:!1,min:K,max:V})),P.repaint()},y._bindEvent=function(){var x=this,m=x.rangeElement;m.on("sliderchange",function(S){var P=S.range,A=P[0]/100,O=P[1]/100;x._updateElement(A,O)})};function _(M,x){var m;m=g.call(this,M,x)||this;var S=t(m);return S._initContainer(),S._initStyle(),S.render(),m}return y.clear=function(){var x=this;x.canvas.clear(),x.bgChart&&x.bgChart.destroy(),x.bgChart=null,x.scale=null,x.canvas.draw()},y.repaint=function(){var x=this;x.clear(),x.render()},y.render=function(){var x=this;x._initWidth(),x._initCanvas(),x._initBackground(),x._initSlider(),x._bindEvent(),x.canvas.draw()},y.destroy=function(){var x=this;clearTimeout(x.resizeTimer);var m=x.rangeElement;m.off("sliderchange"),x.bgChart&&x.bgChart.destroy(),x.canvas.destroy();for(var S=x.domContainer;S.hasChildNodes();)S.removeChild(S.firstChild);window.removeEventListener("resize",r.getWrapBehavior(x,"_initForceFitEvent")),x.destroyed=!0},_}(i);E.exports=b},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function u(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var s=e(0),h=e(28),r=e(71),c=e(73),n=["X","Y","XY"],i="X",a=function(o){u(f,o);var l=f.prototype;l.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return s.mix({},b,{processEvent:"mousewheel",type:i,stepRatio:.05,stepByField:{},minScale:1,maxScale:4,catStep:2,limitRange:{},originScaleDefsByField:{}})};function f(v,b){var g;g=o.call(this,v,b)||this;var y=t(g);y.chart=b,y.type=y.type.toUpperCase();var _=y.data=b.get("data"),M=b.getYScales(),x=b.getXScale();M.push(x);var m=b.get("scaleController");return M.forEach(function(S){var P=S.field,A=m.defs[P]||{};y.limitRange[P]=c(_,S),y.originScaleDefsByField[P]=s.mix(A,{nice:!!A.nice}),S.isLinear?y.stepByField[P]=(S.max-S.min)*y.stepRatio:y.stepByField[P]=y.catStep}),n.includes(y.type)||(y.type=i),g}return l._applyScale=function(b,g,y,_){y===void 0&&(y=0);var M=this,x=M.chart,m=M.stepByField;if(b.isLinear){var S=b.min,P=b.max,A=b.field,O=1-y,R=m[A]*g,H=S+R*y,N=P-R*O;if(N>H){var K=r(x,A);x.scale(A,s.mix({},K,{nice:!1,min:H,max:N}))}}else{var V=b.field,k=b.values,Z=M.chart,X=Z.get("coord"),at=r(Z,V),pt=M.limitRange[V],gt=pt.length,ft=M.maxScale,Rt=M.minScale,Nt=gt/ft,Dt=gt/Rt,St=k.length,xt=X.invertPoint(_),Ot=xt.x,it=St-g*this.catStep,At=parseInt(it*Ot),z=it+At;if(g>0&&St>=Nt){var q=At,mt=z;z>St&&(mt=St-1,q=St-it);var et=k.slice(q,mt);Z.scale(V,s.mix({},at,{values:et}))}else if(g<0&&St<=Dt){var st=pt.indexOf(k[0]),bt=pt.indexOf(k[St-1]),Y=Math.max(0,st-At),rt=Math.min(bt+z,gt),ot=pt.slice(Y,rt);Z.scale(V,s.mix({},at,{values:ot}))}}},l.process=function(b){var g=this,y=g.chart,_=g.type,M=y.get("coord"),x=b.deltaY,m=M.invertPoint(b);if(x){g.onZoom&&g.onZoom(x,m,g),x>0?g.onZoomin&&g.onZoomin(x,m,g):g.onZoomout&&g.onZoomout(x,m,g);var S=x/Math.abs(x);if(_.indexOf("X")>-1&&g._applyScale(y.getXScale(),S,m.x,b),_.indexOf("Y")>-1){var P=y.getYScales();P.forEach(function(A){g._applyScale(A,S,m.y,b)})}}y.repaint()},l.reset=function(){var b=this,g=b.view,y=b.originScaleDefsByField,_=g.getYScales(),M=g.getXScale();_.push(M),_.forEach(function(x){if(x.isLinear){var m=x.field;g.scale(m,y[m])}}),g.repaint()},f}(h);E.exports=a},function(E,T,e){var t,u,s=e(0),h=e(131),r="g2-tooltip",c="g2-legend",n=s.deepMix({},h,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(t={},t[""+c]={color:"#D9D9D9"},t),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(u={},u[""+r]={color:"#D9D9D9",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0px 0px 2px #000"},u),tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});E.exports=n},function(E,T,e){var t=e(1),u=e(135),s=e(134),h=e(332),r=e(337),c=function n(i){n.superclass.constructor.call(this,i)};c.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},t.extend(c,s),t.augment(c,{init:function(){c.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(i,a){if(i)if(t.isEmpty(i._getEvents())){var o=i.get("parent");if(o&&!a.propagationStopped)return this.getEmitter(o,a)}else return i},_getEventObj:function(i,a,o,l){var f=new u(i,a,!0,!0);return f.x=o.x,f.y=o.y,f.clientX=a.clientX,f.clientY=a.clientY,f.currentTarget=l,f.target=l,f},_triggerEvent:function(i,a){var o=this.getPointByClient(a.clientX,a.clientY),l=this.getShape(o.x,o.y,a),f=this.get("el"),v;if(i==="mousemove"){var b=this.get("preShape");if(b&&b!==l){var g=this._getEventObj("mouseleave",a,o,b);v=this.getEmitter(b,a),v&&v.emit("mouseleave",g),f.style.cursor="default"}if(l){var y=this._getEventObj("mousemove",a,o,l);if(v=this.getEmitter(l,a),v&&v.emit("mousemove",y),b!==l){var _=this._getEventObj("mouseenter",a,o,l);v&&v.emit("mouseenter",_,a)}}else{var M=this._getEventObj("mousemove",a,o,this);this.emit("mousemove",M)}this.set("preShape",l)}else{var x=this._getEventObj(i,a,o,l||this);v=this.getEmitter(l,a),v&&v!==this&&v.emit(i,x),this.emit(i,x)}l&&!l.get("destroyed")&&(f.style.cursor=l.attr("cursor")||"default")},_registEvents:function(){var i=this,a=i.get("el"),o=["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"];t.each(o,function(l){a.addEventListener(l,function(f){i._triggerEvent(l,f)},!1)}),a.addEventListener("touchstart",function(l){t.isEmpty(l.touches)||i._triggerEvent("touchstart",l.touches[0])},!1),a.addEventListener("touchmove",function(l){t.isEmpty(l.touches)||i._triggerEvent("touchmove",l.touches[0])},!1),a.addEventListener("touchend",function(l){t.isEmpty(l.changedTouches)||i._triggerEvent("touchend",l.changedTouches[0])},!1)},_scale:function(){var i=this.get("pixelRatio");this.scale(i,i)},_setGlobalParam:function(){var i=this.get("pixelRatio");i||this.set("pixelRatio",t.getRatio());var a=r[this.get("renderer")||"canvas"];this._cfg.renderer=a,this._cfg.canvas=this;var o=new h(this);this._cfg.timeline=o},_setContainer:function(){var i=this.get("containerId"),a=this.get("containerDOM");a||(a=document.getElementById(i),this.set("containerDOM",a)),t.modifyCSS(a,{position:"relative"})},_initPainter:function(){var i=this.get("containerDOM"),a=new this._cfg.renderer.painter(i);this._cfg.painter=a,this._cfg.canvasDOM=this._cfg.el=a.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var i=this.get("canvasDOM"),a=this.get("widthCanvas"),o=this.get("heightCanvas"),l=this.get("widthStyle"),f=this.get("heightStyle");i.style.width=l,i.style.height=f,i.setAttribute("width",a),i.setAttribute("height",o)},getWidth:function(){var i=this.get("pixelRatio"),a=this.get("width");return a*i},getHeight:function(){var i=this.get("pixelRatio"),a=this.get("height");return a*i},changeSize:function(i,a){var o=this.get("pixelRatio"),l=i*o,f=a*o;this.set("widthCanvas",l),this.set("heightCanvas",f),this.set("widthStyle",i+"px"),this.set("heightStyle",a+"px"),this.set("width",i),this.set("height",a),this._resize()},getPointByClient:function(i,a){var o=this.get("el"),l=this.get("pixelRatio")||1,f=o.getBoundingClientRect();return{x:(i-f.left)*l,y:(a-f.top)*l}},getClientByPoint:function(i,a){var o=this.get("el"),l=o.getBoundingClientRect(),f=this.get("pixelRatio")||1;return{clientX:i/f+l.left,clientY:a/f+l.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(i,a,o){return arguments.length===3&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,i,a,o):c.superclass.getShape.call(this,i,a)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var i=this._cfg,a=i.containerDOM,o=i.canvasDOM;o&&a&&a.removeChild(o),i.timeline.stop(),c.superclass.destroy.call(this)}}),E.exports=c},function(E,T,e){var t=e(1),u={delay:"delay",rotate:"rotate"},s={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};function h(n,i){var a={},o=i._attrs;for(var l in n.attrs)a[l]=o[l];return a}function r(n,i){var a={matrix:null,attrs:{}},o=i._attrs;for(var l in n)if(l==="transform")a.matrix=t.transform(i.getMatrix(),n[l]);else if(l==="rotate")a.matrix=t.transform(i.getMatrix(),[["r",n[l]]]);else if(l==="matrix")a.matrix=n[l];else{if(s[l]&&/^[r,R,L,l]{1}[\s]*\(/.test(n[l]))continue;!u[l]&&o[l]!==n[l]&&(a.attrs[l]=n[l])}return a}function c(n,i){var a=i.delay,o=Object.prototype.hasOwnProperty;return t.each(i.toAttrs,function(l,f){t.each(n,function(v){a<v.startTime+v.duration&&o.call(v.toAttrs,f)&&(delete v.toAttrs[f],delete v.fromAttrs[f])})}),i.toMatrix&&t.each(n,function(l){a<l.startTime+l.duration&&l.toMatrix&&delete l.toMatrix}),n}E.exports={animate:function(i,a,o,l,f){f===void 0&&(f=0);var v=this;v.set("animating",!0);var b=v.get("timeline");b||(b=v.get("canvas").get("timeline"),v.setSilent("timeline",b));var g=v.get("animators")||[];b._timer||b.initTimer(),t.isNumber(l)&&(f=l,l=null),t.isFunction(o)?(l=o,o="easeLinear"):o=o||"easeLinear";var y=r(i,v),_={fromAttrs:h(y,v),toAttrs:y.attrs,fromMatrix:t.clone(v.getMatrix()),toMatrix:y.matrix,duration:a,easing:o,callback:l,delay:f,startTime:b.getTime(),id:t.uniqueId()};g.length>0?g=c(g,_):b.addAnimator(v),g.push(_),v.setSilent("animators",g),v.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var i=this,a=this.get("animators");t.each(a,function(o){i.attr(o.toAttrs),o.toMatrix&&i.attr("matrix",o.toMatrix),o.callback&&o.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var i=this,a=i.get("timeline");return i.setSilent("pause",{isPaused:!0,pauseTime:a.getTime()}),i},resumeAnimate:function(){var i=this,a=i.get("timeline"),o=a.getTime(),l=i.get("animators"),f=i.get("pause").pauseTime;return t.each(l,function(v){v.startTime=v.startTime+(o-f),v._paused=!1,v._pauseTime=null}),i.setSilent("pause",{isPaused:!1}),i.setSilent("animators",l),i}}},function(E,T,e){var t=e(1);E.exports={canFill:!1,canStroke:!1,initAttrs:function(s){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(t.assign(this.getDefaultAttrs(),s)),this},getDefaultAttrs:function(){return{}},attr:function(s,h){var r=this;if(arguments.length===0)return r._attrs;if(t.isObject(s)){for(var c in s)this._setAttr(c,s[c]);return r.clearBBox(),this._cfg.hasUpdate=!0,r}return arguments.length===2?(this._setAttr(s,h),r.clearBBox(),this._cfg.hasUpdate=!0,r):r._attrs[s]},_setAttr:function(s,h){var r=this,c=this._attrs;if(c[s]=h,s==="fill"||s==="stroke"){c[s+"Style"]=h;return}if(s==="opacity"){c.globalAlpha=h;return}if(s==="clip"&&h){r._setClip(h);return}if(s==="path"&&r._afterSetAttrPath){r._afterSetAttrPath(h);return}if(s==="transform"){r.transform(h);return}s==="rotate"&&r.rotateAtStart(h)},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(s){s._cfg.renderer=this._cfg.renderer,s._cfg.canvas=this._cfg.canvas,s._cfg.parent=this._cfg.parent,s.hasFill=function(){return!0}}}},function(E,T,e){var t=e(1),u=e(76),s={arc:e(47),ellipse:e(143),line:e(48)},h=t.createDom('<canvas width="500" height="500"></canvas>'),r=h.getContext("2d");function c(S,P,A){return A.createPath(r),r.isPointInPath(S,P)}var n=function(P,A){var O=this._attrs,R=O.x,H=O.y,N=O.r,K=O.startAngle,V=O.endAngle,k=O.clockwise,Z=this.getHitLineWidth();return this.hasStroke()?u.arcline(R,H,N,K,V,k,Z,P,A):!1},i=function(P,A){var O=this._attrs,R=O.x,H=O.y,N=O.r,K=this.getHitLineWidth(),V=this.hasFill(),k=this.hasStroke();return V&&k?u.circle(R,H,N,P,A)||u.arcline(R,H,N,0,Math.PI*2,!1,K,P,A):V?u.circle(R,H,N,P,A):k?u.arcline(R,H,N,0,Math.PI*2,!1,K,P,A):!1},a=function(P,A){var O=this._attrs,R=this.hasFill(),H=this.hasStroke(),N=O.x,K=O.y,V=O.rx,k=O.ry,Z=this.getHitLineWidth(),X=V>k?V:k,at=V>k?1:V/k,pt=V>k?k/V:1,gt=[P,A,1],ft=[1,0,0,0,1,0,0,0,1];t.mat3.scale(ft,ft,[at,pt]),t.mat3.translate(ft,ft,[N,K]);var Rt=t.mat3.invert([],ft);return t.vec3.transformMat3(gt,gt,Rt),R&&H?u.circle(0,0,X,gt[0],gt[1])||u.arcline(0,0,X,0,Math.PI*2,!1,Z,gt[0],gt[1]):R?u.circle(0,0,X,gt[0],gt[1]):H?u.arcline(0,0,X,0,Math.PI*2,!1,Z,gt[0],gt[1]):!1},o=function(P,A){var O=this,R=O.hasFill(),H=O.hasStroke(),N=O._attrs,K=N.x,V=N.y,k=N.rs,Z=N.re,X=N.startAngle,at=N.endAngle,pt=N.clockwise,gt=[1,0],ft=[P-K,A-V],Rt=t.vec2.angleTo(gt,ft);function Nt(){var St=s.arc.nearAngle(Rt,X,at,pt);if(t.isNumberEqual(Rt,St)){var xt=t.vec2.squaredLength(ft);if(k*k<=xt&&xt<=Z*Z)return!0}return!1}function Dt(){var St=O.getHitLineWidth(),xt={x:Math.cos(X)*k+K,y:Math.sin(X)*k+V},Ot={x:Math.cos(X)*Z+K,y:Math.sin(X)*Z+V},it={x:Math.cos(at)*k+K,y:Math.sin(at)*k+V},At={x:Math.cos(at)*Z+K,y:Math.sin(at)*Z+V};return!!(u.line(xt.x,xt.y,Ot.x,Ot.y,St,P,A)||u.line(it.x,it.y,At.x,At.y,St,P,A)||u.arcline(K,V,k,X,at,pt,St,P,A)||u.arcline(K,V,Z,X,at,pt,St,P,A))}return R&&H?Nt()||Dt():R?Nt():H?Dt():!1},l=function(P,A){var O=this._attrs;if(this.get("toDraw")||!O.img)return!1;(!this._cfg.attrs||this._cfg.attrs.img!==O.img)&&this._setAttrImg();var R=O.x,H=O.y,N=O.width,K=O.height;return u.rect(R,H,N,K,P,A)},f=function(P,A){var O=this._attrs,R=O.x1,H=O.y1,N=O.x2,K=O.y2,V=this.getHitLineWidth();return this.hasStroke()?u.line(R,H,N,K,V,P,A):!1},v=function(P,A){var O=this,R=O.get("segments"),H=O.hasFill(),N=O.hasStroke();function K(){if(!t.isEmpty(R)){for(var V=O.getHitLineWidth(),k=0,Z=R.length;k<Z;k++)if(R[k].isInside(P,A,V))return!0;return!1}}return H&&N?c(P,A,O)||K():H?c(P,A,O):N?K():!1},b=function(P,A){var O=this,R=O.hasFill(),H=O.hasStroke();function N(){var K=O._attrs,V=K.points;if(V.length<2)return!1;var k=O.getHitLineWidth(),Z=V.slice(0);return V.length>=3&&Z.push(V[0]),u.polyline(Z,k,P,A)}return R&&H?c(P,A,O)||N():R?c(P,A,O):H?N():!1},g=function(P,A){var O=this._attrs,R=O.x,H=O.y,N=O.radius||O.r,K=this.getHitLineWidth();return u.circle(R,H,N+K/2,P,A)},y=function(P,A){var O=this,R=O._attrs;if(O.hasStroke()){var H=R.points;if(H.length<2)return!1;var N=R.lineWidth;return u.polyline(H,N,P,A)}return!1},_=function(P,A){var O=this,R=O.hasFill(),H=O.hasStroke();function N(){var K=O._attrs,V=K.x,k=K.y,Z=K.width,X=K.height,at=K.radius,pt=O.getHitLineWidth();if(at===0){var gt=pt/2;return u.line(V-gt,k,V+Z+gt,k,pt,P,A)||u.line(V+Z,k-gt,V+Z,k+X+gt,pt,P,A)||u.line(V+Z+gt,k+X,V-gt,k+X,pt,P,A)||u.line(V,k+X+gt,V,k-gt,pt,P,A)}return u.line(V+at,k,V+Z-at,k,pt,P,A)||u.line(V+Z,k+at,V+Z,k+X-at,pt,P,A)||u.line(V+Z-at,k+X,V+at,k+X,pt,P,A)||u.line(V,k+X-at,V,k+at,pt,P,A)||u.arcline(V+Z-at,k+at,at,1.5*Math.PI,2*Math.PI,!1,pt,P,A)||u.arcline(V+Z-at,k+X-at,at,0,.5*Math.PI,!1,pt,P,A)||u.arcline(V+at,k+X-at,at,.5*Math.PI,Math.PI,!1,pt,P,A)||u.arcline(V+at,k+at,at,Math.PI,1.5*Math.PI,!1,pt,P,A)}return R&&H?c(P,A,O)||N():R?c(P,A,O):H?N():!1},M=function(P,A){var O=this,R=O.getBBox();if(O.hasFill()||O.hasStroke())return u.box(R.minX,R.maxX,R.minY,R.maxY,P,A)},x=function(P,A){if(!this._cfg.el)return!1;var O=this._cfg.el.getBBox();return u.box(O.x,O.x+O.width,O.y,O.y+O.height,P,A)},m={arc:n,circle:i,dom:x,ellipse:a,fan:o,image:l,line:f,path:v,marker:g,polygon:b,polyline:y,rect:_,text:M};E.exports={isPointInPath:function(P,A){var O=m[this.type];return O?O.call(this,P,A):!1}}},function(E,T,e){var t=e(1),u=e(77),s=e(103),h=e(199),r=e(453),c=r.interpolate,n=r.interpolateArray,i=function(f){this._animators=[],this._current=0,this._timer=null,this.canvas=f};function a(l,f,v){var b={},g=f.toAttrs,y=f.fromAttrs,_=f.toMatrix;if(!l.get("destroyed")){var M;for(var x in g)if(!t.isEqual(y[x],g[x]))if(x==="path"){var m=g[x],S=y[x];m.length>S.length?(m=u.parsePathString(g[x]),S=u.parsePathString(y[x]),S=u.fillPathByDiff(S,m),S=u.formatPath(S,m),f.fromAttrs.path=S,f.toAttrs.path=m):f.pathFormatted||(m=u.parsePathString(g[x]),S=u.parsePathString(y[x]),S=u.formatPath(S,m),f.fromAttrs.path=S,f.toAttrs.path=m,f.pathFormatted=!0),b[x]=[];for(var P=0;P<m.length;P++){for(var A=m[P],O=S[P],R=[],H=0;H<A.length;H++)t.isNumber(A[H])&&O&&t.isNumber(O[H])?(M=c(O[H],A[H]),R.push(M(v))):R.push(A[H]);b[x].push(R)}}else M=c(y[x],g[x]),b[x]=M(v);if(_){var N=n(f.fromMatrix,_),K=N(v);l.setMatrix(K)}l.attr(b)}}function o(l,f,v){var b=f.startTime;if(v<b+f.delay||f.isPaused)return!1;var g,y=f.duration,_=f.easing;if(v=v-b-f.delay,f.toAttrs.repeat)g=v%y/y,g=h[_](g);else if(g=v/y,g<1)g=h[_](g);else return l.attr(f.toAttrs),f.toMatrix&&l.setMatrix(f.toMatrix),!0;return a(l,f,g),!1}t.augment(i,{initTimer:function(){var f=this,v=this,b=!1,g,y,_;v._timer=s.timer(function(M){if(v._current=M,f._animators.length>0){for(var x=f._animators.length-1;x>=0;x--){if(g=f._animators[x],g.get("destroyed")){v.removeAnimator(x);continue}if(!g.get("pause").isPaused){y=g.get("animators");for(var m=y.length-1;m>=0;m--)_=y[m],b=o(g,_,M),b&&(y.splice(m,1),b=!1,_.callback&&_.callback())}y.length===0&&v.removeAnimator(x)}f.canvas.draw()}})},addAnimator:function(f){this._animators.push(f)},removeAnimator:function(f){this._animators.splice(f,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(f){f.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),E.exports=i},function(E,T,e){var t=e(1);function u(r){return r[0]===1&&r[1]===0&&r[3]===0&&r[4]===1&&r[6]===0&&r[7]===0}function s(r){return r[1]===0&&r[3]===0&&r[6]===0&&r[7]===0}function h(r,c){u(c)||(s(c)?(r[0]*=c[0],r[4]*=c[4]):t.mat3.multiply(r,r,c))}E.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(c,n){var i=this._attrs.matrix;return t.mat3.translate(i,i,[c,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotate:function(c){var n=this._attrs.matrix;return t.mat3.rotate(n,n,c),this.clearTotalMatrix(),this.attr("matrix",n),this},scale:function(c,n){var i=this._attrs.matrix;return t.mat3.scale(i,i,[c,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotateAtStart:function(c){var n=this._attrs.x||this._cfg.attrs.x,i=this._attrs.y||this._cfg.attrs.y;return Math.abs(c)>Math.PI*2&&(c=c/180*Math.PI),this.transform([["t",-n,-i],["r",c],["t",n,i]])},move:function(c,n){var i=this.get("x")||0,a=this.get("y")||0;return this.translate(c-i,n-a),this.set("x",c),this.set("y",n),this},transform:function(c){var n=this,i=this._attrs.matrix;return t.each(c,function(a){switch(a[0]){case"t":n.translate(a[1],a[2]);break;case"s":n.scale(a[1],a[2]);break;case"r":n.rotate(a[1]);break;case"m":n.attr("matrix",t.mat3.multiply([],i,a[1])),n.clearTotalMatrix();break;default:break}}),n},setTransform:function(c){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(c)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(c){return this.attr("matrix",c),this.clearTotalMatrix(),this},apply:function(c,n){var i;return n?i=this._getMatrixByRoot(n):i=this.attr("matrix"),t.vec3.transformMat3(c,c,i),this},_getMatrixByRoot:function(c){var n=this;c=c||n;for(var i=n,a=[];i!==c;)a.unshift(i),i=i.get("parent");a.unshift(i);var o=[1,0,0,0,1,0,0,0,1];return t.each(a,function(l){t.mat3.multiply(o,l.attr("matrix"),o)}),o},getTotalMatrix:function(){var c=this._cfg.totalMatrix;if(!c){c=[1,0,0,0,1,0,0,0,1];var n=this._cfg.parent;if(n){var i=n.getTotalMatrix();h(c,i)}h(c,this.attr("matrix")),this._cfg.totalMatrix=c}return c},clearTotalMatrix:function(){},invert:function(c){var n=this.getTotalMatrix();if(s(n))c[0]/=n[0],c[1]/=n[4];else{var i=t.mat3.invert([],n);i&&t.vec3.transformMat3(c,c,i)}return this},resetTransform:function(c){var n=this.attr("matrix");u(n)||c.transform(n[0],n[1],n[3],n[4],n[6],n[7])}}},function(E,T,e){E.exports={painter:e(335)}},function(E,T,e){var t=e(1),u=e(336),s=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],h=function(){function r(n){if(!n)return null;var i=t.uniqueId("canvas_"),a=t.createDom('<canvas id="'+i+'"></canvas>');return n.appendChild(a),this.type="canvas",this.canvas=a,this.context=a.getContext("2d"),this.toDraw=!1,this}var c=r.prototype;return c.beforeDraw=function(){var i=this.canvas;this.context&&this.context.clearRect(0,0,i.width,i.height)},c.draw=function(i){var a=this;function o(){a.animateHandler=t.requestAnimationFrame(function(){a.animateHandler=void 0,a.toDraw&&o()}),a.beforeDraw();try{a._drawGroup(i)}catch(l){console.warn("error in draw canvas, detail as:"),console.warn(l),a.toDraw=!1}a.toDraw=!1}a.animateHandler?a.toDraw=!0:o()},c.drawSync=function(i){this.beforeDraw(),this._drawGroup(i)},c._drawGroup=function(i){if(!(i._cfg.removed||i._cfg.destroyed||!i._cfg.visible)){var a=this,o=i._cfg.children,l=null;this.setContext(i);for(var f=0;f<o.length;f++)l=o[f],o[f].isGroup?a._drawGroup(l):a._drawShape(l);this.restoreContext(i)}},c._drawShape=function(i){i._cfg.removed||i._cfg.destroyed||!i._cfg.visible||(this.setContext(i),i.drawInner(this.context),this.restoreContext(i),i._cfg.attrs=i._attrs,i._cfg.hasUpdate=!1)},c.setContext=function(i){var a=this.context,o=i._attrs.clip;a.save(),o&&(o.resetTransform(a),o.createPath(a),a.clip()),this.resetContext(i),i.resetTransform(a)},c.restoreContext=function(){this.context.restore()},c.resetContext=function(i){var a=this.context,o=i._attrs;if(!i.isGroup){for(var l in o)if(s.indexOf(l)>-1){var f=o[l];l==="fillStyle"&&(f=u.parseStyle(f,i,a)),l==="strokeStyle"&&(f=u.parseStyle(f,i,a)),l==="lineDash"&&a.setLineDash?t.isArray(f)?a.setLineDash(f):t.isString(f)&&a.setLineDash(f.split(" ")):a[l]=f}}},r}();E.exports=h},function(E,T,e){var t=e(1),u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,h=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,r=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,c=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,n=/[\d.]+:(#[^\s]+|[^\)]+\))/ig,i={};function a(v,b){var g=v.match(n);t.each(g,function(y){y=y.split(":"),b.addColorStop(y[0],y[1])})}function o(v,b,g){var y=h.exec(v),_=t.mod(t.toRadian(parseFloat(y[1])),Math.PI*2),M=y[2],x=b.getBBox(),m,S;_>=0&&_<.5*Math.PI?(m={x:x.minX,y:x.minY},S={x:x.maxX,y:x.maxY}):.5*Math.PI<=_&&_<Math.PI?(m={x:x.maxX,y:x.minY},S={x:x.minX,y:x.maxY}):Math.PI<=_&&_<1.5*Math.PI?(m={x:x.maxX,y:x.maxY},S={x:x.minX,y:x.minY}):(m={x:x.minX,y:x.maxY},S={x:x.maxX,y:x.minY});var P=Math.tan(_),A=P*P,O=(S.x-m.x+P*(S.y-m.y))/(A+1)+m.x,R=P*(S.x-m.x+P*(S.y-m.y))/(A+1)+m.y,H=g.createLinearGradient(m.x,m.y,O,R);return a(M,H),H}function l(v,b,g){var y=r.exec(v),_=parseFloat(y[1]),M=parseFloat(y[2]),x=parseFloat(y[3]),m=y[4];if(x===0){var S=m.match(n);return S[S.length-1].split(":")[1]}var P=b.getBBox(),A=P.maxX-P.minX,O=P.maxY-P.minY,R=Math.sqrt(A*A+O*O)/2,H=g.createRadialGradient(P.minX+A*_,P.minY+O*M,x*R,P.minX+A/2,P.minY+O/2,R);return a(m,H),H}function f(v,b,g){if(b.get("patternSource")&&b.get("patternSource")===v)return b.get("pattern");var y,_,M=c.exec(v),x=M[1],m=M[2];function S(){y=g.createPattern(_,x),b.setSilent("pattern",y),b.setSilent("patternSource",v)}switch(x){case"a":x="repeat";break;case"x":x="repeat-x";break;case"y":x="repeat-y";break;case"n":x="no-repeat";break;default:x="no-repeat"}return _=new Image,m.match(/^data:/i)||(_.crossOrigin="Anonymous"),_.src=m,_.complete?S():(_.onload=S,_.src=_.src),y}E.exports={parsePath:function(b){if(b=b||[],t.isArray(b))return b;if(t.isString(b))return b=b.match(u),t.each(b,function(g,y){if(g=g.match(s),g[0].length>1){var _=g[0].charAt(0);g.splice(1,0,g[0].substr(1)),g[0]=_}t.each(g,function(M,x){isNaN(M)||(g[x]=+M)}),b[y]=g}),b},parseStyle:function(b,g,y){if(t.isString(b)){if(b[1]==="("||b[2]==="("){if(b[0]==="l")return o(b,g,y);if(b[0]==="r")return l(b,g,y);if(b[0]==="p")return f(b,g,y)}return b}},numberToColor:function(b){var g=i[b];if(!g){for(var y=b.toString(16),_=y.length;_<6;_++)y="0"+y;g="#"+y,i[b]=g}return g}}},function(E,T,e){E.exports={canvas:e(334),svg:e(345)}},function(E,T,e){var t=e(1),u=e(341),s=e(343),h=e(339),r=e(340),c=e(342),n=function(){function i(o){var l=document.createElementNS("http://www.w3.org/2000/svg","defs"),f=t.uniqueId("defs_");l.id=f,o.appendChild(l),this.children=[],this.defaultArrow={},this.el=l,this.canvas=o}var a=i.prototype;return a.find=function(l,f){for(var v=this.children,b=null,g=0;g<v.length;g++)if(v[g].match(l,f)){b=v[g].id;break}return b},a.findById=function(l){for(var f=this.children,v=null,b=0;b<f.length;b++)if(f[b].id===l){v=f[b];break}return v},a.add=function(l){this.children.push(l),l.canvas=this.canvas,l.parent=this},a.getDefaultArrow=function(l,f){var v=l.stroke||l.strokeStyle;if(this.defaultArrow[v])return this.defaultArrow[v].id;var b=new h(l,f);return this.defaultArrow[v]=b,this.el.appendChild(b.el),b.id},a.addGradient=function(l){var f=new u(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addArrow=function(l,f){var v=new h(l,f);return this.el.appendChild(v.el),v.id},a.addShadow=function(l){var f=new s(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addPattern=function(l){var f=new c(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addClip=function(l){var f=new r(l);return this.el.appendChild(f.el),this.add(f),f.id},i}();E.exports=n},function(E,T,e){var t=e(1),u=function(){function s(r,c){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=t.uniqueId("marker_");n.setAttribute("id",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",r.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i,this.cfg=r[c==="marker-start"?"startArrow":"endArrow"],this.stroke=r.stroke||"#000",this.cfg===!0?this._setDefaultPath(c,a):this._setMarker(r.lineWidth,a),this}var h=s.prototype;return h.match=function(){return!1},h._setDefaultPath=function(c,n){var i=this.el;n.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),i.setAttribute("refX",3),i.setAttribute("refY",3)},h._setMarker=function(c,n){var i=this.el,a=this.cfg.path,o=this.cfg.d;t.isArray(a)&&(a=a.map(function(l){return l.join(" ")}).join("")),n.setAttribute("d",a),i.appendChild(n),o&&i.setAttribute("refX",o/c)},h.update=function(c){var n=this.child;n.attr?n.attr("fill",c):n.setAttribute("fill",c)},s}();E.exports=u},function(E,T,e){var t=e(1),u=function(){function s(r){this.type="clip";var c=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=c,this.id=t.uniqueId("clip_"),c.id=this.id;var n=r._cfg.el;return c.appendChild(n.cloneNode(!0)),this.cfg=r,this}var h=s.prototype;return h.match=function(){return!1},h.remove=function(){var c=this.el;c.parentNode.removeChild(c)},s}();E.exports=u},function(E,T,e){var t=e(1),u=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function r(a){var o=a.match(h);if(!o)return"";var l="";return o.sort(function(f,v){return f=f.split(":"),v=v.split(":"),Number(f[0])-Number(v[0])}),t.each(o,function(f){f=f.split(":"),l+='<stop offset="'+f[0]+'" stop-color="'+f[1]+'"></stop>'}),l}function c(a,o){var l=u.exec(a),f=t.mod(t.toRadian(parseFloat(l[1])),Math.PI*2),v=l[2],b,g;f>=0&&f<.5*Math.PI?(b={x:0,y:0},g={x:1,y:1}):.5*Math.PI<=f&&f<Math.PI?(b={x:1,y:0},g={x:0,y:1}):Math.PI<=f&&f<1.5*Math.PI?(b={x:1,y:1},g={x:0,y:0}):(b={x:0,y:1},g={x:1,y:0});var y=Math.tan(f),_=y*y,M=(g.x-b.x+y*(g.y-b.y))/(_+1)+b.x,x=y*(g.x-b.x+y*(g.y-b.y))/(_+1)+b.y;o.setAttribute("x1",b.x),o.setAttribute("y1",b.y),o.setAttribute("x2",M),o.setAttribute("y2",x),o.innerHTML=r(v)}function n(a,o){var l=s.exec(a),f=parseFloat(l[1]),v=parseFloat(l[2]),b=parseFloat(l[3]),g=l[4];o.setAttribute("cx",f),o.setAttribute("cy",v),o.setAttribute("r",b),o.innerHTML=r(g)}var i=function(){function a(l){var f=null,v=t.uniqueId("gradient_");return l.toLowerCase()[0]==="l"?(f=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),c(l,f)):(f=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),n(l,f)),f.setAttribute("id",v),this.el=f,this.id=v,this.cfg=l,this}var o=a.prototype;return o.match=function(f,v){return this.cfg===v},a}();E.exports=i},function(E,T,e){var t=e(1),u=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=function(){function h(c){var n=document.createElementNS("http://www.w3.org/2000/svg","pattern");n.setAttribute("patternUnits","userSpaceOnUse");var i=document.createElementNS("http://www.w3.org/2000/svg","image");n.appendChild(i);var a=t.uniqueId("pattern_");n.id=a,this.el=n,this.id=a,this.cfg=c;var o=u.exec(c),l=o[2];i.setAttribute("href",l);var f=new Image;l.match(/^data:/i)||(f.crossOrigin="Anonymous"),f.src=l;function v(){console.log(f.width,f.height),n.setAttribute("width",f.width),n.setAttribute("height",f.height)}return f.complete?v():(f.onload=v,f.src=f.src),this}var r=h.prototype;return r.match=function(n,i){return this.cfg===i},h}();E.exports=s},function(E,T,e){var t=e(1),u={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},s={x:"-40%",y:"-40%",width:"200%",height:"200%"},h=function(){function r(n){this.type="filter";var i=document.createElementNS("http://www.w3.org/2000/svg","filter");return t.each(s,function(a,o){i.setAttribute(o,a)}),this.el=i,this.id=t.uniqueId("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,i),this}var c=r.prototype;return c.match=function(i,a){if(this.type!==i)return!1;var o=!0,l=this.cfg;return t.each(Object.keys(l),function(f){if(l[f]!==a[f])return o=!1,!1}),o},c.update=function(i,a){var o=this.cfg;return o[u[i]]=a,this._parseShadow(o,this.el),this},c._parseShadow=function(i,a){var o=`<feDropShadow 
      dx="`+(i.dx||0)+`" 
      dy="`+(i.dy||0)+`" 
      stdDeviation="`+(i.blur?i.blur/10:0)+`"
      flood-color="`+(i.color?i.color:"#000")+`"
      flood-opacity="`+(i.opacity?i.opacity:1)+`"
      />`;a.innerHTML=o},r}();E.exports=h},function(E,T){var e={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};E.exports=function(u,s,h){var r=h.target||h.srcElement;if(!e[r.tagName]){for(var c=r.parentNode;c&&!e[c.tagName];)c=c.parentNode;r=c}return this._cfg.el===r?this:this.find(function(n){return n._cfg&&n._cfg.el===r})}},function(E,T,e){E.exports={painter:e(346),getShape:e(344)}},function(E,T,e){var t=e(1),u=e(37),s=u.parseRadius,h=e(74),r=e(338),c={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},n=.3,i={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},a={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o={left:"left",start:"left",center:"middle",right:"end",end:"end"},l=function(){function f(b){if(!b)return null;var g=t.uniqueId("canvas_"),y=t.createDom('<svg id="'+g+'"></svg>');return b.appendChild(y),this.type="svg",this.canvas=y,this.context=new r(y),this.toDraw=!1,this}var v=f.prototype;return v.draw=function(g){var y=this;function _(){y.animateHandler=t.requestAnimationFrame(function(){y.animateHandler=void 0,y.toDraw&&_()});try{g.resetMatrix(),y._drawGroup(g,!1)}catch(M){console.warn("error in draw canvas, detail as:"),console.warn(M),y.toDraw=!1}y.toDraw=!1}y.animateHandler?y.toDraw=!0:_()},v.drawSync=function(g){this._drawChildren(g,!1)},v._drawGroup=function(g,y){var _=g._cfg;_.removed||_.destroyed||(!_.el&&_.attrs&&(y=!0),_.tobeRemoved&&(t.each(_.tobeRemoved,function(M){M.parentNode&&M.parentNode.removeChild(M)}),_.tobeRemoved=[]),this._drawShape(g,y),_.children&&_.children.length>0&&this._drawChildren(g,y))},v._drawChildren=function(g,y){var _=this,M=g._cfg.children,x;if(!!M){if(g._cfg.el&&!y){var m=g._cfg.el.childNodes.length+1;m!==0&&m!==M.length&&(y=!0)}for(var S=0;S<M.length;S++)x=M[S],x.isGroup?_._drawGroup(x,y):_._drawShape(x,y)}},v._drawShape=function(g,y){var _=this,M=g._attrs,x=g._cfg,m=x.el;if(x.removed||x.destroyed){m&&m.parentNode.removeChild(x.el);return}if(y&&m&&(m.parentNode&&m.parentNode.removeChild(m),m=null),!m&&x.parent&&(_._createDom(g),_._updateShape(g)),m=x.el,x.visible===!1){m.setAttribute("visibility","hidden");return}x.visible&&m.hasAttribute("visibility")&&m.removeAttribute("visibility"),x.hasUpdate&&_._updateShape(g),M.clip&&M.clip._cfg.hasUpdate&&_._updateShape(M.clip)},v._updateShape=function(g){var y=this,_=g._attrs,M=g._cfg.attrs;if(!!M){if(g._cfg.el||y._createDom(g),"clip"in _&&this._setClip(g,_.clip),("shadowOffsetX"in _||"shadowOffsetY"in _||"shadowBlur"in _||"shadowColor"in _)&&this._setShadow(g),g.type==="text"){y._updateText(g);return}g.type==="fan"&&y._updateFan(g),g.type==="marker"&&g._cfg.el.setAttribute("d",y._assembleMarker(_)),g.type==="rect"&&g._cfg.el.setAttribute("d",y._assembleRect(_));for(var x in _)_[x]!==M[x]&&y._setAttribute(g,x,_[x]);g._cfg.attrs=t.deepMix({},g._attrs),g._cfg.hasUpdate=!1}},v._setAttribute=function(g,y,_){var M=g.type,x=g._attrs,m=g._cfg.el,S=this.context;if(!((M==="marker"||M==="rect")&&~["x","y","radius","r"].indexOf(y))){if(~["circle","ellipse"].indexOf(M)&&~["x","y"].indexOf(y)){m.setAttribute("c"+y,parseInt(_,10));return}if(M==="polygon"&&y==="points"){(!_||_.length===0)&&(_=""),t.isArray(_)&&(_=_.map(function(A){return A[0]+","+A[1]}),_=_.join(" ")),m.setAttribute("points",_);return}if(y==="path"&&t.isArray(_)){m.setAttribute("d",this._formatPath(_));return}if(y==="img"){this._setImage(g,_);return}if(y==="transform"){if(!_){m.removeAttribute("transform");return}this._setTransform(g);return}if(y==="rotate"){if(!_){m.removeAttribute("transform");return}this._setTransform(g);return}if(y==="matrix"){this._setTransform(g);return}if(y==="fillStyle"||y==="strokeStyle"){this._setColor(g,y,_);return}if(y!=="clip"){if(~y.indexOf("Arrow")){if(y=i[y],!_)g._cfg[y]=null,m.removeAttribute(y);else{var P=null;typeof _=="boolean"?P=S.getDefaultArrow(x,y):P=S.addArrow(x,y),m.setAttribute(y,"url(#"+P+")"),g._cfg[y]=P}return}y==="html"&&(typeof _=="string"?m.innerHTML=_:(m.innerHTML="",m.appendChild(_))),i[y]&&m.setAttribute(i[y],_)}}},v._createDom=function(g){var y=c[g.type],_=g._attrs;if(!y)throw new Error("the type"+g.type+"is not supported by svg");var M=document.createElementNS("http://www.w3.org/2000/svg",y);return g._cfg.el=M,g._cfg.parent&&g._cfg.parent.get("el").appendChild(M),g._cfg.attrs={},g.type==="text"?(M.setAttribute("paint-order","stroke"),M.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(!_.stroke&&!_.strokeStyle&&M.setAttribute("stroke","none"),!_.fill&&!_.fillStyle&&M.setAttribute("fill","none")),M},v._assembleMarker=function(g){var y=g.r;if(typeof g.r=="undefined"&&(y=g.radius),isNaN(Number(g.x))||isNaN(Number(g.y))||isNaN(Number(y)))return"";var _="";return typeof g.symbol=="function"?_=g.symbol(g.x,g.y,y):_=h.Symbols[g.symbol||"circle"](g.x,g.y,y),t.isArray(_)&&(_=_.map(function(M){return M.join(" ")}).join("")),_},v._assembleRect=function(g){var y=g.x,_=g.y,M=g.width,x=g.height,m=g.radius;if(!m)return"M "+y+","+_+" l "+M+",0 l 0,"+x+" l"+-M+" 0 z";var S=s(m);t.isArray(m)?m.length===1?S.r1=S.r2=S.r3=S.r4=m[0]:m.length===2?(S.r1=S.r3=m[0],S.r2=S.r4=m[1]):m.length===3?(S.r1=m[0],S.r2=S.r4=m[1],S.r3=m[2]):(S.r1=m[0],S.r2=m[1],S.r3=m[2],S.r4=m[3]):S.r1=S.r2=S.r3=S.r4=m;var P=[["M "+(y+S.r1)+","+_],["l "+(M-S.r1-S.r2)+",0"],["a "+S.r2+","+S.r2+",0,0,1,"+S.r2+","+S.r2],["l 0,"+(x-S.r2-S.r3)],["a "+S.r3+","+S.r3+",0,0,1,"+-S.r3+","+S.r3],["l "+(S.r3+S.r4-M)+",0"],["a "+S.r4+","+S.r4+",0,0,1,"+-S.r4+","+-S.r4],["l 0,"+(S.r4+S.r1-x)],["a "+S.r1+","+S.r1+",0,0,1,"+S.r1+","+-S.r1],["z"]];return P.join(" ")},v._formatPath=function(g){return g=g.map(function(y){return y.join(" ")}).join(""),~g.indexOf("NaN")?"":g},v._setTransform=function(g){for(var y=g._attrs.matrix,_=g._cfg.el,M=[],x=0;x<9;x+=3)M.push(y[x]+","+y[x+1]);M=M.join(","),M.indexOf("NaN")===-1?_.setAttribute("transform","matrix("+M+")"):console.warn("invalid matrix:",y)},v._setImage=function(g,y){var _=g._attrs,M=g._cfg.el;if(t.isString(y))M.setAttribute("href",y);else if(y instanceof Image)_.width||(M.setAttribute("width",y.width),g._attrs.width=y.width),_.height||(M.setAttribute("height",y.height),g._attrs.height=y.height),M.setAttribute("href",y.src);else if(y instanceof HTMLElement&&t.isString(y.nodeName)&&y.nodeName.toUpperCase()==="CANVAS")M.setAttribute("href",y.toDataURL());else if(y instanceof ImageData){var x=document.createElement("canvas");x.setAttribute("width",y.width),x.setAttribute("height",y.height),x.getContext("2d").putImageData(y,0,0),_.width||(M.setAttribute("width",y.width),g._attrs.width=y.width),_.height||(M.setAttribute("height",y.height),g._attrs.height=y.height),M.setAttribute("href",x.toDataURL())}},v._updateFan=function(g){function y(Z,X,at){return{x:X*Math.cos(Z)+at.x,y:X*Math.sin(Z)+at.y}}var _=g._attrs,M=g._cfg,x={x:_.x,y:_.y},m=[],S=_.startAngle,P=_.endAngle;t.isNumberEqual(P-S,Math.PI*2)&&(P-=1e-5);var A=y(S,_.re,x),O=y(P,_.re,x),R=P>S?1:0,H=Math.abs(P-S)>Math.PI?1:0,N=_.rs,K=_.re,V=y(S,_.rs,x),k=y(P,_.rs,x);_.rs>0?(m.push("M "+O.x+","+O.y),m.push("L "+k.x+","+k.y),m.push("A "+N+","+N+",0,"+H+","+(R===1?0:1)+","+V.x+","+V.y),m.push("L "+A.x+" "+A.y)):(m.push("M "+x.x+","+x.y),m.push("L "+A.x+","+A.y)),m.push("A "+K+","+K+",0,"+H+","+R+","+O.x+","+O.y),_.rs>0?m.push("L "+k.x+","+k.y):m.push("Z"),M.el.setAttribute("d",m.join(" "))},v._updateText=function(g){var y=this,_=g._attrs,M=g._cfg.attrs,x=g._cfg.el;this._setFont(g);for(var m in _)if(_[m]!==M[m]){if(m==="text"){y._setText(g,""+_[m]);continue}if(m==="fillStyle"||m==="strokeStyle"){this._setColor(g,m,_[m]);continue}if(m==="matrix"){this._setTransform(g);continue}i[m]&&x.setAttribute(i[m],_[m])}g._cfg.attrs=Object.assign({},g._attrs),g._cfg.hasUpdate=!1},v._setFont=function(g){var y=g.get("el"),_=g._attrs,M=_.fontSize;y.setAttribute("alignment-baseline",a[_.textBaseline]||"baseline"),y.setAttribute("text-anchor",o[_.textAlign]||"left"),M&&+M<12&&(_.matrix=[1,0,0,0,1,0,0,0,1],g.transform([["t",-_.x,-_.y],["s",+M/12,+M/12],["t",_.x,_.y]]))},v._setText=function(g,y){var _=g._cfg.el,M=g._attrs.textBaseline||"bottom";if(!y)_.innerHTML="";else if(~y.indexOf(`
`)){var x=g._attrs.x,m=y.split(`
`),S=m.length-1,P="";t.each(m,function(A,O){O===0?M==="alphabetic"?P+='<tspan x="'+x+'" dy="'+-S+'em">'+A+"</tspan>":M==="top"?P+='<tspan x="'+x+'" dy="0.9em">'+A+"</tspan>":M==="middle"?P+='<tspan x="'+x+'" dy="'+-(S-1)/2+'em">'+A+"</tspan>":M==="bottom"?P+='<tspan x="'+x+'" dy="-'+(S+n)+'em">'+A+"</tspan>":M==="hanging"&&(P+='<tspan x="'+x+'" dy="'+(-(S-1)-n)+'em">'+A+"</tspan>"):P+='<tspan x="'+x+'" dy="1em">'+A+"</tspan>"}),_.innerHTML=P}else _.innerHTML=y},v._setClip=function(g,y){var _=g._cfg.el;if(!y){_.removeAttribute("clip-path");return}if(_.hasAttribute("clip-path"))y._cfg.hasUpdate&&this._updateShape(y);else{this._createDom(y),this._updateShape(y);var M=this.context.addClip(y);_.setAttribute("clip-path","url(#"+M+")")}},v._setColor=function(g,y,_){var M=g._cfg.el,x=this.context;if(!_){M.setAttribute(i[y],"none");return}if(_=_.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(_)){var m=x.find("gradient",_);m||(m=x.addGradient(_)),M.setAttribute(i[y],"url(#"+m+")")}else if(/^[p,P]{1}[\s]*\(/.test(_)){var S=x.find("pattern",_);S||(S=x.addPattern(_)),M.setAttribute(i[y],"url(#"+S+")")}else M.setAttribute(i[y],_)},v._setShadow=function(g){var y=g._cfg.el,_=g._attrs,M={dx:_.shadowOffsetX,dy:_.shadowOffsetY,blur:_.shadowBlur,color:_.shadowColor};if(!M.dx&&!M.dy&&!M.blur&&!M.color)y.removeAttribute("filter");else{var x=this.context.find("filter",M);x||(x=this.context.addShadow(M,this)),y.setAttribute("filter","url(#"+x+")")}},f}();E.exports=l},function(E,T,e){var t=e(7);t.Arc=e(136),t.Circle=e(137),t.Dom=e(138),t.Ellipse=e(139),t.Fan=e(140),t.Image=e(141),t.Line=e(142),t.Marker=e(74),t.Path=e(145),t.Polygon=e(146),t.Polyline=e(147),t.Rect=e(148),t.Text=e(149),E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.sub=T.mul=void 0,T.create=h,T.fromMat4=r,T.clone=c,T.copy=n,T.fromValues=i,T.set=a,T.identity=o,T.transpose=l,T.invert=f,T.adjoint=v,T.determinant=b,T.multiply=g,T.translate=y,T.rotate=_,T.scale=M,T.fromTranslation=x,T.fromRotation=m,T.fromScaling=S,T.fromMat2d=P,T.fromQuat=A,T.normalFromMat4=O,T.projection=R,T.str=H,T.frob=N,T.add=K,T.subtract=V,T.multiplyScalar=k,T.multiplyScalarAndAdd=Z,T.exactEquals=X,T.equals=at;var t=e(78),u=s(t);function s(ft){if(ft&&ft.__esModule)return ft;var Rt={};if(ft!=null)for(var Nt in ft)Object.prototype.hasOwnProperty.call(ft,Nt)&&(Rt[Nt]=ft[Nt]);return Rt.default=ft,Rt}function h(){var ft=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(ft[1]=0,ft[2]=0,ft[3]=0,ft[5]=0,ft[6]=0,ft[7]=0),ft[0]=1,ft[4]=1,ft[8]=1,ft}function r(ft,Rt){return ft[0]=Rt[0],ft[1]=Rt[1],ft[2]=Rt[2],ft[3]=Rt[4],ft[4]=Rt[5],ft[5]=Rt[6],ft[6]=Rt[8],ft[7]=Rt[9],ft[8]=Rt[10],ft}function c(ft){var Rt=new u.ARRAY_TYPE(9);return Rt[0]=ft[0],Rt[1]=ft[1],Rt[2]=ft[2],Rt[3]=ft[3],Rt[4]=ft[4],Rt[5]=ft[5],Rt[6]=ft[6],Rt[7]=ft[7],Rt[8]=ft[8],Rt}function n(ft,Rt){return ft[0]=Rt[0],ft[1]=Rt[1],ft[2]=Rt[2],ft[3]=Rt[3],ft[4]=Rt[4],ft[5]=Rt[5],ft[6]=Rt[6],ft[7]=Rt[7],ft[8]=Rt[8],ft}function i(ft,Rt,Nt,Dt,St,xt,Ot,it,At){var z=new u.ARRAY_TYPE(9);return z[0]=ft,z[1]=Rt,z[2]=Nt,z[3]=Dt,z[4]=St,z[5]=xt,z[6]=Ot,z[7]=it,z[8]=At,z}function a(ft,Rt,Nt,Dt,St,xt,Ot,it,At,z){return ft[0]=Rt,ft[1]=Nt,ft[2]=Dt,ft[3]=St,ft[4]=xt,ft[5]=Ot,ft[6]=it,ft[7]=At,ft[8]=z,ft}function o(ft){return ft[0]=1,ft[1]=0,ft[2]=0,ft[3]=0,ft[4]=1,ft[5]=0,ft[6]=0,ft[7]=0,ft[8]=1,ft}function l(ft,Rt){if(ft===Rt){var Nt=Rt[1],Dt=Rt[2],St=Rt[5];ft[1]=Rt[3],ft[2]=Rt[6],ft[3]=Nt,ft[5]=Rt[7],ft[6]=Dt,ft[7]=St}else ft[0]=Rt[0],ft[1]=Rt[3],ft[2]=Rt[6],ft[3]=Rt[1],ft[4]=Rt[4],ft[5]=Rt[7],ft[6]=Rt[2],ft[7]=Rt[5],ft[8]=Rt[8];return ft}function f(ft,Rt){var Nt=Rt[0],Dt=Rt[1],St=Rt[2],xt=Rt[3],Ot=Rt[4],it=Rt[5],At=Rt[6],z=Rt[7],q=Rt[8],mt=q*Ot-it*z,et=-q*xt+it*At,st=z*xt-Ot*At,bt=Nt*mt+Dt*et+St*st;return bt?(bt=1/bt,ft[0]=mt*bt,ft[1]=(-q*Dt+St*z)*bt,ft[2]=(it*Dt-St*Ot)*bt,ft[3]=et*bt,ft[4]=(q*Nt-St*At)*bt,ft[5]=(-it*Nt+St*xt)*bt,ft[6]=st*bt,ft[7]=(-z*Nt+Dt*At)*bt,ft[8]=(Ot*Nt-Dt*xt)*bt,ft):null}function v(ft,Rt){var Nt=Rt[0],Dt=Rt[1],St=Rt[2],xt=Rt[3],Ot=Rt[4],it=Rt[5],At=Rt[6],z=Rt[7],q=Rt[8];return ft[0]=Ot*q-it*z,ft[1]=St*z-Dt*q,ft[2]=Dt*it-St*Ot,ft[3]=it*At-xt*q,ft[4]=Nt*q-St*At,ft[5]=St*xt-Nt*it,ft[6]=xt*z-Ot*At,ft[7]=Dt*At-Nt*z,ft[8]=Nt*Ot-Dt*xt,ft}function b(ft){var Rt=ft[0],Nt=ft[1],Dt=ft[2],St=ft[3],xt=ft[4],Ot=ft[5],it=ft[6],At=ft[7],z=ft[8];return Rt*(z*xt-Ot*At)+Nt*(-z*St+Ot*it)+Dt*(At*St-xt*it)}function g(ft,Rt,Nt){var Dt=Rt[0],St=Rt[1],xt=Rt[2],Ot=Rt[3],it=Rt[4],At=Rt[5],z=Rt[6],q=Rt[7],mt=Rt[8],et=Nt[0],st=Nt[1],bt=Nt[2],Y=Nt[3],rt=Nt[4],ot=Nt[5],$=Nt[6],Pt=Nt[7],yt=Nt[8];return ft[0]=et*Dt+st*Ot+bt*z,ft[1]=et*St+st*it+bt*q,ft[2]=et*xt+st*At+bt*mt,ft[3]=Y*Dt+rt*Ot+ot*z,ft[4]=Y*St+rt*it+ot*q,ft[5]=Y*xt+rt*At+ot*mt,ft[6]=$*Dt+Pt*Ot+yt*z,ft[7]=$*St+Pt*it+yt*q,ft[8]=$*xt+Pt*At+yt*mt,ft}function y(ft,Rt,Nt){var Dt=Rt[0],St=Rt[1],xt=Rt[2],Ot=Rt[3],it=Rt[4],At=Rt[5],z=Rt[6],q=Rt[7],mt=Rt[8],et=Nt[0],st=Nt[1];return ft[0]=Dt,ft[1]=St,ft[2]=xt,ft[3]=Ot,ft[4]=it,ft[5]=At,ft[6]=et*Dt+st*Ot+z,ft[7]=et*St+st*it+q,ft[8]=et*xt+st*At+mt,ft}function _(ft,Rt,Nt){var Dt=Rt[0],St=Rt[1],xt=Rt[2],Ot=Rt[3],it=Rt[4],At=Rt[5],z=Rt[6],q=Rt[7],mt=Rt[8],et=Math.sin(Nt),st=Math.cos(Nt);return ft[0]=st*Dt+et*Ot,ft[1]=st*St+et*it,ft[2]=st*xt+et*At,ft[3]=st*Ot-et*Dt,ft[4]=st*it-et*St,ft[5]=st*At-et*xt,ft[6]=z,ft[7]=q,ft[8]=mt,ft}function M(ft,Rt,Nt){var Dt=Nt[0],St=Nt[1];return ft[0]=Dt*Rt[0],ft[1]=Dt*Rt[1],ft[2]=Dt*Rt[2],ft[3]=St*Rt[3],ft[4]=St*Rt[4],ft[5]=St*Rt[5],ft[6]=Rt[6],ft[7]=Rt[7],ft[8]=Rt[8],ft}function x(ft,Rt){return ft[0]=1,ft[1]=0,ft[2]=0,ft[3]=0,ft[4]=1,ft[5]=0,ft[6]=Rt[0],ft[7]=Rt[1],ft[8]=1,ft}function m(ft,Rt){var Nt=Math.sin(Rt),Dt=Math.cos(Rt);return ft[0]=Dt,ft[1]=Nt,ft[2]=0,ft[3]=-Nt,ft[4]=Dt,ft[5]=0,ft[6]=0,ft[7]=0,ft[8]=1,ft}function S(ft,Rt){return ft[0]=Rt[0],ft[1]=0,ft[2]=0,ft[3]=0,ft[4]=Rt[1],ft[5]=0,ft[6]=0,ft[7]=0,ft[8]=1,ft}function P(ft,Rt){return ft[0]=Rt[0],ft[1]=Rt[1],ft[2]=0,ft[3]=Rt[2],ft[4]=Rt[3],ft[5]=0,ft[6]=Rt[4],ft[7]=Rt[5],ft[8]=1,ft}function A(ft,Rt){var Nt=Rt[0],Dt=Rt[1],St=Rt[2],xt=Rt[3],Ot=Nt+Nt,it=Dt+Dt,At=St+St,z=Nt*Ot,q=Dt*Ot,mt=Dt*it,et=St*Ot,st=St*it,bt=St*At,Y=xt*Ot,rt=xt*it,ot=xt*At;return ft[0]=1-mt-bt,ft[3]=q-ot,ft[6]=et+rt,ft[1]=q+ot,ft[4]=1-z-bt,ft[7]=st-Y,ft[2]=et-rt,ft[5]=st+Y,ft[8]=1-z-mt,ft}function O(ft,Rt){var Nt=Rt[0],Dt=Rt[1],St=Rt[2],xt=Rt[3],Ot=Rt[4],it=Rt[5],At=Rt[6],z=Rt[7],q=Rt[8],mt=Rt[9],et=Rt[10],st=Rt[11],bt=Rt[12],Y=Rt[13],rt=Rt[14],ot=Rt[15],$=Nt*it-Dt*Ot,Pt=Nt*At-St*Ot,yt=Nt*z-xt*Ot,Ft=Dt*At-St*it,Qt=Dt*z-xt*it,ne=St*z-xt*At,Wt=q*Y-mt*bt,$t=q*rt-et*bt,De=q*ot-st*bt,Je=mt*rt-et*Y,Qe=mt*ot-st*Y,de=et*ot-st*rt,ue=$*de-Pt*Qe+yt*Je+Ft*De-Qt*$t+ne*Wt;return ue?(ue=1/ue,ft[0]=(it*de-At*Qe+z*Je)*ue,ft[1]=(At*De-Ot*de-z*$t)*ue,ft[2]=(Ot*Qe-it*De+z*Wt)*ue,ft[3]=(St*Qe-Dt*de-xt*Je)*ue,ft[4]=(Nt*de-St*De+xt*$t)*ue,ft[5]=(Dt*De-Nt*Qe-xt*Wt)*ue,ft[6]=(Y*ne-rt*Qt+ot*Ft)*ue,ft[7]=(rt*yt-bt*ne-ot*Pt)*ue,ft[8]=(bt*Qt-Y*yt+ot*$)*ue,ft):null}function R(ft,Rt,Nt){return ft[0]=2/Rt,ft[1]=0,ft[2]=0,ft[3]=0,ft[4]=-2/Nt,ft[5]=0,ft[6]=-1,ft[7]=1,ft[8]=1,ft}function H(ft){return"mat3("+ft[0]+", "+ft[1]+", "+ft[2]+", "+ft[3]+", "+ft[4]+", "+ft[5]+", "+ft[6]+", "+ft[7]+", "+ft[8]+")"}function N(ft){return Math.sqrt(Math.pow(ft[0],2)+Math.pow(ft[1],2)+Math.pow(ft[2],2)+Math.pow(ft[3],2)+Math.pow(ft[4],2)+Math.pow(ft[5],2)+Math.pow(ft[6],2)+Math.pow(ft[7],2)+Math.pow(ft[8],2))}function K(ft,Rt,Nt){return ft[0]=Rt[0]+Nt[0],ft[1]=Rt[1]+Nt[1],ft[2]=Rt[2]+Nt[2],ft[3]=Rt[3]+Nt[3],ft[4]=Rt[4]+Nt[4],ft[5]=Rt[5]+Nt[5],ft[6]=Rt[6]+Nt[6],ft[7]=Rt[7]+Nt[7],ft[8]=Rt[8]+Nt[8],ft}function V(ft,Rt,Nt){return ft[0]=Rt[0]-Nt[0],ft[1]=Rt[1]-Nt[1],ft[2]=Rt[2]-Nt[2],ft[3]=Rt[3]-Nt[3],ft[4]=Rt[4]-Nt[4],ft[5]=Rt[5]-Nt[5],ft[6]=Rt[6]-Nt[6],ft[7]=Rt[7]-Nt[7],ft[8]=Rt[8]-Nt[8],ft}function k(ft,Rt,Nt){return ft[0]=Rt[0]*Nt,ft[1]=Rt[1]*Nt,ft[2]=Rt[2]*Nt,ft[3]=Rt[3]*Nt,ft[4]=Rt[4]*Nt,ft[5]=Rt[5]*Nt,ft[6]=Rt[6]*Nt,ft[7]=Rt[7]*Nt,ft[8]=Rt[8]*Nt,ft}function Z(ft,Rt,Nt,Dt){return ft[0]=Rt[0]+Nt[0]*Dt,ft[1]=Rt[1]+Nt[1]*Dt,ft[2]=Rt[2]+Nt[2]*Dt,ft[3]=Rt[3]+Nt[3]*Dt,ft[4]=Rt[4]+Nt[4]*Dt,ft[5]=Rt[5]+Nt[5]*Dt,ft[6]=Rt[6]+Nt[6]*Dt,ft[7]=Rt[7]+Nt[7]*Dt,ft[8]=Rt[8]+Nt[8]*Dt,ft}function X(ft,Rt){return ft[0]===Rt[0]&&ft[1]===Rt[1]&&ft[2]===Rt[2]&&ft[3]===Rt[3]&&ft[4]===Rt[4]&&ft[5]===Rt[5]&&ft[6]===Rt[6]&&ft[7]===Rt[7]&&ft[8]===Rt[8]}function at(ft,Rt){var Nt=ft[0],Dt=ft[1],St=ft[2],xt=ft[3],Ot=ft[4],it=ft[5],At=ft[6],z=ft[7],q=ft[8],mt=Rt[0],et=Rt[1],st=Rt[2],bt=Rt[3],Y=Rt[4],rt=Rt[5],ot=Rt[6],$=Rt[7],Pt=Rt[8];return Math.abs(Nt-mt)<=u.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(mt))&&Math.abs(Dt-et)<=u.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(et))&&Math.abs(St-st)<=u.EPSILON*Math.max(1,Math.abs(St),Math.abs(st))&&Math.abs(xt-bt)<=u.EPSILON*Math.max(1,Math.abs(xt),Math.abs(bt))&&Math.abs(Ot-Y)<=u.EPSILON*Math.max(1,Math.abs(Ot),Math.abs(Y))&&Math.abs(it-rt)<=u.EPSILON*Math.max(1,Math.abs(it),Math.abs(rt))&&Math.abs(At-ot)<=u.EPSILON*Math.max(1,Math.abs(At),Math.abs(ot))&&Math.abs(z-$)<=u.EPSILON*Math.max(1,Math.abs(z),Math.abs($))&&Math.abs(q-Pt)<=u.EPSILON*Math.max(1,Math.abs(q),Math.abs(Pt))}var pt=T.mul=g,gt=T.sub=V},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.sqrDist=T.dist=T.div=T.mul=T.sub=T.len=void 0,T.create=h,T.clone=r,T.fromValues=c,T.copy=n,T.set=i,T.add=a,T.subtract=o,T.multiply=l,T.divide=f,T.ceil=v,T.floor=b,T.min=g,T.max=y,T.round=_,T.scale=M,T.scaleAndAdd=x,T.distance=m,T.squaredDistance=S,T.length=P,T.squaredLength=A,T.negate=O,T.inverse=R,T.normalize=H,T.dot=N,T.cross=K,T.lerp=V,T.random=k,T.transformMat2=Z,T.transformMat2d=X,T.transformMat3=at,T.transformMat4=pt,T.rotate=gt,T.angle=ft,T.str=Rt,T.exactEquals=Nt,T.equals=Dt;var t=e(78),u=s(t);function s(et){if(et&&et.__esModule)return et;var st={};if(et!=null)for(var bt in et)Object.prototype.hasOwnProperty.call(et,bt)&&(st[bt]=et[bt]);return st.default=et,st}function h(){var et=new u.ARRAY_TYPE(2);return u.ARRAY_TYPE!=Float32Array&&(et[0]=0,et[1]=0),et}function r(et){var st=new u.ARRAY_TYPE(2);return st[0]=et[0],st[1]=et[1],st}function c(et,st){var bt=new u.ARRAY_TYPE(2);return bt[0]=et,bt[1]=st,bt}function n(et,st){return et[0]=st[0],et[1]=st[1],et}function i(et,st,bt){return et[0]=st,et[1]=bt,et}function a(et,st,bt){return et[0]=st[0]+bt[0],et[1]=st[1]+bt[1],et}function o(et,st,bt){return et[0]=st[0]-bt[0],et[1]=st[1]-bt[1],et}function l(et,st,bt){return et[0]=st[0]*bt[0],et[1]=st[1]*bt[1],et}function f(et,st,bt){return et[0]=st[0]/bt[0],et[1]=st[1]/bt[1],et}function v(et,st){return et[0]=Math.ceil(st[0]),et[1]=Math.ceil(st[1]),et}function b(et,st){return et[0]=Math.floor(st[0]),et[1]=Math.floor(st[1]),et}function g(et,st,bt){return et[0]=Math.min(st[0],bt[0]),et[1]=Math.min(st[1],bt[1]),et}function y(et,st,bt){return et[0]=Math.max(st[0],bt[0]),et[1]=Math.max(st[1],bt[1]),et}function _(et,st){return et[0]=Math.round(st[0]),et[1]=Math.round(st[1]),et}function M(et,st,bt){return et[0]=st[0]*bt,et[1]=st[1]*bt,et}function x(et,st,bt,Y){return et[0]=st[0]+bt[0]*Y,et[1]=st[1]+bt[1]*Y,et}function m(et,st){var bt=st[0]-et[0],Y=st[1]-et[1];return Math.sqrt(bt*bt+Y*Y)}function S(et,st){var bt=st[0]-et[0],Y=st[1]-et[1];return bt*bt+Y*Y}function P(et){var st=et[0],bt=et[1];return Math.sqrt(st*st+bt*bt)}function A(et){var st=et[0],bt=et[1];return st*st+bt*bt}function O(et,st){return et[0]=-st[0],et[1]=-st[1],et}function R(et,st){return et[0]=1/st[0],et[1]=1/st[1],et}function H(et,st){var bt=st[0],Y=st[1],rt=bt*bt+Y*Y;return rt>0&&(rt=1/Math.sqrt(rt),et[0]=st[0]*rt,et[1]=st[1]*rt),et}function N(et,st){return et[0]*st[0]+et[1]*st[1]}function K(et,st,bt){var Y=st[0]*bt[1]-st[1]*bt[0];return et[0]=et[1]=0,et[2]=Y,et}function V(et,st,bt,Y){var rt=st[0],ot=st[1];return et[0]=rt+Y*(bt[0]-rt),et[1]=ot+Y*(bt[1]-ot),et}function k(et,st){st=st||1;var bt=u.RANDOM()*2*Math.PI;return et[0]=Math.cos(bt)*st,et[1]=Math.sin(bt)*st,et}function Z(et,st,bt){var Y=st[0],rt=st[1];return et[0]=bt[0]*Y+bt[2]*rt,et[1]=bt[1]*Y+bt[3]*rt,et}function X(et,st,bt){var Y=st[0],rt=st[1];return et[0]=bt[0]*Y+bt[2]*rt+bt[4],et[1]=bt[1]*Y+bt[3]*rt+bt[5],et}function at(et,st,bt){var Y=st[0],rt=st[1];return et[0]=bt[0]*Y+bt[3]*rt+bt[6],et[1]=bt[1]*Y+bt[4]*rt+bt[7],et}function pt(et,st,bt){var Y=st[0],rt=st[1];return et[0]=bt[0]*Y+bt[4]*rt+bt[12],et[1]=bt[1]*Y+bt[5]*rt+bt[13],et}function gt(et,st,bt,Y){var rt=st[0]-bt[0],ot=st[1]-bt[1],$=Math.sin(Y),Pt=Math.cos(Y);return et[0]=rt*Pt-ot*$+bt[0],et[1]=rt*$+ot*Pt+bt[1],et}function ft(et,st){var bt=et[0],Y=et[1],rt=st[0],ot=st[1],$=bt*bt+Y*Y;$>0&&($=1/Math.sqrt($));var Pt=rt*rt+ot*ot;Pt>0&&(Pt=1/Math.sqrt(Pt));var yt=(bt*rt+Y*ot)*$*Pt;return yt>1?0:yt<-1?Math.PI:Math.acos(yt)}function Rt(et){return"vec2("+et[0]+", "+et[1]+")"}function Nt(et,st){return et[0]===st[0]&&et[1]===st[1]}function Dt(et,st){var bt=et[0],Y=et[1],rt=st[0],ot=st[1];return Math.abs(bt-rt)<=u.EPSILON*Math.max(1,Math.abs(bt),Math.abs(rt))&&Math.abs(Y-ot)<=u.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ot))}var St=T.len=P,xt=T.sub=o,Ot=T.mul=l,it=T.div=f,At=T.dist=m,z=T.sqrDist=S,q=T.sqrLen=A,mt=T.forEach=function(){var et=h();return function(st,bt,Y,rt,ot,$){var Pt=void 0,yt=void 0;for(bt||(bt=2),Y||(Y=0),rt?yt=Math.min(rt*bt+Y,st.length):yt=st.length,Pt=Y;Pt<yt;Pt+=bt)et[0]=st[Pt],et[1]=st[Pt+1],ot(et,et,$),st[Pt]=et[0],st[Pt+1]=et[1];return st}}()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0,T.create=h,T.clone=r,T.length=c,T.fromValues=n,T.copy=i,T.set=a,T.add=o,T.subtract=l,T.multiply=f,T.divide=v,T.ceil=b,T.floor=g,T.min=y,T.max=_,T.round=M,T.scale=x,T.scaleAndAdd=m,T.distance=S,T.squaredDistance=P,T.squaredLength=A,T.negate=O,T.inverse=R,T.normalize=H,T.dot=N,T.cross=K,T.lerp=V,T.hermite=k,T.bezier=Z,T.random=X,T.transformMat4=at,T.transformMat3=pt,T.transformQuat=gt,T.rotateX=ft,T.rotateY=Rt,T.rotateZ=Nt,T.angle=Dt,T.str=St,T.exactEquals=xt,T.equals=Ot;var t=e(78),u=s(t);function s(Y){if(Y&&Y.__esModule)return Y;var rt={};if(Y!=null)for(var ot in Y)Object.prototype.hasOwnProperty.call(Y,ot)&&(rt[ot]=Y[ot]);return rt.default=Y,rt}function h(){var Y=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(Y[0]=0,Y[1]=0,Y[2]=0),Y}function r(Y){var rt=new u.ARRAY_TYPE(3);return rt[0]=Y[0],rt[1]=Y[1],rt[2]=Y[2],rt}function c(Y){var rt=Y[0],ot=Y[1],$=Y[2];return Math.sqrt(rt*rt+ot*ot+$*$)}function n(Y,rt,ot){var $=new u.ARRAY_TYPE(3);return $[0]=Y,$[1]=rt,$[2]=ot,$}function i(Y,rt){return Y[0]=rt[0],Y[1]=rt[1],Y[2]=rt[2],Y}function a(Y,rt,ot,$){return Y[0]=rt,Y[1]=ot,Y[2]=$,Y}function o(Y,rt,ot){return Y[0]=rt[0]+ot[0],Y[1]=rt[1]+ot[1],Y[2]=rt[2]+ot[2],Y}function l(Y,rt,ot){return Y[0]=rt[0]-ot[0],Y[1]=rt[1]-ot[1],Y[2]=rt[2]-ot[2],Y}function f(Y,rt,ot){return Y[0]=rt[0]*ot[0],Y[1]=rt[1]*ot[1],Y[2]=rt[2]*ot[2],Y}function v(Y,rt,ot){return Y[0]=rt[0]/ot[0],Y[1]=rt[1]/ot[1],Y[2]=rt[2]/ot[2],Y}function b(Y,rt){return Y[0]=Math.ceil(rt[0]),Y[1]=Math.ceil(rt[1]),Y[2]=Math.ceil(rt[2]),Y}function g(Y,rt){return Y[0]=Math.floor(rt[0]),Y[1]=Math.floor(rt[1]),Y[2]=Math.floor(rt[2]),Y}function y(Y,rt,ot){return Y[0]=Math.min(rt[0],ot[0]),Y[1]=Math.min(rt[1],ot[1]),Y[2]=Math.min(rt[2],ot[2]),Y}function _(Y,rt,ot){return Y[0]=Math.max(rt[0],ot[0]),Y[1]=Math.max(rt[1],ot[1]),Y[2]=Math.max(rt[2],ot[2]),Y}function M(Y,rt){return Y[0]=Math.round(rt[0]),Y[1]=Math.round(rt[1]),Y[2]=Math.round(rt[2]),Y}function x(Y,rt,ot){return Y[0]=rt[0]*ot,Y[1]=rt[1]*ot,Y[2]=rt[2]*ot,Y}function m(Y,rt,ot,$){return Y[0]=rt[0]+ot[0]*$,Y[1]=rt[1]+ot[1]*$,Y[2]=rt[2]+ot[2]*$,Y}function S(Y,rt){var ot=rt[0]-Y[0],$=rt[1]-Y[1],Pt=rt[2]-Y[2];return Math.sqrt(ot*ot+$*$+Pt*Pt)}function P(Y,rt){var ot=rt[0]-Y[0],$=rt[1]-Y[1],Pt=rt[2]-Y[2];return ot*ot+$*$+Pt*Pt}function A(Y){var rt=Y[0],ot=Y[1],$=Y[2];return rt*rt+ot*ot+$*$}function O(Y,rt){return Y[0]=-rt[0],Y[1]=-rt[1],Y[2]=-rt[2],Y}function R(Y,rt){return Y[0]=1/rt[0],Y[1]=1/rt[1],Y[2]=1/rt[2],Y}function H(Y,rt){var ot=rt[0],$=rt[1],Pt=rt[2],yt=ot*ot+$*$+Pt*Pt;return yt>0&&(yt=1/Math.sqrt(yt),Y[0]=rt[0]*yt,Y[1]=rt[1]*yt,Y[2]=rt[2]*yt),Y}function N(Y,rt){return Y[0]*rt[0]+Y[1]*rt[1]+Y[2]*rt[2]}function K(Y,rt,ot){var $=rt[0],Pt=rt[1],yt=rt[2],Ft=ot[0],Qt=ot[1],ne=ot[2];return Y[0]=Pt*ne-yt*Qt,Y[1]=yt*Ft-$*ne,Y[2]=$*Qt-Pt*Ft,Y}function V(Y,rt,ot,$){var Pt=rt[0],yt=rt[1],Ft=rt[2];return Y[0]=Pt+$*(ot[0]-Pt),Y[1]=yt+$*(ot[1]-yt),Y[2]=Ft+$*(ot[2]-Ft),Y}function k(Y,rt,ot,$,Pt,yt){var Ft=yt*yt,Qt=Ft*(2*yt-3)+1,ne=Ft*(yt-2)+yt,Wt=Ft*(yt-1),$t=Ft*(3-2*yt);return Y[0]=rt[0]*Qt+ot[0]*ne+$[0]*Wt+Pt[0]*$t,Y[1]=rt[1]*Qt+ot[1]*ne+$[1]*Wt+Pt[1]*$t,Y[2]=rt[2]*Qt+ot[2]*ne+$[2]*Wt+Pt[2]*$t,Y}function Z(Y,rt,ot,$,Pt,yt){var Ft=1-yt,Qt=Ft*Ft,ne=yt*yt,Wt=Qt*Ft,$t=3*yt*Qt,De=3*ne*Ft,Je=ne*yt;return Y[0]=rt[0]*Wt+ot[0]*$t+$[0]*De+Pt[0]*Je,Y[1]=rt[1]*Wt+ot[1]*$t+$[1]*De+Pt[1]*Je,Y[2]=rt[2]*Wt+ot[2]*$t+$[2]*De+Pt[2]*Je,Y}function X(Y,rt){rt=rt||1;var ot=u.RANDOM()*2*Math.PI,$=u.RANDOM()*2-1,Pt=Math.sqrt(1-$*$)*rt;return Y[0]=Math.cos(ot)*Pt,Y[1]=Math.sin(ot)*Pt,Y[2]=$*rt,Y}function at(Y,rt,ot){var $=rt[0],Pt=rt[1],yt=rt[2],Ft=ot[3]*$+ot[7]*Pt+ot[11]*yt+ot[15];return Ft=Ft||1,Y[0]=(ot[0]*$+ot[4]*Pt+ot[8]*yt+ot[12])/Ft,Y[1]=(ot[1]*$+ot[5]*Pt+ot[9]*yt+ot[13])/Ft,Y[2]=(ot[2]*$+ot[6]*Pt+ot[10]*yt+ot[14])/Ft,Y}function pt(Y,rt,ot){var $=rt[0],Pt=rt[1],yt=rt[2];return Y[0]=$*ot[0]+Pt*ot[3]+yt*ot[6],Y[1]=$*ot[1]+Pt*ot[4]+yt*ot[7],Y[2]=$*ot[2]+Pt*ot[5]+yt*ot[8],Y}function gt(Y,rt,ot){var $=ot[0],Pt=ot[1],yt=ot[2],Ft=ot[3],Qt=rt[0],ne=rt[1],Wt=rt[2],$t=Pt*Wt-yt*ne,De=yt*Qt-$*Wt,Je=$*ne-Pt*Qt,Qe=Pt*Je-yt*De,de=yt*$t-$*Je,ue=$*De-Pt*$t,Ne=Ft*2;return $t*=Ne,De*=Ne,Je*=Ne,Qe*=2,de*=2,ue*=2,Y[0]=Qt+$t+Qe,Y[1]=ne+De+de,Y[2]=Wt+Je+ue,Y}function ft(Y,rt,ot,$){var Pt=[],yt=[];return Pt[0]=rt[0]-ot[0],Pt[1]=rt[1]-ot[1],Pt[2]=rt[2]-ot[2],yt[0]=Pt[0],yt[1]=Pt[1]*Math.cos($)-Pt[2]*Math.sin($),yt[2]=Pt[1]*Math.sin($)+Pt[2]*Math.cos($),Y[0]=yt[0]+ot[0],Y[1]=yt[1]+ot[1],Y[2]=yt[2]+ot[2],Y}function Rt(Y,rt,ot,$){var Pt=[],yt=[];return Pt[0]=rt[0]-ot[0],Pt[1]=rt[1]-ot[1],Pt[2]=rt[2]-ot[2],yt[0]=Pt[2]*Math.sin($)+Pt[0]*Math.cos($),yt[1]=Pt[1],yt[2]=Pt[2]*Math.cos($)-Pt[0]*Math.sin($),Y[0]=yt[0]+ot[0],Y[1]=yt[1]+ot[1],Y[2]=yt[2]+ot[2],Y}function Nt(Y,rt,ot,$){var Pt=[],yt=[];return Pt[0]=rt[0]-ot[0],Pt[1]=rt[1]-ot[1],Pt[2]=rt[2]-ot[2],yt[0]=Pt[0]*Math.cos($)-Pt[1]*Math.sin($),yt[1]=Pt[0]*Math.sin($)+Pt[1]*Math.cos($),yt[2]=Pt[2],Y[0]=yt[0]+ot[0],Y[1]=yt[1]+ot[1],Y[2]=yt[2]+ot[2],Y}function Dt(Y,rt){var ot=n(Y[0],Y[1],Y[2]),$=n(rt[0],rt[1],rt[2]);H(ot,ot),H($,$);var Pt=N(ot,$);return Pt>1?0:Pt<-1?Math.PI:Math.acos(Pt)}function St(Y){return"vec3("+Y[0]+", "+Y[1]+", "+Y[2]+")"}function xt(Y,rt){return Y[0]===rt[0]&&Y[1]===rt[1]&&Y[2]===rt[2]}function Ot(Y,rt){var ot=Y[0],$=Y[1],Pt=Y[2],yt=rt[0],Ft=rt[1],Qt=rt[2];return Math.abs(ot-yt)<=u.EPSILON*Math.max(1,Math.abs(ot),Math.abs(yt))&&Math.abs($-Ft)<=u.EPSILON*Math.max(1,Math.abs($),Math.abs(Ft))&&Math.abs(Pt-Qt)<=u.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(Qt))}var it=T.sub=l,At=T.mul=f,z=T.div=v,q=T.dist=S,mt=T.sqrDist=P,et=T.len=c,st=T.sqrLen=A,bt=T.forEach=function(){var Y=h();return function(rt,ot,$,Pt,yt,Ft){var Qt=void 0,ne=void 0;for(ot||(ot=3),$||($=0),Pt?ne=Math.min(Pt*ot+$,rt.length):ne=rt.length,Qt=$;Qt<ne;Qt+=ot)Y[0]=rt[Qt],Y[1]=rt[Qt+1],Y[2]=rt[Qt+2],yt(Y,Y,Ft),rt[Qt]=Y[0],rt[Qt+1]=Y[1],rt[Qt+2]=Y[2];return rt}}()},function(E,T,e){var t=e(6),u=e(11),s=e(152),h=5,r=7,c=[1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],n=[1,2,4,5,10],i=1e-12;E.exports=function(a){var o=a.min,l=a.max,f=a.interval,v=a.minTickInterval,b=[],g=a.minCount||h,y=a.maxCount||r,_=g===y,M=t(a.minLimit)?-Infinity:a.minLimit,x=t(a.maxLimit)?Infinity:a.maxLimit,m=(g+y)/2,S=m,P=a.snapArray?a.snapArray:_?c:n;if(o===M&&l===x&&_&&(f=(l-o)/(S-1)),t(o)&&(o=0),t(l)&&(l=0),Math.abs(l-o)<i&&(o===0?l=1:o>0?o=0:l=0,l-o<5&&!f&&l-o>=1&&(f=1)),t(f)){var A=(l-o)/(m-1);f=s.snapFactorTo(A,P,"ceil"),y!==g&&(S=parseInt((l-o)/f,10),S>y&&(S=y),S<g&&(S=g),f=s.snapFactorTo((l-o)/(S-1),P))}if(u(v)&&f<v&&(f=v),a.interval||y!==g){l=Math.min(s.snapMultiple(l,f,"ceil"),x),o=Math.max(s.snapMultiple(o,f,"floor"),M),S=Math.round((l-o)/f),o=s.fixedBase(o,f),l=s.fixedBase(l,f);for(var O=null;o>M&&M>-Infinity&&(O===null||o<O);)O=o,o=s.fixedBase(o-f,f)}else{m=parseInt(m,10);var R=(l+o)/2,H=s.snapMultiple(R,f,"ceil"),N=Math.floor((m-2)/2),K=H+N*f,V;m%2==0?V=H-N*f:V=H-(N+1)*f;for(var k=null;K<l&&(k===null||K>k);)k=K,K=s.fixedBase(K+f,f);for(var Z=null;V>o&&(Z===null||V<Z);)Z=V,V=s.fixedBase(V-f,f);l=K,o=V}l=Math.min(l,x),o=Math.max(o,M),b.push(o);for(var X=1;X<S;X++){var at=s.fixedBase(f*X+o,f);at<l&&b.push(at)}return b[b.length-1]<l&&b.push(l),{min:o,max:l,interval:f,count:S,ticks:b}}},function(E,T,e){var t=e(152),u=e(6),s=6,h=[1,2,4,6,8,12],r=60*1e3,c=3600*1e3,n=24*3600*1e3;function i(y){return new Date(y).getFullYear()}function a(y){return new Date(y,0,1).getTime()}function o(y){return new Date(y).getMonth()}function l(y,_){var M=i(y),x=i(_),m=o(y),S=o(_);return(x-M)*12+(S-m)%12}function f(y,_){return new Date(y,_,1).getTime()}function v(y,_){return Math.ceil((_-y)/n)}function b(y,_){return Math.ceil((_-y)/c)}function g(y,_){return Math.ceil((_-y)/(60*1e3))}E.exports=function(y){var _=y.minInterval,M=[],x=y.min,m=y.max,S=y.interval,P;if(m===x&&(m=x+n),u(S)){var A=m-x,O=n,R=365*O;S=parseInt(A/(y.maxCount||s),10),_&&_>S&&(S=_);var H=S/R,N=i(x);if(H>.51){for(var K=Math.ceil(H),V=i(m),k=N;k<=V+K;k=k+K)M.push(a(k));S=null}else if(H>.0834){for(var Z=Math.ceil(H/.0834),X=o(x),at=l(x,m),pt=0;pt<=at+Z;pt=pt+Z)M.push(f(N,pt+X));S=null}else if(S>O*.5){var gt=new Date(x),ft=gt.getFullYear(),Rt=gt.getMonth(x),Nt=gt.getDate(),Dt=Math.ceil(S/O),St=v(x,m);S=Dt*O;for(var xt=0;xt<St+Dt;xt=xt+Dt)M.push(new Date(ft,Rt,Nt+xt).getTime())}else if(S>c){var Ot=new Date(x),it=Ot.getFullYear(),At=Ot.getMonth(x),z=Ot.getDate(),q=Ot.getHours(),mt=t.snapTo(h,Math.ceil(S/c)),et=b(x,m);S=mt*c;for(var st=0;st<=et+mt;st=st+mt)M.push(new Date(it,At,z,q+st).getTime())}else if(S>r){var bt=g(x,m),Y=Math.ceil(S/r);S=Y*r;for(var rt=0;rt<=bt+Y;rt=rt+Y)M.push(x+rt*r)}else{S<1e3&&(S=1e3),x=Math.floor(x/1e3)*1e3;var ot=Math.ceil((m-x)/1e3),$=Math.ceil(S/1e3);S=$*1e3;for(var Pt=0;Pt<ot+$;Pt=Pt+$)M.push(x+Pt*1e3)}}if(!M.length){x=Math.floor(x/1e3)*1e3,m=Math.ceil(m/1e3)*1e3,P=(m-x)/S;for(var yt=0;yt<=P;yt++)M.push(t.fixedBase(S*yt+x,S))}return{max:m,min:x,interval:S,ticks:M,count:M.length}}},function(E,T,e){function t(r,c){r.prototype=Object.create(c.prototype),r.prototype.constructor=r,r.__proto__=c}var u=e(26),s=e(11),h=function(r){t(c,r);function c(){return r.apply(this,arguments)||this}var n=c.prototype;return n._initDefaultCfg=function(){r.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},n.getText=function(){return this.value.toString()},n.scale=function(a){return this.value!==a&&s(a)?a:this.range[0]},n.invert=function(){return this.value},c}(u);u.Identity=h,E.exports=h},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(2),s=e(26),h=e(51);function r(n,i){return n===1?1:Math.log(i)/Math.log(n)}var c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},a.calculateTicks=function(){var l=this,f=l.base,v;if(l.min<0)throw new Error("The minimum value must be greater than zero!");var b=r(f,l.max);if(l.min>0)v=Math.floor(r(f,l.min));else{var g=l.values,y=l.max;u(g,function(P){P>0&&P<y&&(y=P)}),y===l.max&&(y=l.max/f),y>1&&(y=1),v=Math.floor(r(f,y)),l._minTick=v,l.positiveMin=y}for(var _=b-v,M=l.tickCount,x=Math.ceil(_/M),m=[],S=v;S<b+x;S=S+x)m.push(Math.pow(f,S));return l.min===0&&m.unshift(0),m},a._getScalePercent=function(l){var f=this.max,v=this.min;if(f===v||l<=0)return 0;var b=this.base,g=this.positiveMin;g&&(v=g*1/b);var y;return l<g?y=l/g/(r(b,f)-r(b,v)):y=(r(b,l)-r(b,v))/(r(b,f)-r(b,v)),y},a.scale=function(l){var f=this._getScalePercent(l),v=this.rangeMin(),b=this.rangeMax();return v+f*(b-v)},a.invert=function(l){var f=this.base,v=r(f,this.max),b=this.rangeMin(),g=this.rangeMax()-b,y,_=this.positiveMin;if(_){if(l===0)return 0;y=r(f,_/f);var M=1/(v-y)*g;if(l<M)return l/M*_}else y=r(f,this.min);var x=(l-b)/g,m=x*(v-y)+y;return Math.pow(f,m)},i}(h);s.Log=c,E.exports=c},function(E,T,e){function t(c,n){c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.__proto__=n}var u=e(26),s=e(51);function h(c,n){var i=Math.E,a=Math.pow(i,Math.log(n)/c);return a}var r=function(c){t(n,c);function n(){return c.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){c.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},i.calculateTicks=function(){var o=this,l=o.exponent,f,v=Math.ceil(h(l,o.max));if(o.min>=0?f=Math.floor(h(l,o.min)):f=0,f>v){var b=v;v=f,f=b}for(var g=v-f,y=o.tickCount,_=Math.ceil(g/y),M=[],x=f;x<v+_;x=x+_)M.push(Math.pow(x,l));return M},i._getScalePercent=function(o){var l=this.max,f=this.min;if(l===f)return 0;var v=this.exponent,b=(h(v,o)-h(v,f))/(h(v,l)-h(v,f));return b},i.scale=function(o){var l=this._getScalePercent(o),f=this.rangeMin(),v=this.rangeMax();return f+l*(v-f)},i.invert=function(o){var l=(o-this.rangeMin())/(this.rangeMax()-this.rangeMin()),f=this.exponent,v=h(f,this.max),b=h(f,this.min),g=l*(v-b)+b;return Math.pow(g,f)},n}(s);u.Pow=r,E.exports=r},function(E,T,e){function t(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var u=e(26),s=e(153),h=e(222),r=e(151),c=e(52),n=e(2),i=e(11),a=e(39),o=e(15),l=function(f){t(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b._initDefaultCfg=function(){f.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},b.init=function(){var y=this,_=this.values;n(_,function(M,x){_[x]=y._toTimeStamp(M)}),this.sortable&&_.sort(function(M,x){return M-x}),y.ticks||(y.ticks=this.calculateTicks())},b.calculateTicks=function(){var y=this,_=y.tickCount,M;if(_){var x=r({maxCount:_,data:y.values,isRounding:y.isRounding});M=x.ticks}else M=y.values;return M},b.translate=function(y){y=this._toTimeStamp(y);var _=this.values.indexOf(y);return _===-1&&(i(y)&&y<this.values.length?_=y:_=NaN),_},b.scale=function(y){var _=this.rangeMin(),M=this.rangeMax(),x=this.translate(y),m;return this.values.length===1||isNaN(x)?m=x:x>-1?m=x/(this.values.length-1):m=0,_+m*(M-_)},b.getText=function(y){var _="",M=this.translate(y);M>-1?_=this.values[M]:_=y;var x=this.formatter;return _=parseInt(_,10),_=x?x(_):h.format(_,this.mask),_},b.getTicks=function(){var y=this,_=this.ticks,M=[];return n(_,function(x){var m;a(x)?m=x:m={text:o(x)?x:y.getText(x),value:y.scale(x),tickValue:x},M.push(m)}),M},b._toTimeStamp=function(y){return c.toTimeStamp(y)},v}(s);u.TimeCat=l,E.exports=l},function(E,T,e){function t(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var u=e(222),s=e(2),h=e(6),r=e(15),c=e(26),n=e(51),i=e(352),a=e(52),o=function(l){t(f,l);function f(){return l.apply(this,arguments)||this}var v=f.prototype;return v._initDefaultCfg=function(){l.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},v.init=function(){var g=this,y=g.values;if(y&&y.length){var _=[],M=Infinity,x=M,m=0;s(y,function(S){var P=g._toTimeStamp(S);if(isNaN(P))throw new TypeError("Invalid Time: "+S);M>P?(x=M,M=P):x>P&&(x=P),m<P&&(m=P),_.push(P)}),y.length>1&&(g.minTickInterval=x-M),(h(g.min)||g._toTimeStamp(g.min)>M)&&(g.min=M),(h(g.max)||g._toTimeStamp(g.max)<m)&&(g.max=m)}l.prototype.init.call(this)},v.calculateTicks=function(){var g=this,y=g.min,_=g.max,M=g.tickCount,x=g.tickInterval,m=i({min:y,max:_,minCount:M,maxCount:M,interval:x,minInterval:g.minTickInterval});return m.ticks},v.getText=function(g){var y=this.formatter;return g=this.translate(g),g=y?y(g):u.format(g,this.mask),g},v.scale=function(g){return r(g)&&(g=this.translate(g)),l.prototype.scale.call(this,g)},v.translate=function(g){return this._toTimeStamp(g)},v._toTimeStamp=function(g){return a.toTimeStamp(g)},f}(n);c.Time=o,E.exports=o},function(E,T,e){var t=e(82),u=e(53),s=function(r){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t(r,function(n){return!u(c,n)})};E.exports=s},function(E,T,e){var t=e(14),u=e(40),s=e(177);function h(r,c){var n=void 0;if(t(c)&&(n=c),u(c)&&(n=function(o){return s(o,c)}),n){for(var i=0;i<r.length;i+=1)if(n(r[i]))return r[i]}return null}E.exports=h},function(E,T,e){var t=e(6),u=e(4),s=function(r,c){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[c];if(!t(o)){u(o)?n=o[0]:n=o;break}}return n};E.exports=s},function(E,T,e){var t=e(4),u=function s(h){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!t(h))r.push(h);else for(var c=0;c<h.length;c+=1)s(h[c],r);return r};E.exports=u},function(E,T,e){var t=e(4),u=e(2),s=function(r){if(!t(r))return r;var c=[];return u(r,function(n){t(n)?u(n,function(i){c.push(i)}):c.push(n)}),c};E.exports=s},function(E,T,e){var t=e(82),u=e(4),s=function(r){if(r=t(r,function(o){return!isNaN(o)}),!r.length)return{min:0,max:0};if(u(r[0])){for(var c=[],n=0;n<r.length;n++)c=c.concat(r[n]);r=c}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};E.exports=s},function(E,T,e){E.exports={contains:e(53),difference:e(358),find:e(359),firstValue:e(360),flatten:e(362),flattenDeep:e(361),getRange:e(363),merge:e(54),pull:e(156),pullAt:e(155),reduce:e(365),remove:e(366),sortBy:e(367),union:e(368),uniq:e(157),valuesOfKey:e(79)}},function(E,T,e){var t=e(4),u=e(40),s=e(2),h=function(c,n,i){if(!t(c)&&!u(c))return c;var a=i;return s(c,function(o,l){a=n(a,o,l)}),a};E.exports=h},function(E,T,e){var t=e(21),u=e(155),s=function(r,c){var n=[];if(!t(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var l=r[i];c(l,i,r)&&(n.push(l),a.push(i))}return u(r,a),n};E.exports=s},function(E,T,e){var t=e(15),u=e(14),s=e(4);function h(r,c){var n=void 0;if(u(c))n=function(o,l){return c(o)-c(l)};else{var i=[];t(c)?i.push(c):s(c)&&(i=c),n=function(o,l){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>l[v])return 1;if(o[v]<l[v])return-1}return 0}}return r.sort(n),r}E.exports=h},function(E,T,e){var t=e(2),u=e(57),s=e(157),h=function(){var c=[],n=u(arguments);return t(n,function(i){c=c.concat(i)}),s(c)};E.exports=h},function(E,T){function e(t,u,s){var h=void 0;return function(){var r=this,c=arguments,n=function(){h=null,s||t.apply(r,c)},i=s&&!h;clearTimeout(h),h=setTimeout(n,u),i&&t.apply(r,c)}}E.exports=e},function(E,T){E.exports=function(t,u,s){if(t){if(t.addEventListener)return t.addEventListener(u,s,!1),{remove:function(){t.removeEventListener(u,s,!1)}};if(t.attachEvent)return t.attachEvent("on"+u,s),{remove:function(){t.detachEvent("on"+u,s)}}}}},function(E,T){E.exports=function(t,u){if(t&&t.getBoundingClientRect){var s=t.getBoundingClientRect(),h=document.documentElement.clientTop,r=document.documentElement.clientLeft;return{top:s.top-h,bottom:s.bottom-h,left:s.left-r,right:s.right-r}}return u||null}},function(E,T){E.exports=function(t,u){var s=this.getStyle(t,"height",u);return s==="auto"&&(s=t.offsetHeight),parseFloat(s)}},function(E,T){E.exports=function(t,u){var s=this.getHeight(t,u),h=parseFloat(this.getStyle(t,"borderTopWidth"))||0,r=parseFloat(this.getStyle(t,"paddingTop"))||0,c=parseFloat(this.getStyle(t,"paddingBottom"))||0,n=parseFloat(this.getStyle(t,"borderBottomWidth"))||0;return s+h+n+r+c}},function(E,T){E.exports=function(t,u){var s=this.getWidth(t,u),h=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,r=parseFloat(this.getStyle(t,"paddingLeft"))||0,c=parseFloat(this.getStyle(t,"paddingRight"))||0,n=parseFloat(this.getStyle(t,"borderRightWidth"))||0;return s+h+n+r+c}},function(E,T){E.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(E,T,e){var t=e(6);E.exports=function(s,h,r){try{return window.getComputedStyle?window.getComputedStyle(s,null)[h]:s.currentStyle[h]}catch(c){return t(r)?null:r}}},function(E,T){E.exports=function(t,u){var s=this.getStyle(t,"width",u);return s==="auto"&&(s=t.offsetWidth),parseFloat(s)}},function(E,T,e){E.exports={addEventListener:e(370),createDom:e(159),getBoundingClientRect:e(371),getHeight:e(372),getOuterHeight:e(373),getOuterWidth:e(374),getRatio:e(375),getStyle:e(376),getWidth:e(377),modifyCSS:e(160),requestAnimationFrame:e(161)}},function(E,T){function e(t,u){return t["_wrap_"+u]}E.exports=e},function(E,T,e){E.exports={getWrapBehavior:e(379),wrapBehavior:e(381)}},function(E,T){function e(t,u){if(t["_wrap_"+u])return t["_wrap_"+u];var s=function(r){t[u](r)};return t["_wrap_"+u]=s,s}E.exports=e},function(E,T,e){var t=e(383);E.exports={number2color:t,numberToColor:t,parsePath:e(384),parseRadius:e(385)}},function(E,T){var e={};E.exports=function(u){var s=e[u];if(!s){for(var h=u.toString(16),r=h.length;r<6;r++)h="0"+h;s="#"+h,e[u]=s}return s}},function(E,T,e){var t=e(4),u=e(15),s=e(2),h=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,r=/[^\s\,]+/ig;E.exports=function(n){if(n=n||[],t(n))return n;if(u(n))return n=n.match(h),s(n,function(i,a){if(i=i.match(r),i[0].length>1){var o=i[0].charAt(0);i.splice(1,0,i[0].substr(1)),i[0]=o}s(i,function(l,f){isNaN(l)||(i[f]=+l)}),n[a]=i}),n}},function(E,T,e){var t=e(4);E.exports=function(s){var h=0,r=0,c=0,n=0;return t(s)?s.length===1?h=r=c=n=s[0]:s.length===2?(h=c=s[0],r=n=s[1]):s.length===3?(h=s[0],r=n=s[1],c=s[2]):(h=s[0],r=s[1],c=s[2],n=s[3]):h=r=c=n=s,{r1:h,r2:r,r3:c,r4:n}}},function(E,T,e){var t=e(21),u=function(h,r){if(!t(h))return-1;var c=Array.prototype.indexOf;if(c)return c.call(h,r);for(var n=-1,i=0;i<h.length;i++)if(h[i]===r){n=i;break}return n};E.exports=u},function(E,T,e){var t=e(14),u=e(83),s=function(r,c,n){return t(n)?!!n(r,c):u(r,c)};E.exports=s},function(E,T,e){var t=e(2),u=e(21),s=function(r,c){if(!u(r))return r;var n=[];return t(r,function(i,a){n.push(c(i,a))}),n};E.exports=s},function(E,T){var e=function(u,s){var h=s.toString(),r=h.indexOf(".");if(r===-1)return Math.round(u);var c=h.substr(r+1).length;return c>20&&(c=20),parseFloat(u.toFixed(c))};E.exports=e},function(E,T,e){var t=e(55);E.exports={clamp:e(84),fixedBase:e(389),isDecimal:e(391),isEven:e(392),isInteger:e(393),isNegative:e(394),isNumberEqual:t,isOdd:e(395),isPositive:e(396),maxBy:e(168),minBy:e(397),mod:e(169),snapEqual:t,toDegree:e(170),toInt:e(171),toInteger:e(171),toRadian:e(172)}},function(E,T,e){var t=e(11),u=function(h){return t(h)&&h%1!=0};E.exports=u},function(E,T,e){var t=e(11),u=function(h){return t(h)&&h%2==0};E.exports=u},function(E,T,e){var t=e(11),u=Number.isInteger?Number.isInteger:function(s){return t(s)&&s%1==0};E.exports=u},function(E,T,e){var t=e(11),u=function(h){return t(h)&&h<0};E.exports=u},function(E,T,e){var t=e(11),u=function(h){return t(h)&&h%2!=0};E.exports=u},function(E,T,e){var t=e(11),u=function(h){return t(h)&&h>0};E.exports=u},function(E,T,e){var t=e(4),u=e(14),s=e(2),h=function(c,n){if(!!t(c)){var i=c[0],a=void 0;u(n)?a=n(c[0]):a=c[0][n];var o=void 0;return s(c,function(l){u(n)?o=n(l):o=l[n],o<a&&(i=l,a=o)}),i}};E.exports=h},function(E,T,e){E.exports=e(2)},function(E,T,e){E.exports=e(176)},function(E,T,e){var t=e(53),u=e(179);E.exports=function(s,h){return t(u(s),h)}},function(E,T,e){E.exports={forIn:e(398),has:e(176),hasKey:e(399),hasValue:e(400),keys:e(178),isMatch:e(177),values:e(179)}},function(E,T,e){var t=e(406);function u(h,r,c){var n=null,i=c;return r<i&&(i=r,n="add"),h<i&&(i=h,n="del"),{type:n,min:i}}var s=function(r,c){var n=r.length,i=c.length,a=void 0,o=void 0,l=0;if(n===0||i===0)return null;for(var f=[],v=0;v<=n;v++)f[v]=[],f[v][0]={min:v};for(var b=0;b<=i;b++)f[0][b]={min:b};for(var g=1;g<=n;g++){a=r[g-1];for(var y=1;y<=i;y++){o=c[y-1],t(a,o)?l=0:l=1;var _=f[g-1][y].min+1,M=f[g][y-1].min+1,x=f[g-1][y-1].min+l;f[g][y]=u(_,M,x)}}return f};E.exports=function(r,c){var n=s(r,c),i=r.length,a=c.length,o=[],l=1,f=1;if(n[i][a]!==i){for(var v=1;v<=i;v++){var b=n[v][v].min;f=v;for(var g=l;g<=a;g++)n[v][g].min<b&&(b=n[v][g].min,f=g);l=f,n[v][l].type&&o.push({index:v-1,type:n[v][l].type})}for(var y=o.length-1;y>=0;y--)l=o[y].index,o[y].type==="add"?r.splice(l,0,[].concat(r[l])):r.splice(l,1)}if(i=r.length,i<a)for(var _=0;_<a-i;_++)r[i-1][0]==="z"||r[i-1][0]==="Z"?r.splice(i-2,0,r[i-2]):r.push(r[i-1]);return r}},function(E,T){function e(s,h){var r=[],c=[];function n(i,a){if(i.length===1)r.push(i[0]),c.push(i[0]);else{for(var o=[],l=0;l<i.length-1;l++)l===0&&r.push(i[0]),l===i.length-2&&c.push(i[l+1]),o[l]=[(1-a)*i[l][0]+a*i[l+1][0],(1-a)*i[l][1]+a*i[l+1][1]];n(o,a)}}return s.length&&n(s,h),{left:r,right:c.reverse()}}function t(s,h,r){var c=[[s[1],s[2]]];r=r||2;var n=[];h[0]==="A"?(c.push(h[6]),c.push(h[7])):h[0]==="C"?(c.push([h[1],h[2]]),c.push([h[3],h[4]]),c.push([h[5],h[6]])):h[0]==="S"||h[0]==="Q"?(c.push([h[1],h[2]]),c.push([h[3],h[4]])):c.push([h[1],h[2]]);for(var i=c,a=1/r,o=0;o<r-1;o++){var l=a/(1-a*o),f=e(i,l);n.push(f.left),i=f.right}n.push(i);var v=n.map(function(b){var g=[];return b.length===4&&(g.push("C"),g=g.concat(b[2])),b.length>=3&&(b.length===3&&g.push("Q"),g=g.concat(b[1])),b.length===2&&g.push("L"),g=g.concat(b[b.length-1]),g});return v}function u(s,h,r){if(r===1)return[[].concat(s)];var c=[];if(h[0]==="L"||h[0]==="C"||h[0]==="Q")c=c.concat(t(s,h,r));else{var n=[].concat(s);n[0]==="M"&&(n[0]="L");for(var i=0;i<=r-1;i++)c.push(n)}return c}E.exports=function(h,r){if(h.length===1)return h;var c=h.length-1,n=r.length-1,i=c/n,a=[];if(h.length===1&&h[0][0]==="M"){for(var o=0;o<n-c;o++)h.push(h[0]);return h}for(var l=0;l<n;l++){var f=Math.floor(i*l);a[f]=(a[f]||0)+1}var v=a.reduce(function(b,g,y){return y===c?b.concat(h[c]):b.concat(u(h[y],h[y+1],g))},[]);return v.unshift(h[0]),(r[n]==="Z"||r[n]==="z")&&v.push("Z"),v}},function(E,T){function e(u){var s=[];switch(u[0]){case"M":s.push([u[1],u[2]]);break;case"L":s.push([u[1],u[2]]);break;case"A":s.push([u[6],u[7]]);break;case"Q":s.push([u[3],u[4]]),s.push([u[1],u[2]]);break;case"T":s.push([u[1],u[2]]);break;case"C":s.push([u[5],u[6]]),s.push([u[1],u[2]]),s.push([u[3],u[4]]);break;case"S":s.push([u[3],u[4]]),s.push([u[1],u[2]]);break;case"H":s.push([u[1],u[1]]);break;case"V":s.push([u[1],u[1]]);break;default:}return s}function t(u,s,h){for(var r=[].concat(u),c=void 0,n=1/(h+1),i=e(s)[0],a=1;a<=h;a++)n*=a,c=Math.floor(u.length*n),c===0?r.unshift([i[0]*n+u[c][0]*(1-n),i[1]*n+u[c][1]*(1-n)]):r.splice(c,0,[i[0]*n+u[c][0]*(1-n),i[1]*n+u[c][1]*(1-n)]);return r}E.exports=function(s,h){if(s.length<=1)return s;for(var r=void 0,c=0;c<h.length;c++)if(s[c][0]!==h[c][0])switch(r=e(s[c]),h[c][0]){case"M":s[c]=["M"].concat(r[0]);break;case"L":s[c]=["L"].concat(r[0]);break;case"A":s[c]=[].concat(h[c]),s[c][6]=r[0][0],s[c][7]=r[0][1];break;case"Q":if(r.length<2)if(c>0)r=t(r,s[c-1],1);else{s[c]=h[c];break}s[c]=["Q"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"T":s[c]=["T"].concat(r[0]);break;case"C":if(r.length<3)if(c>0)r=t(r,s[c-1],2);else{s[c]=h[c];break}s[c]=["C"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"S":if(r.length<2)if(c>0)r=t(r,s[c-1],1);else{s[c]=h[c];break}s[c]=["S"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;default:s[c]=h[c]}return s}},function(E,T,e){var t=e(407),u=e(183),s=e(184),h=e(180);E.exports={catmullRom2Bezier:h,catmullRomToBezier:h,fillPath:e(403),fillPathByDiff:e(402),formatPath:e(404),intersection:t,pathIntersection:t,parsePathArray:e(181),parsePathString:e(182),pathToAbsolute:u,path2absolute:u,pathTocurve:s,path2curve:s,rectPath:e(185)}},function(E,T,e){var t=e(2);E.exports=function(s,h){if(s.length!==h.length)return!1;var r=!0;return t(s,function(c,n){if(c!==h[n])return r=!1,!1}),r}},function(E,T,e){var t=e(4),u=e(185),s=e(184),h=function(y,_,M,x,m){var S=-3*_+9*M-9*x+3*m,P=y*S+6*_-12*M+6*x;return y*P-3*_+3*M},r=function(y,_,M,x,m,S,P,A,O){O===null&&(O=1),O=O>1?1:O<0?0:O;for(var R=O/2,H=12,N=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],V=0,k=0;k<H;k++){var Z=R*N[k]+R,X=h(Z,y,M,m,P),at=h(Z,_,x,S,A),pt=X*X+at*at;V+=K[k]*Math.sqrt(pt)}return R*V},c=function(y,_,M,x,m,S,P,A){for(var O=[],R=[[],[]],H=void 0,N=void 0,K=void 0,V=void 0,k=0;k<2;++k){if(k===0?(N=6*y-12*M+6*m,H=-3*y+9*M-9*m+3*P,K=3*M-3*y):(N=6*_-12*x+6*S,H=-3*_+9*x-9*S+3*A,K=3*x-3*_),Math.abs(H)<1e-12){if(Math.abs(N)<1e-12)continue;V=-K/N,V>0&&V<1&&O.push(V);continue}var Z=N*N-4*K*H,X=Math.sqrt(Z);if(!(Z<0)){var at=(-N+X)/(2*H);at>0&&at<1&&O.push(at);var pt=(-N-X)/(2*H);pt>0&&pt<1&&O.push(pt)}}for(var gt=O.length,ft=gt,Rt=void 0;gt--;)V=O[gt],Rt=1-V,R[0][gt]=Rt*Rt*Rt*y+3*Rt*Rt*V*M+3*Rt*V*V*m+V*V*V*P,R[1][gt]=Rt*Rt*Rt*_+3*Rt*Rt*V*x+3*Rt*V*V*S+V*V*V*A;return R[0][ft]=y,R[1][ft]=_,R[0][ft+1]=P,R[1][ft+1]=A,R[0].length=R[1].length=ft+2,{min:{x:Math.min.apply(0,R[0]),y:Math.min.apply(0,R[1])},max:{x:Math.max.apply(0,R[0]),y:Math.max.apply(0,R[1])}}},n=function(y,_,M,x,m,S,P,A){if(!(Math.max(y,M)<Math.min(m,P)||Math.min(y,M)>Math.max(m,P)||Math.max(_,x)<Math.min(S,A)||Math.min(_,x)>Math.max(S,A))){var O=(y*x-_*M)*(m-P)-(y-M)*(m*A-S*P),R=(y*x-_*M)*(S-A)-(_-x)*(m*A-S*P),H=(y-M)*(S-A)-(_-x)*(m-P);if(!!H){var N=O/H,K=R/H,V=+N.toFixed(2),k=+K.toFixed(2);if(!(V<+Math.min(y,M).toFixed(2)||V>+Math.max(y,M).toFixed(2)||V<+Math.min(m,P).toFixed(2)||V>+Math.max(m,P).toFixed(2)||k<+Math.min(_,x).toFixed(2)||k>+Math.max(_,x).toFixed(2)||k<+Math.min(S,A).toFixed(2)||k>+Math.max(S,A).toFixed(2)))return{x:N,y:K}}}},i=function(y,_,M){return _>=y.x&&_<=y.x+y.width&&M>=y.y&&M<=y.y+y.height},a=function(y,_,M,x){return y===null&&(y=_=M=x=0),_===null&&(_=y.y,M=y.width,x=y.height,y=y.x),{x:y,y:_,width:M,w:M,height:x,h:x,x2:y+M,y2:_+x,cx:y+M/2,cy:_+x/2,r1:Math.min(M,x)/2,r2:Math.max(M,x)/2,r0:Math.sqrt(M*M+x*x)/2,path:u(y,_,M,x),vb:[y,_,M,x].join(" ")}},o=function(y,_){return y=a(y),_=a(_),i(_,y.x,y.y)||i(_,y.x2,y.y)||i(_,y.x,y.y2)||i(_,y.x2,y.y2)||i(y,_.x,_.y)||i(y,_.x2,_.y)||i(y,_.x,_.y2)||i(y,_.x2,_.y2)||(y.x<_.x2&&y.x>_.x||_.x<y.x2&&_.x>y.x)&&(y.y<_.y2&&y.y>_.y||_.y<y.y2&&_.y>y.y)},l=function(y,_,M,x,m,S,P,A){t(y)||(y=[y,_,M,x,m,S,P,A]);var O=c.apply(null,y);return a(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y)},f=function(y,_,M,x,m,S,P,A,O){var R=1-O,H=Math.pow(R,3),N=Math.pow(R,2),K=O*O,V=K*O,k=H*y+N*3*O*M+R*3*O*O*m+V*P,Z=H*_+N*3*O*x+R*3*O*O*S+V*A,X=y+2*O*(M-y)+K*(m-2*M+y),at=_+2*O*(x-_)+K*(S-2*x+_),pt=M+2*O*(m-M)+K*(P-2*m+M),gt=x+2*O*(S-x)+K*(A-2*S+x),ft=R*y+O*M,Rt=R*_+O*x,Nt=R*m+O*P,Dt=R*S+O*A,St=90-Math.atan2(X-pt,at-gt)*180/Math.PI;return{x:k,y:Z,m:{x:X,y:at},n:{x:pt,y:gt},start:{x:ft,y:Rt},end:{x:Nt,y:Dt},alpha:St}},v=function(y,_,M){var x=l(y),m=l(_);if(!o(x,m))return M?0:[];for(var S=r.apply(0,y),P=r.apply(0,_),A=~~(S/8),O=~~(P/8),R=[],H=[],N={},K=M?0:[],V=0;V<A+1;V++){var k=f.apply(0,y.concat(V/A));R.push({x:k.x,y:k.y,t:V/A})}for(var Z=0;Z<O+1;Z++){var X=f.apply(0,_.concat(Z/O));H.push({x:X.x,y:X.y,t:Z/O})}for(var at=0;at<A;at++)for(var pt=0;pt<O;pt++){var gt=R[at],ft=R[at+1],Rt=H[pt],Nt=H[pt+1],Dt=Math.abs(ft.x-gt.x)<.001?"y":"x",St=Math.abs(Nt.x-Rt.x)<.001?"y":"x",xt=n(gt.x,gt.y,ft.x,ft.y,Rt.x,Rt.y,Nt.x,Nt.y);if(xt){if(N[xt.x.toFixed(4)]===xt.y.toFixed(4))continue;N[xt.x.toFixed(4)]=xt.y.toFixed(4);var Ot=gt.t+Math.abs((xt[Dt]-gt[Dt])/(ft[Dt]-gt[Dt]))*(ft.t-gt.t),it=Rt.t+Math.abs((xt[St]-Rt[St])/(Nt[St]-Rt[St]))*(Nt.t-Rt.t);Ot>=0&&Ot<=1&&it>=0&&it<=1&&(M?K++:K.push({x:xt.x,y:xt.y,t1:Ot,t2:it}))}}return K},b=function(y,_,M){y=s(y),_=s(_);for(var x=void 0,m=void 0,S=void 0,P=void 0,A=void 0,O=void 0,R=void 0,H=void 0,N=void 0,K=void 0,V=M?0:[],k=0,Z=y.length;k<Z;k++){var X=y[k];if(X[0]==="M")x=A=X[1],m=O=X[2];else{X[0]==="C"?(N=[x,m].concat(X.slice(1)),x=N[6],m=N[7]):(N=[x,m,x,m,A,O,A,O],x=A,m=O);for(var at=0,pt=_.length;at<pt;at++){var gt=_[at];if(gt[0]==="M")S=R=gt[1],P=H=gt[2];else{gt[0]==="C"?(K=[S,P].concat(gt.slice(1)),S=K[6],P=K[7]):(K=[S,P,S,P,R,H,R,H],S=R,P=H);var ft=v(N,K,M);if(M)V+=ft;else{for(var Rt=0,Nt=ft.length;Rt<Nt;Rt++)ft[Rt].segment1=k,ft[Rt].segment2=at,ft[Rt].bez1=N,ft[Rt].bez2=K;V=V.concat(ft)}}}}}return V};E.exports=function(y,_){return b(y,_)}},function(E,T,e){var t=e(2),u=e(40),s=Object.prototype.hasOwnProperty,h=function(c,n){if(c===null||!u(c))return{};var i={};return t(n,function(a){s.call(c,a)&&(i[a]=c[a])}),i};E.exports=h},function(E,T,e){var t={lc:e(410),lowerCase:e(186),lowerFirst:e(187),substitute:e(411),uc:e(412),upperCase:e(188),upperFirst:e(189)};E.exports=t},function(E,T,e){E.exports=e(186)},function(E,T){var e=function(u,s){return!u||!s?u:u.replace(/\\?\{([^{}]+)\}/g,function(h,r){return h.charAt(0)==="\\"?h.slice(1):s[r]===void 0?"":s[r]})};E.exports=e},function(E,T,e){E.exports=e(188)},function(E,T){function e(t,u,s){var h=void 0,r=void 0,c=void 0,n=void 0,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),h=null,n=t.apply(r,c),h||(r=c=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=u-(f-i);return r=this,c=arguments,v<=0||v>u?(h&&(clearTimeout(h),h=null),i=f,n=t.apply(r,c),h||(r=c=null)):!h&&s.trailing!==!1&&(h=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(h),i=0,h=r=c=null},o}E.exports=e},function(E,T,e){var t=e(17),u={getType:e(190),isArray:e(4),isArrayLike:e(21),isBoolean:e(191),isFunction:e(14),isNil:e(6),isNull:e(417),isNumber:e(11),isObject:e(39),isObjectLike:e(86),isPlainObject:e(40),isPrototype:e(193),isType:t,isUndefined:e(419),isString:e(15),isRegExp:e(418),isDate:e(192),isArguments:e(415),isError:e(416)};E.exports=u},function(E,T,e){var t=e(17),u=function(h){return t(h,"Arguments")};E.exports=u},function(E,T,e){var t=e(17),u=function(h){return t(h,"Error")};E.exports=u},function(E,T){var e=function(u){return u===null};E.exports=e},function(E,T,e){var t=e(17),u=function(h){return t(h,"RegExp")};E.exports=u},function(E,T){var e=function(u){return u===void 0};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(h){return h&&h.__esModule?h:{default:h}}T.default=u.default.generateBaseTypedComponent("Axis")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,g){for(var y=0;y<g.length;y++){var _=g[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,y){return g&&v(b.prototype,g),y&&v(b,y),b}}(),u=e(42),s=i(u),h=e(29),r=i(h),c=e(545),n=i(c);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function l(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}(0,n.default)(s.default.PureComponent,"`React.PureComponent` needs React >=15.3.0");var f=function(v){l(b,v);function b(){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var y=this.props,_=y.width,M=y.height,x=y.placeholder;return s.default.createElement("div",{style:{width:_,height:M}},x)}}]),b}(s.default.PureComponent||s.default.Component);f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),placeholder:r.default.node},f.defaultProps={width:"100%",placeholder:s.default.createElement("div",{style:{position:"relative",top:"48%",textAlign:"center"}},"\u6682\u65E0\u6570\u636E")},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var m=1;m<arguments.length;m++){var S=arguments[m];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},u=function(){function x(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,S,P){return S&&x(m.prototype,S),P&&x(m,P),m}}(),s=e(42),h=l(s),r=e(423),c=l(r),n=e(421),i=l(n),a=e(425),o=l(a);function l(x){return x&&x.__esModule?x:{default:x}}function f(x,m){var S={};for(var P in x)m.indexOf(P)>=0||!Object.prototype.hasOwnProperty.call(x,P)||(S[P]=x[P]);return S}function v(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function b(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function g(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}function y(x){var m=!0;return(x==null||x.length===0||x.rows&&x.rows.length===0)&&(m=!1),!!m}var _=function(x){g(m,x);function m(){var S,P,A,O;v(this,m);for(var R=arguments.length,H=Array(R),N=0;N<R;N++)H[N]=arguments[N];return O=(P=(A=b(this,(S=m.__proto__||Object.getPrototypeOf(m)).call.apply(S,[this].concat(H))),A),A._refCallback=function(K){K&&(A.chart=K.getG2Instance())},A.hasViewSource=function(){var K=!1;return h.default.Children.map(A.props.children,function(V){!K&&V&&typeof V.type=="function"&&V.type.name==="View"&&V.props.data&&y(V.props.data)&&(K=!0)}),K},P),b(A,O)}return u(m,[{key:"getG2Instance",value:function(){return this.chart}},{key:"render",value:function(){var P=this.props,A=P.data,O=P.width,R=P.height,H=P.placeholder,N=P.className,K=P.style;return h.default.createElement("div",{className:N,style:K},y(A)||this.hasViewSource()||!H?h.default.createElement(c.default,t({ref:this._refCallback},this.props)):h.default.createElement(i.default,{width:O,height:R,placeholder:H===!0?void 0:H}))}}]),m}(h.default.PureComponent||h.default.Component),M=function(x){g(m,x);function m(){return v(this,m),b(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return u(m,[{key:"render",value:function(){var P=this.props,A=P.widthErrorBoundary,O=f(P,["widthErrorBoundary"]);return A===!1?h.default.createElement(_,O):h.default.createElement(o.default,null,h.default.createElement(_,O))}}]),m}(h.default.Component);T.default=M},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var m=1;m<arguments.length;m++){var S=arguments[m];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},u=function(){function x(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,S,P){return S&&x(m.prototype,S),P&&x(m,P),m}}(),s=e(42),h=v(s),r=e(29),c=v(r),n=e(436),i=v(n),a=e(543),o=v(a),l=e(538),f=v(l);function v(x){return x&&x.__esModule?x:{default:x}}function b(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function g(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function y(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}var _=function(x){y(m,x);function m(S){b(this,m);var P=g(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,S));return M.call(P),P.name="Chart",P.gId=0,P.id=P.createId(),P.g2Processor=new i.default,P.forceFit=(0,f.default)(function(){!P.chart||P.chart.forceFit()},300),P}return u(m,[{key:"getChildContext",value:function(){return{addElement:this.addElement,updateElement:this.updateElement,deleteElement:this.deleteElement,createId:this.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}},{key:"componentDidMount",value:function(){if(this.addElement(this.name,this.id,t({},this.props,{container:this.containerWrap})),this.chart=this.g2Processor.createG2Instance(),this.notifyG2Instance(),this.props.forceFit){var P=new o.default(this.forceFit);P.observe(this.containerWrap),this.observe=P}}},{key:"componentDidUpdate",value:function(){this.updateElement(this.name,this.id,t({},this.props,{container:this.containerWrap}));var P=this.g2Processor.batchedUpdate();this.chart!==P&&(this.chart=P,this.notifyG2Instance()),this.props.forceUpdate&&this.chart.forceFit()}},{key:"componentWillUnmount",value:function(){this.g2Processor.destory(),this.chart=null,this.forceFit&&this.forceFit.cancel(),this.observe&&this.observe.unobserve(this.containerWrap),this.containerWrap=null}},{key:"getG2Instance",value:function(){return this.chart}},{key:"notifyG2Instance",value:function(){this.props.onGetG2Instance&&this.props.onGetG2Instance(this.chart)}},{key:"render",value:function(){return h.default.createElement("div",{ref:this.refHandle},this.props.children)}}]),m}(s.Component);_.propTypes={data:c.default.oneOfType([c.default.arrayOf(c.default.object),c.default.object]),scale:c.default.oneOfType([c.default.object,c.default.array]),animate:c.default.bool,width:c.default.number,height:c.default.number.isRequired,onGetG2Instance:c.default.func,forceFit:c.default.bool,forceUpdate:c.default.bool},_.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func};var M=function(){var m=this;this.getViewId=function(){},this.getParentInfo=function(){return{id:m.id,name:m.name}},this.createId=function(){return m.gId+=1,m.gId},this.addElement=function(S,P,A,O,R){return m.g2Processor.addElement(S,P,A,O,R)},this.updateElement=function(S,P,A,O,R){m.g2Processor.updateElement(S,P,A,O,R)},this.deleteElement=function(S,P,A){m.g2Processor.deleteElement(S,P,A)},this.refHandle=function(S){m.containerWrap||(m.containerWrap=S)}};T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(h){return h&&h.__esModule?h:{default:h}}T.default=u.default.generateBaseTypedComponent("Coord")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function a(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}return function(o,l,f){return l&&a(o.prototype,l),f&&a(o,f),o}}(),u=e(42),s=h(u);function h(a){return a&&a.__esModule?a:{default:a}}function r(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function c(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function n(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var i=function(a){n(o,a);function o(l){r(this,o);var f=c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,l));return f.state={hasError:!1},f}return t(o,[{key:"shouldComponentUpdate",value:function(){return this.state.hasError&&this.setState({hasError:!1}),!0}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"unstable_handleError",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?s.default.createElement("h1",null,"bizcharts error."):this.props.children}}]),o}(s.default.Component);T.default=i},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(285);var t=e(24),u=s(t);function s(h){return h&&h.__esModule?h:{default:h}}T.default=u.default.generateBaseTypedComponent("Facet")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(292);var t=e(24),u=s(t);function s(h){return h&&h.__esModule?h:{default:h}}T.default=u.default.generateBaseTypedComponent("Geom")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(r){return r&&r.__esModule?r:{default:r}}var h=u.default.generateBaseTypedComponent("Guide");h.Line=u.default.generateBaseTypedComponent("GuideLine"),h.Image=u.default.generateBaseTypedComponent("GuideImage"),h.Text=u.default.generateBaseTypedComponent("GuideText"),h.Region=u.default.generateBaseTypedComponent("GuideRegion"),h.Html=u.default.generateBaseTypedComponent("GuideHtml"),h.Arc=u.default.generateBaseTypedComponent("GuideArc"),h.RegionFilter=u.default.generateBaseTypedComponent("GuideRegionFilter"),h.DataMarker=u.default.generateBaseTypedComponent("GuideDataMarker"),h.DataRegion=u.default.generateBaseTypedComponent("GuideDataRegion"),T.default=h},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,g){for(var y=0;y<g.length;y++){var _=g[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,y){return g&&v(b.prototype,g),y&&v(b,y),b}}(),u=e(537),s=i(u),h=e(24),r=i(h),c=e(29),n=i(c);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function l(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var f=function(v){l(b,v);function b(g){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,"Label"))}return t(b,[{key:"componentWillMount",value:function(){var y=this.context.getParentInfo();(0,s.default)(y.name==="Geom","`<Label />` must be wrapped in `<Geom />`"),this.id=this.context.createId(),this.context.addElement(this.name,this.id,this.props,this.context.getParentInfo(),this.context.getViewId())}}]),b}(r.default);f.contextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},f.childContextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=r(t),s=e(29),h=r(s);function r(o){return o&&o.__esModule?o:{default:o}}function c(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function n(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function i(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var a=function(o){i(l,o);function l(f){return c(this,l),n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,f,"Legend"))}return l}(u.default);a.contextTypes={addElement:h.default.func,updateElement:h.default.func,deleteElement:h.default.func,createId:h.default.func,getParentInfo:h.default.func,getViewId:h.default.func},a.childContextTypes={addElement:h.default.func,updateElement:h.default.func,deleteElement:h.default.func,createId:h.default.func,getParentInfo:h.default.func,getViewId:h.default.func},a.defaultProps={visible:!0},T.default=a},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(h){return h&&h.__esModule?h:{default:h}}T.default=u.default.generateBaseTypedComponent("Tooltip")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function l(f,v){for(var b=0;b<v.length;b++){var g=v[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(f,v,b){return v&&l(f.prototype,v),b&&l(f,b),f}}(),u=e(24),s=c(u),h=e(29),r=c(h);function c(l){return l&&l.__esModule?l:{default:l}}function n(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function i(l,f){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:l}function a(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(l,f):l.__proto__=f)}var o=function(l){a(f,l);function f(v){n(this,f);var b=i(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,v,"View"));return b.getViewId=function(){return b.id},b}return t(f,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}}]),f}(s.default);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},T.default=o},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"addChart",Coord:"addCoord",Geom:"addGeom",Axis:"addAxis",Tooltip:"addTooltip",Legend:"addLegend",Label:"addLabel",View:"addView",Guide:"addGuide",GuideLine:"addGuideLine",GuideImage:"addGuideImage",GuideText:"addGuideText",GuideRegion:"addGuideRegion",GuideHtml:"addGuideHtml",GuideArc:"addGuideArc",GuideRegionFilter:"addGuideRegionFilter",GuideDataMarker:"addGuideDataMarker",GuideDataRegion:"addGuideDataRegion",Facet:"addFacet"},u={addElement:function(h,r,c){this[t[h]](r,c,c.id,c.viewId,c.parentInfo)},getConfigContainer:function(h,r){return r&&(h.views||(h.views={}),h=h.views[r],h||(h={},h.views[r]=h)),h},addUniqueElement:function(h,r,c,n,i){var a=this.getConfigContainer(h,i);return a[r],a[r]=c,n},addChart:function(h,r,c){return this.addUniqueElement(h,"chart",r,c,null)},addView:function(h,r,c){return h.views||(h.views={}),h.views[c]=r,c},addAxis:function(h,r,c,n){var i=this.getConfigContainer(h,n);return i.axises||(i.axises={}),i.axises[c]=r,c},addCoord:function(h,r,c,n){return this.addUniqueElement(h,"coord",r,c,n)},addGeom:function(h,r,c,n,i){var a=this.getConfigContainer(h,n);return a.geoms||(a.geoms={}),a.geoms[c]?i?a.geoms[c].label=r.label:(a.geoms[c].label||console.log("geom label error"),r.label=a.geoms[c].label,a.geoms[c]=r):a.geoms[c]=r,c},addLabel:function(h,r,c,n,i){var a=this.getConfigContainer(h,n);return a.geoms||(a.geoms={}),this.addGeom(h,{label:r},i.id,n,!0),c},addTooltip:function(h,r,c,n){return this.addUniqueElement(h,"tooltip",r,c,n)},addFacet:function(h,r,c,n){return this.addUniqueElement(h,"facet",r,c,n)},addLegend:function(h,r,c,n){var i=this.getConfigContainer(h,n);return i.legends||(i.legends={}),i.legends[c]=r,c},addGuide:function(h,r,c,n){return this.addUniqueElement(h,"guide",r,c,n)},addTypedGuide:function(h,r,c,n,i,a){var o=this.getConfigContainer(h,i),l=o.guide;return l||(this.addUniqueElement("guide",{},a.id,i),l=o.guide),l.elements||(l.elements={}),c.type=r,l.elements[n]=c,n},addGuideLine:function(h,r,c,n,i){this.addTypedGuide(h,"line",r,c,n,i)},addGuideImage:function(h,r,c,n,i){this.addTypedGuide(h,"image",r,c,n,i)},addGuideText:function(h,r,c,n,i){this.addTypedGuide(h,"text",r,c,n,i)},addGuideRegion:function(h,r,c,n,i){this.addTypedGuide(h,"region",r,c,n,i)},addGuideHtml:function(h,r,c,n,i){this.addTypedGuide(h,"html",r,c,n,i)},addGuideArc:function(h,r,c,n,i){this.addTypedGuide(h,"arc",r,c,n,i)},addGuideRegionFilter:function(h,r,c,n,i){this.addTypedGuide(h,"regionFilter",r,c,n,i)},addGuideDataMarker:function(h,r,c,n,i){this.addTypedGuide(h,"dataMarker",r,c,n,i)},addGuideDataRegion:function(h,r,c,n,i){this.addTypedGuide(h,"dataRegion",r,c,n,i)}};T.default=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(r){if(Array.isArray(r)){for(var c=0,n=Array(r.length);c<r.length;c++)n[c]=r[c];return n}else return Array.from(r)}var u={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",Facet:"deleteFacet"},s={Geom:!0,Label:!0,Facet:!0},h={deleteAxis:function(c,n,i){var a=n.axises[i].props;c.axis(a.name,!1)},deleteTooltip:function(c){c.tooltip(!1)},deleteCoord:function(c){c.coord("rect",{})},deleteLegend:function(c,n,i){var a=n.legends[i].props;c.legend.apply(c,t(a.name?[a.name,!1]:[!1]))},deleteGuide:function(c){c.guide().clear()},deleteView:function(c,n,i){!n.views[i].g2Instance||(c.removeView(n.views[i].g2Instance),delete n.views[i].g2Instance)},deleteViewElement:function(c,n,i,a){var o=this;Object.keys(i).forEach(function(l){var f=a[l],v=f.viewId;v&&(s[f.name]?n.views[v].needReExecute=!0:n.views[v].g2Instance&&o[u[f.name]]&&o[u[f.name]](n.views[v].g2Instance,n.views[v],f.id))})},needReExecute:function(c,n){for(var i in c)if(s[n[i].name]&&!n[i].viewId)return!0;return!1},synchronizeG2Delete:function(c,n,i,a){var o=this;Object.keys(i).forEach(function(l){var f=u[a[l].name];o[f]&&!a[l].viewId&&o[f](c,n,l)}),this.deleteViewElement(c,n,i,a)}};T.default=h},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},u=e(88),s=e(195),h=l(s),r=e(197),c=l(r),n=e(87),i=l(n),a=e(196),o=l(a);function l(_){return _&&_.__esModule?_:{default:_}}function f(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function v(_,M){var x={};for(var m in _)M.indexOf(m)>=0||!Object.prototype.hasOwnProperty.call(_,m)||(x[m]=_[m]);return x}var b=h.default.COORD_FUNC_PROPS,g=h.default.GEOM_FUNC_PROPS,y={needRebuildChart:function(M){if(M.chart.props==null||M.chart.updateProps==null)return!1;var x=M.chart.props,m=M.chart.updateProps;return!u.Util.shallowEqual(x.padding,m.padding)||!u.Util.shallowEqual(x.background,m.background)||!u.Util.shallowEqual(x.plotBackground,m.plotBackground)||!u.Util.shallowEqual(x.pixelRatio,m.pixelRatio)},needReExecute:function(M){var x=M.geoms;if(x==null)return!1;for(var m in x)if(x[m].props&&x[m].updateProps&&(x[m].props.type!==x[m].updateProps.type||x[m].props.color&&!x[m].updateProps.color||x[m].props.size&&!x[m].updateProps.size||x[m].props.shape&&!x[m].updateProps.shape))return!0;return!1},needRepaint:function(M){var x=M.chart,m=x.props.data,S=x.updateProps.data;return m===S},synchronizeG2Update:function(M,x){this.updateChart(M,x.chart),this.updateAxises(M,x.axises),this.updateTooltip(M,x),this.updateCoord(M,x),this.updateLegends(M,x.legends),this.updateGeoms(M,x.geoms),this.updateGuide(M,x.guide),this.updateFacet(M,x),this.updateViews(M,x)},updateChart:function(M,x){if(!!x){var m=x.props,S=x.updateProps,P=m.width,A=m.height,O=m.animate,R=m.data,H=m.scale,N=S.width,K=S.height,V=S.animate,k=S.data,Z=S.scale;R!==k&&M.changeData(k),u.Util.shallowEqual(H,Z)||(u.Util.isArray(Z)?M.scale(Z[0],Z[1]):M.scale(Z)),O!==V&&M.animate(V),P!==N&&A!==K?M.changeSize(N,K):P!==N?M.changeWidth(N):A!==K&&M.changeHeight(K),o.default.updateEvents(M,o.default.chartEvents,x.props,S),o.default.updateBaseEvents(M,x.updateProps,S)}},updateAxis:function(M,x){var m=x.props,S=m.name,P=m.visible,A=v(m,["name","visible"]),O=x.updateProps,R=O.name,H=O.visible,N=v(O,["name","visible"]);P!==H&&M.axis(S,!!H),u.Util.shallowEqual(A,N)||M.axis(S,N)},updateAxises:function(M,x){if(!!x)for(var m in x)x[m]&&x[m].props&&x[m].updateProps&&this.updateAxis(M,x[m])},updateTooltip:function(M,x){if(!!x.tooltip){var m=x.tooltip.props,S=x.tooltip.updateProps;m==null&&S==null||u.Util.shallowEqual(m,S)||M.tooltip(t({},S))}},updateCoord:function(M,x){var m=x.coord;if(!!m){var S=m.props,P=m.updateProps;if(!(S==null||P==null)){var A=u.Util.without(P,b.concat(["type"]));if(!u.Util.shallowEqual(S,P)){var O=M.coord(P.type,A);m.g2Instance=O,u.Prop.init(b,P,function(R,H){H==="reflect"?u.Util.each(R,function(N){return O[H](N)}):H==="transpose"?R[0]===!0&&O[H].apply(O,f(R)):O[H].apply(O,f(R))})}}}},updateLegend:function(M,x){var m=x.props,S=x.updateProps;if(!!S&&!u.Util.shallowEqual(m,S)){var P=S.name,A=S.visible,O=v(S,["name","visible"]),R=A&&O;M.legend.apply(M,f(P?[P,R]:[R]))}},updateLegends:function(M,x){if(x!=null)for(var m in x)x[m]&&this.updateLegend(M,x[m])},updateLabel:function(M,x,m){if(!(x==null||m==null)){var S=x.content,P=v(x,["content"]),A=m.content,O=v(m,["content"]);(!u.Util.shallowEqual(P,O)||!u.Util.shallowEqual(S,A))&&(u.Util.isArray(A)?M.label(A[0],A[1],O):M.label(A,O))}},updateGeom:function(M,x){var m=x.props,S=x.updateProps;if(!(!m||!S)&&m.type===S.type){var P=x.g2Instance;if(u.Util.shallowEqual(m,S)){x.label&&this.updateLabel(P,x.label.props,x.label.updateProps);return}var A=m.adjust,O=v(m,["adjust"]),R=S.adjust,H=v(S,["adjust"]);(A||R)&&P.adjust(R),u.Prop.update(g,O,H,function(N,K){P[K].apply(P,f(N))}),x.label&&this.updateLabel(P,x.label.props,x.label.updateProps)}},updateGeoms:function(M,x){if(x==null)return!1;for(var m in x)x[m]&&this.updateGeom(M,x[m]);return!1},isTypedGuideChanged:function(M){return!u.Util.shallowEqual(M.props,M.updateProps)},updateGuide:function(M,x){if(!(!x||!x.elements)){var m=x.elements,S=!1;for(var P in m)if(m[P]&&(m[P].updateProps||this.isTypedGuideChanged(m[P]))){S=!0;break}S&&(i.default.mergeGuide(x,!0),M.guide().clear(),c.default.guide(M,x))}},updateView:function(M,x){if(!(!x||!x.props||!x.updateProps||x.parentInfo.name==="Facet")){var m=x.g2Instance,S=x.props,P=x.updateProps,A=S.scale,O=S.data,R=S.animate,H=S.axis,N=S.filter,K=P.scale,V=P.animate,k=P.data,Z=P.axis,X=P.filter;R!==V&&m.animate(V),O!==k&&m.changeData(k),u.Util.shallowEqual(A,K)||m.scale(K),u.Util.shallowEqual(N,X)||X.forEach(function(at){m.filter(at[0],at[1])}),H!==Z&&m.axis(Z),this.updateCoord(m,x),this.updateAxises(m,x.axises),this.updateGeoms(m,x.geoms),this.updateGuide(m,x.guide)}},updateViews:function(M,x){var m=x.views;if(!!m)for(var S in m){var P=m[S];P&&(P.needReExecute||this.needReExecute(P))?(c.default.synchronizeG2View(P.g2Instance,P),m[S].needReExecute=!1):this.updateView(M,P)}},updateFacet:function(M,x){var m=x.facet;if(!!m){var S=m.props,P=m.updateProps;if(!(S==null||P==null)){var A=S.type,O=v(S,["type"]),R=P.type,H=v(P,["type"]);(A!==R||!u.Util.shallowEqual(O,H))&&(m.props=P,c.default.facet(M,x))}}}};T.default=y},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(M){for(var x=1;x<arguments.length;x++){var m=arguments[x];for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(M[S]=m[S])}return M},u=function(){function M(x,m){for(var S=0;S<m.length;S++){var P=m[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,m,S){return m&&M(x.prototype,m),S&&M(x,S),x}}(),s=e(433),h=b(s),r=e(87),c=b(r),n=e(435),i=b(n),a=e(434),o=b(a),l=e(197),f=b(l),v=e(88);function b(M){return M&&M.__esModule?M:{default:M}}function g(M,x){var m={};for(var S in M)x.indexOf(S)>=0||!Object.prototype.hasOwnProperty.call(M,S)||(m[S]=M[S]);return m}function y(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}var _=function(){function M(){y(this,M),this.config={},this.elementInfos={},this.added=!1,this.initedG2=!1,this.updated=!1,this.deleted=!1,this.deleteInfos={}}return u(M,[{key:"calUpdateFlag",value:function(m,S){var P=this.elementInfos[S].props,A=P.children,O=g(P,["children"]),R=this.elementInfos[S].updateProps,H=R.children,N=g(R,["children"]);if(m==="Chart"||m==="View"){var K=O.data,V=g(O,["data"]),k=N.data,Z=g(N,["data"]);(K!==k||!v.Util.isEqual(V,Z))&&(this.updated=!0)}else v.Util.isEqual(O,N)||(this.updated=!0)}},{key:"addElement",value:function(m,S,P,A,O){!this.chart&&this.initedG2||(this.added=!0,this.elementInfos[S]={id:S,viewId:O,parentInfo:A,name:m,props:t({},P)},A&&!this.elementInfos[A.id]&&(this.elementInfos[A.id]={id:A.id,name:A.name}),h.default.addElement(m,this.config,this.elementInfos[S]))}},{key:"updateElement",value:function(m,S,P){this.elementInfos[S].updateProps=t({},P),this.calUpdateFlag(m,S)}},{key:"deleteElement",value:function(m,S){!this.chart||(this.deleteInfos[S]=S,this.deleted=!0)}},{key:"createG2Instance",value:function(){var m=this.config,S=f.default.createChart(m,this.elementInfos);return f.default.executeChartConfig(S,m,this.elementInfos),f.default.synchronizeG2Add(S,m,this.elementInfos),S.render(),this.chart=S,this.initedG2=!0,this.resetStates(),S}},{key:"destory",value:function(){this.chart.destroy(),this.chart=null}},{key:"resetStates",value:function(){var m=this.elementInfos;for(var S in m)m[S].updateProps&&delete m[S].updateProps,this.deleteInfos[S]&&delete m[S];this.added=!1,this.updated=!1,this.deleteInfos={}}},{key:"reExecuteChart",value:function(){return this.chart.clear(),c.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),f.default.executeChartConfig(this.chart,this.config,this.elementInfos),f.default.synchronizeG2Add(this.chart,this.config,this.elementInfos),this.chart.repaint(),this.resetStates(),this.chart}},{key:"batchedUpdate",value:function(){return this.chart==null?null:this.config.chart.props.forceUpdate||i.default.needRebuildChart(this.config)?(c.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),this.chart.destroy(),this.chart="destroy",this.createG2Instance()):o.default.needReExecute(this.deleteInfos,this.elementInfos)||i.default.needReExecute(this.config)?(this.reExecuteChart(),this.chart):(this.deleted&&(o.default.synchronizeG2Delete(this.chart,this.config,this.deleteInfos,this.elementInfos),c.default.mergeDelete(this.config,this.deleteInfos,this.elementInfos)),this.added&&f.default.synchronizeG2Add(this.chart,this.config),this.updated&&i.default.synchronizeG2Update(this.chart,this.config),(this.added||this.deleted||this.updated)&&this.chart.repaint(),c.default.mergeUpdate(this.config,!1),this.resetStates(),this.chart)}}]),M}();T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(58),u=s(t);function s(h){return h&&h.__esModule?h:{default:h}}T.default={init:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments[1],n=arguments[2];u.default.each(r,function(i){var a=c[i];a!==void 0&&(u.default.isArray(a)||(a=[a]),n(a,i))})},update:function(r,c,n,i){var a=void 0,o=void 0;u.default.each(r,function(l){a=c[l],o=n[l],u.default.shallowEqual(o,a)||(u.default.isArray(o)||(o=[o]),i(o,l))})}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={}},function(E,T,e){"use strict";T.a=v;var t=e(90),u=e(89),s=e(198),h=-.14861,r=1.78277,c=-.29227,n=-.90649,i=1.97294,a=i*n,o=i*r,l=r*c-n*h;function f(g){if(g instanceof b)return new b(g.h,g.s,g.l,g.opacity);g instanceof u.a||(g=e.i(u.b)(g));var y=g.r/255,_=g.g/255,M=g.b/255,x=(l*M+a*y-o*_)/(l+a-o),m=M-x,S=(i*(_-x)-c*m)/n,P=Math.sqrt(S*S+m*m)/(i*x*(1-x)),A=P?Math.atan2(S,m)*s.a-120:NaN;return new b(A<0?A+360:A,P,x,g.opacity)}function v(g,y,_,M){return arguments.length===1?f(g):new b(g,y,_,M==null?1:M)}function b(g,y,_,M){this.h=+g,this.s=+y,this.l=+_,this.opacity=+M}e.i(t.a)(b,v,e.i(t.b)(u.c,{brighter:function(g){return g=g==null?u.d:Math.pow(u.d,g),new b(this.h,this.s,this.l*g,this.opacity)},darker:function(g){return g=g==null?u.e:Math.pow(u.e,g),new b(this.h,this.s,this.l*g,this.opacity)},rgb:function(){var g=isNaN(this.h)?0:(this.h+120)*s.b,y=+this.l,_=isNaN(this.s)?0:this.s*y*(1-y),M=Math.cos(g),x=Math.sin(g);return new u.a(255*(y+_*(h*M+r*x)),255*(y+_*(c*M+n*x)),255*(y+_*(i*M)),this.opacity)}}))},function(E,T,e){"use strict";T.b=b,T.a=P;var t=e(90),u=e(89),s=e(198),h=18,r=.96422,c=1,n=.82521,i=4/29,a=6/29,o=3*a*a,l=a*a*a;function f(R){if(R instanceof g)return new g(R.l,R.a,R.b,R.opacity);if(R instanceof A)return O(R);R instanceof u.a||(R=e.i(u.b)(R));var H=x(R.r),N=x(R.g),K=x(R.b),V=y((.2225045*H+.7168786*N+.0606169*K)/c),k,Z;return H===N&&N===K?k=Z=V:(k=y((.4360747*H+.3850649*N+.1430804*K)/r),Z=y((.0139322*H+.0971045*N+.7141733*K)/n)),new g(116*V-16,500*(k-V),200*(V-Z),R.opacity)}function v(R,H){return new g(R,0,0,H==null?1:H)}function b(R,H,N,K){return arguments.length===1?f(R):new g(R,H,N,K==null?1:K)}function g(R,H,N,K){this.l=+R,this.a=+H,this.b=+N,this.opacity=+K}e.i(t.a)(g,b,e.i(t.b)(u.c,{brighter:function(R){return new g(this.l+h*(R==null?1:R),this.a,this.b,this.opacity)},darker:function(R){return new g(this.l-h*(R==null?1:R),this.a,this.b,this.opacity)},rgb:function(){var R=(this.l+16)/116,H=isNaN(this.a)?R:R+this.a/500,N=isNaN(this.b)?R:R-this.b/200;return H=r*_(H),R=c*_(R),N=n*_(N),new u.a(M(3.1338561*H-1.6168667*R-.4906146*N),M(-.9787684*H+1.9161415*R+.033454*N),M(.0719453*H-.2289914*R+1.4052427*N),this.opacity)}}));function y(R){return R>l?Math.pow(R,1/3):R/o+i}function _(R){return R>a?R*R*R:o*(R-i)}function M(R){return 255*(R<=.0031308?12.92*R:1.055*Math.pow(R,1/2.4)-.055)}function x(R){return(R/=255)<=.04045?R/12.92:Math.pow((R+.055)/1.055,2.4)}function m(R){if(R instanceof A)return new A(R.h,R.c,R.l,R.opacity);if(R instanceof g||(R=f(R)),R.a===0&&R.b===0)return new A(NaN,0<R.l&&R.l<100?0:NaN,R.l,R.opacity);var H=Math.atan2(R.b,R.a)*s.a;return new A(H<0?H+360:H,Math.sqrt(R.a*R.a+R.b*R.b),R.l,R.opacity)}function S(R,H,N,K){return arguments.length===1?m(R):new A(N,H,R,K==null?1:K)}function P(R,H,N,K){return arguments.length===1?m(R):new A(R,H,N,K==null?1:K)}function A(R,H,N,K){this.h=+R,this.c=+H,this.l=+N,this.opacity=+K}function O(R){if(isNaN(R.h))return new g(R.l,0,0,R.opacity);var H=R.h*s.b;return new g(R.l,Math.cos(H)*R.c,Math.sin(H)*R.c,R.opacity)}e.i(t.a)(A,P,e.i(t.b)(u.c,{brighter:function(R){return new A(this.h,this.c,this.l+h*(R==null?1:R),this.opacity)},darker:function(R){return new A(this.h,this.c,this.l-h*(R==null?1:R),this.opacity)},rgb:function(){return O(this).rgb()}}))},function(E,T,e){"use strict";var t={value:function(){}};function u(){for(var n=0,i=arguments.length,a={},o;n<i;++n){if(!(o=arguments[n]+"")||o in a||/[\s.]/.test(o))throw new Error("illegal type: "+o);a[o]=[]}return new s(a)}function s(n){this._=n}function h(n,i){return n.trim().split(/^|\s+/).map(function(a){var o="",l=a.indexOf(".");if(l>=0&&(o=a.slice(l+1),a=a.slice(0,l)),a&&!i.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:o}})}s.prototype=u.prototype={constructor:s,on:function(n,i){var a=this._,o=h(n+"",a),l,f=-1,v=o.length;if(arguments.length<2){for(;++f<v;)if((l=(n=o[f]).type)&&(l=r(a[l],n.name)))return l;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++f<v;)if(l=(n=o[f]).type)a[l]=c(a[l],n.name,i);else if(i==null)for(l in a)a[l]=c(a[l],n.name,null);return this},copy:function(){var n={},i=this._;for(var a in i)n[a]=i[a].slice();return new s(n)},call:function(n,i){if((l=arguments.length-2)>0)for(var a=new Array(l),o=0,l,f;o<l;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],o=0,l=f.length;o<l;++o)f[o].value.apply(i,a)},apply:function(n,i,a){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],l=0,f=o.length;l<f;++l)o[l].value.apply(i,a)}};function r(n,i){for(var a=0,o=n.length,l;a<o;++a)if((l=n[a]).name===i)return l.value}function c(n,i,a){for(var o=0,l=n.length;o<l;++o)if(n[o].name===i){n[o]=t,n=n.slice(0,o).concat(n.slice(o+1));break}return a!=null&&n.push({name:i,value:a}),n}T.a=u},function(E,T,e){"use strict";var t=e(441);e.d(T,"a",function(){return t.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return u}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return h});var t=1.70158,u=function r(c){c=+c;function n(i){return i*i*((c+1)*i-c)}return n.overshoot=r,n}(t),s=function r(c){c=+c;function n(i){return--i*i*((c+1)*i+c)+1}return n.overshoot=r,n}(t),h=function r(c){c=+c;function n(i){return((i*=2)<1?i*i*((c+1)*i-c):(i-=2)*i*((c+1)*i+c)+2)/2}return n.overshoot=r,n}(t)},function(E,T,e){"use strict";T.b=l,T.a=f,T.c=v;var t=4/11,u=6/11,s=8/11,h=3/4,r=9/11,c=10/11,n=15/16,i=21/22,a=63/64,o=1/t/t;function l(b){return 1-f(1-b)}function f(b){return(b=+b)<t?o*b*b:b<s?o*(b-=u)*b+h:b<c?o*(b-=r)*b+n:o*(b-=i)*b+a}function v(b){return((b*=2)<=1?1-f(1-b):f(b-1)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(h){return 1-Math.sqrt(1-h*h)}function u(h){return Math.sqrt(1- --h*h)}function s(h){return((h*=2)<=1?1-Math.sqrt(1-h*h):Math.sqrt(1-(h-=2)*h)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(h){return h*h*h}function u(h){return--h*h*h+1}function s(h){return((h*=2)<=1?h*h*h:(h-=2)*h*h+2)/2}},function(E,T,e){"use strict";e.d(T,"b",function(){return h}),e.d(T,"a",function(){return r}),e.d(T,"c",function(){return c});var t=2*Math.PI,u=1,s=.3,h=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return i*Math.pow(2,10*--f)*Math.sin((o-f)/a)}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s),r=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return 1-i*Math.pow(2,-10*(f=+f))*Math.sin((f+o)/a)}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s),c=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return((f=f*2-1)<0?i*Math.pow(2,10*f)*Math.sin((o-f)/a):2-i*Math.pow(2,-10*f)*Math.sin((o+f)/a))/2}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s)},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(h){return Math.pow(2,10*h-10)}function u(h){return 1-Math.pow(2,-10*h)}function s(h){return((h*=2)<=1?Math.pow(2,10*h-10):2-Math.pow(2,10-10*h))/2}},function(E,T,e){"use strict";T.a=t;function t(u){return+u}},function(E,T,e){"use strict";e.d(T,"b",function(){return u}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return h});var t=3,u=function r(c){c=+c;function n(i){return Math.pow(i,c)}return n.exponent=r,n}(t),s=function r(c){c=+c;function n(i){return 1-Math.pow(1-i,c)}return n.exponent=r,n}(t),h=function r(c){c=+c;function n(i){return((i*=2)<=1?Math.pow(i,c):2-Math.pow(2-i,c))/2}return n.exponent=r,n}(t)},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(h){return h*h}function u(h){return h*(2-h)}function s(h){return((h*=2)<=1?h*h:--h*(2-h)+1)/2}},function(E,T,e){"use strict";T.b=s,T.c=h,T.a=r;var t=Math.PI,u=t/2;function s(c){return 1-Math.cos(c*u)}function h(c){return Math.sin(c*u)}function r(c){return(1-Math.cos(t*c))/2}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(92);e.d(T,"interpolate",function(){return t.a});var u=e(200);e.d(T,"interpolateArray",function(){return u.a});var s=e(91);e.d(T,"interpolateBasis",function(){return s.a});var h=e(201);e.d(T,"interpolateBasisClosed",function(){return h.a});var r=e(203);e.d(T,"interpolateDate",function(){return r.a});var c=e(59);e.d(T,"interpolateNumber",function(){return c.a});var n=e(204);e.d(T,"interpolateObject",function(){return n.a});var i=e(459);e.d(T,"interpolateRound",function(){return i.a});var a=e(206);e.d(T,"interpolateString",function(){return a.a});var o=e(461);e.d(T,"interpolateTransformCss",function(){return o.a}),e.d(T,"interpolateTransformSvg",function(){return o.b});var l=e(463);e.d(T,"interpolateZoom",function(){return l.a});var f=e(205);e.d(T,"interpolateRgb",function(){return f.a}),e.d(T,"interpolateRgbBasis",function(){return f.b}),e.d(T,"interpolateRgbBasisClosed",function(){return f.c});var v=e(456);e.d(T,"interpolateHsl",function(){return v.a}),e.d(T,"interpolateHslLong",function(){return v.b});var b=e(457);e.d(T,"interpolateLab",function(){return b.a});var g=e(455);e.d(T,"interpolateHcl",function(){return g.a}),e.d(T,"interpolateHclLong",function(){return g.b});var y=e(454);e.d(T,"interpolateCubehelix",function(){return y.a}),e.d(T,"interpolateCubehelixLong",function(){return y.b});var _=e(458);e.d(T,"quantize",function(){return _.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return h});var t=e(12),u=e(41);function s(r){return function c(n){n=+n;function i(a,o){var l=r((a=e.i(t.a)(a)).h,(o=e.i(t.a)(o)).h),f=e.i(u.a)(a.s,o.s),v=e.i(u.a)(a.l,o.l),b=e.i(u.a)(a.opacity,o.opacity);return function(g){return a.h=l(g),a.s=f(g),a.l=v(Math.pow(g,n)),a.opacity=b(g),a+""}}return i.gamma=c,i}(1)}T.a=s(u.b);var h=s(u.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return h});var t=e(12),u=e(41);function s(r){return function(c,n){var i=r((c=e.i(t.b)(c)).h,(n=e.i(t.b)(n)).h),a=e.i(u.a)(c.c,n.c),o=e.i(u.a)(c.l,n.l),l=e.i(u.a)(c.opacity,n.opacity);return function(f){return c.h=i(f),c.c=a(f),c.l=o(f),c.opacity=l(f),c+""}}}T.a=s(u.b);var h=s(u.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return h});var t=e(12),u=e(41);function s(r){return function(c,n){var i=r((c=e.i(t.d)(c)).h,(n=e.i(t.d)(n)).h),a=e.i(u.a)(c.s,n.s),o=e.i(u.a)(c.l,n.l),l=e.i(u.a)(c.opacity,n.opacity);return function(f){return c.h=i(f),c.s=a(f),c.l=o(f),c.opacity=l(f),c+""}}}T.a=s(u.b);var h=s(u.a)},function(E,T,e){"use strict";T.a=s;var t=e(12),u=e(41);function s(h,r){var c=e.i(u.a)((h=e.i(t.c)(h)).l,(r=e.i(t.c)(r)).l),n=e.i(u.a)(h.a,r.a),i=e.i(u.a)(h.b,r.b),a=e.i(u.a)(h.opacity,r.opacity);return function(o){return h.l=c(o),h.a=n(o),h.b=i(o),h.opacity=a(o),h+""}}},function(E,T,e){"use strict";T.a=function(t,u){for(var s=new Array(u),h=0;h<u;++h)s[h]=t(h/(u-1));return s}},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u-=t,function(s){return Math.round(t+u*s)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return u});var t=180/Math.PI,u={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,h,r,c,n,i){var a,o,l;return(a=Math.sqrt(s*s+h*h))&&(s/=a,h/=a),(l=s*r+h*c)&&(r-=s*l,c-=h*l),(o=Math.sqrt(r*r+c*c))&&(r/=o,c/=o,l/=o),s*c<h*r&&(s=-s,h=-h,l=-l,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(h,s)*t,skewX:Math.atan(l)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return h}),e.d(T,"b",function(){return r});var t=e(59),u=e(462);function s(c,n,i,a){function o(g){return g.length?g.pop()+" ":""}function l(g,y,_,M,x,m){if(g!==_||y!==M){var S=x.push("translate(",null,n,null,i);m.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(y,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(g,y,_,M){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(g,y)})):y&&_.push(o(_)+"rotate("+y+a)}function v(g,y,_,M){g!==y?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(g,y)}):y&&_.push(o(_)+"skewX("+y+a)}function b(g,y,_,M,x,m){if(g!==_||y!==M){var S=x.push(o(x)+"scale(",null,",",null,")");m.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(y,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(g,y){var _=[],M=[];return g=c(g),y=c(y),l(g.translateX,g.translateY,y.translateX,y.translateY,_,M),f(g.rotate,y.rotate,_,M),v(g.skewX,y.skewX,_,M),b(g.scaleX,g.scaleY,y.scaleX,y.scaleY,_,M),g=y=null,function(x){for(var m=-1,S=M.length,P;++m<S;)_[(P=M[m]).i]=P.x(x);return _.join("")}}}var h=s(u.a,"px, ","px)","deg)"),r=s(u.b,", ",")",")")},function(E,T,e){"use strict";T.a=c,T.b=n;var t=e(460),u,s,h,r;function c(i){return i==="none"?t.a:(u||(u=document.createElement("DIV"),s=document.documentElement,h=document.defaultView),u.style.transform=i,i=h.getComputedStyle(s.appendChild(u),null).getPropertyValue("transform"),s.removeChild(u),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,u=2,s=4,h=1e-12;function r(i){return((i=Math.exp(i))+1/i)/2}function c(i){return((i=Math.exp(i))-1/i)/2}function n(i){return((i=Math.exp(2*i))-1)/(i+1)}T.a=function(i,a){var o=i[0],l=i[1],f=i[2],v=a[0],b=a[1],g=a[2],y=v-o,_=b-l,M=y*y+_*_,x,m;if(M<h)m=Math.log(g/f)/t,x=function(H){return[o+H*y,l+H*_,f*Math.exp(t*H*m)]};else{var S=Math.sqrt(M),P=(g*g-f*f+s*M)/(2*f*u*S),A=(g*g-f*f-s*M)/(2*g*u*S),O=Math.log(Math.sqrt(P*P+1)-P),R=Math.log(Math.sqrt(A*A+1)-A);m=(R-O)/t,x=function(H){var N=H*m,K=r(O),V=f/(u*S)*(K*n(t*N+O)-c(O));return[o+V*y,l+V*_,f*K/r(t*N+O)]}}return x.duration=m*1e3,x}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(c){return function n(i){i=+i;function a(o,l){var f=c((o=e.i(t.a)(o)).h,(l=e.i(t.a)(l)).h),v=e.i(u.a)(o.s,l.s),b=e.i(u.a)(o.l,l.l),g=e.i(u.a)(o.opacity,l.opacity);return function(y){return o.h=f(y),o.s=v(y),o.l=b(Math.pow(y,i)),o.opacity=g(y),o+""}}return a.gamma=n,a}(1)}var h=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=function(u){var s=u.length;return function(h){return u[Math.max(0,Math.min(s-1,Math.floor(h*s)))]}}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(c){return function(n,i){var a=c((n=e.i(t.b)(n)).h,(i=e.i(t.b)(i)).h),o=e.i(u.a)(n.c,i.c),l=e.i(u.a)(n.l,i.l),f=e.i(u.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.c=o(v),n.l=l(v),n.opacity=f(v),n+""}}}var h=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(c){return function(n,i){var a=c((n=e.i(t.d)(n)).h,(i=e.i(t.d)(i)).h),o=e.i(u.a)(n.s,i.s),l=e.i(u.a)(n.l,i.l),f=e.i(u.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.s=o(v),n.l=l(v),n.opacity=f(v),n+""}}}var h=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=e(32),u=function(s,h){var r=e.i(t.b)(+s,+h);return function(c){var n=r(c);return n-360*Math.floor(n/360)}}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(h,r){var c=e.i(u.a)((h=e.i(t.c)(h)).l,(r=e.i(t.c)(r)).l),n=e.i(u.a)(h.a,r.a),i=e.i(u.a)(h.b,r.b),a=e.i(u.a)(h.opacity,r.opacity);return function(o){return h.l=c(o),h.a=n(o),h.b=i(o),h.opacity=a(o),h+""}}},function(E,T,e){"use strict";function t(u,s){for(var h=0,r=s.length-1,c=s[0],n=new Array(r<0?0:r);h<r;)n[h]=u(c,c=s[++h]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return n[a](i-a)}}},function(E,T,e){"use strict";var t=function(u,s){for(var h=new Array(s),r=0;r<s;++r)h[r]=u(r/(s-1));return h}},function(E,T,e){"use strict";var t=function(u,s){return u=+u,s=+s,function(h){return Math.round(u*(1-h)+s*h)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return u});var t=180/Math.PI,u={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,h,r,c,n,i){var a,o,l;return(a=Math.sqrt(s*s+h*h))&&(s/=a,h/=a),(l=s*r+h*c)&&(r-=s*l,c-=h*l),(o=Math.sqrt(r*r+c*c))&&(r/=o,c/=o,l/=o),s*c<h*r&&(s=-s,h=-h,l=-l,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(h,s)*t,skewX:Math.atan(l)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return h}),e.d(T,"b",function(){return r});var t=e(60),u=e(475);function s(c,n,i,a){function o(g){return g.length?g.pop()+" ":""}function l(g,y,_,M,x,m){if(g!==_||y!==M){var S=x.push("translate(",null,n,null,i);m.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(y,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(g,y,_,M){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(g,y)})):y&&_.push(o(_)+"rotate("+y+a)}function v(g,y,_,M){g!==y?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(g,y)}):y&&_.push(o(_)+"skewX("+y+a)}function b(g,y,_,M,x,m){if(g!==_||y!==M){var S=x.push(o(x)+"scale(",null,",",null,")");m.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(y,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(g,y){var _=[],M=[];return g=c(g),y=c(y),l(g.translateX,g.translateY,y.translateX,y.translateY,_,M),f(g.rotate,y.rotate,_,M),v(g.skewX,y.skewX,_,M),b(g.scaleX,g.scaleY,y.scaleX,y.scaleY,_,M),g=y=null,function(x){for(var m=-1,S=M.length,P;++m<S;)_[(P=M[m]).i]=P.x(x);return _.join("")}}}var h=s(u.a,"px, ","px)","deg)"),r=s(u.b,", ",")",")")},function(E,T,e){"use strict";T.a=c,T.b=n;var t=e(473),u,s,h,r;function c(i){return i==="none"?t.a:(u||(u=document.createElement("DIV"),s=document.documentElement,h=document.defaultView),u.style.transform=i,i=h.getComputedStyle(s.appendChild(u),null).getPropertyValue("transform"),s.removeChild(u),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,u=2,s=4,h=1e-12;function r(a){return((a=Math.exp(a))+1/a)/2}function c(a){return((a=Math.exp(a))-1/a)/2}function n(a){return((a=Math.exp(2*a))-1)/(a+1)}var i=function(a,o){var l=a[0],f=a[1],v=a[2],b=o[0],g=o[1],y=o[2],_=b-l,M=g-f,x=_*_+M*M,m,S;if(x<h)S=Math.log(y/v)/t,m=function(N){return[l+N*_,f+N*M,v*Math.exp(t*N*S)]};else{var P=Math.sqrt(x),A=(y*y-v*v+s*x)/(2*v*u*P),O=(y*y-v*v-s*x)/(2*y*u*P),R=Math.log(Math.sqrt(A*A+1)-A),H=Math.log(Math.sqrt(O*O+1)-O);S=(H-R)/t,m=function(N){var K=N*S,V=r(R),k=v/(u*P)*(V*n(t*K+R)-c(R));return[l+k*_,f+k*M,v*V/r(t*K+R)]}}return m.duration=S*1e3,m}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";var t=e(61),u=e(215);T.a=function(s){return e.i(u.a)(e.i(t.a)(s).call(document.documentElement))}},function(E,T,e){"use strict";T.a=u;var t=0;function u(){return new s}function s(){this._="@"+(++t).toString(36)}s.prototype=u.prototype={constructor:s,get:function(h){for(var r=this._;!(r in h);)if(!(h=h.parentNode))return;return h[r]},set:function(h,r){return h[this._]=r},remove:function(h){return this._ in h&&delete h[this._]},toString:function(){return this._}}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s){var h=e.i(t.a)();return h.changedTouches&&(h=h.changedTouches[0]),e.i(u.a)(s,h)}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){return typeof u=="string"?new t.b([document.querySelectorAll(u)],[document.documentElement]):new t.b([u==null?[]:u],t.c)}},function(E,T,e){"use strict";var t=e(61);T.a=function(u){var s=typeof u=="function"?u:e.i(t.a)(u);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}},function(E,T,e){"use strict";var t=e(97);function u(i){return function(){this.removeAttribute(i)}}function s(i){return function(){this.removeAttributeNS(i.space,i.local)}}function h(i,a){return function(){this.setAttribute(i,a)}}function r(i,a){return function(){this.setAttributeNS(i.space,i.local,a)}}function c(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(i):this.setAttribute(i,o)}}function n(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,o)}}T.a=function(i,a){var o=e.i(t.a)(i);if(arguments.length<2){var l=this.node();return o.local?l.getAttributeNS(o.space,o.local):l.getAttribute(o)}return this.each((a==null?o.local?s:u:typeof a=="function"?o.local?n:c:o.local?r:h)(o,a))}},function(E,T,e){"use strict";T.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(E,T,e){"use strict";function t(a){return a.trim().split(/^|\s+/)}function u(a){return a.classList||new s(a)}function s(a){this._node=a,this._names=t(a.getAttribute("class")||"")}s.prototype={add:function(a){var o=this._names.indexOf(a);o<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var o=this._names.indexOf(a);o>=0&&(this._names.splice(o,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function h(a,o){for(var l=u(a),f=-1,v=o.length;++f<v;)l.add(o[f])}function r(a,o){for(var l=u(a),f=-1,v=o.length;++f<v;)l.remove(o[f])}function c(a){return function(){h(this,a)}}function n(a){return function(){r(this,a)}}function i(a,o){return function(){(o.apply(this,arguments)?h:r)(this,a)}}T.a=function(a,o){var l=t(a+"");if(arguments.length<2){for(var f=u(this.node()),v=-1,b=l.length;++v<b;)if(!f.contains(l[v]))return!1;return!0}return this.each((typeof o=="function"?i:o?c:n)(l,o))}},function(E,T,e){"use strict";function t(){var s=this.cloneNode(!1),h=this.parentNode;return h?h.insertBefore(s,this.nextSibling):s}function u(){var s=this.cloneNode(!0),h=this.parentNode;return h?h.insertBefore(s,this.nextSibling):s}T.a=function(s){return this.select(s?u:t)}},function(E,T,e){"use strict";var t=e(18),u=e(216),s=e(477),h="$";function r(n,i,a,o,l,f){for(var v=0,b,g=i.length,y=f.length;v<y;++v)(b=i[v])?(b.__data__=f[v],o[v]=b):a[v]=new u.b(n,f[v]);for(;v<g;++v)(b=i[v])&&(l[v]=b)}function c(n,i,a,o,l,f,v){var b,g,y={},_=i.length,M=f.length,x=new Array(_),m;for(b=0;b<_;++b)(g=i[b])&&(x[b]=m=h+v.call(g,g.__data__,b,i),m in y?l[b]=g:y[m]=g);for(b=0;b<M;++b)m=h+v.call(n,f[b],b,f),(g=y[m])?(o[b]=g,g.__data__=f[b],y[m]=null):a[b]=new u.b(n,f[b]);for(b=0;b<_;++b)(g=i[b])&&y[x[b]]===g&&(l[b]=g)}T.a=function(n,i){if(!n)return m=new Array(this.size()),y=-1,this.each(function(V){m[++y]=V}),m;var a=i?c:r,o=this._parents,l=this._groups;typeof n!="function"&&(n=e.i(s.a)(n));for(var f=l.length,v=new Array(f),b=new Array(f),g=new Array(f),y=0;y<f;++y){var _=o[y],M=l[y],x=M.length,m=n.call(_,_&&_.__data__,y,o),S=m.length,P=b[y]=new Array(S),A=v[y]=new Array(S),O=g[y]=new Array(x);a(_,M,P,A,O,m,i);for(var R=0,H=0,N,K;R<S;++R)if(N=P[R]){for(R>=H&&(H=R+1);!(K=A[H])&&++H<S;);N._next=K||null}}return v=new t.b(v,o),v._enter=b,v._exit=g,v}},function(E,T,e){"use strict";T.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(E,T,e){"use strict";var t=e(102);function u(r,c,n){var i=e.i(t.a)(r),a=i.CustomEvent;typeof a=="function"?a=new a(c,n):(a=i.document.createEvent("Event"),n?(a.initEvent(c,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(c,!1,!1)),r.dispatchEvent(a)}function s(r,c){return function(){return u(this,r,c)}}function h(r,c){return function(){return u(this,r,c.apply(this,arguments))}}T.a=function(r,c){return this.each((typeof c=="function"?h:s)(r,c))}},function(E,T,e){"use strict";T.a=function(t){for(var u=this._groups,s=0,h=u.length;s<h;++s)for(var r=u[s],c=0,n=r.length,i;c<n;++c)(i=r[c])&&t.call(i,i.__data__,c,r);return this}},function(E,T,e){"use strict";T.a=function(){return!this.node()}},function(E,T,e){"use strict";var t=e(217),u=e(18);T.a=function(){return new u.b(this._exit||this._groups.map(t.a),this._parents)}},function(E,T,e){"use strict";var t=e(18),u=e(214);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var h=this._groups,r=h.length,c=new Array(r),n=0;n<r;++n)for(var i=h[n],a=i.length,o=c[n]=[],l,f=0;f<a;++f)(l=i[f])&&s.call(l,l.__data__,f,i)&&o.push(l);return new t.b(c,this._parents)}},function(E,T,e){"use strict";function t(){this.innerHTML=""}function u(h){return function(){this.innerHTML=h}}function s(h){return function(){var r=h.apply(this,arguments);this.innerHTML=r==null?"":r}}T.a=function(h){return arguments.length?this.each(h==null?t:(typeof h=="function"?s:u)(h)):this.node().innerHTML}},function(E,T,e){"use strict";var t=e(61),u=e(100);function s(){return null}T.a=function(h,r){var c=typeof h=="function"?h:e.i(t.a)(h),n=r==null?s:typeof r=="function"?r:e.i(u.a)(r);return this.select(function(){return this.insertBefore(c.apply(this,arguments),n.apply(this,arguments)||null)})}},function(E,T,e){"use strict";T.a=function(t,u,s){var h=this.enter(),r=this,c=this.exit();return h=typeof t=="function"?t(h):h.append(t+""),u!=null&&(r=u(r)),s==null?c.remove():s(c),h&&r?h.merge(r).order():r}},function(E,T,e){"use strict";function t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){for(var s=this._groups,h=u._groups,r=s.length,c=h.length,n=Math.min(r,c),i=new Array(r),a=0;a<n;++a)for(var o=s[a],l=h[a],f=o.length,v=i[a]=new Array(f),b,g=0;g<f;++g)(b=o[g]||l[g])&&(v[g]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents)}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,u=0,s=t.length;u<s;++u)for(var h=t[u],r=0,c=h.length;r<c;++r){var n=h[r];if(n)return n}return null}},function(E,T,e){"use strict";T.a=function(){var t=new Array(this.size()),u=-1;return this.each(function(){t[++u]=this}),t}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,u=-1,s=t.length;++u<s;)for(var h=t[u],r=h.length-1,c=h[r],n;--r>=0;)(n=h[r])&&(c&&n.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(n,c),c=n);return this}},function(E,T,e){"use strict";function t(h){return function(){delete this[h]}}function u(h,r){return function(){this[h]=r}}function s(h,r){return function(){var c=r.apply(this,arguments);c==null?delete this[h]:this[h]=c}}T.a=function(h,r){return arguments.length>1?this.each((r==null?t:typeof r=="function"?s:u)(h,r)):this.node()[h]}},function(E,T,e){"use strict";function t(){this.nextSibling&&this.parentNode.appendChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";function t(){var u=this.parentNode;u&&u.removeChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18),u=e(100);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var h=this._groups,r=h.length,c=new Array(r),n=0;n<r;++n)for(var i=h[n],a=i.length,o=c[n]=new Array(a),l,f,v=0;v<a;++v)(l=i[v])&&(f=s.call(l,l.__data__,v,i))&&("__data__"in l&&(f.__data__=l.__data__),o[v]=f);return new t.b(c,this._parents)}},function(E,T,e){"use strict";var t=e(18),u=e(219);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var h=this._groups,r=h.length,c=[],n=[],i=0;i<r;++i)for(var a=h[i],o=a.length,l,f=0;f<o;++f)(l=a[f])&&(c.push(s.call(l,l.__data__,f,a)),n.push(l));return new t.b(c,n)}},function(E,T,e){"use strict";T.a=function(){var t=0;return this.each(function(){++t}),t}},function(E,T,e){"use strict";var t=e(18);T.a=function(s){s||(s=u);function h(b,g){return b&&g?s(b.__data__,g.__data__):!b-!g}for(var r=this._groups,c=r.length,n=new Array(c),i=0;i<c;++i){for(var a=r[i],o=a.length,l=n[i]=new Array(o),f,v=0;v<o;++v)(f=a[v])&&(l[v]=f);l.sort(h)}return new t.b(n,this._parents).order()};function u(s,h){return s<h?-1:s>h?1:s>=h?0:NaN}},function(E,T,e){"use strict";function t(){this.textContent=""}function u(h){return function(){this.textContent=h}}function s(h){return function(){var r=h.apply(this,arguments);this.textContent=r==null?"":r}}T.a=function(h){return arguments.length?this.each(h==null?t:(typeof h=="function"?s:u)(h)):this.node().textContent}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s,h,r){arguments.length<3&&(r=h,h=e.i(t.a)().changedTouches);for(var c=0,n=h?h.length:0,i;c<n;++c)if((i=h[c]).identifier===r)return e.i(u.a)(s,i);return null}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s,h){h==null&&(h=e.i(t.a)().touches);for(var r=0,c=h?h.length:0,n=new Array(c);r<c;++r)n[r]=e.i(u.a)(s,h[r]);return n}},function(E,T,e){"use strict";var t=e(104);T.a=function(u,s,h){var r=new t.d,c=s;return s==null?(r.restart(u,s,h),r):(s=+s,h=h==null?e.i(t.a)():+h,r.restart(function n(i){i+=c,r.restart(n,c+=s,h),u(i)},s,h),r)}},function(E,T,e){"use strict";var t=e(104);T.a=function(u,s,h){var r=new t.d;return s=s==null?0:+s,r.restart(function(c){r.stop(),u(c+s)},s,h),r}},function(E,T,e){"use strict";var t=e(27),u=e(13),s=[null];T.a=function(h,r){var c=h.__transition,n,i;if(c){r=r==null?null:r+"";for(i in c)if((n=c[i]).state>u.d&&n.name===r)return new t.b([[h]],s,r,+i)}return null}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(516),u=e(27);e.d(T,"transition",function(){return u.a});var s=e(514);e.d(T,"active",function(){return s.a});var h=e(220);e.d(T,"interrupt",function(){return h.a})},function(E,T,e){"use strict";var t=e(22),u=e(517),s=e(518);t.selection.prototype.interrupt=u.a,t.selection.prototype.transition=s.a},function(E,T,e){"use strict";var t=e(220);T.a=function(u){return this.each(function(){e.i(t.a)(this,u)})}},function(E,T,e){"use strict";var t=e(27),u=e(13),s=e(199),h=e(103),r={time:null,delay:0,duration:250,ease:s.easeCubicInOut};function c(n,i){for(var a;!(a=n.__transition)||!(a=a[i]);)if(!(n=n.parentNode))return r.time=e.i(h.now)(),r;return a}T.a=function(n){var i,a;n instanceof t.b?(i=n._id,n=n._name):(i=e.i(t.c)(),(a=r).time=e.i(h.now)(),n=n==null?null:n+"");for(var o=this._groups,l=o.length,f=0;f<l;++f)for(var v=o[f],b=v.length,g,y=0;y<b;++y)(g=v[y])&&e.i(u.h)(g,n,i,y,v,a||c(g,i));return new t.b(o,this._parents,n,i)}},function(E,T,e){"use strict";var t=e(94),u=e(22),s=e(63),h=e(221);function r(l){return function(){this.removeAttribute(l)}}function c(l){return function(){this.removeAttributeNS(l.space,l.local)}}function n(l,f,v){var b,g=v+"",y;return function(){var _=this.getAttribute(l);return _===g?null:_===b?y:y=f(b=_,v)}}function i(l,f,v){var b,g=v+"",y;return function(){var _=this.getAttributeNS(l.space,l.local);return _===g?null:_===b?y:y=f(b=_,v)}}function a(l,f,v){var b,g,y;return function(){var _,M=v(this),x;return M==null?void this.removeAttribute(l):(_=this.getAttribute(l),x=M+"",_===x?null:_===b&&x===g?y:(g=x,y=f(b=_,M)))}}function o(l,f,v){var b,g,y;return function(){var _,M=v(this),x;return M==null?void this.removeAttributeNS(l.space,l.local):(_=this.getAttributeNS(l.space,l.local),x=M+"",_===x?null:_===b&&x===g?y:(g=x,y=f(b=_,M)))}}T.a=function(l,f){var v=e.i(u.namespace)(l),b=v==="transform"?t.e:h.a;return this.attrTween(l,typeof f=="function"?(v.local?o:a)(v,b,e.i(s.b)(this,"attr."+l,f)):f==null?(v.local?c:r)(v):(v.local?i:n)(v,b,f))}},function(E,T,e){"use strict";var t=e(22);function u(c,n){return function(i){this.setAttribute(c,n.call(this,i))}}function s(c,n){return function(i){this.setAttributeNS(c.space,c.local,n.call(this,i))}}function h(c,n){var i,a;function o(){var l=n.apply(this,arguments);return l!==a&&(i=(a=l)&&s(c,l)),i}return o._value=n,o}function r(c,n){var i,a;function o(){var l=n.apply(this,arguments);return l!==a&&(i=(a=l)&&u(c,l)),i}return o._value=n,o}T.a=function(c,n){var i="attr."+c;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;var a=e.i(t.namespace)(c);return this.tween(i,(a.local?h:r)(a,n))}},function(E,T,e){"use strict";var t=e(13);function u(h,r){return function(){e.i(t.g)(this,h).delay=+r.apply(this,arguments)}}function s(h,r){return r=+r,function(){e.i(t.g)(this,h).delay=r}}T.a=function(h){var r=this._id;return arguments.length?this.each((typeof h=="function"?u:s)(r,h)):e.i(t.f)(this.node(),r).delay}},function(E,T,e){"use strict";var t=e(13);function u(h,r){return function(){e.i(t.e)(this,h).duration=+r.apply(this,arguments)}}function s(h,r){return r=+r,function(){e.i(t.e)(this,h).duration=r}}T.a=function(h){var r=this._id;return arguments.length?this.each((typeof h=="function"?u:s)(r,h)):e.i(t.f)(this.node(),r).duration}},function(E,T,e){"use strict";var t=e(13);function u(s,h){if(typeof h!="function")throw new Error;return function(){e.i(t.e)(this,s).ease=h}}T.a=function(s){var h=this._id;return arguments.length?this.each(u(h,s)):e.i(t.f)(this.node(),h).ease}},function(E,T,e){"use strict";var t=e(13);T.a=function(){var u,s,h=this,r=h._id,c=h.size();return new Promise(function(n,i){var a={value:i},o={value:function(){--c==0&&n()}};h.each(function(){var l=e.i(t.e)(this,r),f=l.on;f!==u&&(s=(u=f).copy(),s._.cancel.push(a),s._.interrupt.push(a),s._.end.push(o)),l.on=s})})}},function(E,T,e){"use strict";var t=e(22),u=e(27);T.a=function(s){typeof s!="function"&&(s=e.i(t.matcher)(s));for(var h=this._groups,r=h.length,c=new Array(r),n=0;n<r;++n)for(var i=h[n],a=i.length,o=c[n]=[],l,f=0;f<a;++f)(l=i[f])&&s.call(l,l.__data__,f,i)&&o.push(l);return new u.b(c,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(27);T.a=function(u){if(u._id!==this._id)throw new Error;for(var s=this._groups,h=u._groups,r=s.length,c=h.length,n=Math.min(r,c),i=new Array(r),a=0;a<n;++a)for(var o=s[a],l=h[a],f=o.length,v=i[a]=new Array(f),b,g=0;g<f;++g)(b=o[g]||l[g])&&(v[g]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(13);function u(h){return(h+"").trim().split(/^|\s+/).every(function(r){var c=r.indexOf(".");return c>=0&&(r=r.slice(0,c)),!r||r==="start"})}function s(h,r,c){var n,i,a=u(r)?t.g:t.e;return function(){var o=a(this,h),l=o.on;l!==n&&(i=(n=l).copy()).on(r,c),o.on=i}}T.a=function(h,r){var c=this._id;return arguments.length<2?e.i(t.f)(this.node(),c).on.on(h):this.each(s(c,h,r))}},function(E,T,e){"use strict";function t(u){return function(){var s=this.parentNode;for(var h in this.__transition)if(+h!==u)return;s&&s.removeChild(this)}}T.a=function(){return this.on("end.remove",t(this._id))}},function(E,T,e){"use strict";var t=e(22),u=e(27),s=e(13);T.a=function(h){var r=this._name,c=this._id;typeof h!="function"&&(h=e.i(t.selector)(h));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var l=n[o],f=l.length,v=a[o]=new Array(f),b,g,y=0;y<f;++y)(b=l[y])&&(g=h.call(b,b.__data__,y,l))&&("__data__"in b&&(g.__data__=b.__data__),v[y]=g,e.i(s.h)(v[y],r,c,y,v,e.i(s.f)(b,c)));return new u.b(a,this._parents,r,c)}},function(E,T,e){"use strict";var t=e(22),u=e(27),s=e(13);T.a=function(h){var r=this._name,c=this._id;typeof h!="function"&&(h=e.i(t.selectorAll)(h));for(var n=this._groups,i=n.length,a=[],o=[],l=0;l<i;++l)for(var f=n[l],v=f.length,b,g=0;g<v;++g)if(b=f[g]){for(var y=h.call(b,b.__data__,g,f),_,M=e.i(s.f)(b,c),x=0,m=y.length;x<m;++x)(_=y[x])&&e.i(s.h)(_,r,c,x,y,M);a.push(y),o.push(b)}return new u.b(a,o,r,c)}},function(E,T,e){"use strict";var t=e(22),u=t.selection.prototype.constructor;T.a=function(){return new u(this._groups,this._parents)}},function(E,T,e){"use strict";var t=e(94),u=e(22),s=e(13),h=e(63),r=e(221);function c(l,f){var v,b,g;return function(){var y=e.i(u.style)(this,l),_=(this.style.removeProperty(l),e.i(u.style)(this,l));return y===_?null:y===v&&_===b?g:g=f(v=y,b=_)}}function n(l){return function(){this.style.removeProperty(l)}}function i(l,f,v){var b,g=v+"",y;return function(){var _=e.i(u.style)(this,l);return _===g?null:_===b?y:y=f(b=_,v)}}function a(l,f,v){var b,g,y;return function(){var _=e.i(u.style)(this,l),M=v(this),x=M+"";return M==null&&(x=M=(this.style.removeProperty(l),e.i(u.style)(this,l))),_===x?null:_===b&&x===g?y:(g=x,y=f(b=_,M))}}function o(l,f){var v,b,g,y="style."+f,_="end."+y,M;return function(){var x=e.i(s.e)(this,l),m=x.on,S=x.value[y]==null?M||(M=n(f)):void 0;(m!==v||g!==S)&&(b=(v=m).copy()).on(_,g=S),x.on=b}}T.a=function(l,f,v){var b=(l+="")==="transform"?t.a:r.a;return f==null?this.styleTween(l,c(l,b)).on("end.style."+l,n(l)):typeof f=="function"?this.styleTween(l,a(l,b,e.i(h.b)(this,"style."+l,f))).each(o(this._id,l)):this.styleTween(l,i(l,b,f),v).on("end.style."+l,null)}},function(E,T,e){"use strict";function t(s,h,r){return function(c){this.style.setProperty(s,h.call(this,c),r)}}function u(s,h,r){var c,n;function i(){var a=h.apply(this,arguments);return a!==n&&(c=(n=a)&&t(s,a,r)),c}return i._value=h,i}T.a=function(s,h,r){var c="style."+(s+="");if(arguments.length<2)return(c=this.tween(c))&&c._value;if(h==null)return this.tween(c,null);if(typeof h!="function")throw new Error;return this.tween(c,u(s,h,r==null?"":r))}},function(E,T,e){"use strict";var t=e(63);function u(h){return function(){this.textContent=h}}function s(h){return function(){var r=h(this);this.textContent=r==null?"":r}}T.a=function(h){return this.tween("text",typeof h=="function"?s(e.i(t.b)(this,"text",h)):u(h==null?"":h+""))}},function(E,T,e){"use strict";function t(s){return function(h){this.textContent=s.call(this,h)}}function u(s){var h,r;function c(){var n=s.apply(this,arguments);return n!==r&&(h=(r=n)&&t(n)),h}return c._value=s,c}T.a=function(s){var h="text";if(arguments.length<1)return(h=this.tween(h))&&h._value;if(s==null)return this.tween(h,null);if(typeof s!="function")throw new Error;return this.tween(h,u(s))}},function(E,T,e){"use strict";var t=e(27),u=e(13);T.a=function(){for(var s=this._name,h=this._id,r=e.i(t.c)(),c=this._groups,n=c.length,i=0;i<n;++i)for(var a=c[i],o=a.length,l,f=0;f<o;++f)if(l=a[f]){var v=e.i(u.f)(l,h);e.i(u.h)(l,s,r,f,a,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new t.b(c,this._parents,s,r)}},function(E,T,e){"use strict";var t=function(u,s,h,r,c,n,i,a){if(s===void 0)throw new Error("invariant requires an error message argument");if(!u){var o;if(s===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[h,r,c,n,i,a],f=0;o=new Error(s.replace(/%s/g,function(){return l[f++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}};E.exports=t},function(E,T,e){(function(t){var u="Expected a function",s=0/0,h="[object Symbol]",r=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,o=typeof t=="object"&&t&&t.Object===Object&&t,l=typeof self=="object"&&self&&self.Object===Object&&self,f=o||l||Function("return this")(),v=Object.prototype,b=v.toString,g=Math.max,y=Math.min,_=function(){return f.Date.now()};function M(A,O,R){var H,N,K,V,k,Z,X=0,at=!1,pt=!1,gt=!0;if(typeof A!="function")throw new TypeError(u);O=P(O)||0,x(R)&&(at=!!R.leading,pt="maxWait"in R,K=pt?g(P(R.maxWait)||0,O):K,gt="trailing"in R?!!R.trailing:gt);function ft(z){var q=H,mt=N;return H=N=void 0,X=z,V=A.apply(mt,q),V}function Rt(z){return X=z,k=setTimeout(St,O),at?ft(z):V}function Nt(z){var q=z-Z,mt=z-X,et=O-q;return pt?y(et,K-mt):et}function Dt(z){var q=z-Z,mt=z-X;return Z===void 0||q>=O||q<0||pt&&mt>=K}function St(){var z=_();if(Dt(z))return xt(z);k=setTimeout(St,Nt(z))}function xt(z){return k=void 0,gt&&H?ft(z):(H=N=void 0,V)}function Ot(){k!==void 0&&clearTimeout(k),X=0,H=Z=N=k=void 0}function it(){return k===void 0?V:xt(_())}function At(){var z=_(),q=Dt(z);if(H=arguments,N=this,Z=z,q){if(k===void 0)return Rt(Z);if(pt)return k=setTimeout(St,O),ft(Z)}return k===void 0&&(k=setTimeout(St,O)),V}return At.cancel=Ot,At.flush=it,At}function x(A){var O=typeof A;return!!A&&(O=="object"||O=="function")}function m(A){return!!A&&typeof A=="object"}function S(A){return typeof A=="symbol"||m(A)&&b.call(A)==h}function P(A){if(typeof A=="number")return A;if(S(A))return s;if(x(A)){var O=typeof A.valueOf=="function"?A.valueOf():A;A=x(O)?O+"":O}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var R=n.test(A);return R||i.test(A)?a(A.slice(2),R?2:8):c.test(A)?s:+A}E.exports=M}).call(T,e(225))},function(E,T,e){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function h(c){if(c==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}function r(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de",Object.getOwnPropertyNames(c)[0]==="5")return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;var a=Object.getOwnPropertyNames(n).map(function(l){return n[l]});if(a.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(l){o[l]=l}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(l){return!1}}E.exports=r()?Object.assign:function(c,n){for(var i,a=h(c),o,l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var f in i)u.call(i,f)&&(a[f]=i[f]);if(t){o=t(i);for(var v=0;v<o.length;v++)s.call(i,o[v])&&(a[o[v]]=i[o[v]])}}return a}},function(E,T,e){"use strict";var t=function(){},u=e(223),s={},h=Function.call.bind(Object.prototype.hasOwnProperty);t=function(c){var n="Warning: "+c;typeof console!="undefined"&&console.error(n);try{throw new Error(n)}catch(i){}};function r(c,n,i,a,o){for(var l in c)if(h(c,l)){var f;try{if(typeof c[l]!="function"){var v=Error((a||"React class")+": "+i+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[l]+"`.");throw v.name="Invariant Violation",v}f=c[l](n,l,a,i,null,u)}catch(g){f=g}if(f&&!(f instanceof Error)&&t((a||"React class")+": type specification of "+i+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof f+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in s)){s[f.message]=!0;var b=o?o():"";t("Failed "+i+" type: "+f.message+(b!=null?b:""))}}}r.resetWarningCache=function(){s={}},E.exports=r},function(E,T,e){"use strict";var t=e(224),u=e(539),s=e(223),h=e(540),r=Function.call.bind(Object.prototype.hasOwnProperty),c=function(){};c=function(i){var a="Warning: "+i;typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(o){}};function n(){return null}E.exports=function(i,a){var o=typeof Symbol=="function"&&Symbol.iterator,l="@@iterator";function f(ft){var Rt=ft&&(o&&ft[o]||ft[l]);if(typeof Rt=="function")return Rt}var v="<<anonymous>>",b={array:M("array"),bool:M("boolean"),func:M("function"),number:M("number"),object:M("object"),string:M("string"),symbol:M("symbol"),any:x(),arrayOf:m,element:S(),elementType:P(),instanceOf:A,node:N(),objectOf:R,oneOf:O,oneOfType:H,shape:K,exact:V};function g(ft,Rt){return ft===Rt?ft!==0||1/ft==1/Rt:ft!==ft&&Rt!==Rt}function y(ft){this.message=ft,this.stack=""}y.prototype=Error.prototype;function _(ft){var Rt={},Nt=0;function Dt(xt,Ot,it,At,z,q,mt){if(At=At||v,q=q||it,mt!==s){if(a){var et=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw et.name="Invariant Violation",et}else if(typeof console!="undefined"){var st=At+":"+it;!Rt[st]&&Nt<3&&(c("You are manually calling a React.PropTypes validation function for the `"+q+"` prop on `"+At+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),Rt[st]=!0,Nt++)}}return Ot[it]==null?xt?Ot[it]===null?new y("The "+z+" `"+q+"` is marked as required "+("in `"+At+"`, but its value is `null`.")):new y("The "+z+" `"+q+"` is marked as required in "+("`"+At+"`, but its value is `undefined`.")):null:ft(Ot,it,At,z,q)}var St=Dt.bind(null,!1);return St.isRequired=Dt.bind(null,!0),St}function M(ft){function Rt(Nt,Dt,St,xt,Ot,it){var At=Nt[Dt],z=X(At);if(z!==ft){var q=at(At);return new y("Invalid "+xt+" `"+Ot+"` of type "+("`"+q+"` supplied to `"+St+"`, expected ")+("`"+ft+"`."))}return null}return _(Rt)}function x(){return _(n)}function m(ft){function Rt(Nt,Dt,St,xt,Ot){if(typeof ft!="function")return new y("Property `"+Ot+"` of component `"+St+"` has invalid PropType notation inside arrayOf.");var it=Nt[Dt];if(!Array.isArray(it)){var At=X(it);return new y("Invalid "+xt+" `"+Ot+"` of type "+("`"+At+"` supplied to `"+St+"`, expected an array."))}for(var z=0;z<it.length;z++){var q=ft(it,z,St,xt,Ot+"["+z+"]",s);if(q instanceof Error)return q}return null}return _(Rt)}function S(){function ft(Rt,Nt,Dt,St,xt){var Ot=Rt[Nt];if(!i(Ot)){var it=X(Ot);return new y("Invalid "+St+" `"+xt+"` of type "+("`"+it+"` supplied to `"+Dt+"`, expected a single ReactElement."))}return null}return _(ft)}function P(){function ft(Rt,Nt,Dt,St,xt){var Ot=Rt[Nt];if(!t.isValidElementType(Ot)){var it=X(Ot);return new y("Invalid "+St+" `"+xt+"` of type "+("`"+it+"` supplied to `"+Dt+"`, expected a single ReactElement type."))}return null}return _(ft)}function A(ft){function Rt(Nt,Dt,St,xt,Ot){if(!(Nt[Dt]instanceof ft)){var it=ft.name||v,At=gt(Nt[Dt]);return new y("Invalid "+xt+" `"+Ot+"` of type "+("`"+At+"` supplied to `"+St+"`, expected ")+("instance of `"+it+"`."))}return null}return _(Rt)}function O(ft){if(!Array.isArray(ft))return arguments.length>1?c("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):c("Invalid argument supplied to oneOf, expected an array."),n;function Rt(Nt,Dt,St,xt,Ot){for(var it=Nt[Dt],At=0;At<ft.length;At++)if(g(it,ft[At]))return null;var z=JSON.stringify(ft,function(mt,et){var st=at(et);return st==="symbol"?String(et):et});return new y("Invalid "+xt+" `"+Ot+"` of value `"+String(it)+"` "+("supplied to `"+St+"`, expected one of "+z+"."))}return _(Rt)}function R(ft){function Rt(Nt,Dt,St,xt,Ot){if(typeof ft!="function")return new y("Property `"+Ot+"` of component `"+St+"` has invalid PropType notation inside objectOf.");var it=Nt[Dt],At=X(it);if(At!=="object")return new y("Invalid "+xt+" `"+Ot+"` of type "+("`"+At+"` supplied to `"+St+"`, expected an object."));for(var z in it)if(r(it,z)){var q=ft(it,z,St,xt,Ot+"."+z,s);if(q instanceof Error)return q}return null}return _(Rt)}function H(ft){if(!Array.isArray(ft))return c("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var Rt=0;Rt<ft.length;Rt++){var Nt=ft[Rt];if(typeof Nt!="function")return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+pt(Nt)+" at index "+Rt+"."),n}function Dt(St,xt,Ot,it,At){for(var z=0;z<ft.length;z++){var q=ft[z];if(q(St,xt,Ot,it,At,s)==null)return null}return new y("Invalid "+it+" `"+At+"` supplied to "+("`"+Ot+"`."))}return _(Dt)}function N(){function ft(Rt,Nt,Dt,St,xt){return k(Rt[Nt])?null:new y("Invalid "+St+" `"+xt+"` supplied to "+("`"+Dt+"`, expected a ReactNode."))}return _(ft)}function K(ft){function Rt(Nt,Dt,St,xt,Ot){var it=Nt[Dt],At=X(it);if(At!=="object")return new y("Invalid "+xt+" `"+Ot+"` of type `"+At+"` "+("supplied to `"+St+"`, expected `object`."));for(var z in ft){var q=ft[z];if(!!q){var mt=q(it,z,St,xt,Ot+"."+z,s);if(mt)return mt}}return null}return _(Rt)}function V(ft){function Rt(Nt,Dt,St,xt,Ot){var it=Nt[Dt],At=X(it);if(At!=="object")return new y("Invalid "+xt+" `"+Ot+"` of type `"+At+"` "+("supplied to `"+St+"`, expected `object`."));var z=u({},Nt[Dt],ft);for(var q in z){var mt=ft[q];if(!mt)return new y("Invalid "+xt+" `"+Ot+"` key `"+q+"` supplied to `"+St+"`.\nBad object: "+JSON.stringify(Nt[Dt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ft),null,"  "));var et=mt(it,q,St,xt,Ot+"."+q,s);if(et)return et}return null}return _(Rt)}function k(ft){switch(typeof ft){case"number":case"string":case"undefined":return!0;case"boolean":return!ft;case"object":if(Array.isArray(ft))return ft.every(k);if(ft===null||i(ft))return!0;var Rt=f(ft);if(Rt){var Nt=Rt.call(ft),Dt;if(Rt!==ft.entries){for(;!(Dt=Nt.next()).done;)if(!k(Dt.value))return!1}else for(;!(Dt=Nt.next()).done;){var St=Dt.value;if(St&&!k(St[1]))return!1}}else return!1;return!0;default:return!1}}function Z(ft,Rt){return ft==="symbol"?!0:Rt?Rt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Rt instanceof Symbol:!1}function X(ft){var Rt=typeof ft;return Array.isArray(ft)?"array":ft instanceof RegExp?"object":Z(Rt,ft)?"symbol":Rt}function at(ft){if(typeof ft=="undefined"||ft===null)return""+ft;var Rt=X(ft);if(Rt==="object"){if(ft instanceof Date)return"date";if(ft instanceof RegExp)return"regexp"}return Rt}function pt(ft){var Rt=at(ft);switch(Rt){case"array":case"object":return"an "+Rt;case"boolean":case"date":case"regexp":return"a "+Rt;default:return Rt}}function gt(ft){return!ft.constructor||!ft.constructor.name?v:ft.constructor.name}return b.checkPropTypes=h,b.resetWarningCache=h.resetWarningCache,b.PropTypes=b,b}},function(E,T,e){"use strict";/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){"use strict";var t=typeof Symbol=="function"&&Symbol.for,u=t?Symbol.for("react.element"):60103,s=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,c=t?Symbol.for("react.profiler"):60114,n=t?Symbol.for("react.provider"):60109,i=t?Symbol.for("react.context"):60110,a=t?Symbol.for("react.async_mode"):60111,o=t?Symbol.for("react.concurrent_mode"):60111,l=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,v=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,_=t?Symbol.for("react.fundamental"):60117,M=t?Symbol.for("react.responder"):60118,x=t?Symbol.for("react.scope"):60119;function m(st){return typeof st=="string"||typeof st=="function"||st===h||st===o||st===c||st===r||st===f||st===v||typeof st=="object"&&st!==null&&(st.$$typeof===g||st.$$typeof===b||st.$$typeof===n||st.$$typeof===i||st.$$typeof===l||st.$$typeof===_||st.$$typeof===M||st.$$typeof===x||st.$$typeof===y)}function S(st){if(typeof st=="object"&&st!==null){var bt=st.$$typeof;switch(bt){case u:var Y=st.type;switch(Y){case a:case o:case h:case c:case r:case f:return Y;default:var rt=Y&&Y.$$typeof;switch(rt){case i:case l:case g:case b:case n:return rt;default:return bt}}case s:return bt}}}var P=a,A=o,O=i,R=n,H=u,N=l,K=h,V=g,k=b,Z=s,X=c,at=r,pt=f,gt=!1;function ft(st){return gt||(gt=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Rt(st)||S(st)===a}function Rt(st){return S(st)===o}function Nt(st){return S(st)===i}function Dt(st){return S(st)===n}function St(st){return typeof st=="object"&&st!==null&&st.$$typeof===u}function xt(st){return S(st)===l}function Ot(st){return S(st)===h}function it(st){return S(st)===g}function At(st){return S(st)===b}function z(st){return S(st)===s}function q(st){return S(st)===c}function mt(st){return S(st)===r}function et(st){return S(st)===f}T.AsyncMode=P,T.ConcurrentMode=A,T.ContextConsumer=O,T.ContextProvider=R,T.Element=H,T.ForwardRef=N,T.Fragment=K,T.Lazy=V,T.Memo=k,T.Portal=Z,T.Profiler=X,T.StrictMode=at,T.Suspense=pt,T.isAsyncMode=ft,T.isConcurrentMode=Rt,T.isContextConsumer=Nt,T.isContextProvider=Dt,T.isElement=St,T.isForwardRef=xt,T.isFragment=Ot,T.isLazy=it,T.isMemo=At,T.isPortal=z,T.isProfiler=q,T.isStrictMode=mt,T.isSuspense=et,T.isValidElementType=m,T.typeOf=S})()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),function(t){var u=function(){if(typeof Map!="undefined")return Map;function Z(X,at){var pt=-1;return X.some(function(gt,ft){return gt[0]===at?(pt=ft,!0):!1}),pt}return function(){function X(){this.__entries__=[]}return Object.defineProperty(X.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),X.prototype.get=function(at){var pt=Z(this.__entries__,at),gt=this.__entries__[pt];return gt&&gt[1]},X.prototype.set=function(at,pt){var gt=Z(this.__entries__,at);~gt?this.__entries__[gt][1]=pt:this.__entries__.push([at,pt])},X.prototype.delete=function(at){var pt=this.__entries__,gt=Z(pt,at);~gt&&pt.splice(gt,1)},X.prototype.has=function(at){return!!~Z(this.__entries__,at)},X.prototype.clear=function(){this.__entries__.splice(0)},X.prototype.forEach=function(at,pt){pt===void 0&&(pt=null);for(var gt=0,ft=this.__entries__;gt<ft.length;gt++){var Rt=ft[gt];at.call(pt,Rt[1],Rt[0])}},X}()}(),s=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,h=function(){return typeof t!="undefined"&&t.Math===Math?t:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),r=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(h):function(Z){return setTimeout(function(){return Z(Date.now())},1e3/60)}}(),c=2;function n(Z,X){var at=!1,pt=!1,gt=0;function ft(){at&&(at=!1,Z()),pt&&Nt()}function Rt(){r(ft)}function Nt(){var Dt=Date.now();if(at){if(Dt-gt<c)return;pt=!0}else at=!0,pt=!1,setTimeout(Rt,X);gt=Dt}return Nt}var i=20,a=["top","right","bottom","left","width","height","size","weight"],o=typeof MutationObserver!="undefined",l=function(){function Z(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=n(this.refresh.bind(this),i)}return Z.prototype.addObserver=function(X){~this.observers_.indexOf(X)||this.observers_.push(X),this.connected_||this.connect_()},Z.prototype.removeObserver=function(X){var at=this.observers_,pt=at.indexOf(X);~pt&&at.splice(pt,1),!at.length&&this.connected_&&this.disconnect_()},Z.prototype.refresh=function(){var X=this.updateObservers_();X&&this.refresh()},Z.prototype.updateObservers_=function(){var X=this.observers_.filter(function(at){return at.gatherActive(),at.hasActive()});return X.forEach(function(at){return at.broadcastActive()}),X.length>0},Z.prototype.connect_=function(){!s||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},Z.prototype.disconnect_=function(){!s||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},Z.prototype.onTransitionEnd_=function(X){var at=X.propertyName,pt=at===void 0?"":at,gt=a.some(function(ft){return!!~pt.indexOf(ft)});gt&&this.refresh()},Z.getInstance=function(){return this.instance_||(this.instance_=new Z),this.instance_},Z.instance_=null,Z}(),f=function(Z,X){for(var at=0,pt=Object.keys(X);at<pt.length;at++){var gt=pt[at];Object.defineProperty(Z,gt,{value:X[gt],enumerable:!1,writable:!1,configurable:!0})}return Z},v=function(Z){var X=Z&&Z.ownerDocument&&Z.ownerDocument.defaultView;return X||h},b=O(0,0,0,0);function g(Z){return parseFloat(Z)||0}function y(Z){for(var X=[],at=1;at<arguments.length;at++)X[at-1]=arguments[at];return X.reduce(function(pt,gt){var ft=Z["border-"+gt+"-width"];return pt+g(ft)},0)}function _(Z){for(var X=["top","right","bottom","left"],at={},pt=0,gt=X;pt<gt.length;pt++){var ft=gt[pt],Rt=Z["padding-"+ft];at[ft]=g(Rt)}return at}function M(Z){var X=Z.getBBox();return O(0,0,X.width,X.height)}function x(Z){var X=Z.clientWidth,at=Z.clientHeight;if(!X&&!at)return b;var pt=v(Z).getComputedStyle(Z),gt=_(pt),ft=gt.left+gt.right,Rt=gt.top+gt.bottom,Nt=g(pt.width),Dt=g(pt.height);if(pt.boxSizing==="border-box"&&(Math.round(Nt+ft)!==X&&(Nt-=y(pt,"left","right")+ft),Math.round(Dt+Rt)!==at&&(Dt-=y(pt,"top","bottom")+Rt)),!S(Z)){var St=Math.round(Nt+ft)-X,xt=Math.round(Dt+Rt)-at;Math.abs(St)!==1&&(Nt-=St),Math.abs(xt)!==1&&(Dt-=xt)}return O(gt.left,gt.top,Nt,Dt)}var m=function(){return typeof SVGGraphicsElement!="undefined"?function(Z){return Z instanceof v(Z).SVGGraphicsElement}:function(Z){return Z instanceof v(Z).SVGElement&&typeof Z.getBBox=="function"}}();function S(Z){return Z===v(Z).document.documentElement}function P(Z){return s?m(Z)?M(Z):x(Z):b}function A(Z){var X=Z.x,at=Z.y,pt=Z.width,gt=Z.height,ft=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,Rt=Object.create(ft.prototype);return f(Rt,{x:X,y:at,width:pt,height:gt,top:at,right:X+pt,bottom:gt+at,left:X}),Rt}function O(Z,X,at,pt){return{x:Z,y:X,width:at,height:pt}}var R=function(){function Z(X){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=X}return Z.prototype.isActive=function(){var X=P(this.target);return this.contentRect_=X,X.width!==this.broadcastWidth||X.height!==this.broadcastHeight},Z.prototype.broadcastRect=function(){var X=this.contentRect_;return this.broadcastWidth=X.width,this.broadcastHeight=X.height,X},Z}(),H=function(){function Z(X,at){var pt=A(at);f(this,{target:X,contentRect:pt})}return Z}(),N=function(){function Z(X,at,pt){if(this.activeObservations_=[],this.observations_=new u,typeof X!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=X,this.controller_=at,this.callbackCtx_=pt}return Z.prototype.observe=function(X){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(X instanceof v(X).Element))throw new TypeError('parameter 1 is not of type "Element".');var at=this.observations_;at.has(X)||(at.set(X,new R(X)),this.controller_.addObserver(this),this.controller_.refresh())}},Z.prototype.unobserve=function(X){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(X instanceof v(X).Element))throw new TypeError('parameter 1 is not of type "Element".');var at=this.observations_;!at.has(X)||(at.delete(X),at.size||this.controller_.removeObserver(this))}},Z.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Z.prototype.gatherActive=function(){var X=this;this.clearActive(),this.observations_.forEach(function(at){at.isActive()&&X.activeObservations_.push(at)})},Z.prototype.broadcastActive=function(){if(!!this.hasActive()){var X=this.callbackCtx_,at=this.activeObservations_.map(function(pt){return new H(pt.target,pt.broadcastRect())});this.callback_.call(X,at,X),this.clearActive()}},Z.prototype.clearActive=function(){this.activeObservations_.splice(0)},Z.prototype.hasActive=function(){return this.activeObservations_.length>0},Z}(),K=typeof WeakMap!="undefined"?new WeakMap:new u,V=function(){function Z(X){if(!(this instanceof Z))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var at=l.getInstance(),pt=new N(X,at,this);K.set(this,pt)}return Z}();["observe","unobserve","disconnect"].forEach(function(Z){V.prototype[Z]=function(){var X;return(X=K.get(this))[Z].apply(X,arguments)}});var k=function(){return typeof h.ResizeObserver!="undefined"?h.ResizeObserver:V}();T.default=k}.call(T,e(225))},function(E,T,e){(function(t,u){u(T,e(22),e(515))})(this,function(t,u,s){"use strict";var h=1e-10;function r(et,st){var bt=n(et),Y=bt.filter(function(en){return c(en,et)}),rt=0,ot=0,$=[],Pt;if(Y.length>1){var yt=f(Y);for(Pt=0;Pt<Y.length;++Pt){var Ft=Y[Pt];Ft.angle=Math.atan2(Ft.x-yt.x,Ft.y-yt.y)}Y.sort(function(en,tn){return tn.angle-en.angle});var Qt=Y[Y.length-1];for(Pt=0;Pt<Y.length;++Pt){var ne=Y[Pt];ot+=(Qt.x+ne.x)*(ne.y-Qt.y);for(var Wt={x:(ne.x+Qt.x)/2,y:(ne.y+Qt.y)/2},$t=null,De=0;De<ne.parentIndex.length;++De)if(Qt.parentIndex.indexOf(ne.parentIndex[De])>-1){var Je=et[ne.parentIndex[De]],Qe=Math.atan2(ne.x-Je.x,ne.y-Je.y),de=Math.atan2(Qt.x-Je.x,Qt.y-Je.y),ue=de-Qe;ue<0&&(ue+=2*Math.PI);var Ne=de-ue/2,cn=a(Wt,{x:Je.x+Je.radius*Math.sin(Ne),y:Je.y+Je.radius*Math.cos(Ne)});cn>Je.radius*2&&(cn=Je.radius*2),($t===null||$t.width>cn)&&($t={circle:Je,width:cn,p1:ne,p2:Qt})}$t!==null&&($.push($t),rt+=i($t.circle.radius,$t.width),Qt=ne)}}else{var Fn=et[0];for(Pt=1;Pt<et.length;++Pt)et[Pt].radius<Fn.radius&&(Fn=et[Pt]);var wn=!1;for(Pt=0;Pt<et.length;++Pt)if(a(et[Pt],Fn)>Math.abs(Fn.radius-et[Pt].radius)){wn=!0;break}wn?rt=ot=0:(rt=Fn.radius*Fn.radius*Math.PI,$.push({circle:Fn,p1:{x:Fn.x,y:Fn.y+Fn.radius},p2:{x:Fn.x-h,y:Fn.y+Fn.radius},width:Fn.radius*2}))}return ot/=2,st&&(st.area=rt+ot,st.arcArea=rt,st.polygonArea=ot,st.arcs=$,st.innerPoints=Y,st.intersectionPoints=bt),rt+ot}function c(et,st){for(var bt=0;bt<st.length;++bt)if(a(et,st[bt])>st[bt].radius+h)return!1;return!0}function n(et){for(var st=[],bt=0;bt<et.length;++bt)for(var Y=bt+1;Y<et.length;++Y)for(var rt=l(et[bt],et[Y]),ot=0;ot<rt.length;++ot){var $=rt[ot];$.parentIndex=[bt,Y],st.push($)}return st}function i(et,st){return et*et*Math.acos(1-st/et)-(et-st)*Math.sqrt(st*(2*et-st))}function a(et,st){return Math.sqrt((et.x-st.x)*(et.x-st.x)+(et.y-st.y)*(et.y-st.y))}function o(et,st,bt){if(bt>=et+st)return 0;if(bt<=Math.abs(et-st))return Math.PI*Math.min(et,st)*Math.min(et,st);var Y=et-(bt*bt-st*st+et*et)/(2*bt),rt=st-(bt*bt-et*et+st*st)/(2*bt);return i(et,Y)+i(st,rt)}function l(et,st){var bt=a(et,st),Y=et.radius,rt=st.radius;if(bt>=Y+rt||bt<=Math.abs(Y-rt))return[];var ot=(Y*Y-rt*rt+bt*bt)/(2*bt),$=Math.sqrt(Y*Y-ot*ot),Pt=et.x+ot*(st.x-et.x)/bt,yt=et.y+ot*(st.y-et.y)/bt,Ft=-(st.y-et.y)*($/bt),Qt=-(st.x-et.x)*($/bt);return[{x:Pt+Ft,y:yt-Qt},{x:Pt-Ft,y:yt+Qt}]}function f(et){for(var st={x:0,y:0},bt=0;bt<et.length;++bt)st.x+=et[bt].x,st.y+=et[bt].y;return st.x/=et.length,st.y/=et.length,st}function v(et,st,bt,Y){Y=Y||{};var rt=Y.maxIterations||100,ot=Y.tolerance||1e-10,$=et(st),Pt=et(bt),yt=bt-st;if($*Pt>0)throw"Initial bisect points must have opposite signs";if($===0)return st;if(Pt===0)return bt;for(var Ft=0;Ft<rt;++Ft){yt/=2;var Qt=st+yt,ne=et(Qt);if(ne*$>=0&&(st=Qt),Math.abs(yt)<ot||ne===0)return Qt}return st+yt}function b(et){for(var st=new Array(et),bt=0;bt<et;++bt)st[bt]=0;return st}function g(et,st){return b(et).map(function(){return b(st)})}function y(et,st){for(var bt=0,Y=0;Y<et.length;++Y)bt+=et[Y]*st[Y];return bt}function _(et){return Math.sqrt(y(et,et))}function M(et,st,bt){for(var Y=0;Y<st.length;++Y)et[Y]=st[Y]*bt}function x(et,st,bt,Y,rt){for(var ot=0;ot<et.length;++ot)et[ot]=st*bt[ot]+Y*rt[ot]}function m(et,st,bt){bt=bt||{};var Y=bt.maxIterations||st.length*200,rt=bt.nonZeroDelta||1.05,ot=bt.zeroDelta||.001,$=bt.minErrorDelta||1e-6,Pt=bt.minErrorDelta||1e-5,yt=bt.rho!==void 0?bt.rho:1,Ft=bt.chi!==void 0?bt.chi:2,Qt=bt.psi!==void 0?bt.psi:-.5,ne=bt.sigma!==void 0?bt.sigma:.5,Wt,$t=st.length,De=new Array($t+1);De[0]=st,De[0].fx=et(st),De[0].id=0;for(var Je=0;Je<$t;++Je){var Qe=st.slice();Qe[Je]=Qe[Je]?Qe[Je]*rt:ot,De[Je+1]=Qe,De[Je+1].fx=et(Qe),De[Je+1].id=Je+1}function de(li){for(var Me=0;Me<li.length;Me++)De[$t][Me]=li[Me];De[$t].fx=li.fx}for(var ue=function(li,Me){return li.fx-Me.fx},Ne=st.slice(),cn=st.slice(),Fn=st.slice(),wn=st.slice(),en=0;en<Y;++en){if(De.sort(ue),bt.history){var tn=De.map(function(li){var Me=li.slice();return Me.fx=li.fx,Me.id=li.id,Me});tn.sort(function(li,Me){return li.id-Me.id}),bt.history.push({x:De[0].slice(),fx:De[0].fx,simplex:tn})}for(Wt=0,Je=0;Je<$t;++Je)Wt=Math.max(Wt,Math.abs(De[0][Je]-De[1][Je]));if(Math.abs(De[0].fx-De[$t].fx)<$&&Wt<Pt)break;for(Je=0;Je<$t;++Je){Ne[Je]=0;for(var xn=0;xn<$t;++xn)Ne[Je]+=De[xn][Je];Ne[Je]/=$t}var Bn=De[$t];if(x(cn,1+yt,Ne,-yt,Bn),cn.fx=et(cn),cn.fx<De[0].fx)x(wn,1+Ft,Ne,-Ft,Bn),wn.fx=et(wn),wn.fx<cn.fx?de(wn):de(cn);else if(cn.fx>=De[$t-1].fx){var vr=!1;if(cn.fx>Bn.fx?(x(Fn,1+Qt,Ne,-Qt,Bn),Fn.fx=et(Fn),Fn.fx<Bn.fx?de(Fn):vr=!0):(x(Fn,1-Qt*yt,Ne,Qt*yt,Bn),Fn.fx=et(Fn),Fn.fx<cn.fx?de(Fn):vr=!0),vr){if(ne>=1)break;for(Je=1;Je<De.length;++Je)x(De[Je],1-ne,De[0],ne,De[Je]),De[Je].fx=et(De[Je])}}else de(cn)}return De.sort(ue),{fx:De[0].fx,x:De[0]}}function S(et,st,bt,Y,rt,ot,$){var Pt=bt.fx,yt=y(bt.fxprime,st),Ft=Pt,Qt=Pt,ne=yt,Wt=0;rt=rt||1,ot=ot||1e-6,$=$||.1;function $t(Je,Qe,de){for(var ue=0;ue<16;++ue)if(rt=(Je+Qe)/2,x(Y.x,1,bt.x,rt,st),Ft=Y.fx=et(Y.x,Y.fxprime),ne=y(Y.fxprime,st),Ft>Pt+ot*rt*yt||Ft>=de)Qe=rt;else{if(Math.abs(ne)<=-$*yt)return rt;ne*(Qe-Je)>=0&&(Qe=Je),Je=rt,de=Ft}return 0}for(var De=0;De<10;++De){if(x(Y.x,1,bt.x,rt,st),Ft=Y.fx=et(Y.x,Y.fxprime),ne=y(Y.fxprime,st),Ft>Pt+ot*rt*yt||De&&Ft>=Qt)return $t(Wt,rt,Qt);if(Math.abs(ne)<=-$*yt)return rt;if(ne>=0)return $t(rt,Wt,Ft);Qt=Ft,Wt=rt,rt*=2}return rt}function P(et,st,bt){var Y={x:st.slice(),fx:0,fxprime:st.slice()},rt={x:st.slice(),fx:0,fxprime:st.slice()},ot=st.slice(),$,Pt,yt=1,Ft;bt=bt||{},Ft=bt.maxIterations||st.length*20,Y.fx=et(Y.x,Y.fxprime),$=Y.fxprime.slice(),M($,Y.fxprime,-1);for(var Qt=0;Qt<Ft;++Qt){if(yt=S(et,$,Y,rt,yt),bt.history&&bt.history.push({x:Y.x.slice(),fx:Y.fx,fxprime:Y.fxprime.slice(),alpha:yt}),!yt)M($,Y.fxprime,-1);else{x(ot,1,rt.fxprime,-1,Y.fxprime);var ne=y(Y.fxprime,Y.fxprime),Wt=Math.max(0,y(ot,rt.fxprime)/ne);x($,Wt,$,-1,rt.fxprime),Pt=Y,Y=rt,rt=Pt}if(_(Y.fxprime)<=1e-5)break}return bt.history&&bt.history.push({x:Y.x.slice(),fx:Y.fx,fxprime:Y.fxprime.slice(),alpha:yt}),Y}function A(et,st){st=st||{},st.maxIterations=st.maxIterations||500;var bt=st.initialLayout||V,Y=st.lossFunction||X;et=H(et);var rt=bt(et,st),ot=[],$=[],Pt;for(Pt in rt)rt.hasOwnProperty(Pt)&&(ot.push(rt[Pt].x),ot.push(rt[Pt].y),$.push(Pt));for(var yt=m(function(ne){for(var Wt={},$t=0;$t<$.length;++$t){var De=$[$t];Wt[De]={x:ne[2*$t],y:ne[2*$t+1],radius:rt[De].radius}}return Y(Wt,et)},ot,st),Ft=yt.x,Qt=0;Qt<$.length;++Qt)Pt=$[Qt],rt[Pt].x=Ft[2*Qt],rt[Pt].y=Ft[2*Qt+1];return rt}var O=1e-10;function R(et,st,bt){return Math.min(et,st)*Math.min(et,st)*Math.PI<=bt+O?Math.abs(et-st):v(function(Y){return o(et,st,Y)-bt},0,et+st)}function H(et){et=et.slice();var st=[],bt={},Y,rt,ot,$;for(Y=0;Y<et.length;++Y){var Pt=et[Y];Pt.sets.length==1?st.push(Pt.sets[0]):Pt.sets.length==2&&(ot=Pt.sets[0],$=Pt.sets[1],bt[[ot,$]]=!0,bt[[$,ot]]=!0)}for(st.sort(function(yt,Ft){return yt>Ft}),Y=0;Y<st.length;++Y)for(ot=st[Y],rt=Y+1;rt<st.length;++rt)$=st[rt],[ot,$]in bt||et.push({sets:[ot,$],size:0});return et}function N(et,st,bt){var Y=g(st.length,st.length),rt=g(st.length,st.length);return et.filter(function(ot){return ot.sets.length==2}).map(function(ot){var $=bt[ot.sets[0]],Pt=bt[ot.sets[1]],yt=Math.sqrt(st[$].size/Math.PI),Ft=Math.sqrt(st[Pt].size/Math.PI),Qt=R(yt,Ft,ot.size);Y[$][Pt]=Y[Pt][$]=Qt;var ne=0;ot.size+1e-10>=Math.min(st[$].size,st[Pt].size)?ne=1:ot.size<=1e-10&&(ne=-1),rt[$][Pt]=rt[Pt][$]=ne}),{distances:Y,constraints:rt}}function K(et,st,bt,Y){var rt=0,ot;for(ot=0;ot<st.length;++ot)st[ot]=0;for(ot=0;ot<bt.length;++ot)for(var $=et[2*ot],Pt=et[2*ot+1],yt=ot+1;yt<bt.length;++yt){var Ft=et[2*yt],Qt=et[2*yt+1],ne=bt[ot][yt],Wt=Y[ot][yt],$t=(Ft-$)*(Ft-$)+(Qt-Pt)*(Qt-Pt),De=Math.sqrt($t),Je=$t-ne*ne;Wt>0&&De<=ne||Wt<0&&De>=ne||(rt+=2*Je*Je,st[2*ot]+=4*Je*($-Ft),st[2*ot+1]+=4*Je*(Pt-Qt),st[2*yt]+=4*Je*(Ft-$),st[2*yt+1]+=4*Je*(Qt-Pt))}return rt}function V(et,st){var bt=Z(et,st),Y=st.lossFunction||X;if(et.length>=8){var rt=k(et,st),ot=Y(rt,et),$=Y(bt,et);ot+1e-8<$&&(bt=rt)}return bt}function k(et,st){st=st||{};var bt=st.restarts||10,Y=[],rt={},ot;for(ot=0;ot<et.length;++ot){var $=et[ot];$.sets.length==1&&(rt[$.sets[0]]=Y.length,Y.push($))}var Pt=N(et,Y,rt),yt=Pt.distances,Ft=Pt.constraints,Qt=_(yt.map(_))/yt.length;yt=yt.map(function(ue){return ue.map(function(Ne){return Ne/Qt})});var ne=function(ue,Ne){return K(ue,Ne,yt,Ft)},Wt,$t;for(ot=0;ot<bt;++ot){var De=b(yt.length*2).map(Math.random);$t=P(ne,De,st),(!Wt||$t.fx<Wt.fx)&&(Wt=$t)}var Je=Wt.x,Qe={};for(ot=0;ot<Y.length;++ot){var de=Y[ot];Qe[de.sets[0]]={x:Je[2*ot]*Qt,y:Je[2*ot+1]*Qt,radius:Math.sqrt(de.size/Math.PI)}}if(st.history)for(ot=0;ot<st.history.length;++ot)M(st.history[ot].x,Qt);return Qe}function Z(et,st){for(var bt=st&&st.lossFunction?st.lossFunction:X,Y={},rt={},ot,$=0;$<et.length;++$){var Pt=et[$];Pt.sets.length==1&&(ot=Pt.sets[0],Y[ot]={x:1e10,y:1e10,rowid:Y.length,size:Pt.size,radius:Math.sqrt(Pt.size/Math.PI)},rt[ot]=[])}for(et=et.filter(function(ge){return ge.sets.length==2}),$=0;$<et.length;++$){var yt=et[$],Ft=yt.hasOwnProperty("weight")?yt.weight:1,Qt=yt.sets[0],ne=yt.sets[1];yt.size+O>=Math.min(Y[Qt].size,Y[ne].size)&&(Ft=0),rt[Qt].push({set:ne,size:yt.size,weight:Ft}),rt[ne].push({set:Qt,size:yt.size,weight:Ft})}var Wt=[];for(ot in rt)if(rt.hasOwnProperty(ot)){var $t=0;for($=0;$<rt[ot].length;++$)$t+=rt[ot][$].size*rt[ot][$].weight;Wt.push({set:ot,size:$t})}function De(ge,Ht){return Ht.size-ge.size}Wt.sort(De);var Je={};function Qe(ge){return ge.set in Je}function de(ge,Ht){Y[Ht].x=ge.x,Y[Ht].y=ge.y,Je[Ht]=!0}for(de({x:0,y:0},Wt[0].set),$=1;$<Wt.length;++$){var ue=Wt[$].set,Ne=rt[ue].filter(Qe);if(ot=Y[ue],Ne.sort(De),Ne.length===0)throw"ERROR: missing pairwise overlap information";for(var cn=[],Fn=0;Fn<Ne.length;++Fn){var wn=Y[Ne[Fn].set],en=R(ot.radius,wn.radius,Ne[Fn].size);cn.push({x:wn.x+en,y:wn.y}),cn.push({x:wn.x-en,y:wn.y}),cn.push({y:wn.y+en,x:wn.x}),cn.push({y:wn.y-en,x:wn.x});for(var tn=Fn+1;tn<Ne.length;++tn)for(var xn=Y[Ne[tn].set],Bn=R(ot.radius,xn.radius,Ne[tn].size),vr=l({x:wn.x,y:wn.y,radius:en},{x:xn.x,y:xn.y,radius:Bn}),li=0;li<vr.length;++li)cn.push(vr[li])}var Me=1e50,Pe=cn[0];for(Fn=0;Fn<cn.length;++Fn){Y[ue].x=cn[Fn].x,Y[ue].y=cn[Fn].y;var te=bt(Y,et);te<Me&&(Me=te,Pe=cn[Fn])}de(Pe,ue)}return Y}function X(et,st){var bt=0;function Y(Qt){return Qt.map(function(ne){return et[ne]})}for(var rt=0;rt<st.length;++rt){var ot=st[rt],$;if(ot.sets.length!=1){if(ot.sets.length==2){var Pt=et[ot.sets[0]],yt=et[ot.sets[1]];$=o(Pt.radius,yt.radius,a(Pt,yt))}else $=r(Y(ot.sets));var Ft=ot.hasOwnProperty("weight")?ot.weight:1;bt+=Ft*($-ot.size)*($-ot.size)}}return bt}function at(et,st,bt){bt===null?et.sort(function(Je,Qe){return Qe.radius-Je.radius}):et.sort(bt);var Y;if(et.length>0){var rt=et[0].x,ot=et[0].y;for(Y=0;Y<et.length;++Y)et[Y].x-=rt,et[Y].y-=ot}if(et.length==2){var $=a(et[0],et[1]);$<Math.abs(et[1].radius-et[0].radius)&&(et[1].x=et[0].x+et[0].radius-et[1].radius-1e-10,et[1].y=et[0].y)}if(et.length>1){var Pt=Math.atan2(et[1].x,et[1].y)-st,yt=Math.cos(Pt),Ft=Math.sin(Pt),Qt,ne;for(Y=0;Y<et.length;++Y)Qt=et[Y].x,ne=et[Y].y,et[Y].x=yt*Qt-Ft*ne,et[Y].y=Ft*Qt+yt*ne}if(et.length>2){for(var Wt=Math.atan2(et[2].x,et[2].y)-st;Wt<0;)Wt+=2*Math.PI;for(;Wt>2*Math.PI;)Wt-=2*Math.PI;if(Wt>Math.PI){var $t=et[1].y/(1e-10+et[1].x);for(Y=0;Y<et.length;++Y){var De=(et[Y].x+$t*et[Y].y)/(1+$t*$t);et[Y].x=2*De-et[Y].x,et[Y].y=2*De*$t-et[Y].y}}}}function pt(et){et.map(function(Ft){Ft.parent=Ft});function st(Ft){return Ft.parent!==Ft&&(Ft.parent=st(Ft.parent)),Ft.parent}function bt(Ft,Qt){var ne=st(Ft),Wt=st(Qt);ne.parent=Wt}for(var Y=0;Y<et.length;++Y)for(var rt=Y+1;rt<et.length;++rt){var ot=et[Y].radius+et[rt].radius;a(et[Y],et[rt])+1e-10<ot&&bt(et[rt],et[Y])}var $={},Pt;for(Y=0;Y<et.length;++Y)Pt=st(et[Y]).parent.setid,Pt in $||($[Pt]=[]),$[Pt].push(et[Y]);et.map(function(Ft){delete Ft.parent});var yt=[];for(Pt in $)$.hasOwnProperty(Pt)&&yt.push($[Pt]);return yt}function gt(et){var st=function(bt){var Y=Math.max.apply(null,et.map(function(ot){return ot[bt]+ot.radius})),rt=Math.min.apply(null,et.map(function(ot){return ot[bt]-ot.radius}));return{max:Y,min:rt}};return{xRange:st("x"),yRange:st("y")}}function ft(et,st,bt){st===null&&(st=Math.PI/2);var Y=[],rt,ot;for(ot in et)if(et.hasOwnProperty(ot)){var $=et[ot];Y.push({x:$.x,y:$.y,radius:$.radius,setid:ot})}var Pt=pt(Y);for(rt=0;rt<Pt.length;++rt){at(Pt[rt],st,bt);var yt=gt(Pt[rt]);Pt[rt].size=(yt.xRange.max-yt.xRange.min)*(yt.yRange.max-yt.yRange.min),Pt[rt].bounds=yt}Pt.sort(function(De,Je){return Je.size-De.size}),Y=Pt[0];var Ft=Y.bounds,Qt=(Ft.xRange.max-Ft.xRange.min)/50;function ne(De,Je,Qe){if(!!De){var de=De.bounds,ue,Ne,cn;Je?ue=Ft.xRange.max-de.xRange.min+Qt:(ue=Ft.xRange.max-de.xRange.max,cn=(de.xRange.max-de.xRange.min)/2-(Ft.xRange.max-Ft.xRange.min)/2,cn<0&&(ue+=cn)),Qe?Ne=Ft.yRange.max-de.yRange.min+Qt:(Ne=Ft.yRange.max-de.yRange.max,cn=(de.yRange.max-de.yRange.min)/2-(Ft.yRange.max-Ft.yRange.min)/2,cn<0&&(Ne+=cn));for(var Fn=0;Fn<De.length;++Fn)De[Fn].x+=ue,De[Fn].y+=Ne,Y.push(De[Fn])}}for(var Wt=1;Wt<Pt.length;)ne(Pt[Wt],!0,!1),ne(Pt[Wt+1],!1,!0),ne(Pt[Wt+2],!0,!0),Wt+=3,Ft=gt(Y);var $t={};for(rt=0;rt<Y.length;++rt)$t[Y[rt].setid]=Y[rt];return $t}function Rt(et,st,bt,Y){var rt=[],ot=[];for(var $ in et)et.hasOwnProperty($)&&(ot.push($),rt.push(et[$]));st-=2*Y,bt-=2*Y;var Pt=gt(rt),yt=Pt.xRange,Ft=Pt.yRange;if(yt.max==yt.min||Ft.max==Ft.min)return console.log("not scaling solution: zero size detected"),et;for(var Qt=st/(yt.max-yt.min),ne=bt/(Ft.max-Ft.min),Wt=Math.min(ne,Qt),$t=(st-(yt.max-yt.min)*Wt)/2,De=(bt-(Ft.max-Ft.min)*Wt)/2,Je={},Qe=0;Qe<rt.length;++Qe){var de=rt[Qe];Je[ot[Qe]]={radius:Wt*de.radius,x:Y+$t+(de.x-yt.min)*Wt,y:Y+De+(de.y-Ft.min)*Wt}}return Je}function Nt(){var et=600,st=350,bt=15,Y=1e3,rt=Math.PI/2,ot=!0,$=!0,Pt=!0,yt=null,Ft=null,Qt={},ne=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Wt=0,$t=function(de){if(de in Qt)return Qt[de];var ue=Qt[de]=ne[Wt];return Wt+=1,Wt>=ne.length&&(Wt=0),ue},De=A,Je=X;function Qe(de){var ue=de.datum(),Ne={};ue.forEach(function(xe){xe.size==0&&xe.sets.length==1&&(Ne[xe.sets[0]]=1)}),ue=ue.filter(function(xe){return!xe.sets.some(function(qe){return qe in Ne})});var cn={},Fn={};if(ue.length>0){var wn=De(ue,{lossFunction:Je});ot&&(wn=ft(wn,rt,Ft)),cn=Rt(wn,et,st,bt),Fn=it(cn,ue)}var en={};ue.forEach(function(xe){xe.label&&(en[xe.sets]=xe.label)});function tn(xe){if(xe.sets in en)return en[xe.sets];if(xe.sets.length==1)return""+xe.sets[0]}de.selectAll("svg").data([cn]).enter().append("svg");var xn=de.select("svg").attr("width",et).attr("height",st),Bn={},vr=!1;xn.selectAll(".venn-area path").each(function(xe){var qe=u.select(this).attr("d");xe.sets.length==1&&qe&&(vr=!0,Bn[xe.sets[0]]=q(qe))});var li=function(xe){return function(qe){var zn=xe.sets.map(function(ar){var _n=Bn[ar],Cn=cn[ar];return _n||(_n={x:et/2,y:st/2,radius:1}),Cn||(Cn={x:et/2,y:st/2,radius:1}),{x:_n.x*(1-qe)+Cn.x*qe,y:_n.y*(1-qe)+Cn.y*qe,radius:_n.radius*(1-qe)+Cn.radius*qe}});return mt(zn)}},Me=xn.selectAll(".venn-area").data(ue,function(xe){return xe.sets}),Pe=Me.enter().append("g").attr("class",function(xe){return"venn-area venn-"+(xe.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(xe){return xe.sets.join("_")}),te=Pe.append("path"),ge=Pe.append("text").attr("class","label").text(function(xe){return tn(xe)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",et/2).attr("y",st/2);Pt&&(te.style("fill-opacity","0").filter(function(xe){return xe.sets.length==1}).style("fill",function(xe){return $t(xe.sets)}).style("fill-opacity",".25"),ge.style("fill",function(xe){return xe.sets.length==1?$t(xe.sets):"#444"}));var Ht=de;vr?(Ht=de.transition("venn").duration(Y),Ht.selectAll("path").attrTween("d",li)):Ht.selectAll("path").attr("d",function(xe){return mt(xe.sets.map(function(qe){return cn[qe]}))});var re=Ht.selectAll("text").filter(function(xe){return xe.sets in Fn}).text(function(xe){return tn(xe)}).attr("x",function(xe){return Math.floor(Fn[xe.sets].x)}).attr("y",function(xe){return Math.floor(Fn[xe.sets].y)});$&&(vr?"on"in re?re.on("end",Dt(cn,tn)):re.each("end",Dt(cn,tn)):re.each(Dt(cn,tn)));var Te=Me.exit().transition("venn").duration(Y).remove();Te.selectAll("path").attrTween("d",li);var ae=Te.selectAll("text").attr("x",et/2).attr("y",st/2);return yt!==null&&(ge.style("font-size","0px"),re.style("font-size",yt),ae.style("font-size","0px")),{circles:cn,textCentres:Fn,nodes:Me,enter:Pe,update:Ht,exit:Te}}return Qe.wrap=function(de){return arguments.length?($=de,Qe):$},Qe.width=function(de){return arguments.length?(et=de,Qe):et},Qe.height=function(de){return arguments.length?(st=de,Qe):st},Qe.padding=function(de){return arguments.length?(bt=de,Qe):bt},Qe.colours=function(de){return arguments.length?($t=de,Qe):$t},Qe.fontSize=function(de){return arguments.length?(yt=de,Qe):yt},Qe.duration=function(de){return arguments.length?(Y=de,Qe):Y},Qe.layoutFunction=function(de){return arguments.length?(De=de,Qe):De},Qe.normalize=function(de){return arguments.length?(ot=de,Qe):ot},Qe.styled=function(de){return arguments.length?(Pt=de,Qe):Pt},Qe.orientation=function(de){return arguments.length?(rt=de,Qe):rt},Qe.orientationOrder=function(de){return arguments.length?(Ft=de,Qe):Ft},Qe.lossFunction=function(de){return arguments.length?(Je=de,Qe):Je},Qe}function Dt(et,st){return function(){for(var bt=u.select(this),Y=bt.datum(),rt=et[Y.sets[0]].radius||50,ot=st(Y)||"",$=ot.split(/\s+/).reverse(),Pt=3,yt=(ot.length+$.length)/Pt,Ft=$.pop(),Qt=[Ft],ne,Wt=0,$t=1.1,De=bt.text(null).append("tspan").text(Ft);Ft=$.pop(),!!Ft;)Qt.push(Ft),ne=Qt.join(" "),De.text(ne),ne.length>yt&&De.node().getComputedTextLength()>rt&&(Qt.pop(),De.text(Qt.join(" ")),Qt=[Ft],De=bt.append("tspan").text(Ft),Wt++);var Je=.35-Wt*$t/2,Qe=bt.attr("x"),de=bt.attr("y");bt.selectAll("tspan").attr("x",Qe).attr("y",de).attr("dy",function(ue,Ne){return Je+Ne*$t+"em"})}}function St(et,st,bt){var Y=st[0].radius-a(st[0],et),rt,ot;for(rt=1;rt<st.length;++rt)ot=st[rt].radius-a(st[rt],et),ot<=Y&&(Y=ot);for(rt=0;rt<bt.length;++rt)ot=a(bt[rt],et)-bt[rt].radius,ot<=Y&&(Y=ot);return Y}function xt(et,st){var bt=[],Y;for(Y=0;Y<et.length;++Y){var rt=et[Y];bt.push({x:rt.x,y:rt.y}),bt.push({x:rt.x+rt.radius/2,y:rt.y}),bt.push({x:rt.x-rt.radius/2,y:rt.y}),bt.push({x:rt.x,y:rt.y+rt.radius/2}),bt.push({x:rt.x,y:rt.y-rt.radius/2})}var ot=bt[0],$=St(bt[0],et,st);for(Y=1;Y<bt.length;++Y){var Pt=St(bt[Y],et,st);Pt>=$&&(ot=bt[Y],$=Pt)}var yt=m(function(Wt){return-1*St({x:Wt[0],y:Wt[1]},et,st)},[ot.x,ot.y],{maxIterations:500,minErrorDelta:1e-10}).x,Ft={x:yt[0],y:yt[1]},Qt=!0;for(Y=0;Y<et.length;++Y)if(a(Ft,et[Y])>et[Y].radius){Qt=!1;break}for(Y=0;Y<st.length;++Y)if(a(Ft,st[Y])<st[Y].radius){Qt=!1;break}if(!Qt)if(et.length==1)Ft={x:et[0].x,y:et[0].y};else{var ne={};r(et,ne),ne.arcs.length===0?Ft={x:0,y:-1e3,disjoint:!0}:ne.arcs.length==1?Ft={x:ne.arcs[0].circle.x,y:ne.arcs[0].circle.y}:st.length?Ft=xt(et,[]):Ft=f(ne.arcs.map(function(Wt){return Wt.p1}))}return Ft}function Ot(et){var st={},bt=[];for(var Y in et)bt.push(Y),st[Y]=[];for(var rt=0;rt<bt.length;rt++)for(var ot=et[bt[rt]],$=rt+1;$<bt.length;++$){var Pt=et[bt[$]],yt=a(ot,Pt);yt+Pt.radius<=ot.radius+1e-10?st[bt[$]].push(bt[rt]):yt+ot.radius<=Pt.radius+1e-10&&st[bt[rt]].push(bt[$])}return st}function it(et,st){for(var bt={},Y=Ot(et),rt=0;rt<st.length;++rt){for(var ot=st[rt].sets,$={},Pt={},yt=0;yt<ot.length;++yt){$[ot[yt]]=!0;for(var Ft=Y[ot[yt]],Qt=0;Qt<Ft.length;++Qt)Pt[Ft[Qt]]=!0}var ne=[],Wt=[];for(var $t in et)$t in $?ne.push(et[$t]):$t in Pt||Wt.push(et[$t]);var De=xt(ne,Wt);bt[ot]=De,De.disjoint&&st[rt].size>0&&console.log("WARNING: area "+ot+" not represented on screen")}return bt}function At(et,st){for(var bt=Ot(et.selectAll("svg").datum()),Y={},rt=0;rt<st.sets.length;++rt){var ot=st.sets[rt];for(var $ in bt)for(var Pt=bt[$],yt=0;yt<Pt.length;++yt)if(Pt[yt]==ot){Y[$]=!0;break}}function Ft(Qt){for(var ne=0;ne<Qt.length;++ne)if(!(Qt[ne]in Y))return!1;return!0}et.selectAll("g").sort(function(Qt,ne){return Qt.sets.length!=ne.sets.length?Qt.sets.length-ne.sets.length:Qt==st?Ft(ne.sets)?-1:1:ne==st?Ft(Qt.sets)?1:-1:ne.size-Qt.size})}function z(et,st,bt){var Y=[];return Y.push(`
M`,et,st),Y.push(`
m`,-bt,0),Y.push(`
a`,bt,bt,0,1,0,bt*2,0),Y.push(`
a`,bt,bt,0,1,0,-bt*2,0),Y.join(" ")}function q(et){var st=et.split(" ");return{x:parseFloat(st[1]),y:parseFloat(st[2]),radius:-parseFloat(st[4])}}function mt(et){var st={};r(et,st);var bt=st.arcs;if(bt.length===0)return"M 0 0";if(bt.length==1){var Y=bt[0].circle;return z(Y.x,Y.y,Y.radius)}else{for(var rt=[`
M`,bt[0].p2.x,bt[0].p2.y],ot=0;ot<bt.length;++ot){var $=bt[ot],Pt=$.circle.radius,yt=$.width>Pt;rt.push(`
A`,Pt,Pt,0,yt?1:0,1,$.p1.x,$.p1.y)}return rt.join(" ")}}t.intersectionArea=r,t.circleCircleIntersection=l,t.circleOverlap=o,t.circleArea=i,t.distance=a,t.venn=A,t.greedyLayout=Z,t.scaleSolution=Rt,t.normalizeSolution=ft,t.bestInitialLayout=V,t.lossFunction=X,t.disjointCluster=pt,t.distanceFromIntersectArea=R,t.VennDiagram=Nt,t.wrapText=Dt,t.computeTextCentres=it,t.computeTextCentre=xt,t.sortAreas=At,t.circlePath=z,t.circleFromPath=q,t.intersectionAreaPath=mt,Object.defineProperty(t,"__esModule",{value:!0})})},function(E,T,e){"use strict";var t=function(){};t=function(u,s,h){var r=arguments.length;h=new Array(r>2?r-2:0);for(var c=2;c<r;c++)h[c-2]=arguments[c];if(s===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(s.length<10||/^[s\W]*$/.test(s))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+s);if(!u){var n=0,i="Warning: "+s.replace(/%s/g,function(){return h[n++]});typeof console!="undefined"&&console.error(i);try{throw new Error(i)}catch(a){}}},E.exports=t},function(E,T,e){e(64),E.exports=e(64)}])})},yU0y:function(Se,dt,L){"use strict";L.d(dt,"b",function(){return U}),L.d(dt,"a",function(){return E}),L.d(dt,"c",function(){return T});var U=1e-6,E=typeof Float32Array!="undefined"?Float32Array:Array,T=Math.random;function e(h){E=h}var t=Math.PI/180;function u(h){return h*t}function s(h,r){return Math.abs(h-r)<=U*Math.max(1,Math.abs(h),Math.abs(r))}Math.hypot||(Math.hypot=function(){for(var h=0,r=arguments.length;r--;)h+=arguments[r]*arguments[r];return Math.sqrt(h)})},yXPU:function(Se,dt){function L(E,T,e,t,u,s,h){try{var r=E[s](h),c=r.value}catch(n){e(n);return}r.done?T(c):Promise.resolve(c).then(t,u)}function U(E){return function(){var T=this,e=arguments;return new Promise(function(t,u){var s=E.apply(T,e);function h(c){L(s,t,u,h,r,"next",c)}function r(c){L(s,t,u,h,r,"throw",c)}h(void 0)})}}Se.exports=U,Se.exports.default=Se.exports,Se.exports.__esModule=!0},ycre:function(Se,dt,L){var U=L("711d"),E=U("length");Se.exports=E},z4Hk:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingWhenSyntax=void 0;var U=L("406g"),E=L("RR/i"),T=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=E.namedConstraint(t),new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var u=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return u},new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(t,u){return this._binding.constraint=E.taggedConstraint(t)(u),new U.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(u){return E.typeConstraint(t)(u.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(u){return E.namedConstraint(t)(u.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(t,u){return this._binding.constraint=function(s){return E.taggedConstraint(t)(u)(s.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,E.typeConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,E.typeConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,E.namedConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,E.namedConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,u){return this._binding.constraint=function(s){return E.traverseAncerstors(s,E.taggedConstraint(t)(u))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(t,u){return this._binding.constraint=function(s){return!E.traverseAncerstors(s,E.taggedConstraint(t)(u))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,t)},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,t)},new U.BindingOnSyntax(this._binding)},e}();dt.BindingWhenSyntax=T},zEVN:function(Se,dt,L){var U=L("Gi0A"),E=L("sEf8"),T=L("mdPL"),e=T&&T.isMap,t=e?E(e):U;Se.exports=t},zZ0H:function(Se,dt){function L(U){return U}Se.exports=L},zZPE:function(Se,dt){var L="[object Object]";function U(i){var a=!1;if(i!=null&&typeof i.toString!="function")try{a=!!(i+"")}catch(o){}return a}function E(i,a){return function(o){return i(a(o))}}var T=Function.prototype,e=Object.prototype,t=T.toString,u=e.hasOwnProperty,s=t.call(Object),h=e.toString,r=E(Object.getPrototypeOf,Object);function c(i){return!!i&&typeof i=="object"}function n(i){if(!c(i)||h.call(i)!=L||U(i))return!1;var a=r(i);if(a===null)return!0;var o=u.call(a,"constructor")&&a.constructor;return typeof o=="function"&&o instanceof o&&t.call(o)==s}Se.exports=n},zoYe:function(Se,dt,L){var U=L("nmnc"),E=L("eUgh"),T=L("Z0cm"),e=L("/9aa"),t=1/0,u=U?U.prototype:void 0,s=u?u.toString:void 0;function h(r){if(typeof r=="string")return r;if(T(r))return E(r,h)+"";if(e(r))return s?s.call(r):"";var c=r+"";return c=="0"&&1/r==-t?"-0":c}Se.exports=h},zvhG:function(Se,dt){Se.exports=L;function L(U,E,T,e){this.cx=3*U,this.bx=3*(T-U)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*E,this.by=3*(e-E)-this.cy,this.ay=1-this.cy-this.by,this.p1x=U,this.p1y=e,this.p2x=T,this.p2y=e}L.prototype.sampleCurveX=function(U){return((this.ax*U+this.bx)*U+this.cx)*U},L.prototype.sampleCurveY=function(U){return((this.ay*U+this.by)*U+this.cy)*U},L.prototype.sampleCurveDerivativeX=function(U){return(3*this.ax*U+2*this.bx)*U+this.cx},L.prototype.solveCurveX=function(U,E){typeof E=="undefined"&&(E=1e-6);var T,e,t,u,s;for(t=U,s=0;s<8;s++){if(u=this.sampleCurveX(t)-U,Math.abs(u)<E)return t;var h=this.sampleCurveDerivativeX(t);if(Math.abs(h)<1e-6)break;t=t-u/h}if(T=0,e=1,t=U,t<T)return T;if(t>e)return e;for(;T<e;){if(u=this.sampleCurveX(t),Math.abs(u-U)<E)return t;U>u?T=t:e=t,t=(e-T)*.5+T}return t},L.prototype.solve=function(U,E){return this.sampleCurveY(this.solveCurveX(U,E))}},zxMA:function(Se,dt,L){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.QueryableString=void 0;var U=function(){function E(T){this.str=T}return E.prototype.startsWith=function(T){return this.str.indexOf(T)===0},E.prototype.endsWith=function(T){var e="",t=T.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},t)},E.prototype.contains=function(T){return this.str.indexOf(T)!==-1},E.prototype.equals=function(T){return this.str===T},E.prototype.value=function(){return this.str},E}();dt.QueryableString=U}}]);
